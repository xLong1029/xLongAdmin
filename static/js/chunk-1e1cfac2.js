(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e1cfac2"],{2383:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"g-content"},[n("div",{staticClass:"m-query-form fr"},[n("Form",{ref:"queryForm",attrs:{model:t.queryForm}},[n("Form-item",{staticClass:"query-item"},[n("Input",{attrs:{placeholder:"版块编号"},model:{value:t.queryForm.id,callback:function(e){t.$set(t.queryForm,"id",e)},expression:"queryForm.id"}})],1),n("Form-item",{staticClass:"query-item"},[n("Input",{attrs:{placeholder:"版块标题"},model:{value:t.queryForm.title,callback:function(e){t.$set(t.queryForm,"title",e)},expression:"queryForm.title"}})],1),n("Form-item",{staticClass:"query-item"},[n("Select",{attrs:{placeholder:"版块类型"},model:{value:t.queryForm.type,callback:function(e){t.$set(t.queryForm,"type",e)},expression:"queryForm.type"}},[n("Option",{attrs:{value:""}},[t._v("全部")]),n("Option",{attrs:{value:"1"}},[t._v("行业分类")]),n("Option",{attrs:{value:"2"}},[t._v("地区分类")])],1)],1),n("Form-item",{staticClass:"fl"},[n("Button",{staticClass:"query-button",attrs:{type:"primary"},on:{click:function(e){return t.query("queryForm","")}}},[t._v("查询")]),n("Button",{staticClass:"query-button",attrs:{type:"default"},on:{click:function(e){return t.resetQuery("queryForm")}}},[t._v("重置")])],1)],1)],1),n("div",{staticClass:"m-operation fl"},[n("Button",{staticClass:"operation-btn",attrs:{type:"primary"},on:{click:t.addSection}},[t._v("新增")]),n("Button",{staticClass:"operation-btn",attrs:{disabled:0==t.selectList.length,type:"warning"},on:{click:t.deleteData}},[t._v("删除")])],1),n("div",{staticClass:"clearfix"}),t.pageLoading?n("Loading"):n("div",[n("Table",{staticClass:"m-table-list",attrs:{border:"",columns:t.tableList,data:t.listData},on:{"on-selection-change":t.setSelectList}})],1),n("Page",{attrs:{"class-name":"m-page","show-elevator":"","show-sizer":"","show-total":"",total:t.page.dataCount,"page-size":t.page.pageSize,current:t.page.pageNo,"page-size-opts":t.page.pageSizeOpts},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}),n("div",{staticClass:"clearfix"}),n("Modal",{attrs:{width:"500"},on:{"on-cancel":function(e){return t.closeModal("paramsForm")}},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("p",{attrs:{slot:"header"},slot:"header"},[n("span",{domProps:{textContent:t._s(""==t.paramsForm.title?"新增版块":"编辑版块")}})]),n("div",[n("Form",{ref:"paramsForm",attrs:{model:t.paramsForm,rules:t.validate,"label-width":100}},[n("Form-item",{attrs:{label:"版块标题：",prop:"title"}},[n("Input",{model:{value:t.paramsForm.title,callback:function(e){t.$set(t.paramsForm,"title",e)},expression:"paramsForm.title"}})],1),n("Form-item",{attrs:{label:"版块分类：",prop:"type"}},[n("Radio-group",{model:{value:t.paramsForm.type,callback:function(e){t.$set(t.paramsForm,"type",e)},expression:"paramsForm.type"}},[n("Radio",{attrs:{label:1}},[t._v("行业分类")]),n("Radio",{attrs:{label:2}},[t._v("地区分类")])],1)],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{size:"large"},on:{click:function(e){return t.closeModal("paramsForm")}}},[t._v("取消")]),n("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.operation("paramsForm",t.operateType)}}},[t._v("确定")])],1)])],1)},r=[],i=n("7618"),o=(n("7f7f"),n("be51")),s=n("ba7e"),c=n("d7fd"),l=n("1b62"),u={components:{Loading:o["a"]},mixins:[l["e"],l["d"],l["c"]],computed:{apiGetList:function(){var t=this;return function(){return s["a"].GetSecList(t.queryForm,t.page.pageNo,t.page.pageSize)}},apiAdd:function(){var t=this;return function(){return s["a"].AddSection(t.paramsForm)}},apiEdit:function(){var t=this;return function(){return s["a"].EditSection(t.paramsForm,t.editId)}},apiDelete:function(){var t=this;return function(){return s["a"].DeleteSec(t.selectList)}}},data:function(){var t=this;return{pageLoading:!0,showModal:!1,paramsForm:{title:"",type:1},editId:"",operateType:0,validate:{title:[{required:!0,message:"版块标题不能为空",trigger:"blur"}]},queryForm:{id:"",title:"",type:""},tableList:[{title:"全选",type:"selection",key:"selectAll",width:"60",align:"center"},{title:"版块编号",key:"id",align:"center"},{title:"版块标题",key:"title",align:"center"},{title:"版块类型",key:"type",align:"center",render:function(t,e){return t("span",{},1==e.row.type?"行业分类":"地区分类")}},{title:"操作",key:"operation",width:"200",align:"center",render:function(e,n){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:"10px"},on:{click:function(){t.openModel(n.row),t.operateType=2}}},"编辑"),c["a"].gotoDetail(e,n,t,"内容管理","ContManage")])}}],listData:[]}},created:function(){this.$store.commit("SET_BREADCRUMB",[{name:"首页",path:"/Home"},{name:"版块列表",path:""}]),this.getTableList()},methods:{setListData:function(t){t.length>0?this.listData=t.map((function(t){return{id:t.objectId,title:t.title,type:t.type}})):this.listData=[]},closeModal:function(t){this.showModal=!1,this.$refs[t].resetFields()},openModel:function(t){console.log(Object(i["a"])(t.type)),this.showModal=!0,this.paramsForm.title=t.title,this.paramsForm.type=t.type,this.editId=t.id},operation:function(t,e){var n=this;this.$refs[t].validate((function(a){a?(n.paramsForm.type=parseInt(n.paramsForm.type),1==e?n.addData():2==e&&n.editData(),setTimeout((function(){n.closeModal(t)}),500)):n.$Message.error("提交失败！填写有误")}))},addSection:function(){this.showModal=!0,this.operateType=1}}},p=u,d=(n("91f1"),n("2877")),m=Object(d["a"])(p,a,r,!1,null,"40993ba7",null);e["default"]=m.exports},5872:function(t,e,n){},"818a":function(t,e,n){"use strict";var a=n("a0fa"),r=n.n(a);r.a},"91f1":function(t,e,n){"use strict";var a=n("5872"),r=n.n(a);r.a},a0fa:function(t,e,n){},ba7e:function(t,e,n){"use strict";n("ac6a"),n("456d");var a=n("56c6");e["a"]={GetSecList:function(t,e,n){var r=a["a"].GetQuery("Section");return t&&Object.keys(t).length&&(t.id&&r.equalTo("objectId","==",t.id),t.title&&r.equalTo("title","==",t.title),t.type&&r.equalTo("type","==",parseInt(t.type))),new Promise((function(t,i){a["a"].GetListData(r,e,n).then((function(e){return t(e)})).catch((function(t){return i(t)}))}))},AddSection:function(t){return new Promise((function(e,n){a["a"].AddOne("Section",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},EditSection:function(t,e){return new Promise((function(n,r){a["a"].EditOne("Section",e,t).then((function(t){return n(t)})).catch((function(t){return r(t)}))}))},DeleteSec:function(t){return new Promise((function(e,n){a["a"].DelMore("Section",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},GetContList:function(t,e,n){var r=a["a"].GetQuery("SectionCont");return r.equalTo("parentId","==",t),new Promise((function(t,i){a["a"].GetListData(r,e,n).then((function(e){return t(e)})).catch((function(t){return i(t)}))}))},AddContent:function(t){return new Promise((function(e,n){a["a"].AddOne("SectionCont",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},DeleteCont:function(t){return new Promise((function(e,n){a["a"].DelMore("SectionCont",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},EditContent:function(t,e){return console.log(t),new Promise((function(n,r){a["a"].EditOne("SectionCont",e,t).then((function(t){return n(t)})).catch((function(t){return r(t)}))}))}}},be51:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-load",attrs:{id:"loading"}},[n("Spin",[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),n("div",[t._v("玩命加载中...")])],1)],1)},r=[],i={name:"loading",data:function(){return{}}},o=i,s=(n("818a"),n("2877")),c=Object(s["a"])(o,a,r,!1,null,"f624f8be",null);e["a"]=c.exports},d7fd:function(t,e,n){"use strict";var a=n("ed08");e["a"]={common:function(t,e,n,a,r,i,o){return t("Button",{props:{type:i,size:"small"},style:{minWidth:"64px",marginRight:o},on:{click:function(){n[a](e)}}},r)},gotoDetail:function(t,e,n,a,r,i){return t("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:i},on:{click:function(){n.$router.push({name:r,query:{id:e.row.id}})}}},a)},gotoPage:function(t,e,n,a,r,i){return t("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:i},on:{click:function(){n.$router.push({name:r})}}},a)},popUp:function(t,e,n,a,r){return t("Button",{props:{type:"primary",size:"small"},style:{minWidth:"64px",marginRight:r},on:{click:function(){n.openModel(e.row)}}},a)},showImage:function(t,e,n){return t("img",{attrs:{src:e.row.imgUrl},style:{width:"auto",maxHeight:"120px",maxWidth:"90%",margin:"15px",borderRadius:"4px",border:"1px solid #e4e5e7"},on:{error:function(t){Object(a["o"])(t,2)}}})}}}}]);