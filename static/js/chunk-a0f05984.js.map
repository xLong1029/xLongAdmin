{"version":3,"sources":["webpack:///./node_modules/tinymce/plugins/textcolor/plugin.js","webpack:///./src/assets/js/tinymce-langs/zh_CN.js","webpack:///./node_modules/tinymce/plugins/anchor/plugin.js","webpack:///./node_modules/tinymce/plugins/charmap/plugin.js","webpack:///./src/components/Common/Tinymce.vue?91b6","webpack:///./node_modules/tinymce/plugins/lists/plugin.js","webpack:///./node_modules/tinymce/plugins/autolink/plugin.js","webpack:///./node_modules/tinymce/plugins/searchreplace/plugin.js","webpack:///./node_modules/tinymce/plugins/colorpicker/plugin.js","webpack:///./node_modules/tinymce/plugins/visualblocks/plugin.js","webpack:///./src/components/Common/Tinymce.vue?7c7b","webpack:///src/components/Common/Tinymce.vue","webpack:///./src/components/Common/Tinymce.vue?5275","webpack:///./src/components/Common/Tinymce.vue","webpack:///./node_modules/tinymce/plugins/contextmenu/plugin.js","webpack:///./node_modules/tinymce/plugins/preview/plugin.js","webpack:///./node_modules/tinymce/themes/modern/theme.js","webpack:///./node_modules/tinymce/plugins/paste/plugin.js","webpack:///./src/components/Common/Loading.vue?6fd3","webpack:///./node_modules/tinymce/plugins/advlist/plugin.js","webpack:///./node_modules/tinymce/plugins/table/plugin.js","webpack:///./node_modules/tinymce/plugins/insertdatetime/plugin.js","webpack:///./src/components/Common/Loading.vue?dd3e","webpack:///src/components/Common/Loading.vue","webpack:///./src/components/Common/Loading.vue?6e82","webpack:///./src/components/Common/Loading.vue","webpack:///./node_modules/tinymce/plugins/link/plugin.js","webpack:///./node_modules/tinymce/plugins/image/plugin.js","webpack:///./node_modules/tinymce/plugins/print/plugin.js","webpack:///./node_modules/tinymce/tinymce.js","webpack:///./src/assets/js/tinymce-plugins/placeholder/plugin.js","webpack:///./node_modules/tinymce/plugins/code/plugin.js","webpack:///./node_modules/tinymce/plugins/fullscreen/plugin.js"],"names":["global","tinymce","util","Tools","resolve","getCurrentColor","editor","format","color","dom","getParents","selection","getStart","elm","value","style","mapColors","colorMap","i","colors","length","push","text","applyFormat","undoManager","transact","focus","formatter","apply","nodeChanged","removeFormat","remove","TextColor","register","addCommand","Commands","global$1","global$2","defaultColorMap","getTextColorMap","getParam","getForeColorMap","getBackColorMap","getTextColorRows","getTextColorCols","getForeColorRows","getBackColorRows","getForeColorCols","getBackColorCols","getColorPickerCallback","hasColorPicker","Settings","global$3","getHtml","cols","rows","html","last","x","y","count","id","DOM","uniqueId","getColorCellHtml","title","isNoColor","translate","ColorPickerHtml","setDivColor","div","background","setAttribute","onButtonClick","e","ctrl","control","_color","execCommand","settings","onPanelClick","buttonCtrl","this","parent","currentColor","selectColor","hidePanel","resetColor","getParent","target","colorPickerCallback","call","customColorCells","tableElm","panel","getEl","getElementsByTagName","map","childNodes","firstChild","getAttribute","lastId","get","renderColorPicker","foreColor","register$1","addButton","type","tooltip","role","ariaRemember","onclick","Buttons","Plugin","add","addI18n","isValidId","test","getId","selectedNode","getNode","isAnchor","tagName","getAttrib","name","insert","removeAttribute","collapse","createHTML","Anchor","insertAnchor","newId","windowManager","alert","open","currentId","body","size","label","onsubmit","data","preventDefault","Dialog","isAnchorNode","node","attr","setContentEditable","state","nodes","setup","on","parser","addNodeFilter","serializer","FilterContent","icon","cmd","stateSelector","addMenuItem","context","fireInsertCustomChar","chr","fire","Events","insertChar","evtChr","Actions","getCharMap","charmap","getCharMapAppend","charmap_append","isArray","getDefaultCharMap","charmapFilter","grep","item","getCharsFromSetting","settingValue","concat","extendCharMap","userCharMap","userCharMapAppend","getCharMap$1","CharMap","Api","gridHtml","width","Math","min","height","ceil","index","charCode","parseInt","chrText","String","fromCharCode","GridHtml","getParentTd","nodeName","parentNode","win","charMapPanel","charDiv","hasAttribute","charCodeString","isNaN","ctrlKey","close","onmouseover","td","find","spacing","padding","items","layout","direction","align","minWidth","minHeight","border","buttons","domGlobals","global$4","global$5","global$6","isTextNode","nodeType","isListNode","isOlUlNode","isListItemNode","isDlItemNode","isTableCellNode","isBr","isFirstChild","isLastChild","lastChild","isTextBlock","schema","getTextBlockElements","isBlock","blockElements","isBogusBr","nextSibling","previousSibling","isEmpty","keepBookmarks","empty","select","isChildOfBody","isChildOf","getRoot","NodeType","getNormalizedPoint","container","offset","normalizeRange","rng","outRng","cloneRange","rangeStart","startContainer","startOffset","setStart","rangeEnd","endContainer","endOffset","setEnd","Range","createBookmark","bookmark","setupEndPoint","start","offsetNode","create","hasChildNodes","insertBefore","insertAfter","appendChild","collapsed","resolveBookmark","restoreEndPoint","nodeIndex","idx","createRng","Bookmark","constant","not","f","args","_i","arguments","never","always","never$1","always$1","none","NONE","eq","o","isNone","thunk","n","noop","nul","undef","me","fold","s","is","isSome","getOr","getOrThunk","getOrDie","msg","Error","getOrNull","getOrUndefined","or","orThunk","ap","each","bind","flatten","exists","forall","filter","equals","equals_","toArray","toString","Object","freeze","some","a","constant_a","self","v","optfab","fab","elementEq","b","from","undefined","Option","typeOf","t","Array","prototype","isPrototypeOf","constructor","isType","isString","isBoolean","isFunction","isNumber","slice","xs","len","r","pred","groupBy","wasType","group","foldl","acc","output","reverse","head","Global","window","Function","path","parts","scope","p","split","unsafe","actual","Global$1","htmlElement","HTMLElement","global$7","getParentList","selectionStart","getClosestListRootElm","isParentListSelected","parentList","selectedBlocks","findSubLists","querySelectorAll","getSelectedSubLists","getSelectedBlocks","findParentListItemsNodes","elms","listItemsElms","parentLi","unique","getSelectedListItems","block","getSelectedDlItems","parentTableCell","root","getBody","findLastParentListNode","parentLists","getSelectedLists","firstList","subsequentLists","getSelectedListRoots","selectedLists","getUniqueListRoots","lists","listRoots","list","isList","Selection","fromHtml","doc","document","createElement","innerHTML","console","error","fromDom","fromTag","tag","fromText","createTextNode","fromPoint","docElm","elementFromPoint","Element","liftN","arr","fromElements","elements","fragment","createDocumentFragment","element","Immutable","fields","values","struct","keys","each$1","obj","props","k","compareDocumentPosition","match","documentPositionPreceding","DOCUMENT_POSITION_PRECEDING","documentPositionContainedBy","DOCUMENT_POSITION_CONTAINED_BY","Node","cached","called","firstMatch","regexes","find$1","agent","major","minor","Number","replace","nu","detect","versionRegexes","cleanedAgent","toLowerCase","unknown","Version","edge","chrome","ie","opera","firefox","safari","isBrowser","current","unknown$1","nu$1","version","info","isEdge","isChrome","isIE","isOpera","isFirefox","isSafari","Browser","windows","ios","android","linux","osx","solaris","freebsd","isOS","unknown$2","nu$2","isWindows","isiOS","isAndroid","isOSX","isLinux","isSolaris","isFreeBSD","OperatingSystem","DeviceType","os","browser","userAgent","isiPad","isiPhone","isAndroid3","isAndroid4","isTablet","isTouch","isPhone","iOSwebview","isWebView","detect$1","candidates","candidate","search","detectBrowser","browsers","detectOs","oses","UaString","contains","str","substr","indexOf","normalVersionRegex","checkContains","uastring","PlatformInfo","detect$2","deviceType","PlatformDetection","detect$3","navigator","PlatformDetection$1","ELEMENT","ATTRIBUTE_NODE","CDATA_SECTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","ELEMENT_NODE","ELEMENT$1","TEXT_NODE","PROCESSING_INSTRUCTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","NOTATION_NODE","selector","elem","matches","msMatchesSelector","webkitMatchesSelector","mozMatchesSelector","e1","e2","regularContains","d1","d2","ieContains","contains$1","is$1","children","child","cs","before","marker","parent$1","append","before$1","append$1","removeChild","isType$1","isElement","rawSet","key","setAll","attrs","clone","attributes","isSupported","getPropertyValue","internalSet","property","setProperty","set","clone$1","original","isDeep","cloneNode","deep","shallowAs","mutate","children$1","joinSegment","joinSegments","segments","appendSegments","head$1","tail","createSegment","listType","segment","createSegments","entry","populateSegments","listAttributes","itemAttributes","content","normalizeSegment","createItem","appendItem","writeShallow","cast","newCast","depth","writeDeep","composeList","entries","isList$1","el","hasFirstChildList","hasLastChildList","isIndented","isSelected","cloneItemContent","li","createEntry","indentEntry","indentation","hasOwnProperty","shallow","old","baseMerge","merger","objects","ret","j","curObject","merge","cloneListProperties","source","previousSiblingEntry","normalizeEntries","matchingEntry","Cell","initial","parseItem","itemSelection","selectionState","currentItemEntry","end","childListEntries","parseList","newDepth","parseLists","initialDepth","sourceList","global$8","createTextBlock","contentNode","textBlock","blockName","hasContentNode","getBlockElements","createFragment","forced_root_block","setAttribs","forced_root_block_attrs","outdentedComposer","indentedComposer","contentDocument","composeEntries","groupIsIndented","indentSelectedEntries","getItemSelection","selectedListItems","listsIndentation","entrySets","entrySet","DOM$1","splitList","ul","tmpRng","bookmarks","newBlock","removeAndKeepBookmarks","targetNode","setStartAfter","setEndAfter","extractContents","SplitList","outdentDlItem","dl","indentDlItem","dlIndentation","dlItems","selectionIndentation","isHandled","getBookmark","moveToBookmark","setRng","getRng","indentListSelection","outdentListSelection","flattenListSelection","updateListStyle","detail","setStyle","updateListAttrs","updateListWithDetails","removeStyles","styles","_a","getEndPointNode","getSelectedTextBlocks","textBlocks","startNode","endNode","siblings","isBookmarkNode","hasCompatibleStyle","sib","sibStyle","getStyle","detailStyle","applyList","listName","listItemName","getContentEditable","toUpperCase","listBlock","sibling","rename","mergeWithAdjacentLists","isValidLists","list1","list2","hasSameListStyle","targetStyle","hasSameClasses","elm1","elm2","className","shouldMerge","updateList","newList","toggleMultipleLists","hasListStyleDetail","toggleSingleList","toggleList","selectedSubLists","ToggleList","DOM$2","normalizeList","normalizeLists","NormalizeLists","findNextCaretContainer","isForward","nonEmptyBlocks","walker","getNonEmptyElements","next","hasOnlyOneBlockChild","unwrapSingleBlockChild","moveChildren","fromElm","toElm","targetElm","mergeLiElements","listNode","$","nestedLists","mergeIntoEmptyLi","fromLi","toLi","setCursorLocation","mergeForward","mergeBackward","resolvedBookmark","backspaceDeleteFromListToListCaret","otherLi","selectionStartElm","removeBlock","parentBlock","backspaceDeleteIntoListCaret","otherLi_1","backspaceDeleteCaret","backspaceDeleteRange","startListParent","backspaceDelete","isCollapsed","keyCode","BACKSPACE","DELETE","Delete","queryListCommandState","command","ui","addQueryStateHandler","shouldIndentOnTab","setupTabKey","TAB","metaKeyPressed","shiftKey","setup$1","Keyboard","findIndex","predicate","listState","tableCellIndex","parents","active","hasPlugin","plugin","plugins","inArray","onPostRender","getAutoLinkPattern","getDefaultLinkTarget","rangeEqualsDelimiterOrSpace","rangeString","delimiter","charCodeAt","handleEclipse","parseCurrentLine","handleSpacebar","handleEnter","scopeIndex","setStartBefore","prev","rngText","autoLinkPattern","defaultLinkTarget","nodeValue","charAt","trim","setAttrib","autoUrlDetectState","ex","Keys","isContentEditableFalse","contentEditable","findAndReplaceDOMText","regex","replacementNode","captureGroup","m","blockElementsMap","hiddenTextElementsMap","shortEndedElementsMap","getMatchIndexes","cg","getText","txt","stepThroughMatches","replaceFn","startNodeIndex","endNodeIndex","innerNodes","atIndex","curNode","matchLocation","shift","matchIndex","out","genReplacer","makeReplacementNode","stencilNode_1","fill","range","after","node_1","substring","elA","l","innerNode","innerEl","replaceChild","elB","ownerDocument","getWhiteSpaceElements","getShortEndedElements","exec","FindReplaceText","getElmIndex","markAllMatches","currentIndexState","done","unwrap","findSpansByIndex","spans","moveSelection","forward","testIndex","removeClass","addClass","scrollIntoView","removeNode","matchCase","wholeWord","RegExp","isMatchSpan","all","currentMatchIndex","hasMore","nextIndex","hasNext","hasPrev","keepEditorSelection","selectedText","updateButtonStates","statusbar","disabled","notFoundAlert","getContent","pack","onClose","onSubmit","caseState","checked","subtype","submit","flex","labelGap","showDialog","shortcut","separator","shortcuts","showPreview","hexColor","setColor","rgb","toRgb","fromJSON","g","hex","toHex","callback","onchange","defaults","spellcheck","colorPickerCtrl","autofocus","toJSON","color_picker_callback","fireVisualBlocks","isEnabledByDefault","getContentCss","visualblocks_content_css","cssId","load","url","linkElements","matchingLinkElms","linkElm","rel","href","LoadCss","toggleVisualBlocks","pluginUrl","enabledState","contentCss","getDoc","toggleClass","VisualBlocks","Bindings","toggleActiveState","selectable","prependToContext","render","_vm","_h","$createElement","_c","_self","staticClass","ref","selectFile","staticRenderFns","component","visibleState","isContextMenuVisible","shouldNeverUseNative","contextmenu_never_use_native","getContextMenu","getUiContainer","ui_container","transpose","pos","dx","dy","fromPageXY","pageX","pageY","fromClientXY","clientX","clientY","transposeUiContainer","containerPos","getPos","scrollLeft","scrollTop","transposeContentAreaContainer","inline","iframePos","getContentAreaContainer","Coords","renderMenu","menu","contextmenu","menuItems","splice","classes","uiContainer","renderTo","show","moveTo","ContextMenu","isNativeOverrideKeyEvent","Bind","getPreviewDialogWidth","getPreviewDialogHeight","getContentStyle","getPreviewHtml","previewHtml","headHtml","encode","contentStyle","documentBaseURI","getURI","contentCSS","toAbsolute","bodyId","body_id","bodyClass","body_class","preventClicksOnLinksScript","dirAttr","directionality","injectIframeContent","iframe","sandbox","src","encodeURIComponent","contentWindow","write","IframeContent","dialogHtml","dialogWidth","dialogHeight","iframeElm","isBrandingEnabled","hasMenubar","getMenubar","hasStatusbar","getToolbarSize","isReadOnly","getFixedToolbarContainer","getInlineToolbarPositionHandler","getMenu","getRemovedMenuItems","getMinWidth","getMinHeight","getMaxWidth","getMaxHeight","isSkinDisabled","skin","isInline","getResize","resize","getSkinUrl","skinUrl","skin_url","skinName","baseURL","getIndexedToolbars","defaultToolbar","toolbars","toolbar","mainToolbar","getToolbars","fireSkinLoaded","fireResizeEditor","fireBeforeRenderUI","addKeys","A11y","getUiContainerDelta","setUiContainer","inheritUiContainer","fromCtrl","toCtrl","UiContainer","createToolbar","buttonGroup","toolbarItems","itemName","bindSelectorChanged","selectorChanged","disabledStateSelector","initialized","createToolbars","addToolbar","ariaRoot","Toolbar","toClientRect","geomRect","left","top","w","h","right","bottom","hideAllFloatingPanels","contextToolbars","hide","movePanelTo","togglePositionClass","relPos","cls","toggle","userConstrain","handler","elementRect","contentAreaRect","panelRect","addContextualToolbars","scrollContainer","getContextToolbars","getElementRect","targetRect","getRect","documentElement","reposition","shouldShow","relRect","testPositions","smallElementWidthThreshold","removed","delta","clientRect","getBoundingClientRect","offsetWidth","controlSelection","isResizable","inflate","findBestRelativePosition","clamp","relativePosition","intersect","pos1","pos2","repositionHandler","execute","findFrontMostMatch","requestAnimationFrame","bindScrollEvent","reposition_1","uiContainer_1","getScrollContainer","getWin","unbind","showContextToolbar","ariaLabel","autohide","autofix","fixed","oncancel","reflow","hideAllContextToolbars","parentsAndSelf","setEditorTimeout","ContextToolbars","rawIndexOf","pIndexOf","fastIndex","slowIndex","slowIndexOf","defaultMenus","file","edit","view","tools","table","help","delimiterMenuNamePair","createMenuNameItemPair","menuItem","hasItemName","namedMenuItems","namedMenuItem","isSeparator","cleanupMenu","removedMenuItems","menuItemsPass1","menuItemsPass2","createMenu","editorMenuItems","menus","menuButton","isUserDefined","unshift","getDefaultMenubar","defaultMenuBar","createMenuButtons","menuButtons","makeMap","menubar","enabledMenuNames","Menubar","getSize","clientWidth","clientHeight","resizeTo","containerElm","containerSize","iframeSize","getContainer","max","resizeBy","dw","dh","Resize","api","trigger","sidebar","callbackName","hidePanels","sidebars","visible","deactivateButtons","findSidebar","showPanel","btnCtrl","prepend","isModernBrowser","hasSidebar","createSidebar","image","Sidebar","fireSkinLoaded$1","_skinLoaded","SkinLoaded","switchMode","mode","editArea","editAreaContainer","theme","resizeHandleCtrl","startSize","skinUiCss","styleSheetLoader","onResizeStart","onResize","deltaX","deltaY","linkHtml","brandingLabel","renderBefore","setMode","iframeContainer","editorContainer","Iframe","global$9","funcs","getWindowSize","getViewPort","rect","offsetHeight","getElementById","hasClass","css","getRuntimeStyle","off","innerHtml","setHTML","isStatic","isFixed","calculateRelativePosition","ctrlElm","selfW","selfH","targetW","targetH","viewport","getWindowViewPort","round","getUiContainerViewPort","customUiContainer","scrollWidth","scrollHeight","pageXOffset","pageYOffset","innerWidth","innerHeight","getViewPortRect","Movable","testMoveRel","rels","viewPortRect","moveRel","moveBy","layoutRect","constrain","constrainToViewport","repaint","global$a","global$b","BoxUtils","parseBox","radix","measureBox","prefix","defaultView","computedStyle","getComputedStyle","currentStyle","getSide","val","parseFloat","noop$1","ClassList","_map","array","uniqueItems","__checked","extend","_change","curState","clsValue","Collection","Collection$1","proto","expression","chunker","whiteSpace","Selector","init","compileNameFilter","compileIdFilter","_name","compileClassesFilter","compileAttrFilter","cmp","check","compilePsuedoFilter","notSelectors","parseChunks","compile","filters","direct","pseudo","selectors","extra","_selectors","si","sl","fi","fl","collect","push$1","slice$1","prop","Collection$2","Binding","model","otherModel","otherName","bindings","fromSelfToOther","fromOtherToSelf","_bindings","global$c","isNode","isEqual","animationFrameRequested","Control","ObservableObject","Mixins","oldValue","has","destroy","dirtyCtrls","ReflowQueue","_layout","isNative","_id","hasMouseWheelEventSupport","hasWheelEventSupport","classPrefix","idCounter","proto$1","Statics","isRtl","rtl","defaultClasses","applyClasses","Defaults","_aria","_elmCache","borderBox","paddingBox","marginBox","margin","hidden","Properties","getContainerElm","getParentCtrl","lookup","controlIdLookup","initLayoutRect","autoResize","startMinWidth","startMinHeight","initialSize","deltaW","deltaH","maxW","maxWidth","maxH","maxHeight","_layoutRect","contentW","contentH","innerW","innerH","minW","minH","scrollW","_lastLayoutRect","newRect","lastLayoutRect","deltaWidth","deltaHeight","repaintControls","curRect","bodyStyle","bodyElm","borderW","borderH","lastRepaintRect","createRange","_lastRepaintRect","_hasBody","updateLayoutRect","_lastRect","resolveCallbackName","callbacks","action","getEventDispatcher","bubble","isPropagationStopped","hasEventListeners","parentControls","$el","suffix","blur","aria","ariaTarget","newItems","controls","_eventsRoot","renderHtml","postRender","preRender","box","parentEventsRoot","_nativeEvents","bindPendingEvents","cssText","display","bindStates","parentCtrl","getOffset","rootElm","offsetLeft","offsetTop","offsetParent","parentWidth","parentHeight","parentElm","rootControl","_eventDispatcher","toggleEvent","eventCtrl","eventRootCtrl","nativeEvents","delegate","mouseLeaveHandler","_lastHoverCtrl","mouseEnterHandler","lastParents","lastCtrl","fixWheelEvent","wheelDelta","wheelDeltaX","eventRootDelegates","_delegates","_hasMouseEnter","Control$1","hasTabstopData","KeyboardNavigation","focusedElement","focusedControl","activeElement","getRole","getParentRole","getAriaProp","isTextInputElement","canFocus","getFocusElements","getNavigationRoot","targetControl","navigationRoot","focusFirst","focusElements","moveFocusToIndex","lastAriaIndex","moveFocus","dir","parentRole","submenu","cancel","enter","up","down","tab","handleNonTabOrEscEvent","isDefaultPrevented","selectorCache","Container","_super","_items","bodyClasses","containerCls","keyboard","focusCtrl","keyboardNav","oldItem","newItem","ctrlItems","defaultType","renderNew","curItems","beforeItems","afterItems","recalc","lastRect","getDocumentSize","updateWithTouchData","changedTouches","DragHelper","$eventOverlay","downButton","stop","drag","startX","startY","handleElement","handle","handleElm","cursor","docSize","button","screenX","screenY","runtimeStyle","position","zIndex","opacity","appendTo","documentClickHandler","documentScrollHandler","windowResizeHandler","hasModal","Scrollable","renderScroll","repaintScroll","hasScrollH","hasScrollV","repaintAxis","axisName","posName","sizeName","contentSizeName","hasScroll","ax","scrollBarElm","scrollThumbElm","scrollSize","ratio","posNameLower","sizeNameLower","addScroll","addScrollAxis","deltaPosName","scrollStart","axisId","draghelper","autoScroll","_hasScroll","bodyEl","Panel","_preBodyHtml","Resizable","resizeToContent","visiblePanels","zOrder","skipOrHidePanels","clickCtrl","bindDocumentClickHandler","bindDocumentScrollHandler","repositionPanel","bindWindowResizeHandler","docElm_1","clientWidth_1","clientHeight_1","FloatPanel","hideAll","scrollY","toggleFixedChildPanels","_autoFixY","addRemove","topModal","modal","modalBlockEl","currentZIndex","$modalBlockEl_1","prefix_1","setTimeout","popover","describedBy","removeVisiblePanel","bodyRole","isFixed$1","inlineToolbarContainer","render$1","fixedToolbarContainer","_fixed","bodyPos","scrollContainerPos","content_editable","Inline","Throbber","timer","time","clearTimeout","throbber","ProgressState","renderUI","Render","Tooltip","Widget","tooltips","_tooltip","disable","Progress","setValue","updateLiveRegion","ctx","textContent","progressBar","Notification","timeout","closeButton","notificationStyle","NotificationManagerImpl","getEditorContainer","getElement","getContainerWidth","prePositionNotifications","notifications","notification","positionNotifications","firstItem","closeCallback","extendedArgs","notif","getArgs","oldMetaValue","toggleFullScreenState","contentValue","noScaleMetaValue","overrideViewPort","toggleBodyFullScreenClasses","checkFullscreenWindows","_fullscreen","handleWindowResize","desktop","lastSize_1","setInterval","Window","closeClass","needsRecalc","headerW","headEl","headerH","headerHtml","footerHtml","fullscreen","slowRendering","_timer","Date","getTime","_initial","startPos","dragHelper","getContentWindow","ifr","MessageBox","multiline","OK","OK_CANCEL","YES_NO","YES_NO_CANCEL","msgBox","createButton","status","primary","onClick","onCancel","confirm","WindowManagerImpl","params","bodyType","commands","features","message","choiceCallback","getParams","setParams","getNotificationManagerImpl","getWindowManagerImpl","ThemeApi","Layout","firstControlClass","lastControlClass","containerClass","firstClass","lastClass","lastItem","controlClass","AbsoluteLayout","Button","btnStyle","btnElm","ariaPressed","textHtml","getSelection","textCls","setButtonText","$span","iconElm","BrowseButton","multiple","accept","input","files","stopPropagation","click","ButtonGroup","Checkbox","global$d","ComboBox","subinput","showMenu","newValue","statusLevel","statusMessage","lineHeight","openElm","innerPadding","inputElm","documentMode","openBtnHtml","extraAttrs","statusHtml","maxLength","placeholder","showAutoComplete","term","previewUrl","hideMenu","statusIconElm","focusIdx","DOWN","UP","ColorBox","onaction","repaintColor","PanelButton","panelSettings","rtlRels","ltrRels","popoverAlign","isTop","DOM$3","ColorButton","backgroundColor","onClickHandler","stopImmediatePropagation","global$e","ColorPicker","hsv","hueRootElm","huePointElm","svRootElm","svPointElm","event","updateColor","hueUpdate","hue","parse","updateSaturationAndValue","updateHue","toHsv","_repaint","_svdraghelper","_hdraghelper","_rendered","hueHtml","stops","getOldIeFallbackHtml","gradientPrefix","stopsList","gradientCssText","DropZone","cfg","hidefocus","outerHTML","toggleDragClass","re","join","dataTransfer","Path","row","_getDataPathHtml","ElementPath","isHidden","elementpath","outParents","FormItem","Form","formItemDefaults","formItem","forId","recalcLabels","maxLabelWidth","labels","labelGapCalc","labelCtrl","labelWidth","FieldSet","unique$1","generate","date","random","floor","DOCUMENT","windows$1","DOCUMENT$1","bypassSelector","childElementCount","base","one","querySelector","descendants","hasContentEditableState","isContentEditableTrue","level","attach","isChildOfContentEditableTrue","getElementText","innerText","getOrGenerateId","isValidAnchor","isEditable","isHeader","isValidHeader","getLevel","headerTarget","headerId","anchorTarget","anchorId","anchorText","getHeaderTargets","getAnchorTargets","getTargetElements","hasTitle","find$2","LinkTargets","getActiveEditor","activeEditor","history","HISTORY_LENGTH","clearHistory","toMenuItem","raw","toMenuItems","targets","staticMenuItem","isUniqueUrl","foundTarget","getSetting","editorSettings","defaultValue","createMenuItems","fileType","fromHistoryMenuItems","historyItems","uniqueHistory","fromMenuItems","filteredTargets","anchorMenuItems","topAnchor","bottomAchor","bothEmpty","typeahead_urls","filterByQuery","addToHistory","lowerCaseTerm","result","getTitle","linkDetails","setupAutoCompleteHandler","autocomplete","linkTargets","meta","alt","statusToUiState","setupLinkValidatorHandler","validatorHandler","filepicker_validator_handler","validateUrl_1","uiState","FilePicker","actionCallback","fileBrowserCallback","fileBrowserCallbackTypes","filetype","file_picker_types","file_browser_callback_types","file_picker_callback","file_browser_callback","FitLayout","contLayoutRect","FlexLayout","contPaddingBox","contSettings","totalFlex","availableSpace","ctrlLayoutRect","ctrlSettings","maxSize","maxAlignEndPos","minSizeName","maxSizeName","beforeName","innerSizeName","deltaSizeName","alignAxisName","alignInnerSizeName","alignSizeName","alignMinSizeName","alignBeforeName","alignAfterName","alignDeltaSizeName","alignContentSizeName","maxSizeItems","maxFlexSize","FlowLayout","endClass","descendant","toggleFormat","fmt","addFormatChangedListener","changed","formatChanged","postRenderFormatToggle","alignFormats","defaultAlign","alignMenuItems","onShowMenu","formatName","alignleft","aligncenter","alignright","alignjustify","alignnone","Align","getFirstFont","fontFamily","findMatchingValue","font","createFontNameListBoxChangeHandler","queryCommandValue","createFormats","formats","getFontItems","defaultFontsFormats","fonts","font_formats","textStyle","registerButtons","fixedWidth","onselect","FontSelect","number","precision","factor","pow","toPt","fontSize","findMatchingValue$1","pt","px","createFontSizeListBoxChangeHandler","getFontSizeItems","defaultFontsizeFormats","fontsizeFormats","fontsize_formats","registerButtons$1","register$2","FontSizeSelect","hideMenuObjects","canApply","hideFormatMenuItems","createFormatMenu","newFormats","defaultStyleFormats","createStylesMenu","style_formats_merge","style_formats","itemDefaults","preview","getCssText","queryCommandState","registerMenuItems","formatMenu","registerButtons$2","style_formats_autohide","register$3","Formats","defaultBlocks","createFormats$1","createListBoxChangeHandler","matchNode","lazyFormatSelectBoxItems","blocks","buildMenuItems","register$4","block_formats","FormatSelect","createCustomMenuItems","names","nameList","isSeparator$1","trimMenuItems","menuItems2","createContextMenuItems","outputMenuItems","createInsertMenu","insertButtonItems","insert_button_items","registerButtons$3","oncreatemenu","register$5","InsertButton","registerFormatButtons","bold","italic","underline","strikethrough","subscript","superscript","registerCommandButtons","outdent","indent","cut","copy","paste","selectall","visualaid","newdocument","removeformat","registerCommandToggleButtons","blockquote","registerButtons$4","registerMenuItems$1","register$6","SimpleControls","toggleUndoRedoState","checkState","typeFn","readonly","registerMenuItems$2","registerButtons$5","register$7","UndoRedo","toggleVisualAidState","hasVisual","registerMenuItems$3","register$8","VisualAid","setupEnvironment","iOS","setupUiContainer","setupRtlMode","setupHideFloatPanels","FormatControls","GridLayout","posX","posY","spacingH","spacingV","alignH","alignV","maxX","maxY","ctrlMinWidth","ctrlMinHeight","availableWidth","availableHeight","reverseRows","colWidths","rowHeights","columns","sqrt","flexV","packV","flexWidths","Iframe$1","InfoBox","severity","Label","strong","startMinH","targetCtrl","forName","Toolbar$1","MenuBar","isChildOf$1","MenuButton","_renderOpen","animate","activeMenu","menuLayoutRect","selfBottom","hasVisibleSiblingMenu","overCtrl","Menu","itemsFactory","factory","hideThrobber","requestTime","_hasIcons","ListBox","selected","lastItemCtrl","setSelected","menuValues","_values","lastControl","valueExists","activateMenuItemsByValue","hasMenus","getSelectedItem","selectedItem","toggleTextStyle","_textStyle","textElm","MenuItem","ariaHideMenu","_parentMenu","_lastRel","iconHtml","convertShortcut","mac","escapeRegExp","markMatches","boldMatches","hover","Radio","ResizeHandle","resizeDragHelper","createOptions","options","strOptions","SelectBox","_options","minVal","maxVal","setAriaProp","updateSliderHandle","maxHandlePos","shortSizeName","stylePosName","styleValue","handleEl","orientation","_minValue","_maxValue","previewFilter","Slider","minValue","maxValue","_initValue","reset","screenCordName","toFraction","fromFraction","handleKeyboard","alter","handleDrag","startHandlePos","handlePos","_dragHelper","Spacer","SplitButton","mainButtonElm","menuButtonElm","_menuBtnText","StackLayout","TabPanel","activateTab","activeTabElm","activeTabId","tabsHtml","activeTab","targetParent","headH","TextBox","getApi","Factory","registerToFactory","Theme","hasProPlugin","log","DetectProPlugin","clipboard","quirks","firePastePreProcess","internal","isWordHtml","wordContent","firePastePostProcess","firePastePlainTextToggle","firePaste","ieFake","shouldPlainTextInform","shouldBlockDrop","shouldPasteDataImages","shouldFilterDrop","getPreProcess","getPostProcess","getWebkitStyles","shouldRemoveWebKitStyles","shouldMergeFormats","isSmartPasteEnabled","isPasteAsTextEnabled","getRetainStyleProps","getWordValidElements","defaultValidElements","shouldConvertWordFakeLists","shouldUseDefaultFilters","shouldInformUserAboutPlainText","userIsInformedState","displayNotification","notificationManager","togglePlainTextPaste","pasteFormat","pasteHtml","pasteText","internalMimeType","internalMark","mark","unmark","isMarked","InternalHtml","internalHtmlMime","isPlainText","toBRs","openContainer","rootTag","rootAttrs","encodeAllRaw","toBlockElements","tagOpen","tagClose","paragraphs","stitch","convert","Newlines","domParser","shortEndedElements","ignoreElements","walk","currentNode","shortEnded","trimHtml","trimSpaces","s1","s2","createIdGenerator","isMsEdge","Utils","isWordContent","isNumericList","found","patterns","pattern","isBulletList","convertFakeListsToProperLists","currentListNode","prevListNode","lastLevel","trimListStart","regExp","removeIgnoredNodes","_listIgnore","convertParagraphToLi","paragraphNode","_listLevel","wrap","nodeText","filterStyles","validStyles","outputStyles","parseStyle","serializeStyle","filterWordContent","retainStyleProperties","spaces","validElements","valid_elements","valid_children","rule","class","attributesOrder","addAttributeFilter","rootNode","validate","serialize","preProcess","WordFilter","processResult","cancelled","postProcessFilter","tempBody","postProcessArgs","filterContent","preProcessArgs","process","ProcessFilters","removeMeta","insertContent","isAbsoluteUrl","isImageUrl","createImage","pasteHtmlFn","createLink","linkSelection","insertImage","smartInsertContent","SmartPaste","curry","fn","initialArgs","restArgs","filter$1","from$1","exports$1","module","exports","define","require","amd","EphoxContactWrapper","c","u","code","1","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","runClearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","drainQueue","run","Item","nextTick","env","argv","versions","addListener","once","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","listeners","binding","cwd","chdir","umask","2","setImmediate","setTimeoutFunc","thisArg","Promise","TypeError","_state","_handled","_value","_deferreds","doResolve","deferred","_immediateFn","cb","onFulfilled","onRejected","reject","promise","then","finale","_unhandledRejectionFn","Handler","reason","prom","remaining","res","race","err","warn","_setImmediateFn","_setUnhandledRejectionFn","3","clearImmediate","immediateIds","nextImmediateId","Timeout","clearFn","_clearFn","clearInterval","unref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","_onTimeout","4","promisePolyfill","boltExport","baseFn","nCallback","isReady","cbs","pure","LazyValue","errorReporter","make","aFutureB","toPromise","anonBind","futureB","toLazy","toCached","cache","pure$1","Future","par","asyncValues","asyncValue","par$1","futures","mapM","subject","clear","isSet","pasteHtml$1","internalFlag","getDataTransferItems","mceInternalUrlPrefix","getData","legacyText","types","contentType","getClipboardContent","clipboardEvent","clipboardData","hasContentType","clipboardContent","mimeType","hasHtmlOrText","getBase64FromUri","uri","isValidDataUriImage","imgElm","images_dataimg_filter","extractFilename","pasteImage","imageItem","base64","images_reuse_filename","blob","img","Image","blobCache","editorUpload","blobInfo","existingBlobInfo","findFirst","cachedBlobInfo","blobUri","isClipboardEvent","readBlobsAsDataUris","getAsFile","reader","FileReader","onload","readAsDataURL","getImagesFromDataTransfer","images","pasteImageData","paste_data_images","blobResults","isBrokenAndroidClipboardEvent","isKeyboardPasteEvent","registerEventHandlers","pasteBin","keyboardPastePlainTextState","keyboardPasteEvent","insertClipboardContent","isKeyBoardPaste","plainTextMode","isPlainTextHtml","isDefaultContent","removePasteBinOnKeyUp","webkit","getLastRng","registerEventsAndFilters","isPasteInsert","transparentSrc","isWebKitFakeUrl","isDataUri","allow_html_data_urls","getPasteBinParent","isExternalPasteBin","delegatePasteEvents","pasteBinElm","pasteBinDefaultContent","isDefault","lastRngCell","gecko","pasteBinClone","lastRng","pasteBinClones","dirtyWrappers","cleanWrapper","copyAndRemove","isPasteBin","PasteBin","Clipboard","hasWorkingClipboardApi","setData","setHtml5Clipboard","clearData","setClipboardData","evt","fallback","markedHtml","outer","inner","contenteditable","setStyles","overflow","offscreenRange","selectNodeContents","contextual","isTableSelection","hasSelectedContent","CutCopy","getCaretRangeFromEvent","getCaretRangeFromPoint","isPlainTextFileUrl","plainTextContent","setFocusedRange","draggingInternallyState","dropContent","content_1","DragDrop","postProcess","PrePostProcess","addPreProcessFilter","filterFunc","addPostProcessFilter","removeExplorerBrElementsAfterBlocks","explorerBlocksRegExp","removeWebKitStyles","webKitStyles","webKitStylesSetting","dom_1","inputStyles","decode","inputValue","currentValue","removeUnderlineAndFontInAnchor","setup$2","Quirks","stateChange","applyListFormat","getNumberStyles","getBulletStyles","getSelectedStyleType","listElm","ListUtils","styleValueToText","ListStyles","updateSelection","listStyleType","addSplitButton","onshow","addControl","compose","fa","fb","identity","die","eachr","foldr","map$1","tupleMap","tuple","sort","reqMessage","required","unsuppMessage","unsupported","validateStrArr","invalidTypeMessage","incorrect","checkDupes","everything","sorted","dupe","d","MixedBag","optional","keys$1","allReqd","req","opt","COMMENT","TEXT","isComment","isText","checkRange","endsWith","inBody","internalRemove","removeProperty","set$1","setAll$1","get$1","getUnsafeProperty","getRaw","remove$1","sourceDom","targetDom","contains$2","owner","isRoot","rawParent","prevSibling","firstChild$1","wrapper","after$1","rogue","remove$2","grid","address","detailnew","extended","rowdata","elementnew","rowdatanew","rowcells","rowdetails","bounds","ancestors","ancestors$1","children$2","descendants$1","ClosestOrAncestor","ancestor","closest","child$1","descend","child_1","ancestor$1","child$2","descendant$1","closest$1","firstLayer","filterFirstLayer","LayerSelector","tags","isRootOrUpperTable","cell","cells","notCell","neighbours","neighbourCells","neighbourRows","firstCell","grid$1","rowProp","colProp","rowsCount","TableLookup","fromTable","parentSection","parentName","rowspan","colspan","fromPastedRows","example","section","DetailsList","column","getAt","warehouse","access","findItem","comparator","filtered","filterItems","maxRows","maxColumns","details","currentRow","cr","cc","newpos","justCells","Warehouse","statsStruct","findSelectedStats","house","totalColumns","totalRows","minRow","minCol","maxRow","maxCol","startRow","endRow","startCol","endCol","makeCell","seenSelected","rowIndex","fillInGaps","stats","needCell","clean","emptyRows","extract","selectedSelector","unselectedCells","CopySelected","NodeValue","getOption","get$2","set$2","getEnd","NBSP","isTextNodeWithCursorPosition","elementsWithCursorPosition","isCursorPosition","hasCursorPosition","first","last$1","descendantRtl","copy$1","cloneChildren","createCell","replica","pasteReplace","newRow","cloneFormats","oldCell","newCell","first$1","firstText","formatSelector","clonedFormat","cellOperations","formatsToClone","docu","lastNode","gap","TableFill","fromHtml$1","inSelection","leftEdge","rightEdge","topEdge","bottomEdge","finishCol","finishRow","isWithin","isRectangular","isRect","detailIsWithin","CellBounds","getBounds","detailA","detailB","getAnyBox","startCell","finishCell","startCoords","finishCoords","sc","fc","getBox","CellGroup","dest","intercepts","finish","inside","parentCell","innerCell","isContainedBy","c1","c2","CellFinder","moveBy$1","deltaRow","deltaColumn","getWarehouse","intercepts$1","nestedIntercepts","firstTable","lastTable","optStartCell","optLastCell","lastCell","getBox$1","TablePositions","TagBoundaries","DomUniverse","isBoundary","isEmptyTag","comparePosition","other","copyAttributesTo","destination","as","copyTo","afterAll","appendAll","query","setText","leftRight","brokenPath","bisect","universe","ind","breakToRight","second","breakToLeft","prior","breakPath","breaker","splits","breakage","nextChild","all$1","look","oneAll","unsafeOne","commonElement","eq$1","unsafeSubset","common","ps1","ps2","finder","ps","topDown","startIndex","endIndex","sIndex","eIndex","ancestors$2","prune","pruned1","pruned2","shared","firstpath","secondpath","subset","ancs","SubsetFn","sharedOne","subset$1","ancestors$3","breakToLeft$1","breakToRight$1","breakPath$1","Parent","sharedOne$1","_universe","subset$2","ancestors$4","breakToLeft$2","breakToRight$2","breakPath$2","DomParent","Identified","lookupTable","identify","getIsRoot","rootTable","boxes","startTable","finishTable","ancestorCells","lca","lcaTable","finishAncestorCells","startAncestorCells","retrieve","sels","getLast","lastSelectedSelector","getEdges","firstSelectedSelector","tbl","expandTo","identified","shiftSelection","CellSelection","retrieve$1","retrieveBox","edges","firstAncestor","lastAncestor","fA","lA","TableSelection","attributeSelector","firstSelected","lastSelected","Ephemera","generate$1","cases","constructors","adt","acase","argLength","branches","branchKeys","reqKey","Adt","type$1","single","cata","onNone","onMultiple","onSingle","SelectionTypes","selections","unmergable","hasSpan","mergable","_env","CellOperations","noMenu","forMenu","notCell$1","paste$1","pasteRows","generators","TableTargets","extractSelected","serializeElements","getTextContent","registerEvents","actions","cellSelection","multiCellContext","cellOpt","domCell","pasteCells","Dimension","getOuter","aggregate","properties","cumulativeInclusions","absoluteMax","api$1","get$3","api$2","get$4","getOuter$1","platform","needManualCalc","toNumber","num","getProp","getCalculatedHeight","paddingTop","paddingBottom","borderTop","borderBottom","boxSizing","borders","getWidth","getHeight","RuntimeSize","genericSizeRegex","percentageBasedSizeRegex","pixelBasedSizeRegex","setPixelWidth","amount","setPercentageWidth","setHeight","getHeightValue","getter","setter","newSize","total","normalizePixelSize","getTotalHeight","get$5","span","getSpan","getRawWidth","cssWidth","normalizePercentageWidth","cellWidth","tableSize","pixelWidth","choosePercentageSize","percentMatch","intWidth","getPercentageWidth","normalizePixelWidth","choosePixelSize","pixelMatch","floatWidth","getPixelWidth","getHeight$1","getGenericWidth","unit","setGenericWidth","Sizes","halve","main","newWidth","CellMutations","Position","boxPosition","firstDefinedOrZero","absolute","clientTop","clientLeft","rowInfo","colInfo","rtlEdge","ltrEdge","getLeftEdge","getRightEdge","getTop","getTopEdge","getBottomEdge","findPositions","getInnerEdge","getOuterEdge","lines","cellOption","lastLine","negate","step","positions","optElements","ltr","BarPositions","ResizeDirection","TableDirection","directionAt","auto","getGridSize","TableGridSize","__assign","assign","cat","findMap","setIfNot","ignore","newRows","newCells","renderSection","gridSection","sectionName","tb","isNew","tr","removeSection","renderOrRemoveSection","headSection","bodySection","footSection","copy$2","clonedCell","Redraw","read","remove$3","supports","classList","get$6","add$1","clazz","remove$4","add$2","cleanClass","remove$5","has$1","repeat","repititions","deduce","rest","aa","extras","abs","rowsArr","col","getBlock","isSingle","getFallback","decide","inBlock","singleInBlock","detailOption","rows$1","Blocks","namespace","dashNamespace","Styles","blocker","row$1","Bar","resizeBar","resizeRowBar","resizeColBar","BAR_THICKNESS","wire","previous","drawBar","origin","cpOption","cp","bar","refreshCol","colPositions","tableHeight","colBar","refreshRow","rowPositions","tableWidth","rowBar","refreshGrid","hdirection","vdirection","refresh","each$2","bars","isRowBar","isColBar","Bars","addCell","gridRow","setCells","mutateCell","mapCells","getCell","getCellElement","cellLength","GridRow","getColumn","getRow","findDiff","comp","subgrid","restOfRow","endColIndex","restOfColumn","endRowIndex","TableGrid","toDetails","seen","ri","ci","updateSeen","toGrid","rowCells","Transitions","fromWarehouse","deriveRows","rendered","findRow","rowOfCells","toDetailList","findInWarehouse","operation","adjustment","postAction","genWrappers","newElements","onCell","onPaste","onPasteRows","lc","onMergable","_warehouse","onUnmergable","onCells","mapError","_","onValue","toOption","isValue","isError","onError","fromOption","Result","measure","startAddress","gridA","gridB","rowRemainder","colRemainder","colRequired","rowRequired","rowDelta","colDelta","measureWidth","colLengthA","colLengthB","generator","rowFill","_row","colFill","tailor","fillCols","fillRows","modifiedCols","tailoredGrid","Fitment","substitution","unmerge","isToReplace","uniqueCells","currentCell","splitRows","rowPrevCells","replacement","_loop_1","_loop_2","sub","MergingOperations","isSpanning","matching","mergeTables","mergeHeight","mergeWidth","merge$1","fittedGrid","fittedNewGrid","secondDelta","fittedOldGrid","TableMerge","insertRowAt","between","withinSpan","insertColumnAt","splitCellIntoColumns","exampleRow","exampleCol","isTargetCell","splitCellIntoRows","deleteColumnsAt","deleteRowsAt","ModificationOperations","replaceIn","isTarget","notStartRow","colIndex","notStartColumn","replaceColumn","alreadyAdded","replaceRow","targetRow","TransformOperations","only","middle","ColumnContext","neighbours$1","determine","zero","onOnly","singleColumnWidth","onChange","newNext","minCellWidth","newThis","diffx","onLeft","onMiddle","_prev","onRight","Deltas","getSpan$1","hasColspan","hasRowspan","getInt","CellUtils","getRaw$1","getRawW","getRawH","getWidthFrom","backups","columnCell","deduced","getDeduced","getRawWidths","getPercentageWidths","getPixelWidths","getHeightFrom","rowCell","getPixelHeights","getRawHeights","ColumnSizes","measures","recalculateWidth","widths","recalculateHeight","heights","matchRowHeight","Recalculations","percentageSize","getCellDelta","_delta","setTableWidth","_newWidths","change","getWidths","setElementWidth","pixelSize","newWidths","chooseSize","fallbackWidth","getTableSize","TableSize","getWarehouse$1","sumUp","getTableWarehouse","adjustWidth","deltas","newSizes","adjustHeight","newHeights","newCellSizes","newRowSizes","adjustWidthTo","Adjustments","handleUnsupported","baseWith","invalidKeys","handleExact","exactly","verifyGenerators","elementToData","modification","toData","nuFrom","recent","getOrInit","transform","makeNew","replaceOrInit","merging","combine","Generators","blockList","isFormatting","isHeading","isContainer","isFrame","Structure","universe$1","isBlock$1","isFormatting$1","isHeading$1","isContainer$1","isEmptyTag$1","isFrame$1","isInline$1","DomStructure","merge$2","advancedBr","isListItem","siblingIsBlock","rightSibling","markCell","rightSiblingIsBlock","markContent","contents","TableContent","outcome","elementFromGrid","findIn","bundle","uniqueRows","currentDetail","uniqueColumns","insertRowBefore","targetIndex","newGrid","insertRowsBefore","newG","insertRowAfter","insertRowsAfter","insertColumnBefore","insertColumnsBefore","insertColumnAfter","insertColumnsAfter","makeRowHeader","makeColumnHeader","unmakeRowHeader","unmakeColumnHeader","splitCellIntoColumns$1","splitCellIntoRows$1","eraseColumns","_comparator","_genWrappers","eraseRows","mergeCells","unmergeCells","pasteDetails","gridify","wh","mergedGrid","nuGrid","gridifyRows","pasteRowsBefore","pasteRowsAfter","TableOperations","getBody$1","getPixelWidth$1","getPixelHeight","removePxSuffix","addSizeSuffix","removeDataStyle","dataStyleCells","getDirection","ltr$1","rtl$1","Direction","defaultTableToolbar","defaultStyles","defaultAttributes","getDefaultAttributes","getDefaultStyles","hasTableResizeBars","hasTabNavigation","hasAdvancedCellTab","hasAdvancedRowTab","hasAdvancedTableTab","hasAppearanceOptions","hasTableGrid","shouldStyleWithCss","getCellClassList","getRowClassList","getTableClassList","isPixelsForced","getCloneElements","cloneElements","hasObjectResizing","objectResizing","getToolbar","fireNewRow","fireNewCell","fireObjectResizeStart","fireObjectResized","TableActions","lazyWire","isTableBody","lastRowGuard","lastColumnGuard","guard","deleteRow","deleteColumn","copyRows","selectedCells","slicedGrid","slicedDetails","CopyRows","getTDTHOverallStyle","firstChildStyle","checkChildren","applyAlign","applyVAlign","unApplyAlign","unApplyVAlign","Styles$1","buildListItems","inputList","itemCallback","startItems","appendItems","styleFieldHasFocus","isEqualNode","syncAdvancedStyleFields","updateAdvancedFields","updateStyleField","borderStyle","borderColor","extractAdvancedStyles","createStyleForm","createColorPickAction","Helpers","updateStyles","dataset","mceStyle","extractDataFromElement","valign","onSubmitCellForm","cellElm","classListCtrl","generalCellForm","CellDialog","extractDataFromElement$1","switchRowType","rowElm","toType","oldParentElm","onSubmitRowForm","oldData","open$1","generalRowForm","RowDialog","DefaultRenderOptions","percentages","makeTable","tableBody","tableRow","tableHeaderCell","tableCell","rowHeaders","columnHeaders","renderOpts","tbody","trs","get$7","getOuter$2","placeCaretInCell","selectFirstCellInTable","fireEvents","isPercentage","insert$1","InsertTable","styleTDTH","extractDataFromElement$2","cellspacing","cellpadding","caption","applyDataToElement","onSubmitTableForm","captionElm","addVisual","open$2","isProps","colsCtrl","rowsCtrl","generalTableForm","TableDialog","each$3","registerCommands","clipboardRows","eraseTable","getSelectionStartCell","getSelectionStartCaption","cellOrCaption","getSelectionStartFromSelector","getTableFromCell","resizeChange","oldSize","actOnSelection","beforeSize","copyRowSelection","pasteOnSelection","clonedRows","mceTableSplitCells","mceTableMergeCells","mceTableInsertRowBefore","mceTableInsertRowAfter","mceTableInsertColBefore","mceTableInsertColAfter","mceTableDeleteCol","mceTableDeleteRow","mceTableCutRow","mceTableCopyRow","mceTablePasteRowBefore","mceTablePasteRowAfter","mceTableDelete","func","mceInsertTable","mceTableProps","mceTableRowProps","mceTableCellProps","detached","editable","body$1","ResizeWire","Event","handlers","create$1","typeDefs","registry","mkEvent","prevent","kill","rawEvent","binder","useCapture","wrapped","addEventListener","bind$1","removeEventListener","bind$2","shallow$1","merge$3","styles$1","Styles$2","Blocker","layerClass","DragMode","DragSink","DragApi","compare","extract$1","mutation","sink","dragApi","mdown","forceDrop","mup","drop","mmove","move","mout","delayDrop","MouseDrag","last$2","rate","throttle","InDrag","update","onEvent","dataOption","events","NoDrag","Movement","noDragState","inDragState","dragState","isOn","movement","throttledDrop","go","mousemove","runIfActive","Dragging","transform$1","Dragger","Mutation","BarMutation","xDelta","yDelta","findClosestContentEditable","resizeBarDragging","BarManager","resizing","hoverTable","getResizer","_dataRow","_dataCol","currentCol","getDelta","newX","oldX","startAdjust","mousedown","findClosestEditableTable","mouseover","hideBars","showBars","TableResize","manager","beforeResize","afterResize","startDrag","createContainer","get$8","remove$6","TableWire","ResizeHandler","startW","startRawW","selectionRng","isTable","lazyResize","sz","rawWire","rawTable","percentW","targetPercentW","newCellSizes_1","newCellSize","adt$1","none$1","CellLocation","detect$4","detection","CellNavigation","create$2","SimRange","adt$2","cata$1","onBefore","onOn","onAfter","situ","before$2","after$2","Situ","adt$3","domRange","relative","exact","exactFromRange","simRange","soffset","foffset","getStart$1","startSitu","finishSitu","range$1","selectNodeContentsUsing","setFinish","setEndBefore","relativeToNative","exactToNative","toRect","getFirstRect","rects","getClientRects","adt$4","fromRange","getRanges","doDiagnose","ranges","reversed","rev","diagnose","asLtrRange","diagnosis","searchForPoint","rectForOffset","curDeltaX","inRect","locateOffset","textnode","rangeForOffset","locate","selectNode","foundRect","searchInChildren","locateNode","locate$1","boundedX","boundedY","COLLAPSE_TO_LEFT","COLLAPSE_TO_RIGHT","getCollapseDirection","createCollapsedNode","collapseDirection","locateInElement","cursorRange","locateInEmpty","caretPositionFromPoint","caretRangeFromPoint","searchTextNodes","searchFromPoint","availableSearch","fromPoint$1","beforeSpecial","name$1","preprocessRelative","preprocessExact","preprocess","makeRange","after$3","same","doSetNativeRange","removeAllRanges","addRange","doSetRange","setLegacyRtlRange","setRangeFromRelative","setBaseAndExtent","setExact","setRelative","toNative","getDomRange","readRange","rangeCount","firstRng","getRangeAt","doGetExact","anchor","anchorNode","focusNode","anchorOffset","focusOffset","setToElement","getExact","sel","get$9","getFirstRect$1","getAtPoint","backward","getCellFirstCursorPosition","getNewRowCursorPosition","rootElements","handle$1","body_1","isRoot_1","navigation","TabContext","create$3","Response","create$4","Situs","convertToRange","makeSitus","Util","sync","selectRange","detect$5","cellSel","annotations","newSels","KeySelection","traverse","backtrack","_direction","transition","sidestep","advance","successors","go$1","rules","ruleOpt","succ","Walkers","hone","left$1","right$1","isLeaf","before$3","seekLeft","after$4","seekRight","universe$2","before$4","after$5","seekLeft$1","seekRight$1","ancestor$2","point","adt$5","success","failedUp","failedDown","isOverlapping","bridge","beforeBounds","afterBounds","isRow","verify","beforeOffset","afterOffset","failure","afterCell","beforeCell","_sharedRow","cata$2","onSuccess","onFailedUp","onFailedDown","BeforeAfter","inParent","indexInParent","gatherer","cand","gather","handleBr","findBr","handleParent","br","adjacent","tryBr","tgt","analysis","BrTags","nu$3","moveDown","caret","moveUp","moveBottomTo","moveTopTo","getTop$1","getBottom","Carets","getPartialBox","getRangedRect","toCaret","getElemBox","getBoxAt","getEntireBox","Rectangles","JUMP_SIZE","NUM_RETRIES","adt$6","retry","isOutside","inOutsideBlock","adjustDown","guessBox","lowerCaret","adjustUp","higherCaret","upMovement","adjuster","downMovement","isAtTable","adjustForTable","numRetries","adjustTil","situsFromPoint","guess","newCaret","ieTryDown","ieTryUp","checkScroll","adjusted","getInnerHeight","moved","scrollBy","Retries","tryUp","tryDown","getJumpSize","MAX_RETRIES","platform$1","findSpot","brNeighbour","fromSitus","scan","tryCursor","situs","tryAgain","tryAt","otherRetry","ieRetry","handle$2","spot","TableKeys","inSameTable","simulate","navigate","precheck","firstUpCheck","lastOffset","lastDownCheck","VerticalMovement","findCell","MouseSelection","clearState","selectContents","mouseup","_event","KeyDirection","isKey","keycode","isUp","isDown","isNavigation","SelectionKeys","isBackward","toRaw","sr","Rect","get$a","_DOC","by","WindowBridge","exactAdt","clearSelection","setSelection","setRelativeSelection","getScrollY","rc","mouse","clearToNavigate","keydown","realEvent","which","attempts","keyup","InputHandlers","remove$7","removeClasses","byClass","ephemera","addSelectionClass","removeSelectionClasses","byAttr","removeSelectionAttributes","addSelectionAttribute","SelectionAnnotation","hasInternalTarget","CellSelection$1","handlerStruct","syncSelection","mouseHandlers","keyHandlers","hasShiftKey","handleResponse","response","ns","wrappedEvent","wrapEvent","isMouseEvent","isLeftMouse","isLeftButtonPressed","mouseDown","mouseOver","mouseUp","Selections","each$4","addButtons","addToolbars","selectorMatched","addContextToolbar","addMenuItems","tableCtrls","cellCtrls","mergeCtrls","unmergeCtrls","noTargetDisable","ctrlEnable","pushTable","pushCell","pushMerge","pushUnmerge","setDisabledCtrls","mergeCtrl","unmergeCtrl","cellDom","generateTableGrid","selectGrid","tx","ty","focusCell","insertTable","onhide","lastX","lastY","onmousemove","tableProperties","deleteTable","MenuItems","getClipboardRows","setClipboardRows","sugarRows","resizeHandler","addTempAttr","Plugin$1","getDateFormat","getTimeFormat","getFormats","getDefaultDateTime","shouldInsertTimeElement","daysShort","daysLong","monthsShort","monthsLong","addZeros","getDateTime","getFullYear","getYear","getMonth","getDate","getHours","getMinutes","getSeconds","getDay","updateElement","timeElm","computerTime","userTime","newTimeElm","datetime","insertDateTime","lastFormatState","lastFormat","_v","assumeExternalTargets","link_assume_external_targets","hasContextToolbar","link_context_toolbar","getLinkList","link_list","hasDefaultLinkTarget","default_link_target","getTargetList","target_list","setTargetList","shouldShowTargetList","getRelList","rel_list","hasRelList","getLinkClassList","link_class_list","hasLinkClassList","shouldShowLinkTitle","link_title","allowUnsafeLinkTarget","allow_unsafe_link_target","appendClickRemove","link","dispatchEvent","createEvent","initMouseEvent","opener","OpenUrl","toggleTargetRules","isUnsafe","newRel","addTargetRules","removeTargetRules","trimCaretContainers","getAnchorElement","selectedElm","isImageFigure","getAnchorText","anchorElm","isLink","hasLinks","isOnlyTextSelected","attachState","linkAttrs","linkImageFigure","unlink","unlinkImageFigure","fig","createLinkList","linkList","send","JSON","delayedConfirm","initialText","onlyText","textListCtrl","linkListCtrl","relListCtrl","targetListCtrl","linkTitleCtrl","linkListChangeHandler","textCtrl","buildAnchorListControl","anchorList","updateText","urlChange","convertURL","inp","onBeforeCall","onkeyup","onpaste","onbeforecall","insertLink","removeLink","resultData","getLink","getSelectedLink","getHref","hasOnlyAltModifier","altKey","metaKey","gotoLink","targetEl","openDialog","gotoSelectedLink","leftClickedOnAHref","setupGotoLinks","toggleViewLinkState","toggleVisibility","addShortcut","setupButtons","onpostrender","setupMenuItems","setupContextToolbars","Controls","hasDimensions","image_dimensions","hasAdvTab","image_advtab","getPrependUrl","getClassList","hasDescription","image_description","hasImageTitle","image_title","hasImageCaption","image_caption","getImageList","hasUploadUrl","hasUploadHandler","getUploadUrl","getUploadHandler","getUploadBasePath","getUploadCredentials","parseIntAndGetMax","val1","val2","getImageSize","onerror","visibility","removePixelSuffix","addPixelSuffix","mergeMargins","splitMargin","createImageList","imageList","waitLoadImage","selectImage","blobToDataUri","getHspace","marginLeft","marginRight","getVspace","marginTop","marginBottom","getBorder","borderWidth","hasCaption","wrapInFigure","figureElm","removeFigure","toggleCaption","normalizeStyle","normalizeCss","attrValue","setSize","setHspace","pxValue","setVspace","setBorder","setBorderStyle","getBorderStyle","isFigure","defaultData","hspace","vspace","getStyleValue","figure","updateProp","newData","normalized","mergedCss","compressed","getSelectedImage","splitTextBlock","readImageDataFromSelection","insertImageAtCaret","setContent","insertedElm","syncSrcAttr","deleteImage","writeImageDataToSelection","insertOrUpdateImage","updateVSpaceHSpaceBorder","updateStyle","makeTab","AdvTab","doSyncSize","widthCtrl","heightCtrl","doSizeControls","constrained","doUpdateSize","isContrained","oldWidth","oldHeight","newHeight","syncSize","updateSize","createUi","recalcSize","SizeManager","onSrcChange","srcURL","prependURL","absoluteURLPattern","imageListCtrl","getGeneralItems","generalFormItems","makeTab$1","MainTab","createObjectURL","revokeObjectURL","URL","XMLHttpRequest","pathJoin","path1","path2","Uploader","defaultHandler","progress","xhr","formData","withCredentials","credentials","upload","onprogress","loaded","json","responseText","location","basePath","FormData","filename","uploadBlob","isDefaultHandler","onFileInput","uploader","finalize","dataUrl","catch","acceptExts","makeTab$2","UploadTab","submitForm","uploadImagesAuto","altCtrl","hasImageClass","toggleContentEditableState","toggleContentEditable","getAll","print","ie11","ie12","iDevice","fileApi","phone","tablet","windowsPhone","isObject","isNull","partition","pass","fail","difference","a1","a2","mapToObject","nav","matchMediaQuery","matchMedia","appName","requestAnimationFramePromise","Env","caretAfter","ceFalse","cacheSuffix","experimentalShadowDom","canHaveCSP","asap","immediateFn","promiseObj","requestAnimationFrameFunc","vendors","featurefill","wrappedSetTimeout","wrappedSetInterval","wrappedClearTimeout","wrappedClearInterval","debounce","Delay","setEditorInterval","eventExpandoPrefix","mouseEventRe","deprecated","keyLocation","layerX","layerY","returnValue","webkitMovementX","webkitMovementY","keyIdentifier","hasIsDefaultPrevented","returnTrue","returnFalse","addEvent","capture","attachEvent","removeEvent","detachEvent","getTargetFromShadowDom","defaultTarget","composedPath","fix","originalEvent","srcElement","eventDoc","cancelBubble","isImmediatePropagationStopped","bindOnReady","eventUtils","domLoaded","isDocReady","readyState","readyHandler","waitForDomLoaded","tryScroll","doScroll","EventUtils","expando","hasFocusIn","hasMouseEnterLeave","mouseEnterLeave","mouseenter","mouseleave","executeHandlers","callbackList","fakeName","nativeHandler","defaultNativeHandler","related","currentTarget","relatedTarget","eventMap","parentWindow","support","Expr","isXML","tokenize","outermostContext","sortInput","hasDuplicate","setDocument","docElem","documentIsHTML","rbuggyQSA","rbuggyMatches","preferredDoc","dirruns","classCache","createCache","tokenCache","compilerCache","sortOrder","strundefined","MAX_NEGATIVE","hasOwn","pop","push_native","indexOf$1","booleans","whitespace","identifier","pseudos","rtrim","rcomma","rcombinators","rattributeQuotes","rpseudo","ridentifier","matchExpr","ID","CLASS","TAG","ATTR","PSEUDO","CHILD","bool","needsContext","rinputs","rheader","rnative","rquickExpr","rsibling","rescape","runescape","funescape","escaped","escapedWhitespace","high","els","Sizzle","results","seed","groups","nid","newContext","newSelector","getElementsByClassName","qsa","toSelector","testContext","qsaError","cacheLength","markFunction","siblingCheck","cur","diff","sourceIndex","createInputPseudo","createButtonPseudo","createPositionalPseudo","argument","matchIndexes","hasCompare","getById","attrId","tmp","disconnectedMatch","adown","bup","sortDetached","aup","bp","expr","matchesSelector","attrHandle","getAttributeNode","specified","uniqueSort","duplicates","detectDuplicates","sortStable","createPseudo","preFilter","excess","unquoted","nodeNameSelector","operator","what","simple","ofType","xml","outerCache","useCache","setFilters","matched","matcher","unmatched","lang","elemLang","hash","hasFocus","tabIndex","enabled","selectedIndex","header","even","odd","lt","gt","nth","radio","checkbox","password","tokens","addCombinator","combinator","checkNonElements","doneName","oldCache","newCache","elementMatcher","matchers","multipleContexts","contexts","condense","newUnmatched","mapped","setMatcher","postFilter","postFinder","postSelector","temp","preMap","postMap","preexisting","elems","matcherIn","matcherOut","matcherFromTokens","checkContext","leadingRelative","implicitRelative","matchContext","matchAnyContext","matcherFromGroupMatchers","elementMatchers","setMatchers","bySet","byElement","superMatcher","outermost","matchedCount","setMatched","contextBackup","dirrunsUnique","parseOnly","soFar","preFilters","token","compiled","isArray$1","indexOf$2","reduce","collection","iteratee","accumulator","findIndex$1","ArrUtils","whiteSpaceRegExp","delim","sp","cn","scn","de","createNS","onCreate","static","ext","resolve$1","explode","_addCacheSuffix","push$2","slice$2","rquickExpr$1","skipUniques","isDefined","isString$1","isWindow","fragDoc","frag","domManipulate","targetNodes","sourceItem","getElementDocument","DomQuery","makeArray","lastParent","newWrapper","numericCssMap","booleanMap","propFix","for","cssFix","float","attrHooks","cssHooks","whiteSpaceRegExp$1","trim$1","hook","removeAttr","camel","dashed","host","prependTo","replaceWith","wrapAll","wrapInner","existingClassName","classState","object","until","siblingName","firstSibling","parentsUntil","nextUntil","prevUntil","overrideDefaults","appendHooks","targetHooks","hooks","maxlength","zoom","ie$1","opera$1","android$1","trim$2","lTrim","rTrim","hasOwnProperty$1","map$2","bifilter","branch","toArray$1","recurse","Recurse","contains$3","prevSiblings","nextSiblings","childNodesCount","browser$1","firstElement","getTableCaptionDeltaY","bodyTop","captionTop","captionHeight","module$1","nu$4","StyleSheetLoader","maxLoadTime","idCount","loadedStates","appendToHead","loadedCallback","errorCallback","startTime","passed","failed","isOldWebKit","webKitChunks","wait","testCallback","waitCallback","waitForWebKitLinkLoaded","styleSheet","styleSheets","ownerNode","owningElement","waitForGeckoLinkLoaded","cssRules","sheet","async","defer","contentCssCors","crossOrigin","loadF","unbox","loadAll","urls","TreeWalker","findSibling","startName","findPreviousNode","prev2","namedEntities","baseEntities","reverseEntities","voids","tableCells","tableSections","headings","listItems","wsElements","lazyLookup","isVoid","isTableSection","isTableCell","isWsPreserveElement","isNodeType","isRestrictedNode","getPrototypeOf","isElement$1","matchNodeNames","matchStyleValues","cssValue","computed","hasPropValue","propName","propValue","attrName","hasAttributeValue","isBogus","isBogusAll","isText$1","isDocument","isDocumentFragment","isBr$1","surroundedBySpans","previousIsSpan","nextIsSpan","trimNode","trimmedLength","TrimNode","makeMap$1","attrsCharsRegExp","textCharsRegExp","rawCharsRegExp","entityRegExp","asciiMap","128","130","131","132","133","134","135","136","137","138","139","140","142","145","146","147","148","149","150","151","152","153","154","155","156","158","159","'","nativeDecode","buildEntitiesLookup","entity","encodeRaw","encodeNumeric","encodeNamed","entities","getEncodeFunc","entitiesMap","encodeNamedAndNumeric","encodeCustomNamed","nameMap","named","numeric","Entities","mapCache","dummyObj","makeMap$2","extend$1","explode$1","inArray$1","compileSchema","globalAttributes","blockContent","phrasingContent","flowContent","html4BlockContent","html4PhrasingContent","ni","arrayToMap","addAttrs","schemaItem","script","compileElementMap","Schema","invalidStyles","schemaItems","whiteSpaceElementsMap","selfClosingElementsMap","boolAttrMap","validClasses","nonEmptyElementsMap","moveCaretBeforeOnEnterElementsMap","textBlockElementsMap","textInlineElementsMap","patternElements","customElementsMap","specialElements","createLookupTable","option","extendWith","verify_html","valid_styles","invalid_styles","valid_classes","special","patternToRegExp","addValidElements","ei","ai","al","attrData","elementName","attrType","outputName","globalAttributesOrder","elementRuleRegExp","attrRuleRegExp","hasPatternsRegExp","paddEmpty","removeEmpty","removeEmptyAttrs","attributesRequired","attributesDefault","attributesForced","forcedValue","validValues","attributePatterns","setValidElements","addCustomElements","customElements","customElementRegExp","text_block_elements","block_elements","cloneName","customRule","elmName","addValidChildren","validChildren","childRuleRegExp","getElementRule","custom_elements","extended_valid_elements","dd","dt","th","thead","tfoot","legend","area","param","parentsRequired","invalid_elements","getValidStyles","getInvalidStyles","getValidClasses","getBoolAttrs","getTextInlineElements","getSelfClosingElements","getMoveCaretBeforeOnEnterElements","getSpecialElements","isValidChild","isValid","attrPatterns","getCustomElements","encodingItems","rgbRegExp","urlOrStrRegExp","styleRegExp","trimRightRegExp","encodingLookup","invisibleChar","isEncoded","urlConverter","url_converter","urlConverterScope","url_converter_scope","compress","noJoin","canCompress","compress2","keepSlashes","decodeSingleHexSequence","escSeq","decodeHexSequences","processUrl","url2","url3","str2","allow_script_urls","scriptUrl","allow_svg_data_urls","lastIndex","serializeStyles","styleList","styleMap","each$5","grep$1","simpleSelectorRe","whiteSpaceRegExp$2","setupAttrHooks","getContext","keepValues","keep_values","keepUrlHook","$elm","updateInternalStyleAttr","rawValue","findNodeIndex","lastNodeType","DOMUtils","_this","addedStyles","counter","stdMode","boxModel","boundEvents","ownEvents","proxy","getElementsByName","$$","defaultVal","getAttribs","originalValue","onSetAttrib","attrElm","clone_1","root_element","argWin","actWin","update_styles","stylesArg","selectorVal","_findSib","getNext","getPrev","canHaveHTML","newElm","outHtml","keepChildren","$node","removeAllAttribs","removeAttributeNode","addStyle","styleElm","loadCSS","getOuterHTML","setOuterHTML","reference","referenceNode","oldElm","attrNode","findCommonAncestor","pe","rgbVal","brCount","bogusVal","splitElm","replacementElm","bef","aft","pa","getContentEditableParent","dumpRng","DOMUtils$1","each$6","grep$2","isFunction$1","ScriptLoader","QUEUED","LOADING","LOADED","FAILED","states","scriptLoadedCallbacks","queueLoadedCallbacks","loading","loadScript","onreadystatechange","isDone","markDone","loadQueue","loadScripts","scripts","failures","execCallbacks","loadingScripts","notifyCallbacks","each$7","AddOnManager","_listeners","instance","dependencies","requireLangPack","languages","language","languageLoad","addOn","listener","createUrl","baseUrl","dep","resource","addComponents","pluginName","loadDependencies","addOnUrl","deps","newUrl","urlString","lastIndexOf","waitFor","PluginManager","ThemeManager","wrap$1","has$2","annotation","dataAnnotation","dataAnnotationId","annotationName","an","newStart","getAttr","uid","findMarkers","isAnnotation","findAll","markers","directory","nodesAlready","changeCallbacks","initData","withCallbacks","updateCallbacks","callbackMap","outputData","fireCallbacks","fireNoAnnotation","onNodeChange","identifyParserNode","optAnnotation","persistent","__rest","getOwnPropertySymbols","propertyIsEnumerable","add$3","owner$1","docDom","contentElements","ZWSP","isZwsp","trim$3","Zwsp","isElement$2","isText$2","isCaretContainerBlock","isCaretContainerInline","isCaretContainer","hasContent","insertInline","textNode","endsWithCaretContainer","splitText","startsWithCaretContainer","isBeforeInline","isAtStart","isAfterInline","isAtEnd","createBogusBr","insertBlock","blockNode","trimBogusBr","brs","lastBr","showCaretContainerBlock","caretContainer","isRangeInCaretContainerBlock","isContentEditableTrue$1","isContentEditableFalse$1","isBr$2","isText$3","isInvalidTextElement","isAtomicInline","isTable$1","isCaretContainer$1","isCaretCandidate","isNonUiContentEditableFalse","isUnselectable","isInEditable","isAtomicContentEditableFalse","isAtomic","isEditableCaretCandidate","toStart","rect1","rect2","isValidOverflow","overflowY","isAbove","isBelow","containsXY","overflowX","getOverflow","getSelectedNode","extendingChars","isExtendingChar","ch","slice$3","and","Predicate","isElement$3","isCaretCandidate$1","isFloated","isValidElementCaretCandidate","isNotPre","isText$4","isBr$3","resolveIndex","isWhiteSpace","isRange","isHiddenWhiteSpaceRange","getBrClientRect","brNode","nbsp","getBoundingClientRectWebKitText","ec","so","eo","newRng","isZeroRect","clientRects","collapseAndInflateWidth","newClientRect","getCaretPositionClientRects","caretPosition","beforeNode","addUniqueAndValidRect","addCharacterOffset","CaretPosition","toRange","isVisible","fromRangeStart","fromRangeEnd","isTextPosition","isElementPosition","HDirection","CaretPosition$1","isText$5","isBogus$1","nodeIndex$1","normalizedParent","getChildNodes","normalizedTextOffset","equal","normalizedNodeIndex","numTextFragments","createPathItem","outputOffset","resolvePathItem","findTextPosition","dataLen","targetOffset","resolve$2","trimEmptyTextNode","insertNode","insertFragment","rangeInsertNode","isContentEditableFalse$2","getNormalizedTextOffset","trimmedOffset","getPoint","getLocation","findIndex$2","moveEndPoint","normalizeTableCellSelection","findAdjacentContentEditableFalseElm","getOffsetBookmark","getCaretBookmark","getRangeBookmark","createBookmarkSpan","filled","getPersistentBookmark","rng2","endBookmarkNode","startBookmarkNode","keep","GetBookmark","getUndoBookmark","CARET_ID","isCaretNode","getParentCaretContainer","isElement$4","isText$6","getNodeValue","setNodeValue","trimCount","trimmedText","removeUnchanged","removeTextAndReposition","removeElementAndReposition","newPosition","removeTextCaretContainer","removeElementCaretContainer","removeAndReposition","caretContainerNode","CaretContainerRemove","browser$2","isContentEditableFalse$3","isTableCell$1","getAbsoluteClientRect","scrollX","rootRect","trimInlineCaretContainers","contentEditableFalseNodes","deleteData","FakeCaret","cursorInterval","lastVisualCaret","caretState","startBlink","getCss","isFakeCaretTableBrowser","isFakeCaretTarget","isContentEditableFalse$4","isBlockLike","isCaretContainer$2","isCaretContainerBlock$1","isElement$5","isCaretCandidate$2","isForwards","isBackwards","skipCaretContainers","findNode","predicateFn","getParentBlock","isInSameBlock","caretPosition1","caretPosition2","getChildNodeAtRelativeOffset","relativeOffset","beforeAfter","isNodesInSameBlock","node1","node2","lean","leanLeft","leanRight","getRelativeCefElm","getNormalizedRangeEndPoint","normalizedRange","getElementFromPosition","getElementFromPrevPosition","getVisualCaretPosition","walkFn","isMoveInsideSameBlock","to","inSameBlock","isContentEditableFalse$5","isText$7","isElement$6","isBr$4","isCaretCandidate$3","isAtomic$1","isEditableCaretCandidate$1","nodeAtIndex","getCaretCandidatePosition","moveForwardFromBr","nextNode","findCaretPosition","Forwards","rootContentEditableFalseElm","CaretWalker","Backwards","walkToPositionIn","fromPosition","afterElement","isBeforeOrStart","isAfterOrEnd","isBeforeAfterSameElement","isAtBr","shouldSkipPosition","navigateIgnore","ignoreFilter","positionIn","nextPosition","prevPosition","CaretFinder","firstPositionIn","lastPositionIn","isStringPathBookmark","isRangeBookmark","isIdBookmark","isIndexBookmark","isPathBookmark","addBogus","resolveCaretPositionBookmark","insertZwsp","tryFindRangePosition","padEmptyCaretContainer","setEndPoint","isValidTextNode","appendData","o1","o2","resolvePaths","resolveId","endPos","spos","epos","resolveIndex$1","resolve$3","ResolveBookmark","getBookmark$1","isBookmarkNode$1","Bookmarks","isInlineBlock","moveStart","isWhiteSpaceNode","getNonWhiteSpaceSibling","inc","isTextBlock$1","ed","replaceVars","vars","isEq","str1","normalizeStyleValue","getTextDecoration","decoration","getParents$1","FormatUtils","isBookmarkNode$2","getParents$2","isWhiteSpaceNode$1","isTextBlock$2","findLeaf","excludeTrailingWhitespace","leaf","findParentContentEditable","findSpace","findWordEndPoint","lastTextNode","findSelectorEndPoint","curFormat","findBlockEndPoint","scopeRoot","findParentContainer","block_expand","expandRng","endPoint","expand","ExpandRange","each$8","getEndChild","walk$1","startPoint","exclude","collectSiblings","findEndPoint","walkBoundary","RangeWalk","zeroWidth","isZeroWidth","wrapName","shouldApplyToTrailingSpaces","applyWordGrab","makeAnnotation","eDoc","decorate","_b","master","_d","_e","annotate","newWrappers","finishWrapper","getOrOpenWrapper","processElements","processElement","processNodes","annotateWithBookmark","initialRng","Annotator","changes","annotationChanged","hasOnlyOneChild","isPaddingNode","isPaddedEmptyBlock","isEmptyFragmentElement","nonEmptyElements","isListFragment","cleanupDomFragment","domFragment","toDomFragment","listItems$1","isPadding","isListItemPadded","isEmptyOrPadded","trimListItems","getParentLi","isParentBlockLi","getSplit","beforeRng","afterRng","cloneContents","findFirstIn","caretPos","caretWalker","newCaretPos","findLastOf","insertMiddle","insertAtCaret","liTarget","liElms","BEGINNING","END","isAt","newPos","InsertList","each$9","ElementUtils","attribs","compareObjects","obj1","obj2","getLastChildren","rawNode","removeTrailingBr","allBrs","fillWithPaddingBr","isPaddingContents","isPaddedElement","trimBlockTrailingBr","lastChildPrevSibling","PaddingBr","makeMap$3","Writer","indentBefore","indentAfter","htmlOutput","indent_before","indent_after","entity_encoding","element_format","cdata","comment","pi","doctype","HtmlSerializer","writer","8","7","10","11","sortedAttrs","elementRule","createRange$1","normalizeBlockSelectionRange","commonAncestorContainer","newEndPos","normalize","RangeNormalizer","isAfterNbsp","trimOrPadLeftRight","hasSiblingText","trimNbspAfterDeleteAndPadValue","isTableCell$2","selectionSetContent","insertData","validInsertion","trimBrsFromTableCell","reduceInlineTextElements","textInlineElements","root_1","elementUtils_1","testNode","markFragmentElements","umarkFragmentElements","isPartOfFragment","canHaveChildren","moveSelectionToMarker","parentEditableFalseElm","nextRng","getContentEditableFalseParent","findNextCaretRng","insertHtmlAtCaret","bookmarkHtml","caretElement","parentElement","parserArgs","_selectionOverrides","showBlockCaretContainer","invalid","processValue","insertAtCaret$1","InsertContent","strongRtl","hasStrongRtl","getBodySetting","bodyObj","getIframeAttrs","getDocType","getDocumentBaseUrl","getBodyId","getBodyClass","getContentSecurityPolicy","shouldPutBrInPre","getForcedRootBlock","getForcedRootBlockAttrs","getBrNewLineSelector","getNoNewLineSelector","shouldKeepStyles","shouldEndContainerOnEmptyBlock","getFontStyleValues","getFontSizeClasses","getImagesDataImgFilter","isAutomaticUploadsEnabled","shouldReuseFileName","shouldReplaceBlobUris","getImageUploadUrl","getImageUploadBasePath","getImagesUploadCredentials","getImagesUploadHandler","shouldUseContentCssCors","getInlineBoundarySelector","isInlineTarget","findInlineParents","findRootInline","hasSameParentBlock","block1","block2","isAtZwsp","normalizePosition","normalizeForwards","normalizeBackwards","InlineUtils","isBeforeRoot","getParentBlock$1","placeCaretInEmptyBody","paddEmptyBody","willDeleteLastPositionInElement","fromPos","firstPos","lastPos","normalizedFirstPos","normalizedLastPos","normalizedFromPos","nextPos","prevPos","DeleteUtils","hasWhitespacePreserveParent","rootElement","isWhitespace","isNamedAnchor","isContent","isBookmark","isBogus$2","isBogusAll$1","isEmptyNode","isEmpty$1","Empty","BlockPosition","BlockBoundary","getBlockPosition","isDifferentBlocks","blockBoundary","hasSameParent","parent1","parent2","skipLastBr","blockPosition","lastPositionInBlock","readFromRange","fromBlockPos","toBlockPos","blockPos","read$1","BlockMergeBoundary","dropLast","parentsUntil$1","parents$1","Parents","getChildrenUntilBlockBoundary","extractChildren","removeEmptyRoot","isEmptyBefore","nestedBlockMerge","fromBlock","toBlock","insertionPoint","sidelongBlockMerge","findInsertionPoint","getInsertionPoint","trimBr","mergeBlockInto","mergeBlocks","MergeBlocks","BlockBoundaryDelete","deleteRangeMergeBlocks","deleteContents","isRawNodeInTable","isSelectionInTable","isEverythingSelected","noPrevious","noNext","emptyEditor","deleteRange","backspaceDelete$1","BlockRangeDelete","isBr$5","parentBlocks","isBeforeBr","isAfterBr","findPreviousBr","findNextBr","is$2","expected","isNbsp","isWhiteSpace$1","isContent$1","isChar","isBeforeSpace","isAfterSpace","isEmptyText","isNextToContentEditableFalse","isBeforeContentEditableFalse","isAfterContentEditableFalse","isNextToTable","isBeforeTable","isAfterTable","isCompoundElement","DeleteAction","moveToElement","moveToPosition","isAtContentEditableBlockCaret","caretLocation","isDeleteFromCefDifferentBlocks","deleteEmptyBlockOrMoveToCef","toCefElm","blockElm","findCefPosition","getContentEditableBlockAction","skipMoveToActionFromInlineCefToContent","deleteAction","getContentEditableAction","read$2","isCollapsibleWhitespace","normalizeContent","isStartOfContent","isEndOfContent","previousCharIsSpace","normalize$1","replaceData","normalizeWhitespaceAfter","whitespaceCount","normalizeWhitespaceBefore","mergeTextNodes","prevNode","normalizeWhitespace","whitespaceOffset","needsReposition","beforeOrStartOf","afterOrEndOf","getPreviousSiblingCaretPosition","getNextSiblingCaretPosition","findCaretPositionBackwardsFromElm","startPosition","findCaretPositionForwardsFromElm","findCaretPositionBackwards","findCaretPositionForward","findCaretPosition$1","findCaretPosOutsideElmAfterDelete","eqRawNode","isBlock$2","paddEmptyBlock","deleteNormalized","afterDeletePosOpt","prevTextOpt","nextTextOpt","isInlineElement","deleteElement","moveCaret","afterDeletePos","normalizedAfterDeletePos","paddPos","DeleteElement","deleteElement$1","hideFakeCaret","deleteOffscreenSelection","selectedElement","getContentEditableRoot","paddEmptyElement","ceRoot","backspaceDelete$2","CefDelete","isText$8","startsWithCaretContainer$1","endsWithCaretContainer$1","createZwsp","insertBefore$1","newNode","insertAfter$1","insertInline$1","insertInlineBefore","insertInlineAfter","insertInlinePos","isPosCaretContainer","caretNode","renderCaret","BoundaryCaret","evaluateUntil","fns","LazyEvaluator","Location","rescope","nPos","isNotInsideFormatCaretContainer","findInsideRootInline","isValidLocation","readLocation","getName","outside","isEq$1","location1","location2","betweenInlines","fromInline","toInline","skipNoMovement","fromLocation","toLocation","findLocationTraverse","findLocationSimple","findLocation","BoundaryLocation","prevLocation","nextLocation","hasSelectionModifyApi","getSel","modify","moveByWord","WordSelection","setCaretPosition","isFeatureEnabled","inline_boundaries","renderCaretLocation","findLocation$1","toggleInlines","selectedInlines","targetInlines","safeRemoveCaretContainer","composing","renderInsideInlineCaret","inlines","moveWord","setupSelectedState","moveNextWord","movePrevWord","BoundarySelection","isFeatureEnabled$1","rangeFromPositions","hasOnlyTwoOrLessPositionsLeft","setCaretLocation","deleteFromTo","rescope$1","backspaceDeleteCollapsed","toPosition","backspaceDelete$3","InlineBoundaryDelete","tableCellRng","tableSelection","removeTable","emptyCells","isRootFromElement","getClosestCell","getClosestTable","isExpandedCellRng","cellRng","getTableFromCellRng","startParentTable","endParentTable","getTableCells","getCellRangeFromStartTable","endCell","partialSelection","isWithinSameTable","getCellRng","getTableSelectionFromCellRng","getTableSelectionFromRng","getCellIndex","getSelectedCells","getAction","getActionFromCells","getActionFromRange","TableDeleteAction","getSelectedNodes","hasMultipleRanges","MultiRange","getCellsFromRanges","getCellsFromElement","getCellsFromElementOrRanges","rangeCells","getCellsFromEditor","TableCellSelection","deleteTableElement","deleteCellRange","deleteCaptionRange","emptyElement","deleteTableRange","startElm","getParentCaption","deleteRange$1","getParentCell","deleteBetweenCells","fromCell","toCell","isDeleteOfLastCharPos","fromCaption","emptyCaretCaption","validateCaretCaption","toCaption","deleteCaretInsideCaption","deleteCaretCells","deleteCaretCaption","deleteCaret","backspaceDelete$4","TableDelete","isEq$2","matchesUnInheritedFormatSelector","formatList","inherit","matchParents","matchName","matchItems","similar","onmatch","matchAll","startElement","matchedFormatNames","checkedMap","defaultBlock","MatchFormat","split$1","SplitRange","ZWSP$1","CARET_ID$1","importNode","getEmptyCaretContainers","isCaretContainerEmpty","findFirstTextNode","createCaretContainer","trimZwspFromCaretContainer","removeCaretContainerNode","removeCaretContainer","insertCaretContainerNode","formatNode","appendNode","insertFormatNodesIntoCaretContainer","formatNodes","innerMostFormatNode","applyCaretFormat","wordcharRegex","removeCaretFormat","hasContentAfter","expandedRng","newCaretContainer","disableCaretContainer","replaceWithCaretFormat","innerMost","isFormatElement","inlineElements","isEmptyCaretFormatElement","getParentInlines","hasOnlyOneChild$1","deleteLastPosition","parentInlines","isFormatElement$1","deleteCaret$1","backspaceDelete$5","InlineFormatDelete","isContentEditableTrue$2","isContentEditableFalse$6","showCaret","getNodeRange","renderCaretAtRange","caretPositionNode","caretPositionBeforeNode","renderRangeCaret","caretRange","trimEmptyTextNode$1","deleteContentAndShowCaret","peekCaretPosition","deleteCefBoundaryText","getNextVisualCaretPosition","getPrevVisualCaretPosition","getNextPosFn","isBeforeContentEditableFalseFn","nextCaretPosition","backspaceDelete$6","CefBoundaryDelete","nativeCommand","deleteCommand","forwardDeleteCommand","DeleteCommands","getSpecifiedFontProp","getProperty","round$1","normalizeFontFamily","getComputedFontProp","getFontProp","FontInfo","getFontSize","getFontFamily","findFirstCaretElement","isRangeAtStartOfNode","getCaretElement","fromFontSizeNumber","fontSizeNumber","fontSizes","fontClasses","fontNameAction","fontNameQuery","fontSizeAction","fontSizeQuery","isEq$3","rng1","RangeCompare","findParent","hasParent","hasParentWithName","isTable$2","isTableCell$3","isCeFalseCaretContainer","hasBrBeforeAfter","isPrevNode","hasContentEditableFalseParent","findTextNodeRelative","isAfterNode","lastInlineElement","parentBlockContainer","normalizeEndPoint","directionLeft","normalize$2","normRng","NormalizeRange","hasRightSideContent","scrollToBr","brElm","moveSelectionToBr","extraBr","insertBrAtCaret","isAfterLastNodeInContainer","containerBlock","containerBlockName","isControlKey","insertBrBefore","insertBrAfter","hasBrAfter","isBeforeBr$1","isAnchorLink","isInsideAnchor","readInlineAnchorLocation","insertBrOutsideAnchor","anchorLocation","InsertBr","browser$3","normalizeRng","isOrContains","isRngInRoot","shouldStore","nativeRangeToSelectionRange","getBookmark$2","bookmarkToNativeRng","store","newBookmark","storeNative","restore","SelectionBookmark","indentElement","useMargin","indentStyleName","isListComponent","parentIsListComponent","getBlocksToIndent","indentUnit","indentValue","each$a","extend$2","map$3","inArray$2","EditorCommands","customCommand","skip_focus","addCommands","commandList","queryCommandSupported","addQueryValueHandler","hasCustomCommand","execNativeCommand","isFormatMatch","storeSelection","restoreSelection","queryCommandEnabled","listParent","editingHost","alignStates","inline_styles","paddingLeft","Undo","undo","Redo","redo","Dispatcher","beforeFire","bindingName","hi","customEventRootDelegates","toggleNativeEvent","Observable","firePreProcess","firePostProcess","fireRemove","fireDetach","fireSwitchMode","setEditorCommandState","toggleReadOnly","hideResizeRect","getMode","getEventTarget","eventName","event_root","eventRoot","isListening","fireEvent","bindEventDelegate","eventRootElm","delegates","editorManager","editors","EditorObservable","bindPendingEventDelegates","_pendingNativeEvents","unbindAllNativeEvents","EditorObservable$1","sectionResult","mobilePlugins","defaultMobileSettings","normalizePlugins","pluginNames","trimmedPlugins","filterMobilePlugins","extractSections","getSection","sections","sectionSettings","hasSection","getDefaultSettings","documentBaseUrl","delta_width","delta_height","popup_css","document_base_url","add_form_submit_trigger","submit_patch","add_unload_trigger","convert_urls","relative_urls","remove_script_host","object_resizing","visual","font_size_style_values","font_size_legacy_values","hidden_input","render_ui","convert_fonts_to_spans","ie7_compat","getExternalPlugins","overrideSettings","userDefinedExternalPlugins","external_plugins","combinePlugins","forcedPlugins","processPlugins","isTouchDevice","defaultOverrideSettings","forced_plugins","platformPlugins","combinedPlugins","isOnMobile","combineSettings","defaultSettings","extendedSettings","getEditorSettings","getFiltered","getParamObject","isArrayOf","each$b","explode$2","keyCodeLookup","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","modifierNames","Shortcuts","pendingPatterns","parseShortcut","createShortcut","desc","cmdFunc","subpatterns","hasModifier","isFunctionKey","matchShortcut","executeShortcutAction","_doc","getContentEditableHost","getCollapsedNode","getFocusInElement","normalizeSelection","focusBody","setActive","hasElementFocus","hasIframeFocus","iframeElement","hasInlineFocus","rawBody","hasFocus$1","focusEditor","refreshContentEditable","contentEditableHost","activateEditor","bookmarkRng","skipFocus","EditorFocus","rawElm","getComputedSizeProp","getClientWidth","getClientHeight","getMarginTop","getMarginLeft","getBoundingClientRect$1","isInsideElementContentArea","isXYInContentArea","transposedPoint","fromDomSafe","isEditorAttachedToDom","rawContainer","EditorView","unimplemented","NotificationManager","getImplementation","getTopNotification","addNotification","closeNotification","otherNotification","getNotifications","serviceMessage","service_message","WindowManager","funcBind","fireOpenEvent","fireCloseEvent","addWindow","closeWindow","otherWindow","getTopWindow","getWindows","I18n","setCode","newCode","_dir","getCode","langData","getLangData","values_1","$1","$2","resolvePluginName","targetUrl","matchUrl","pluginUrlToMessage","displayError","uploadError","pluginLoadError","pluginInitError","initError","ErrorReporter","PluginManager$1","uploadStatus","pendingPromises","noUpload","handlerSuccess","handlerFailure","resolvePending","uploadBlobInfo","openNotification","markPending","closeNotification_1","markUploaded","removeFailed","percent","pendingUploadBlobInfo","uploadBlobs","blobInfos","isUploaded","isPending","Uint8Array","requestAnimationFrame$1","atob","blobUriToBlob","rejectWithError","responseType","parseDataUri","uriParts","decodeURIComponent","dataUriToBlob","Blob","uriToBlob","onloadend","Conversions","imageToBlobInfo","getByUri","dataUri","getAllImages","ImageScanner","cachedPromises","promises","imageInfo","newPromise","count$1","rnd","now","uuid","Uuid","BlobCache","mimeToExt","mime","mimes","toBlobInfo","removeByUri","UploadStatus","PENDING","UPLOADED","blobUriStatuses","createStatus","resultUri","hasBlobUri","getResultUri","EditorUpload","imageScanner","urlFilters","aliveGuard","cacheInvalidator","replaceString","replaceImageUrl","replacementUrl","replaceUrlInUndoStack","fragments","replaceImageUri","uploadImages","scanForImages","imageInfos","filteredResult","uploadInfo","dataImgFilter","addFilter","resultItem","replaceBlobUris","source_view","isBlockElement","isValidTarget","hasBlockParent","shouldRemoveTextNode","addRootBlocks","rootBlockNode","tempNode","rootNodeName","forcedRootBlock","setup$3","ForceBlocks","getStartNode","getEndNode","getFirstChildren","getLastChildren$1","hasAllContentsSelected","moveEndPoint$1","hasAnyRanges","NodeChange","lastPath","isSameElementPath","currentPath","nativeRng","fakeRng","selectionChange","disable_nodechange","VDirection","getAbsolutePosition","getBodyPosition","getScrollPosition","getBodyScroll","inlineScroll","iframeScroll","getMousePosition","iframePosition","scrollPosition","calculatePosition","bodyPosition","mousePosition","calc","MousePosition","isContentEditableFalse$7","isContentEditableTrue$3","isDraggable","isValidDropTarget","targetElement","dragElement","cloneElement","cloneElm","createGhost","clonedElm","ghostElm","appendGhostToBody","moveGhost","removeElement","isLeftMouseButtonPressed","hasDraggableElement","applyRelPos","relX","start$1","ceElm","elmPos","relY","ghost","move$1","throttledPlaceCaretAt","placeCaretAt","dragging","targetPos","getRawTarget","targetClone_1","targetClone","removeDragState","bindFakeDragEvents","pageDom","dragStartHandler","dragHandler","dropHandler","dragEndHandler","rootDocument","blockIeDrop","realTarget","DragDropOverrides","getNodeClientRects","toArrayWithNode","findUntil","walkUntil","isAboveFn","isBeflowFn","targetClientRect","line","aboveLineNumber","lineNumber","isLineNumber","upUntil","Up","downUntil","Down","positionsUntil","isBelowFn","getClientRect","isAboveLine","isLine","isContentEditableFalse$8","findNode$1","distanceToRectLeft","distanceToRectRight","isInside","findClosestClientRect","oldClientRect","oldDistance","newDistance","walkUntil$1","findLineNodeRects","targetNodeRect","checkPosFn","lineRects","getFakeCaretTargets","caretInfo","closestCaret","closestNodeRect","contentEditableFalseNodeRects","targetNodeRects","isXYWithinRange","RangePoint","setup$4","renderFocusCaret","CefFocus","VK","ENTER","LEFT","RIGHT","SPACEBAR","HOME","modifierPressed","isContentEditableTrue$4","isContentEditableFalse$9","getContentEditableRoot$1","SelectionOverrides","selectedContentEditableNode","fakeCaret","realSelectionId","isFakeSelectionElement","getRealSelectionElement","setRange","getRange","blockCaretContainer","contentEditableRoot","removeContentEditableSelection","handleTouchSelect","setContentEditableSelection","hasNormalCaretPosition","hasBetterMouseTarget","targetBlock","caretBlock","isRangeInCaretContainer","realSelectionElement","outerText","addCss","contentStyles","rootClass","isWithinCaretContainer","$realSelectionContainer","origTargetClone","isValidPrefixAttrName","trimComments","isInvalidUri","findEndTagIndex","tokenRegExp","checkBogusAttribute","attrString","SaxParser","fix_self_closing","endRegExp","attrList","textData","isInternalElement","removeInternalElements","fillAttrsMap","isShortEnded","isValidElement","attribsValue","validAttributesMap","validAttributePatterns","processHtml","anyAttributesRequired","selfClosing","attrRegExp","fixSelfClosing","stack","filteredUrlAttrs","scriptUriRegExp","processEndTag","valid","parseAttribute","val3","attrRule","trimRegExp","unescape","self_closing_elements","remove_internals","bogusValue","allow_conditional_comments","findEndTag","SaxParser$1","tempAttrs","trimContentRegExp","trimInternal","endTagIndex","matchLength","bogusAllRegExp","getTempAttrs","trimExternal","TrimHtml","KEEP","INSERT","vDown","vUp","snake","diag","buildScript","start1","end1","start2","end2","getMiddleSnake","i2","buildSnake","sum","Diff","getOuterHtml","createFragment$1","insertAt","removeAt","applyDiff","read$3","currentFragments","Fragments","undoLevelDocument","lazyTempDocument","implementation","createHTMLDocument","hasIframes","createFragmentedLevel","beforeBookmark","createCompleteLevel","createFromEditor","trimmedFragments","trimmed","applyToEditor","getLevelContent","getCleanLevelContent","hasEqualContent","level1","level2","hasEqualCleanedContent","isEq$4","Levels","UndoManager","isFirstTypedCharacter","locks","isUnlocked","setTyping","typing","setDirty","addNonTypingUndoLevel","endTyping","beforeChange","isDirty","modKey","isInsertReplacementText","inputType","isInsertTextDataNull","currentLevel","custom_undo_redo_levels","hasUndo","hasRedo","callback1","callback2","postProcessHooks","filter$2","each$c","addPostProcessHook","isPre","hasPreSibling","pre","joinPre","pre1","pre2","Hooks","MCE_ATTR_RE","each$d","isEq$5","isTableCell$4","isChildOfInlineParent","lastIdx","wrap$2","wrapWithSiblings","matchName$1","isColorFormatAndAnchor","links","find$3","removeNode$1","rootBlockElm","list_block","compareNode","stylesModified","remove_similar","valueOut","findFormatRoot","formatRoot","wrapAndSplit","lastClone","firstClone","formatRootParent","mixed","splitToFormatRoot","isRemoveBookmarkNode","lastContentEditable","removeRngStyle","textDecoration","ceFalseOverride","RemoveFormat","each$e","isElementNode","findElementSibling","mergeSiblingsNodes","tmpSibling","elementUtils","processChildElements","hasStyle","applyStyle","unwrapEmptySpan","processUnderlineAndColor","mergeUnderlineAndColor","mergeBackgroundColorAndFontSize","mergeSubSup","mergeSiblings","merge_siblings","clearChildStyles","clear_child_styles","mergeWithChildren","mergeWithParents","merge_with_parents","MergeFormats","each$f","isElementNode$1","setElementFormat","onformat","styleVal","applyNodeStyle","applyRngStyle","nodeSpecific","wrapElm","currentWrapElm","childCount","getChildCount","getChildElementNode","mergeStyles","curSelNode","ApplyFormat","each$g","setup$5","formatChangeData","currentFormats","matchedFormats","addListeners","formatChangeItems","formatChangeState","FormatChanged","valigntop","verticalAlign","valignmiddle","valignbottom","textAlign","fontWeight","fontStyle","forecolor","hilitecolor","fontname","fontsize","fontsize_class","DefaultFormats","FormatRegistry","unregister","each$h","parsedSelectorToHtml","ancestry","sItem","getRequiredParent","elmRule","wrapInHtml","parentCandidate","parentRequired","ancestorName","siblingElm","selectorToHtml","parseSelector","parseSelectorItem","$0","$3","$4","previewFrag","previewElm","parentFontSize","previewStyles","previewCss","preview_styles","removeVars","numValue","Preview","ToggleFormat","setup$6","FormatShortcuts","Formatter","hasOwnProperty$2","htmlParser","internalName","cleanup","hasChildren","trimTrailingBr","brNode1","brNode2","DomSerializerFilters","impl","oldDoc","shouldFireEvent","no_events","DomSerializerPreProcess","removeAttrs","addFontToSpansFilter","face","addStrikeToSpanFilter","addFilters","LegacyFilter","whiteSpaceRegExp$3","typeLookup","walk$2","Node$1","selfAttrs","selfAttr","cloneAttrs","refNode","paddEmptyNode","brPreferred","padd_empty_with_br","isPaddedWithNbsp","hasOnlyChild","isPadded","isEmpty$2","whitespaceElements","isLineBreakNode","remove_trailing_brs","prevName","whiteSpaceElements","appendRel","addNoOpener","allow_html_in_named_anchor","fix_list_elements","classValue","validClassesMap","makeMap$4","each$i","explode$3","extend$3","DomParser","nodeFilters","attributeFilters","matchedNodes","matchedAttributes","root_name","fixInvalidChildren","newParent","childNode","nonSplitableElements","textBlockElements","filterNode","getNodeFilters","getAttributeFilters","isInWhiteSpacePreservedElement","invalidChildren","rootBlockName","startWhiteSpaceRegExp","endWhiteSpaceRegExp","allWhiteSpaceRegExp","isAllWhiteSpaceRegExp","createNode","removeWhitespaceBefore","textNodeNext","textVal","cloneAndExcludeBlocks","attrFiltersLen","isRootContent","postProcess$1","outArgs","getHtmlFromNode","getInner","parseHtml","serializeNode","htmlSerializer","toHtml","DomSerializer","addRules","setRules","DomSerializer$1","domSerializer","BookmarkManager","BreakType","BookmarkManager$1","isContentEditableFalse$a","isContentEditableTrue$5","getContentEditableRoot$2","ControlSelection","selectedElmGhost","resizeHelper","resizeHandles","selectedHandle","selectedElmX","selectedElmY","startH","resizeStarted","startScrollWidth","startScrollHeight","editableDoc","nw","ne","se","sw","isImage","isEventOnImageOutsideRange","contextMenuSelectImage","getResizeTarget","resizeGhostElement","proportional","resizeHelperX","resizeHelperY","resize_img_proportional","endGhostResize","setSizeProp","showResizeRect","targetWidth","targetHeight","unbindResizeHandleEvents","unSelectabe","updateResizeRect","controlElm","isChildOrEqual","disableGeckoResize","isWithinContentEditableFalse","delayedSelect","throttledUpdateResizeRect","getPos$1","fireScrollIntoViewEvent","alignToTop","scrollEvent","scrollElementIntoView","viewPort","viewPortY","viewPortH","offsetY","scrollTo","scrollRangeIntoView","rngRect","bodyRect","ScrollIntoView","hasCeProperty","findParent$1","findClosestIeRange","createTextRange","moveToElementText","moveToPoint","moveOutOfContentEditableFalse","pointDoc","CaretRangeFromPoint","processRanges","EventProcessRanges","tableModel","cellPosition","fillout","y2","x2","cellExists","skipCellsX","findElementPos","extractRows","sx","sy","ey","subTable","createDomTable","tableElement","modelRowsToDomRows","fromDom$1","toDom","subsection","endElement","SimpleTableModel","findParentListContainer","getFullySelectedListWrappers","listCont","wrap$3","innerElm","directListWrappers","commonAnchorContainer","getWrapElements","wrapElements","listWrappers","allWrappers","emptyFragment","getFragmentFromRange","getParentTable","getTableFragment","selectedTableCells","fullTableModel","sectionedTableModel","getSelectionFragment","read$4","FragmentReader","bin","getHtmlContent","tmpElm","GetSelectionContent","createContextualFragment","pasteHTML","SetSelectionContent","getEndpointElement","real","getStart$2","skipEmptyTextNodes","forwards","orig","getNode$1","endElm","select$1","each$j","isNativeIeSelection","isAttachedToDom","isValidRange","Selection$1","bookmarkManager","selectedRange","explicitRange","selectorChangedData","getEnd$1","compareEndPoints","tryCompareBoundaryPoints","how","sourceRange","destinationRange","compareBoundaryPoints","START_TO_START","END_TO_END","ieRange","setNode","getSelectedBlocks$1","anchorRange","focusRange","currentSelectors","matchedSelectors","flip","walk$3","getBreakType","currentPos","Br","Block","Wrap","getPositionsUntil","breakType","breakAt","Eol","getAdjacentLinePositions","getPositionsUntilBreak","findClosestHorizontalPositionFromPoint","lastDist","newDist","findClosestHorizontalPosition","getPositionsUntilPreviousLine","getPositionsUntilNextLine","isAtFirstLine","isAtLastLine","getPositionsAbove","getPositionsBelow","getFirstLinePositions","getLastLinePositions","isContentEditableFalse$b","getSelectedNode$1","moveToCeFalseHorizontally","rangeIsInContainerBlock","moveToCeFalseVertically","walkerFn","linePositions","nextLinePositions","closestNextLineRect","caretClientRect","dist1","dist2","contentEditableFalseNode","caretPositions","exitPreBlock","getHorizontalRange","newRange","getVerticalRange","moveH","moveV","isCefPosition","moveToLineEndPoint","deflate","getCorners","getYAxisValue","tds","findClosestCorner","corners","newCorner","oldCorner","oldDist","getClosestCell$1","isTargetCorner","corner","getBottomValue","getTopValue","isAbove$1","isBelow$1","getClosestCellAbove","getClosestCellBelow","findClosestPositionInAboveCell","findClosestPositionInBelowCell","moveToRange","hasNextBreak","lineInfo","breakPos","startsWithWrapBreak","startsWithBrBreak","isAtTableCellLine","isAtFirstTableCellLine","isAtLastTableCellLine","isCaretAtStartOrEndOfTable","navigateHorizontally","getClosestAbovePosition","getClosestBelowPosition","getTable","renderBlock","navigateVertically","moveH$1","moveV$1","rangeBefore","insertElement","insertBr","insertBlock$1","insertEmptyLine","getClosestTargetBlock","isAtFirstOrLastLine","moveCaretToNewEmptyLine","rootBlock","rootBlockAttrs","moveV$2","defaultPatterns","matchesEvent","match$1","MatchKeys","executeKeydownOverride","setup$7","ArrowKeys","executeKeydownOverride$1","executeKeyupOverride","setup$8","DeleteBackspaceKeys","firstNonWhiteSpaceNodeSibling","moveToCaretPosition","tempElm","getEditableRoot","editableRoot","getParentBlock$2","getParentBlockName","isListItemParentBlock","NewLineUtils","hasFirstChild","hasParent$1","isListBlock","isNestedList","getContainerBlock","containerBlockParent","isFirstOrLastLi","createNewBlock","newBlockName","InsertLi","trimZwsp","isEmptyAnchor","isTableCell$5","emptyBlock","containerAndSiblingName","canSplitBlock","trimInlineElementsOnLeftSideOfBlock","firstChilds","normalizeZwspOffset","includeZwspInRange","trimLeadingLineBreaks","getEditableRoot$1","setForcedBlockAttrs","forcedRootBlockName","wrapSelfAndSiblingsInDefaultBlock","addBrToBlockIfNeeded","insert$2","parentBlockName","clonedNode","isCaretAtStartOrEndOfBlock","normalizedOffset","insertNewBlockAfter","InsertBlock","shouldInsertBr","shouldBlockNewLine","ContextSelectors","newLineAction","shouldBlockNewLine$1","isBrMode","requiredState","brMode","inListBlock","inPreBlock","inSummaryBlock","shouldPutBrInPre$1","inBrContext","canInsertIntoEditableRoot","rootEditable","match$2","predicates","isMatch","getAction$1","NewLineAction","insert$3","InsertNewLine","endTypingLevel","handleEnterKeyEvent","setup$9","EnterKey","insertTextAtPosition","insertNbspAtPosition","insertSpaceAtPosition","navigateIgnoreEmptyTextNodes","getClosestBlock","isAtBeforeAfterBlockBoundary","isAtBlockBoundary","isAtStartOfBlock","isAtEndOfBlock","isBeforeBlock","isAfterBlock","isInMiddleOfText","getClosestBlock$1","hasSpaceBefore","hasSpaceAfter","isPreValue","isInPre","isAtBeginningOfBody","isAtEndOfBody","isAtLineBoundary","needsToHaveNbsp","needsToBeNbspLeft","needsToBeNbspRight","afterPos","needsToBeNbsp","isNbspAt","hasNbsp","normalizeNbspMiddle","chars","normalizeNbspAtStart","normalizeNbspInMiddleOfTextNode","newText","normalizeNbspAtEnd","normalizeNbsps","normalizeNbspsInEditor","locationToCaretPosition","insertInlineBoundarySpaceOrNbsp","checkPos","setSelection$1","insertSpaceOrNbspAtSelection","executeKeydownOverride$2","setup$a","SpaceKey","findBlockCaretContainer","removeIeControlRect","handleBlockContainer","setup$b","CaretContainerInput","browser$4","setupIeInput","keypressThrotter","setup$c","isComposing","executeKeydownOverride$3","setup$d","HomeEndKeys","setup$e","KeyboardOverrides","isGecko","isWebKit","mceInternalDataType","setMceInternalContent","selectionHtml","internalContent","escape","getMceInternalContent","insertClipboardContents","emptyEditorWhenDeleting","serializeRng","allContentsSelected","allRng","allSelection","selectAll","inputMethodFocus","removeHrOnBackspace","selectControlElements","removeStylesWhenDeletingAcrossBlockElements","getAttributeApplyFunction","template","setAttributeNode","isSelectionAcrossElements","applyAttributes","disableBackspaceIntoATable","removeBlockQuoteOnBackSpace","setGeckoEditingOptions","setOpts","addBrAfterLastLinks","fixLinks","setDefaultBlockType","showBrokenImageIcon","restoreFocusOnKeyDown","bodyHeight","blockCmdArrowNavigation","disableAutoUrlDetect","tapLinksAndImages","blockFormSubmitInsideEditor","removeAppleInterchangeBrs","ieInternalDragAndDrop","isTextBlockNode","normalizeSelection$1","setup$f","preventSummaryToggle","filterDetails","setup$g","appendStyle","createParser","autoFocus","auto_focus","destroyed","initEditor","execCallback","getStyleSheetLoader","initContentBody","skipWrite","contentCssText","orgVisibility","iframeHTML","content_document","content_window","bodyElement","hex_colors","force_hex_style_colors","class_filter","annotator","_nodeChangeDispatcher","browser_spellcheck","gecko_spellcheck","nowrap","protect","startContent","content_style","InitContentBody","relaxDomain","domain","hostname","bodyUuid","domainRelaxUrl","normalizeHeight","normalizedHeight","createIframeElement","customAttrs","frameBorder","allowTransparency","getIframeHtml","createIframe","isDomainRelaxed","contentAreaContainer","init$1","boxInfo","orgDisplay","InitIframe","DOM$4","initPlugin","initializedPlugins","pluginInstance","trimLegacyPrefix","initPlugins","initTheme","renderFromLoadedTheme","min_height","iframeHeight","renderFromThemeFunc","createThemeFalseResult","renderThemeFalseIframe","renderThemeFalse","renderThemeUi","init$2","rtl_ui","i18n","aria_label","getLang","content_css","Init","DOM$5","hasSkipLoadPrefix","loadLanguage","scriptLoader","language_url","loadTheme","themeUrl","theme_url","loadPlugins","form","formElement","hasHiddenInput","formEventDelegate","_mceOldSubmit","triggerSave","encoding","save","_beforeUnload","set_dirty","add$4","each$k","trim$4","queryParts","DEFAULT_PORTS","ftp","http","https","mailto","URI","baseUri","base_uri","isProtocolRelative","protocol","toAbsPath","part","userInfo","port","setPath","toRelative","tu","uu","toRelPath","noHost","isSameOrigin","defaultPort","breakPoint","outPath","nb","noProtoHost","loc","pathname","defaultFormat","trimEmptyContents","emptyRegExp","getContentFromBody","getContent$1","findMatchingNodes","nodeMatches","attrMatches","filter$3","defaultFormat$1","isTreeNode","setEditorHtml","setContentString","padd","setContentTree","setContent$1","DOM$6","restoreOriginalStyles","safeDestroy","clearDomReferences","restoreForm","is_removing","automatic","DOM$7","extend$4","each$l","resolve$4","ie$2","Editor","documentBaseURL","baseURI","language_load","loadedCSS","editorCommands","cache_suffix","override_viewport","callbackLookup","lang_1","i18n_1","addSidebar","focusedEditor","setProgressState","isNotDirty","oldState","urlconverter_callback","visual_table_class","visual_anchor_class","_scanForImages","documentFocusInHandler","beforeUnloadDelegate","EditorManager","isEditorUIElement","FocusManager","isManualNodeChange","registerPageMouseUp","throttledStore","mouseUpPage","registerFocusOut","registerMouseUp","registerEditorEvents","SelectionRestore","DOM$8","isEditorUIElement$1","isUIElement","customSelector","custom_ui_selector","getActiveElement","blurredEditor","unregisterDocumentEvents","setup$h","FocusController","DOM$9","explode$4","each$m","extend$5","instanceCounter","boundGlobalEvents","legacyEditors","isValidLegacyKey","globalEventDelegate","toggleGlobalEvents","removeEditorFromList","targetEditor","oldEditors","purgeDestroyedEditor","majorVersion","minorVersion","releaseDate","preInit","tinyMCEPreInit","srcScript","currentScript","base_url","pluginBaseUrls","plugin_base_urls","invalidInlineTargets","isInvalidInlineTarget","createId","findTargets","forms","editor_deselector","editor_selector","provideResults","initEditors","initCount","createEditor","existingEditor","EditorManager$1","RangeUtils","normalizedRng","compareRanges","extendClass","initializing","RangeUtils$1","round$2","constrainRect","cropRect","x1","y1","clamp$1","clampRect","fixedSize","underflowX1","underflowY1","overflowX2","overflowY2","cx2","cy2","fromClientRect","typeClass","lctype","controlType","ControlType","each$n","extend$6","Class","member","mixins","mixin","dummy","createMethod","name_1","Methods","fieldName","min$1","max$1","round$3","Color","rgb2hsv","minRGB","maxRGB","hsvToRgb","saturation","brightness","side","chroma","quote","JSON$1","JSONP","XHR","ready","success_scope","error_scope","overrideMimeType","content_type","crossDomain","setRequestHeader","requestheaders","extend$7","JSONRequest","sendRPC","ecb","scb","method","localStorage","create$5","storage","getItem","setItem","removeItem","defineProperty","configurable","enumerable","LocalStorage","publicApi","geom","EventDispatcher","Serializer","isMac","Tinymce","exportToModuleLoaders","exportToWindowGlobal","tinyMCE","onFocus","onBlur","onKeydown","placeholder_text","placeholder_attrs","placeholder_tag","Content","fullscreenState","isFullscreen","fireFullscreenStateChanged","getScrollPos","vp","setScrollPos","toggleFullscreen","editorContainerStyle","iframeStyle","fullscreenInfo","removeResize","iframeWidth","containerWidth","containerHeight","scrollPos","removeHandler","newFullScreenInfo"],"mappings":"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BAEF,CACE,OACA,4BAEF,CACE,OACA,WAEF,CACE,OACA,WAEF,CACE,MACA,UAEF,CACE,OACA,YAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,6BAEF,CACE,MACA,wBAEF,CACE,MACA,qBAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,OACA,cAEF,CACE,MACA,mBAEF,CACE,MACA,iBAEF,CACE,OACA,kBAEF,CACE,MACA,uBAEF,CACE,MACA,mBAEF,CACE,MACA,mBAEF,CACE,MACA,qBAEF,CACE,MACA,wBAEF,CACE,MACA,qBAEF,CACE,MACA,2BAEF,CACE,MACA,qBAEF,CACE,OACA,YAEF,CACE,OACA,kBAEF,CACE,OACA,YAEF,CACE,OACA,eAEF,CACE,OACA,cAEF,CACE,OACA,0BAEF,CACE,OACA,mBAEF,CACE,OACA,gBAEF,CACE,OACA,gBAEF,CACE,OACA,cAEF,CACE,OACA,qBAEF,CACE,OACA,sBAEF,CACE,OACA,iBAEF,CACE,OACA,eAEF,CACE,OACA,cAEF,CACE,MACA,YAEF,CACE,OACA,gBAEF,CACE,OACA,SAEF,CACE,OACA,wBAEF,CACE,OACA,WAEF,CACE,OACA,gBAEF,CACE,OACA,YAEF,CACE,OACA,uBAEF,CACE,OACA,qBAEF,CACE,OACA,mBAEF,CACE,OACA,SAEF,CACE,MACA,gBAEF,CACE,MACA,WAEF,CACE,MACA,8BAEF,CACE,MACA,+BAEF,CACE,OACA,UAEF,CACE,OACA,iBAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,kBAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,OAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,aAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,SAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,kBAEF,CACE,MACA,cAEF,CACE,MACA,eAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,OAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,aAEF,CACE,MACA,iBAEF,CACE,MACA,WAEF,CACE,MACA,YAEF,CACE,MACA,eAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,aAEF,CACE,MACA,kBAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,aAEF,CACE,MACA,SAEF,CACE,MACA,iBAEF,CACE,MACA,cAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,WAEF,CACE,MACA,QAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,UAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,WAEF,CACE,MACA,MAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,OAEF,CACE,MACA,WAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,SAEF,CACE,MACA,WAEF,CACE,MACA,QAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,MACA,QAEF,CACE,MACA,SAEF,CACE,MACA,UAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,MAEF,CACE,MACA,WAEF,CACE,MACA,MAEF,CACE,MACA,OAEF,CACE,MACA,eAEF,CACE,MACA,SAEF,CACE,MACA,OAEF,CACE,MACA,WAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,OAEF,CACE,MACA,SAEF,CACE,OACA,eAEF,CACE,MACA,aAEF,CACE,OACA,oBAEF,CACE,MACA,yBAEF,CACE,OACA,iBAEF,CACE,OACA,kBAEF,CACE,OACA,mBAEF,CACE,OACA,iBAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,0BAEF,CACE,OACA,wBAEF,CACE,OACA,2BAEF,CACE,OACA,0BAEF,CACE,OACA,2BAEF,CACE,OACA,aAEF,CACE,OACA,aAEF,CACE,OACA,eAEF,CACE,OACA,mBAEF,CACE,OACA,yBAEF,CACE,OACA,2BAEF,CACE,OACA,gBAEF,CACE,OACA,iBAEF,CACE,OACA,iBAEF,CACE,OACA,gBAEF,CACE,OACA,gBAEF,CACE,OACA,iBAEF,CACE,OACA,cAEF,CACE,OACA,eAEF,CACE,OACA,+BAEF,CACE,OACA,gCAEF,CACE,OACA,WAEF,CACE,OACA,oBAEF,CACE,OACA,mBAEF,CACE,OACA,oBAEF,CACE,OACA,sBAEF,CACE,OACA,YAEF,CACE,OACA,YAEF,CACE,OACA,cAEF,CACE,OACA,yBAEF,CACE,OACA,qBAEF,CACE,OACA,sBAEF,CACE,OACA,wBAIFC,EAAgB,SAAUL,GAC5B,OAAOpI,EAAS0I,KAAKN,GAAS,SAAUO,GACtC,OAAOJ,EAAQI,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rF,GAAS,CACX,UACA,QACA,UACA,MACA,KACA,aACA,SACA,OACA,WACA,SACA,SACA,OACA,OACA,MACA,UACA,UACA,OACA,IACA,KACA,WACA,KACA,SACA,UACA,SACA,aACA,KACA,KACA,KACA,KACA,KACA,KACA,UACA,MACA,MACA,YACA,OACA,MACA,KACA,KACA,KACA,KACA,QACA,QACA,QACA,QACA,KACA,KACA,KACA,WAEEwrF,GAAQ,CACV,OACA,OACA,WACA,KACA,MACA,QACA,KACA,MACA,QACA,UACA,OACA,OACA,QACA,QACA,SACA,MACA,SAEEC,GAAa,CACf,KACA,MAEEC,GAAgB,CAClB,QACA,QACA,SAEE9+H,GAAa,CACf,KACA,KACA,KACA,KACA,KACA,KACA,IACA,MACA,UACA,MACA,OACA,aACA,SACA,MACA,WACA,SACA,SACA,UACA,UACA,SACA,QACA,MACA,UAEE++H,GAAW,CACb,KACA,KACA,KACA,KACA,KACA,MAEEC,GAAY,CACd,KACA,KACA,MAEE5yI,GAAQ,CACV,KACA,KACA,MAEE6yI,GAAa,CACf,MACA,SACA,WACA,SAEEC,GAAa,SAAUp/I,GACzB,IAAIsrC,EACJ,OAAO,SAAU5vC,GAEf,OADA4vC,EAASA,GAAkBi7F,GAAYvmI,EAAOwE,GAAS,IAChD8mC,EAAO1wB,eAAetgB,GAAKoB,MAGlC6sG,GAAY62C,GAAWH,IACvBv9I,GAAU09I,GAAW9rF,IACrBp9B,GAAW,SAAUx6B,GACvB,OAAOyb,GAAUzb,KAAUgG,GAAQhG,IAEjCyF,GAAO,SAAUzF,GACnB,OAAOyb,GAAUzb,IAAwB,OAAfpB,GAAKoB,IAE7B6F,GAAc69I,GAAWl/H,IACzBzT,GAAS2yI,GAAW9yI,IACpBg9F,GAAa81C,GAAWF,IACxBG,GAASD,GAAWN,IACpBQ,GAAiBF,GAAWJ,IAC5BO,GAAcH,GAAWL,IACzBS,GAAsBJ,GAAWD,IAEjCM,GAAa,SAAUpmJ,GACzB,OAAO,SAAUqC,GACf,QAASA,GAAQA,EAAKmF,WAAaxH,IAGnCqmJ,GAAmB,SAAUhkJ,GAC/B,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","file":"static/js/chunk-a0f05984.js","sourcesContent":["(function () {\nvar textcolor = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getCurrentColor = function (editor, format) {\n      var color;\n      editor.dom.getParents(editor.selection.getStart(), function (elm) {\n        var value;\n        if (value = elm.style[format === 'forecolor' ? 'color' : 'background-color']) {\n          color = color ? color : value;\n        }\n      });\n      return color;\n    };\n    var mapColors = function (colorMap) {\n      var i;\n      var colors = [];\n      for (i = 0; i < colorMap.length; i += 2) {\n        colors.push({\n          text: colorMap[i + 1],\n          color: '#' + colorMap[i]\n        });\n      }\n      return colors;\n    };\n    var applyFormat = function (editor, format, value) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.apply(format, { value: value });\n        editor.nodeChanged();\n      });\n    };\n    var removeFormat = function (editor, format) {\n      editor.undoManager.transact(function () {\n        editor.focus();\n        editor.formatter.remove(format, { value: null }, null, true);\n        editor.nodeChanged();\n      });\n    };\n    var TextColor = {\n      getCurrentColor: getCurrentColor,\n      mapColors: mapColors,\n      applyFormat: applyFormat,\n      removeFormat: removeFormat\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceApplyTextcolor', function (format, value) {\n        TextColor.applyFormat(editor, format, value);\n      });\n      editor.addCommand('mceRemoveTextcolor', function (format) {\n        TextColor.removeFormat(editor, format);\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var defaultColorMap = [\n      '000000',\n      'Black',\n      '993300',\n      'Burnt orange',\n      '333300',\n      'Dark olive',\n      '003300',\n      'Dark green',\n      '003366',\n      'Dark azure',\n      '000080',\n      'Navy Blue',\n      '333399',\n      'Indigo',\n      '333333',\n      'Very dark gray',\n      '800000',\n      'Maroon',\n      'FF6600',\n      'Orange',\n      '808000',\n      'Olive',\n      '008000',\n      'Green',\n      '008080',\n      'Teal',\n      '0000FF',\n      'Blue',\n      '666699',\n      'Grayish blue',\n      '808080',\n      'Gray',\n      'FF0000',\n      'Red',\n      'FF9900',\n      'Amber',\n      '99CC00',\n      'Yellow green',\n      '339966',\n      'Sea green',\n      '33CCCC',\n      'Turquoise',\n      '3366FF',\n      'Royal blue',\n      '800080',\n      'Purple',\n      '999999',\n      'Medium gray',\n      'FF00FF',\n      'Magenta',\n      'FFCC00',\n      'Gold',\n      'FFFF00',\n      'Yellow',\n      '00FF00',\n      'Lime',\n      '00FFFF',\n      'Aqua',\n      '00CCFF',\n      'Sky blue',\n      '993366',\n      'Red violet',\n      'FFFFFF',\n      'White',\n      'FF99CC',\n      'Pink',\n      'FFCC99',\n      'Peach',\n      'FFFF99',\n      'Light yellow',\n      'CCFFCC',\n      'Pale green',\n      'CCFFFF',\n      'Pale cyan',\n      '99CCFF',\n      'Light sky blue',\n      'CC99FF',\n      'Plum'\n    ];\n    var getTextColorMap = function (editor) {\n      return editor.getParam('textcolor_map', defaultColorMap);\n    };\n    var getForeColorMap = function (editor) {\n      return editor.getParam('forecolor_map', getTextColorMap(editor));\n    };\n    var getBackColorMap = function (editor) {\n      return editor.getParam('backcolor_map', getTextColorMap(editor));\n    };\n    var getTextColorRows = function (editor) {\n      return editor.getParam('textcolor_rows', 5);\n    };\n    var getTextColorCols = function (editor) {\n      return editor.getParam('textcolor_cols', 8);\n    };\n    var getForeColorRows = function (editor) {\n      return editor.getParam('forecolor_rows', getTextColorRows(editor));\n    };\n    var getBackColorRows = function (editor) {\n      return editor.getParam('backcolor_rows', getTextColorRows(editor));\n    };\n    var getForeColorCols = function (editor) {\n      return editor.getParam('forecolor_cols', getTextColorCols(editor));\n    };\n    var getBackColorCols = function (editor) {\n      return editor.getParam('backcolor_cols', getTextColorCols(editor));\n    };\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback', null);\n    };\n    var hasColorPicker = function (editor) {\n      return typeof getColorPickerCallback(editor) === 'function';\n    };\n    var Settings = {\n      getForeColorMap: getForeColorMap,\n      getBackColorMap: getBackColorMap,\n      getForeColorRows: getForeColorRows,\n      getBackColorRows: getBackColorRows,\n      getForeColorCols: getForeColorCols,\n      getBackColorCols: getBackColorCols,\n      getColorPickerCallback: getColorPickerCallback,\n      hasColorPicker: hasColorPicker\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var getHtml = function (cols, rows, colorMap, hasColorPicker) {\n      var colors, color, html, last, x, y, i, count = 0;\n      var id = global$1.DOM.uniqueId('mcearia');\n      var getColorCellHtml = function (color, title) {\n        var isNoColor = color === 'transparent';\n        return '<td class=\"mce-grid-cell' + (isNoColor ? ' mce-colorbtn-trans' : '') + '\">' + '<div id=\"' + id + '-' + count++ + '\"' + ' data-mce-color=\"' + (color ? color : '') + '\"' + ' role=\"option\"' + ' tabIndex=\"-1\"' + ' style=\"' + (color ? 'background-color: ' + color : '') + '\"' + ' title=\"' + global$3.translate(title) + '\">' + (isNoColor ? '&#215;' : '') + '</div>' + '</td>';\n      };\n      colors = TextColor.mapColors(colorMap);\n      colors.push({\n        text: global$3.translate('No color'),\n        color: 'transparent'\n      });\n      html = '<table class=\"mce-grid mce-grid-border mce-colorbutton-grid\" role=\"list\" cellspacing=\"0\"><tbody>';\n      last = colors.length - 1;\n      for (y = 0; y < rows; y++) {\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          i = y * cols + x;\n          if (i > last) {\n            html += '<td></td>';\n          } else {\n            color = colors[i];\n            html += getColorCellHtml(color.color, color.text);\n          }\n        }\n        html += '</tr>';\n      }\n      if (hasColorPicker) {\n        html += '<tr>' + '<td colspan=\"' + cols + '\" class=\"mce-custom-color-btn\">' + '<div id=\"' + id + '-c\" class=\"mce-widget mce-btn mce-btn-small mce-btn-flat\" ' + 'role=\"button\" tabindex=\"-1\" aria-labelledby=\"' + id + '-c\" style=\"width: 100%\">' + '<button type=\"button\" role=\"presentation\" tabindex=\"-1\">' + global$3.translate('Custom...') + '</button>' + '</div>' + '</td>' + '</tr>';\n        html += '<tr>';\n        for (x = 0; x < cols; x++) {\n          html += getColorCellHtml('', 'Custom color');\n        }\n        html += '</tr>';\n      }\n      html += '</tbody></table>';\n      return html;\n    };\n    var ColorPickerHtml = { getHtml: getHtml };\n\n    var setDivColor = function setDivColor(div, value) {\n      div.style.background = value;\n      div.setAttribute('data-mce-color', value);\n    };\n    var onButtonClick = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        if (ctrl._color) {\n          editor.execCommand('mceApplyTextcolor', ctrl.settings.format, ctrl._color);\n        } else {\n          editor.execCommand('mceRemoveTextcolor', ctrl.settings.format);\n        }\n      };\n    };\n    var onPanelClick = function (editor, cols) {\n      return function (e) {\n        var buttonCtrl = this.parent();\n        var value;\n        var currentColor = TextColor.getCurrentColor(editor, buttonCtrl.settings.format);\n        var selectColor = function (value) {\n          editor.execCommand('mceApplyTextcolor', buttonCtrl.settings.format, value);\n          buttonCtrl.hidePanel();\n          buttonCtrl.color(value);\n        };\n        var resetColor = function () {\n          editor.execCommand('mceRemoveTextcolor', buttonCtrl.settings.format);\n          buttonCtrl.hidePanel();\n          buttonCtrl.resetColor();\n        };\n        if (global$1.DOM.getParent(e.target, '.mce-custom-color-btn')) {\n          buttonCtrl.hidePanel();\n          var colorPickerCallback = Settings.getColorPickerCallback(editor);\n          colorPickerCallback.call(editor, function (value) {\n            var tableElm = buttonCtrl.panel.getEl().getElementsByTagName('table')[0];\n            var customColorCells, div, i;\n            customColorCells = global$2.map(tableElm.rows[tableElm.rows.length - 1].childNodes, function (elm) {\n              return elm.firstChild;\n            });\n            for (i = 0; i < customColorCells.length; i++) {\n              div = customColorCells[i];\n              if (!div.getAttribute('data-mce-color')) {\n                break;\n              }\n            }\n            if (i === cols) {\n              for (i = 0; i < cols - 1; i++) {\n                setDivColor(customColorCells[i], customColorCells[i + 1].getAttribute('data-mce-color'));\n              }\n            }\n            setDivColor(div, value);\n            selectColor(value);\n          }, currentColor);\n        }\n        value = e.target.getAttribute('data-mce-color');\n        if (value) {\n          if (this.lastId) {\n            global$1.DOM.get(this.lastId).setAttribute('aria-selected', 'false');\n          }\n          e.target.setAttribute('aria-selected', true);\n          this.lastId = e.target.id;\n          if (value === 'transparent') {\n            resetColor();\n          } else {\n            selectColor(value);\n          }\n        } else if (value !== null) {\n          buttonCtrl.hidePanel();\n        }\n      };\n    };\n    var renderColorPicker = function (editor, foreColor) {\n      return function () {\n        var cols = foreColor ? Settings.getForeColorCols(editor) : Settings.getBackColorCols(editor);\n        var rows = foreColor ? Settings.getForeColorRows(editor) : Settings.getBackColorRows(editor);\n        var colorMap = foreColor ? Settings.getForeColorMap(editor) : Settings.getBackColorMap(editor);\n        var hasColorPicker = Settings.hasColorPicker(editor);\n        return ColorPickerHtml.getHtml(cols, rows, colorMap, hasColorPicker);\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addButton('forecolor', {\n        type: 'colorbutton',\n        tooltip: 'Text color',\n        format: 'forecolor',\n        panel: {\n          role: 'application',\n          ariaRemember: true,\n          html: renderColorPicker(editor, true),\n          onclick: onPanelClick(editor, Settings.getForeColorCols(editor))\n        },\n        onclick: onButtonClick(editor)\n      });\n      editor.addButton('backcolor', {\n        type: 'colorbutton',\n        tooltip: 'Background color',\n        format: 'hilitecolor',\n        panel: {\n          role: 'application',\n          ariaRemember: true,\n          html: renderColorPicker(editor, false),\n          onclick: onPanelClick(editor, Settings.getBackColorCols(editor))\n        },\n        onclick: onButtonClick(editor)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('textcolor', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","tinymce.addI18n('zh_CN',{\r\n\"Redo\": \"\\u91cd\\u590d\",\r\n\"Undo\": \"\\u64a4\\u6d88\",\r\n\"Cut\": \"\\u526a\\u5207\",\r\n\"Copy\": \"\\u590d\\u5236\",\r\n\"Paste\": \"\\u7c98\\u8d34\",\r\n\"Select all\": \"\\u5168\\u9009\",\r\n\"New document\": \"\\u65b0\\u6587\\u6863\",\r\n\"Ok\": \"\\u786e\\u5b9a\",\r\n\"Cancel\": \"\\u53d6\\u6d88\",\r\n\"Visual aids\": \"\\u7f51\\u683c\\u7ebf\",\r\n\"Bold\": \"\\u7c97\\u4f53\",\r\n\"Italic\": \"\\u659c\\u4f53\",\r\n\"Underline\": \"\\u4e0b\\u5212\\u7ebf\",\r\n\"Strikethrough\": \"\\u5220\\u9664\\u7ebf\",\r\n\"Superscript\": \"\\u4e0a\\u6807\",\r\n\"Subscript\": \"\\u4e0b\\u6807\",\r\n\"Clear formatting\": \"\\u6e05\\u9664\\u683c\\u5f0f\",\r\n\"Align left\": \"\\u5de6\\u5bf9\\u9f50\",\r\n\"Align center\": \"\\u5c45\\u4e2d\",\r\n\"Align right\": \"\\u53f3\\u5bf9\\u9f50\",\r\n\"Justify\": \"\\u4e24\\u7aef\\u5bf9\\u9f50\",\r\n\"Bullet list\": \"\\u9879\\u76ee\\u7b26\\u53f7\",\r\n\"Numbered list\": \"\\u7f16\\u53f7\\u5217\\u8868\",\r\n\"Decrease indent\": \"\\u51cf\\u5c11\\u7f29\\u8fdb\",\r\n\"Increase indent\": \"\\u589e\\u52a0\\u7f29\\u8fdb\",\r\n\"Close\": \"\\u5173\\u95ed\",\r\n\"Formats\": \"\\u683c\\u5f0f\",\r\n\"Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X\\/C\\/V keyboard shortcuts instead.\": \"\\u4f60\\u7684\\u6d4f\\u89c8\\u5668\\u4e0d\\u652f\\u6301\\u5bf9\\u526a\\u8d34\\u677f\\u7684\\u8bbf\\u95ee\\uff0c\\u8bf7\\u4f7f\\u7528Ctrl+X\\/C\\/V\\u952e\\u8fdb\\u884c\\u590d\\u5236\\u7c98\\u8d34\\u3002\",\r\n\"Headers\": \"\\u6807\\u9898\",\r\n\"Header 1\": \"\\u6807\\u98981\",\r\n\"Header 2\": \"\\u6807\\u98982\",\r\n\"Header 3\": \"\\u6807\\u98983\",\r\n\"Header 4\": \"\\u6807\\u98984\",\r\n\"Header 5\": \"\\u6807\\u98985\",\r\n\"Header 6\": \"\\u6807\\u98986\",\r\n\"Headings\": \"\\u6807\\u9898\",\r\n\"Heading 1\": \"\\u6807\\u98981\",\r\n\"Heading 2\": \"\\u6807\\u98982\",\r\n\"Heading 3\": \"\\u6807\\u98983\",\r\n\"Heading 4\": \"\\u6807\\u98984\",\r\n\"Heading 5\": \"\\u6807\\u98985\",\r\n\"Heading 6\": \"\\u6807\\u98986\",\r\n\"Div\": \"Div\\u533a\\u5757\",\r\n\"Pre\": \"\\u9884\\u683c\\u5f0f\\u6587\\u672c\",\r\n\"Code\": \"\\u4ee3\\u7801\",\r\n\"Paragraph\": \"\\u6bb5\\u843d\",\r\n\"Blockquote\": \"\\u5f15\\u7528\",\r\n\"Inline\": \"\\u6587\\u672c\",\r\n\"Blocks\": \"\\u533a\\u5757\",\r\n\"Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.\": \"\\u5f53\\u524d\\u4e3a\\u7eaf\\u6587\\u672c\\u7c98\\u8d34\\u6a21\\u5f0f\\uff0c\\u518d\\u6b21\\u70b9\\u51fb\\u53ef\\u4ee5\\u56de\\u5230\\u666e\\u901a\\u7c98\\u8d34\\u6a21\\u5f0f\\u3002\",\r\n\"Font Family\": \"\\u5b57\\u4f53\",\r\n\"Font Sizes\": \"\\u5b57\\u53f7\",\r\n\"Class\": \"Class\",\r\n\"Browse for an image\": \"Browse for an image\",\r\n\"OR\": \"OR\",\r\n\"Drop an image here\": \"Drop an image here\",\r\n\"Upload\": \"\\u4e0a\\u4f20\",\r\n\"Default\": \"\\u9ed8\\u8ba4\",\r\n\"Circle\": \"\\u7a7a\\u5fc3\\u5706\",\r\n\"Disc\": \"\\u5b9e\\u5fc3\\u5706\",\r\n\"Square\": \"\\u65b9\\u5757\",\r\n\"Lower Alpha\": \"\\u5c0f\\u5199\\u82f1\\u6587\\u5b57\\u6bcd\",\r\n\"Lower Greek\": \"\\u5c0f\\u5199\\u5e0c\\u814a\\u5b57\\u6bcd\",\r\n\"Lower Roman\": \"\\u5c0f\\u5199\\u7f57\\u9a6c\\u5b57\\u6bcd\",\r\n\"Upper Alpha\": \"\\u5927\\u5199\\u82f1\\u6587\\u5b57\\u6bcd\",\r\n\"Upper Roman\": \"\\u5927\\u5199\\u7f57\\u9a6c\\u5b57\\u6bcd\",\r\n\"Anchor\": \"\\u951a\\u70b9\",\r\n\"Name\": \"\\u540d\\u79f0\",\r\n\"Id\": \"\\u6807\\u8bc6\\u7b26\",\r\n\"Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.\": \"\\u6807\\u8bc6\\u7b26\\u5e94\\u8be5\\u4ee5\\u5b57\\u6bcd\\u5f00\\u5934\\uff0c\\u540e\\u8ddf\\u5b57\\u6bcd\\u3001\\u6570\\u5b57\\u3001\\u7834\\u6298\\u53f7\\u3001\\u70b9\\u3001\\u5192\\u53f7\\u6216\\u4e0b\\u5212\\u7ebf\\u3002\",\r\n\"You have unsaved changes are you sure you want to navigate away?\": \"\\u4f60\\u8fd8\\u6709\\u6587\\u6863\\u5c1a\\u672a\\u4fdd\\u5b58\\uff0c\\u786e\\u5b9a\\u8981\\u79bb\\u5f00\\uff1f\",\r\n\"Restore last draft\": \"\\u6062\\u590d\\u4e0a\\u6b21\\u7684\\u8349\\u7a3f\",\r\n\"Special character\": \"\\u7279\\u6b8a\\u7b26\\u53f7\",\r\n\"Source code\": \"\\u6e90\\u4ee3\\u7801\",\r\n\"Insert\\/Edit code sample\": \"\\u63d2\\u5165\\/\\u7f16\\u8f91\\u4ee3\\u7801\\u793a\\u4f8b\",\r\n\"Language\": \"\\u8bed\\u8a00\",\r\n\"Color\": \"\\u989c\\u8272\",\r\n\"R\": \"R\",\r\n\"G\": \"G\",\r\n\"B\": \"B\",\r\n\"Left to right\": \"\\u4ece\\u5de6\\u5230\\u53f3\",\r\n\"Right to left\": \"\\u4ece\\u53f3\\u5230\\u5de6\",\r\n\"Emoticons\": \"\\u8868\\u60c5\",\r\n\"Document properties\": \"\\u6587\\u6863\\u5c5e\\u6027\",\r\n\"Title\": \"\\u6807\\u9898\",\r\n\"Keywords\": \"\\u5173\\u952e\\u8bcd\",\r\n\"Description\": \"\\u63cf\\u8ff0\",\r\n\"Robots\": \"\\u673a\\u5668\\u4eba\",\r\n\"Author\": \"\\u4f5c\\u8005\",\r\n\"Encoding\": \"\\u7f16\\u7801\",\r\n\"Fullscreen\": \"\\u5168\\u5c4f\",\r\n\"Action\": \"Action\",\r\n\"Shortcut\": \"Shortcut\",\r\n\"Help\": \"Help\",\r\n\"Address\": \"Address\",\r\n\"Focus to menubar\": \"Focus to menubar\",\r\n\"Focus to toolbar\": \"Focus to toolbar\",\r\n\"Focus to element path\": \"Focus to element path\",\r\n\"Focus to contextual toolbar\": \"Focus to contextual toolbar\",\r\n\"Insert link (if link plugin activated)\": \"Insert link (if link plugin activated)\",\r\n\"Save (if save plugin activated)\": \"Save (if save plugin activated)\",\r\n\"Find (if searchreplace plugin activated)\": \"Find (if searchreplace plugin activated)\",\r\n\"Plugins installed ({0}):\": \"Plugins installed ({0}):\",\r\n\"Premium plugins:\": \"Premium plugins:\",\r\n\"Learn more...\": \"Learn more...\",\r\n\"You are using {0}\": \"You are using {0}\",\r\n\"Horizontal line\": \"\\u6c34\\u5e73\\u5206\\u5272\\u7ebf\",\r\n\"Insert\\/edit image\": \"\\u63d2\\u5165\\/\\u7f16\\u8f91\\u56fe\\u7247\",\r\n\"Image description\": \"\\u56fe\\u7247\\u63cf\\u8ff0\",\r\n\"Source\": \"\\u5730\\u5740\",\r\n\"Dimensions\": \"\\u5927\\u5c0f\",\r\n\"Constrain proportions\": \"\\u4fdd\\u6301\\u7eb5\\u6a2a\\u6bd4\",\r\n\"General\": \"\\u666e\\u901a\",\r\n\"Advanced\": \"\\u9ad8\\u7ea7\",\r\n\"Style\": \"\\u6837\\u5f0f\",\r\n\"Vertical space\": \"\\u5782\\u76f4\\u8fb9\\u8ddd\",\r\n\"Horizontal space\": \"\\u6c34\\u5e73\\u8fb9\\u8ddd\",\r\n\"Border\": \"\\u8fb9\\u6846\",\r\n\"Insert image\": \"\\u63d2\\u5165\\u56fe\\u7247\",\r\n\"Image\": \"\\u56fe\\u7247\",\r\n\"Image list\": \"\\u56fe\\u7247\\u5217\\u8868\",\r\n\"Rotate counterclockwise\": \"\\u9006\\u65f6\\u9488\\u65cb\\u8f6c\",\r\n\"Rotate clockwise\": \"\\u987a\\u65f6\\u9488\\u65cb\\u8f6c\",\r\n\"Flip vertically\": \"\\u5782\\u76f4\\u7ffb\\u8f6c\",\r\n\"Flip horizontally\": \"\\u6c34\\u5e73\\u7ffb\\u8f6c\",\r\n\"Edit image\": \"\\u7f16\\u8f91\\u56fe\\u7247\",\r\n\"Image options\": \"\\u56fe\\u7247\\u9009\\u9879\",\r\n\"Zoom in\": \"\\u653e\\u5927\",\r\n\"Zoom out\": \"\\u7f29\\u5c0f\",\r\n\"Crop\": \"\\u88c1\\u526a\",\r\n\"Resize\": \"\\u8c03\\u6574\\u5927\\u5c0f\",\r\n\"Orientation\": \"\\u65b9\\u5411\",\r\n\"Brightness\": \"\\u4eae\\u5ea6\",\r\n\"Sharpen\": \"\\u9510\\u5316\",\r\n\"Contrast\": \"\\u5bf9\\u6bd4\\u5ea6\",\r\n\"Color levels\": \"\\u989c\\u8272\\u5c42\\u6b21\",\r\n\"Gamma\": \"\\u4f3d\\u9a6c\\u503c\",\r\n\"Invert\": \"\\u53cd\\u8f6c\",\r\n\"Apply\": \"\\u5e94\\u7528\",\r\n\"Back\": \"\\u540e\\u9000\",\r\n\"Insert date\\/time\": \"\\u63d2\\u5165\\u65e5\\u671f\\/\\u65f6\\u95f4\",\r\n\"Date\\/time\": \"\\u65e5\\u671f\\/\\u65f6\\u95f4\",\r\n\"Insert link\": \"\\u63d2\\u5165\\u94fe\\u63a5\",\r\n\"Insert\\/edit link\": \"\\u63d2\\u5165\\/\\u7f16\\u8f91\\u94fe\\u63a5\",\r\n\"Text to display\": \"\\u663e\\u793a\\u6587\\u5b57\",\r\n\"Url\": \"\\u5730\\u5740\",\r\n\"Target\": \"\\u6253\\u5f00\\u65b9\\u5f0f\",\r\n\"None\": \"\\u65e0\",\r\n\"New window\": \"\\u5728\\u65b0\\u7a97\\u53e3\\u6253\\u5f00\",\r\n\"Remove link\": \"\\u5220\\u9664\\u94fe\\u63a5\",\r\n\"Anchors\": \"\\u951a\\u70b9\",\r\n\"Link\": \"\\u94fe\\u63a5\",\r\n\"Paste or type a link\": \"\\u7c98\\u8d34\\u6216\\u8f93\\u5165\\u94fe\\u63a5\",\r\n\"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?\": \"\\u4f60\\u6240\\u586b\\u5199\\u7684URL\\u5730\\u5740\\u4e3a\\u90ae\\u4ef6\\u5730\\u5740\\uff0c\\u9700\\u8981\\u52a0\\u4e0amailto:\\u524d\\u7f00\\u5417\\uff1f\",\r\n\"The URL you entered seems to be an external link. Do you want to add the required http:\\/\\/ prefix?\": \"\\u4f60\\u6240\\u586b\\u5199\\u7684URL\\u5730\\u5740\\u5c5e\\u4e8e\\u5916\\u90e8\\u94fe\\u63a5\\uff0c\\u9700\\u8981\\u52a0\\u4e0ahttp:\\/\\/:\\u524d\\u7f00\\u5417\\uff1f\",\r\n\"Link list\": \"Link list\",\r\n\"Insert video\": \"\\u63d2\\u5165\\u89c6\\u9891\",\r\n\"Insert\\/edit video\": \"\\u63d2\\u5165\\/\\u7f16\\u8f91\\u89c6\\u9891\",\r\n\"Insert\\/edit media\": \"\\u63d2\\u5165\\/\\u7f16\\u8f91\\u5a92\\u4f53\",\r\n\"Alternative source\": \"\\u955c\\u50cf\",\r\n\"Poster\": \"\\u5c01\\u9762\",\r\n\"Paste your embed code below:\": \"\\u5c06\\u5185\\u5d4c\\u4ee3\\u7801\\u7c98\\u8d34\\u5728\\u4e0b\\u9762:\",\r\n\"Embed\": \"\\u5185\\u5d4c\",\r\n\"Media\": \"\\u5a92\\u4f53\",\r\n\"Nonbreaking space\": \"\\u4e0d\\u95f4\\u65ad\\u7a7a\\u683c\",\r\n\"Page break\": \"\\u5206\\u9875\\u7b26\",\r\n\"Paste as text\": \"\\u7c98\\u8d34\\u4e3a\\u6587\\u672c\",\r\n\"Preview\": \"\\u9884\\u89c8\",\r\n\"Print\": \"\\u6253\\u5370\",\r\n\"Save\": \"\\u4fdd\\u5b58\",\r\n\"Find\": \"\\u67e5\\u627e\",\r\n\"Replace with\": \"\\u66ff\\u6362\\u4e3a\",\r\n\"Replace\": \"\\u66ff\\u6362\",\r\n\"Replace all\": \"\\u5168\\u90e8\\u66ff\\u6362\",\r\n\"Prev\": \"\\u4e0a\\u4e00\\u4e2a\",\r\n\"Next\": \"\\u4e0b\\u4e00\\u4e2a\",\r\n\"Find and replace\": \"\\u67e5\\u627e\\u548c\\u66ff\\u6362\",\r\n\"Could not find the specified string.\": \"\\u672a\\u627e\\u5230\\u641c\\u7d22\\u5185\\u5bb9.\",\r\n\"Match case\": \"\\u533a\\u5206\\u5927\\u5c0f\\u5199\",\r\n\"Whole words\": \"\\u5168\\u5b57\\u5339\\u914d\",\r\n\"Spellcheck\": \"\\u62fc\\u5199\\u68c0\\u67e5\",\r\n\"Ignore\": \"\\u5ffd\\u7565\",\r\n\"Ignore all\": \"\\u5168\\u90e8\\u5ffd\\u7565\",\r\n\"Finish\": \"\\u5b8c\\u6210\",\r\n\"Add to Dictionary\": \"\\u6dfb\\u52a0\\u5230\\u5b57\\u5178\",\r\n\"Insert table\": \"\\u63d2\\u5165\\u8868\\u683c\",\r\n\"Table properties\": \"\\u8868\\u683c\\u5c5e\\u6027\",\r\n\"Delete table\": \"\\u5220\\u9664\\u8868\\u683c\",\r\n\"Cell\": \"\\u5355\\u5143\\u683c\",\r\n\"Row\": \"\\u884c\",\r\n\"Column\": \"\\u5217\",\r\n\"Cell properties\": \"\\u5355\\u5143\\u683c\\u5c5e\\u6027\",\r\n\"Merge cells\": \"\\u5408\\u5e76\\u5355\\u5143\\u683c\",\r\n\"Split cell\": \"\\u62c6\\u5206\\u5355\\u5143\\u683c\",\r\n\"Insert row before\": \"\\u5728\\u4e0a\\u65b9\\u63d2\\u5165\",\r\n\"Insert row after\": \"\\u5728\\u4e0b\\u65b9\\u63d2\\u5165\",\r\n\"Delete row\": \"\\u5220\\u9664\\u884c\",\r\n\"Row properties\": \"\\u884c\\u5c5e\\u6027\",\r\n\"Cut row\": \"\\u526a\\u5207\\u884c\",\r\n\"Copy row\": \"\\u590d\\u5236\\u884c\",\r\n\"Paste row before\": \"\\u7c98\\u8d34\\u5230\\u4e0a\\u65b9\",\r\n\"Paste row after\": \"\\u7c98\\u8d34\\u5230\\u4e0b\\u65b9\",\r\n\"Insert column before\": \"\\u5728\\u5de6\\u4fa7\\u63d2\\u5165\",\r\n\"Insert column after\": \"\\u5728\\u53f3\\u4fa7\\u63d2\\u5165\",\r\n\"Delete column\": \"\\u5220\\u9664\\u5217\",\r\n\"Cols\": \"\\u5217\",\r\n\"Rows\": \"\\u884c\",\r\n\"Width\": \"\\u5bbd\",\r\n\"Height\": \"\\u9ad8\",\r\n\"Cell spacing\": \"\\u5355\\u5143\\u683c\\u5916\\u95f4\\u8ddd\",\r\n\"Cell padding\": \"\\u5355\\u5143\\u683c\\u5185\\u8fb9\\u8ddd\",\r\n\"Caption\": \"\\u6807\\u9898\",\r\n\"Left\": \"\\u5de6\\u5bf9\\u9f50\",\r\n\"Center\": \"\\u5c45\\u4e2d\",\r\n\"Right\": \"\\u53f3\\u5bf9\\u9f50\",\r\n\"Cell type\": \"\\u5355\\u5143\\u683c\\u7c7b\\u578b\",\r\n\"Scope\": \"\\u8303\\u56f4\",\r\n\"Alignment\": \"\\u5bf9\\u9f50\\u65b9\\u5f0f\",\r\n\"H Align\": \"\\u6c34\\u5e73\\u5bf9\\u9f50\",\r\n\"V Align\": \"\\u5782\\u76f4\\u5bf9\\u9f50\",\r\n\"Top\": \"\\u9876\\u90e8\\u5bf9\\u9f50\",\r\n\"Middle\": \"\\u5782\\u76f4\\u5c45\\u4e2d\",\r\n\"Bottom\": \"\\u5e95\\u90e8\\u5bf9\\u9f50\",\r\n\"Header cell\": \"\\u8868\\u5934\\u5355\\u5143\\u683c\",\r\n\"Row group\": \"\\u884c\\u7ec4\",\r\n\"Column group\": \"\\u5217\\u7ec4\",\r\n\"Row type\": \"\\u884c\\u7c7b\\u578b\",\r\n\"Header\": \"\\u8868\\u5934\",\r\n\"Body\": \"\\u8868\\u4f53\",\r\n\"Footer\": \"\\u8868\\u5c3e\",\r\n\"Border color\": \"\\u8fb9\\u6846\\u989c\\u8272\",\r\n\"Insert template\": \"\\u63d2\\u5165\\u6a21\\u677f\",\r\n\"Templates\": \"\\u6a21\\u677f\",\r\n\"Template\": \"Template\",\r\n\"Text color\": \"\\u6587\\u5b57\\u989c\\u8272\",\r\n\"Background color\": \"\\u80cc\\u666f\\u8272\",\r\n\"Custom...\": \"\\u81ea\\u5b9a\\u4e49...\",\r\n\"Custom color\": \"\\u81ea\\u5b9a\\u4e49\\u989c\\u8272\",\r\n\"No color\": \"\\u65e0\",\r\n\"Table of Contents\": \"\\u5185\\u5bb9\\u5217\\u8868\",\r\n\"Show blocks\": \"\\u663e\\u793a\\u533a\\u5757\\u8fb9\\u6846\",\r\n\"Show invisible characters\": \"\\u663e\\u793a\\u4e0d\\u53ef\\u89c1\\u5b57\\u7b26\",\r\n\"Words: {0}\": \"\\u5b57\\u6570\\uff1a{0}\",\r\n\"File\": \"\\u6587\\u4ef6\",\r\n\"Edit\": \"\\u7f16\\u8f91\",\r\n\"Insert\": \"\\u63d2\\u5165\",\r\n\"View\": \"\\u89c6\\u56fe\",\r\n\"Format\": \"\\u683c\\u5f0f\",\r\n\"Table\": \"\\u8868\\u683c\",\r\n\"Tools\": \"\\u5de5\\u5177\",\r\n\"Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help\": \"\\u5728\\u7f16\\u8f91\\u533a\\u6309ALT-F9\\u6253\\u5f00\\u83dc\\u5355\\uff0c\\u6309ALT-F10\\u6253\\u5f00\\u5de5\\u5177\\u680f\\uff0c\\u6309ALT-0\\u67e5\\u770b\\u5e2e\\u52a9\"\r\n});","(function () {\nvar anchor = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var isValidId = function (id) {\n      return /^[A-Za-z][A-Za-z0-9\\-:._]*$/.test(id);\n    };\n    var getId = function (editor) {\n      var selectedNode = editor.selection.getNode();\n      var isAnchor = selectedNode.tagName === 'A' && editor.dom.getAttrib(selectedNode, 'href') === '';\n      return isAnchor ? selectedNode.id || selectedNode.name : '';\n    };\n    var insert = function (editor, id) {\n      var selectedNode = editor.selection.getNode();\n      var isAnchor = selectedNode.tagName === 'A' && editor.dom.getAttrib(selectedNode, 'href') === '';\n      if (isAnchor) {\n        selectedNode.removeAttribute('name');\n        selectedNode.id = id;\n        editor.undoManager.add();\n      } else {\n        editor.focus();\n        editor.selection.collapse(true);\n        editor.execCommand('mceInsertContent', false, editor.dom.createHTML('a', { id: id }));\n      }\n    };\n    var Anchor = {\n      isValidId: isValidId,\n      getId: getId,\n      insert: insert\n    };\n\n    var insertAnchor = function (editor, newId) {\n      if (!Anchor.isValidId(newId)) {\n        editor.windowManager.alert('Id should start with a letter, followed only by letters, numbers, dashes, dots, colons or underscores.');\n        return true;\n      } else {\n        Anchor.insert(editor, newId);\n        return false;\n      }\n    };\n    var open = function (editor) {\n      var currentId = Anchor.getId(editor);\n      editor.windowManager.open({\n        title: 'Anchor',\n        body: {\n          type: 'textbox',\n          name: 'id',\n          size: 40,\n          label: 'Id',\n          value: currentId\n        },\n        onsubmit: function (e) {\n          var newId = e.data.id;\n          if (insertAnchor(editor, newId)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceAnchor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var isAnchorNode = function (node) {\n      return !node.attr('href') && (node.attr('id') || node.attr('name')) && !node.firstChild;\n    };\n    var setContentEditable = function (state) {\n      return function (nodes) {\n        for (var i = 0; i < nodes.length; i++) {\n          if (isAnchorNode(nodes[i])) {\n            nodes[i].attr('contenteditable', state);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('PreInit', function () {\n        editor.parser.addNodeFilter('a', setContentEditable('false'));\n        editor.serializer.addNodeFilter('a', setContentEditable(null));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('anchor', {\n        icon: 'anchor',\n        tooltip: 'Anchor',\n        cmd: 'mceAnchor',\n        stateSelector: 'a:not([href])'\n      });\n      editor.addMenuItem('anchor', {\n        icon: 'anchor',\n        text: 'Anchor',\n        context: 'insert',\n        cmd: 'mceAnchor'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('anchor', function (editor) {\n      FilterContent.setup(editor);\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar charmap = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireInsertCustomChar = function (editor, chr) {\n      return editor.fire('insertCustomChar', { chr: chr });\n    };\n    var Events = { fireInsertCustomChar: fireInsertCustomChar };\n\n    var insertChar = function (editor, chr) {\n      var evtChr = Events.fireInsertCustomChar(editor, chr).chr;\n      editor.execCommand('mceInsertContent', false, evtChr);\n    };\n    var Actions = { insertChar: insertChar };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getCharMap = function (editor) {\n      return editor.settings.charmap;\n    };\n    var getCharMapAppend = function (editor) {\n      return editor.settings.charmap_append;\n    };\n    var Settings = {\n      getCharMap: getCharMap,\n      getCharMapAppend: getCharMapAppend\n    };\n\n    var isArray = global$1.isArray;\n    var getDefaultCharMap = function () {\n      return [\n        [\n          '160',\n          'no-break space'\n        ],\n        [\n          '173',\n          'soft hyphen'\n        ],\n        [\n          '34',\n          'quotation mark'\n        ],\n        [\n          '162',\n          'cent sign'\n        ],\n        [\n          '8364',\n          'euro sign'\n        ],\n        [\n          '163',\n          'pound sign'\n        ],\n        [\n          '165',\n          'yen sign'\n        ],\n        [\n          '169',\n          'copyright sign'\n        ],\n        [\n          '174',\n          'registered sign'\n        ],\n        [\n          '8482',\n          'trade mark sign'\n        ],\n        [\n          '8240',\n          'per mille sign'\n        ],\n        [\n          '181',\n          'micro sign'\n        ],\n        [\n          '183',\n          'middle dot'\n        ],\n        [\n          '8226',\n          'bullet'\n        ],\n        [\n          '8230',\n          'three dot leader'\n        ],\n        [\n          '8242',\n          'minutes / feet'\n        ],\n        [\n          '8243',\n          'seconds / inches'\n        ],\n        [\n          '167',\n          'section sign'\n        ],\n        [\n          '182',\n          'paragraph sign'\n        ],\n        [\n          '223',\n          'sharp s / ess-zed'\n        ],\n        [\n          '8249',\n          'single left-pointing angle quotation mark'\n        ],\n        [\n          '8250',\n          'single right-pointing angle quotation mark'\n        ],\n        [\n          '171',\n          'left pointing guillemet'\n        ],\n        [\n          '187',\n          'right pointing guillemet'\n        ],\n        [\n          '8216',\n          'left single quotation mark'\n        ],\n        [\n          '8217',\n          'right single quotation mark'\n        ],\n        [\n          '8220',\n          'left double quotation mark'\n        ],\n        [\n          '8221',\n          'right double quotation mark'\n        ],\n        [\n          '8218',\n          'single low-9 quotation mark'\n        ],\n        [\n          '8222',\n          'double low-9 quotation mark'\n        ],\n        [\n          '60',\n          'less-than sign'\n        ],\n        [\n          '62',\n          'greater-than sign'\n        ],\n        [\n          '8804',\n          'less-than or equal to'\n        ],\n        [\n          '8805',\n          'greater-than or equal to'\n        ],\n        [\n          '8211',\n          'en dash'\n        ],\n        [\n          '8212',\n          'em dash'\n        ],\n        [\n          '175',\n          'macron'\n        ],\n        [\n          '8254',\n          'overline'\n        ],\n        [\n          '164',\n          'currency sign'\n        ],\n        [\n          '166',\n          'broken bar'\n        ],\n        [\n          '168',\n          'diaeresis'\n        ],\n        [\n          '161',\n          'inverted exclamation mark'\n        ],\n        [\n          '191',\n          'turned question mark'\n        ],\n        [\n          '710',\n          'circumflex accent'\n        ],\n        [\n          '732',\n          'small tilde'\n        ],\n        [\n          '176',\n          'degree sign'\n        ],\n        [\n          '8722',\n          'minus sign'\n        ],\n        [\n          '177',\n          'plus-minus sign'\n        ],\n        [\n          '247',\n          'division sign'\n        ],\n        [\n          '8260',\n          'fraction slash'\n        ],\n        [\n          '215',\n          'multiplication sign'\n        ],\n        [\n          '185',\n          'superscript one'\n        ],\n        [\n          '178',\n          'superscript two'\n        ],\n        [\n          '179',\n          'superscript three'\n        ],\n        [\n          '188',\n          'fraction one quarter'\n        ],\n        [\n          '189',\n          'fraction one half'\n        ],\n        [\n          '190',\n          'fraction three quarters'\n        ],\n        [\n          '402',\n          'function / florin'\n        ],\n        [\n          '8747',\n          'integral'\n        ],\n        [\n          '8721',\n          'n-ary sumation'\n        ],\n        [\n          '8734',\n          'infinity'\n        ],\n        [\n          '8730',\n          'square root'\n        ],\n        [\n          '8764',\n          'similar to'\n        ],\n        [\n          '8773',\n          'approximately equal to'\n        ],\n        [\n          '8776',\n          'almost equal to'\n        ],\n        [\n          '8800',\n          'not equal to'\n        ],\n        [\n          '8801',\n          'identical to'\n        ],\n        [\n          '8712',\n          'element of'\n        ],\n        [\n          '8713',\n          'not an element of'\n        ],\n        [\n          '8715',\n          'contains as member'\n        ],\n        [\n          '8719',\n          'n-ary product'\n        ],\n        [\n          '8743',\n          'logical and'\n        ],\n        [\n          '8744',\n          'logical or'\n        ],\n        [\n          '172',\n          'not sign'\n        ],\n        [\n          '8745',\n          'intersection'\n        ],\n        [\n          '8746',\n          'union'\n        ],\n        [\n          '8706',\n          'partial differential'\n        ],\n        [\n          '8704',\n          'for all'\n        ],\n        [\n          '8707',\n          'there exists'\n        ],\n        [\n          '8709',\n          'diameter'\n        ],\n        [\n          '8711',\n          'backward difference'\n        ],\n        [\n          '8727',\n          'asterisk operator'\n        ],\n        [\n          '8733',\n          'proportional to'\n        ],\n        [\n          '8736',\n          'angle'\n        ],\n        [\n          '180',\n          'acute accent'\n        ],\n        [\n          '184',\n          'cedilla'\n        ],\n        [\n          '170',\n          'feminine ordinal indicator'\n        ],\n        [\n          '186',\n          'masculine ordinal indicator'\n        ],\n        [\n          '8224',\n          'dagger'\n        ],\n        [\n          '8225',\n          'double dagger'\n        ],\n        [\n          '192',\n          'A - grave'\n        ],\n        [\n          '193',\n          'A - acute'\n        ],\n        [\n          '194',\n          'A - circumflex'\n        ],\n        [\n          '195',\n          'A - tilde'\n        ],\n        [\n          '196',\n          'A - diaeresis'\n        ],\n        [\n          '197',\n          'A - ring above'\n        ],\n        [\n          '256',\n          'A - macron'\n        ],\n        [\n          '198',\n          'ligature AE'\n        ],\n        [\n          '199',\n          'C - cedilla'\n        ],\n        [\n          '200',\n          'E - grave'\n        ],\n        [\n          '201',\n          'E - acute'\n        ],\n        [\n          '202',\n          'E - circumflex'\n        ],\n        [\n          '203',\n          'E - diaeresis'\n        ],\n        [\n          '274',\n          'E - macron'\n        ],\n        [\n          '204',\n          'I - grave'\n        ],\n        [\n          '205',\n          'I - acute'\n        ],\n        [\n          '206',\n          'I - circumflex'\n        ],\n        [\n          '207',\n          'I - diaeresis'\n        ],\n        [\n          '298',\n          'I - macron'\n        ],\n        [\n          '208',\n          'ETH'\n        ],\n        [\n          '209',\n          'N - tilde'\n        ],\n        [\n          '210',\n          'O - grave'\n        ],\n        [\n          '211',\n          'O - acute'\n        ],\n        [\n          '212',\n          'O - circumflex'\n        ],\n        [\n          '213',\n          'O - tilde'\n        ],\n        [\n          '214',\n          'O - diaeresis'\n        ],\n        [\n          '216',\n          'O - slash'\n        ],\n        [\n          '332',\n          'O - macron'\n        ],\n        [\n          '338',\n          'ligature OE'\n        ],\n        [\n          '352',\n          'S - caron'\n        ],\n        [\n          '217',\n          'U - grave'\n        ],\n        [\n          '218',\n          'U - acute'\n        ],\n        [\n          '219',\n          'U - circumflex'\n        ],\n        [\n          '220',\n          'U - diaeresis'\n        ],\n        [\n          '362',\n          'U - macron'\n        ],\n        [\n          '221',\n          'Y - acute'\n        ],\n        [\n          '376',\n          'Y - diaeresis'\n        ],\n        [\n          '562',\n          'Y - macron'\n        ],\n        [\n          '222',\n          'THORN'\n        ],\n        [\n          '224',\n          'a - grave'\n        ],\n        [\n          '225',\n          'a - acute'\n        ],\n        [\n          '226',\n          'a - circumflex'\n        ],\n        [\n          '227',\n          'a - tilde'\n        ],\n        [\n          '228',\n          'a - diaeresis'\n        ],\n        [\n          '229',\n          'a - ring above'\n        ],\n        [\n          '257',\n          'a - macron'\n        ],\n        [\n          '230',\n          'ligature ae'\n        ],\n        [\n          '231',\n          'c - cedilla'\n        ],\n        [\n          '232',\n          'e - grave'\n        ],\n        [\n          '233',\n          'e - acute'\n        ],\n        [\n          '234',\n          'e - circumflex'\n        ],\n        [\n          '235',\n          'e - diaeresis'\n        ],\n        [\n          '275',\n          'e - macron'\n        ],\n        [\n          '236',\n          'i - grave'\n        ],\n        [\n          '237',\n          'i - acute'\n        ],\n        [\n          '238',\n          'i - circumflex'\n        ],\n        [\n          '239',\n          'i - diaeresis'\n        ],\n        [\n          '299',\n          'i - macron'\n        ],\n        [\n          '240',\n          'eth'\n        ],\n        [\n          '241',\n          'n - tilde'\n        ],\n        [\n          '242',\n          'o - grave'\n        ],\n        [\n          '243',\n          'o - acute'\n        ],\n        [\n          '244',\n          'o - circumflex'\n        ],\n        [\n          '245',\n          'o - tilde'\n        ],\n        [\n          '246',\n          'o - diaeresis'\n        ],\n        [\n          '248',\n          'o slash'\n        ],\n        [\n          '333',\n          'o macron'\n        ],\n        [\n          '339',\n          'ligature oe'\n        ],\n        [\n          '353',\n          's - caron'\n        ],\n        [\n          '249',\n          'u - grave'\n        ],\n        [\n          '250',\n          'u - acute'\n        ],\n        [\n          '251',\n          'u - circumflex'\n        ],\n        [\n          '252',\n          'u - diaeresis'\n        ],\n        [\n          '363',\n          'u - macron'\n        ],\n        [\n          '253',\n          'y - acute'\n        ],\n        [\n          '254',\n          'thorn'\n        ],\n        [\n          '255',\n          'y - diaeresis'\n        ],\n        [\n          '563',\n          'y - macron'\n        ],\n        [\n          '913',\n          'Alpha'\n        ],\n        [\n          '914',\n          'Beta'\n        ],\n        [\n          '915',\n          'Gamma'\n        ],\n        [\n          '916',\n          'Delta'\n        ],\n        [\n          '917',\n          'Epsilon'\n        ],\n        [\n          '918',\n          'Zeta'\n        ],\n        [\n          '919',\n          'Eta'\n        ],\n        [\n          '920',\n          'Theta'\n        ],\n        [\n          '921',\n          'Iota'\n        ],\n        [\n          '922',\n          'Kappa'\n        ],\n        [\n          '923',\n          'Lambda'\n        ],\n        [\n          '924',\n          'Mu'\n        ],\n        [\n          '925',\n          'Nu'\n        ],\n        [\n          '926',\n          'Xi'\n        ],\n        [\n          '927',\n          'Omicron'\n        ],\n        [\n          '928',\n          'Pi'\n        ],\n        [\n          '929',\n          'Rho'\n        ],\n        [\n          '931',\n          'Sigma'\n        ],\n        [\n          '932',\n          'Tau'\n        ],\n        [\n          '933',\n          'Upsilon'\n        ],\n        [\n          '934',\n          'Phi'\n        ],\n        [\n          '935',\n          'Chi'\n        ],\n        [\n          '936',\n          'Psi'\n        ],\n        [\n          '937',\n          'Omega'\n        ],\n        [\n          '945',\n          'alpha'\n        ],\n        [\n          '946',\n          'beta'\n        ],\n        [\n          '947',\n          'gamma'\n        ],\n        [\n          '948',\n          'delta'\n        ],\n        [\n          '949',\n          'epsilon'\n        ],\n        [\n          '950',\n          'zeta'\n        ],\n        [\n          '951',\n          'eta'\n        ],\n        [\n          '952',\n          'theta'\n        ],\n        [\n          '953',\n          'iota'\n        ],\n        [\n          '954',\n          'kappa'\n        ],\n        [\n          '955',\n          'lambda'\n        ],\n        [\n          '956',\n          'mu'\n        ],\n        [\n          '957',\n          'nu'\n        ],\n        [\n          '958',\n          'xi'\n        ],\n        [\n          '959',\n          'omicron'\n        ],\n        [\n          '960',\n          'pi'\n        ],\n        [\n          '961',\n          'rho'\n        ],\n        [\n          '962',\n          'final sigma'\n        ],\n        [\n          '963',\n          'sigma'\n        ],\n        [\n          '964',\n          'tau'\n        ],\n        [\n          '965',\n          'upsilon'\n        ],\n        [\n          '966',\n          'phi'\n        ],\n        [\n          '967',\n          'chi'\n        ],\n        [\n          '968',\n          'psi'\n        ],\n        [\n          '969',\n          'omega'\n        ],\n        [\n          '8501',\n          'alef symbol'\n        ],\n        [\n          '982',\n          'pi symbol'\n        ],\n        [\n          '8476',\n          'real part symbol'\n        ],\n        [\n          '978',\n          'upsilon - hook symbol'\n        ],\n        [\n          '8472',\n          'Weierstrass p'\n        ],\n        [\n          '8465',\n          'imaginary part'\n        ],\n        [\n          '8592',\n          'leftwards arrow'\n        ],\n        [\n          '8593',\n          'upwards arrow'\n        ],\n        [\n          '8594',\n          'rightwards arrow'\n        ],\n        [\n          '8595',\n          'downwards arrow'\n        ],\n        [\n          '8596',\n          'left right arrow'\n        ],\n        [\n          '8629',\n          'carriage return'\n        ],\n        [\n          '8656',\n          'leftwards double arrow'\n        ],\n        [\n          '8657',\n          'upwards double arrow'\n        ],\n        [\n          '8658',\n          'rightwards double arrow'\n        ],\n        [\n          '8659',\n          'downwards double arrow'\n        ],\n        [\n          '8660',\n          'left right double arrow'\n        ],\n        [\n          '8756',\n          'therefore'\n        ],\n        [\n          '8834',\n          'subset of'\n        ],\n        [\n          '8835',\n          'superset of'\n        ],\n        [\n          '8836',\n          'not a subset of'\n        ],\n        [\n          '8838',\n          'subset of or equal to'\n        ],\n        [\n          '8839',\n          'superset of or equal to'\n        ],\n        [\n          '8853',\n          'circled plus'\n        ],\n        [\n          '8855',\n          'circled times'\n        ],\n        [\n          '8869',\n          'perpendicular'\n        ],\n        [\n          '8901',\n          'dot operator'\n        ],\n        [\n          '8968',\n          'left ceiling'\n        ],\n        [\n          '8969',\n          'right ceiling'\n        ],\n        [\n          '8970',\n          'left floor'\n        ],\n        [\n          '8971',\n          'right floor'\n        ],\n        [\n          '9001',\n          'left-pointing angle bracket'\n        ],\n        [\n          '9002',\n          'right-pointing angle bracket'\n        ],\n        [\n          '9674',\n          'lozenge'\n        ],\n        [\n          '9824',\n          'black spade suit'\n        ],\n        [\n          '9827',\n          'black club suit'\n        ],\n        [\n          '9829',\n          'black heart suit'\n        ],\n        [\n          '9830',\n          'black diamond suit'\n        ],\n        [\n          '8194',\n          'en space'\n        ],\n        [\n          '8195',\n          'em space'\n        ],\n        [\n          '8201',\n          'thin space'\n        ],\n        [\n          '8204',\n          'zero width non-joiner'\n        ],\n        [\n          '8205',\n          'zero width joiner'\n        ],\n        [\n          '8206',\n          'left-to-right mark'\n        ],\n        [\n          '8207',\n          'right-to-left mark'\n        ]\n      ];\n    };\n    var charmapFilter = function (charmap) {\n      return global$1.grep(charmap, function (item) {\n        return isArray(item) && item.length === 2;\n      });\n    };\n    var getCharsFromSetting = function (settingValue) {\n      if (isArray(settingValue)) {\n        return [].concat(charmapFilter(settingValue));\n      }\n      if (typeof settingValue === 'function') {\n        return settingValue();\n      }\n      return [];\n    };\n    var extendCharMap = function (editor, charmap) {\n      var userCharMap = Settings.getCharMap(editor);\n      if (userCharMap) {\n        charmap = getCharsFromSetting(userCharMap);\n      }\n      var userCharMapAppend = Settings.getCharMapAppend(editor);\n      if (userCharMapAppend) {\n        return [].concat(charmap).concat(getCharsFromSetting(userCharMapAppend));\n      }\n      return charmap;\n    };\n    var getCharMap$1 = function (editor) {\n      return extendCharMap(editor, getDefaultCharMap());\n    };\n    var CharMap = { getCharMap: getCharMap$1 };\n\n    var get = function (editor) {\n      var getCharMap = function () {\n        return CharMap.getCharMap(editor);\n      };\n      var insertChar = function (chr) {\n        Actions.insertChar(editor, chr);\n      };\n      return {\n        getCharMap: getCharMap,\n        insertChar: insertChar\n      };\n    };\n    var Api = { get: get };\n\n    var getHtml = function (charmap) {\n      var gridHtml, x, y;\n      var width = Math.min(charmap.length, 25);\n      var height = Math.ceil(charmap.length / width);\n      gridHtml = '<table role=\"presentation\" cellspacing=\"0\" class=\"mce-charmap\"><tbody>';\n      for (y = 0; y < height; y++) {\n        gridHtml += '<tr>';\n        for (x = 0; x < width; x++) {\n          var index = y * width + x;\n          if (index < charmap.length) {\n            var chr = charmap[index];\n            var charCode = parseInt(chr[0], 10);\n            var chrText = chr ? String.fromCharCode(charCode) : '&nbsp;';\n            gridHtml += '<td title=\"' + chr[1] + '\">' + '<div tabindex=\"-1\" title=\"' + chr[1] + '\" role=\"button\" data-chr=\"' + charCode + '\">' + chrText + '</div>' + '</td>';\n          } else {\n            gridHtml += '<td />';\n          }\n        }\n        gridHtml += '</tr>';\n      }\n      gridHtml += '</tbody></table>';\n      return gridHtml;\n    };\n    var GridHtml = { getHtml: getHtml };\n\n    var getParentTd = function (elm) {\n      while (elm) {\n        if (elm.nodeName === 'TD') {\n          return elm;\n        }\n        elm = elm.parentNode;\n      }\n    };\n    var open = function (editor) {\n      var win;\n      var charMapPanel = {\n        type: 'container',\n        html: GridHtml.getHtml(CharMap.getCharMap(editor)),\n        onclick: function (e) {\n          var target = e.target;\n          if (/^(TD|DIV)$/.test(target.nodeName)) {\n            var charDiv = getParentTd(target).firstChild;\n            if (charDiv && charDiv.hasAttribute('data-chr')) {\n              var charCodeString = charDiv.getAttribute('data-chr');\n              var charCode = parseInt(charCodeString, 10);\n              if (!isNaN(charCode)) {\n                Actions.insertChar(editor, String.fromCharCode(charCode));\n              }\n              if (!e.ctrlKey) {\n                win.close();\n              }\n            }\n          }\n        },\n        onmouseover: function (e) {\n          var td = getParentTd(e.target);\n          if (td && td.firstChild) {\n            win.find('#preview').text(td.firstChild.firstChild.data);\n            win.find('#previewTitle').text(td.title);\n          } else {\n            win.find('#preview').text(' ');\n            win.find('#previewTitle').text(' ');\n          }\n        }\n      };\n      win = editor.windowManager.open({\n        title: 'Special character',\n        spacing: 10,\n        padding: 10,\n        items: [\n          charMapPanel,\n          {\n            type: 'container',\n            layout: 'flex',\n            direction: 'column',\n            align: 'center',\n            spacing: 5,\n            minWidth: 160,\n            minHeight: 160,\n            items: [\n              {\n                type: 'label',\n                name: 'preview',\n                text: ' ',\n                style: 'font-size: 40px; text-align: center',\n                border: 1,\n                minWidth: 140,\n                minHeight: 80\n              },\n              {\n                type: 'spacer',\n                minHeight: 20\n              },\n              {\n                type: 'label',\n                name: 'previewTitle',\n                text: ' ',\n                style: 'white-space: pre-wrap;',\n                border: 1,\n                minWidth: 140\n              }\n            ]\n          }\n        ],\n        buttons: [{\n            text: 'Close',\n            onclick: function () {\n              win.close();\n            }\n          }]\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceShowCharmap', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('charmap', {\n        icon: 'charmap',\n        tooltip: 'Special character',\n        cmd: 'mceShowCharmap'\n      });\n      editor.addMenuItem('charmap', {\n        icon: 'charmap',\n        text: 'Special character',\n        cmd: 'mceShowCharmap',\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('charmap', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tinymce.vue?vue&type=style&index=0&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tinymce.vue?vue&type=style&index=0&lang=less&\"","(function () {\nvar lists = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.TreeWalker');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.BookmarkManager');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var isTextNode = function (node) {\n      return node && node.nodeType === 3;\n    };\n    var isListNode = function (node) {\n      return node && /^(OL|UL|DL)$/.test(node.nodeName);\n    };\n    var isOlUlNode = function (node) {\n      return node && /^(OL|UL)$/.test(node.nodeName);\n    };\n    var isListItemNode = function (node) {\n      return node && /^(LI|DT|DD)$/.test(node.nodeName);\n    };\n    var isDlItemNode = function (node) {\n      return node && /^(DT|DD)$/.test(node.nodeName);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isBr = function (node) {\n      return node && node.nodeName === 'BR';\n    };\n    var isFirstChild = function (node) {\n      return node.parentNode.firstChild === node;\n    };\n    var isLastChild = function (node) {\n      return node.parentNode.lastChild === node;\n    };\n    var isTextBlock = function (editor, node) {\n      return node && !!editor.schema.getTextBlockElements()[node.nodeName];\n    };\n    var isBlock = function (node, blockElements) {\n      return node && node.nodeName in blockElements;\n    };\n    var isBogusBr = function (dom, node) {\n      if (!isBr(node)) {\n        return false;\n      }\n      if (dom.isBlock(node.nextSibling) && !isBr(node.previousSibling)) {\n        return true;\n      }\n      return false;\n    };\n    var isEmpty = function (dom, elm, keepBookmarks) {\n      var empty = dom.isEmpty(elm);\n      if (keepBookmarks && dom.select('span[data-mce-type=bookmark]', elm).length > 0) {\n        return false;\n      }\n      return empty;\n    };\n    var isChildOfBody = function (dom, elm) {\n      return dom.isChildOf(elm, dom.getRoot());\n    };\n    var NodeType = {\n      isTextNode: isTextNode,\n      isListNode: isListNode,\n      isOlUlNode: isOlUlNode,\n      isDlItemNode: isDlItemNode,\n      isListItemNode: isListItemNode,\n      isTableCellNode: isTableCellNode,\n      isBr: isBr,\n      isFirstChild: isFirstChild,\n      isLastChild: isLastChild,\n      isTextBlock: isTextBlock,\n      isBlock: isBlock,\n      isBogusBr: isBogusBr,\n      isEmpty: isEmpty,\n      isChildOfBody: isChildOfBody\n    };\n\n    var getNormalizedPoint = function (container, offset) {\n      if (NodeType.isTextNode(container)) {\n        return {\n          container: container,\n          offset: offset\n        };\n      }\n      var node = global$1.getNode(container, offset);\n      if (NodeType.isTextNode(node)) {\n        return {\n          container: node,\n          offset: offset >= container.childNodes.length ? node.data.length : 0\n        };\n      } else if (node.previousSibling && NodeType.isTextNode(node.previousSibling)) {\n        return {\n          container: node.previousSibling,\n          offset: node.previousSibling.data.length\n        };\n      } else if (node.nextSibling && NodeType.isTextNode(node.nextSibling)) {\n        return {\n          container: node.nextSibling,\n          offset: 0\n        };\n      }\n      return {\n        container: container,\n        offset: offset\n      };\n    };\n    var normalizeRange = function (rng) {\n      var outRng = rng.cloneRange();\n      var rangeStart = getNormalizedPoint(rng.startContainer, rng.startOffset);\n      outRng.setStart(rangeStart.container, rangeStart.offset);\n      var rangeEnd = getNormalizedPoint(rng.endContainer, rng.endOffset);\n      outRng.setEnd(rangeEnd.container, rangeEnd.offset);\n      return outRng;\n    };\n    var Range = {\n      getNormalizedPoint: getNormalizedPoint,\n      normalizeRange: normalizeRange\n    };\n\n    var DOM = global$6.DOM;\n    var createBookmark = function (rng) {\n      var bookmark = {};\n      var setupEndPoint = function (start) {\n        var offsetNode, container, offset;\n        container = rng[start ? 'startContainer' : 'endContainer'];\n        offset = rng[start ? 'startOffset' : 'endOffset'];\n        if (container.nodeType === 1) {\n          offsetNode = DOM.create('span', { 'data-mce-type': 'bookmark' });\n          if (container.hasChildNodes()) {\n            offset = Math.min(offset, container.childNodes.length - 1);\n            if (start) {\n              container.insertBefore(offsetNode, container.childNodes[offset]);\n            } else {\n              DOM.insertAfter(offsetNode, container.childNodes[offset]);\n            }\n          } else {\n            container.appendChild(offsetNode);\n          }\n          container = offsetNode;\n          offset = 0;\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      };\n      setupEndPoint(true);\n      if (!rng.collapsed) {\n        setupEndPoint();\n      }\n      return bookmark;\n    };\n    var resolveBookmark = function (bookmark) {\n      function restoreEndPoint(start) {\n        var container, offset, node;\n        var nodeIndex = function (container) {\n          var node = container.parentNode.firstChild, idx = 0;\n          while (node) {\n            if (node === container) {\n              return idx;\n            }\n            if (node.nodeType !== 1 || node.getAttribute('data-mce-type') !== 'bookmark') {\n              idx++;\n            }\n            node = node.nextSibling;\n          }\n          return -1;\n        };\n        container = node = bookmark[start ? 'startContainer' : 'endContainer'];\n        offset = bookmark[start ? 'startOffset' : 'endOffset'];\n        if (!container) {\n          return;\n        }\n        if (container.nodeType === 1) {\n          offset = nodeIndex(container);\n          container = container.parentNode;\n          DOM.remove(node);\n          if (!container.hasChildNodes() && DOM.isBlock(container)) {\n            container.appendChild(DOM.create('br'));\n          }\n        }\n        bookmark[start ? 'startContainer' : 'endContainer'] = container;\n        bookmark[start ? 'startOffset' : 'endOffset'] = offset;\n      }\n      restoreEndPoint(true);\n      restoreEndPoint();\n      var rng = DOM.createRng();\n      rng.setStart(bookmark.startContainer, bookmark.startOffset);\n      if (bookmark.endContainer) {\n        rng.setEnd(bookmark.endContainer, bookmark.endOffset);\n      }\n      return Range.normalizeRange(rng);\n    };\n    var Bookmark = {\n      createBookmark: createBookmark,\n      resolveBookmark: resolveBookmark\n    };\n\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var slice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var groupBy = function (xs, f) {\n      if (xs.length === 0) {\n        return [];\n      } else {\n        var wasType = f(xs[0]);\n        var r = [];\n        var group = [];\n        for (var i = 0, len = xs.length; i < len; i++) {\n          var x = xs[i];\n          var type = f(x);\n          if (type !== wasType) {\n            r.push(group);\n            group = [];\n          }\n          wasType = type;\n          group.push(x);\n        }\n        if (group.length !== 0) {\n          r.push(group);\n        }\n        return r;\n      }\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var htmlElement = function (scope) {\n      return Global$1.getOrDie('HTMLElement', scope);\n    };\n    var isPrototypeOf = function (x) {\n      var scope = resolve('ownerDocument.defaultView', x);\n      return htmlElement(scope).prototype.isPrototypeOf(x);\n    };\n    var HTMLElement = { isPrototypeOf: isPrototypeOf };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var getParentList = function (editor) {\n      var selectionStart = editor.selection.getStart(true);\n      return editor.dom.getParent(selectionStart, 'OL,UL,DL', getClosestListRootElm(editor, selectionStart));\n    };\n    var isParentListSelected = function (parentList, selectedBlocks) {\n      return parentList && selectedBlocks.length === 1 && selectedBlocks[0] === parentList;\n    };\n    var findSubLists = function (parentList) {\n      return global$5.grep(parentList.querySelectorAll('ol,ul,dl'), function (elm) {\n        return NodeType.isListNode(elm);\n      });\n    };\n    var getSelectedSubLists = function (editor) {\n      var parentList = getParentList(editor);\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      if (isParentListSelected(parentList, selectedBlocks)) {\n        return findSubLists(parentList);\n      } else {\n        return global$5.grep(selectedBlocks, function (elm) {\n          return NodeType.isListNode(elm) && parentList !== elm;\n        });\n      }\n    };\n    var findParentListItemsNodes = function (editor, elms) {\n      var listItemsElms = global$5.map(elms, function (elm) {\n        var parentLi = editor.dom.getParent(elm, 'li,dd,dt', getClosestListRootElm(editor, elm));\n        return parentLi ? parentLi : elm;\n      });\n      return global$7.unique(listItemsElms);\n    };\n    var getSelectedListItems = function (editor) {\n      var selectedBlocks = editor.selection.getSelectedBlocks();\n      return global$5.grep(findParentListItemsNodes(editor, selectedBlocks), function (block) {\n        return NodeType.isListItemNode(block);\n      });\n    };\n    var getSelectedDlItems = function (editor) {\n      return filter(getSelectedListItems(editor), NodeType.isDlItemNode);\n    };\n    var getClosestListRootElm = function (editor, elm) {\n      var parentTableCell = editor.dom.getParents(elm, 'TD,TH');\n      var root = parentTableCell.length > 0 ? parentTableCell[0] : editor.getBody();\n      return root;\n    };\n    var findLastParentListNode = function (editor, elm) {\n      var parentLists = editor.dom.getParents(elm, 'ol,ul', getClosestListRootElm(editor, elm));\n      return last(parentLists);\n    };\n    var getSelectedLists = function (editor) {\n      var firstList = findLastParentListNode(editor, editor.selection.getStart());\n      var subsequentLists = filter(editor.selection.getSelectedBlocks(), NodeType.isOlUlNode);\n      return firstList.toArray().concat(subsequentLists);\n    };\n    var getSelectedListRoots = function (editor) {\n      var selectedLists = getSelectedLists(editor);\n      return getUniqueListRoots(editor, selectedLists);\n    };\n    var getUniqueListRoots = function (editor, lists) {\n      var listRoots = map(lists, function (list) {\n        return findLastParentListNode(editor, list).getOr(list);\n      });\n      return global$7.unique(listRoots);\n    };\n    var isList = function (editor) {\n      var list = getParentList(editor);\n      return HTMLElement.isPrototypeOf(list);\n    };\n    var Selection = {\n      isList: isList,\n      getParentList: getParentList,\n      getSelectedSubLists: getSelectedSubLists,\n      getSelectedListItems: getSelectedListItems,\n      getClosestListRootElm: getClosestListRootElm,\n      getSelectedDlItems: getSelectedDlItems,\n      getSelectedListRoots: getSelectedListRoots\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var liftN = function (arr, f) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(f.apply(null, r));\n    };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var ELEMENT$1 = ELEMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var remove = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var set = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var mutate = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      before(original, nu);\n      var children$1 = children(original);\n      append$1(nu, children$1);\n      remove(original);\n      return nu;\n    };\n\n    var joinSegment = function (parent, child) {\n      append(parent.item, child.list);\n    };\n    var joinSegments = function (segments) {\n      for (var i = 1; i < segments.length; i++) {\n        joinSegment(segments[i - 1], segments[i]);\n      }\n    };\n    var appendSegments = function (head$1, tail) {\n      liftN([\n        last(head$1),\n        head(tail)\n      ], joinSegment);\n    };\n    var createSegment = function (scope, listType) {\n      var segment = {\n        list: Element.fromTag(listType, scope),\n        item: Element.fromTag('li', scope)\n      };\n      append(segment.list, segment.item);\n      return segment;\n    };\n    var createSegments = function (scope, entry, size) {\n      var segments = [];\n      for (var i = 0; i < size; i++) {\n        segments.push(createSegment(scope, entry.listType));\n      }\n      return segments;\n    };\n    var populateSegments = function (segments, entry) {\n      for (var i = 0; i < segments.length - 1; i++) {\n        set(segments[i].item, 'list-style-type', 'none');\n      }\n      last(segments).each(function (segment) {\n        setAll(segment.list, entry.listAttributes);\n        setAll(segment.item, entry.itemAttributes);\n        append$1(segment.item, entry.content);\n      });\n    };\n    var normalizeSegment = function (segment, entry) {\n      if (name(segment.list) !== entry.listType) {\n        segment.list = mutate(segment.list, entry.listType);\n      }\n      setAll(segment.list, entry.listAttributes);\n    };\n    var createItem = function (scope, attr, content) {\n      var item = Element.fromTag('li', scope);\n      setAll(item, attr);\n      append$1(item, content);\n      return item;\n    };\n    var appendItem = function (segment, item) {\n      append(segment.list, item);\n      segment.item = item;\n    };\n    var writeShallow = function (scope, cast, entry) {\n      var newCast = cast.slice(0, entry.depth);\n      last(newCast).each(function (segment) {\n        var item = createItem(scope, entry.itemAttributes, entry.content);\n        appendItem(segment, item);\n        normalizeSegment(segment, entry);\n      });\n      return newCast;\n    };\n    var writeDeep = function (scope, cast, entry) {\n      var segments = createSegments(scope, entry, entry.depth - cast.length);\n      joinSegments(segments);\n      populateSegments(segments, entry);\n      appendSegments(cast, segments);\n      return cast.concat(segments);\n    };\n    var composeList = function (scope, entries) {\n      var cast = foldl(entries, function (cast, entry) {\n        return entry.depth > cast.length ? writeDeep(scope, cast, entry) : writeShallow(scope, cast, entry);\n      }, []);\n      return head(cast).map(function (segment) {\n        return segment.list;\n      });\n    };\n\n    var isList$1 = function (el) {\n      return is$1(el, 'OL,UL');\n    };\n    var hasFirstChildList = function (el) {\n      return firstChild(el).map(isList$1).getOr(false);\n    };\n    var hasLastChildList = function (el) {\n      return lastChild(el).map(isList$1).getOr(false);\n    };\n\n    var isIndented = function (entry) {\n      return entry.depth > 0;\n    };\n    var isSelected = function (entry) {\n      return entry.isSelected;\n    };\n    var cloneItemContent = function (li) {\n      var children$1 = children(li);\n      var content = hasLastChildList(li) ? children$1.slice(0, -1) : children$1;\n      return map(content, deep);\n    };\n    var createEntry = function (li, depth, isSelected) {\n      return parent(li).filter(isElement).map(function (list) {\n        return {\n          depth: depth,\n          isSelected: isSelected,\n          content: cloneItemContent(li),\n          itemAttributes: clone(li),\n          listAttributes: clone(list),\n          listType: name(list)\n        };\n      });\n    };\n\n    var indentEntry = function (indentation, entry) {\n      switch (indentation) {\n      case 'Indent':\n        entry.depth++;\n        break;\n      case 'Outdent':\n        entry.depth--;\n        break;\n      case 'Flatten':\n        entry.depth = 0;\n      }\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var cloneListProperties = function (target, source) {\n      target.listType = source.listType;\n      target.listAttributes = merge({}, source.listAttributes);\n    };\n    var previousSiblingEntry = function (entries, start) {\n      var depth = entries[start].depth;\n      for (var i = start - 1; i >= 0; i--) {\n        if (entries[i].depth === depth) {\n          return Option.some(entries[i]);\n        }\n        if (entries[i].depth < depth) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var normalizeEntries = function (entries) {\n      each(entries, function (entry, i) {\n        previousSiblingEntry(entries, i).each(function (matchingEntry) {\n          cloneListProperties(entry, matchingEntry);\n        });\n      });\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var parseItem = function (depth, itemSelection, selectionState, item) {\n      return firstChild(item).filter(isList$1).fold(function () {\n        itemSelection.each(function (selection) {\n          if (eq(selection.start, item)) {\n            selectionState.set(true);\n          }\n        });\n        var currentItemEntry = createEntry(item, depth, selectionState.get());\n        itemSelection.each(function (selection) {\n          if (eq(selection.end, item)) {\n            selectionState.set(false);\n          }\n        });\n        var childListEntries = lastChild(item).filter(isList$1).map(function (list) {\n          return parseList(depth, itemSelection, selectionState, list);\n        }).getOr([]);\n        return currentItemEntry.toArray().concat(childListEntries);\n      }, function (list) {\n        return parseList(depth, itemSelection, selectionState, list);\n      });\n    };\n    var parseList = function (depth, itemSelection, selectionState, list) {\n      return bind(children(list), function (element) {\n        var parser = isList$1(element) ? parseList : parseItem;\n        var newDepth = depth + 1;\n        return parser(newDepth, itemSelection, selectionState, element);\n      });\n    };\n    var parseLists = function (lists, itemSelection) {\n      var selectionState = Cell(false);\n      var initialDepth = 0;\n      return map(lists, function (list) {\n        return {\n          sourceList: list,\n          entries: parseList(initialDepth, itemSelection, selectionState, list)\n        };\n      });\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var createTextBlock = function (editor, contentNode) {\n      var dom = editor.dom;\n      var blockElements = editor.schema.getBlockElements();\n      var fragment = dom.createFragment();\n      var node, textBlock, blockName, hasContentNode;\n      if (editor.settings.forced_root_block) {\n        blockName = editor.settings.forced_root_block;\n      }\n      if (blockName) {\n        textBlock = dom.create(blockName);\n        if (textBlock.tagName === editor.settings.forced_root_block) {\n          dom.setAttribs(textBlock, editor.settings.forced_root_block_attrs);\n        }\n        if (!NodeType.isBlock(contentNode.firstChild, blockElements)) {\n          fragment.appendChild(textBlock);\n        }\n      }\n      if (contentNode) {\n        while (node = contentNode.firstChild) {\n          var nodeName = node.nodeName;\n          if (!hasContentNode && (nodeName !== 'SPAN' || node.getAttribute('data-mce-type') !== 'bookmark')) {\n            hasContentNode = true;\n          }\n          if (NodeType.isBlock(node, blockElements)) {\n            fragment.appendChild(node);\n            textBlock = null;\n          } else {\n            if (blockName) {\n              if (!textBlock) {\n                textBlock = dom.create(blockName);\n                fragment.appendChild(textBlock);\n              }\n              textBlock.appendChild(node);\n            } else {\n              fragment.appendChild(node);\n            }\n          }\n        }\n      }\n      if (!editor.settings.forced_root_block) {\n        fragment.appendChild(dom.create('br'));\n      } else {\n        if (!hasContentNode && (!global$8.ie || global$8.ie > 10)) {\n          textBlock.appendChild(dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      return fragment;\n    };\n\n    var outdentedComposer = function (editor, entries) {\n      return map(entries, function (entry) {\n        var content = fromElements(entry.content);\n        return Element.fromDom(createTextBlock(editor, content.dom()));\n      });\n    };\n    var indentedComposer = function (editor, entries) {\n      normalizeEntries(entries);\n      return composeList(editor.contentDocument, entries).toArray();\n    };\n    var composeEntries = function (editor, entries) {\n      return bind(groupBy(entries, isIndented), function (entries) {\n        var groupIsIndented = head(entries).map(isIndented).getOr(false);\n        return groupIsIndented ? indentedComposer(editor, entries) : outdentedComposer(editor, entries);\n      });\n    };\n    var indentSelectedEntries = function (entries, indentation) {\n      each(filter(entries, isSelected), function (entry) {\n        return indentEntry(indentation, entry);\n      });\n    };\n    var getItemSelection = function (editor) {\n      var selectedListItems = map(Selection.getSelectedListItems(editor), Element.fromDom);\n      return liftN([\n        find(selectedListItems, not(hasFirstChildList)),\n        find(reverse(selectedListItems), not(hasFirstChildList))\n      ], function (start, end) {\n        return {\n          start: start,\n          end: end\n        };\n      });\n    };\n    var listsIndentation = function (editor, lists, indentation) {\n      var entrySets = parseLists(lists, getItemSelection(editor));\n      each(entrySets, function (entrySet) {\n        indentSelectedEntries(entrySet.entries, indentation);\n        before$1(entrySet.sourceList, composeEntries(editor, entrySet.entries));\n        remove(entrySet.sourceList);\n      });\n    };\n\n    var DOM$1 = global$6.DOM;\n    var splitList = function (editor, ul, li) {\n      var tmpRng, fragment, bookmarks, node, newBlock;\n      var removeAndKeepBookmarks = function (targetNode) {\n        global$5.each(bookmarks, function (node) {\n          targetNode.parentNode.insertBefore(node, li.parentNode);\n        });\n        DOM$1.remove(targetNode);\n      };\n      bookmarks = DOM$1.select('span[data-mce-type=\"bookmark\"]', ul);\n      newBlock = createTextBlock(editor, li);\n      tmpRng = DOM$1.createRng();\n      tmpRng.setStartAfter(li);\n      tmpRng.setEndAfter(ul);\n      fragment = tmpRng.extractContents();\n      for (node = fragment.firstChild; node; node = node.firstChild) {\n        if (node.nodeName === 'LI' && editor.dom.isEmpty(node)) {\n          DOM$1.remove(node);\n          break;\n        }\n      }\n      if (!editor.dom.isEmpty(fragment)) {\n        DOM$1.insertAfter(fragment, ul);\n      }\n      DOM$1.insertAfter(newBlock, ul);\n      if (NodeType.isEmpty(editor.dom, li.parentNode)) {\n        removeAndKeepBookmarks(li.parentNode);\n      }\n      DOM$1.remove(li);\n      if (NodeType.isEmpty(editor.dom, ul)) {\n        DOM$1.remove(ul);\n      }\n    };\n    var SplitList = { splitList: splitList };\n\n    var outdentDlItem = function (editor, item) {\n      if (is$1(item, 'dd')) {\n        mutate(item, 'dt');\n      } else if (is$1(item, 'dt')) {\n        parent(item).each(function (dl) {\n          return SplitList.splitList(editor, dl.dom(), item.dom());\n        });\n      }\n    };\n    var indentDlItem = function (item) {\n      if (is$1(item, 'dt')) {\n        mutate(item, 'dd');\n      }\n    };\n    var dlIndentation = function (editor, indentation, dlItems) {\n      if (indentation === 'Indent') {\n        each(dlItems, indentDlItem);\n      } else {\n        each(dlItems, function (item) {\n          return outdentDlItem(editor, item);\n        });\n      }\n    };\n\n    var selectionIndentation = function (editor, indentation) {\n      var lists = map(Selection.getSelectedListRoots(editor), Element.fromDom);\n      var dlItems = map(Selection.getSelectedDlItems(editor), Element.fromDom);\n      var isHandled = false;\n      if (lists.length || dlItems.length) {\n        var bookmark = editor.selection.getBookmark();\n        listsIndentation(editor, lists, indentation);\n        dlIndentation(editor, indentation, dlItems);\n        editor.selection.moveToBookmark(bookmark);\n        editor.selection.setRng(Range.normalizeRange(editor.selection.getRng()));\n        editor.nodeChanged();\n        isHandled = true;\n      }\n      return isHandled;\n    };\n    var indentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Indent');\n    };\n    var outdentListSelection = function (editor) {\n      return selectionIndentation(editor, 'Outdent');\n    };\n    var flattenListSelection = function (editor) {\n      return selectionIndentation(editor, 'Flatten');\n    };\n\n    var updateListStyle = function (dom, el, detail) {\n      var type = detail['list-style-type'] ? detail['list-style-type'] : null;\n      dom.setStyle(el, 'list-style-type', type);\n    };\n    var setAttribs = function (elm, attrs) {\n      global$5.each(attrs, function (value, key) {\n        elm.setAttribute(key, value);\n      });\n    };\n    var updateListAttrs = function (dom, el, detail) {\n      setAttribs(el, detail['list-attributes']);\n      global$5.each(dom.select('li', el), function (li) {\n        setAttribs(li, detail['list-item-attributes']);\n      });\n    };\n    var updateListWithDetails = function (dom, el, detail) {\n      updateListStyle(dom, el, detail);\n      updateListAttrs(dom, el, detail);\n    };\n    var removeStyles = function (dom, element, styles) {\n      global$5.each(styles, function (style) {\n        var _a;\n        return dom.setStyle(element, (_a = {}, _a[style] = '', _a));\n      });\n    };\n    var getEndPointNode = function (editor, rng, start, root) {\n      var container, offset;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (container.nodeType === 1) {\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n      }\n      if (!start && NodeType.isBr(container.nextSibling)) {\n        container = container.nextSibling;\n      }\n      while (container.parentNode !== root) {\n        if (NodeType.isTextBlock(editor, container)) {\n          return container;\n        }\n        if (/^(TD|TH)$/.test(container.parentNode.nodeName)) {\n          return container;\n        }\n        container = container.parentNode;\n      }\n      return container;\n    };\n    var getSelectedTextBlocks = function (editor, rng, root) {\n      var textBlocks = [], dom = editor.dom;\n      var startNode = getEndPointNode(editor, rng, true, root);\n      var endNode = getEndPointNode(editor, rng, false, root);\n      var block;\n      var siblings = [];\n      for (var node = startNode; node; node = node.nextSibling) {\n        siblings.push(node);\n        if (node === endNode) {\n          break;\n        }\n      }\n      global$5.each(siblings, function (node) {\n        if (NodeType.isTextBlock(editor, node)) {\n          textBlocks.push(node);\n          block = null;\n          return;\n        }\n        if (dom.isBlock(node) || NodeType.isBr(node)) {\n          if (NodeType.isBr(node)) {\n            dom.remove(node);\n          }\n          block = null;\n          return;\n        }\n        var nextSibling = node.nextSibling;\n        if (global$4.isBookmarkNode(node)) {\n          if (NodeType.isTextBlock(editor, nextSibling) || !nextSibling && node.parentNode === root) {\n            block = null;\n            return;\n          }\n        }\n        if (!block) {\n          block = dom.create('p');\n          node.parentNode.insertBefore(block, node);\n          textBlocks.push(block);\n        }\n        block.appendChild(node);\n      });\n      return textBlocks;\n    };\n    var hasCompatibleStyle = function (dom, sib, detail) {\n      var sibStyle = dom.getStyle(sib, 'list-style-type');\n      var detailStyle = detail ? detail['list-style-type'] : '';\n      detailStyle = detailStyle === null ? '' : detailStyle;\n      return sibStyle === detailStyle;\n    };\n    var applyList = function (editor, listName, detail) {\n      if (detail === void 0) {\n        detail = {};\n      }\n      var rng = editor.selection.getRng(true);\n      var bookmark;\n      var listItemName = 'LI';\n      var root = Selection.getClosestListRootElm(editor, editor.selection.getStart(true));\n      var dom = editor.dom;\n      if (dom.getContentEditable(editor.selection.getNode()) === 'false') {\n        return;\n      }\n      listName = listName.toUpperCase();\n      if (listName === 'DL') {\n        listItemName = 'DT';\n      }\n      bookmark = Bookmark.createBookmark(rng);\n      global$5.each(getSelectedTextBlocks(editor, rng, root), function (block) {\n        var listBlock, sibling;\n        sibling = block.previousSibling;\n        if (sibling && NodeType.isListNode(sibling) && sibling.nodeName === listName && hasCompatibleStyle(dom, sibling, detail)) {\n          listBlock = sibling;\n          block = dom.rename(block, listItemName);\n          sibling.appendChild(block);\n        } else {\n          listBlock = dom.create(listName);\n          block.parentNode.insertBefore(listBlock, block);\n          listBlock.appendChild(block);\n          block = dom.rename(block, listItemName);\n        }\n        removeStyles(dom, block, [\n          'margin',\n          'margin-right',\n          'margin-bottom',\n          'margin-left',\n          'margin-top',\n          'padding',\n          'padding-right',\n          'padding-bottom',\n          'padding-left',\n          'padding-top'\n        ]);\n        updateListWithDetails(dom, listBlock, detail);\n        mergeWithAdjacentLists(editor.dom, listBlock);\n      });\n      editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n    };\n    var isValidLists = function (list1, list2) {\n      return list1 && list2 && NodeType.isListNode(list1) && list1.nodeName === list2.nodeName;\n    };\n    var hasSameListStyle = function (dom, list1, list2) {\n      var targetStyle = dom.getStyle(list1, 'list-style-type', true);\n      var style = dom.getStyle(list2, 'list-style-type', true);\n      return targetStyle === style;\n    };\n    var hasSameClasses = function (elm1, elm2) {\n      return elm1.className === elm2.className;\n    };\n    var shouldMerge = function (dom, list1, list2) {\n      return isValidLists(list1, list2) && hasSameListStyle(dom, list1, list2) && hasSameClasses(list1, list2);\n    };\n    var mergeWithAdjacentLists = function (dom, listBlock) {\n      var sibling, node;\n      sibling = listBlock.nextSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.firstChild) {\n          listBlock.appendChild(node);\n        }\n        dom.remove(sibling);\n      }\n      sibling = listBlock.previousSibling;\n      if (shouldMerge(dom, listBlock, sibling)) {\n        while (node = sibling.lastChild) {\n          listBlock.insertBefore(node, listBlock.firstChild);\n        }\n        dom.remove(sibling);\n      }\n    };\n    var updateList = function (dom, list, listName, detail) {\n      if (list.nodeName !== listName) {\n        var newList = dom.rename(list, listName);\n        updateListWithDetails(dom, newList, detail);\n      } else {\n        updateListWithDetails(dom, list, detail);\n      }\n    };\n    var toggleMultipleLists = function (editor, parentList, lists, listName, detail) {\n      if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n        flattenListSelection(editor);\n      } else {\n        var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n        global$5.each([parentList].concat(lists), function (elm) {\n          updateList(editor.dom, elm, listName, detail);\n        });\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var hasListStyleDetail = function (detail) {\n      return 'list-style-type' in detail;\n    };\n    var toggleSingleList = function (editor, parentList, listName, detail) {\n      if (parentList === editor.getBody()) {\n        return;\n      }\n      if (parentList) {\n        if (parentList.nodeName === listName && !hasListStyleDetail(detail)) {\n          flattenListSelection(editor);\n        } else {\n          var bookmark = Bookmark.createBookmark(editor.selection.getRng(true));\n          updateListWithDetails(editor.dom, parentList, detail);\n          mergeWithAdjacentLists(editor.dom, editor.dom.rename(parentList, listName));\n          editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n        }\n      } else {\n        applyList(editor, listName, detail);\n      }\n    };\n    var toggleList = function (editor, listName, detail) {\n      var parentList = Selection.getParentList(editor);\n      var selectedSubLists = Selection.getSelectedSubLists(editor);\n      detail = detail ? detail : {};\n      if (parentList && selectedSubLists.length > 0) {\n        toggleMultipleLists(editor, parentList, selectedSubLists, listName, detail);\n      } else {\n        toggleSingleList(editor, parentList, listName, detail);\n      }\n    };\n    var ToggleList = {\n      toggleList: toggleList,\n      mergeWithAdjacentLists: mergeWithAdjacentLists\n    };\n\n    var DOM$2 = global$6.DOM;\n    var normalizeList = function (dom, ul) {\n      var sibling;\n      var parentNode = ul.parentNode;\n      if (parentNode.nodeName === 'LI' && parentNode.firstChild === ul) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n          if (NodeType.isEmpty(dom, parentNode)) {\n            DOM$2.remove(parentNode);\n          }\n        } else {\n          DOM$2.setStyle(parentNode, 'listStyleType', 'none');\n        }\n      }\n      if (NodeType.isListNode(parentNode)) {\n        sibling = parentNode.previousSibling;\n        if (sibling && sibling.nodeName === 'LI') {\n          sibling.appendChild(ul);\n        }\n      }\n    };\n    var normalizeLists = function (dom, element) {\n      global$5.each(global$5.grep(dom.select('ol,ul', element)), function (ul) {\n        normalizeList(dom, ul);\n      });\n    };\n    var NormalizeLists = {\n      normalizeList: normalizeList,\n      normalizeLists: normalizeLists\n    };\n\n    var findNextCaretContainer = function (editor, rng, isForward, root) {\n      var node = rng.startContainer;\n      var offset = rng.startOffset;\n      var nonEmptyBlocks, walker;\n      if (node.nodeType === 3 && (isForward ? offset < node.data.length : offset > 0)) {\n        return node;\n      }\n      nonEmptyBlocks = editor.schema.getNonEmptyElements();\n      if (node.nodeType === 1) {\n        node = global$1.getNode(node, offset);\n      }\n      walker = new global$2(node, root);\n      if (isForward) {\n        if (NodeType.isBogusBr(editor.dom, node)) {\n          walker.next();\n        }\n      }\n      while (node = walker[isForward ? 'next' : 'prev2']()) {\n        if (node.nodeName === 'LI' && !node.hasChildNodes()) {\n          return node;\n        }\n        if (nonEmptyBlocks[node.nodeName]) {\n          return node;\n        }\n        if (node.nodeType === 3 && node.data.length > 0) {\n          return node;\n        }\n      }\n    };\n    var hasOnlyOneBlockChild = function (dom, elm) {\n      var childNodes = elm.childNodes;\n      return childNodes.length === 1 && !NodeType.isListNode(childNodes[0]) && dom.isBlock(childNodes[0]);\n    };\n    var unwrapSingleBlockChild = function (dom, elm) {\n      if (hasOnlyOneBlockChild(dom, elm)) {\n        dom.remove(elm.firstChild, true);\n      }\n    };\n    var moveChildren = function (dom, fromElm, toElm) {\n      var node, targetElm;\n      targetElm = hasOnlyOneBlockChild(dom, toElm) ? toElm.firstChild : toElm;\n      unwrapSingleBlockChild(dom, fromElm);\n      if (!NodeType.isEmpty(dom, fromElm, true)) {\n        while (node = fromElm.firstChild) {\n          targetElm.appendChild(node);\n        }\n      }\n    };\n    var mergeLiElements = function (dom, fromElm, toElm) {\n      var node, listNode;\n      var ul = fromElm.parentNode;\n      if (!NodeType.isChildOfBody(dom, fromElm) || !NodeType.isChildOfBody(dom, toElm)) {\n        return;\n      }\n      if (NodeType.isListNode(toElm.lastChild)) {\n        listNode = toElm.lastChild;\n      }\n      if (ul === toElm.lastChild) {\n        if (NodeType.isBr(ul.previousSibling)) {\n          dom.remove(ul.previousSibling);\n        }\n      }\n      node = toElm.lastChild;\n      if (node && NodeType.isBr(node) && fromElm.hasChildNodes()) {\n        dom.remove(node);\n      }\n      if (NodeType.isEmpty(dom, toElm, true)) {\n        dom.$(toElm).empty();\n      }\n      moveChildren(dom, fromElm, toElm);\n      if (listNode) {\n        toElm.appendChild(listNode);\n      }\n      var contains = contains$1(Element.fromDom(toElm), Element.fromDom(fromElm));\n      var nestedLists = contains ? dom.getParents(fromElm, NodeType.isListNode, toElm) : [];\n      dom.remove(fromElm);\n      each(nestedLists, function (list) {\n        if (NodeType.isEmpty(dom, list) && list !== dom.getRoot()) {\n          dom.remove(list);\n        }\n      });\n    };\n    var mergeIntoEmptyLi = function (editor, fromLi, toLi) {\n      editor.dom.$(toLi).empty();\n      mergeLiElements(editor.dom, fromLi, toLi);\n      editor.selection.setCursorLocation(toLi);\n    };\n    var mergeForward = function (editor, rng, fromLi, toLi) {\n      var dom = editor.dom;\n      if (dom.isEmpty(toLi)) {\n        mergeIntoEmptyLi(editor, fromLi, toLi);\n      } else {\n        var bookmark = Bookmark.createBookmark(rng);\n        mergeLiElements(dom, fromLi, toLi);\n        editor.selection.setRng(Bookmark.resolveBookmark(bookmark));\n      }\n    };\n    var mergeBackward = function (editor, rng, fromLi, toLi) {\n      var bookmark = Bookmark.createBookmark(rng);\n      mergeLiElements(editor.dom, fromLi, toLi);\n      var resolvedBookmark = Bookmark.resolveBookmark(bookmark);\n      editor.selection.setRng(resolvedBookmark);\n    };\n    var backspaceDeleteFromListToListCaret = function (editor, isForward) {\n      var dom = editor.dom, selection = editor.selection;\n      var selectionStartElm = selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var li = dom.getParent(selection.getStart(), 'LI', root);\n      var ul, rng, otherLi;\n      if (li) {\n        ul = li.parentNode;\n        if (ul === editor.getBody() && NodeType.isEmpty(dom, ul)) {\n          return true;\n        }\n        rng = Range.normalizeRange(selection.getRng(true));\n        otherLi = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi && otherLi !== li) {\n          if (isForward) {\n            mergeForward(editor, rng, otherLi, li);\n          } else {\n            mergeBackward(editor, rng, li, otherLi);\n          }\n          return true;\n        } else if (!otherLi) {\n          if (!isForward) {\n            flattenListSelection(editor);\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var removeBlock = function (dom, block, root) {\n      var parentBlock = dom.getParent(block.parentNode, dom.isBlock, root);\n      dom.remove(block);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        dom.remove(parentBlock);\n      }\n    };\n    var backspaceDeleteIntoListCaret = function (editor, isForward) {\n      var dom = editor.dom;\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var block = dom.getParent(selectionStartElm, dom.isBlock, root);\n      if (block && dom.isEmpty(block)) {\n        var rng = Range.normalizeRange(editor.selection.getRng(true));\n        var otherLi_1 = dom.getParent(findNextCaretContainer(editor, rng, isForward, root), 'LI', root);\n        if (otherLi_1) {\n          editor.undoManager.transact(function () {\n            removeBlock(dom, block, root);\n            ToggleList.mergeWithAdjacentLists(dom, otherLi_1.parentNode);\n            editor.selection.select(otherLi_1, true);\n            editor.selection.collapse(isForward);\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var backspaceDeleteCaret = function (editor, isForward) {\n      return backspaceDeleteFromListToListCaret(editor, isForward) || backspaceDeleteIntoListCaret(editor, isForward);\n    };\n    var backspaceDeleteRange = function (editor) {\n      var selectionStartElm = editor.selection.getStart();\n      var root = Selection.getClosestListRootElm(editor, selectionStartElm);\n      var startListParent = editor.dom.getParent(selectionStartElm, 'LI,DT,DD', root);\n      if (startListParent || Selection.getSelectedListItems(editor).length > 0) {\n        editor.undoManager.transact(function () {\n          editor.execCommand('Delete');\n          NormalizeLists.normalizeLists(editor.dom, editor.getBody());\n        });\n        return true;\n      }\n      return false;\n    };\n    var backspaceDelete = function (editor, isForward) {\n      return editor.selection.isCollapsed() ? backspaceDeleteCaret(editor, isForward) : backspaceDeleteRange(editor);\n    };\n    var setup = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode === global$3.BACKSPACE) {\n          if (backspaceDelete(editor, false)) {\n            e.preventDefault();\n          }\n        } else if (e.keyCode === global$3.DELETE) {\n          if (backspaceDelete(editor, true)) {\n            e.preventDefault();\n          }\n        }\n      });\n    };\n    var Delete = {\n      setup: setup,\n      backspaceDelete: backspaceDelete\n    };\n\n    var get = function (editor) {\n      return {\n        backspaceDelete: function (isForward) {\n          Delete.backspaceDelete(editor, isForward);\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var queryListCommandState = function (editor, listName) {\n      return function () {\n        var parentList = editor.dom.getParent(editor.selection.getStart(), 'UL,OL,DL');\n        return parentList && parentList.nodeName === listName;\n      };\n    };\n    var register = function (editor) {\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command.toLowerCase();\n        if (cmd === 'indent') {\n          indentListSelection(editor);\n        } else if (cmd === 'outdent') {\n          outdentListSelection(editor);\n        }\n      });\n      editor.addCommand('InsertUnorderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'UL', detail);\n      });\n      editor.addCommand('InsertOrderedList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'OL', detail);\n      });\n      editor.addCommand('InsertDefinitionList', function (ui, detail) {\n        ToggleList.toggleList(editor, 'DL', detail);\n      });\n      editor.addCommand('RemoveList', function () {\n        flattenListSelection(editor);\n      });\n      editor.addQueryStateHandler('InsertUnorderedList', queryListCommandState(editor, 'UL'));\n      editor.addQueryStateHandler('InsertOrderedList', queryListCommandState(editor, 'OL'));\n      editor.addQueryStateHandler('InsertDefinitionList', queryListCommandState(editor, 'DL'));\n    };\n    var Commands = { register: register };\n\n    var shouldIndentOnTab = function (editor) {\n      return editor.getParam('lists_indent_on_tab', true);\n    };\n    var Settings = { shouldIndentOnTab: shouldIndentOnTab };\n\n    var setupTabKey = function (editor) {\n      editor.on('keydown', function (e) {\n        if (e.keyCode !== global$3.TAB || global$3.metaKeyPressed(e)) {\n          return;\n        }\n        editor.undoManager.transact(function () {\n          if (e.shiftKey ? outdentListSelection(editor) : indentListSelection(editor)) {\n            e.preventDefault();\n          }\n        });\n      });\n    };\n    var setup$1 = function (editor) {\n      if (Settings.shouldIndentOnTab(editor)) {\n        setupTabKey(editor);\n      }\n      Delete.setup(editor);\n    };\n    var Keyboard = { setup: setup$1 };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, NodeType.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$5.grep(parents, NodeType.isListNode);\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$5.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      if (!hasPlugin(editor, 'advlist')) {\n        editor.addButton('numlist', {\n          active: false,\n          title: 'Numbered list',\n          cmd: 'InsertOrderedList',\n          onPostRender: listState(editor, 'OL')\n        });\n        editor.addButton('bullist', {\n          active: false,\n          title: 'Bullet list',\n          cmd: 'InsertUnorderedList',\n          onPostRender: listState(editor, 'UL')\n        });\n      }\n      editor.addButton('indent', {\n        icon: 'indent',\n        title: 'Increase indent',\n        cmd: 'Indent'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('lists', function (editor) {\n      Keyboard.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n      return Api.get(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar autolink = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getAutoLinkPattern = function (editor) {\n      return editor.getParam('autolink_pattern', /^(https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.|(?:mailto:)?[A-Z0-9._%+\\-]+@)(.+)$/i);\n    };\n    var getDefaultLinkTarget = function (editor) {\n      return editor.getParam('default_link_target', '');\n    };\n    var Settings = {\n      getAutoLinkPattern: getAutoLinkPattern,\n      getDefaultLinkTarget: getDefaultLinkTarget\n    };\n\n    var rangeEqualsDelimiterOrSpace = function (rangeString, delimiter) {\n      return rangeString === delimiter || rangeString === ' ' || rangeString.charCodeAt(0) === 160;\n    };\n    var handleEclipse = function (editor) {\n      parseCurrentLine(editor, -1, '(');\n    };\n    var handleSpacebar = function (editor) {\n      parseCurrentLine(editor, 0, '');\n    };\n    var handleEnter = function (editor) {\n      parseCurrentLine(editor, -1, '');\n    };\n    var scopeIndex = function (container, index) {\n      if (index < 0) {\n        index = 0;\n      }\n      if (container.nodeType === 3) {\n        var len = container.data.length;\n        if (index > len) {\n          index = len;\n        }\n      }\n      return index;\n    };\n    var setStart = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setStart(container, scopeIndex(container, offset));\n      } else {\n        rng.setStartBefore(container);\n      }\n    };\n    var setEnd = function (rng, container, offset) {\n      if (container.nodeType !== 1 || container.hasChildNodes()) {\n        rng.setEnd(container, scopeIndex(container, offset));\n      } else {\n        rng.setEndAfter(container);\n      }\n    };\n    var parseCurrentLine = function (editor, endOffset, delimiter) {\n      var rng, end, start, endContainer, bookmark, text, matches, prev, len, rngText;\n      var autoLinkPattern = Settings.getAutoLinkPattern(editor);\n      var defaultLinkTarget = Settings.getDefaultLinkTarget(editor);\n      if (editor.selection.getNode().tagName === 'A') {\n        return;\n      }\n      rng = editor.selection.getRng(true).cloneRange();\n      if (rng.startOffset < 5) {\n        prev = rng.endContainer.previousSibling;\n        if (!prev) {\n          if (!rng.endContainer.firstChild || !rng.endContainer.firstChild.nextSibling) {\n            return;\n          }\n          prev = rng.endContainer.firstChild.nextSibling;\n        }\n        len = prev.length;\n        setStart(rng, prev, len);\n        setEnd(rng, prev, len);\n        if (rng.endOffset < 5) {\n          return;\n        }\n        end = rng.endOffset;\n        endContainer = prev;\n      } else {\n        endContainer = rng.endContainer;\n        if (endContainer.nodeType !== 3 && endContainer.firstChild) {\n          while (endContainer.nodeType !== 3 && endContainer.firstChild) {\n            endContainer = endContainer.firstChild;\n          }\n          if (endContainer.nodeType === 3) {\n            setStart(rng, endContainer, 0);\n            setEnd(rng, endContainer, endContainer.nodeValue.length);\n          }\n        }\n        if (rng.endOffset === 1) {\n          end = 2;\n        } else {\n          end = rng.endOffset - 1 - endOffset;\n        }\n      }\n      start = end;\n      do {\n        setStart(rng, endContainer, end >= 2 ? end - 2 : 0);\n        setEnd(rng, endContainer, end >= 1 ? end - 1 : 0);\n        end -= 1;\n        rngText = rng.toString();\n      } while (rngText !== ' ' && rngText !== '' && rngText.charCodeAt(0) !== 160 && end - 2 >= 0 && rngText !== delimiter);\n      if (rangeEqualsDelimiterOrSpace(rng.toString(), delimiter)) {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n        end += 1;\n      } else if (rng.startOffset === 0) {\n        setStart(rng, endContainer, 0);\n        setEnd(rng, endContainer, start);\n      } else {\n        setStart(rng, endContainer, end);\n        setEnd(rng, endContainer, start);\n      }\n      text = rng.toString();\n      if (text.charAt(text.length - 1) === '.') {\n        setEnd(rng, endContainer, start - 1);\n      }\n      text = rng.toString().trim();\n      matches = text.match(autoLinkPattern);\n      if (matches) {\n        if (matches[1] === 'www.') {\n          matches[1] = 'http://www.';\n        } else if (/@$/.test(matches[1]) && !/^mailto:/.test(matches[1])) {\n          matches[1] = 'mailto:' + matches[1];\n        }\n        bookmark = editor.selection.getBookmark();\n        editor.selection.setRng(rng);\n        editor.execCommand('createlink', false, matches[1] + matches[2]);\n        if (defaultLinkTarget) {\n          editor.dom.setAttrib(editor.selection.getNode(), 'target', defaultLinkTarget);\n        }\n        editor.selection.moveToBookmark(bookmark);\n        editor.nodeChanged();\n      }\n    };\n    var setup = function (editor) {\n      var autoUrlDetectState;\n      editor.on('keydown', function (e) {\n        if (e.keyCode === 13) {\n          return handleEnter(editor);\n        }\n      });\n      if (global$1.ie) {\n        editor.on('focus', function () {\n          if (!autoUrlDetectState) {\n            autoUrlDetectState = true;\n            try {\n              editor.execCommand('AutoUrlDetect', false, true);\n            } catch (ex) {\n            }\n          }\n        });\n        return;\n      }\n      editor.on('keypress', function (e) {\n        if (e.keyCode === 41) {\n          return handleEclipse(editor);\n        }\n      });\n      editor.on('keyup', function (e) {\n        if (e.keyCode === 32) {\n          return handleSpacebar(editor);\n        }\n      });\n    };\n    var Keys = { setup: setup };\n\n    global.add('autolink', function (editor) {\n      Keys.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar searchreplace = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    function isContentEditableFalse(node) {\n      return node && node.nodeType === 1 && node.contentEditable === 'false';\n    }\n    function findAndReplaceDOMText(regex, node, replacementNode, captureGroup, schema) {\n      var m;\n      var matches = [];\n      var text, count = 0, doc;\n      var blockElementsMap, hiddenTextElementsMap, shortEndedElementsMap;\n      doc = node.ownerDocument;\n      blockElementsMap = schema.getBlockElements();\n      hiddenTextElementsMap = schema.getWhiteSpaceElements();\n      shortEndedElementsMap = schema.getShortEndedElements();\n      function getMatchIndexes(m, captureGroup) {\n        captureGroup = captureGroup || 0;\n        if (!m[0]) {\n          throw new Error('findAndReplaceDOMText cannot handle zero-length matches');\n        }\n        var index = m.index;\n        if (captureGroup > 0) {\n          var cg = m[captureGroup];\n          if (!cg) {\n            throw new Error('Invalid capture group');\n          }\n          index += m[0].indexOf(cg);\n          m[0] = cg;\n        }\n        return [\n          index,\n          index + m[0].length,\n          [m[0]]\n        ];\n      }\n      function getText(node) {\n        var txt;\n        if (node.nodeType === 3) {\n          return node.data;\n        }\n        if (hiddenTextElementsMap[node.nodeName] && !blockElementsMap[node.nodeName]) {\n          return '';\n        }\n        txt = '';\n        if (isContentEditableFalse(node)) {\n          return '\\n';\n        }\n        if (blockElementsMap[node.nodeName] || shortEndedElementsMap[node.nodeName]) {\n          txt += '\\n';\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.nextSibling);\n        }\n        return txt;\n      }\n      function stepThroughMatches(node, matches, replaceFn) {\n        var startNode, endNode, startNodeIndex, endNodeIndex, innerNodes = [], atIndex = 0, curNode = node, matchLocation = matches.shift(), matchIndex = 0;\n        out:\n          while (true) {\n            if (blockElementsMap[curNode.nodeName] || shortEndedElementsMap[curNode.nodeName] || isContentEditableFalse(curNode)) {\n              atIndex++;\n            }\n            if (curNode.nodeType === 3) {\n              if (!endNode && curNode.length + atIndex >= matchLocation[1]) {\n                endNode = curNode;\n                endNodeIndex = matchLocation[1] - atIndex;\n              } else if (startNode) {\n                innerNodes.push(curNode);\n              }\n              if (!startNode && curNode.length + atIndex > matchLocation[0]) {\n                startNode = curNode;\n                startNodeIndex = matchLocation[0] - atIndex;\n              }\n              atIndex += curNode.length;\n            }\n            if (startNode && endNode) {\n              curNode = replaceFn({\n                startNode: startNode,\n                startNodeIndex: startNodeIndex,\n                endNode: endNode,\n                endNodeIndex: endNodeIndex,\n                innerNodes: innerNodes,\n                match: matchLocation[2],\n                matchIndex: matchIndex\n              });\n              atIndex -= endNode.length - endNodeIndex;\n              startNode = null;\n              endNode = null;\n              innerNodes = [];\n              matchLocation = matches.shift();\n              matchIndex++;\n              if (!matchLocation) {\n                break;\n              }\n            } else if ((!hiddenTextElementsMap[curNode.nodeName] || blockElementsMap[curNode.nodeName]) && curNode.firstChild) {\n              if (!isContentEditableFalse(curNode)) {\n                curNode = curNode.firstChild;\n                continue;\n              }\n            } else if (curNode.nextSibling) {\n              curNode = curNode.nextSibling;\n              continue;\n            }\n            while (true) {\n              if (curNode.nextSibling) {\n                curNode = curNode.nextSibling;\n                break;\n              } else if (curNode.parentNode !== node) {\n                curNode = curNode.parentNode;\n              } else {\n                break out;\n              }\n            }\n          }\n      }\n      function genReplacer(nodeName) {\n        var makeReplacementNode;\n        if (typeof nodeName !== 'function') {\n          var stencilNode_1 = nodeName.nodeType ? nodeName : doc.createElement(nodeName);\n          makeReplacementNode = function (fill, matchIndex) {\n            var clone = stencilNode_1.cloneNode(false);\n            clone.setAttribute('data-mce-index', matchIndex);\n            if (fill) {\n              clone.appendChild(doc.createTextNode(fill));\n            }\n            return clone;\n          };\n        } else {\n          makeReplacementNode = nodeName;\n        }\n        return function (range) {\n          var before;\n          var after;\n          var parentNode;\n          var startNode = range.startNode;\n          var endNode = range.endNode;\n          var matchIndex = range.matchIndex;\n          if (startNode === endNode) {\n            var node_1 = startNode;\n            parentNode = node_1.parentNode;\n            if (range.startNodeIndex > 0) {\n              before = doc.createTextNode(node_1.data.substring(0, range.startNodeIndex));\n              parentNode.insertBefore(before, node_1);\n            }\n            var el = makeReplacementNode(range.match[0], matchIndex);\n            parentNode.insertBefore(el, node_1);\n            if (range.endNodeIndex < node_1.length) {\n              after = doc.createTextNode(node_1.data.substring(range.endNodeIndex));\n              parentNode.insertBefore(after, node_1);\n            }\n            node_1.parentNode.removeChild(node_1);\n            return el;\n          }\n          before = doc.createTextNode(startNode.data.substring(0, range.startNodeIndex));\n          after = doc.createTextNode(endNode.data.substring(range.endNodeIndex));\n          var elA = makeReplacementNode(startNode.data.substring(range.startNodeIndex), matchIndex);\n          for (var i = 0, l = range.innerNodes.length; i < l; ++i) {\n            var innerNode = range.innerNodes[i];\n            var innerEl = makeReplacementNode(innerNode.data, matchIndex);\n            innerNode.parentNode.replaceChild(innerEl, innerNode);\n          }\n          var elB = makeReplacementNode(endNode.data.substring(0, range.endNodeIndex), matchIndex);\n          parentNode = startNode.parentNode;\n          parentNode.insertBefore(before, startNode);\n          parentNode.insertBefore(elA, startNode);\n          parentNode.removeChild(startNode);\n          parentNode = endNode.parentNode;\n          parentNode.insertBefore(elB, endNode);\n          parentNode.insertBefore(after, endNode);\n          parentNode.removeChild(endNode);\n          return elB;\n        };\n      }\n      text = getText(node);\n      if (!text) {\n        return;\n      }\n      if (regex.global) {\n        while (m = regex.exec(text)) {\n          matches.push(getMatchIndexes(m, captureGroup));\n        }\n      } else {\n        m = text.match(regex);\n        matches.push(getMatchIndexes(m, captureGroup));\n      }\n      if (matches.length) {\n        count = matches.length;\n        stepThroughMatches(node, matches, genReplacer(replacementNode));\n      }\n      return count;\n    }\n    var FindReplaceText = { findAndReplaceDOMText: findAndReplaceDOMText };\n\n    var getElmIndex = function (elm) {\n      var value = elm.getAttribute('data-mce-index');\n      if (typeof value === 'number') {\n        return '' + value;\n      }\n      return value;\n    };\n    var markAllMatches = function (editor, currentIndexState, regex) {\n      var node, marker;\n      marker = editor.dom.create('span', { 'data-mce-bogus': 1 });\n      marker.className = 'mce-match-marker';\n      node = editor.getBody();\n      done(editor, currentIndexState, false);\n      return FindReplaceText.findAndReplaceDOMText(regex, node, marker, false, editor.schema);\n    };\n    var unwrap = function (node) {\n      var parentNode = node.parentNode;\n      if (node.firstChild) {\n        parentNode.insertBefore(node.firstChild, node);\n      }\n      node.parentNode.removeChild(node);\n    };\n    var findSpansByIndex = function (editor, index) {\n      var nodes;\n      var spans = [];\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      if (nodes.length) {\n        for (var i = 0; i < nodes.length; i++) {\n          var nodeIndex = getElmIndex(nodes[i]);\n          if (nodeIndex === null || !nodeIndex.length) {\n            continue;\n          }\n          if (nodeIndex === index.toString()) {\n            spans.push(nodes[i]);\n          }\n        }\n      }\n      return spans;\n    };\n    var moveSelection = function (editor, currentIndexState, forward) {\n      var testIndex = currentIndexState.get();\n      var dom = editor.dom;\n      forward = forward !== false;\n      if (forward) {\n        testIndex++;\n      } else {\n        testIndex--;\n      }\n      dom.removeClass(findSpansByIndex(editor, currentIndexState.get()), 'mce-match-marker-selected');\n      var spans = findSpansByIndex(editor, testIndex);\n      if (spans.length) {\n        dom.addClass(findSpansByIndex(editor, testIndex), 'mce-match-marker-selected');\n        editor.selection.scrollIntoView(spans[0]);\n        return testIndex;\n      }\n      return -1;\n    };\n    var removeNode = function (dom, node) {\n      var parent = node.parentNode;\n      dom.remove(node);\n      if (dom.isEmpty(parent)) {\n        dom.remove(parent);\n      }\n    };\n    var find = function (editor, currentIndexState, text, matchCase, wholeWord) {\n      text = text.replace(/[\\-\\[\\]\\/\\{\\}\\(\\)\\*\\+\\?\\.\\\\\\^\\$\\|]/g, '\\\\$&');\n      text = text.replace(/\\s/g, '[^\\\\S\\\\r\\\\n]');\n      text = wholeWord ? '\\\\b' + text + '\\\\b' : text;\n      var count = markAllMatches(editor, currentIndexState, new RegExp(text, matchCase ? 'g' : 'gi'));\n      if (count) {\n        currentIndexState.set(-1);\n        currentIndexState.set(moveSelection(editor, currentIndexState, true));\n      }\n      return count;\n    };\n    var next = function (editor, currentIndexState) {\n      var index = moveSelection(editor, currentIndexState, true);\n      if (index !== -1) {\n        currentIndexState.set(index);\n      }\n    };\n    var prev = function (editor, currentIndexState) {\n      var index = moveSelection(editor, currentIndexState, false);\n      if (index !== -1) {\n        currentIndexState.set(index);\n      }\n    };\n    var isMatchSpan = function (node) {\n      var matchIndex = getElmIndex(node);\n      return matchIndex !== null && matchIndex.length > 0;\n    };\n    var replace = function (editor, currentIndexState, text, forward, all) {\n      var i, nodes, node, matchIndex, currentMatchIndex, nextIndex = currentIndexState.get(), hasMore;\n      forward = forward !== false;\n      node = editor.getBody();\n      nodes = global$1.grep(global$1.toArray(node.getElementsByTagName('span')), isMatchSpan);\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        matchIndex = currentMatchIndex = parseInt(nodeIndex, 10);\n        if (all || matchIndex === currentIndexState.get()) {\n          if (text.length) {\n            nodes[i].firstChild.nodeValue = text;\n            unwrap(nodes[i]);\n          } else {\n            removeNode(editor.dom, nodes[i]);\n          }\n          while (nodes[++i]) {\n            matchIndex = parseInt(getElmIndex(nodes[i]), 10);\n            if (matchIndex === currentMatchIndex) {\n              removeNode(editor.dom, nodes[i]);\n            } else {\n              i--;\n              break;\n            }\n          }\n          if (forward) {\n            nextIndex--;\n          }\n        } else if (currentMatchIndex > currentIndexState.get()) {\n          nodes[i].setAttribute('data-mce-index', currentMatchIndex - 1);\n        }\n      }\n      currentIndexState.set(nextIndex);\n      if (forward) {\n        hasMore = hasNext(editor, currentIndexState);\n        next(editor, currentIndexState);\n      } else {\n        hasMore = hasPrev(editor, currentIndexState);\n        prev(editor, currentIndexState);\n      }\n      return !all && hasMore;\n    };\n    var done = function (editor, currentIndexState, keepEditorSelection) {\n      var i, nodes, startContainer, endContainer;\n      nodes = global$1.toArray(editor.getBody().getElementsByTagName('span'));\n      for (i = 0; i < nodes.length; i++) {\n        var nodeIndex = getElmIndex(nodes[i]);\n        if (nodeIndex !== null && nodeIndex.length) {\n          if (nodeIndex === currentIndexState.get().toString()) {\n            if (!startContainer) {\n              startContainer = nodes[i].firstChild;\n            }\n            endContainer = nodes[i].firstChild;\n          }\n          unwrap(nodes[i]);\n        }\n      }\n      if (startContainer && endContainer) {\n        var rng = editor.dom.createRng();\n        rng.setStart(startContainer, 0);\n        rng.setEnd(endContainer, endContainer.data.length);\n        if (keepEditorSelection !== false) {\n          editor.selection.setRng(rng);\n        }\n        return rng;\n      }\n    };\n    var hasNext = function (editor, currentIndexState) {\n      return findSpansByIndex(editor, currentIndexState.get() + 1).length > 0;\n    };\n    var hasPrev = function (editor, currentIndexState) {\n      return findSpansByIndex(editor, currentIndexState.get() - 1).length > 0;\n    };\n    var Actions = {\n      done: done,\n      find: find,\n      next: next,\n      prev: prev,\n      replace: replace,\n      hasNext: hasNext,\n      hasPrev: hasPrev\n    };\n\n    var get = function (editor, currentIndexState) {\n      var done = function (keepEditorSelection) {\n        return Actions.done(editor, currentIndexState, keepEditorSelection);\n      };\n      var find = function (text, matchCase, wholeWord) {\n        return Actions.find(editor, currentIndexState, text, matchCase, wholeWord);\n      };\n      var next = function () {\n        return Actions.next(editor, currentIndexState);\n      };\n      var prev = function () {\n        return Actions.prev(editor, currentIndexState);\n      };\n      var replace = function (text, forward, all) {\n        return Actions.replace(editor, currentIndexState, text, forward, all);\n      };\n      return {\n        done: done,\n        find: find,\n        next: next,\n        prev: prev,\n        replace: replace\n      };\n    };\n    var Api = { get: get };\n\n    var open = function (editor, currentIndexState) {\n      var last = {}, selectedText;\n      editor.undoManager.add();\n      selectedText = global$1.trim(editor.selection.getContent({ format: 'text' }));\n      function updateButtonStates() {\n        win.statusbar.find('#next').disabled(Actions.hasNext(editor, currentIndexState) === false);\n        win.statusbar.find('#prev').disabled(Actions.hasPrev(editor, currentIndexState) === false);\n      }\n      function notFoundAlert() {\n        editor.windowManager.alert('Could not find the specified string.', function () {\n          win.find('#find')[0].focus();\n        });\n      }\n      var win = editor.windowManager.open({\n        layout: 'flex',\n        pack: 'center',\n        align: 'center',\n        onClose: function () {\n          editor.focus();\n          Actions.done(editor, currentIndexState);\n          editor.undoManager.add();\n        },\n        onSubmit: function (e) {\n          var count, caseState, text, wholeWord;\n          e.preventDefault();\n          caseState = win.find('#case').checked();\n          wholeWord = win.find('#words').checked();\n          text = win.find('#find').value();\n          if (!text.length) {\n            Actions.done(editor, currentIndexState, false);\n            win.statusbar.items().slice(1).disabled(true);\n            return;\n          }\n          if (last.text === text && last.caseState === caseState && last.wholeWord === wholeWord) {\n            if (!Actions.hasNext(editor, currentIndexState)) {\n              notFoundAlert();\n              return;\n            }\n            Actions.next(editor, currentIndexState);\n            updateButtonStates();\n            return;\n          }\n          count = Actions.find(editor, currentIndexState, text, caseState, wholeWord);\n          if (!count) {\n            notFoundAlert();\n          }\n          win.statusbar.items().slice(1).disabled(count === 0);\n          updateButtonStates();\n          last = {\n            text: text,\n            caseState: caseState,\n            wholeWord: wholeWord\n          };\n        },\n        buttons: [\n          {\n            text: 'Find',\n            subtype: 'primary',\n            onclick: function () {\n              win.submit();\n            }\n          },\n          {\n            text: 'Replace',\n            disabled: true,\n            onclick: function () {\n              if (!Actions.replace(editor, currentIndexState, win.find('#replace').value())) {\n                win.statusbar.items().slice(1).disabled(true);\n                currentIndexState.set(-1);\n                last = {};\n              }\n            }\n          },\n          {\n            text: 'Replace all',\n            disabled: true,\n            onclick: function () {\n              Actions.replace(editor, currentIndexState, win.find('#replace').value(), true, true);\n              win.statusbar.items().slice(1).disabled(true);\n              last = {};\n            }\n          },\n          {\n            type: 'spacer',\n            flex: 1\n          },\n          {\n            text: 'Prev',\n            name: 'prev',\n            disabled: true,\n            onclick: function () {\n              Actions.prev(editor, currentIndexState);\n              updateButtonStates();\n            }\n          },\n          {\n            text: 'Next',\n            name: 'next',\n            disabled: true,\n            onclick: function () {\n              Actions.next(editor, currentIndexState);\n              updateButtonStates();\n            }\n          }\n        ],\n        title: 'Find and replace',\n        items: {\n          type: 'form',\n          padding: 20,\n          labelGap: 30,\n          spacing: 10,\n          items: [\n            {\n              type: 'textbox',\n              name: 'find',\n              size: 40,\n              label: 'Find',\n              value: selectedText\n            },\n            {\n              type: 'textbox',\n              name: 'replace',\n              size: 40,\n              label: 'Replace with'\n            },\n            {\n              type: 'checkbox',\n              name: 'case',\n              text: 'Match case',\n              label: ' '\n            },\n            {\n              type: 'checkbox',\n              name: 'words',\n              text: 'Whole words',\n              label: ' '\n            }\n          ]\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor, currentIndexState) {\n      editor.addCommand('SearchReplace', function () {\n        Dialog.open(editor, currentIndexState);\n      });\n    };\n    var Commands = { register: register };\n\n    var showDialog = function (editor, currentIndexState) {\n      return function () {\n        Dialog.open(editor, currentIndexState);\n      };\n    };\n    var register$1 = function (editor, currentIndexState) {\n      editor.addMenuItem('searchreplace', {\n        text: 'Find and replace',\n        shortcut: 'Meta+F',\n        onclick: showDialog(editor, currentIndexState),\n        separator: 'before',\n        context: 'edit'\n      });\n      editor.addButton('searchreplace', {\n        tooltip: 'Find and replace',\n        onclick: showDialog(editor, currentIndexState)\n      });\n      editor.shortcuts.add('Meta+F', '', showDialog(editor, currentIndexState));\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('searchreplace', function (editor) {\n      var currentIndexState = Cell(-1);\n      Commands.register(editor, currentIndexState);\n      Buttons.register(editor, currentIndexState);\n      return Api.get(editor, currentIndexState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar colorpicker = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Color');\n\n    var showPreview = function (win, hexColor) {\n      win.find('#preview')[0].getEl().style.background = hexColor;\n    };\n    var setColor = function (win, value) {\n      var color = global$1(value), rgb = color.toRgb();\n      win.fromJSON({\n        r: rgb.r,\n        g: rgb.g,\n        b: rgb.b,\n        hex: color.toHex().substr(1)\n      });\n      showPreview(win, color.toHex());\n    };\n    var open = function (editor, callback, value) {\n      var win = editor.windowManager.open({\n        title: 'Color',\n        items: {\n          type: 'container',\n          layout: 'flex',\n          direction: 'row',\n          align: 'stretch',\n          padding: 5,\n          spacing: 10,\n          items: [\n            {\n              type: 'colorpicker',\n              value: value,\n              onchange: function () {\n                var rgb = this.rgb();\n                if (win) {\n                  win.find('#r').value(rgb.r);\n                  win.find('#g').value(rgb.g);\n                  win.find('#b').value(rgb.b);\n                  win.find('#hex').value(this.value().substr(1));\n                  showPreview(win, this.value());\n                }\n              }\n            },\n            {\n              type: 'form',\n              padding: 0,\n              labelGap: 5,\n              defaults: {\n                type: 'textbox',\n                size: 7,\n                value: '0',\n                flex: 1,\n                spellcheck: false,\n                onchange: function () {\n                  var colorPickerCtrl = win.find('colorpicker')[0];\n                  var name, value;\n                  name = this.name();\n                  value = this.value();\n                  if (name === 'hex') {\n                    value = '#' + value;\n                    setColor(win, value);\n                    colorPickerCtrl.value(value);\n                    return;\n                  }\n                  value = {\n                    r: win.find('#r').value(),\n                    g: win.find('#g').value(),\n                    b: win.find('#b').value()\n                  };\n                  colorPickerCtrl.value(value);\n                  setColor(win, value);\n                }\n              },\n              items: [\n                {\n                  name: 'r',\n                  label: 'R',\n                  autofocus: 1\n                },\n                {\n                  name: 'g',\n                  label: 'G'\n                },\n                {\n                  name: 'b',\n                  label: 'B'\n                },\n                {\n                  name: 'hex',\n                  label: '#',\n                  value: '000000'\n                },\n                {\n                  name: 'preview',\n                  type: 'container',\n                  border: 1\n                }\n              ]\n            }\n          ]\n        },\n        onSubmit: function () {\n          callback('#' + win.toJSON().hex);\n        }\n      });\n      setColor(win, value);\n    };\n    var Dialog = { open: open };\n\n    global.add('colorpicker', function (editor) {\n      if (!editor.settings.color_picker_callback) {\n        editor.settings.color_picker_callback = function (callback, value) {\n          Dialog.open(editor, callback, value);\n        };\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar visualblocks = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var fireVisualBlocks = function (editor, state) {\n      editor.fire('VisualBlocks', { state: state });\n    };\n    var Events = { fireVisualBlocks: fireVisualBlocks };\n\n    var isEnabledByDefault = function (editor) {\n      return editor.getParam('visualblocks_default_state', false);\n    };\n    var getContentCss = function (editor) {\n      return editor.settings.visualblocks_content_css;\n    };\n    var Settings = {\n      isEnabledByDefault: isEnabledByDefault,\n      getContentCss: getContentCss\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var cssId = global$1.DOM.uniqueId();\n    var load = function (doc, url) {\n      var linkElements = global$2.toArray(doc.getElementsByTagName('link'));\n      var matchingLinkElms = global$2.grep(linkElements, function (head) {\n        return head.id === cssId;\n      });\n      if (matchingLinkElms.length === 0) {\n        var linkElm = global$1.DOM.create('link', {\n          id: cssId,\n          rel: 'stylesheet',\n          href: url\n        });\n        doc.getElementsByTagName('head')[0].appendChild(linkElm);\n      }\n    };\n    var LoadCss = { load: load };\n\n    var toggleVisualBlocks = function (editor, pluginUrl, enabledState) {\n      var dom = editor.dom;\n      var contentCss = Settings.getContentCss(editor);\n      LoadCss.load(editor.getDoc(), contentCss ? contentCss : pluginUrl + '/css/visualblocks.css');\n      dom.toggleClass(editor.getBody(), 'mce-visualblocks');\n      enabledState.set(!enabledState.get());\n      Events.fireVisualBlocks(editor, enabledState.get());\n    };\n    var VisualBlocks = { toggleVisualBlocks: toggleVisualBlocks };\n\n    var register = function (editor, pluginUrl, enabledState) {\n      editor.addCommand('mceVisualBlocks', function () {\n        VisualBlocks.toggleVisualBlocks(editor, pluginUrl, enabledState);\n      });\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor, pluginUrl, enabledState) {\n      editor.on('PreviewFormats AfterPreviewFormats', function (e) {\n        if (enabledState.get()) {\n          editor.dom.toggleClass(editor.getBody(), 'mce-visualblocks', e.type === 'afterpreviewformats');\n        }\n      });\n      editor.on('init', function () {\n        if (Settings.isEnabledByDefault(editor)) {\n          VisualBlocks.toggleVisualBlocks(editor, pluginUrl, enabledState);\n        }\n      });\n      editor.on('remove', function () {\n        editor.dom.removeClass(editor.getBody(), 'mce-visualblocks');\n      });\n    };\n    var Bindings = { setup: setup };\n\n    var toggleActiveState = function (editor, enabledState) {\n      return function (e) {\n        var ctrl = e.control;\n        ctrl.active(enabledState.get());\n        editor.on('VisualBlocks', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor, enabledState) {\n      editor.addButton('visualblocks', {\n        active: false,\n        title: 'Show blocks',\n        cmd: 'mceVisualBlocks',\n        onPostRender: toggleActiveState(editor, enabledState)\n      });\n      editor.addMenuItem('visualblocks', {\n        text: 'Show blocks',\n        cmd: 'mceVisualBlocks',\n        onPostRender: toggleActiveState(editor, enabledState),\n        selectable: true,\n        context: 'view',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('visualblocks', function (editor, pluginUrl) {\n      var enabledState = Cell(false);\n      Commands.register(editor, pluginUrl, enabledState);\n      Buttons.register(editor, enabledState);\n      Bindings.setup(editor, pluginUrl, enabledState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"m-tinymce\"},[_c('textarea',{attrs:{\"id\":_vm.id}}),_c('input',{ref:\"imgFile\",attrs:{\"type\":\"file\",\"accept\":_vm.format,\"hidden\":\"\"},on:{\"change\":_vm.selectFile}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"m-tinymce\">\r\n\t<textarea :id=\"id\"></textarea>\r\n\t<!-- 图片上传 -->\r\n\t<input ref=\"imgFile\" type=\"file\" :accept=\"format\" hidden @change=\"selectFile\"/>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport \"tinymce/tinymce\";\r\nimport \"../../assets/js/tinymce-langs/zh_CN\";\r\nimport '../../assets/js/tinymce-plugins/placeholder/plugin.js'\r\nimport \"tinymce/themes/modern/theme\";\r\n//import 'tinymce/skins/lightgray/skin.min.css'\r\n//import 'tinymce/skins/lightgray/content.min.css'\r\nimport \"tinymce/plugins/advlist/plugin.js\";\r\nimport \"tinymce/plugins/autolink/plugin.js\";\r\nimport \"tinymce/plugins/lists/plugin.js\";\r\nimport \"tinymce/plugins/link/plugin.js\";\r\nimport \"tinymce/plugins/image/plugin.js\";\r\nimport \"tinymce/plugins/charmap/plugin.js\";\r\nimport \"tinymce/plugins/print/plugin.js\";\r\nimport \"tinymce/plugins/preview/plugin.js\";\r\nimport \"tinymce/plugins/anchor/plugin.js\";\r\nimport \"tinymce/plugins/searchreplace/plugin.js\";\r\nimport \"tinymce/plugins/visualblocks/plugin.js\";\r\nimport \"tinymce/plugins/code/plugin.js\";\r\nimport \"tinymce/plugins/fullscreen/plugin.js\";\r\nimport \"tinymce/plugins/insertdatetime/plugin.js\";\r\nimport \"tinymce/plugins/table/plugin.js\";\r\nimport \"tinymce/plugins/contextmenu/plugin.js\";\r\nimport \"tinymce/plugins/paste/plugin.js\";\r\nimport \"tinymce/plugins/textcolor/plugin.js\";\r\nimport \"tinymce/plugins/colorpicker/plugin.js\";\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tid: \"tinymce__\" + Date.now(),\r\n\t\t\t// 获取上图片节点\r\n\t\t\timgUrlId: \"\",\r\n\t\t\t// 可接受的图片上传格式\r\n            format: ['image/jpg', 'image/jpeg', 'image/png'],\r\n\t\t};\r\n\t},\r\n\tprops: [\"value\", \"width\", \"height\", \"menubar\", \"toolbar\", \"placeholder\"],\r\n\twatch: {\r\n\t\tvalue(val) {\r\n\t\t\t// 当传入值变化时更新富文本内容\r\n\t\t\ttinymce.get(this.id).setContent(val);\r\n\t\t}\r\n\t},\r\n\tmounted() {\r\n\t\ttinymce.init({\r\n\t\t\tselector: `#${this.id}`,\r\n\t\t\theight: this.height || 300,\r\n\t\t\twidth: this.width || \"100%\",\r\n\t\t\tvalid_children: \"+body[style]\",\r\n\t\t\tskin_url: \"https://cdn.bootcss.com/tinymce/4.5.8/skins/lightgray\",\r\n\t\t\tmenubar: this.menubar === undefined ? true : this.menubar,\r\n\t\t\t// 使用插件\r\n\t\t\tplugins: [\r\n\t\t\t\t\"advlist autolink lists link image charmap print preview anchor\",\r\n\t\t\t\t\"searchreplace visualblocks code fullscreen\",\r\n\t\t\t\t\"insertdatetime table contextmenu paste code textcolor colorpicker\",\r\n\t\t\t\t\"placeholder\"\r\n\t\t\t],\r\n\t\t\t// 占位符设置\r\n\t\t\tplaceholder: this.placeholder || '',\r\n\t\t\tplaceholder_attrs: { style: {position: 'absolute', top:'5px', left:0, color: '#bbbec8', padding: '1%', width:'98%', overflow: 'hidden', 'white-space': 'pre-wrap'} },\r\n\t\t\t// 工具栏设置\r\n\t\t\ttoolbar: this.toolbar || \"insertfile undo redo | styleselect | fontsizeselect | bold italic underline | forecolor backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image link | code | preview fullscreen \",\r\n\t\t\t// 上传设置\r\n\t\t\tfile_browser_callback: (field_name, url, type, win) => {\r\n\t\t\t\tif (type == \"file\") {\r\n\t\t\t\t\tthis.$Message.warning('功能暂未开放');\r\n\t\t\t\t}\r\n\t\t\t\tif (type == \"image\") {\r\n\t\t\t\t\t// this.$Message.warning('功能暂未开放');\r\n\t\t\t\t\tthis.$refs.imgFile.click();\r\n\t\t\t\t\tthis.imgUrlId = field_name;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//TinyMCE 会将所有的 font 元素转换成 span 元素\r\n\t\t\tconvert_fonts_to_spans: true,\r\n\t\t\t//换行符会被转换成 br 元素\r\n\t\t\tconvert_newlines_to_brs: false,\r\n\t\t\t//在换行处 TinyMCE 会用 BR 元素而不是插入段落\r\n\t\t\tforce_br_newlines: false,\r\n\t\t\t//当返回或进入 Mozilla/Firefox 时，这个选项可以打开/关闭段落的建立\r\n\t\t\t//force_p_newlines: false,\r\n\t\t\t//这个选项控制是否将换行符从输出的 HTML 中去除。选项默认打开，因为许多服务端系统将换行转换成，因为文本是在无格式的 textarea 中输入的。使用这个选项可以让所有内容在同一行。\r\n\t\t\t//remove_linebreaks: false,\r\n\t\t\t//不能把这个设置去掉，不然图片路径会出错\r\n\t\t\trelative_urls: false,\r\n\t\t\t//允许拖动大小\r\n\t\t\tresize: true,\r\n\t\t\t//font_formats: \"微软雅黑=微软雅黑;宋体=宋体;黑体=黑体;仿宋=仿宋;楷体=楷体;隶书=隶书;幼圆=幼圆;Arial=arial,helvetica,sans-serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Tahoma=tahoma,arial,helvetica,sans-serif;Times New Roman=times new roman,times;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats\",\r\n\t\t\tfontsize_formats: \"8px 10px 12px 14px 18px 24px 36px\",\r\n\t\t\tsetup: editor => {\r\n\t\t\t\t// 初次化编辑器\r\n\t\t\t\teditor.on(\"init\", () => {\r\n\t\t\t\t\t// 设置默认值\r\n\t\t\t\t\teditor.setContent(this.value || \"\");\r\n\t\t\t\t\t// 注册事件\r\n\t\t\t\t\teditor.on(\"blur undo redo\", () => {\r\n\t\t\t\t\t\t// 获得编辑结果\r\n\t\t\t\t\t\t//this.setCon=editor.getContent();\r\n\t\t\t\t\t\tthis.$emit(\"input\", editor.getContent());\r\n\t\t\t\t\t});\r\n\t\t\t\t\teditor.on(\"blur\", () => {\r\n\t\t\t\t\t\tthis.$emit(\"blur\");\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\tmethods: {\r\n\t\t// 选择文件\r\n        selectFile(event){\r\n            // 获取上传文件列表\r\n            const fileList = this.$refs.imgFile.files;\r\n            if(fileList.length > 0){\r\n                let fileName = fileList[0].name;\r\n                // 将文件大小字节转成kb\r\n                let fileSize = Math.floor(fileList[0].size / 1024);\r\n\r\n                let maxSize = 2048;\r\n                let overHint = maxSize + 'kb';\r\n                // 控制文件大小在2M内\r\n                if(fileSize > maxSize){\r\n                    if(maxSize > 1024) overHint = Math.floor(maxSize/1024) + 'M';\r\n                    this.$Notice.warning({\r\n                        title: '超出文件大小限制',\r\n                        desc: '文件 ' + fileName + ' 太大，不能超过 ' + overHint\r\n                    });\r\n                    this.progressHide();\r\n                    return false;\r\n                }\r\n                this.uploadFile(fileList[0]);\r\n            }\r\n            else console.log('获取不到文件列表');\r\n        },\r\n\t\t// 上传文件\r\n\t\tuploadFile(file){\r\n\t\t\tvar thisFile = Bmob.File(file.name, file);\r\n            \r\n\t\t\tthisFile.save().then(res => {\r\n\t\t\t\tlet inputImgUrl = document.getElementById(this.imgUrlId);\r\n\t\t\t\tinputImgUrl.value = res[0].url;\r\n\t\t\t\t//触发change事件\r\n\t\t\t\tif (document.createEventObject) {\r\n\t\t\t\t\t// IE浏览器支持fireEvent方法\r\n\t\t\t\t\tlet evt = document.createEventObject();\r\n\t\t\t\t\tinputImgUrl.fireEvent(\"onchange\", evt);\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// 其他标准浏览器使用dispatchEvent方法\r\n\t\t\t\t\tlet evt = document.createEvent(\"HTMLEvents\");\r\n\t\t\t\t\tevt.initEvent(\"change\", true, true);\r\n\t\t\t\t\tinputImgUrl.dispatchEvent(evt);\r\n\t\t\t\t}            \r\n\t\t\t\tthis.$Notice.success({ title: '图片上传成功!' });\r\n\t\t\t}, err =>  {\r\n\t\t\t\tthis.$Notice.error({ title: '图片上传失败!' });\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t\t}\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\ttinymce.remove(this.id);\r\n\t}\r\n};\r\n</script>\r\n<style lang=\"less\">\r\n.m-tinymce > div {\r\n\tbox-sizing: border-box;\r\n}\r\n.mce-window {\r\n\tz-index: 1001 !important;\r\n}\r\n#mce-modal-block {\r\n\tz-index: 1000 !important;\r\n}\r\n.tinymce__modalProgress {\r\n\t.ivu-modal-mask,\r\n\t.ivu-modal-wrap {\r\n\t\tz-index: 1010;\r\n\t}\r\n}\r\n.mce-fullscreen {\r\n\t.header,\r\n\t.side-bar {\r\n\t\tvisibility: hidden;\r\n\t}\r\n}\r\n.ivu-form-item-error .mce-tinymce {\r\n\tborder-color: #ed3f14;\r\n}\r\n.mce-branding {\r\n\tdisplay: none !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tinymce.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Tinymce.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Tinymce.vue?vue&type=template&id=ffffbbb4&\"\nimport script from \"./Tinymce.vue?vue&type=script&lang=js&\"\nexport * from \"./Tinymce.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Tinymce.vue?vue&type=style&index=0&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","(function () {\nvar contextmenu = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (visibleState) {\n      var isContextMenuVisible = function () {\n        return visibleState.get();\n      };\n      return { isContextMenuVisible: isContextMenuVisible };\n    };\n    var Api = { get: get };\n\n    var shouldNeverUseNative = function (editor) {\n      return editor.settings.contextmenu_never_use_native;\n    };\n    var getContextMenu = function (editor) {\n      return editor.getParam('contextmenu', 'link openlink image inserttable | cell row column deletetable');\n    };\n    var Settings = {\n      shouldNeverUseNative: shouldNeverUseNative,\n      getContextMenu: getContextMenu\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getUiContainer = function (editor) {\n      return global$1.DOM.select(editor.settings.ui_container)[0];\n    };\n\n    var nu = function (x, y) {\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var transpose = function (pos, dx, dy) {\n      return nu(pos.x + dx, pos.y + dy);\n    };\n    var fromPageXY = function (e) {\n      return nu(e.pageX, e.pageY);\n    };\n    var fromClientXY = function (e) {\n      return nu(e.clientX, e.clientY);\n    };\n    var transposeUiContainer = function (element, pos) {\n      if (element && global$1.DOM.getStyle(element, 'position', true) !== 'static') {\n        var containerPos = global$1.DOM.getPos(element);\n        var dx = containerPos.x - element.scrollLeft;\n        var dy = containerPos.y - element.scrollTop;\n        return transpose(pos, -dx, -dy);\n      } else {\n        return transpose(pos, 0, 0);\n      }\n    };\n    var transposeContentAreaContainer = function (element, pos) {\n      var containerPos = global$1.DOM.getPos(element);\n      return transpose(pos, containerPos.x, containerPos.y);\n    };\n    var getPos = function (editor, e) {\n      if (editor.inline) {\n        return transposeUiContainer(getUiContainer(editor), fromPageXY(e));\n      } else {\n        var iframePos = transposeContentAreaContainer(editor.getContentAreaContainer(), fromClientXY(e));\n        return transposeUiContainer(getUiContainer(editor), iframePos);\n      }\n    };\n    var Coords = { getPos: getPos };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var renderMenu = function (editor, visibleState) {\n      var menu, contextmenu;\n      var items = [];\n      contextmenu = Settings.getContextMenu(editor);\n      global$3.each(contextmenu.split(/[ ,]/), function (name) {\n        var item = editor.menuItems[name];\n        if (name === '|') {\n          item = { text: name };\n        }\n        if (item) {\n          item.shortcut = '';\n          items.push(item);\n        }\n      });\n      for (var i = 0; i < items.length; i++) {\n        if (items[i].text === '|') {\n          if (i === 0 || i === items.length - 1) {\n            items.splice(i, 1);\n          }\n        }\n      }\n      menu = global$2.create('menu', {\n        items: items,\n        context: 'contextmenu',\n        classes: 'contextmenu'\n      });\n      menu.uiContainer = getUiContainer(editor);\n      menu.renderTo(getUiContainer(editor));\n      menu.on('hide', function (e) {\n        if (e.control === this) {\n          visibleState.set(false);\n        }\n      });\n      editor.on('remove', function () {\n        menu.remove();\n        menu = null;\n      });\n      return menu;\n    };\n    var show = function (editor, pos, visibleState, menu) {\n      if (menu.get() === null) {\n        menu.set(renderMenu(editor, visibleState));\n      } else {\n        menu.get().show();\n      }\n      menu.get().moveTo(pos.x, pos.y);\n      visibleState.set(true);\n    };\n    var ContextMenu = { show: show };\n\n    var isNativeOverrideKeyEvent = function (editor, e) {\n      return e.ctrlKey && !Settings.shouldNeverUseNative(editor);\n    };\n    var setup = function (editor, visibleState, menu) {\n      editor.on('contextmenu', function (e) {\n        if (isNativeOverrideKeyEvent(editor, e)) {\n          return;\n        }\n        e.preventDefault();\n        ContextMenu.show(editor, Coords.getPos(editor, e), visibleState, menu);\n      });\n    };\n    var Bind = { setup: setup };\n\n    global.add('contextmenu', function (editor) {\n      var menu = Cell(null), visibleState = Cell(false);\n      Bind.setup(editor, visibleState, menu);\n      return Api.get(visibleState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar preview = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var getPreviewDialogWidth = function (editor) {\n      return parseInt(editor.getParam('plugin_preview_width', '650'), 10);\n    };\n    var getPreviewDialogHeight = function (editor) {\n      return parseInt(editor.getParam('plugin_preview_height', '500'), 10);\n    };\n    var getContentStyle = function (editor) {\n      return editor.getParam('content_style', '');\n    };\n    var Settings = {\n      getPreviewDialogWidth: getPreviewDialogWidth,\n      getPreviewDialogHeight: getPreviewDialogHeight,\n      getContentStyle: getContentStyle\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getPreviewHtml = function (editor) {\n      var previewHtml;\n      var headHtml = '';\n      var encode = editor.dom.encode;\n      var contentStyle = Settings.getContentStyle(editor);\n      headHtml += '<base href=\"' + encode(editor.documentBaseURI.getURI()) + '\">';\n      if (contentStyle) {\n        headHtml += '<style type=\"text/css\">' + contentStyle + '</style>';\n      }\n      global$2.each(editor.contentCSS, function (url) {\n        headHtml += '<link type=\"text/css\" rel=\"stylesheet\" href=\"' + encode(editor.documentBaseURI.toAbsolute(url)) + '\">';\n      });\n      var bodyId = editor.settings.body_id || 'tinymce';\n      if (bodyId.indexOf('=') !== -1) {\n        bodyId = editor.getParam('body_id', '', 'hash');\n        bodyId = bodyId[editor.id] || bodyId;\n      }\n      var bodyClass = editor.settings.body_class || '';\n      if (bodyClass.indexOf('=') !== -1) {\n        bodyClass = editor.getParam('body_class', '', 'hash');\n        bodyClass = bodyClass[editor.id] || '';\n      }\n      var preventClicksOnLinksScript = '<script>' + 'document.addEventListener && document.addEventListener(\"click\", function(e) {' + 'for (var elm = e.target; elm; elm = elm.parentNode) {' + 'if (elm.nodeName === \"A\") {' + 'e.preventDefault();' + '}' + '}' + '}, false);' + '</script> ';\n      var dirAttr = editor.settings.directionality ? ' dir=\"' + editor.settings.directionality + '\"' : '';\n      previewHtml = '<!DOCTYPE html>' + '<html>' + '<head>' + headHtml + '</head>' + '<body id=\"' + encode(bodyId) + '\" class=\"mce-content-body ' + encode(bodyClass) + '\"' + encode(dirAttr) + '>' + editor.getContent() + preventClicksOnLinksScript + '</body>' + '</html>';\n      return previewHtml;\n    };\n    var injectIframeContent = function (editor, iframe, sandbox) {\n      var previewHtml = getPreviewHtml(editor);\n      if (!sandbox) {\n        var doc = iframe.contentWindow.document;\n        doc.open();\n        doc.write(previewHtml);\n        doc.close();\n      } else {\n        iframe.src = 'data:text/html;charset=utf-8,' + encodeURIComponent(previewHtml);\n      }\n    };\n    var IframeContent = {\n      getPreviewHtml: getPreviewHtml,\n      injectIframeContent: injectIframeContent\n    };\n\n    var open = function (editor) {\n      var sandbox = !global$1.ie;\n      var dialogHtml = '<iframe src=\"\" frameborder=\"0\"' + (sandbox ? ' sandbox=\"allow-scripts\"' : '') + '></iframe>';\n      var dialogWidth = Settings.getPreviewDialogWidth(editor);\n      var dialogHeight = Settings.getPreviewDialogHeight(editor);\n      editor.windowManager.open({\n        title: 'Preview',\n        width: dialogWidth,\n        height: dialogHeight,\n        html: dialogHtml,\n        buttons: {\n          text: 'Close',\n          onclick: function (e) {\n            e.control.parent().parent().close();\n          }\n        },\n        onPostRender: function (e) {\n          var iframeElm = e.control.getEl('body').firstChild;\n          IframeContent.injectIframeContent(editor, iframeElm, sandbox);\n        }\n      });\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mcePreview', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('preview', {\n        title: 'Preview',\n        cmd: 'mcePreview'\n      });\n      editor.addMenuItem('preview', {\n        text: 'Preview',\n        cmd: 'mcePreview',\n        context: 'view'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('preview', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar modern = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.ThemeManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.EditorManager');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var isBrandingEnabled = function (editor) {\n      return editor.getParam('branding', true, 'boolean');\n    };\n    var hasMenubar = function (editor) {\n      return getMenubar(editor) !== false;\n    };\n    var getMenubar = function (editor) {\n      return editor.getParam('menubar');\n    };\n    var hasStatusbar = function (editor) {\n      return editor.getParam('statusbar', true, 'boolean');\n    };\n    var getToolbarSize = function (editor) {\n      return editor.getParam('toolbar_items_size');\n    };\n    var isReadOnly = function (editor) {\n      return editor.getParam('readonly', false, 'boolean');\n    };\n    var getFixedToolbarContainer = function (editor) {\n      return editor.getParam('fixed_toolbar_container');\n    };\n    var getInlineToolbarPositionHandler = function (editor) {\n      return editor.getParam('inline_toolbar_position_handler');\n    };\n    var getMenu = function (editor) {\n      return editor.getParam('menu');\n    };\n    var getRemovedMenuItems = function (editor) {\n      return editor.getParam('removed_menuitems', '');\n    };\n    var getMinWidth = function (editor) {\n      return editor.getParam('min_width', 100, 'number');\n    };\n    var getMinHeight = function (editor) {\n      return editor.getParam('min_height', 100, 'number');\n    };\n    var getMaxWidth = function (editor) {\n      return editor.getParam('max_width', 65535, 'number');\n    };\n    var getMaxHeight = function (editor) {\n      return editor.getParam('max_height', 65535, 'number');\n    };\n    var isSkinDisabled = function (editor) {\n      return editor.settings.skin === false;\n    };\n    var isInline = function (editor) {\n      return editor.getParam('inline', false, 'boolean');\n    };\n    var getResize = function (editor) {\n      var resize = editor.getParam('resize', 'vertical');\n      if (resize === false) {\n        return 'none';\n      } else if (resize === 'both') {\n        return 'both';\n      } else {\n        return 'vertical';\n      }\n    };\n    var getSkinUrl = function (editor) {\n      var settings = editor.settings;\n      var skin = settings.skin;\n      var skinUrl = settings.skin_url;\n      if (skin !== false) {\n        var skinName = skin ? skin : 'lightgray';\n        if (skinUrl) {\n          skinUrl = editor.documentBaseURI.toAbsolute(skinUrl);\n        } else {\n          skinUrl = global$1.baseURL + '/skins/' + skinName;\n        }\n      }\n      return skinUrl;\n    };\n    var getIndexedToolbars = function (settings, defaultToolbar) {\n      var toolbars = [];\n      for (var i = 1; i < 10; i++) {\n        var toolbar = settings['toolbar' + i];\n        if (!toolbar) {\n          break;\n        }\n        toolbars.push(toolbar);\n      }\n      var mainToolbar = settings.toolbar ? [settings.toolbar] : [defaultToolbar];\n      return toolbars.length > 0 ? toolbars : mainToolbar;\n    };\n    var getToolbars = function (editor) {\n      var toolbar = editor.getParam('toolbar');\n      var defaultToolbar = 'undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image';\n      if (toolbar === false) {\n        return [];\n      } else if (global$2.isArray(toolbar)) {\n        return global$2.grep(toolbar, function (toolbar) {\n          return toolbar.length > 0;\n        });\n      } else {\n        return getIndexedToolbars(editor.settings, defaultToolbar);\n      }\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.I18n');\n\n    var fireSkinLoaded = function (editor) {\n      return editor.fire('SkinLoaded');\n    };\n    var fireResizeEditor = function (editor) {\n      return editor.fire('ResizeEditor');\n    };\n    var fireBeforeRenderUI = function (editor) {\n      return editor.fire('BeforeRenderUI');\n    };\n    var Events = {\n      fireSkinLoaded: fireSkinLoaded,\n      fireResizeEditor: fireResizeEditor,\n      fireBeforeRenderUI: fireBeforeRenderUI\n    };\n\n    var focus = function (panel, type) {\n      return function () {\n        var item = panel.find(type)[0];\n        if (item) {\n          item.focus(true);\n        }\n      };\n    };\n    var addKeys = function (editor, panel) {\n      editor.shortcuts.add('Alt+F9', '', focus(panel, 'menubar'));\n      editor.shortcuts.add('Alt+F10,F10', '', focus(panel, 'toolbar'));\n      editor.shortcuts.add('Alt+F11', '', focus(panel, 'elementpath'));\n      panel.on('cancel', function () {\n        editor.focus();\n      });\n    };\n    var A11y = { addKeys: addKeys };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.geom.Rect');\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var noop = function () {\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var getUiContainerDelta = function (ctrl) {\n      var uiContainer = getUiContainer(ctrl);\n      if (uiContainer && global$3.DOM.getStyle(uiContainer, 'position', true) !== 'static') {\n        var containerPos = global$3.DOM.getPos(uiContainer);\n        var dx = uiContainer.scrollLeft - containerPos.x;\n        var dy = uiContainer.scrollTop - containerPos.y;\n        return Option.some({\n          x: dx,\n          y: dy\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var setUiContainer = function (editor, ctrl) {\n      var uiContainer = global$3.DOM.select(editor.settings.ui_container)[0];\n      ctrl.getRoot().uiContainer = uiContainer;\n    };\n    var getUiContainer = function (ctrl) {\n      return ctrl ? ctrl.getRoot().uiContainer : null;\n    };\n    var inheritUiContainer = function (fromCtrl, toCtrl) {\n      return toCtrl.uiContainer = getUiContainer(fromCtrl);\n    };\n    var UiContainer = {\n      getUiContainerDelta: getUiContainerDelta,\n      setUiContainer: setUiContainer,\n      getUiContainer: getUiContainer,\n      inheritUiContainer: inheritUiContainer\n    };\n\n    var createToolbar = function (editor, items, size) {\n      var toolbarItems = [];\n      var buttonGroup;\n      if (!items) {\n        return;\n      }\n      global$2.each(items.split(/[ ,]/), function (item) {\n        var itemName;\n        var bindSelectorChanged = function () {\n          var selection = editor.selection;\n          if (item.settings.stateSelector) {\n            selection.selectorChanged(item.settings.stateSelector, function (state) {\n              item.active(state);\n            }, true);\n          }\n          if (item.settings.disabledStateSelector) {\n            selection.selectorChanged(item.settings.disabledStateSelector, function (state) {\n              item.disabled(state);\n            });\n          }\n        };\n        if (item === '|') {\n          buttonGroup = null;\n        } else {\n          if (!buttonGroup) {\n            buttonGroup = {\n              type: 'buttongroup',\n              items: []\n            };\n            toolbarItems.push(buttonGroup);\n          }\n          if (editor.buttons[item]) {\n            itemName = item;\n            item = editor.buttons[itemName];\n            if (typeof item === 'function') {\n              item = item();\n            }\n            item.type = item.type || 'button';\n            item.size = size;\n            item = global$4.create(item);\n            buttonGroup.items.push(item);\n            if (editor.initialized) {\n              bindSelectorChanged();\n            } else {\n              editor.on('init', bindSelectorChanged);\n            }\n          }\n        }\n      });\n      return {\n        type: 'toolbar',\n        layout: 'flow',\n        items: toolbarItems\n      };\n    };\n    var createToolbars = function (editor, size) {\n      var toolbars = [];\n      var addToolbar = function (items) {\n        if (items) {\n          toolbars.push(createToolbar(editor, items, size));\n        }\n      };\n      global$2.each(getToolbars(editor), function (toolbar) {\n        addToolbar(toolbar);\n      });\n      if (toolbars.length) {\n        return {\n          type: 'panel',\n          layout: 'stack',\n          classes: 'toolbar-grp',\n          ariaRoot: true,\n          ariaRemember: true,\n          items: toolbars\n        };\n      }\n    };\n    var Toolbar = {\n      createToolbar: createToolbar,\n      createToolbars: createToolbars\n    };\n\n    var DOM = global$3.DOM;\n    var toClientRect = function (geomRect) {\n      return {\n        left: geomRect.x,\n        top: geomRect.y,\n        width: geomRect.w,\n        height: geomRect.h,\n        right: geomRect.x + geomRect.w,\n        bottom: geomRect.y + geomRect.h\n      };\n    };\n    var hideAllFloatingPanels = function (editor) {\n      global$2.each(editor.contextToolbars, function (toolbar) {\n        if (toolbar.panel) {\n          toolbar.panel.hide();\n        }\n      });\n    };\n    var movePanelTo = function (panel, pos) {\n      panel.moveTo(pos.left, pos.top);\n    };\n    var togglePositionClass = function (panel, relPos, predicate) {\n      relPos = relPos ? relPos.substr(0, 2) : '';\n      global$2.each({\n        t: 'down',\n        b: 'up'\n      }, function (cls, pos) {\n        panel.classes.toggle('arrow-' + cls, predicate(pos, relPos.substr(0, 1)));\n      });\n      global$2.each({\n        l: 'left',\n        r: 'right'\n      }, function (cls, pos) {\n        panel.classes.toggle('arrow-' + cls, predicate(pos, relPos.substr(1, 1)));\n      });\n    };\n    var userConstrain = function (handler, x, y, elementRect, contentAreaRect, panelRect) {\n      panelRect = toClientRect({\n        x: x,\n        y: y,\n        w: panelRect.w,\n        h: panelRect.h\n      });\n      if (handler) {\n        panelRect = handler({\n          elementRect: toClientRect(elementRect),\n          contentAreaRect: toClientRect(contentAreaRect),\n          panelRect: panelRect\n        });\n      }\n      return panelRect;\n    };\n    var addContextualToolbars = function (editor) {\n      var scrollContainer;\n      var getContextToolbars = function () {\n        return editor.contextToolbars || [];\n      };\n      var getElementRect = function (elm) {\n        var pos, targetRect, root;\n        pos = DOM.getPos(editor.getContentAreaContainer());\n        targetRect = editor.dom.getRect(elm);\n        root = editor.dom.getRoot();\n        if (root.nodeName === 'BODY') {\n          targetRect.x -= root.ownerDocument.documentElement.scrollLeft || root.scrollLeft;\n          targetRect.y -= root.ownerDocument.documentElement.scrollTop || root.scrollTop;\n        }\n        targetRect.x += pos.x;\n        targetRect.y += pos.y;\n        return targetRect;\n      };\n      var reposition = function (match, shouldShow) {\n        var relPos, panelRect, elementRect, contentAreaRect, panel, relRect, testPositions, smallElementWidthThreshold;\n        var handler = getInlineToolbarPositionHandler(editor);\n        if (editor.removed) {\n          return;\n        }\n        if (!match || !match.toolbar.panel) {\n          hideAllFloatingPanels(editor);\n          return;\n        }\n        testPositions = [\n          'bc-tc',\n          'tc-bc',\n          'tl-bl',\n          'bl-tl',\n          'tr-br',\n          'br-tr'\n        ];\n        panel = match.toolbar.panel;\n        if (shouldShow) {\n          panel.show();\n        }\n        elementRect = getElementRect(match.element);\n        panelRect = DOM.getRect(panel.getEl());\n        contentAreaRect = DOM.getRect(editor.getContentAreaContainer() || editor.getBody());\n        var delta = UiContainer.getUiContainerDelta(panel).getOr({\n          x: 0,\n          y: 0\n        });\n        elementRect.x += delta.x;\n        elementRect.y += delta.y;\n        panelRect.x += delta.x;\n        panelRect.y += delta.y;\n        contentAreaRect.x += delta.x;\n        contentAreaRect.y += delta.y;\n        smallElementWidthThreshold = 25;\n        if (DOM.getStyle(match.element, 'display', true) !== 'inline') {\n          var clientRect = match.element.getBoundingClientRect();\n          elementRect.w = clientRect.width;\n          elementRect.h = clientRect.height;\n        }\n        if (!editor.inline) {\n          contentAreaRect.w = editor.getDoc().documentElement.offsetWidth;\n        }\n        if (editor.selection.controlSelection.isResizable(match.element) && elementRect.w < smallElementWidthThreshold) {\n          elementRect = global$6.inflate(elementRect, 0, 8);\n        }\n        relPos = global$6.findBestRelativePosition(panelRect, elementRect, contentAreaRect, testPositions);\n        elementRect = global$6.clamp(elementRect, contentAreaRect);\n        if (relPos) {\n          relRect = global$6.relativePosition(panelRect, elementRect, relPos);\n          movePanelTo(panel, userConstrain(handler, relRect.x, relRect.y, elementRect, contentAreaRect, panelRect));\n        } else {\n          contentAreaRect.h += panelRect.h;\n          elementRect = global$6.intersect(contentAreaRect, elementRect);\n          if (elementRect) {\n            relPos = global$6.findBestRelativePosition(panelRect, elementRect, contentAreaRect, [\n              'bc-tc',\n              'bl-tl',\n              'br-tr'\n            ]);\n            if (relPos) {\n              relRect = global$6.relativePosition(panelRect, elementRect, relPos);\n              movePanelTo(panel, userConstrain(handler, relRect.x, relRect.y, elementRect, contentAreaRect, panelRect));\n            } else {\n              movePanelTo(panel, userConstrain(handler, elementRect.x, elementRect.y, elementRect, contentAreaRect, panelRect));\n            }\n          } else {\n            panel.hide();\n          }\n        }\n        togglePositionClass(panel, relPos, function (pos1, pos2) {\n          return pos1 === pos2;\n        });\n      };\n      var repositionHandler = function (show) {\n        return function () {\n          var execute = function () {\n            if (editor.selection) {\n              reposition(findFrontMostMatch(editor.selection.getNode()), show);\n            }\n          };\n          global$7.requestAnimationFrame(execute);\n        };\n      };\n      var bindScrollEvent = function (panel) {\n        if (!scrollContainer) {\n          var reposition_1 = repositionHandler(true);\n          var uiContainer_1 = UiContainer.getUiContainer(panel);\n          scrollContainer = editor.selection.getScrollContainer() || editor.getWin();\n          DOM.bind(scrollContainer, 'scroll', reposition_1);\n          DOM.bind(uiContainer_1, 'scroll', reposition_1);\n          editor.on('remove', function () {\n            DOM.unbind(scrollContainer, 'scroll', reposition_1);\n            DOM.unbind(uiContainer_1, 'scroll', reposition_1);\n          });\n        }\n      };\n      var showContextToolbar = function (match) {\n        var panel;\n        if (match.toolbar.panel) {\n          match.toolbar.panel.show();\n          reposition(match);\n          return;\n        }\n        panel = global$4.create({\n          type: 'floatpanel',\n          role: 'dialog',\n          classes: 'tinymce tinymce-inline arrow',\n          ariaLabel: 'Inline toolbar',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          autohide: false,\n          autofix: true,\n          fixed: true,\n          border: 1,\n          items: Toolbar.createToolbar(editor, match.toolbar.items),\n          oncancel: function () {\n            editor.focus();\n          }\n        });\n        UiContainer.setUiContainer(editor, panel);\n        bindScrollEvent(panel);\n        match.toolbar.panel = panel;\n        panel.renderTo().reflow();\n        reposition(match);\n      };\n      var hideAllContextToolbars = function () {\n        global$2.each(getContextToolbars(), function (toolbar) {\n          if (toolbar.panel) {\n            toolbar.panel.hide();\n          }\n        });\n      };\n      var findFrontMostMatch = function (targetElm) {\n        var i, y, parentsAndSelf;\n        var toolbars = getContextToolbars();\n        parentsAndSelf = editor.$(targetElm).parents().add(targetElm);\n        for (i = parentsAndSelf.length - 1; i >= 0; i--) {\n          for (y = toolbars.length - 1; y >= 0; y--) {\n            if (toolbars[y].predicate(parentsAndSelf[i])) {\n              return {\n                toolbar: toolbars[y],\n                element: parentsAndSelf[i]\n              };\n            }\n          }\n        }\n        return null;\n      };\n      editor.on('click keyup setContent ObjectResized', function (e) {\n        if (e.type === 'setcontent' && !e.selection) {\n          return;\n        }\n        global$7.setEditorTimeout(editor, function () {\n          var match;\n          match = findFrontMostMatch(editor.selection.getNode());\n          if (match) {\n            hideAllContextToolbars();\n            showContextToolbar(match);\n          } else {\n            hideAllContextToolbars();\n          }\n        });\n      });\n      editor.on('blur hide contextmenu', hideAllContextToolbars);\n      editor.on('ObjectResizeStart', function () {\n        var match = findFrontMostMatch(editor.selection.getNode());\n        if (match && match.toolbar.panel) {\n          match.toolbar.panel.hide();\n        }\n      });\n      editor.on('ResizeEditor ResizeWindow', repositionHandler(true));\n      editor.on('nodeChange', repositionHandler(false));\n      editor.on('remove', function () {\n        global$2.each(getContextToolbars(), function (toolbar) {\n          if (toolbar.panel) {\n            toolbar.panel.remove();\n          }\n        });\n        editor.contextToolbars = {};\n      });\n      editor.shortcuts.add('ctrl+F9', '', function () {\n        var match = findFrontMostMatch(editor.selection.getNode());\n        if (match && match.toolbar.panel) {\n          match.toolbar.panel.items()[0].focus();\n        }\n      });\n    };\n    var ContextToolbars = { addContextualToolbars: addContextualToolbars };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isArray = isType('array');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var slice = Array.prototype.slice;\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var exists = function (xs, pred) {\n      return findIndex(xs, pred).isSome();\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var defaultMenus = {\n      file: {\n        title: 'File',\n        items: 'newdocument restoredraft | preview | print'\n      },\n      edit: {\n        title: 'Edit',\n        items: 'undo redo | cut copy paste pastetext | selectall'\n      },\n      view: {\n        title: 'View',\n        items: 'code | visualaid visualchars visualblocks | spellchecker | preview fullscreen'\n      },\n      insert: {\n        title: 'Insert',\n        items: 'image link media template codesample inserttable | charmap hr | pagebreak nonbreaking anchor toc | insertdatetime'\n      },\n      format: {\n        title: 'Format',\n        items: 'bold italic underline strikethrough superscript subscript codeformat | blockformats align | removeformat'\n      },\n      tools: {\n        title: 'Tools',\n        items: 'spellchecker spellcheckerlanguage | a11ycheck code'\n      },\n      table: { title: 'Table' },\n      help: { title: 'Help' }\n    };\n    var delimiterMenuNamePair = function () {\n      return {\n        name: '|',\n        item: { text: '|' }\n      };\n    };\n    var createMenuNameItemPair = function (name, item) {\n      var menuItem = item ? {\n        name: name,\n        item: item\n      } : null;\n      return name === '|' ? delimiterMenuNamePair() : menuItem;\n    };\n    var hasItemName = function (namedMenuItems, name) {\n      return findIndex(namedMenuItems, function (namedMenuItem) {\n        return namedMenuItem.name === name;\n      }).isSome();\n    };\n    var isSeparator = function (namedMenuItem) {\n      return namedMenuItem && namedMenuItem.item.text === '|';\n    };\n    var cleanupMenu = function (namedMenuItems, removedMenuItems) {\n      var menuItemsPass1 = filter(namedMenuItems, function (namedMenuItem) {\n        return removedMenuItems.hasOwnProperty(namedMenuItem.name) === false;\n      });\n      var menuItemsPass2 = filter(menuItemsPass1, function (namedMenuItem, i, namedMenuItems) {\n        return !isSeparator(namedMenuItem) || !isSeparator(namedMenuItems[i - 1]);\n      });\n      return filter(menuItemsPass2, function (namedMenuItem, i, namedMenuItems) {\n        return !isSeparator(namedMenuItem) || i > 0 && i < namedMenuItems.length - 1;\n      });\n    };\n    var createMenu = function (editorMenuItems, menus, removedMenuItems, context) {\n      var menuButton, menu, namedMenuItems, isUserDefined;\n      if (menus) {\n        menu = menus[context];\n        isUserDefined = true;\n      } else {\n        menu = defaultMenus[context];\n      }\n      if (menu) {\n        menuButton = { text: menu.title };\n        namedMenuItems = [];\n        global$2.each((menu.items || '').split(/[ ,]/), function (name) {\n          var namedMenuItem = createMenuNameItemPair(name, editorMenuItems[name]);\n          if (namedMenuItem) {\n            namedMenuItems.push(namedMenuItem);\n          }\n        });\n        if (!isUserDefined) {\n          global$2.each(editorMenuItems, function (item, name) {\n            if (item.context === context && !hasItemName(namedMenuItems, name)) {\n              if (item.separator === 'before') {\n                namedMenuItems.push(delimiterMenuNamePair());\n              }\n              if (item.prependToContext) {\n                namedMenuItems.unshift(createMenuNameItemPair(name, item));\n              } else {\n                namedMenuItems.push(createMenuNameItemPair(name, item));\n              }\n              if (item.separator === 'after') {\n                namedMenuItems.push(delimiterMenuNamePair());\n              }\n            }\n          });\n        }\n        menuButton.menu = map(cleanupMenu(namedMenuItems, removedMenuItems), function (menuItem) {\n          return menuItem.item;\n        });\n        if (!menuButton.menu.length) {\n          return null;\n        }\n      }\n      return menuButton;\n    };\n    var getDefaultMenubar = function (editor) {\n      var name;\n      var defaultMenuBar = [];\n      var menu = getMenu(editor);\n      if (menu) {\n        for (name in menu) {\n          defaultMenuBar.push(name);\n        }\n      } else {\n        for (name in defaultMenus) {\n          defaultMenuBar.push(name);\n        }\n      }\n      return defaultMenuBar;\n    };\n    var createMenuButtons = function (editor) {\n      var menuButtons = [];\n      var defaultMenuBar = getDefaultMenubar(editor);\n      var removedMenuItems = global$2.makeMap(getRemovedMenuItems(editor).split(/[ ,]/));\n      var menubar = getMenubar(editor);\n      var enabledMenuNames = typeof menubar === 'string' ? menubar.split(/[ ,]/) : defaultMenuBar;\n      for (var i = 0; i < enabledMenuNames.length; i++) {\n        var menuItems = enabledMenuNames[i];\n        var menu = createMenu(editor.menuItems, getMenu(editor), removedMenuItems, menuItems);\n        if (menu) {\n          menuButtons.push(menu);\n        }\n      }\n      return menuButtons;\n    };\n    var Menubar = { createMenuButtons: createMenuButtons };\n\n    var DOM$1 = global$3.DOM;\n    var getSize = function (elm) {\n      return {\n        width: elm.clientWidth,\n        height: elm.clientHeight\n      };\n    };\n    var resizeTo = function (editor, width, height) {\n      var containerElm, iframeElm, containerSize, iframeSize;\n      containerElm = editor.getContainer();\n      iframeElm = editor.getContentAreaContainer().firstChild;\n      containerSize = getSize(containerElm);\n      iframeSize = getSize(iframeElm);\n      if (width !== null) {\n        width = Math.max(getMinWidth(editor), width);\n        width = Math.min(getMaxWidth(editor), width);\n        DOM$1.setStyle(containerElm, 'width', width + (containerSize.width - iframeSize.width));\n        DOM$1.setStyle(iframeElm, 'width', width);\n      }\n      height = Math.max(getMinHeight(editor), height);\n      height = Math.min(getMaxHeight(editor), height);\n      DOM$1.setStyle(iframeElm, 'height', height);\n      Events.fireResizeEditor(editor);\n    };\n    var resizeBy = function (editor, dw, dh) {\n      var elm = editor.getContentAreaContainer();\n      resizeTo(editor, elm.clientWidth + dw, elm.clientHeight + dh);\n    };\n    var Resize = {\n      resizeTo: resizeTo,\n      resizeBy: resizeBy\n    };\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var api = function (elm) {\n      return {\n        element: function () {\n          return elm;\n        }\n      };\n    };\n    var trigger = function (sidebar, panel, callbackName) {\n      var callback = sidebar.settings[callbackName];\n      if (callback) {\n        callback(api(panel.getEl('body')));\n      }\n    };\n    var hidePanels = function (name, container, sidebars) {\n      global$2.each(sidebars, function (sidebar) {\n        var panel = container.items().filter('#' + sidebar.name)[0];\n        if (panel && panel.visible() && sidebar.name !== name) {\n          trigger(sidebar, panel, 'onhide');\n          panel.visible(false);\n        }\n      });\n    };\n    var deactivateButtons = function (toolbar) {\n      toolbar.items().each(function (ctrl) {\n        ctrl.active(false);\n      });\n    };\n    var findSidebar = function (sidebars, name) {\n      return global$2.grep(sidebars, function (sidebar) {\n        return sidebar.name === name;\n      })[0];\n    };\n    var showPanel = function (editor, name, sidebars) {\n      return function (e) {\n        var btnCtrl = e.control;\n        var container = btnCtrl.parents().filter('panel')[0];\n        var panel = container.find('#' + name)[0];\n        var sidebar = findSidebar(sidebars, name);\n        hidePanels(name, container, sidebars);\n        deactivateButtons(btnCtrl.parent());\n        if (panel && panel.visible()) {\n          trigger(sidebar, panel, 'onhide');\n          panel.hide();\n          btnCtrl.active(false);\n        } else {\n          if (panel) {\n            panel.show();\n            trigger(sidebar, panel, 'onshow');\n          } else {\n            panel = global$4.create({\n              type: 'container',\n              name: name,\n              layout: 'stack',\n              classes: 'sidebar-panel',\n              html: ''\n            });\n            container.prepend(panel);\n            trigger(sidebar, panel, 'onrender');\n            trigger(sidebar, panel, 'onshow');\n          }\n          btnCtrl.active(true);\n        }\n        Events.fireResizeEditor(editor);\n      };\n    };\n    var isModernBrowser = function () {\n      return !global$8.ie || global$8.ie >= 11;\n    };\n    var hasSidebar = function (editor) {\n      return isModernBrowser() && editor.sidebars ? editor.sidebars.length > 0 : false;\n    };\n    var createSidebar = function (editor) {\n      var buttons = global$2.map(editor.sidebars, function (sidebar) {\n        var settings = sidebar.settings;\n        return {\n          type: 'button',\n          icon: settings.icon,\n          image: settings.image,\n          tooltip: settings.tooltip,\n          onclick: showPanel(editor, sidebar.name, editor.sidebars)\n        };\n      });\n      return {\n        type: 'panel',\n        name: 'sidebar',\n        layout: 'stack',\n        classes: 'sidebar',\n        items: [{\n            type: 'toolbar',\n            layout: 'stack',\n            classes: 'sidebar-toolbar',\n            items: buttons\n          }]\n      };\n    };\n    var Sidebar = {\n      hasSidebar: hasSidebar,\n      createSidebar: createSidebar\n    };\n\n    var fireSkinLoaded$1 = function (editor) {\n      var done = function () {\n        editor._skinLoaded = true;\n        Events.fireSkinLoaded(editor);\n      };\n      return function () {\n        if (editor.initialized) {\n          done();\n        } else {\n          editor.on('init', done);\n        }\n      };\n    };\n    var SkinLoaded = { fireSkinLoaded: fireSkinLoaded$1 };\n\n    var DOM$2 = global$3.DOM;\n    var switchMode = function (panel) {\n      return function (e) {\n        panel.find('*').disabled(e.mode === 'readonly');\n      };\n    };\n    var editArea = function (border) {\n      return {\n        type: 'panel',\n        name: 'iframe',\n        layout: 'stack',\n        classes: 'edit-area',\n        border: border,\n        html: ''\n      };\n    };\n    var editAreaContainer = function (editor) {\n      return {\n        type: 'panel',\n        layout: 'stack',\n        classes: 'edit-aria-container',\n        border: '1 0 0 0',\n        items: [\n          editArea('0'),\n          Sidebar.createSidebar(editor)\n        ]\n      };\n    };\n    var render = function (editor, theme, args) {\n      var panel, resizeHandleCtrl, startSize;\n      if (isSkinDisabled(editor) === false && args.skinUiCss) {\n        DOM$2.styleSheetLoader.load(args.skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n      panel = theme.panel = global$4.create({\n        type: 'panel',\n        role: 'application',\n        classes: 'tinymce',\n        style: 'visibility: hidden',\n        layout: 'stack',\n        border: 1,\n        items: [\n          {\n            type: 'container',\n            classes: 'top-part',\n            items: [\n              hasMenubar(editor) === false ? null : {\n                type: 'menubar',\n                border: '0 0 1 0',\n                items: Menubar.createMenuButtons(editor)\n              },\n              Toolbar.createToolbars(editor, getToolbarSize(editor))\n            ]\n          },\n          Sidebar.hasSidebar(editor) ? editAreaContainer(editor) : editArea('1 0 0 0')\n        ]\n      });\n      UiContainer.setUiContainer(editor, panel);\n      if (getResize(editor) !== 'none') {\n        resizeHandleCtrl = {\n          type: 'resizehandle',\n          direction: getResize(editor),\n          onResizeStart: function () {\n            var elm = editor.getContentAreaContainer().firstChild;\n            startSize = {\n              width: elm.clientWidth,\n              height: elm.clientHeight\n            };\n          },\n          onResize: function (e) {\n            if (getResize(editor) === 'both') {\n              Resize.resizeTo(editor, startSize.width + e.deltaX, startSize.height + e.deltaY);\n            } else {\n              Resize.resizeTo(editor, null, startSize.height + e.deltaY);\n            }\n          }\n        };\n      }\n      if (hasStatusbar(editor)) {\n        var linkHtml = '<a href=\"https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce\" rel=\"noopener\" target=\"_blank\" role=\"presentation\" tabindex=\"-1\">Tiny</a>';\n        var html = global$5.translate([\n          'Powered by {0}',\n          linkHtml\n        ]);\n        var brandingLabel = isBrandingEnabled(editor) ? {\n          type: 'label',\n          classes: 'branding',\n          html: ' ' + html\n        } : null;\n        panel.add({\n          type: 'panel',\n          name: 'statusbar',\n          classes: 'statusbar',\n          layout: 'flow',\n          border: '1 0 0 0',\n          ariaRoot: true,\n          items: [\n            {\n              type: 'elementpath',\n              editor: editor\n            },\n            resizeHandleCtrl,\n            brandingLabel\n          ]\n        });\n      }\n      Events.fireBeforeRenderUI(editor);\n      editor.on('SwitchMode', switchMode(panel));\n      panel.renderBefore(args.targetNode).reflow();\n      if (isReadOnly(editor)) {\n        editor.setMode('readonly');\n      }\n      if (args.width) {\n        DOM$2.setStyle(panel.getEl(), 'width', args.width);\n      }\n      editor.on('remove', function () {\n        panel.remove();\n        panel = null;\n      });\n      A11y.addKeys(editor, panel);\n      ContextToolbars.addContextualToolbars(editor);\n      return {\n        iframeContainer: panel.find('#iframe')[0].getEl(),\n        editorContainer: panel.getEl()\n      };\n    };\n    var Iframe = { render: render };\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.dom.DomQuery');\n\n    var count = 0;\n    var funcs = {\n      id: function () {\n        return 'mceu_' + count++;\n      },\n      create: function (name, attrs, children) {\n        var elm = domGlobals.document.createElement(name);\n        global$3.DOM.setAttribs(elm, attrs);\n        if (typeof children === 'string') {\n          elm.innerHTML = children;\n        } else {\n          global$2.each(children, function (child) {\n            if (child.nodeType) {\n              elm.appendChild(child);\n            }\n          });\n        }\n        return elm;\n      },\n      createFragment: function (html) {\n        return global$3.DOM.createFragment(html);\n      },\n      getWindowSize: function () {\n        return global$3.DOM.getViewPort();\n      },\n      getSize: function (elm) {\n        var width, height;\n        if (elm.getBoundingClientRect) {\n          var rect = elm.getBoundingClientRect();\n          width = Math.max(rect.width || rect.right - rect.left, elm.offsetWidth);\n          height = Math.max(rect.height || rect.bottom - rect.bottom, elm.offsetHeight);\n        } else {\n          width = elm.offsetWidth;\n          height = elm.offsetHeight;\n        }\n        return {\n          width: width,\n          height: height\n        };\n      },\n      getPos: function (elm, root) {\n        return global$3.DOM.getPos(elm, root || funcs.getContainer());\n      },\n      getContainer: function () {\n        return global$8.container ? global$8.container : domGlobals.document.body;\n      },\n      getViewPort: function (win) {\n        return global$3.DOM.getViewPort(win);\n      },\n      get: function (id) {\n        return domGlobals.document.getElementById(id);\n      },\n      addClass: function (elm, cls) {\n        return global$3.DOM.addClass(elm, cls);\n      },\n      removeClass: function (elm, cls) {\n        return global$3.DOM.removeClass(elm, cls);\n      },\n      hasClass: function (elm, cls) {\n        return global$3.DOM.hasClass(elm, cls);\n      },\n      toggleClass: function (elm, cls, state) {\n        return global$3.DOM.toggleClass(elm, cls, state);\n      },\n      css: function (elm, name, value) {\n        return global$3.DOM.setStyle(elm, name, value);\n      },\n      getRuntimeStyle: function (elm, name) {\n        return global$3.DOM.getStyle(elm, name, true);\n      },\n      on: function (target, name, callback, scope) {\n        return global$3.DOM.bind(target, name, callback, scope);\n      },\n      off: function (target, name, callback) {\n        return global$3.DOM.unbind(target, name, callback);\n      },\n      fire: function (target, name, args) {\n        return global$3.DOM.fire(target, name, args);\n      },\n      innerHtml: function (elm, html) {\n        global$3.DOM.setHTML(elm, html);\n      }\n    };\n\n    var isStatic = function (elm) {\n      return funcs.getRuntimeStyle(elm, 'position') === 'static';\n    };\n    var isFixed = function (ctrl) {\n      return ctrl.state.get('fixed');\n    };\n    function calculateRelativePosition(ctrl, targetElm, rel) {\n      var ctrlElm, pos, x, y, selfW, selfH, targetW, targetH, viewport, size;\n      viewport = getWindowViewPort();\n      pos = funcs.getPos(targetElm, UiContainer.getUiContainer(ctrl));\n      x = pos.x;\n      y = pos.y;\n      if (isFixed(ctrl) && isStatic(domGlobals.document.body)) {\n        x -= viewport.x;\n        y -= viewport.y;\n      }\n      ctrlElm = ctrl.getEl();\n      size = funcs.getSize(ctrlElm);\n      selfW = size.width;\n      selfH = size.height;\n      size = funcs.getSize(targetElm);\n      targetW = size.width;\n      targetH = size.height;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += Math.round(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += Math.round(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= selfH;\n      }\n      if (rel[4] === 'r') {\n        x -= selfW;\n      }\n      if (rel[3] === 'c') {\n        y -= Math.round(selfH / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= Math.round(selfW / 2);\n      }\n      return {\n        x: x,\n        y: y,\n        w: selfW,\n        h: selfH\n      };\n    }\n    var getUiContainerViewPort = function (customUiContainer) {\n      return {\n        x: 0,\n        y: 0,\n        w: customUiContainer.scrollWidth - 1,\n        h: customUiContainer.scrollHeight - 1\n      };\n    };\n    var getWindowViewPort = function () {\n      var win = domGlobals.window;\n      var x = Math.max(win.pageXOffset, domGlobals.document.body.scrollLeft, domGlobals.document.documentElement.scrollLeft);\n      var y = Math.max(win.pageYOffset, domGlobals.document.body.scrollTop, domGlobals.document.documentElement.scrollTop);\n      var w = win.innerWidth || domGlobals.document.documentElement.clientWidth;\n      var h = win.innerHeight || domGlobals.document.documentElement.clientHeight;\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var getViewPortRect = function (ctrl) {\n      var customUiContainer = UiContainer.getUiContainer(ctrl);\n      return customUiContainer && !isFixed(ctrl) ? getUiContainerViewPort(customUiContainer) : getWindowViewPort();\n    };\n    var Movable = {\n      testMoveRel: function (elm, rels) {\n        var viewPortRect = getViewPortRect(this);\n        for (var i = 0; i < rels.length; i++) {\n          var pos = calculateRelativePosition(this, elm, rels[i]);\n          if (isFixed(this)) {\n            if (pos.x > 0 && pos.x + pos.w < viewPortRect.w && pos.y > 0 && pos.y + pos.h < viewPortRect.h) {\n              return rels[i];\n            }\n          } else {\n            if (pos.x > viewPortRect.x && pos.x + pos.w < viewPortRect.w + viewPortRect.x && pos.y > viewPortRect.y && pos.y + pos.h < viewPortRect.h + viewPortRect.y) {\n              return rels[i];\n            }\n          }\n        }\n        return rels[0];\n      },\n      moveRel: function (elm, rel) {\n        if (typeof rel !== 'string') {\n          rel = this.testMoveRel(elm, rel);\n        }\n        var pos = calculateRelativePosition(this, elm, rel);\n        return this.moveTo(pos.x, pos.y);\n      },\n      moveBy: function (dx, dy) {\n        var self = this, rect = self.layoutRect();\n        self.moveTo(rect.x + dx, rect.y + dy);\n        return self;\n      },\n      moveTo: function (x, y) {\n        var self = this;\n        function constrain(value, max, size) {\n          if (value < 0) {\n            return 0;\n          }\n          if (value + size > max) {\n            value = max - size;\n            return value < 0 ? 0 : value;\n          }\n          return value;\n        }\n        if (self.settings.constrainToViewport) {\n          var viewPortRect = getViewPortRect(this);\n          var layoutRect = self.layoutRect();\n          x = constrain(x, viewPortRect.w + viewPortRect.x, layoutRect.w);\n          y = constrain(y, viewPortRect.h + viewPortRect.y, layoutRect.h);\n        }\n        var uiContainer = UiContainer.getUiContainer(self);\n        if (uiContainer && isStatic(uiContainer) && !isFixed(self)) {\n          x -= uiContainer.scrollLeft;\n          y -= uiContainer.scrollTop;\n        }\n        if (uiContainer) {\n          x += 1;\n          y += 1;\n        }\n        if (self.state.get('rendered')) {\n          self.layoutRect({\n            x: x,\n            y: y\n          }).repaint();\n        } else {\n          self.settings.x = x;\n          self.settings.y = y;\n        }\n        self.fire('move', {\n          x: x,\n          y: y\n        });\n        return self;\n      }\n    };\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.util.Class');\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.util.EventDispatcher');\n\n    var BoxUtils = {\n      parseBox: function (value) {\n        var len;\n        var radix = 10;\n        if (!value) {\n          return;\n        }\n        if (typeof value === 'number') {\n          value = value || 0;\n          return {\n            top: value,\n            left: value,\n            bottom: value,\n            right: value\n          };\n        }\n        value = value.split(' ');\n        len = value.length;\n        if (len === 1) {\n          value[1] = value[2] = value[3] = value[0];\n        } else if (len === 2) {\n          value[2] = value[0];\n          value[3] = value[1];\n        } else if (len === 3) {\n          value[3] = value[1];\n        }\n        return {\n          top: parseInt(value[0], radix) || 0,\n          right: parseInt(value[1], radix) || 0,\n          bottom: parseInt(value[2], radix) || 0,\n          left: parseInt(value[3], radix) || 0\n        };\n      },\n      measureBox: function (elm, prefix) {\n        function getStyle(name) {\n          var defaultView = elm.ownerDocument.defaultView;\n          if (defaultView) {\n            var computedStyle = defaultView.getComputedStyle(elm, null);\n            if (computedStyle) {\n              name = name.replace(/[A-Z]/g, function (a) {\n                return '-' + a;\n              });\n              return computedStyle.getPropertyValue(name);\n            } else {\n              return null;\n            }\n          }\n          return elm.currentStyle[name];\n        }\n        function getSide(name) {\n          var val = parseFloat(getStyle(name));\n          return isNaN(val) ? 0 : val;\n        }\n        return {\n          top: getSide(prefix + 'TopWidth'),\n          right: getSide(prefix + 'RightWidth'),\n          bottom: getSide(prefix + 'BottomWidth'),\n          left: getSide(prefix + 'LeftWidth')\n        };\n      }\n    };\n\n    function noop$1() {\n    }\n    function ClassList(onchange) {\n      this.cls = [];\n      this.cls._map = {};\n      this.onchange = onchange || noop$1;\n      this.prefix = '';\n    }\n    global$2.extend(ClassList.prototype, {\n      add: function (cls) {\n        if (cls && !this.contains(cls)) {\n          this.cls._map[cls] = true;\n          this.cls.push(cls);\n          this._change();\n        }\n        return this;\n      },\n      remove: function (cls) {\n        if (this.contains(cls)) {\n          var i = void 0;\n          for (i = 0; i < this.cls.length; i++) {\n            if (this.cls[i] === cls) {\n              break;\n            }\n          }\n          this.cls.splice(i, 1);\n          delete this.cls._map[cls];\n          this._change();\n        }\n        return this;\n      },\n      toggle: function (cls, state) {\n        var curState = this.contains(cls);\n        if (curState !== state) {\n          if (curState) {\n            this.remove(cls);\n          } else {\n            this.add(cls);\n          }\n          this._change();\n        }\n        return this;\n      },\n      contains: function (cls) {\n        return !!this.cls._map[cls];\n      },\n      _change: function () {\n        delete this.clsValue;\n        this.onchange.call(this);\n      }\n    });\n    ClassList.prototype.toString = function () {\n      var value;\n      if (this.clsValue) {\n        return this.clsValue;\n      }\n      value = '';\n      for (var i = 0; i < this.cls.length; i++) {\n        if (i > 0) {\n          value += ' ';\n        }\n        value += this.prefix + this.cls[i];\n      }\n      return value;\n    };\n\n    function unique(array) {\n      var uniqueItems = [];\n      var i = array.length, item;\n      while (i--) {\n        item = array[i];\n        if (!item.__checked) {\n          uniqueItems.push(item);\n          item.__checked = 1;\n        }\n      }\n      i = uniqueItems.length;\n      while (i--) {\n        delete uniqueItems[i].__checked;\n      }\n      return uniqueItems;\n    }\n    var expression = /^([\\w\\\\*]+)?(?:#([\\w\\-\\\\]+))?(?:\\.([\\w\\\\\\.]+))?(?:\\[\\@?([\\w\\\\]+)([\\^\\$\\*!~]?=)([\\w\\\\]+)\\])?(?:\\:(.+))?/i;\n    var chunker = /((?:\\((?:\\([^()]+\\)|[^()]+)+\\)|\\[(?:\\[[^\\[\\]]*\\]|['\"][^'\"]*['\"]|[^\\[\\]'\"]+)+\\]|\\\\.|[^ >+~,(\\[\\\\]+)+|[>+~])(\\s*,\\s*)?((?:.|\\r|\\n)*)/g;\n    var whiteSpace = /^\\s*|\\s*$/g;\n    var Collection;\n    var Selector = global$a.extend({\n      init: function (selector) {\n        var match = this.match;\n        function compileNameFilter(name) {\n          if (name) {\n            name = name.toLowerCase();\n            return function (item) {\n              return name === '*' || item.type === name;\n            };\n          }\n        }\n        function compileIdFilter(id) {\n          if (id) {\n            return function (item) {\n              return item._name === id;\n            };\n          }\n        }\n        function compileClassesFilter(classes) {\n          if (classes) {\n            classes = classes.split('.');\n            return function (item) {\n              var i = classes.length;\n              while (i--) {\n                if (!item.classes.contains(classes[i])) {\n                  return false;\n                }\n              }\n              return true;\n            };\n          }\n        }\n        function compileAttrFilter(name, cmp, check) {\n          if (name) {\n            return function (item) {\n              var value = item[name] ? item[name]() : '';\n              return !cmp ? !!check : cmp === '=' ? value === check : cmp === '*=' ? value.indexOf(check) >= 0 : cmp === '~=' ? (' ' + value + ' ').indexOf(' ' + check + ' ') >= 0 : cmp === '!=' ? value !== check : cmp === '^=' ? value.indexOf(check) === 0 : cmp === '$=' ? value.substr(value.length - check.length) === check : false;\n            };\n          }\n        }\n        function compilePsuedoFilter(name) {\n          var notSelectors;\n          if (name) {\n            name = /(?:not\\((.+)\\))|(.+)/i.exec(name);\n            if (!name[1]) {\n              name = name[2];\n              return function (item, index, length) {\n                return name === 'first' ? index === 0 : name === 'last' ? index === length - 1 : name === 'even' ? index % 2 === 0 : name === 'odd' ? index % 2 === 1 : item[name] ? item[name]() : false;\n              };\n            }\n            notSelectors = parseChunks(name[1], []);\n            return function (item) {\n              return !match(item, notSelectors);\n            };\n          }\n        }\n        function compile(selector, filters, direct) {\n          var parts;\n          function add(filter) {\n            if (filter) {\n              filters.push(filter);\n            }\n          }\n          parts = expression.exec(selector.replace(whiteSpace, ''));\n          add(compileNameFilter(parts[1]));\n          add(compileIdFilter(parts[2]));\n          add(compileClassesFilter(parts[3]));\n          add(compileAttrFilter(parts[4], parts[5], parts[6]));\n          add(compilePsuedoFilter(parts[7]));\n          filters.pseudo = !!parts[7];\n          filters.direct = direct;\n          return filters;\n        }\n        function parseChunks(selector, selectors) {\n          var parts = [];\n          var extra, matches, i;\n          do {\n            chunker.exec('');\n            matches = chunker.exec(selector);\n            if (matches) {\n              selector = matches[3];\n              parts.push(matches[1]);\n              if (matches[2]) {\n                extra = matches[3];\n                break;\n              }\n            }\n          } while (matches);\n          if (extra) {\n            parseChunks(extra, selectors);\n          }\n          selector = [];\n          for (i = 0; i < parts.length; i++) {\n            if (parts[i] !== '>') {\n              selector.push(compile(parts[i], [], parts[i - 1] === '>'));\n            }\n          }\n          selectors.push(selector);\n          return selectors;\n        }\n        this._selectors = parseChunks(selector, []);\n      },\n      match: function (control, selectors) {\n        var i, l, si, sl, selector, fi, fl, filters, index, length, siblings, count, item;\n        selectors = selectors || this._selectors;\n        for (i = 0, l = selectors.length; i < l; i++) {\n          selector = selectors[i];\n          sl = selector.length;\n          item = control;\n          count = 0;\n          for (si = sl - 1; si >= 0; si--) {\n            filters = selector[si];\n            while (item) {\n              if (filters.pseudo) {\n                siblings = item.parent().items();\n                index = length = siblings.length;\n                while (index--) {\n                  if (siblings[index] === item) {\n                    break;\n                  }\n                }\n              }\n              for (fi = 0, fl = filters.length; fi < fl; fi++) {\n                if (!filters[fi](item, index, length)) {\n                  fi = fl + 1;\n                  break;\n                }\n              }\n              if (fi === fl) {\n                count++;\n                break;\n              } else {\n                if (si === sl - 1) {\n                  break;\n                }\n              }\n              item = item.parent();\n            }\n          }\n          if (count === sl) {\n            return true;\n          }\n        }\n        return false;\n      },\n      find: function (container) {\n        var matches = [], i, l;\n        var selectors = this._selectors;\n        function collect(items, selector, index) {\n          var i, l, fi, fl, item;\n          var filters = selector[index];\n          for (i = 0, l = items.length; i < l; i++) {\n            item = items[i];\n            for (fi = 0, fl = filters.length; fi < fl; fi++) {\n              if (!filters[fi](item, i, l)) {\n                fi = fl + 1;\n                break;\n              }\n            }\n            if (fi === fl) {\n              if (index === selector.length - 1) {\n                matches.push(item);\n              } else {\n                if (item.items) {\n                  collect(item.items(), selector, index + 1);\n                }\n              }\n            } else if (filters.direct) {\n              return;\n            }\n            if (item.items) {\n              collect(item.items(), selector, index);\n            }\n          }\n        }\n        if (container.items) {\n          for (i = 0, l = selectors.length; i < l; i++) {\n            collect(container.items(), selectors[i], 0);\n          }\n          if (l > 1) {\n            matches = unique(matches);\n          }\n        }\n        if (!Collection) {\n          Collection = Selector.Collection;\n        }\n        return new Collection(matches);\n      }\n    });\n\n    var Collection$1, proto;\n    var push$1 = Array.prototype.push, slice$1 = Array.prototype.slice;\n    proto = {\n      length: 0,\n      init: function (items) {\n        if (items) {\n          this.add(items);\n        }\n      },\n      add: function (items) {\n        var self = this;\n        if (!global$2.isArray(items)) {\n          if (items instanceof Collection$1) {\n            self.add(items.toArray());\n          } else {\n            push$1.call(self, items);\n          }\n        } else {\n          push$1.apply(self, items);\n        }\n        return self;\n      },\n      set: function (items) {\n        var self = this;\n        var len = self.length;\n        var i;\n        self.length = 0;\n        self.add(items);\n        for (i = self.length; i < len; i++) {\n          delete self[i];\n        }\n        return self;\n      },\n      filter: function (selector) {\n        var self = this;\n        var i, l;\n        var matches = [];\n        var item, match;\n        if (typeof selector === 'string') {\n          selector = new Selector(selector);\n          match = function (item) {\n            return selector.match(item);\n          };\n        } else {\n          match = selector;\n        }\n        for (i = 0, l = self.length; i < l; i++) {\n          item = self[i];\n          if (match(item)) {\n            matches.push(item);\n          }\n        }\n        return new Collection$1(matches);\n      },\n      slice: function () {\n        return new Collection$1(slice$1.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      each: function (callback) {\n        global$2.each(this, callback);\n        return this;\n      },\n      toArray: function () {\n        return global$2.toArray(this);\n      },\n      indexOf: function (ctrl) {\n        var self = this;\n        var i = self.length;\n        while (i--) {\n          if (self[i] === ctrl) {\n            break;\n          }\n        }\n        return i;\n      },\n      reverse: function () {\n        return new Collection$1(global$2.toArray(this).reverse());\n      },\n      hasClass: function (cls) {\n        return this[0] ? this[0].classes.contains(cls) : false;\n      },\n      prop: function (name, value) {\n        var self = this;\n        var item;\n        if (value !== undefined) {\n          self.each(function (item) {\n            if (item[name]) {\n              item[name](value);\n            }\n          });\n          return self;\n        }\n        item = self[0];\n        if (item && item[name]) {\n          return item[name]();\n        }\n      },\n      exec: function (name) {\n        var self = this, args = global$2.toArray(arguments).slice(1);\n        self.each(function (item) {\n          if (item[name]) {\n            item[name].apply(item, args);\n          }\n        });\n        return self;\n      },\n      remove: function () {\n        var i = this.length;\n        while (i--) {\n          this[i].remove();\n        }\n        return this;\n      },\n      addClass: function (cls) {\n        return this.each(function (item) {\n          item.classes.add(cls);\n        });\n      },\n      removeClass: function (cls) {\n        return this.each(function (item) {\n          item.classes.remove(cls);\n        });\n      }\n    };\n    global$2.each('fire on off show hide append prepend before after reflow'.split(' '), function (name) {\n      proto[name] = function () {\n        var args = global$2.toArray(arguments);\n        this.each(function (ctrl) {\n          if (name in ctrl) {\n            ctrl[name].apply(ctrl, args);\n          }\n        });\n        return this;\n      };\n    });\n    global$2.each('text name disabled active selected checked visible parent value data'.split(' '), function (name) {\n      proto[name] = function (value) {\n        return this.prop(name, value);\n      };\n    });\n    Collection$1 = global$a.extend(proto);\n    Selector.Collection = Collection$1;\n    var Collection$2 = Collection$1;\n\n    var Binding = function (settings) {\n      this.create = settings.create;\n    };\n    Binding.create = function (model, name) {\n      return new Binding({\n        create: function (otherModel, otherName) {\n          var bindings;\n          var fromSelfToOther = function (e) {\n            otherModel.set(otherName, e.value);\n          };\n          var fromOtherToSelf = function (e) {\n            model.set(name, e.value);\n          };\n          otherModel.on('change:' + otherName, fromOtherToSelf);\n          model.on('change:' + name, fromSelfToOther);\n          bindings = otherModel._bindings;\n          if (!bindings) {\n            bindings = otherModel._bindings = [];\n            otherModel.on('destroy', function () {\n              var i = bindings.length;\n              while (i--) {\n                bindings[i]();\n              }\n            });\n          }\n          bindings.push(function () {\n            model.off('change:' + name, fromSelfToOther);\n          });\n          return model.get(name);\n        }\n      });\n    };\n\n    var global$c = tinymce.util.Tools.resolve('tinymce.util.Observable');\n\n    function isNode(node) {\n      return node.nodeType > 0;\n    }\n    function isEqual(a, b) {\n      var k, checked;\n      if (a === b) {\n        return true;\n      }\n      if (a === null || b === null) {\n        return a === b;\n      }\n      if (typeof a !== 'object' || typeof b !== 'object') {\n        return a === b;\n      }\n      if (global$2.isArray(b)) {\n        if (a.length !== b.length) {\n          return false;\n        }\n        k = a.length;\n        while (k--) {\n          if (!isEqual(a[k], b[k])) {\n            return false;\n          }\n        }\n      }\n      if (isNode(a) || isNode(b)) {\n        return a === b;\n      }\n      checked = {};\n      for (k in b) {\n        if (!isEqual(a[k], b[k])) {\n          return false;\n        }\n        checked[k] = true;\n      }\n      for (k in a) {\n        if (!checked[k] && !isEqual(a[k], b[k])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    var ObservableObject = global$a.extend({\n      Mixins: [global$c],\n      init: function (data) {\n        var name, value;\n        data = data || {};\n        for (name in data) {\n          value = data[name];\n          if (value instanceof Binding) {\n            data[name] = value.create(this, name);\n          }\n        }\n        this.data = data;\n      },\n      set: function (name, value) {\n        var key, args;\n        var oldValue = this.data[name];\n        if (value instanceof Binding) {\n          value = value.create(this, name);\n        }\n        if (typeof name === 'object') {\n          for (key in name) {\n            this.set(key, name[key]);\n          }\n          return this;\n        }\n        if (!isEqual(oldValue, value)) {\n          this.data[name] = value;\n          args = {\n            target: this,\n            name: name,\n            value: value,\n            oldValue: oldValue\n          };\n          this.fire('change:' + name, args);\n          this.fire('change', args);\n        }\n        return this;\n      },\n      get: function (name) {\n        return this.data[name];\n      },\n      has: function (name) {\n        return name in this.data;\n      },\n      bind: function (name) {\n        return Binding.create(this, name);\n      },\n      destroy: function () {\n        this.fire('destroy');\n      }\n    });\n\n    var dirtyCtrls = {}, animationFrameRequested;\n    var ReflowQueue = {\n      add: function (ctrl) {\n        var parent = ctrl.parent();\n        if (parent) {\n          if (!parent._layout || parent._layout.isNative()) {\n            return;\n          }\n          if (!dirtyCtrls[parent._id]) {\n            dirtyCtrls[parent._id] = parent;\n          }\n          if (!animationFrameRequested) {\n            animationFrameRequested = true;\n            global$7.requestAnimationFrame(function () {\n              var id, ctrl;\n              animationFrameRequested = false;\n              for (id in dirtyCtrls) {\n                ctrl = dirtyCtrls[id];\n                if (ctrl.state.get('rendered')) {\n                  ctrl.reflow();\n                }\n              }\n              dirtyCtrls = {};\n            }, domGlobals.document.body);\n          }\n        }\n      },\n      remove: function (ctrl) {\n        if (dirtyCtrls[ctrl._id]) {\n          delete dirtyCtrls[ctrl._id];\n        }\n      }\n    };\n\n    var hasMouseWheelEventSupport = 'onmousewheel' in domGlobals.document;\n    var hasWheelEventSupport = false;\n    var classPrefix = 'mce-';\n    var Control, idCounter = 0;\n    var proto$1 = {\n      Statics: { classPrefix: classPrefix },\n      isRtl: function () {\n        return Control.rtl;\n      },\n      classPrefix: classPrefix,\n      init: function (settings) {\n        var self = this;\n        var classes, defaultClasses;\n        function applyClasses(classes) {\n          var i;\n          classes = classes.split(' ');\n          for (i = 0; i < classes.length; i++) {\n            self.classes.add(classes[i]);\n          }\n        }\n        self.settings = settings = global$2.extend({}, self.Defaults, settings);\n        self._id = settings.id || 'mceu_' + idCounter++;\n        self._aria = { role: settings.role };\n        self._elmCache = {};\n        self.$ = global$9;\n        self.state = new ObservableObject({\n          visible: true,\n          active: false,\n          disabled: false,\n          value: ''\n        });\n        self.data = new ObservableObject(settings.data);\n        self.classes = new ClassList(function () {\n          if (self.state.get('rendered')) {\n            self.getEl().className = this.toString();\n          }\n        });\n        self.classes.prefix = self.classPrefix;\n        classes = settings.classes;\n        if (classes) {\n          if (self.Defaults) {\n            defaultClasses = self.Defaults.classes;\n            if (defaultClasses && classes !== defaultClasses) {\n              applyClasses(defaultClasses);\n            }\n          }\n          applyClasses(classes);\n        }\n        global$2.each('title text name visible disabled active value'.split(' '), function (name) {\n          if (name in settings) {\n            self[name](settings[name]);\n          }\n        });\n        self.on('click', function () {\n          if (self.disabled()) {\n            return false;\n          }\n        });\n        self.settings = settings;\n        self.borderBox = BoxUtils.parseBox(settings.border);\n        self.paddingBox = BoxUtils.parseBox(settings.padding);\n        self.marginBox = BoxUtils.parseBox(settings.margin);\n        if (settings.hidden) {\n          self.hide();\n        }\n      },\n      Properties: 'parent,name',\n      getContainerElm: function () {\n        var uiContainer = UiContainer.getUiContainer(this);\n        return uiContainer ? uiContainer : funcs.getContainer();\n      },\n      getParentCtrl: function (elm) {\n        var ctrl;\n        var lookup = this.getRoot().controlIdLookup;\n        while (elm && lookup) {\n          ctrl = lookup[elm.id];\n          if (ctrl) {\n            break;\n          }\n          elm = elm.parentNode;\n        }\n        return ctrl;\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var settings = self.settings;\n        var borderBox, layoutRect;\n        var elm = self.getEl();\n        var width, height, minWidth, minHeight, autoResize;\n        var startMinWidth, startMinHeight, initialSize;\n        borderBox = self.borderBox = self.borderBox || BoxUtils.measureBox(elm, 'border');\n        self.paddingBox = self.paddingBox || BoxUtils.measureBox(elm, 'padding');\n        self.marginBox = self.marginBox || BoxUtils.measureBox(elm, 'margin');\n        initialSize = funcs.getSize(elm);\n        startMinWidth = settings.minWidth;\n        startMinHeight = settings.minHeight;\n        minWidth = startMinWidth || initialSize.width;\n        minHeight = startMinHeight || initialSize.height;\n        width = settings.width;\n        height = settings.height;\n        autoResize = settings.autoResize;\n        autoResize = typeof autoResize !== 'undefined' ? autoResize : !width && !height;\n        width = width || minWidth;\n        height = height || minHeight;\n        var deltaW = borderBox.left + borderBox.right;\n        var deltaH = borderBox.top + borderBox.bottom;\n        var maxW = settings.maxWidth || 65535;\n        var maxH = settings.maxHeight || 65535;\n        self._layoutRect = layoutRect = {\n          x: settings.x || 0,\n          y: settings.y || 0,\n          w: width,\n          h: height,\n          deltaW: deltaW,\n          deltaH: deltaH,\n          contentW: width - deltaW,\n          contentH: height - deltaH,\n          innerW: width - deltaW,\n          innerH: height - deltaH,\n          startMinWidth: startMinWidth || 0,\n          startMinHeight: startMinHeight || 0,\n          minW: Math.min(minWidth, maxW),\n          minH: Math.min(minHeight, maxH),\n          maxW: maxW,\n          maxH: maxH,\n          autoResize: autoResize,\n          scrollW: 0\n        };\n        self._lastLayoutRect = {};\n        return layoutRect;\n      },\n      layoutRect: function (newRect) {\n        var self = this;\n        var curRect = self._layoutRect, lastLayoutRect, size, deltaWidth, deltaHeight, repaintControls;\n        if (!curRect) {\n          curRect = self.initLayoutRect();\n        }\n        if (newRect) {\n          deltaWidth = curRect.deltaW;\n          deltaHeight = curRect.deltaH;\n          if (newRect.x !== undefined) {\n            curRect.x = newRect.x;\n          }\n          if (newRect.y !== undefined) {\n            curRect.y = newRect.y;\n          }\n          if (newRect.minW !== undefined) {\n            curRect.minW = newRect.minW;\n          }\n          if (newRect.minH !== undefined) {\n            curRect.minH = newRect.minH;\n          }\n          size = newRect.w;\n          if (size !== undefined) {\n            size = size < curRect.minW ? curRect.minW : size;\n            size = size > curRect.maxW ? curRect.maxW : size;\n            curRect.w = size;\n            curRect.innerW = size - deltaWidth;\n          }\n          size = newRect.h;\n          if (size !== undefined) {\n            size = size < curRect.minH ? curRect.minH : size;\n            size = size > curRect.maxH ? curRect.maxH : size;\n            curRect.h = size;\n            curRect.innerH = size - deltaHeight;\n          }\n          size = newRect.innerW;\n          if (size !== undefined) {\n            size = size < curRect.minW - deltaWidth ? curRect.minW - deltaWidth : size;\n            size = size > curRect.maxW - deltaWidth ? curRect.maxW - deltaWidth : size;\n            curRect.innerW = size;\n            curRect.w = size + deltaWidth;\n          }\n          size = newRect.innerH;\n          if (size !== undefined) {\n            size = size < curRect.minH - deltaHeight ? curRect.minH - deltaHeight : size;\n            size = size > curRect.maxH - deltaHeight ? curRect.maxH - deltaHeight : size;\n            curRect.innerH = size;\n            curRect.h = size + deltaHeight;\n          }\n          if (newRect.contentW !== undefined) {\n            curRect.contentW = newRect.contentW;\n          }\n          if (newRect.contentH !== undefined) {\n            curRect.contentH = newRect.contentH;\n          }\n          lastLayoutRect = self._lastLayoutRect;\n          if (lastLayoutRect.x !== curRect.x || lastLayoutRect.y !== curRect.y || lastLayoutRect.w !== curRect.w || lastLayoutRect.h !== curRect.h) {\n            repaintControls = Control.repaintControls;\n            if (repaintControls) {\n              if (repaintControls.map && !repaintControls.map[self._id]) {\n                repaintControls.push(self);\n                repaintControls.map[self._id] = true;\n              }\n            }\n            lastLayoutRect.x = curRect.x;\n            lastLayoutRect.y = curRect.y;\n            lastLayoutRect.w = curRect.w;\n            lastLayoutRect.h = curRect.h;\n          }\n          return self;\n        }\n        return curRect;\n      },\n      repaint: function () {\n        var self = this;\n        var style, bodyStyle, bodyElm, rect, borderBox;\n        var borderW, borderH, lastRepaintRect, round, value;\n        round = !domGlobals.document.createRange ? Math.round : function (value) {\n          return value;\n        };\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        lastRepaintRect = self._lastRepaintRect || {};\n        borderBox = self.borderBox;\n        borderW = borderBox.left + borderBox.right;\n        borderH = borderBox.top + borderBox.bottom;\n        if (rect.x !== lastRepaintRect.x) {\n          style.left = round(rect.x) + 'px';\n          lastRepaintRect.x = rect.x;\n        }\n        if (rect.y !== lastRepaintRect.y) {\n          style.top = round(rect.y) + 'px';\n          lastRepaintRect.y = rect.y;\n        }\n        if (rect.w !== lastRepaintRect.w) {\n          value = round(rect.w - borderW);\n          style.width = (value >= 0 ? value : 0) + 'px';\n          lastRepaintRect.w = rect.w;\n        }\n        if (rect.h !== lastRepaintRect.h) {\n          value = round(rect.h - borderH);\n          style.height = (value >= 0 ? value : 0) + 'px';\n          lastRepaintRect.h = rect.h;\n        }\n        if (self._hasBody && rect.innerW !== lastRepaintRect.innerW) {\n          value = round(rect.innerW);\n          bodyElm = self.getEl('body');\n          if (bodyElm) {\n            bodyStyle = bodyElm.style;\n            bodyStyle.width = (value >= 0 ? value : 0) + 'px';\n          }\n          lastRepaintRect.innerW = rect.innerW;\n        }\n        if (self._hasBody && rect.innerH !== lastRepaintRect.innerH) {\n          value = round(rect.innerH);\n          bodyElm = bodyElm || self.getEl('body');\n          if (bodyElm) {\n            bodyStyle = bodyStyle || bodyElm.style;\n            bodyStyle.height = (value >= 0 ? value : 0) + 'px';\n          }\n          lastRepaintRect.innerH = rect.innerH;\n        }\n        self._lastRepaintRect = lastRepaintRect;\n        self.fire('repaint', {}, false);\n      },\n      updateLayoutRect: function () {\n        var self = this;\n        self.parent()._lastRect = null;\n        funcs.css(self.getEl(), {\n          width: '',\n          height: ''\n        });\n        self._layoutRect = self._lastRepaintRect = self._lastLayoutRect = null;\n        self.initLayoutRect();\n      },\n      on: function (name, callback) {\n        var self = this;\n        function resolveCallbackName(name) {\n          var callback, scope;\n          if (typeof name !== 'string') {\n            return name;\n          }\n          return function (e) {\n            if (!callback) {\n              self.parentsAndSelf().each(function (ctrl) {\n                var callbacks = ctrl.settings.callbacks;\n                if (callbacks && (callback = callbacks[name])) {\n                  scope = ctrl;\n                  return false;\n                }\n              });\n            }\n            if (!callback) {\n              e.action = name;\n              this.fire('execute', e);\n              return;\n            }\n            return callback.call(scope, e);\n          };\n        }\n        getEventDispatcher(self).on(name, resolveCallbackName(callback));\n        return self;\n      },\n      off: function (name, callback) {\n        getEventDispatcher(this).off(name, callback);\n        return this;\n      },\n      fire: function (name, args, bubble) {\n        var self = this;\n        args = args || {};\n        if (!args.control) {\n          args.control = self;\n        }\n        args = getEventDispatcher(self).fire(name, args);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !args.isPropagationStopped()) {\n            parent.fire(name, args, false);\n            parent = parent.parent();\n          }\n        }\n        return args;\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      },\n      parents: function (selector) {\n        var self = this;\n        var ctrl, parents = new Collection$2();\n        for (ctrl = self.parent(); ctrl; ctrl = ctrl.parent()) {\n          parents.add(ctrl);\n        }\n        if (selector) {\n          parents = parents.filter(selector);\n        }\n        return parents;\n      },\n      parentsAndSelf: function (selector) {\n        return new Collection$2(this).add(this.parents(selector));\n      },\n      next: function () {\n        var parentControls = this.parent().items();\n        return parentControls[parentControls.indexOf(this) + 1];\n      },\n      prev: function () {\n        var parentControls = this.parent().items();\n        return parentControls[parentControls.indexOf(this) - 1];\n      },\n      innerHtml: function (html) {\n        this.$el.html(html);\n        return this;\n      },\n      getEl: function (suffix) {\n        var id = suffix ? this._id + '-' + suffix : this._id;\n        if (!this._elmCache[id]) {\n          this._elmCache[id] = global$9('#' + id)[0];\n        }\n        return this._elmCache[id];\n      },\n      show: function () {\n        return this.visible(true);\n      },\n      hide: function () {\n        return this.visible(false);\n      },\n      focus: function () {\n        try {\n          this.getEl().focus();\n        } catch (ex) {\n        }\n        return this;\n      },\n      blur: function () {\n        this.getEl().blur();\n        return this;\n      },\n      aria: function (name, value) {\n        var self = this, elm = self.getEl(self.ariaTarget);\n        if (typeof value === 'undefined') {\n          return self._aria[name];\n        }\n        self._aria[name] = value;\n        if (self.state.get('rendered')) {\n          elm.setAttribute(name === 'role' ? name : 'aria-' + name, value);\n        }\n        return self;\n      },\n      encode: function (text, translate) {\n        if (translate !== false) {\n          text = this.translate(text);\n        }\n        return (text || '').replace(/[&<>\"]/g, function (match) {\n          return '&#' + match.charCodeAt(0) + ';';\n        });\n      },\n      translate: function (text) {\n        return Control.translate ? Control.translate(text) : text;\n      },\n      before: function (items) {\n        var self = this, parent = self.parent();\n        if (parent) {\n          parent.insert(items, parent.items().indexOf(self), true);\n        }\n        return self;\n      },\n      after: function (items) {\n        var self = this, parent = self.parent();\n        if (parent) {\n          parent.insert(items, parent.items().indexOf(self));\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var elm = self.getEl();\n        var parent = self.parent();\n        var newItems, i;\n        if (self.items) {\n          var controls = self.items().toArray();\n          i = controls.length;\n          while (i--) {\n            controls[i].remove();\n          }\n        }\n        if (parent && parent.items) {\n          newItems = [];\n          parent.items().each(function (item) {\n            if (item !== self) {\n              newItems.push(item);\n            }\n          });\n          parent.items().set(newItems);\n          parent._lastRect = null;\n        }\n        if (self._eventsRoot && self._eventsRoot === self) {\n          global$9(elm).off();\n        }\n        var lookup = self.getRoot().controlIdLookup;\n        if (lookup) {\n          delete lookup[self._id];\n        }\n        if (elm && elm.parentNode) {\n          elm.parentNode.removeChild(elm);\n        }\n        self.state.set('rendered', false);\n        self.state.destroy();\n        self.fire('remove');\n        return self;\n      },\n      renderBefore: function (elm) {\n        global$9(elm).before(this.renderHtml());\n        this.postRender();\n        return this;\n      },\n      renderTo: function (elm) {\n        global$9(elm || this.getContainerElm()).append(this.renderHtml());\n        this.postRender();\n        return this;\n      },\n      preRender: function () {\n      },\n      render: function () {\n      },\n      renderHtml: function () {\n        return '<div id=\"' + this._id + '\" class=\"' + this.classes + '\"></div>';\n      },\n      postRender: function () {\n        var self = this;\n        var settings = self.settings;\n        var elm, box, parent, name, parentEventsRoot;\n        self.$el = global$9(self.getEl());\n        self.state.set('rendered', true);\n        for (name in settings) {\n          if (name.indexOf('on') === 0) {\n            self.on(name.substr(2), settings[name]);\n          }\n        }\n        if (self._eventsRoot) {\n          for (parent = self.parent(); !parentEventsRoot && parent; parent = parent.parent()) {\n            parentEventsRoot = parent._eventsRoot;\n          }\n          if (parentEventsRoot) {\n            for (name in parentEventsRoot._nativeEvents) {\n              self._nativeEvents[name] = true;\n            }\n          }\n        }\n        bindPendingEvents(self);\n        if (settings.style) {\n          elm = self.getEl();\n          if (elm) {\n            elm.setAttribute('style', settings.style);\n            elm.style.cssText = settings.style;\n          }\n        }\n        if (self.settings.border) {\n          box = self.borderBox;\n          self.$el.css({\n            'border-top-width': box.top,\n            'border-right-width': box.right,\n            'border-bottom-width': box.bottom,\n            'border-left-width': box.left\n          });\n        }\n        var root = self.getRoot();\n        if (!root.controlIdLookup) {\n          root.controlIdLookup = {};\n        }\n        root.controlIdLookup[self._id] = self;\n        for (var key in self._aria) {\n          self.aria(key, self._aria[key]);\n        }\n        if (self.state.get('visible') === false) {\n          self.getEl().style.display = 'none';\n        }\n        self.bindStates();\n        self.state.on('change:visible', function (e) {\n          var state = e.value;\n          var parentCtrl;\n          if (self.state.get('rendered')) {\n            self.getEl().style.display = state === false ? 'none' : '';\n            self.getEl().getBoundingClientRect();\n          }\n          parentCtrl = self.parent();\n          if (parentCtrl) {\n            parentCtrl._lastRect = null;\n          }\n          self.fire(state ? 'show' : 'hide');\n          ReflowQueue.add(self);\n        });\n        self.fire('postrender', {}, false);\n      },\n      bindStates: function () {\n      },\n      scrollIntoView: function (align) {\n        function getOffset(elm, rootElm) {\n          var x, y, parent = elm;\n          x = y = 0;\n          while (parent && parent !== rootElm && parent.nodeType) {\n            x += parent.offsetLeft || 0;\n            y += parent.offsetTop || 0;\n            parent = parent.offsetParent;\n          }\n          return {\n            x: x,\n            y: y\n          };\n        }\n        var elm = this.getEl(), parentElm = elm.parentNode;\n        var x, y, width, height, parentWidth, parentHeight;\n        var pos = getOffset(elm, parentElm);\n        x = pos.x;\n        y = pos.y;\n        width = elm.offsetWidth;\n        height = elm.offsetHeight;\n        parentWidth = parentElm.clientWidth;\n        parentHeight = parentElm.clientHeight;\n        if (align === 'end') {\n          x -= parentWidth - width;\n          y -= parentHeight - height;\n        } else if (align === 'center') {\n          x -= parentWidth / 2 - width / 2;\n          y -= parentHeight / 2 - height / 2;\n        }\n        parentElm.scrollLeft = x;\n        parentElm.scrollTop = y;\n        return this;\n      },\n      getRoot: function () {\n        var ctrl = this, rootControl;\n        var parents = [];\n        while (ctrl) {\n          if (ctrl.rootControl) {\n            rootControl = ctrl.rootControl;\n            break;\n          }\n          parents.push(ctrl);\n          rootControl = ctrl;\n          ctrl = ctrl.parent();\n        }\n        if (!rootControl) {\n          rootControl = this;\n        }\n        var i = parents.length;\n        while (i--) {\n          parents[i].rootControl = rootControl;\n        }\n        return rootControl;\n      },\n      reflow: function () {\n        ReflowQueue.remove(this);\n        var parent = this.parent();\n        if (parent && parent._layout && !parent._layout.isNative()) {\n          parent.reflow();\n        }\n        return this;\n      }\n    };\n    global$2.each('text title visible disabled active value'.split(' '), function (name) {\n      proto$1[name] = function (value) {\n        if (arguments.length === 0) {\n          return this.state.get(name);\n        }\n        if (typeof value !== 'undefined') {\n          this.state.set(name, value);\n        }\n        return this;\n      };\n    });\n    Control = global$a.extend(proto$1);\n    function getEventDispatcher(obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new global$b({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (state && global$b.isNative(name)) {\n              if (!obj._nativeEvents) {\n                obj._nativeEvents = {};\n              }\n              obj._nativeEvents[name] = true;\n              if (obj.state.get('rendered')) {\n                bindPendingEvents(obj);\n              }\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    }\n    function bindPendingEvents(eventCtrl) {\n      var i, l, parents, eventRootCtrl, nativeEvents, name;\n      function delegate(e) {\n        var control = eventCtrl.getParentCtrl(e.target);\n        if (control) {\n          control.fire(e.type, e);\n        }\n      }\n      function mouseLeaveHandler() {\n        var ctrl = eventRootCtrl._lastHoverCtrl;\n        if (ctrl) {\n          ctrl.fire('mouseleave', { target: ctrl.getEl() });\n          ctrl.parents().each(function (ctrl) {\n            ctrl.fire('mouseleave', { target: ctrl.getEl() });\n          });\n          eventRootCtrl._lastHoverCtrl = null;\n        }\n      }\n      function mouseEnterHandler(e) {\n        var ctrl = eventCtrl.getParentCtrl(e.target), lastCtrl = eventRootCtrl._lastHoverCtrl, idx = 0, i, parents, lastParents;\n        if (ctrl !== lastCtrl) {\n          eventRootCtrl._lastHoverCtrl = ctrl;\n          parents = ctrl.parents().toArray().reverse();\n          parents.push(ctrl);\n          if (lastCtrl) {\n            lastParents = lastCtrl.parents().toArray().reverse();\n            lastParents.push(lastCtrl);\n            for (idx = 0; idx < lastParents.length; idx++) {\n              if (parents[idx] !== lastParents[idx]) {\n                break;\n              }\n            }\n            for (i = lastParents.length - 1; i >= idx; i--) {\n              lastCtrl = lastParents[i];\n              lastCtrl.fire('mouseleave', { target: lastCtrl.getEl() });\n            }\n          }\n          for (i = idx; i < parents.length; i++) {\n            ctrl = parents[i];\n            ctrl.fire('mouseenter', { target: ctrl.getEl() });\n          }\n        }\n      }\n      function fixWheelEvent(e) {\n        e.preventDefault();\n        if (e.type === 'mousewheel') {\n          e.deltaY = -1 / 40 * e.wheelDelta;\n          if (e.wheelDeltaX) {\n            e.deltaX = -1 / 40 * e.wheelDeltaX;\n          }\n        } else {\n          e.deltaX = 0;\n          e.deltaY = e.detail;\n        }\n        e = eventCtrl.fire('wheel', e);\n      }\n      nativeEvents = eventCtrl._nativeEvents;\n      if (nativeEvents) {\n        parents = eventCtrl.parents().toArray();\n        parents.unshift(eventCtrl);\n        for (i = 0, l = parents.length; !eventRootCtrl && i < l; i++) {\n          eventRootCtrl = parents[i]._eventsRoot;\n        }\n        if (!eventRootCtrl) {\n          eventRootCtrl = parents[parents.length - 1] || eventCtrl;\n        }\n        eventCtrl._eventsRoot = eventRootCtrl;\n        for (l = i, i = 0; i < l; i++) {\n          parents[i]._eventsRoot = eventRootCtrl;\n        }\n        var eventRootDelegates = eventRootCtrl._delegates;\n        if (!eventRootDelegates) {\n          eventRootDelegates = eventRootCtrl._delegates = {};\n        }\n        for (name in nativeEvents) {\n          if (!nativeEvents) {\n            return false;\n          }\n          if (name === 'wheel' && !hasWheelEventSupport) {\n            if (hasMouseWheelEventSupport) {\n              global$9(eventCtrl.getEl()).on('mousewheel', fixWheelEvent);\n            } else {\n              global$9(eventCtrl.getEl()).on('DOMMouseScroll', fixWheelEvent);\n            }\n            continue;\n          }\n          if (name === 'mouseenter' || name === 'mouseleave') {\n            if (!eventRootCtrl._hasMouseEnter) {\n              global$9(eventRootCtrl.getEl()).on('mouseleave', mouseLeaveHandler).on('mouseover', mouseEnterHandler);\n              eventRootCtrl._hasMouseEnter = 1;\n            }\n          } else if (!eventRootDelegates[name]) {\n            global$9(eventRootCtrl.getEl()).on(name, delegate);\n            eventRootDelegates[name] = true;\n          }\n          nativeEvents[name] = false;\n        }\n      }\n    }\n    var Control$1 = Control;\n\n    var hasTabstopData = function (elm) {\n      return elm.getAttribute('data-mce-tabstop') ? true : false;\n    };\n    function KeyboardNavigation (settings) {\n      var root = settings.root;\n      var focusedElement, focusedControl;\n      function isElement(node) {\n        return node && node.nodeType === 1;\n      }\n      try {\n        focusedElement = domGlobals.document.activeElement;\n      } catch (ex) {\n        focusedElement = domGlobals.document.body;\n      }\n      focusedControl = root.getParentCtrl(focusedElement);\n      function getRole(elm) {\n        elm = elm || focusedElement;\n        if (isElement(elm)) {\n          return elm.getAttribute('role');\n        }\n        return null;\n      }\n      function getParentRole(elm) {\n        var role, parent = elm || focusedElement;\n        while (parent = parent.parentNode) {\n          if (role = getRole(parent)) {\n            return role;\n          }\n        }\n      }\n      function getAriaProp(name) {\n        var elm = focusedElement;\n        if (isElement(elm)) {\n          return elm.getAttribute('aria-' + name);\n        }\n      }\n      function isTextInputElement(elm) {\n        var tagName = elm.tagName.toUpperCase();\n        return tagName === 'INPUT' || tagName === 'TEXTAREA' || tagName === 'SELECT';\n      }\n      function canFocus(elm) {\n        if (isTextInputElement(elm) && !elm.hidden) {\n          return true;\n        }\n        if (hasTabstopData(elm)) {\n          return true;\n        }\n        if (/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell|slider)$/.test(getRole(elm))) {\n          return true;\n        }\n        return false;\n      }\n      function getFocusElements(elm) {\n        var elements = [];\n        function collect(elm) {\n          if (elm.nodeType !== 1 || elm.style.display === 'none' || elm.disabled) {\n            return;\n          }\n          if (canFocus(elm)) {\n            elements.push(elm);\n          }\n          for (var i = 0; i < elm.childNodes.length; i++) {\n            collect(elm.childNodes[i]);\n          }\n        }\n        collect(elm || root.getEl());\n        return elements;\n      }\n      function getNavigationRoot(targetControl) {\n        var navigationRoot, controls;\n        targetControl = targetControl || focusedControl;\n        controls = targetControl.parents().toArray();\n        controls.unshift(targetControl);\n        for (var i = 0; i < controls.length; i++) {\n          navigationRoot = controls[i];\n          if (navigationRoot.settings.ariaRoot) {\n            break;\n          }\n        }\n        return navigationRoot;\n      }\n      function focusFirst(targetControl) {\n        var navigationRoot = getNavigationRoot(targetControl);\n        var focusElements = getFocusElements(navigationRoot.getEl());\n        if (navigationRoot.settings.ariaRemember && 'lastAriaIndex' in navigationRoot) {\n          moveFocusToIndex(navigationRoot.lastAriaIndex, focusElements);\n        } else {\n          moveFocusToIndex(0, focusElements);\n        }\n      }\n      function moveFocusToIndex(idx, elements) {\n        if (idx < 0) {\n          idx = elements.length - 1;\n        } else if (idx >= elements.length) {\n          idx = 0;\n        }\n        if (elements[idx]) {\n          elements[idx].focus();\n        }\n        return idx;\n      }\n      function moveFocus(dir, elements) {\n        var idx = -1;\n        var navigationRoot = getNavigationRoot();\n        elements = elements || getFocusElements(navigationRoot.getEl());\n        for (var i = 0; i < elements.length; i++) {\n          if (elements[i] === focusedElement) {\n            idx = i;\n          }\n        }\n        idx += dir;\n        navigationRoot.lastAriaIndex = moveFocusToIndex(idx, elements);\n      }\n      function left() {\n        var parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          moveFocus(-1, getFocusElements(focusedElement.parentNode));\n        } else if (focusedControl.parent().submenu) {\n          cancel();\n        } else {\n          moveFocus(-1);\n        }\n      }\n      function right() {\n        var role = getRole(), parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          moveFocus(1, getFocusElements(focusedElement.parentNode));\n        } else if (role === 'menuitem' && parentRole === 'menu' && getAriaProp('haspopup')) {\n          enter();\n        } else {\n          moveFocus(1);\n        }\n      }\n      function up() {\n        moveFocus(-1);\n      }\n      function down() {\n        var role = getRole(), parentRole = getParentRole();\n        if (role === 'menuitem' && parentRole === 'menubar') {\n          enter();\n        } else if (role === 'button' && getAriaProp('haspopup')) {\n          enter({ key: 'down' });\n        } else {\n          moveFocus(1);\n        }\n      }\n      function tab(e) {\n        var parentRole = getParentRole();\n        if (parentRole === 'tablist') {\n          var elm = getFocusElements(focusedControl.getEl('body'))[0];\n          if (elm) {\n            elm.focus();\n          }\n        } else {\n          moveFocus(e.shiftKey ? -1 : 1);\n        }\n      }\n      function cancel() {\n        focusedControl.fire('cancel');\n      }\n      function enter(aria) {\n        aria = aria || {};\n        focusedControl.fire('click', {\n          target: focusedElement,\n          aria: aria\n        });\n      }\n      root.on('keydown', function (e) {\n        function handleNonTabOrEscEvent(e, handler) {\n          if (isTextInputElement(focusedElement) || hasTabstopData(focusedElement)) {\n            return;\n          }\n          if (getRole(focusedElement) === 'slider') {\n            return;\n          }\n          if (handler(e) !== false) {\n            e.preventDefault();\n          }\n        }\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        switch (e.keyCode) {\n        case 37:\n          handleNonTabOrEscEvent(e, left);\n          break;\n        case 39:\n          handleNonTabOrEscEvent(e, right);\n          break;\n        case 38:\n          handleNonTabOrEscEvent(e, up);\n          break;\n        case 40:\n          handleNonTabOrEscEvent(e, down);\n          break;\n        case 27:\n          cancel();\n          break;\n        case 14:\n        case 13:\n        case 32:\n          handleNonTabOrEscEvent(e, enter);\n          break;\n        case 9:\n          tab(e);\n          e.preventDefault();\n          break;\n        }\n      });\n      root.on('focusin', function (e) {\n        focusedElement = e.target;\n        focusedControl = e.control;\n      });\n      return { focusFirst: focusFirst };\n    }\n\n    var selectorCache = {};\n    var Container = Control$1.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        if (settings.fixed) {\n          self.state.set('fixed', true);\n        }\n        self._items = new Collection$2();\n        if (self.isRtl()) {\n          self.classes.add('rtl');\n        }\n        self.bodyClasses = new ClassList(function () {\n          if (self.state.get('rendered')) {\n            self.getEl('body').className = this.toString();\n          }\n        });\n        self.bodyClasses.prefix = self.classPrefix;\n        self.classes.add('container');\n        self.bodyClasses.add('container-body');\n        if (settings.containerCls) {\n          self.classes.add(settings.containerCls);\n        }\n        self._layout = global$4.create((settings.layout || '') + 'layout');\n        if (self.settings.items) {\n          self.add(self.settings.items);\n        } else {\n          self.add(self.render());\n        }\n        self._hasBody = true;\n      },\n      items: function () {\n        return this._items;\n      },\n      find: function (selector) {\n        selector = selectorCache[selector] = selectorCache[selector] || new Selector(selector);\n        return selector.find(this);\n      },\n      add: function (items) {\n        var self = this;\n        self.items().add(self.create(items)).parent(self);\n        return self;\n      },\n      focus: function (keyboard) {\n        var self = this;\n        var focusCtrl, keyboardNav, items;\n        if (keyboard) {\n          keyboardNav = self.keyboardNav || self.parents().eq(-1)[0].keyboardNav;\n          if (keyboardNav) {\n            keyboardNav.focusFirst(self);\n            return;\n          }\n        }\n        items = self.find('*');\n        if (self.statusbar) {\n          items.add(self.statusbar.items());\n        }\n        items.each(function (ctrl) {\n          if (ctrl.settings.autofocus) {\n            focusCtrl = null;\n            return false;\n          }\n          if (ctrl.canFocus) {\n            focusCtrl = focusCtrl || ctrl;\n          }\n        });\n        if (focusCtrl) {\n          focusCtrl.focus();\n        }\n        return self;\n      },\n      replace: function (oldItem, newItem) {\n        var ctrlElm;\n        var items = this.items();\n        var i = items.length;\n        while (i--) {\n          if (items[i] === oldItem) {\n            items[i] = newItem;\n            break;\n          }\n        }\n        if (i >= 0) {\n          ctrlElm = newItem.getEl();\n          if (ctrlElm) {\n            ctrlElm.parentNode.removeChild(ctrlElm);\n          }\n          ctrlElm = oldItem.getEl();\n          if (ctrlElm) {\n            ctrlElm.parentNode.removeChild(ctrlElm);\n          }\n        }\n        newItem.parent(this);\n      },\n      create: function (items) {\n        var self = this;\n        var settings;\n        var ctrlItems = [];\n        if (!global$2.isArray(items)) {\n          items = [items];\n        }\n        global$2.each(items, function (item) {\n          if (item) {\n            if (!(item instanceof Control$1)) {\n              if (typeof item === 'string') {\n                item = { type: item };\n              }\n              settings = global$2.extend({}, self.settings.defaults, item);\n              item.type = settings.type = settings.type || item.type || self.settings.defaultType || (settings.defaults ? settings.defaults.type : null);\n              item = global$4.create(settings);\n            }\n            ctrlItems.push(item);\n          }\n        });\n        return ctrlItems;\n      },\n      renderNew: function () {\n        var self = this;\n        self.items().each(function (ctrl, index) {\n          var containerElm;\n          ctrl.parent(self);\n          if (!ctrl.state.get('rendered')) {\n            containerElm = self.getEl('body');\n            if (containerElm.hasChildNodes() && index <= containerElm.childNodes.length - 1) {\n              global$9(containerElm.childNodes[index]).before(ctrl.renderHtml());\n            } else {\n              global$9(containerElm).append(ctrl.renderHtml());\n            }\n            ctrl.postRender();\n            ReflowQueue.add(ctrl);\n          }\n        });\n        self._layout.applyClasses(self.items().filter(':visible'));\n        self._lastRect = null;\n        return self;\n      },\n      append: function (items) {\n        return this.add(items).renderNew();\n      },\n      prepend: function (items) {\n        var self = this;\n        self.items().set(self.create(items).concat(self.items().toArray()));\n        return self.renderNew();\n      },\n      insert: function (items, index, before) {\n        var self = this;\n        var curItems, beforeItems, afterItems;\n        items = self.create(items);\n        curItems = self.items();\n        if (!before && index < curItems.length - 1) {\n          index += 1;\n        }\n        if (index >= 0 && index < curItems.length) {\n          beforeItems = curItems.slice(0, index).toArray();\n          afterItems = curItems.slice(index).toArray();\n          curItems.set(beforeItems.concat(items, afterItems));\n        }\n        return self.renderNew();\n      },\n      fromJSON: function (data) {\n        var self = this;\n        for (var name in data) {\n          self.find('#' + name).value(data[name]);\n        }\n        return self;\n      },\n      toJSON: function () {\n        var self = this, data = {};\n        self.find('*').each(function (ctrl) {\n          var name = ctrl.name(), value = ctrl.value();\n          if (name && typeof value !== 'undefined') {\n            data[name] = value;\n          }\n        });\n        return data;\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, role = this.settings.role;\n        self.preRender();\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"' + (role ? ' role=\"' + this.settings.role + '\"' : '') + '>' + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        var box;\n        self.items().exec('postRender');\n        self._super();\n        self._layout.postRender(self);\n        self.state.set('rendered', true);\n        if (self.settings.style) {\n          self.$el.css(self.settings.style);\n        }\n        if (self.settings.border) {\n          box = self.borderBox;\n          self.$el.css({\n            'border-top-width': box.top,\n            'border-right-width': box.right,\n            'border-bottom-width': box.bottom,\n            'border-left-width': box.left\n          });\n        }\n        if (!self.parent()) {\n          self.keyboardNav = KeyboardNavigation({ root: self });\n        }\n        return self;\n      },\n      initLayoutRect: function () {\n        var self = this, layoutRect = self._super();\n        self._layout.recalc(self);\n        return layoutRect;\n      },\n      recalc: function () {\n        var self = this;\n        var rect = self._layoutRect;\n        var lastRect = self._lastRect;\n        if (!lastRect || lastRect.w !== rect.w || lastRect.h !== rect.h) {\n          self._layout.recalc(self);\n          rect = self.layoutRect();\n          self._lastRect = {\n            x: rect.x,\n            y: rect.y,\n            w: rect.w,\n            h: rect.h\n          };\n          return true;\n        }\n      },\n      reflow: function () {\n        var i;\n        ReflowQueue.remove(this);\n        if (this.visible()) {\n          Control$1.repaintControls = [];\n          Control$1.repaintControls.map = {};\n          this.recalc();\n          i = Control$1.repaintControls.length;\n          while (i--) {\n            Control$1.repaintControls[i].repaint();\n          }\n          if (this.settings.layout !== 'flow' && this.settings.layout !== 'stack') {\n            this.repaint();\n          }\n          Control$1.repaintControls = [];\n        }\n        return this;\n      }\n    });\n\n    function getDocumentSize(doc) {\n      var documentElement, body, scrollWidth, clientWidth;\n      var offsetWidth, scrollHeight, clientHeight, offsetHeight;\n      var max = Math.max;\n      documentElement = doc.documentElement;\n      body = doc.body;\n      scrollWidth = max(documentElement.scrollWidth, body.scrollWidth);\n      clientWidth = max(documentElement.clientWidth, body.clientWidth);\n      offsetWidth = max(documentElement.offsetWidth, body.offsetWidth);\n      scrollHeight = max(documentElement.scrollHeight, body.scrollHeight);\n      clientHeight = max(documentElement.clientHeight, body.clientHeight);\n      offsetHeight = max(documentElement.offsetHeight, body.offsetHeight);\n      return {\n        width: scrollWidth < offsetWidth ? clientWidth : scrollWidth,\n        height: scrollHeight < offsetHeight ? clientHeight : scrollHeight\n      };\n    }\n    function updateWithTouchData(e) {\n      var keys, i;\n      if (e.changedTouches) {\n        keys = 'screenX screenY pageX pageY clientX clientY'.split(' ');\n        for (i = 0; i < keys.length; i++) {\n          e[keys[i]] = e.changedTouches[0][keys[i]];\n        }\n      }\n    }\n    function DragHelper (id, settings) {\n      var $eventOverlay;\n      var doc = settings.document || domGlobals.document;\n      var downButton;\n      var start, stop, drag, startX, startY;\n      settings = settings || {};\n      var handleElement = doc.getElementById(settings.handle || id);\n      start = function (e) {\n        var docSize = getDocumentSize(doc);\n        var handleElm, cursor;\n        updateWithTouchData(e);\n        e.preventDefault();\n        downButton = e.button;\n        handleElm = handleElement;\n        startX = e.screenX;\n        startY = e.screenY;\n        if (domGlobals.window.getComputedStyle) {\n          cursor = domGlobals.window.getComputedStyle(handleElm, null).getPropertyValue('cursor');\n        } else {\n          cursor = handleElm.runtimeStyle.cursor;\n        }\n        $eventOverlay = global$9('<div></div>').css({\n          position: 'absolute',\n          top: 0,\n          left: 0,\n          width: docSize.width,\n          height: docSize.height,\n          zIndex: 2147483647,\n          opacity: 0.0001,\n          cursor: cursor\n        }).appendTo(doc.body);\n        global$9(doc).on('mousemove touchmove', drag).on('mouseup touchend', stop);\n        settings.start(e);\n      };\n      drag = function (e) {\n        updateWithTouchData(e);\n        if (e.button !== downButton) {\n          return stop(e);\n        }\n        e.deltaX = e.screenX - startX;\n        e.deltaY = e.screenY - startY;\n        e.preventDefault();\n        settings.drag(e);\n      };\n      stop = function (e) {\n        updateWithTouchData(e);\n        global$9(doc).off('mousemove touchmove', drag).off('mouseup touchend', stop);\n        $eventOverlay.remove();\n        if (settings.stop) {\n          settings.stop(e);\n        }\n      };\n      this.destroy = function () {\n        global$9(handleElement).off();\n      };\n      global$9(handleElement).on('mousedown touchstart', start);\n    }\n\n    var Scrollable = {\n      init: function () {\n        var self = this;\n        self.on('repaint', self.renderScroll);\n      },\n      renderScroll: function () {\n        var self = this, margin = 2;\n        function repaintScroll() {\n          var hasScrollH, hasScrollV, bodyElm;\n          function repaintAxis(axisName, posName, sizeName, contentSizeName, hasScroll, ax) {\n            var containerElm, scrollBarElm, scrollThumbElm;\n            var containerSize, scrollSize, ratio, rect;\n            var posNameLower, sizeNameLower;\n            scrollBarElm = self.getEl('scroll' + axisName);\n            if (scrollBarElm) {\n              posNameLower = posName.toLowerCase();\n              sizeNameLower = sizeName.toLowerCase();\n              global$9(self.getEl('absend')).css(posNameLower, self.layoutRect()[contentSizeName] - 1);\n              if (!hasScroll) {\n                global$9(scrollBarElm).css('display', 'none');\n                return;\n              }\n              global$9(scrollBarElm).css('display', 'block');\n              containerElm = self.getEl('body');\n              scrollThumbElm = self.getEl('scroll' + axisName + 't');\n              containerSize = containerElm['client' + sizeName] - margin * 2;\n              containerSize -= hasScrollH && hasScrollV ? scrollBarElm['client' + ax] : 0;\n              scrollSize = containerElm['scroll' + sizeName];\n              ratio = containerSize / scrollSize;\n              rect = {};\n              rect[posNameLower] = containerElm['offset' + posName] + margin;\n              rect[sizeNameLower] = containerSize;\n              global$9(scrollBarElm).css(rect);\n              rect = {};\n              rect[posNameLower] = containerElm['scroll' + posName] * ratio;\n              rect[sizeNameLower] = containerSize * ratio;\n              global$9(scrollThumbElm).css(rect);\n            }\n          }\n          bodyElm = self.getEl('body');\n          hasScrollH = bodyElm.scrollWidth > bodyElm.clientWidth;\n          hasScrollV = bodyElm.scrollHeight > bodyElm.clientHeight;\n          repaintAxis('h', 'Left', 'Width', 'contentW', hasScrollH, 'Height');\n          repaintAxis('v', 'Top', 'Height', 'contentH', hasScrollV, 'Width');\n        }\n        function addScroll() {\n          function addScrollAxis(axisName, posName, sizeName, deltaPosName, ax) {\n            var scrollStart;\n            var axisId = self._id + '-scroll' + axisName, prefix = self.classPrefix;\n            global$9(self.getEl()).append('<div id=\"' + axisId + '\" class=\"' + prefix + 'scrollbar ' + prefix + 'scrollbar-' + axisName + '\">' + '<div id=\"' + axisId + 't\" class=\"' + prefix + 'scrollbar-thumb\"></div>' + '</div>');\n            self.draghelper = new DragHelper(axisId + 't', {\n              start: function () {\n                scrollStart = self.getEl('body')['scroll' + posName];\n                global$9('#' + axisId).addClass(prefix + 'active');\n              },\n              drag: function (e) {\n                var ratio, hasScrollH, hasScrollV, containerSize;\n                var layoutRect = self.layoutRect();\n                hasScrollH = layoutRect.contentW > layoutRect.innerW;\n                hasScrollV = layoutRect.contentH > layoutRect.innerH;\n                containerSize = self.getEl('body')['client' + sizeName] - margin * 2;\n                containerSize -= hasScrollH && hasScrollV ? self.getEl('scroll' + axisName)['client' + ax] : 0;\n                ratio = containerSize / self.getEl('body')['scroll' + sizeName];\n                self.getEl('body')['scroll' + posName] = scrollStart + e['delta' + deltaPosName] / ratio;\n              },\n              stop: function () {\n                global$9('#' + axisId).removeClass(prefix + 'active');\n              }\n            });\n          }\n          self.classes.add('scroll');\n          addScrollAxis('v', 'Top', 'Height', 'Y', 'Width');\n          addScrollAxis('h', 'Left', 'Width', 'X', 'Height');\n        }\n        if (self.settings.autoScroll) {\n          if (!self._hasScroll) {\n            self._hasScroll = true;\n            addScroll();\n            self.on('wheel', function (e) {\n              var bodyEl = self.getEl('body');\n              bodyEl.scrollLeft += (e.deltaX || 0) * 10;\n              bodyEl.scrollTop += e.deltaY * 10;\n              repaintScroll();\n            });\n            global$9(self.getEl('body')).on('scroll', repaintScroll);\n          }\n          repaintScroll();\n        }\n      }\n    };\n\n    var Panel = Container.extend({\n      Defaults: {\n        layout: 'fit',\n        containerCls: 'panel'\n      },\n      Mixins: [Scrollable],\n      renderHtml: function () {\n        var self = this;\n        var layout = self._layout;\n        var innerHtml = self.settings.html;\n        self.preRender();\n        layout.preRender(self);\n        if (typeof innerHtml === 'undefined') {\n          innerHtml = '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + layout.renderHtml(self) + '</div>';\n        } else {\n          if (typeof innerHtml === 'function') {\n            innerHtml = innerHtml.call(self);\n          }\n          self._hasBody = false;\n        }\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\" role=\"group\">' + (self._preBodyHtml || '') + innerHtml + '</div>';\n      }\n    });\n\n    var Resizable = {\n      resizeToContent: function () {\n        this._layoutRect.autoResize = true;\n        this._lastRect = null;\n        this.reflow();\n      },\n      resizeTo: function (w, h) {\n        if (w <= 1 || h <= 1) {\n          var rect = funcs.getWindowSize();\n          w = w <= 1 ? w * rect.w : w;\n          h = h <= 1 ? h * rect.h : h;\n        }\n        this._layoutRect.autoResize = false;\n        return this.layoutRect({\n          minW: w,\n          minH: h,\n          w: w,\n          h: h\n        }).reflow();\n      },\n      resizeBy: function (dw, dh) {\n        var self = this, rect = self.layoutRect();\n        return self.resizeTo(rect.w + dw, rect.h + dh);\n      }\n    };\n\n    var documentClickHandler, documentScrollHandler, windowResizeHandler;\n    var visiblePanels = [];\n    var zOrder = [];\n    var hasModal;\n    function isChildOf(ctrl, parent) {\n      while (ctrl) {\n        if (ctrl === parent) {\n          return true;\n        }\n        ctrl = ctrl.parent();\n      }\n    }\n    function skipOrHidePanels(e) {\n      var i = visiblePanels.length;\n      while (i--) {\n        var panel = visiblePanels[i], clickCtrl = panel.getParentCtrl(e.target);\n        if (panel.settings.autohide) {\n          if (clickCtrl) {\n            if (isChildOf(clickCtrl, panel) || panel.parent() === clickCtrl) {\n              continue;\n            }\n          }\n          e = panel.fire('autohide', { target: e.target });\n          if (!e.isDefaultPrevented()) {\n            panel.hide();\n          }\n        }\n      }\n    }\n    function bindDocumentClickHandler() {\n      if (!documentClickHandler) {\n        documentClickHandler = function (e) {\n          if (e.button === 2) {\n            return;\n          }\n          skipOrHidePanels(e);\n        };\n        global$9(domGlobals.document).on('click touchstart', documentClickHandler);\n      }\n    }\n    function bindDocumentScrollHandler() {\n      if (!documentScrollHandler) {\n        documentScrollHandler = function () {\n          var i;\n          i = visiblePanels.length;\n          while (i--) {\n            repositionPanel(visiblePanels[i]);\n          }\n        };\n        global$9(domGlobals.window).on('scroll', documentScrollHandler);\n      }\n    }\n    function bindWindowResizeHandler() {\n      if (!windowResizeHandler) {\n        var docElm_1 = domGlobals.document.documentElement;\n        var clientWidth_1 = docElm_1.clientWidth, clientHeight_1 = docElm_1.clientHeight;\n        windowResizeHandler = function () {\n          if (!domGlobals.document.all || clientWidth_1 !== docElm_1.clientWidth || clientHeight_1 !== docElm_1.clientHeight) {\n            clientWidth_1 = docElm_1.clientWidth;\n            clientHeight_1 = docElm_1.clientHeight;\n            FloatPanel.hideAll();\n          }\n        };\n        global$9(domGlobals.window).on('resize', windowResizeHandler);\n      }\n    }\n    function repositionPanel(panel) {\n      var scrollY = funcs.getViewPort().y;\n      function toggleFixedChildPanels(fixed, deltaY) {\n        var parent;\n        for (var i = 0; i < visiblePanels.length; i++) {\n          if (visiblePanels[i] !== panel) {\n            parent = visiblePanels[i].parent();\n            while (parent && (parent = parent.parent())) {\n              if (parent === panel) {\n                visiblePanels[i].fixed(fixed).moveBy(0, deltaY).repaint();\n              }\n            }\n          }\n        }\n      }\n      if (panel.settings.autofix) {\n        if (!panel.state.get('fixed')) {\n          panel._autoFixY = panel.layoutRect().y;\n          if (panel._autoFixY < scrollY) {\n            panel.fixed(true).layoutRect({ y: 0 }).repaint();\n            toggleFixedChildPanels(true, scrollY - panel._autoFixY);\n          }\n        } else {\n          if (panel._autoFixY > scrollY) {\n            panel.fixed(false).layoutRect({ y: panel._autoFixY }).repaint();\n            toggleFixedChildPanels(false, panel._autoFixY - scrollY);\n          }\n        }\n      }\n    }\n    function addRemove(add, ctrl) {\n      var i, zIndex = FloatPanel.zIndex || 65535, topModal;\n      if (add) {\n        zOrder.push(ctrl);\n      } else {\n        i = zOrder.length;\n        while (i--) {\n          if (zOrder[i] === ctrl) {\n            zOrder.splice(i, 1);\n          }\n        }\n      }\n      if (zOrder.length) {\n        for (i = 0; i < zOrder.length; i++) {\n          if (zOrder[i].modal) {\n            zIndex++;\n            topModal = zOrder[i];\n          }\n          zOrder[i].getEl().style.zIndex = zIndex;\n          zOrder[i].zIndex = zIndex;\n          zIndex++;\n        }\n      }\n      var modalBlockEl = global$9('#' + ctrl.classPrefix + 'modal-block', ctrl.getContainerElm())[0];\n      if (topModal) {\n        global$9(modalBlockEl).css('z-index', topModal.zIndex - 1);\n      } else if (modalBlockEl) {\n        modalBlockEl.parentNode.removeChild(modalBlockEl);\n        hasModal = false;\n      }\n      FloatPanel.currentZIndex = zIndex;\n    }\n    var FloatPanel = Panel.extend({\n      Mixins: [\n        Movable,\n        Resizable\n      ],\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self._eventsRoot = self;\n        self.classes.add('floatpanel');\n        if (settings.autohide) {\n          bindDocumentClickHandler();\n          bindWindowResizeHandler();\n          visiblePanels.push(self);\n        }\n        if (settings.autofix) {\n          bindDocumentScrollHandler();\n          self.on('move', function () {\n            repositionPanel(this);\n          });\n        }\n        self.on('postrender show', function (e) {\n          if (e.control === self) {\n            var $modalBlockEl_1;\n            var prefix_1 = self.classPrefix;\n            if (self.modal && !hasModal) {\n              $modalBlockEl_1 = global$9('#' + prefix_1 + 'modal-block', self.getContainerElm());\n              if (!$modalBlockEl_1[0]) {\n                $modalBlockEl_1 = global$9('<div id=\"' + prefix_1 + 'modal-block\" class=\"' + prefix_1 + 'reset ' + prefix_1 + 'fade\"></div>').appendTo(self.getContainerElm());\n              }\n              global$7.setTimeout(function () {\n                $modalBlockEl_1.addClass(prefix_1 + 'in');\n                global$9(self.getEl()).addClass(prefix_1 + 'in');\n              });\n              hasModal = true;\n            }\n            addRemove(true, self);\n          }\n        });\n        self.on('show', function () {\n          self.parents().each(function (ctrl) {\n            if (ctrl.state.get('fixed')) {\n              self.fixed(true);\n              return false;\n            }\n          });\n        });\n        if (settings.popover) {\n          self._preBodyHtml = '<div class=\"' + self.classPrefix + 'arrow\"></div>';\n          self.classes.add('popover').add('bottom').add(self.isRtl() ? 'end' : 'start');\n        }\n        self.aria('label', settings.ariaLabel);\n        self.aria('labelledby', self._id);\n        self.aria('describedby', self.describedBy || self._id + '-none');\n      },\n      fixed: function (state) {\n        var self = this;\n        if (self.state.get('fixed') !== state) {\n          if (self.state.get('rendered')) {\n            var viewport = funcs.getViewPort();\n            if (state) {\n              self.layoutRect().y -= viewport.y;\n            } else {\n              self.layoutRect().y += viewport.y;\n            }\n          }\n          self.classes.toggle('fixed', state);\n          self.state.set('fixed', state);\n        }\n        return self;\n      },\n      show: function () {\n        var self = this;\n        var i;\n        var state = self._super();\n        i = visiblePanels.length;\n        while (i--) {\n          if (visiblePanels[i] === self) {\n            break;\n          }\n        }\n        if (i === -1) {\n          visiblePanels.push(self);\n        }\n        return state;\n      },\n      hide: function () {\n        removeVisiblePanel(this);\n        addRemove(false, this);\n        return this._super();\n      },\n      hideAll: function () {\n        FloatPanel.hideAll();\n      },\n      close: function () {\n        var self = this;\n        if (!self.fire('close').isDefaultPrevented()) {\n          self.remove();\n          addRemove(false, self);\n        }\n        return self;\n      },\n      remove: function () {\n        removeVisiblePanel(this);\n        this._super();\n      },\n      postRender: function () {\n        var self = this;\n        if (self.settings.bodyRole) {\n          this.getEl('body').setAttribute('role', self.settings.bodyRole);\n        }\n        return self._super();\n      }\n    });\n    FloatPanel.hideAll = function () {\n      var i = visiblePanels.length;\n      while (i--) {\n        var panel = visiblePanels[i];\n        if (panel && panel.settings.autohide) {\n          panel.hide();\n          visiblePanels.splice(i, 1);\n        }\n      }\n    };\n    function removeVisiblePanel(panel) {\n      var i;\n      i = visiblePanels.length;\n      while (i--) {\n        if (visiblePanels[i] === panel) {\n          visiblePanels.splice(i, 1);\n        }\n      }\n      i = zOrder.length;\n      while (i--) {\n        if (zOrder[i] === panel) {\n          zOrder.splice(i, 1);\n        }\n      }\n    }\n\n    var isFixed$1 = function (inlineToolbarContainer, editor) {\n      return !!(inlineToolbarContainer && !editor.settings.ui_container);\n    };\n    var render$1 = function (editor, theme, args) {\n      var panel, inlineToolbarContainer;\n      var DOM = global$3.DOM;\n      var fixedToolbarContainer = getFixedToolbarContainer(editor);\n      if (fixedToolbarContainer) {\n        inlineToolbarContainer = DOM.select(fixedToolbarContainer)[0];\n      }\n      var reposition = function () {\n        if (panel && panel.moveRel && panel.visible() && !panel._fixed) {\n          var scrollContainer = editor.selection.getScrollContainer(), body = editor.getBody();\n          var deltaX = 0, deltaY = 0;\n          if (scrollContainer) {\n            var bodyPos = DOM.getPos(body), scrollContainerPos = DOM.getPos(scrollContainer);\n            deltaX = Math.max(0, scrollContainerPos.x - bodyPos.x);\n            deltaY = Math.max(0, scrollContainerPos.y - bodyPos.y);\n          }\n          panel.fixed(false).moveRel(body, editor.rtl ? [\n            'tr-br',\n            'br-tr'\n          ] : [\n            'tl-bl',\n            'bl-tl',\n            'tr-br'\n          ]).moveBy(deltaX, deltaY);\n        }\n      };\n      var show = function () {\n        if (panel) {\n          panel.show();\n          reposition();\n          DOM.addClass(editor.getBody(), 'mce-edit-focus');\n        }\n      };\n      var hide = function () {\n        if (panel) {\n          panel.hide();\n          FloatPanel.hideAll();\n          DOM.removeClass(editor.getBody(), 'mce-edit-focus');\n        }\n      };\n      var render = function () {\n        if (panel) {\n          if (!panel.visible()) {\n            show();\n          }\n          return;\n        }\n        panel = theme.panel = global$4.create({\n          type: inlineToolbarContainer ? 'panel' : 'floatpanel',\n          role: 'application',\n          classes: 'tinymce tinymce-inline',\n          layout: 'flex',\n          direction: 'column',\n          align: 'stretch',\n          autohide: false,\n          autofix: true,\n          fixed: isFixed$1(inlineToolbarContainer, editor),\n          border: 1,\n          items: [\n            hasMenubar(editor) === false ? null : {\n              type: 'menubar',\n              border: '0 0 1 0',\n              items: Menubar.createMenuButtons(editor)\n            },\n            Toolbar.createToolbars(editor, getToolbarSize(editor))\n          ]\n        });\n        UiContainer.setUiContainer(editor, panel);\n        Events.fireBeforeRenderUI(editor);\n        if (inlineToolbarContainer) {\n          panel.renderTo(inlineToolbarContainer).reflow();\n        } else {\n          panel.renderTo().reflow();\n        }\n        A11y.addKeys(editor, panel);\n        show();\n        ContextToolbars.addContextualToolbars(editor);\n        editor.on('nodeChange', reposition);\n        editor.on('ResizeWindow', reposition);\n        editor.on('activate', show);\n        editor.on('deactivate', hide);\n        editor.nodeChanged();\n      };\n      editor.settings.content_editable = true;\n      editor.on('focus', function () {\n        if (isSkinDisabled(editor) === false && args.skinUiCss) {\n          DOM.styleSheetLoader.load(args.skinUiCss, render, render);\n        } else {\n          render();\n        }\n      });\n      editor.on('blur hide', hide);\n      editor.on('remove', function () {\n        if (panel) {\n          panel.remove();\n          panel = null;\n        }\n      });\n      if (isSkinDisabled(editor) === false && args.skinUiCss) {\n        DOM.styleSheetLoader.load(args.skinUiCss, SkinLoaded.fireSkinLoaded(editor));\n      } else {\n        SkinLoaded.fireSkinLoaded(editor)();\n      }\n      return {};\n    };\n    var Inline = { render: render$1 };\n\n    function Throbber (elm, inline) {\n      var self = this;\n      var state;\n      var classPrefix = Control$1.classPrefix;\n      var timer;\n      self.show = function (time, callback) {\n        function render() {\n          if (state) {\n            global$9(elm).append('<div class=\"' + classPrefix + 'throbber' + (inline ? ' ' + classPrefix + 'throbber-inline' : '') + '\"></div>');\n            if (callback) {\n              callback();\n            }\n          }\n        }\n        self.hide();\n        state = true;\n        if (time) {\n          timer = global$7.setTimeout(render, time);\n        } else {\n          render();\n        }\n        return self;\n      };\n      self.hide = function () {\n        var child = elm.lastChild;\n        global$7.clearTimeout(timer);\n        if (child && child.className.indexOf('throbber') !== -1) {\n          child.parentNode.removeChild(child);\n        }\n        state = false;\n        return self;\n      };\n    }\n\n    var setup = function (editor, theme) {\n      var throbber;\n      editor.on('ProgressState', function (e) {\n        throbber = throbber || new Throbber(theme.panel.getEl('body'));\n        if (e.state) {\n          throbber.show(e.time);\n        } else {\n          throbber.hide();\n        }\n      });\n    };\n    var ProgressState = { setup: setup };\n\n    var renderUI = function (editor, theme, args) {\n      var skinUrl = getSkinUrl(editor);\n      if (skinUrl) {\n        args.skinUiCss = skinUrl + '/skin.min.css';\n        editor.contentCSS.push(skinUrl + '/content' + (editor.inline ? '.inline' : '') + '.min.css');\n      }\n      ProgressState.setup(editor, theme);\n      return isInline(editor) ? Inline.render(editor, theme, args) : Iframe.render(editor, theme, args);\n    };\n    var Render = { renderUI: renderUI };\n\n    var Tooltip = Control$1.extend({\n      Mixins: [Movable],\n      Defaults: { classes: 'widget tooltip tooltip-n' },\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" role=\"presentation\">' + '<div class=\"' + prefix + 'tooltip-arrow\"></div>' + '<div class=\"' + prefix + 'tooltip-inner\">' + self.encode(self.state.get('text')) + '</div>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl().lastChild.innerHTML = self.encode(e.value);\n        });\n        return self._super();\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        style.left = rect.x + 'px';\n        style.top = rect.y + 'px';\n        style.zIndex = 65535 + 65535;\n      }\n    });\n\n    var Widget = Control$1.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        self.canFocus = true;\n        if (settings.tooltip && Widget.tooltips !== false) {\n          self.on('mouseenter', function (e) {\n            var tooltip = self.tooltip().moveTo(-65535);\n            if (e.control === self) {\n              var rel = tooltip.text(settings.tooltip).show().testMoveRel(self.getEl(), [\n                'bc-tc',\n                'bc-tl',\n                'bc-tr'\n              ]);\n              tooltip.classes.toggle('tooltip-n', rel === 'bc-tc');\n              tooltip.classes.toggle('tooltip-nw', rel === 'bc-tl');\n              tooltip.classes.toggle('tooltip-ne', rel === 'bc-tr');\n              tooltip.moveRel(self.getEl(), rel);\n            } else {\n              tooltip.hide();\n            }\n          });\n          self.on('mouseleave mousedown click', function () {\n            self.tooltip().remove();\n            self._tooltip = null;\n          });\n        }\n        self.aria('label', settings.ariaLabel || settings.tooltip);\n      },\n      tooltip: function () {\n        if (!this._tooltip) {\n          this._tooltip = new Tooltip({ type: 'tooltip' });\n          UiContainer.inheritUiContainer(this, this._tooltip);\n          this._tooltip.renderTo();\n        }\n        return this._tooltip;\n      },\n      postRender: function () {\n        var self = this, settings = self.settings;\n        self._super();\n        if (!self.parent() && (settings.width || settings.height)) {\n          self.initLayoutRect();\n          self.repaint();\n        }\n        if (settings.autofocus) {\n          self.focus();\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        function disable(state) {\n          self.aria('disabled', state);\n          self.classes.toggle('disabled', state);\n        }\n        function active(state) {\n          self.aria('pressed', state);\n          self.classes.toggle('active', state);\n        }\n        self.state.on('change:disabled', function (e) {\n          disable(e.value);\n        });\n        self.state.on('change:active', function (e) {\n          active(e.value);\n        });\n        if (self.state.get('disabled')) {\n          disable(true);\n        }\n        if (self.state.get('active')) {\n          active(true);\n        }\n        return self._super();\n      },\n      remove: function () {\n        this._super();\n        if (this._tooltip) {\n          this._tooltip.remove();\n          this._tooltip = null;\n        }\n      }\n    });\n\n    var Progress = Widget.extend({\n      Defaults: { value: 0 },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('progress');\n        if (!self.settings.filter) {\n          self.settings.filter = function (value) {\n            return Math.round(value);\n          };\n        }\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = this.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div class=\"' + prefix + 'bar-container\">' + '<div class=\"' + prefix + 'bar\"></div>' + '</div>' + '<div class=\"' + prefix + 'text\">0%</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.value(self.settings.value);\n        return self;\n      },\n      bindStates: function () {\n        var self = this;\n        function setValue(value) {\n          value = self.settings.filter(value);\n          self.getEl().lastChild.innerHTML = value + '%';\n          self.getEl().firstChild.firstChild.style.width = value + '%';\n        }\n        self.state.on('change:value', function (e) {\n          setValue(e.value);\n        });\n        setValue(self.state.get('value'));\n        return self._super();\n      }\n    });\n\n    var updateLiveRegion = function (ctx, text) {\n      ctx.getEl().lastChild.textContent = text + (ctx.progressBar ? ' ' + ctx.progressBar.value() + '%' : '');\n    };\n    var Notification = Control$1.extend({\n      Mixins: [Movable],\n      Defaults: { classes: 'widget notification' },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.maxWidth = settings.maxWidth;\n        if (settings.text) {\n          self.text(settings.text);\n        }\n        if (settings.icon) {\n          self.icon = settings.icon;\n        }\n        if (settings.color) {\n          self.color = settings.color;\n        }\n        if (settings.type) {\n          self.classes.add('notification-' + settings.type);\n        }\n        if (settings.timeout && (settings.timeout < 0 || settings.timeout > 0) && !settings.closeButton) {\n          self.closeButton = false;\n        } else {\n          self.classes.add('has-close');\n          self.closeButton = true;\n        }\n        if (settings.progressBar) {\n          self.progressBar = new Progress();\n        }\n        self.on('click', function (e) {\n          if (e.target.className.indexOf(self.classPrefix + 'close') !== -1) {\n            self.close();\n          }\n        });\n      },\n      renderHtml: function () {\n        var self = this;\n        var prefix = self.classPrefix;\n        var icon = '', closeButton = '', progressBar = '', notificationStyle = '';\n        if (self.icon) {\n          icon = '<i class=\"' + prefix + 'ico' + ' ' + prefix + 'i-' + self.icon + '\"></i>';\n        }\n        notificationStyle = ' style=\"max-width: ' + self.maxWidth + 'px;' + (self.color ? 'background-color: ' + self.color + ';\"' : '\"');\n        if (self.closeButton) {\n          closeButton = '<button type=\"button\" class=\"' + prefix + 'close\" aria-hidden=\"true\">\\xD7</button>';\n        }\n        if (self.progressBar) {\n          progressBar = self.progressBar.renderHtml();\n        }\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"' + notificationStyle + ' role=\"presentation\">' + icon + '<div class=\"' + prefix + 'notification-inner\">' + self.state.get('text') + '</div>' + progressBar + closeButton + '<div style=\"clip: rect(1px, 1px, 1px, 1px);height: 1px;overflow: hidden;position: absolute;width: 1px;\"' + ' aria-live=\"assertive\" aria-relevant=\"additions\" aria-atomic=\"true\"></div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        global$7.setTimeout(function () {\n          self.$el.addClass(self.classPrefix + 'in');\n          updateLiveRegion(self, self.state.get('text'));\n        }, 100);\n        return self._super();\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl().firstChild.innerHTML = e.value;\n          updateLiveRegion(self, e.value);\n        });\n        if (self.progressBar) {\n          self.progressBar.bindStates();\n          self.progressBar.state.on('change:value', function (e) {\n            updateLiveRegion(self, self.state.get('text'));\n          });\n        }\n        return self._super();\n      },\n      close: function () {\n        var self = this;\n        if (!self.fire('close').isDefaultPrevented()) {\n          self.remove();\n        }\n        return self;\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        style.left = rect.x + 'px';\n        style.top = rect.y + 'px';\n        style.zIndex = 65535 - 1;\n      }\n    });\n\n    function NotificationManagerImpl (editor) {\n      var getEditorContainer = function (editor) {\n        return editor.inline ? editor.getElement() : editor.getContentAreaContainer();\n      };\n      var getContainerWidth = function () {\n        var container = getEditorContainer(editor);\n        return funcs.getSize(container).width;\n      };\n      var prePositionNotifications = function (notifications) {\n        each(notifications, function (notification) {\n          notification.moveTo(0, 0);\n        });\n      };\n      var positionNotifications = function (notifications) {\n        if (notifications.length > 0) {\n          var firstItem = notifications.slice(0, 1)[0];\n          var container = getEditorContainer(editor);\n          firstItem.moveRel(container, 'tc-tc');\n          each(notifications, function (notification, index) {\n            if (index > 0) {\n              notification.moveRel(notifications[index - 1].getEl(), 'bc-tc');\n            }\n          });\n        }\n      };\n      var reposition = function (notifications) {\n        prePositionNotifications(notifications);\n        positionNotifications(notifications);\n      };\n      var open = function (args, closeCallback) {\n        var extendedArgs = global$2.extend(args, { maxWidth: getContainerWidth() });\n        var notif = new Notification(extendedArgs);\n        notif.args = extendedArgs;\n        if (extendedArgs.timeout > 0) {\n          notif.timer = setTimeout(function () {\n            notif.close();\n            closeCallback();\n          }, extendedArgs.timeout);\n        }\n        notif.on('close', function () {\n          closeCallback();\n        });\n        notif.renderTo();\n        return notif;\n      };\n      var close = function (notification) {\n        notification.close();\n      };\n      var getArgs = function (notification) {\n        return notification.args;\n      };\n      return {\n        open: open,\n        close: close,\n        reposition: reposition,\n        getArgs: getArgs\n      };\n    }\n\n    var windows = [];\n    var oldMetaValue = '';\n    function toggleFullScreenState(state) {\n      var noScaleMetaValue = 'width=device-width,initial-scale=1.0,user-scalable=0,minimum-scale=1.0,maximum-scale=1.0';\n      var viewport = global$9('meta[name=viewport]')[0], contentValue;\n      if (global$8.overrideViewPort === false) {\n        return;\n      }\n      if (!viewport) {\n        viewport = domGlobals.document.createElement('meta');\n        viewport.setAttribute('name', 'viewport');\n        domGlobals.document.getElementsByTagName('head')[0].appendChild(viewport);\n      }\n      contentValue = viewport.getAttribute('content');\n      if (contentValue && typeof oldMetaValue !== 'undefined') {\n        oldMetaValue = contentValue;\n      }\n      viewport.setAttribute('content', state ? noScaleMetaValue : oldMetaValue);\n    }\n    function toggleBodyFullScreenClasses(classPrefix, state) {\n      if (checkFullscreenWindows() && state === false) {\n        global$9([\n          domGlobals.document.documentElement,\n          domGlobals.document.body\n        ]).removeClass(classPrefix + 'fullscreen');\n      }\n    }\n    function checkFullscreenWindows() {\n      for (var i = 0; i < windows.length; i++) {\n        if (windows[i]._fullscreen) {\n          return true;\n        }\n      }\n      return false;\n    }\n    function handleWindowResize() {\n      if (!global$8.desktop) {\n        var lastSize_1 = {\n          w: domGlobals.window.innerWidth,\n          h: domGlobals.window.innerHeight\n        };\n        global$7.setInterval(function () {\n          var w = domGlobals.window.innerWidth, h = domGlobals.window.innerHeight;\n          if (lastSize_1.w !== w || lastSize_1.h !== h) {\n            lastSize_1 = {\n              w: w,\n              h: h\n            };\n            global$9(domGlobals.window).trigger('resize');\n          }\n        }, 100);\n      }\n      function reposition() {\n        var i;\n        var rect = funcs.getWindowSize();\n        var layoutRect;\n        for (i = 0; i < windows.length; i++) {\n          layoutRect = windows[i].layoutRect();\n          windows[i].moveTo(windows[i].settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2), windows[i].settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2));\n        }\n      }\n      global$9(domGlobals.window).on('resize', reposition);\n    }\n    var Window = FloatPanel.extend({\n      modal: true,\n      Defaults: {\n        border: 1,\n        layout: 'flex',\n        containerCls: 'panel',\n        role: 'dialog',\n        callbacks: {\n          submit: function () {\n            this.fire('submit', { data: this.toJSON() });\n          },\n          close: function () {\n            this.close();\n          }\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        if (self.isRtl()) {\n          self.classes.add('rtl');\n        }\n        self.classes.add('window');\n        self.bodyClasses.add('window-body');\n        self.state.set('fixed', true);\n        if (settings.buttons) {\n          self.statusbar = new Panel({\n            layout: 'flex',\n            border: '1 0 0 0',\n            spacing: 3,\n            padding: 10,\n            align: 'center',\n            pack: self.isRtl() ? 'start' : 'end',\n            defaults: { type: 'button' },\n            items: settings.buttons\n          });\n          self.statusbar.classes.add('foot');\n          self.statusbar.parent(self);\n        }\n        self.on('click', function (e) {\n          var closeClass = self.classPrefix + 'close';\n          if (funcs.hasClass(e.target, closeClass) || funcs.hasClass(e.target.parentNode, closeClass)) {\n            self.close();\n          }\n        });\n        self.on('cancel', function () {\n          self.close();\n        });\n        self.on('move', function (e) {\n          if (e.control === self) {\n            FloatPanel.hideAll();\n          }\n        });\n        self.aria('describedby', self.describedBy || self._id + '-none');\n        self.aria('label', settings.title);\n        self._fullscreen = false;\n      },\n      recalc: function () {\n        var self = this;\n        var statusbar = self.statusbar;\n        var layoutRect, width, x, needsRecalc;\n        if (self._fullscreen) {\n          self.layoutRect(funcs.getWindowSize());\n          self.layoutRect().contentH = self.layoutRect().innerH;\n        }\n        self._super();\n        layoutRect = self.layoutRect();\n        if (self.settings.title && !self._fullscreen) {\n          width = layoutRect.headerW;\n          if (width > layoutRect.w) {\n            x = layoutRect.x - Math.max(0, width / 2);\n            self.layoutRect({\n              w: width,\n              x: x\n            });\n            needsRecalc = true;\n          }\n        }\n        if (statusbar) {\n          statusbar.layoutRect({ w: self.layoutRect().innerW }).recalc();\n          width = statusbar.layoutRect().minW + layoutRect.deltaW;\n          if (width > layoutRect.w) {\n            x = layoutRect.x - Math.max(0, width - layoutRect.w);\n            self.layoutRect({\n              w: width,\n              x: x\n            });\n            needsRecalc = true;\n          }\n        }\n        if (needsRecalc) {\n          self.recalc();\n        }\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var layoutRect = self._super();\n        var deltaH = 0, headEl;\n        if (self.settings.title && !self._fullscreen) {\n          headEl = self.getEl('head');\n          var size = funcs.getSize(headEl);\n          layoutRect.headerW = size.width;\n          layoutRect.headerH = size.height;\n          deltaH += layoutRect.headerH;\n        }\n        if (self.statusbar) {\n          deltaH += self.statusbar.layoutRect().h;\n        }\n        layoutRect.deltaH += deltaH;\n        layoutRect.minH += deltaH;\n        layoutRect.h += deltaH;\n        var rect = funcs.getWindowSize();\n        layoutRect.x = self.settings.x || Math.max(0, rect.w / 2 - layoutRect.w / 2);\n        layoutRect.y = self.settings.y || Math.max(0, rect.h / 2 - layoutRect.h / 2);\n        return layoutRect;\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, id = self._id, prefix = self.classPrefix;\n        var settings = self.settings;\n        var headerHtml = '', footerHtml = '', html = settings.html;\n        self.preRender();\n        layout.preRender(self);\n        if (settings.title) {\n          headerHtml = '<div id=\"' + id + '-head\" class=\"' + prefix + 'window-head\">' + '<div id=\"' + id + '-title\" class=\"' + prefix + 'title\">' + self.encode(settings.title) + '</div>' + '<div id=\"' + id + '-dragh\" class=\"' + prefix + 'dragh\"></div>' + '<button type=\"button\" class=\"' + prefix + 'close\" aria-hidden=\"true\">' + '<i class=\"mce-ico mce-i-remove\"></i>' + '</button>' + '</div>';\n        }\n        if (settings.url) {\n          html = '<iframe src=\"' + settings.url + '\" tabindex=\"-1\"></iframe>';\n        }\n        if (typeof html === 'undefined') {\n          html = layout.renderHtml(self);\n        }\n        if (self.statusbar) {\n          footerHtml = self.statusbar.renderHtml();\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" hidefocus=\"1\">' + '<div class=\"' + self.classPrefix + 'reset\" role=\"application\">' + headerHtml + '<div id=\"' + id + '-body\" class=\"' + self.bodyClasses + '\">' + html + '</div>' + footerHtml + '</div>' + '</div>';\n      },\n      fullscreen: function (state) {\n        var self = this;\n        var documentElement = domGlobals.document.documentElement;\n        var slowRendering;\n        var prefix = self.classPrefix;\n        var layoutRect;\n        if (state !== self._fullscreen) {\n          global$9(domGlobals.window).on('resize', function () {\n            var time;\n            if (self._fullscreen) {\n              if (!slowRendering) {\n                time = new Date().getTime();\n                var rect = funcs.getWindowSize();\n                self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n                if (new Date().getTime() - time > 50) {\n                  slowRendering = true;\n                }\n              } else {\n                if (!self._timer) {\n                  self._timer = global$7.setTimeout(function () {\n                    var rect = funcs.getWindowSize();\n                    self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n                    self._timer = 0;\n                  }, 50);\n                }\n              }\n            }\n          });\n          layoutRect = self.layoutRect();\n          self._fullscreen = state;\n          if (!state) {\n            self.borderBox = BoxUtils.parseBox(self.settings.border);\n            self.getEl('head').style.display = '';\n            layoutRect.deltaH += layoutRect.headerH;\n            global$9([\n              documentElement,\n              domGlobals.document.body\n            ]).removeClass(prefix + 'fullscreen');\n            self.classes.remove('fullscreen');\n            self.moveTo(self._initial.x, self._initial.y).resizeTo(self._initial.w, self._initial.h);\n          } else {\n            self._initial = {\n              x: layoutRect.x,\n              y: layoutRect.y,\n              w: layoutRect.w,\n              h: layoutRect.h\n            };\n            self.borderBox = BoxUtils.parseBox('0');\n            self.getEl('head').style.display = 'none';\n            layoutRect.deltaH -= layoutRect.headerH + 2;\n            global$9([\n              documentElement,\n              domGlobals.document.body\n            ]).addClass(prefix + 'fullscreen');\n            self.classes.add('fullscreen');\n            var rect = funcs.getWindowSize();\n            self.moveTo(0, 0).resizeTo(rect.w, rect.h);\n          }\n        }\n        return self.reflow();\n      },\n      postRender: function () {\n        var self = this;\n        var startPos;\n        setTimeout(function () {\n          self.classes.add('in');\n          self.fire('open');\n        }, 0);\n        self._super();\n        if (self.statusbar) {\n          self.statusbar.postRender();\n        }\n        self.focus();\n        this.dragHelper = new DragHelper(self._id + '-dragh', {\n          start: function () {\n            startPos = {\n              x: self.layoutRect().x,\n              y: self.layoutRect().y\n            };\n          },\n          drag: function (e) {\n            self.moveTo(startPos.x + e.deltaX, startPos.y + e.deltaY);\n          }\n        });\n        self.on('submit', function (e) {\n          if (!e.isDefaultPrevented()) {\n            self.close();\n          }\n        });\n        windows.push(self);\n        toggleFullScreenState(true);\n      },\n      submit: function () {\n        return this.fire('submit', { data: this.toJSON() });\n      },\n      remove: function () {\n        var self = this;\n        var i;\n        self.dragHelper.destroy();\n        self._super();\n        if (self.statusbar) {\n          this.statusbar.remove();\n        }\n        toggleBodyFullScreenClasses(self.classPrefix, false);\n        i = windows.length;\n        while (i--) {\n          if (windows[i] === self) {\n            windows.splice(i, 1);\n          }\n        }\n        toggleFullScreenState(windows.length > 0);\n      },\n      getContentWindow: function () {\n        var ifr = this.getEl().getElementsByTagName('iframe')[0];\n        return ifr ? ifr.contentWindow : null;\n      }\n    });\n    handleWindowResize();\n\n    var MessageBox = Window.extend({\n      init: function (settings) {\n        settings = {\n          border: 1,\n          padding: 20,\n          layout: 'flex',\n          pack: 'center',\n          align: 'center',\n          containerCls: 'panel',\n          autoScroll: true,\n          buttons: {\n            type: 'button',\n            text: 'Ok',\n            action: 'ok'\n          },\n          items: {\n            type: 'label',\n            multiline: true,\n            maxWidth: 500,\n            maxHeight: 200\n          }\n        };\n        this._super(settings);\n      },\n      Statics: {\n        OK: 1,\n        OK_CANCEL: 2,\n        YES_NO: 3,\n        YES_NO_CANCEL: 4,\n        msgBox: function (settings) {\n          var buttons;\n          var callback = settings.callback || function () {\n          };\n          function createButton(text, status, primary) {\n            return {\n              type: 'button',\n              text: text,\n              subtype: primary ? 'primary' : '',\n              onClick: function (e) {\n                e.control.parents()[1].close();\n                callback(status);\n              }\n            };\n          }\n          switch (settings.buttons) {\n          case MessageBox.OK_CANCEL:\n            buttons = [\n              createButton('Ok', true, true),\n              createButton('Cancel', false)\n            ];\n            break;\n          case MessageBox.YES_NO:\n          case MessageBox.YES_NO_CANCEL:\n            buttons = [\n              createButton('Yes', 1, true),\n              createButton('No', 0)\n            ];\n            if (settings.buttons === MessageBox.YES_NO_CANCEL) {\n              buttons.push(createButton('Cancel', -1));\n            }\n            break;\n          default:\n            buttons = [createButton('Ok', true, true)];\n            break;\n          }\n          return new Window({\n            padding: 20,\n            x: settings.x,\n            y: settings.y,\n            minWidth: 300,\n            minHeight: 100,\n            layout: 'flex',\n            pack: 'center',\n            align: 'center',\n            buttons: buttons,\n            title: settings.title,\n            role: 'alertdialog',\n            items: {\n              type: 'label',\n              multiline: true,\n              maxWidth: 500,\n              maxHeight: 200,\n              text: settings.text\n            },\n            onPostRender: function () {\n              this.aria('describedby', this.items()[0]._id);\n            },\n            onClose: settings.onClose,\n            onCancel: function () {\n              callback(false);\n            }\n          }).renderTo(domGlobals.document.body).reflow();\n        },\n        alert: function (settings, callback) {\n          if (typeof settings === 'string') {\n            settings = { text: settings };\n          }\n          settings.callback = callback;\n          return MessageBox.msgBox(settings);\n        },\n        confirm: function (settings, callback) {\n          if (typeof settings === 'string') {\n            settings = { text: settings };\n          }\n          settings.callback = callback;\n          settings.buttons = MessageBox.OK_CANCEL;\n          return MessageBox.msgBox(settings);\n        }\n      }\n    });\n\n    function WindowManagerImpl (editor) {\n      var open = function (args, params, closeCallback) {\n        var win;\n        args.title = args.title || ' ';\n        args.url = args.url || args.file;\n        if (args.url) {\n          args.width = parseInt(args.width || 320, 10);\n          args.height = parseInt(args.height || 240, 10);\n        }\n        if (args.body) {\n          args.items = {\n            defaults: args.defaults,\n            type: args.bodyType || 'form',\n            items: args.body,\n            data: args.data,\n            callbacks: args.commands\n          };\n        }\n        if (!args.url && !args.buttons) {\n          args.buttons = [\n            {\n              text: 'Ok',\n              subtype: 'primary',\n              onclick: function () {\n                win.find('form')[0].submit();\n              }\n            },\n            {\n              text: 'Cancel',\n              onclick: function () {\n                win.close();\n              }\n            }\n          ];\n        }\n        win = new Window(args);\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        if (args.data) {\n          win.on('postRender', function () {\n            this.find('*').each(function (ctrl) {\n              var name = ctrl.name();\n              if (name in args.data) {\n                ctrl.value(args.data[name]);\n              }\n            });\n          });\n        }\n        win.features = args || {};\n        win.params = params || {};\n        win = win.renderTo(domGlobals.document.body).reflow();\n        return win;\n      };\n      var alert = function (message, choiceCallback, closeCallback) {\n        var win;\n        win = MessageBox.alert(message, function () {\n          choiceCallback();\n        });\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        return win;\n      };\n      var confirm = function (message, choiceCallback, closeCallback) {\n        var win;\n        win = MessageBox.confirm(message, function (state) {\n          choiceCallback(state);\n        });\n        win.on('close', function () {\n          closeCallback(win);\n        });\n        return win;\n      };\n      var close = function (window) {\n        window.close();\n      };\n      var getParams = function (window) {\n        return window.params;\n      };\n      var setParams = function (window, params) {\n        window.params = params;\n      };\n      return {\n        open: open,\n        alert: alert,\n        confirm: confirm,\n        close: close,\n        getParams: getParams,\n        setParams: setParams\n      };\n    }\n\n    var get = function (editor) {\n      var renderUI = function (args) {\n        return Render.renderUI(editor, this, args);\n      };\n      var resizeTo = function (w, h) {\n        return Resize.resizeTo(editor, w, h);\n      };\n      var resizeBy = function (dw, dh) {\n        return Resize.resizeBy(editor, dw, dh);\n      };\n      var getNotificationManagerImpl = function () {\n        return NotificationManagerImpl(editor);\n      };\n      var getWindowManagerImpl = function () {\n        return WindowManagerImpl();\n      };\n      return {\n        renderUI: renderUI,\n        resizeTo: resizeTo,\n        resizeBy: resizeBy,\n        getNotificationManagerImpl: getNotificationManagerImpl,\n        getWindowManagerImpl: getWindowManagerImpl\n      };\n    };\n    var ThemeApi = { get: get };\n\n    var Layout = global$a.extend({\n      Defaults: {\n        firstControlClass: 'first',\n        lastControlClass: 'last'\n      },\n      init: function (settings) {\n        this.settings = global$2.extend({}, this.Defaults, settings);\n      },\n      preRender: function (container) {\n        container.bodyClasses.add(this.settings.containerClass);\n      },\n      applyClasses: function (items) {\n        var self = this;\n        var settings = self.settings;\n        var firstClass, lastClass, firstItem, lastItem;\n        firstClass = settings.firstControlClass;\n        lastClass = settings.lastControlClass;\n        items.each(function (item) {\n          item.classes.remove(firstClass).remove(lastClass).add(settings.controlClass);\n          if (item.visible()) {\n            if (!firstItem) {\n              firstItem = item;\n            }\n            lastItem = item;\n          }\n        });\n        if (firstItem) {\n          firstItem.classes.add(firstClass);\n        }\n        if (lastItem) {\n          lastItem.classes.add(lastClass);\n        }\n      },\n      renderHtml: function (container) {\n        var self = this;\n        var html = '';\n        self.applyClasses(container.items());\n        container.items().each(function (item) {\n          html += item.renderHtml();\n        });\n        return html;\n      },\n      recalc: function () {\n      },\n      postRender: function () {\n      },\n      isNative: function () {\n        return false;\n      }\n    });\n\n    var AbsoluteLayout = Layout.extend({\n      Defaults: {\n        containerClass: 'abs-layout',\n        controlClass: 'abs-layout-item'\n      },\n      recalc: function (container) {\n        container.items().filter(':visible').each(function (ctrl) {\n          var settings = ctrl.settings;\n          ctrl.layoutRect({\n            x: settings.x,\n            y: settings.y,\n            w: settings.w,\n            h: settings.h\n          });\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      },\n      renderHtml: function (container) {\n        return '<div id=\"' + container._id + '-absend\" class=\"' + container.classPrefix + 'abs-end\"></div>' + this._super(container);\n      }\n    });\n\n    var Button = Widget.extend({\n      Defaults: {\n        classes: 'widget btn',\n        role: 'button'\n      },\n      init: function (settings) {\n        var self = this;\n        var size;\n        self._super(settings);\n        settings = self.settings;\n        size = self.settings.size;\n        self.on('click mousedown', function (e) {\n          e.preventDefault();\n        });\n        self.on('touchstart', function (e) {\n          self.fire('click', e);\n          e.preventDefault();\n        });\n        if (settings.subtype) {\n          self.classes.add(settings.subtype);\n        }\n        if (size) {\n          self.classes.add('btn-' + size);\n        }\n        if (settings.icon) {\n          self.icon(settings.icon);\n        }\n      },\n      icon: function (icon) {\n        if (!arguments.length) {\n          return this.state.get('icon');\n        }\n        this.state.set('icon', icon);\n        return this;\n      },\n      repaint: function () {\n        var btnElm = this.getEl().firstChild;\n        var btnStyle;\n        if (btnElm) {\n          btnStyle = btnElm.style;\n          btnStyle.width = btnStyle.height = '100%';\n        }\n        this._super();\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        var icon = self.state.get('icon'), image;\n        var text = self.state.get('text');\n        var textHtml = '';\n        var ariaPressed;\n        var settings = self.settings;\n        image = settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        icon = icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        ariaPressed = typeof settings.active === 'boolean' ? ' aria-pressed=\"' + settings.active + '\"' : '';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\"' + ariaPressed + '>' + '<button id=\"' + id + '-button\" role=\"presentation\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + '</button>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this, $ = self.$, textCls = self.classPrefix + 'txt';\n        function setButtonText(text) {\n          var $span = $('span.' + textCls, self.getEl());\n          if (text) {\n            if (!$span[0]) {\n              $('button:first', self.getEl()).append('<span class=\"' + textCls + '\"></span>');\n              $span = $('span.' + textCls, self.getEl());\n            }\n            $span.html(self.encode(text));\n          } else {\n            $span.remove();\n          }\n          self.classes.toggle('btn-has-text', !!text);\n        }\n        self.state.on('change:text', function (e) {\n          setButtonText(e.value);\n        });\n        self.state.on('change:icon', function (e) {\n          var icon = e.value;\n          var prefix = self.classPrefix;\n          self.settings.icon = icon;\n          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n          var btnElm = self.getEl().firstChild;\n          var iconElm = btnElm.getElementsByTagName('i')[0];\n          if (icon) {\n            if (!iconElm || iconElm !== btnElm.firstChild) {\n              iconElm = domGlobals.document.createElement('i');\n              btnElm.insertBefore(iconElm, btnElm.firstChild);\n            }\n            iconElm.className = icon;\n          } else if (iconElm) {\n            btnElm.removeChild(iconElm);\n          }\n          setButtonText(self.state.get('text'));\n        });\n        return self._super();\n      }\n    });\n\n    var BrowseButton = Button.extend({\n      init: function (settings) {\n        var self = this;\n        settings = global$2.extend({\n          text: 'Browse...',\n          multiple: false,\n          accept: null\n        }, settings);\n        self._super(settings);\n        self.classes.add('browsebutton');\n        if (settings.multiple) {\n          self.classes.add('multiple');\n        }\n      },\n      postRender: function () {\n        var self = this;\n        var input = funcs.create('input', {\n          type: 'file',\n          id: self._id + '-browse',\n          accept: self.settings.accept\n        });\n        self._super();\n        global$9(input).on('change', function (e) {\n          var files = e.target.files;\n          self.value = function () {\n            if (!files.length) {\n              return null;\n            } else if (self.settings.multiple) {\n              return files;\n            } else {\n              return files[0];\n            }\n          };\n          e.preventDefault();\n          if (files.length) {\n            self.fire('change', e);\n          }\n        });\n        global$9(input).on('click', function (e) {\n          e.stopPropagation();\n        });\n        global$9(self.getEl('button')).on('click touchstart', function (e) {\n          e.stopPropagation();\n          input.click();\n          e.preventDefault();\n        });\n        self.getEl().appendChild(input);\n      },\n      remove: function () {\n        global$9(this.getEl('button')).off();\n        global$9(this.getEl('input')).off();\n        this._super();\n      }\n    });\n\n    var ButtonGroup = Container.extend({\n      Defaults: {\n        defaultType: 'button',\n        role: 'group'\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout;\n        self.classes.add('btn-group');\n        self.preRender();\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + self._id + '-body\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      }\n    });\n\n    var Checkbox = Widget.extend({\n      Defaults: {\n        classes: 'checkbox',\n        role: 'checkbox',\n        checked: false\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.on('click mousedown', function (e) {\n          e.preventDefault();\n        });\n        self.on('click', function (e) {\n          e.preventDefault();\n          if (!self.disabled()) {\n            self.checked(!self.checked());\n          }\n        });\n        self.checked(self.settings.checked);\n      },\n      checked: function (state) {\n        if (!arguments.length) {\n          return this.state.get('checked');\n        }\n        this.state.set('checked', state);\n        return this;\n      },\n      value: function (state) {\n        if (!arguments.length) {\n          return this.checked();\n        }\n        return this.checked(state);\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" unselectable=\"on\" aria-labelledby=\"' + id + '-al\" tabindex=\"-1\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-checkbox\"></i>' + '<span id=\"' + id + '-al\" class=\"' + prefix + 'label\">' + self.encode(self.state.get('text')) + '</span>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        function checked(state) {\n          self.classes.toggle('checked', state);\n          self.aria('checked', state);\n        }\n        self.state.on('change:text', function (e) {\n          self.getEl('al').firstChild.data = self.translate(e.value);\n        });\n        self.state.on('change:checked change:value', function (e) {\n          self.fire('change');\n          checked(e.value);\n        });\n        self.state.on('change:icon', function (e) {\n          var icon = e.value;\n          var prefix = self.classPrefix;\n          if (typeof icon === 'undefined') {\n            return self.settings.icon;\n          }\n          self.settings.icon = icon;\n          icon = icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n          var btnElm = self.getEl().firstChild;\n          var iconElm = btnElm.getElementsByTagName('i')[0];\n          if (icon) {\n            if (!iconElm || iconElm !== btnElm.firstChild) {\n              iconElm = domGlobals.document.createElement('i');\n              btnElm.insertBefore(iconElm, btnElm.firstChild);\n            }\n            iconElm.className = icon;\n          } else if (iconElm) {\n            btnElm.removeChild(iconElm);\n          }\n        });\n        if (self.state.get('checked')) {\n          checked(true);\n        }\n        return self._super();\n      }\n    });\n\n    var global$d = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var ComboBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('combobox');\n        self.subinput = true;\n        self.ariaTarget = 'inp';\n        settings.menu = settings.menu || settings.values;\n        if (settings.menu) {\n          settings.icon = 'caret';\n        }\n        self.on('click', function (e) {\n          var elm = e.target;\n          var root = self.getEl();\n          if (!global$9.contains(root, elm) && elm !== root) {\n            return;\n          }\n          while (elm && elm !== root) {\n            if (elm.id && elm.id.indexOf('-open') !== -1) {\n              self.fire('action');\n              if (settings.menu) {\n                self.showMenu();\n                if (e.aria) {\n                  self.menu.items()[0].focus();\n                }\n              }\n            }\n            elm = elm.parentNode;\n          }\n        });\n        self.on('keydown', function (e) {\n          var rootControl;\n          if (e.keyCode === 13 && e.target.nodeName === 'INPUT') {\n            e.preventDefault();\n            self.parents().reverse().each(function (ctrl) {\n              if (ctrl.toJSON) {\n                rootControl = ctrl;\n                return false;\n              }\n            });\n            self.fire('submit', { data: rootControl.toJSON() });\n          }\n        });\n        self.on('keyup', function (e) {\n          if (e.target.nodeName === 'INPUT') {\n            var oldValue = self.state.get('value');\n            var newValue = e.target.value;\n            if (newValue !== oldValue) {\n              self.state.set('value', newValue);\n              self.fire('autocomplete', e);\n            }\n          }\n        });\n        self.on('mouseover', function (e) {\n          var tooltip = self.tooltip().moveTo(-65535);\n          if (self.statusLevel() && e.target.className.indexOf(self.classPrefix + 'status') !== -1) {\n            var statusMessage = self.statusMessage() || 'Ok';\n            var rel = tooltip.text(statusMessage).show().testMoveRel(e.target, [\n              'bc-tc',\n              'bc-tl',\n              'bc-tr'\n            ]);\n            tooltip.classes.toggle('tooltip-n', rel === 'bc-tc');\n            tooltip.classes.toggle('tooltip-nw', rel === 'bc-tl');\n            tooltip.classes.toggle('tooltip-ne', rel === 'bc-tr');\n            tooltip.moveRel(e.target, rel);\n          }\n        });\n      },\n      statusLevel: function (value) {\n        if (arguments.length > 0) {\n          this.state.set('statusLevel', value);\n        }\n        return this.state.get('statusLevel');\n      },\n      statusMessage: function (value) {\n        if (arguments.length > 0) {\n          this.state.set('statusMessage', value);\n        }\n        return this.state.get('statusMessage');\n      },\n      showMenu: function () {\n        var self = this;\n        var settings = self.settings;\n        var menu;\n        if (!self.menu) {\n          menu = settings.menu || [];\n          if (menu.length) {\n            menu = {\n              type: 'menu',\n              items: menu\n            };\n          } else {\n            menu.type = menu.type || 'menu';\n          }\n          self.menu = global$4.create(menu).parent(self).renderTo(self.getContainerElm());\n          self.fire('createmenu');\n          self.menu.reflow();\n          self.menu.on('cancel', function (e) {\n            if (e.control === self.menu) {\n              self.focus();\n            }\n          });\n          self.menu.on('show hide', function (e) {\n            e.control.items().each(function (ctrl) {\n              ctrl.active(ctrl.value() === self.value());\n            });\n          }).fire('show');\n          self.menu.on('select', function (e) {\n            self.value(e.control.value());\n          });\n          self.on('focusin', function (e) {\n            if (e.target.tagName.toUpperCase() === 'INPUT') {\n              self.menu.hide();\n            }\n          });\n          self.aria('expanded', true);\n        }\n        self.menu.show();\n        self.menu.layoutRect({ w: self.layoutRect().w });\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n      },\n      focus: function () {\n        this.getEl('inp').focus();\n      },\n      repaint: function () {\n        var self = this, elm = self.getEl(), openElm = self.getEl('open'), rect = self.layoutRect();\n        var width, lineHeight, innerPadding = 0;\n        var inputElm = elm.firstChild;\n        if (self.statusLevel() && self.statusLevel() !== 'none') {\n          innerPadding = parseInt(funcs.getRuntimeStyle(inputElm, 'padding-right'), 10) - parseInt(funcs.getRuntimeStyle(inputElm, 'padding-left'), 10);\n        }\n        if (openElm) {\n          width = rect.w - funcs.getSize(openElm).width - 10;\n        } else {\n          width = rect.w - 10;\n        }\n        var doc = domGlobals.document;\n        if (doc.all && (!doc.documentMode || doc.documentMode <= 8)) {\n          lineHeight = self.layoutRect().h - 2 + 'px';\n        }\n        global$9(inputElm).css({\n          width: width - innerPadding,\n          lineHeight: lineHeight\n        });\n        self._super();\n        return self;\n      },\n      postRender: function () {\n        var self = this;\n        global$9(this.getEl('inp')).on('change', function (e) {\n          self.state.set('value', e.target.value);\n          self.fire('change', e);\n        });\n        return self._super();\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, settings = self.settings, prefix = self.classPrefix;\n        var value = self.state.get('value') || '';\n        var icon, text, openBtnHtml = '', extraAttrs = '', statusHtml = '';\n        if ('spellcheck' in settings) {\n          extraAttrs += ' spellcheck=\"' + settings.spellcheck + '\"';\n        }\n        if (settings.maxLength) {\n          extraAttrs += ' maxlength=\"' + settings.maxLength + '\"';\n        }\n        if (settings.size) {\n          extraAttrs += ' size=\"' + settings.size + '\"';\n        }\n        if (settings.subtype) {\n          extraAttrs += ' type=\"' + settings.subtype + '\"';\n        }\n        statusHtml = '<i id=\"' + id + '-status\" class=\"mce-status mce-ico\" style=\"display: none\"></i>';\n        if (self.disabled()) {\n          extraAttrs += ' disabled=\"disabled\"';\n        }\n        icon = settings.icon;\n        if (icon && icon !== 'caret') {\n          icon = prefix + 'ico ' + prefix + 'i-' + settings.icon;\n        }\n        text = self.state.get('text');\n        if (icon || text) {\n          openBtnHtml = '<div id=\"' + id + '-open\" class=\"' + prefix + 'btn ' + prefix + 'open\" tabIndex=\"-1\" role=\"button\">' + '<button id=\"' + id + '-action\" type=\"button\" hidefocus=\"1\" tabindex=\"-1\">' + (icon !== 'caret' ? '<i class=\"' + icon + '\"></i>' : '<i class=\"' + prefix + 'caret\"></i>') + (text ? (icon ? ' ' : '') + text : '') + '</button>' + '</div>';\n          self.classes.add('has-open');\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<input id=\"' + id + '-inp\" class=\"' + prefix + 'textbox\" value=\"' + self.encode(value, false) + '\" hidefocus=\"1\"' + extraAttrs + ' placeholder=\"' + self.encode(settings.placeholder) + '\" />' + statusHtml + openBtnHtml + '</div>';\n      },\n      value: function (value) {\n        if (arguments.length) {\n          this.state.set('value', value);\n          return this;\n        }\n        if (this.state.get('rendered')) {\n          this.state.set('value', this.getEl('inp').value);\n        }\n        return this.state.get('value');\n      },\n      showAutoComplete: function (items, term) {\n        var self = this;\n        if (items.length === 0) {\n          self.hideMenu();\n          return;\n        }\n        var insert = function (value, title) {\n          return function () {\n            self.fire('selectitem', {\n              title: title,\n              value: value\n            });\n          };\n        };\n        if (self.menu) {\n          self.menu.items().remove();\n        } else {\n          self.menu = global$4.create({\n            type: 'menu',\n            classes: 'combobox-menu',\n            layout: 'flow'\n          }).parent(self).renderTo();\n        }\n        global$2.each(items, function (item) {\n          self.menu.add({\n            text: item.title,\n            url: item.previewUrl,\n            match: term,\n            classes: 'menu-item-ellipsis',\n            onclick: insert(item.value, item.title)\n          });\n        });\n        self.menu.renderNew();\n        self.hideMenu();\n        self.menu.on('cancel', function (e) {\n          if (e.control.parent() === self.menu) {\n            e.stopPropagation();\n            self.focus();\n            self.hideMenu();\n          }\n        });\n        self.menu.on('select', function () {\n          self.focus();\n        });\n        var maxW = self.layoutRect().w;\n        self.menu.layoutRect({\n          w: maxW,\n          minW: 0,\n          maxW: maxW\n        });\n        self.menu.repaint();\n        self.menu.reflow();\n        self.menu.show();\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n      },\n      hideMenu: function () {\n        if (this.menu) {\n          this.menu.hide();\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.getEl('inp').value !== e.value) {\n            self.getEl('inp').value = e.value;\n          }\n        });\n        self.state.on('change:disabled', function (e) {\n          self.getEl('inp').disabled = e.value;\n        });\n        self.state.on('change:statusLevel', function (e) {\n          var statusIconElm = self.getEl('status');\n          var prefix = self.classPrefix, value = e.value;\n          funcs.css(statusIconElm, 'display', value === 'none' ? 'none' : '');\n          funcs.toggleClass(statusIconElm, prefix + 'i-checkmark', value === 'ok');\n          funcs.toggleClass(statusIconElm, prefix + 'i-warning', value === 'warn');\n          funcs.toggleClass(statusIconElm, prefix + 'i-error', value === 'error');\n          self.classes.toggle('has-status', value !== 'none');\n          self.repaint();\n        });\n        funcs.on(self.getEl('status'), 'mouseleave', function () {\n          self.tooltip().hide();\n        });\n        self.on('cancel', function (e) {\n          if (self.menu && self.menu.visible()) {\n            e.stopPropagation();\n            self.hideMenu();\n          }\n        });\n        var focusIdx = function (idx, menu) {\n          if (menu && menu.items().length > 0) {\n            menu.items().eq(idx)[0].focus();\n          }\n        };\n        self.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          if (e.target.nodeName === 'INPUT') {\n            if (keyCode === global$d.DOWN) {\n              e.preventDefault();\n              self.fire('autocomplete');\n              focusIdx(0, self.menu);\n            } else if (keyCode === global$d.UP) {\n              e.preventDefault();\n              focusIdx(-1, self.menu);\n            }\n          }\n        });\n        return self._super();\n      },\n      remove: function () {\n        global$9(this.getEl('inp')).off();\n        if (this.menu) {\n          this.menu.remove();\n        }\n        this._super();\n      }\n    });\n\n    var ColorBox = ComboBox.extend({\n      init: function (settings) {\n        var self = this;\n        settings.spellcheck = false;\n        if (settings.onaction) {\n          settings.icon = 'none';\n        }\n        self._super(settings);\n        self.classes.add('colorbox');\n        self.on('change keyup postrender', function () {\n          self.repaintColor(self.value());\n        });\n      },\n      repaintColor: function (value) {\n        var openElm = this.getEl('open');\n        var elm = openElm ? openElm.getElementsByTagName('i')[0] : null;\n        if (elm) {\n          try {\n            elm.style.background = value;\n          } catch (ex) {\n          }\n        }\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.state.get('rendered')) {\n            self.repaintColor(e.value);\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var PanelButton = Button.extend({\n      showPanel: function () {\n        var self = this, settings = self.settings;\n        self.classes.add('opened');\n        if (!self.panel) {\n          var panelSettings = settings.panel;\n          if (panelSettings.type) {\n            panelSettings = {\n              layout: 'grid',\n              items: panelSettings\n            };\n          }\n          panelSettings.role = panelSettings.role || 'dialog';\n          panelSettings.popover = true;\n          panelSettings.autohide = true;\n          panelSettings.ariaRoot = true;\n          self.panel = new FloatPanel(panelSettings).on('hide', function () {\n            self.classes.remove('opened');\n          }).on('cancel', function (e) {\n            e.stopPropagation();\n            self.focus();\n            self.hidePanel();\n          }).parent(self).renderTo(self.getContainerElm());\n          self.panel.fire('show');\n          self.panel.reflow();\n        } else {\n          self.panel.show();\n        }\n        var rtlRels = [\n          'bc-tc',\n          'bc-tl',\n          'bc-tr'\n        ];\n        var ltrRels = [\n          'bc-tc',\n          'bc-tr',\n          'bc-tl',\n          'tc-bc',\n          'tc-br',\n          'tc-bl'\n        ];\n        var rel = self.panel.testMoveRel(self.getEl(), settings.popoverAlign || (self.isRtl() ? rtlRels : ltrRels));\n        self.panel.classes.toggle('start', rel.substr(-1) === 'l');\n        self.panel.classes.toggle('end', rel.substr(-1) === 'r');\n        var isTop = rel.substr(0, 1) === 't';\n        self.panel.classes.toggle('bottom', !isTop);\n        self.panel.classes.toggle('top', isTop);\n        self.panel.moveRel(self.getEl(), rel);\n      },\n      hidePanel: function () {\n        var self = this;\n        if (self.panel) {\n          self.panel.hide();\n        }\n      },\n      postRender: function () {\n        var self = this;\n        self.aria('haspopup', true);\n        self.on('click', function (e) {\n          if (e.control === self) {\n            if (self.panel && self.panel.visible()) {\n              self.hidePanel();\n            } else {\n              self.showPanel();\n              self.panel.focus(!!e.aria);\n            }\n          }\n        });\n        return self._super();\n      },\n      remove: function () {\n        if (this.panel) {\n          this.panel.remove();\n          this.panel = null;\n        }\n        return this._super();\n      }\n    });\n\n    var DOM$3 = global$3.DOM;\n    var ColorButton = PanelButton.extend({\n      init: function (settings) {\n        this._super(settings);\n        this.classes.add('splitbtn');\n        this.classes.add('colorbutton');\n      },\n      color: function (color) {\n        if (color) {\n          this._color = color;\n          this.getEl('preview').style.backgroundColor = color;\n          return this;\n        }\n        return this._color;\n      },\n      resetColor: function () {\n        this._color = null;\n        this.getEl('preview').style.backgroundColor = null;\n        return this;\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix, text = self.state.get('text');\n        var icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + self.settings.icon : '';\n        var image = self.settings.image ? ' style=\"background-image: url(\\'' + self.settings.image + '\\')\"' : '';\n        var textHtml = '';\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" role=\"button\" tabindex=\"-1\" aria-haspopup=\"true\">' + '<button role=\"presentation\" hidefocus=\"1\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + '<span id=\"' + id + '-preview\" class=\"' + prefix + 'preview\"></span>' + textHtml + '</button>' + '<button type=\"button\" class=\"' + prefix + 'open\" hidefocus=\"1\" tabindex=\"-1\">' + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this, onClickHandler = self.settings.onclick;\n        self.on('click', function (e) {\n          if (e.aria && e.aria.key === 'down') {\n            return;\n          }\n          if (e.control === self && !DOM$3.getParent(e.target, '.' + self.classPrefix + 'open')) {\n            e.stopImmediatePropagation();\n            onClickHandler.call(self, e);\n          }\n        });\n        delete self.settings.onclick;\n        return self._super();\n      }\n    });\n\n    var global$e = tinymce.util.Tools.resolve('tinymce.util.Color');\n\n    var ColorPicker = Widget.extend({\n      Defaults: { classes: 'widget colorpicker' },\n      init: function (settings) {\n        this._super(settings);\n      },\n      postRender: function () {\n        var self = this;\n        var color = self.color();\n        var hsv, hueRootElm, huePointElm, svRootElm, svPointElm;\n        hueRootElm = self.getEl('h');\n        huePointElm = self.getEl('hp');\n        svRootElm = self.getEl('sv');\n        svPointElm = self.getEl('svp');\n        function getPos(elm, event) {\n          var pos = funcs.getPos(elm);\n          var x, y;\n          x = event.pageX - pos.x;\n          y = event.pageY - pos.y;\n          x = Math.max(0, Math.min(x / elm.clientWidth, 1));\n          y = Math.max(0, Math.min(y / elm.clientHeight, 1));\n          return {\n            x: x,\n            y: y\n          };\n        }\n        function updateColor(hsv, hueUpdate) {\n          var hue = (360 - hsv.h) / 360;\n          funcs.css(huePointElm, { top: hue * 100 + '%' });\n          if (!hueUpdate) {\n            funcs.css(svPointElm, {\n              left: hsv.s + '%',\n              top: 100 - hsv.v + '%'\n            });\n          }\n          svRootElm.style.background = global$e({\n            s: 100,\n            v: 100,\n            h: hsv.h\n          }).toHex();\n          self.color().parse({\n            s: hsv.s,\n            v: hsv.v,\n            h: hsv.h\n          });\n        }\n        function updateSaturationAndValue(e) {\n          var pos;\n          pos = getPos(svRootElm, e);\n          hsv.s = pos.x * 100;\n          hsv.v = (1 - pos.y) * 100;\n          updateColor(hsv);\n          self.fire('change');\n        }\n        function updateHue(e) {\n          var pos;\n          pos = getPos(hueRootElm, e);\n          hsv = color.toHsv();\n          hsv.h = (1 - pos.y) * 360;\n          updateColor(hsv, true);\n          self.fire('change');\n        }\n        self._repaint = function () {\n          hsv = color.toHsv();\n          updateColor(hsv);\n        };\n        self._super();\n        self._svdraghelper = new DragHelper(self._id + '-sv', {\n          start: updateSaturationAndValue,\n          drag: updateSaturationAndValue\n        });\n        self._hdraghelper = new DragHelper(self._id + '-h', {\n          start: updateHue,\n          drag: updateHue\n        });\n        self._repaint();\n      },\n      rgb: function () {\n        return this.color().toRgb();\n      },\n      value: function (value) {\n        var self = this;\n        if (arguments.length) {\n          self.color().parse(value);\n          if (self._rendered) {\n            self._repaint();\n          }\n        } else {\n          return self.color().toHex();\n        }\n      },\n      color: function () {\n        if (!this._color) {\n          this._color = global$e();\n        }\n        return this._color;\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var prefix = self.classPrefix;\n        var hueHtml;\n        var stops = '#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000';\n        function getOldIeFallbackHtml() {\n          var i, l, html = '', gradientPrefix, stopsList;\n          gradientPrefix = 'filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=';\n          stopsList = stops.split(',');\n          for (i = 0, l = stopsList.length - 1; i < l; i++) {\n            html += '<div class=\"' + prefix + 'colorpicker-h-chunk\" style=\"' + 'height:' + 100 / l + '%;' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ');' + '-ms-' + gradientPrefix + stopsList[i] + ',endColorstr=' + stopsList[i + 1] + ')' + '\"></div>';\n          }\n          return html;\n        }\n        var gradientCssText = 'background: -ms-linear-gradient(top,' + stops + ');' + 'background: linear-gradient(to bottom,' + stops + ');';\n        hueHtml = '<div id=\"' + id + '-h\" class=\"' + prefix + 'colorpicker-h\" style=\"' + gradientCssText + '\">' + getOldIeFallbackHtml() + '<div id=\"' + id + '-hp\" class=\"' + prefix + 'colorpicker-h-marker\"></div>' + '</div>';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + id + '-sv\" class=\"' + prefix + 'colorpicker-sv\">' + '<div class=\"' + prefix + 'colorpicker-overlay1\">' + '<div class=\"' + prefix + 'colorpicker-overlay2\">' + '<div id=\"' + id + '-svp\" class=\"' + prefix + 'colorpicker-selector1\">' + '<div class=\"' + prefix + 'colorpicker-selector2\"></div>' + '</div>' + '</div>' + '</div>' + '</div>' + hueHtml + '</div>';\n      }\n    });\n\n    var DropZone = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        settings = global$2.extend({\n          height: 100,\n          text: 'Drop an image here',\n          multiple: false,\n          accept: null\n        }, settings);\n        self._super(settings);\n        self.classes.add('dropzone');\n        if (settings.multiple) {\n          self.classes.add('multiple');\n        }\n      },\n      renderHtml: function () {\n        var self = this;\n        var attrs, elm;\n        var cfg = self.settings;\n        attrs = {\n          id: self._id,\n          hidefocus: '1'\n        };\n        elm = funcs.create('div', attrs, '<span>' + this.translate(cfg.text) + '</span>');\n        if (cfg.height) {\n          funcs.css(elm, 'height', cfg.height + 'px');\n        }\n        if (cfg.width) {\n          funcs.css(elm, 'width', cfg.width + 'px');\n        }\n        elm.className = self.classes;\n        return elm.outerHTML;\n      },\n      postRender: function () {\n        var self = this;\n        var toggleDragClass = function (e) {\n          e.preventDefault();\n          self.classes.toggle('dragenter');\n          self.getEl().className = self.classes;\n        };\n        var filter = function (files) {\n          var accept = self.settings.accept;\n          if (typeof accept !== 'string') {\n            return files;\n          }\n          var re = new RegExp('(' + accept.split(/\\s*,\\s*/).join('|') + ')$', 'i');\n          return global$2.grep(files, function (file) {\n            return re.test(file.name);\n          });\n        };\n        self._super();\n        self.$el.on('dragover', function (e) {\n          e.preventDefault();\n        });\n        self.$el.on('dragenter', toggleDragClass);\n        self.$el.on('dragleave', toggleDragClass);\n        self.$el.on('drop', function (e) {\n          e.preventDefault();\n          if (self.state.get('disabled')) {\n            return;\n          }\n          var files = filter(e.dataTransfer.files);\n          self.value = function () {\n            if (!files.length) {\n              return null;\n            } else if (self.settings.multiple) {\n              return files;\n            } else {\n              return files[0];\n            }\n          };\n          if (files.length) {\n            self.fire('change', e);\n          }\n        });\n      },\n      remove: function () {\n        this.$el.off();\n        this._super();\n      }\n    });\n\n    var Path = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        if (!settings.delimiter) {\n          settings.delimiter = '\\xBB';\n        }\n        self._super(settings);\n        self.classes.add('path');\n        self.canFocus = true;\n        self.on('click', function (e) {\n          var index;\n          var target = e.target;\n          if (index = target.getAttribute('data-index')) {\n            self.fire('select', {\n              value: self.row()[index],\n              index: index\n            });\n          }\n        });\n        self.row(self.settings.row);\n      },\n      focus: function () {\n        var self = this;\n        self.getEl().firstChild.focus();\n        return self;\n      },\n      row: function (row) {\n        if (!arguments.length) {\n          return this.state.get('row');\n        }\n        this.state.set('row', row);\n        return this;\n      },\n      renderHtml: function () {\n        var self = this;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + self._getDataPathHtml(self.state.get('row')) + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:row', function (e) {\n          self.innerHtml(self._getDataPathHtml(e.value));\n        });\n        return self._super();\n      },\n      _getDataPathHtml: function (data) {\n        var self = this;\n        var parts = data || [];\n        var i, l, html = '';\n        var prefix = self.classPrefix;\n        for (i = 0, l = parts.length; i < l; i++) {\n          html += (i > 0 ? '<div class=\"' + prefix + 'divider\" aria-hidden=\"true\"> ' + self.settings.delimiter + ' </div>' : '') + '<div role=\"button\" class=\"' + prefix + 'path-item' + (i === l - 1 ? ' ' + prefix + 'last' : '') + '\" data-index=\"' + i + '\" tabindex=\"-1\" id=\"' + self._id + '-' + i + '\" aria-level=\"' + (i + 1) + '\">' + parts[i].name + '</div>';\n        }\n        if (!html) {\n          html = '<div class=\"' + prefix + 'path-item\">\\xA0</div>';\n        }\n        return html;\n      }\n    });\n\n    var ElementPath = Path.extend({\n      postRender: function () {\n        var self = this, editor = self.settings.editor;\n        function isHidden(elm) {\n          if (elm.nodeType === 1) {\n            if (elm.nodeName === 'BR' || !!elm.getAttribute('data-mce-bogus')) {\n              return true;\n            }\n            if (elm.getAttribute('data-mce-type') === 'bookmark') {\n              return true;\n            }\n          }\n          return false;\n        }\n        if (editor.settings.elementpath !== false) {\n          self.on('select', function (e) {\n            editor.focus();\n            editor.selection.select(this.row()[e.index].element);\n            editor.nodeChanged();\n          });\n          editor.on('nodeChange', function (e) {\n            var outParents = [];\n            var parents = e.parents;\n            var i = parents.length;\n            while (i--) {\n              if (parents[i].nodeType === 1 && !isHidden(parents[i])) {\n                var args = editor.fire('ResolveName', {\n                  name: parents[i].nodeName.toLowerCase(),\n                  target: parents[i]\n                });\n                if (!args.isDefaultPrevented()) {\n                  outParents.push({\n                    name: args.name,\n                    element: parents[i]\n                  });\n                }\n                if (args.isPropagationStopped()) {\n                  break;\n                }\n              }\n            }\n            self.row(outParents);\n          });\n        }\n        return self._super();\n      }\n    });\n\n    var FormItem = Container.extend({\n      Defaults: {\n        layout: 'flex',\n        align: 'center',\n        defaults: { flex: 1 }\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, prefix = self.classPrefix;\n        self.classes.add('formitem');\n        layout.preRender(self);\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + (self.settings.title ? '<div id=\"' + self._id + '-title\" class=\"' + prefix + 'title\">' + self.settings.title + '</div>' : '') + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</div>';\n      }\n    });\n\n    var Form = Container.extend({\n      Defaults: {\n        containerCls: 'form',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        flex: 1,\n        padding: 15,\n        labelGap: 30,\n        spacing: 10,\n        callbacks: {\n          submit: function () {\n            this.submit();\n          }\n        }\n      },\n      preRender: function () {\n        var self = this, items = self.items();\n        if (!self.settings.formItemDefaults) {\n          self.settings.formItemDefaults = {\n            layout: 'flex',\n            autoResize: 'overflow',\n            defaults: { flex: 1 }\n          };\n        }\n        items.each(function (ctrl) {\n          var formItem;\n          var label = ctrl.settings.label;\n          if (label) {\n            formItem = new FormItem(global$2.extend({\n              items: {\n                type: 'label',\n                id: ctrl._id + '-l',\n                text: label,\n                flex: 0,\n                forId: ctrl._id,\n                disabled: ctrl.disabled()\n              }\n            }, self.settings.formItemDefaults));\n            formItem.type = 'formitem';\n            ctrl.aria('labelledby', ctrl._id + '-l');\n            if (typeof ctrl.settings.flex === 'undefined') {\n              ctrl.settings.flex = 1;\n            }\n            self.replace(ctrl, formItem);\n            formItem.add(ctrl);\n          }\n        });\n      },\n      submit: function () {\n        return this.fire('submit', { data: this.toJSON() });\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.fromJSON(self.settings.data);\n      },\n      bindStates: function () {\n        var self = this;\n        self._super();\n        function recalcLabels() {\n          var maxLabelWidth = 0;\n          var labels = [];\n          var i, labelGap, items;\n          if (self.settings.labelGapCalc === false) {\n            return;\n          }\n          if (self.settings.labelGapCalc === 'children') {\n            items = self.find('formitem');\n          } else {\n            items = self.items();\n          }\n          items.filter('formitem').each(function (item) {\n            var labelCtrl = item.items()[0], labelWidth = labelCtrl.getEl().clientWidth;\n            maxLabelWidth = labelWidth > maxLabelWidth ? labelWidth : maxLabelWidth;\n            labels.push(labelCtrl);\n          });\n          labelGap = self.settings.labelGap || 0;\n          i = labels.length;\n          while (i--) {\n            labels[i].settings.minWidth = maxLabelWidth + labelGap;\n          }\n        }\n        self.on('show', recalcLabels);\n        recalcLabels();\n      }\n    });\n\n    var FieldSet = Form.extend({\n      Defaults: {\n        containerCls: 'fieldset',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        flex: 1,\n        padding: '25 15 5 15',\n        labelGap: 30,\n        spacing: 10,\n        border: 1\n      },\n      renderHtml: function () {\n        var self = this, layout = self._layout, prefix = self.classPrefix;\n        self.preRender();\n        layout.preRender(self);\n        return '<fieldset id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + (self.settings.title ? '<legend id=\"' + self._id + '-title\" class=\"' + prefix + 'fieldset-title\">' + self.settings.title + '</legend>' : '') + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + (self.settings.html || '') + layout.renderHtml(self) + '</div>' + '</fieldset>';\n      }\n    });\n\n    var unique$1 = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique$1++;\n      return prefix + '_' + random + unique$1 + String(time);\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows$1 = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows$1, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows$1),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains(uastring, 'edge/') && contains(uastring, 'chrome') && contains(uastring, 'safari') && contains(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'chrome') && !contains(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains(uastring, 'msie') || contains(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains(uastring, 'safari') || contains(uastring, 'mobile/')) && contains(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains(uastring, 'iphone') || contains(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$1 = browser.isIE() ? ieContains : regularContains;\n\n    var spot = Immutable('element', 'offset');\n\n    var descendants = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    var trim = global$2.trim;\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (node && node.nodeType === 1) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var create = function (type, title, url, level, attach) {\n      return {\n        type: type,\n        title: title,\n        url: url,\n        level: level,\n        attach: attach\n      };\n    };\n    var isChildOfContentEditableTrue = function (node) {\n      while (node = node.parentNode) {\n        var value = node.contentEditable;\n        if (value && value !== 'inherit') {\n          return isContentEditableTrue(node);\n        }\n      }\n      return false;\n    };\n    var select = function (selector, root) {\n      return map(descendants(Element.fromDom(root), selector), function (element) {\n        return element.dom();\n      });\n    };\n    var getElementText = function (elm) {\n      return elm.innerText || elm.textContent;\n    };\n    var getOrGenerateId = function (elm) {\n      return elm.id ? elm.id : generate('h');\n    };\n    var isAnchor = function (elm) {\n      return elm && elm.nodeName === 'A' && (elm.id || elm.name);\n    };\n    var isValidAnchor = function (elm) {\n      return isAnchor(elm) && isEditable(elm);\n    };\n    var isHeader = function (elm) {\n      return elm && /^(H[1-6])$/.test(elm.nodeName);\n    };\n    var isEditable = function (elm) {\n      return isChildOfContentEditableTrue(elm) && !isContentEditableFalse(elm);\n    };\n    var isValidHeader = function (elm) {\n      return isHeader(elm) && isEditable(elm);\n    };\n    var getLevel = function (elm) {\n      return isHeader(elm) ? parseInt(elm.nodeName.substr(1), 10) : 0;\n    };\n    var headerTarget = function (elm) {\n      var headerId = getOrGenerateId(elm);\n      var attach = function () {\n        elm.id = headerId;\n      };\n      return create('header', getElementText(elm), '#' + headerId, getLevel(elm), attach);\n    };\n    var anchorTarget = function (elm) {\n      var anchorId = elm.id || elm.name;\n      var anchorText = getElementText(elm);\n      return create('anchor', anchorText ? anchorText : '#' + anchorId, '#' + anchorId, 0, noop);\n    };\n    var getHeaderTargets = function (elms) {\n      return map(filter(elms, isValidHeader), headerTarget);\n    };\n    var getAnchorTargets = function (elms) {\n      return map(filter(elms, isValidAnchor), anchorTarget);\n    };\n    var getTargetElements = function (elm) {\n      var elms = select('h1,h2,h3,h4,h5,h6,a:not([href])', elm);\n      return elms;\n    };\n    var hasTitle = function (target) {\n      return trim(target.title).length > 0;\n    };\n    var find$2 = function (elm) {\n      var elms = getTargetElements(elm);\n      return filter(getHeaderTargets(elms).concat(getAnchorTargets(elms)), hasTitle);\n    };\n    var LinkTargets = { find: find$2 };\n\n    var getActiveEditor = function () {\n      return window.tinymce ? window.tinymce.activeEditor : global$1.activeEditor;\n    };\n    var history = {};\n    var HISTORY_LENGTH = 5;\n    var clearHistory = function () {\n      history = {};\n    };\n    var toMenuItem = function (target) {\n      return {\n        title: target.title,\n        value: {\n          title: { raw: target.title },\n          url: target.url,\n          attach: target.attach\n        }\n      };\n    };\n    var toMenuItems = function (targets) {\n      return global$2.map(targets, toMenuItem);\n    };\n    var staticMenuItem = function (title, url) {\n      return {\n        title: title,\n        value: {\n          title: title,\n          url: url,\n          attach: noop\n        }\n      };\n    };\n    var isUniqueUrl = function (url, targets) {\n      var foundTarget = exists(targets, function (target) {\n        return target.url === url;\n      });\n      return !foundTarget;\n    };\n    var getSetting = function (editorSettings, name, defaultValue) {\n      var value = name in editorSettings ? editorSettings[name] : defaultValue;\n      return value === false ? null : value;\n    };\n    var createMenuItems = function (term, targets, fileType, editorSettings) {\n      var separator = { title: '-' };\n      var fromHistoryMenuItems = function (history) {\n        var historyItems = history.hasOwnProperty(fileType) ? history[fileType] : [];\n        var uniqueHistory = filter(historyItems, function (url) {\n          return isUniqueUrl(url, targets);\n        });\n        return global$2.map(uniqueHistory, function (url) {\n          return {\n            title: url,\n            value: {\n              title: url,\n              url: url,\n              attach: noop\n            }\n          };\n        });\n      };\n      var fromMenuItems = function (type) {\n        var filteredTargets = filter(targets, function (target) {\n          return target.type === type;\n        });\n        return toMenuItems(filteredTargets);\n      };\n      var anchorMenuItems = function () {\n        var anchorMenuItems = fromMenuItems('anchor');\n        var topAnchor = getSetting(editorSettings, 'anchor_top', '#top');\n        var bottomAchor = getSetting(editorSettings, 'anchor_bottom', '#bottom');\n        if (topAnchor !== null) {\n          anchorMenuItems.unshift(staticMenuItem('<top>', topAnchor));\n        }\n        if (bottomAchor !== null) {\n          anchorMenuItems.push(staticMenuItem('<bottom>', bottomAchor));\n        }\n        return anchorMenuItems;\n      };\n      var join = function (items) {\n        return foldl(items, function (a, b) {\n          var bothEmpty = a.length === 0 || b.length === 0;\n          return bothEmpty ? a.concat(b) : a.concat(separator, b);\n        }, []);\n      };\n      if (editorSettings.typeahead_urls === false) {\n        return [];\n      }\n      return fileType === 'file' ? join([\n        filterByQuery(term, fromHistoryMenuItems(history)),\n        filterByQuery(term, fromMenuItems('header')),\n        filterByQuery(term, anchorMenuItems())\n      ]) : filterByQuery(term, fromHistoryMenuItems(history));\n    };\n    var addToHistory = function (url, fileType) {\n      var items = history[fileType];\n      if (!/^https?/.test(url)) {\n        return;\n      }\n      if (items) {\n        if (indexOf(items, url).isNone()) {\n          history[fileType] = items.slice(0, HISTORY_LENGTH).concat(url);\n        }\n      } else {\n        history[fileType] = [url];\n      }\n    };\n    var filterByQuery = function (term, menuItems) {\n      var lowerCaseTerm = term.toLowerCase();\n      var result = global$2.grep(menuItems, function (item) {\n        return item.title.toLowerCase().indexOf(lowerCaseTerm) !== -1;\n      });\n      return result.length === 1 && result[0].title === term ? [] : result;\n    };\n    var getTitle = function (linkDetails) {\n      var title = linkDetails.title;\n      return title.raw ? title.raw : title;\n    };\n    var setupAutoCompleteHandler = function (ctrl, editorSettings, bodyElm, fileType) {\n      var autocomplete = function (term) {\n        var linkTargets = LinkTargets.find(bodyElm);\n        var menuItems = createMenuItems(term, linkTargets, fileType, editorSettings);\n        ctrl.showAutoComplete(menuItems, term);\n      };\n      ctrl.on('autocomplete', function () {\n        autocomplete(ctrl.value());\n      });\n      ctrl.on('selectitem', function (e) {\n        var linkDetails = e.value;\n        ctrl.value(linkDetails.url);\n        var title = getTitle(linkDetails);\n        if (fileType === 'image') {\n          ctrl.fire('change', {\n            meta: {\n              alt: title,\n              attach: linkDetails.attach\n            }\n          });\n        } else {\n          ctrl.fire('change', {\n            meta: {\n              text: title,\n              attach: linkDetails.attach\n            }\n          });\n        }\n        ctrl.focus();\n      });\n      ctrl.on('click', function (e) {\n        if (ctrl.value().length === 0 && e.target.nodeName === 'INPUT') {\n          autocomplete('');\n        }\n      });\n      ctrl.on('PostRender', function () {\n        ctrl.getRoot().on('submit', function (e) {\n          if (!e.isDefaultPrevented()) {\n            addToHistory(ctrl.value(), fileType);\n          }\n        });\n      });\n    };\n    var statusToUiState = function (result) {\n      var status = result.status, message = result.message;\n      if (status === 'valid') {\n        return {\n          status: 'ok',\n          message: message\n        };\n      } else if (status === 'unknown') {\n        return {\n          status: 'warn',\n          message: message\n        };\n      } else if (status === 'invalid') {\n        return {\n          status: 'warn',\n          message: message\n        };\n      } else {\n        return {\n          status: 'none',\n          message: ''\n        };\n      }\n    };\n    var setupLinkValidatorHandler = function (ctrl, editorSettings, fileType) {\n      var validatorHandler = editorSettings.filepicker_validator_handler;\n      if (validatorHandler) {\n        var validateUrl_1 = function (url) {\n          if (url.length === 0) {\n            ctrl.statusLevel('none');\n            return;\n          }\n          validatorHandler({\n            url: url,\n            type: fileType\n          }, function (result) {\n            var uiState = statusToUiState(result);\n            ctrl.statusMessage(uiState.message);\n            ctrl.statusLevel(uiState.status);\n          });\n        };\n        ctrl.state.on('change:value', function (e) {\n          validateUrl_1(e.value);\n        });\n      }\n    };\n    var FilePicker = ComboBox.extend({\n      Statics: { clearHistory: clearHistory },\n      init: function (settings) {\n        var self = this, editor = getActiveEditor(), editorSettings = editor.settings;\n        var actionCallback, fileBrowserCallback, fileBrowserCallbackTypes;\n        var fileType = settings.filetype;\n        settings.spellcheck = false;\n        fileBrowserCallbackTypes = editorSettings.file_picker_types || editorSettings.file_browser_callback_types;\n        if (fileBrowserCallbackTypes) {\n          fileBrowserCallbackTypes = global$2.makeMap(fileBrowserCallbackTypes, /[, ]/);\n        }\n        if (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType]) {\n          fileBrowserCallback = editorSettings.file_picker_callback;\n          if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {\n            actionCallback = function () {\n              var meta = self.fire('beforecall').meta;\n              meta = global$2.extend({ filetype: fileType }, meta);\n              fileBrowserCallback.call(editor, function (value, meta) {\n                self.value(value).fire('change', { meta: meta });\n              }, self.value(), meta);\n            };\n          } else {\n            fileBrowserCallback = editorSettings.file_browser_callback;\n            if (fileBrowserCallback && (!fileBrowserCallbackTypes || fileBrowserCallbackTypes[fileType])) {\n              actionCallback = function () {\n                fileBrowserCallback(self.getEl('inp').id, self.value(), fileType, window);\n              };\n            }\n          }\n        }\n        if (actionCallback) {\n          settings.icon = 'browse';\n          settings.onaction = actionCallback;\n        }\n        self._super(settings);\n        self.classes.add('filepicker');\n        setupAutoCompleteHandler(self, editorSettings, editor.getBody(), fileType);\n        setupLinkValidatorHandler(self, editorSettings, fileType);\n      }\n    });\n\n    var FitLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var contLayoutRect = container.layoutRect(), paddingBox = container.paddingBox;\n        container.items().filter(':visible').each(function (ctrl) {\n          ctrl.layoutRect({\n            x: paddingBox.left,\n            y: paddingBox.top,\n            w: contLayoutRect.innerW - paddingBox.right - paddingBox.left,\n            h: contLayoutRect.innerH - paddingBox.top - paddingBox.bottom\n          });\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      }\n    });\n\n    var FlexLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var i, l, items, contLayoutRect, contPaddingBox, contSettings, align, pack, spacing, totalFlex, availableSpace, direction;\n        var ctrl, ctrlLayoutRect, ctrlSettings, flex;\n        var maxSizeItems = [];\n        var size, maxSize, ratio, rect, pos, maxAlignEndPos;\n        var sizeName, minSizeName, posName, maxSizeName, beforeName, innerSizeName, deltaSizeName, contentSizeName;\n        var alignAxisName, alignInnerSizeName, alignSizeName, alignMinSizeName, alignBeforeName, alignAfterName;\n        var alignDeltaSizeName, alignContentSizeName;\n        var max = Math.max, min = Math.min;\n        items = container.items().filter(':visible');\n        contLayoutRect = container.layoutRect();\n        contPaddingBox = container.paddingBox;\n        contSettings = container.settings;\n        direction = container.isRtl() ? contSettings.direction || 'row-reversed' : contSettings.direction;\n        align = contSettings.align;\n        pack = container.isRtl() ? contSettings.pack || 'end' : contSettings.pack;\n        spacing = contSettings.spacing || 0;\n        if (direction === 'row-reversed' || direction === 'column-reverse') {\n          items = items.set(items.toArray().reverse());\n          direction = direction.split('-')[0];\n        }\n        if (direction === 'column') {\n          posName = 'y';\n          sizeName = 'h';\n          minSizeName = 'minH';\n          maxSizeName = 'maxH';\n          innerSizeName = 'innerH';\n          beforeName = 'top';\n          deltaSizeName = 'deltaH';\n          contentSizeName = 'contentH';\n          alignBeforeName = 'left';\n          alignSizeName = 'w';\n          alignAxisName = 'x';\n          alignInnerSizeName = 'innerW';\n          alignMinSizeName = 'minW';\n          alignAfterName = 'right';\n          alignDeltaSizeName = 'deltaW';\n          alignContentSizeName = 'contentW';\n        } else {\n          posName = 'x';\n          sizeName = 'w';\n          minSizeName = 'minW';\n          maxSizeName = 'maxW';\n          innerSizeName = 'innerW';\n          beforeName = 'left';\n          deltaSizeName = 'deltaW';\n          contentSizeName = 'contentW';\n          alignBeforeName = 'top';\n          alignSizeName = 'h';\n          alignAxisName = 'y';\n          alignInnerSizeName = 'innerH';\n          alignMinSizeName = 'minH';\n          alignAfterName = 'bottom';\n          alignDeltaSizeName = 'deltaH';\n          alignContentSizeName = 'contentH';\n        }\n        availableSpace = contLayoutRect[innerSizeName] - contPaddingBox[beforeName] - contPaddingBox[beforeName];\n        maxAlignEndPos = totalFlex = 0;\n        for (i = 0, l = items.length; i < l; i++) {\n          ctrl = items[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          ctrlSettings = ctrl.settings;\n          flex = ctrlSettings.flex;\n          availableSpace -= i < l - 1 ? spacing : 0;\n          if (flex > 0) {\n            totalFlex += flex;\n            if (ctrlLayoutRect[maxSizeName]) {\n              maxSizeItems.push(ctrl);\n            }\n            ctrlLayoutRect.flex = flex;\n          }\n          availableSpace -= ctrlLayoutRect[minSizeName];\n          size = contPaddingBox[alignBeforeName] + ctrlLayoutRect[alignMinSizeName] + contPaddingBox[alignAfterName];\n          if (size > maxAlignEndPos) {\n            maxAlignEndPos = size;\n          }\n        }\n        rect = {};\n        if (availableSpace < 0) {\n          rect[minSizeName] = contLayoutRect[minSizeName] - availableSpace + contLayoutRect[deltaSizeName];\n        } else {\n          rect[minSizeName] = contLayoutRect[innerSizeName] - availableSpace + contLayoutRect[deltaSizeName];\n        }\n        rect[alignMinSizeName] = maxAlignEndPos + contLayoutRect[alignDeltaSizeName];\n        rect[contentSizeName] = contLayoutRect[innerSizeName] - availableSpace;\n        rect[alignContentSizeName] = maxAlignEndPos;\n        rect.minW = min(rect.minW, contLayoutRect.maxW);\n        rect.minH = min(rect.minH, contLayoutRect.maxH);\n        rect.minW = max(rect.minW, contLayoutRect.startMinWidth);\n        rect.minH = max(rect.minH, contLayoutRect.startMinHeight);\n        if (contLayoutRect.autoResize && (rect.minW !== contLayoutRect.minW || rect.minH !== contLayoutRect.minH)) {\n          rect.w = rect.minW;\n          rect.h = rect.minH;\n          container.layoutRect(rect);\n          this.recalc(container);\n          if (container._lastRect === null) {\n            var parentCtrl = container.parent();\n            if (parentCtrl) {\n              parentCtrl._lastRect = null;\n              parentCtrl.recalc();\n            }\n          }\n          return;\n        }\n        ratio = availableSpace / totalFlex;\n        for (i = 0, l = maxSizeItems.length; i < l; i++) {\n          ctrl = maxSizeItems[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          maxSize = ctrlLayoutRect[maxSizeName];\n          size = ctrlLayoutRect[minSizeName] + ctrlLayoutRect.flex * ratio;\n          if (size > maxSize) {\n            availableSpace -= ctrlLayoutRect[maxSizeName] - ctrlLayoutRect[minSizeName];\n            totalFlex -= ctrlLayoutRect.flex;\n            ctrlLayoutRect.flex = 0;\n            ctrlLayoutRect.maxFlexSize = maxSize;\n          } else {\n            ctrlLayoutRect.maxFlexSize = 0;\n          }\n        }\n        ratio = availableSpace / totalFlex;\n        pos = contPaddingBox[beforeName];\n        rect = {};\n        if (totalFlex === 0) {\n          if (pack === 'end') {\n            pos = availableSpace + contPaddingBox[beforeName];\n          } else if (pack === 'center') {\n            pos = Math.round(contLayoutRect[innerSizeName] / 2 - (contLayoutRect[innerSizeName] - availableSpace) / 2) + contPaddingBox[beforeName];\n            if (pos < 0) {\n              pos = contPaddingBox[beforeName];\n            }\n          } else if (pack === 'justify') {\n            pos = contPaddingBox[beforeName];\n            spacing = Math.floor(availableSpace / (items.length - 1));\n          }\n        }\n        rect[alignAxisName] = contPaddingBox[alignBeforeName];\n        for (i = 0, l = items.length; i < l; i++) {\n          ctrl = items[i];\n          ctrlLayoutRect = ctrl.layoutRect();\n          size = ctrlLayoutRect.maxFlexSize || ctrlLayoutRect[minSizeName];\n          if (align === 'center') {\n            rect[alignAxisName] = Math.round(contLayoutRect[alignInnerSizeName] / 2 - ctrlLayoutRect[alignSizeName] / 2);\n          } else if (align === 'stretch') {\n            rect[alignSizeName] = max(ctrlLayoutRect[alignMinSizeName] || 0, contLayoutRect[alignInnerSizeName] - contPaddingBox[alignBeforeName] - contPaddingBox[alignAfterName]);\n            rect[alignAxisName] = contPaddingBox[alignBeforeName];\n          } else if (align === 'end') {\n            rect[alignAxisName] = contLayoutRect[alignInnerSizeName] - ctrlLayoutRect[alignSizeName] - contPaddingBox.top;\n          }\n          if (ctrlLayoutRect.flex > 0) {\n            size += ctrlLayoutRect.flex * ratio;\n          }\n          rect[sizeName] = size;\n          rect[posName] = pos;\n          ctrl.layoutRect(rect);\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n          pos += size + spacing;\n        }\n      }\n    });\n\n    var FlowLayout = Layout.extend({\n      Defaults: {\n        containerClass: 'flow-layout',\n        controlClass: 'flow-layout-item',\n        endClass: 'break'\n      },\n      recalc: function (container) {\n        container.items().filter(':visible').each(function (ctrl) {\n          if (ctrl.recalc) {\n            ctrl.recalc();\n          }\n        });\n      },\n      isNative: function () {\n        return true;\n      }\n    });\n\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n\n    var toggleFormat = function (editor, fmt) {\n      return function () {\n        editor.execCommand('mceToggleFormat', false, fmt);\n      };\n    };\n    var addFormatChangedListener = function (editor, name, changed) {\n      var handler = function (state) {\n        changed(state, name);\n      };\n      if (editor.formatter) {\n        editor.formatter.formatChanged(name, handler);\n      } else {\n        editor.on('init', function () {\n          editor.formatter.formatChanged(name, handler);\n        });\n      }\n    };\n    var postRenderFormatToggle = function (editor, name) {\n      return function (e) {\n        addFormatChangedListener(editor, name, function (state) {\n          e.control.active(state);\n        });\n      };\n    };\n\n    var register = function (editor) {\n      var alignFormats = [\n        'alignleft',\n        'aligncenter',\n        'alignright',\n        'alignjustify'\n      ];\n      var defaultAlign = 'alignleft';\n      var alignMenuItems = [\n        {\n          text: 'Left',\n          icon: 'alignleft',\n          onclick: toggleFormat(editor, 'alignleft')\n        },\n        {\n          text: 'Center',\n          icon: 'aligncenter',\n          onclick: toggleFormat(editor, 'aligncenter')\n        },\n        {\n          text: 'Right',\n          icon: 'alignright',\n          onclick: toggleFormat(editor, 'alignright')\n        },\n        {\n          text: 'Justify',\n          icon: 'alignjustify',\n          onclick: toggleFormat(editor, 'alignjustify')\n        }\n      ];\n      editor.addMenuItem('align', {\n        text: 'Align',\n        menu: alignMenuItems\n      });\n      editor.addButton('align', {\n        type: 'menubutton',\n        icon: defaultAlign,\n        menu: alignMenuItems,\n        onShowMenu: function (e) {\n          var menu = e.control.menu;\n          global$2.each(alignFormats, function (formatName, idx) {\n            menu.items().eq(idx).each(function (item) {\n              return item.active(editor.formatter.match(formatName));\n            });\n          });\n        },\n        onPostRender: function (e) {\n          var ctrl = e.control;\n          global$2.each(alignFormats, function (formatName, idx) {\n            addFormatChangedListener(editor, formatName, function (state) {\n              ctrl.icon(defaultAlign);\n              if (state) {\n                ctrl.icon(formatName);\n              }\n            });\n          });\n        }\n      });\n      global$2.each({\n        alignleft: [\n          'Align left',\n          'JustifyLeft'\n        ],\n        aligncenter: [\n          'Align center',\n          'JustifyCenter'\n        ],\n        alignright: [\n          'Align right',\n          'JustifyRight'\n        ],\n        alignjustify: [\n          'Justify',\n          'JustifyFull'\n        ],\n        alignnone: [\n          'No alignment',\n          'JustifyNone'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: item[0],\n          cmd: item[1],\n          onPostRender: postRenderFormatToggle(editor, name)\n        });\n      });\n    };\n    var Align = { register: register };\n\n    var getFirstFont = function (fontFamily) {\n      return fontFamily ? fontFamily.split(',')[0] : '';\n    };\n    var findMatchingValue = function (items, fontFamily) {\n      var font = fontFamily ? fontFamily.toLowerCase() : '';\n      var value;\n      global$2.each(items, function (item) {\n        if (item.value.toLowerCase() === font) {\n          value = item.value;\n        }\n      });\n      global$2.each(items, function (item) {\n        if (!value && getFirstFont(item.value).toLowerCase() === getFirstFont(font).toLowerCase()) {\n          value = item.value;\n        }\n      });\n      return value;\n    };\n    var createFontNameListBoxChangeHandler = function (editor, items) {\n      return function () {\n        var self = this;\n        self.state.set('value', null);\n        editor.on('init nodeChange', function (e) {\n          var fontFamily = editor.queryCommandValue('FontName');\n          var match = findMatchingValue(items, fontFamily);\n          self.value(match ? match : null);\n          if (!match && fontFamily) {\n            self.text(getFirstFont(fontFamily));\n          }\n        });\n      };\n    };\n    var createFormats = function (formats) {\n      formats = formats.replace(/;$/, '').split(';');\n      var i = formats.length;\n      while (i--) {\n        formats[i] = formats[i].split('=');\n      }\n      return formats;\n    };\n    var getFontItems = function (editor) {\n      var defaultFontsFormats = 'Andale Mono=andale mono,monospace;' + 'Arial=arial,helvetica,sans-serif;' + 'Arial Black=arial black,sans-serif;' + 'Book Antiqua=book antiqua,palatino,serif;' + 'Comic Sans MS=comic sans ms,sans-serif;' + 'Courier New=courier new,courier,monospace;' + 'Georgia=georgia,palatino,serif;' + 'Helvetica=helvetica,arial,sans-serif;' + 'Impact=impact,sans-serif;' + 'Symbol=symbol;' + 'Tahoma=tahoma,arial,helvetica,sans-serif;' + 'Terminal=terminal,monaco,monospace;' + 'Times New Roman=times new roman,times,serif;' + 'Trebuchet MS=trebuchet ms,geneva,sans-serif;' + 'Verdana=verdana,geneva,sans-serif;' + 'Webdings=webdings;' + 'Wingdings=wingdings,zapf dingbats';\n      var fonts = createFormats(editor.settings.font_formats || defaultFontsFormats);\n      return global$2.map(fonts, function (font) {\n        return {\n          text: { raw: font[0] },\n          value: font[1],\n          textStyle: font[1].indexOf('dings') === -1 ? 'font-family:' + font[1] : ''\n        };\n      });\n    };\n    var registerButtons = function (editor) {\n      editor.addButton('fontselect', function () {\n        var items = getFontItems(editor);\n        return {\n          type: 'listbox',\n          text: 'Font Family',\n          tooltip: 'Font Family',\n          values: items,\n          fixedWidth: true,\n          onPostRender: createFontNameListBoxChangeHandler(editor, items),\n          onselect: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontName', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var register$1 = function (editor) {\n      registerButtons(editor);\n    };\n    var FontSelect = { register: register$1 };\n\n    var round = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var findMatchingValue$1 = function (items, pt, px) {\n      var value;\n      global$2.each(items, function (item) {\n        if (item.value === px) {\n          value = px;\n        } else if (item.value === pt) {\n          value = pt;\n        }\n      });\n      return value;\n    };\n    var createFontSizeListBoxChangeHandler = function (editor, items) {\n      return function () {\n        var self = this;\n        editor.on('init nodeChange', function (e) {\n          var px, pt, precision, match;\n          px = editor.queryCommandValue('FontSize');\n          if (px) {\n            for (precision = 3; !match && precision >= 0; precision--) {\n              pt = toPt(px, precision);\n              match = findMatchingValue$1(items, pt, px);\n            }\n          }\n          self.value(match ? match : null);\n          if (!match) {\n            self.text(pt);\n          }\n        });\n      };\n    };\n    var getFontSizeItems = function (editor) {\n      var defaultFontsizeFormats = '8pt 10pt 12pt 14pt 18pt 24pt 36pt';\n      var fontsizeFormats = editor.settings.fontsize_formats || defaultFontsizeFormats;\n      return global$2.map(fontsizeFormats.split(' '), function (item) {\n        var text = item, value = item;\n        var values = item.split('=');\n        if (values.length > 1) {\n          text = values[0];\n          value = values[1];\n        }\n        return {\n          text: text,\n          value: value\n        };\n      });\n    };\n    var registerButtons$1 = function (editor) {\n      editor.addButton('fontsizeselect', function () {\n        var items = getFontSizeItems(editor);\n        return {\n          type: 'listbox',\n          text: 'Font Sizes',\n          tooltip: 'Font Sizes',\n          values: items,\n          fixedWidth: true,\n          onPostRender: createFontSizeListBoxChangeHandler(editor, items),\n          onclick: function (e) {\n            if (e.control.settings.value) {\n              editor.execCommand('FontSize', false, e.control.settings.value);\n            }\n          }\n        };\n      });\n    };\n    var register$2 = function (editor) {\n      registerButtons$1(editor);\n    };\n    var FontSizeSelect = { register: register$2 };\n\n    var hideMenuObjects = function (editor, menu) {\n      var count = menu.length;\n      global$2.each(menu, function (item) {\n        if (item.menu) {\n          item.hidden = hideMenuObjects(editor, item.menu) === 0;\n        }\n        var formatName = item.format;\n        if (formatName) {\n          item.hidden = !editor.formatter.canApply(formatName);\n        }\n        if (item.hidden) {\n          count--;\n        }\n      });\n      return count;\n    };\n    var hideFormatMenuItems = function (editor, menu) {\n      var count = menu.items().length;\n      menu.items().each(function (item) {\n        if (item.menu) {\n          item.visible(hideFormatMenuItems(editor, item.menu) > 0);\n        }\n        if (!item.menu && item.settings.menu) {\n          item.visible(hideMenuObjects(editor, item.settings.menu) > 0);\n        }\n        var formatName = item.settings.format;\n        if (formatName) {\n          item.visible(editor.formatter.canApply(formatName));\n        }\n        if (!item.visible()) {\n          count--;\n        }\n      });\n      return count;\n    };\n    var createFormatMenu = function (editor) {\n      var count = 0;\n      var newFormats = [];\n      var defaultStyleFormats = [\n        {\n          title: 'Headings',\n          items: [\n            {\n              title: 'Heading 1',\n              format: 'h1'\n            },\n            {\n              title: 'Heading 2',\n              format: 'h2'\n            },\n            {\n              title: 'Heading 3',\n              format: 'h3'\n            },\n            {\n              title: 'Heading 4',\n              format: 'h4'\n            },\n            {\n              title: 'Heading 5',\n              format: 'h5'\n            },\n            {\n              title: 'Heading 6',\n              format: 'h6'\n            }\n          ]\n        },\n        {\n          title: 'Inline',\n          items: [\n            {\n              title: 'Bold',\n              icon: 'bold',\n              format: 'bold'\n            },\n            {\n              title: 'Italic',\n              icon: 'italic',\n              format: 'italic'\n            },\n            {\n              title: 'Underline',\n              icon: 'underline',\n              format: 'underline'\n            },\n            {\n              title: 'Strikethrough',\n              icon: 'strikethrough',\n              format: 'strikethrough'\n            },\n            {\n              title: 'Superscript',\n              icon: 'superscript',\n              format: 'superscript'\n            },\n            {\n              title: 'Subscript',\n              icon: 'subscript',\n              format: 'subscript'\n            },\n            {\n              title: 'Code',\n              icon: 'code',\n              format: 'code'\n            }\n          ]\n        },\n        {\n          title: 'Blocks',\n          items: [\n            {\n              title: 'Paragraph',\n              format: 'p'\n            },\n            {\n              title: 'Blockquote',\n              format: 'blockquote'\n            },\n            {\n              title: 'Div',\n              format: 'div'\n            },\n            {\n              title: 'Pre',\n              format: 'pre'\n            }\n          ]\n        },\n        {\n          title: 'Alignment',\n          items: [\n            {\n              title: 'Left',\n              icon: 'alignleft',\n              format: 'alignleft'\n            },\n            {\n              title: 'Center',\n              icon: 'aligncenter',\n              format: 'aligncenter'\n            },\n            {\n              title: 'Right',\n              icon: 'alignright',\n              format: 'alignright'\n            },\n            {\n              title: 'Justify',\n              icon: 'alignjustify',\n              format: 'alignjustify'\n            }\n          ]\n        }\n      ];\n      var createMenu = function (formats) {\n        var menu = [];\n        if (!formats) {\n          return;\n        }\n        global$2.each(formats, function (format) {\n          var menuItem = {\n            text: format.title,\n            icon: format.icon\n          };\n          if (format.items) {\n            menuItem.menu = createMenu(format.items);\n          } else {\n            var formatName = format.format || 'custom' + count++;\n            if (!format.format) {\n              format.name = formatName;\n              newFormats.push(format);\n            }\n            menuItem.format = formatName;\n            menuItem.cmd = format.cmd;\n          }\n          menu.push(menuItem);\n        });\n        return menu;\n      };\n      var createStylesMenu = function () {\n        var menu;\n        if (editor.settings.style_formats_merge) {\n          if (editor.settings.style_formats) {\n            menu = createMenu(defaultStyleFormats.concat(editor.settings.style_formats));\n          } else {\n            menu = createMenu(defaultStyleFormats);\n          }\n        } else {\n          menu = createMenu(editor.settings.style_formats || defaultStyleFormats);\n        }\n        return menu;\n      };\n      editor.on('init', function () {\n        global$2.each(newFormats, function (format) {\n          editor.formatter.register(format.name, format);\n        });\n      });\n      return {\n        type: 'menu',\n        items: createStylesMenu(),\n        onPostRender: function (e) {\n          editor.fire('renderFormatsMenu', { control: e.control });\n        },\n        itemDefaults: {\n          preview: true,\n          textStyle: function () {\n            if (this.settings.format) {\n              return editor.formatter.getCssText(this.settings.format);\n            }\n          },\n          onPostRender: function () {\n            var self = this;\n            self.parent().on('show', function () {\n              var formatName, command;\n              formatName = self.settings.format;\n              if (formatName) {\n                self.disabled(!editor.formatter.canApply(formatName));\n                self.active(editor.formatter.match(formatName));\n              }\n              command = self.settings.cmd;\n              if (command) {\n                self.active(editor.queryCommandState(command));\n              }\n            });\n          },\n          onclick: function () {\n            if (this.settings.format) {\n              toggleFormat(editor, this.settings.format)();\n            }\n            if (this.settings.cmd) {\n              editor.execCommand(this.settings.cmd);\n            }\n          }\n        }\n      };\n    };\n    var registerMenuItems = function (editor, formatMenu) {\n      editor.addMenuItem('formats', {\n        text: 'Formats',\n        menu: formatMenu\n      });\n    };\n    var registerButtons$2 = function (editor, formatMenu) {\n      editor.addButton('styleselect', {\n        type: 'menubutton',\n        text: 'Formats',\n        menu: formatMenu,\n        onShowMenu: function () {\n          if (editor.settings.style_formats_autohide) {\n            hideFormatMenuItems(editor, this.menu);\n          }\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var formatMenu = createFormatMenu(editor);\n      registerMenuItems(editor, formatMenu);\n      registerButtons$2(editor, formatMenu);\n    };\n    var Formats = { register: register$3 };\n\n    var defaultBlocks = 'Paragraph=p;' + 'Heading 1=h1;' + 'Heading 2=h2;' + 'Heading 3=h3;' + 'Heading 4=h4;' + 'Heading 5=h5;' + 'Heading 6=h6;' + 'Preformatted=pre';\n    var createFormats$1 = function (formats) {\n      formats = formats.replace(/;$/, '').split(';');\n      var i = formats.length;\n      while (i--) {\n        formats[i] = formats[i].split('=');\n      }\n      return formats;\n    };\n    var createListBoxChangeHandler = function (editor, items, formatName) {\n      return function () {\n        var self = this;\n        editor.on('nodeChange', function (e) {\n          var formatter = editor.formatter;\n          var value = null;\n          global$2.each(e.parents, function (node) {\n            global$2.each(items, function (item) {\n              if (formatName) {\n                if (formatter.matchNode(node, formatName, { value: item.value })) {\n                  value = item.value;\n                }\n              } else {\n                if (formatter.matchNode(node, item.value)) {\n                  value = item.value;\n                }\n              }\n              if (value) {\n                return false;\n              }\n            });\n            if (value) {\n              return false;\n            }\n          });\n          self.value(value);\n        });\n      };\n    };\n    var lazyFormatSelectBoxItems = function (editor, blocks) {\n      return function () {\n        var items = [];\n        global$2.each(blocks, function (block) {\n          items.push({\n            text: block[0],\n            value: block[1],\n            textStyle: function () {\n              return editor.formatter.getCssText(block[1]);\n            }\n          });\n        });\n        return {\n          type: 'listbox',\n          text: blocks[0][0],\n          values: items,\n          fixedWidth: true,\n          onselect: function (e) {\n            if (e.control) {\n              var fmt = e.control.value();\n              toggleFormat(editor, fmt)();\n            }\n          },\n          onPostRender: createListBoxChangeHandler(editor, items)\n        };\n      };\n    };\n    var buildMenuItems = function (editor, blocks) {\n      return global$2.map(blocks, function (block) {\n        return {\n          text: block[0],\n          onclick: toggleFormat(editor, block[1]),\n          textStyle: function () {\n            return editor.formatter.getCssText(block[1]);\n          }\n        };\n      });\n    };\n    var register$4 = function (editor) {\n      var blocks = createFormats$1(editor.settings.block_formats || defaultBlocks);\n      editor.addMenuItem('blockformats', {\n        text: 'Blocks',\n        menu: buildMenuItems(editor, blocks)\n      });\n      editor.addButton('formatselect', lazyFormatSelectBoxItems(editor, blocks));\n    };\n    var FormatSelect = { register: register$4 };\n\n    var createCustomMenuItems = function (editor, names) {\n      var items, nameList;\n      if (typeof names === 'string') {\n        nameList = names.split(' ');\n      } else if (global$2.isArray(names)) {\n        return flatten(global$2.map(names, function (names) {\n          return createCustomMenuItems(editor, names);\n        }));\n      }\n      items = global$2.grep(nameList, function (name) {\n        return name === '|' || name in editor.menuItems;\n      });\n      return global$2.map(items, function (name) {\n        return name === '|' ? { text: '-' } : editor.menuItems[name];\n      });\n    };\n    var isSeparator$1 = function (menuItem) {\n      return menuItem && menuItem.text === '-';\n    };\n    var trimMenuItems = function (menuItems) {\n      var menuItems2 = filter(menuItems, function (menuItem, i, menuItems) {\n        return !isSeparator$1(menuItem) || !isSeparator$1(menuItems[i - 1]);\n      });\n      return filter(menuItems2, function (menuItem, i, menuItems) {\n        return !isSeparator$1(menuItem) || i > 0 && i < menuItems.length - 1;\n      });\n    };\n    var createContextMenuItems = function (editor, context) {\n      var outputMenuItems = [{ text: '-' }];\n      var menuItems = global$2.grep(editor.menuItems, function (menuItem) {\n        return menuItem.context === context;\n      });\n      global$2.each(menuItems, function (menuItem) {\n        if (menuItem.separator === 'before') {\n          outputMenuItems.push({ text: '|' });\n        }\n        if (menuItem.prependToContext) {\n          outputMenuItems.unshift(menuItem);\n        } else {\n          outputMenuItems.push(menuItem);\n        }\n        if (menuItem.separator === 'after') {\n          outputMenuItems.push({ text: '|' });\n        }\n      });\n      return outputMenuItems;\n    };\n    var createInsertMenu = function (editor) {\n      var insertButtonItems = editor.settings.insert_button_items;\n      if (insertButtonItems) {\n        return trimMenuItems(createCustomMenuItems(editor, insertButtonItems));\n      } else {\n        return trimMenuItems(createContextMenuItems(editor, 'insert'));\n      }\n    };\n    var registerButtons$3 = function (editor) {\n      editor.addButton('insert', {\n        type: 'menubutton',\n        icon: 'insert',\n        menu: [],\n        oncreatemenu: function () {\n          this.menu.add(createInsertMenu(editor));\n          this.menu.renderNew();\n        }\n      });\n    };\n    var register$5 = function (editor) {\n      registerButtons$3(editor);\n    };\n    var InsertButton = { register: register$5 };\n\n    var registerFormatButtons = function (editor) {\n      global$2.each({\n        bold: 'Bold',\n        italic: 'Italic',\n        underline: 'Underline',\n        strikethrough: 'Strikethrough',\n        subscript: 'Subscript',\n        superscript: 'Superscript'\n      }, function (text, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: text,\n          onPostRender: postRenderFormatToggle(editor, name),\n          onclick: toggleFormat(editor, name)\n        });\n      });\n    };\n    var registerCommandButtons = function (editor) {\n      global$2.each({\n        outdent: [\n          'Decrease indent',\n          'Outdent'\n        ],\n        indent: [\n          'Increase indent',\n          'Indent'\n        ],\n        cut: [\n          'Cut',\n          'Cut'\n        ],\n        copy: [\n          'Copy',\n          'Copy'\n        ],\n        paste: [\n          'Paste',\n          'Paste'\n        ],\n        help: [\n          'Help',\n          'mceHelp'\n        ],\n        selectall: [\n          'Select all',\n          'SelectAll'\n        ],\n        visualaid: [\n          'Visual aids',\n          'mceToggleVisualAid'\n        ],\n        newdocument: [\n          'New document',\n          'mceNewDocument'\n        ],\n        removeformat: [\n          'Clear formatting',\n          'RemoveFormat'\n        ],\n        remove: [\n          'Remove',\n          'Delete'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          tooltip: item[0],\n          cmd: item[1]\n        });\n      });\n    };\n    var registerCommandToggleButtons = function (editor) {\n      global$2.each({\n        blockquote: [\n          'Blockquote',\n          'mceBlockQuote'\n        ],\n        subscript: [\n          'Subscript',\n          'Subscript'\n        ],\n        superscript: [\n          'Superscript',\n          'Superscript'\n        ]\n      }, function (item, name) {\n        editor.addButton(name, {\n          active: false,\n          tooltip: item[0],\n          cmd: item[1],\n          onPostRender: postRenderFormatToggle(editor, name)\n        });\n      });\n    };\n    var registerButtons$4 = function (editor) {\n      registerFormatButtons(editor);\n      registerCommandButtons(editor);\n      registerCommandToggleButtons(editor);\n    };\n    var registerMenuItems$1 = function (editor) {\n      global$2.each({\n        bold: [\n          'Bold',\n          'Bold',\n          'Meta+B'\n        ],\n        italic: [\n          'Italic',\n          'Italic',\n          'Meta+I'\n        ],\n        underline: [\n          'Underline',\n          'Underline',\n          'Meta+U'\n        ],\n        strikethrough: [\n          'Strikethrough',\n          'Strikethrough'\n        ],\n        subscript: [\n          'Subscript',\n          'Subscript'\n        ],\n        superscript: [\n          'Superscript',\n          'Superscript'\n        ],\n        removeformat: [\n          'Clear formatting',\n          'RemoveFormat'\n        ],\n        newdocument: [\n          'New document',\n          'mceNewDocument'\n        ],\n        cut: [\n          'Cut',\n          'Cut',\n          'Meta+X'\n        ],\n        copy: [\n          'Copy',\n          'Copy',\n          'Meta+C'\n        ],\n        paste: [\n          'Paste',\n          'Paste',\n          'Meta+V'\n        ],\n        selectall: [\n          'Select all',\n          'SelectAll',\n          'Meta+A'\n        ]\n      }, function (item, name) {\n        editor.addMenuItem(name, {\n          text: item[0],\n          icon: name,\n          shortcut: item[2],\n          cmd: item[1]\n        });\n      });\n      editor.addMenuItem('codeformat', {\n        text: 'Code',\n        icon: 'code',\n        onclick: toggleFormat(editor, 'code')\n      });\n    };\n    var register$6 = function (editor) {\n      registerButtons$4(editor);\n      registerMenuItems$1(editor);\n    };\n    var SimpleControls = { register: register$6 };\n\n    var toggleUndoRedoState = function (editor, type) {\n      return function () {\n        var self = this;\n        var checkState = function () {\n          var typeFn = type === 'redo' ? 'hasRedo' : 'hasUndo';\n          return editor.undoManager ? editor.undoManager[typeFn]() : false;\n        };\n        self.disabled(!checkState());\n        editor.on('Undo Redo AddUndo TypingUndo ClearUndos SwitchMode', function () {\n          self.disabled(editor.readonly || !checkState());\n        });\n      };\n    };\n    var registerMenuItems$2 = function (editor) {\n      editor.addMenuItem('undo', {\n        text: 'Undo',\n        icon: 'undo',\n        shortcut: 'Meta+Z',\n        onPostRender: toggleUndoRedoState(editor, 'undo'),\n        cmd: 'undo'\n      });\n      editor.addMenuItem('redo', {\n        text: 'Redo',\n        icon: 'redo',\n        shortcut: 'Meta+Y',\n        onPostRender: toggleUndoRedoState(editor, 'redo'),\n        cmd: 'redo'\n      });\n    };\n    var registerButtons$5 = function (editor) {\n      editor.addButton('undo', {\n        tooltip: 'Undo',\n        onPostRender: toggleUndoRedoState(editor, 'undo'),\n        cmd: 'undo'\n      });\n      editor.addButton('redo', {\n        tooltip: 'Redo',\n        onPostRender: toggleUndoRedoState(editor, 'redo'),\n        cmd: 'redo'\n      });\n    };\n    var register$7 = function (editor) {\n      registerMenuItems$2(editor);\n      registerButtons$5(editor);\n    };\n    var UndoRedo = { register: register$7 };\n\n    var toggleVisualAidState = function (editor) {\n      return function () {\n        var self = this;\n        editor.on('VisualAid', function (e) {\n          self.active(e.hasVisual);\n        });\n        self.active(editor.hasVisual);\n      };\n    };\n    var registerMenuItems$3 = function (editor) {\n      editor.addMenuItem('visualaid', {\n        text: 'Visual aids',\n        selectable: true,\n        onPostRender: toggleVisualAidState(editor),\n        cmd: 'mceToggleVisualAid'\n      });\n    };\n    var register$8 = function (editor) {\n      registerMenuItems$3(editor);\n    };\n    var VisualAid = { register: register$8 };\n\n    var setupEnvironment = function () {\n      Widget.tooltips = !global$8.iOS;\n      Control$1.translate = function (text) {\n        return global$1.translate(text);\n      };\n    };\n    var setupUiContainer = function (editor) {\n      if (editor.settings.ui_container) {\n        global$8.container = descendant(Element.fromDom(domGlobals.document.body), editor.settings.ui_container).fold(constant(null), function (elm) {\n          return elm.dom();\n        });\n      }\n    };\n    var setupRtlMode = function (editor) {\n      if (editor.rtl) {\n        Control$1.rtl = true;\n      }\n    };\n    var setupHideFloatPanels = function (editor) {\n      editor.on('mousedown progressstate', function () {\n        FloatPanel.hideAll();\n      });\n    };\n    var setup$1 = function (editor) {\n      setupRtlMode(editor);\n      setupHideFloatPanels(editor);\n      setupUiContainer(editor);\n      setupEnvironment();\n      FormatSelect.register(editor);\n      Align.register(editor);\n      SimpleControls.register(editor);\n      UndoRedo.register(editor);\n      FontSizeSelect.register(editor);\n      FontSelect.register(editor);\n      Formats.register(editor);\n      VisualAid.register(editor);\n      InsertButton.register(editor);\n    };\n    var FormatControls = { setup: setup$1 };\n\n    var GridLayout = AbsoluteLayout.extend({\n      recalc: function (container) {\n        var settings, rows, cols, items, contLayoutRect, width, height, rect, ctrlLayoutRect, ctrl, x, y, posX, posY, ctrlSettings, contPaddingBox, align, spacingH, spacingV, alignH, alignV, maxX, maxY;\n        var colWidths = [];\n        var rowHeights = [];\n        var ctrlMinWidth, ctrlMinHeight, availableWidth, availableHeight, reverseRows, idx;\n        settings = container.settings;\n        items = container.items().filter(':visible');\n        contLayoutRect = container.layoutRect();\n        cols = settings.columns || Math.ceil(Math.sqrt(items.length));\n        rows = Math.ceil(items.length / cols);\n        spacingH = settings.spacingH || settings.spacing || 0;\n        spacingV = settings.spacingV || settings.spacing || 0;\n        alignH = settings.alignH || settings.align;\n        alignV = settings.alignV || settings.align;\n        contPaddingBox = container.paddingBox;\n        reverseRows = 'reverseRows' in settings ? settings.reverseRows : container.isRtl();\n        if (alignH && typeof alignH === 'string') {\n          alignH = [alignH];\n        }\n        if (alignV && typeof alignV === 'string') {\n          alignV = [alignV];\n        }\n        for (x = 0; x < cols; x++) {\n          colWidths.push(0);\n        }\n        for (y = 0; y < rows; y++) {\n          rowHeights.push(0);\n        }\n        for (y = 0; y < rows; y++) {\n          for (x = 0; x < cols; x++) {\n            ctrl = items[y * cols + x];\n            if (!ctrl) {\n              break;\n            }\n            ctrlLayoutRect = ctrl.layoutRect();\n            ctrlMinWidth = ctrlLayoutRect.minW;\n            ctrlMinHeight = ctrlLayoutRect.minH;\n            colWidths[x] = ctrlMinWidth > colWidths[x] ? ctrlMinWidth : colWidths[x];\n            rowHeights[y] = ctrlMinHeight > rowHeights[y] ? ctrlMinHeight : rowHeights[y];\n          }\n        }\n        availableWidth = contLayoutRect.innerW - contPaddingBox.left - contPaddingBox.right;\n        for (maxX = 0, x = 0; x < cols; x++) {\n          maxX += colWidths[x] + (x > 0 ? spacingH : 0);\n          availableWidth -= (x > 0 ? spacingH : 0) + colWidths[x];\n        }\n        availableHeight = contLayoutRect.innerH - contPaddingBox.top - contPaddingBox.bottom;\n        for (maxY = 0, y = 0; y < rows; y++) {\n          maxY += rowHeights[y] + (y > 0 ? spacingV : 0);\n          availableHeight -= (y > 0 ? spacingV : 0) + rowHeights[y];\n        }\n        maxX += contPaddingBox.left + contPaddingBox.right;\n        maxY += contPaddingBox.top + contPaddingBox.bottom;\n        rect = {};\n        rect.minW = maxX + (contLayoutRect.w - contLayoutRect.innerW);\n        rect.minH = maxY + (contLayoutRect.h - contLayoutRect.innerH);\n        rect.contentW = rect.minW - contLayoutRect.deltaW;\n        rect.contentH = rect.minH - contLayoutRect.deltaH;\n        rect.minW = Math.min(rect.minW, contLayoutRect.maxW);\n        rect.minH = Math.min(rect.minH, contLayoutRect.maxH);\n        rect.minW = Math.max(rect.minW, contLayoutRect.startMinWidth);\n        rect.minH = Math.max(rect.minH, contLayoutRect.startMinHeight);\n        if (contLayoutRect.autoResize && (rect.minW !== contLayoutRect.minW || rect.minH !== contLayoutRect.minH)) {\n          rect.w = rect.minW;\n          rect.h = rect.minH;\n          container.layoutRect(rect);\n          this.recalc(container);\n          if (container._lastRect === null) {\n            var parentCtrl = container.parent();\n            if (parentCtrl) {\n              parentCtrl._lastRect = null;\n              parentCtrl.recalc();\n            }\n          }\n          return;\n        }\n        if (contLayoutRect.autoResize) {\n          rect = container.layoutRect(rect);\n          rect.contentW = rect.minW - contLayoutRect.deltaW;\n          rect.contentH = rect.minH - contLayoutRect.deltaH;\n        }\n        var flexV;\n        if (settings.packV === 'start') {\n          flexV = 0;\n        } else {\n          flexV = availableHeight > 0 ? Math.floor(availableHeight / rows) : 0;\n        }\n        var totalFlex = 0;\n        var flexWidths = settings.flexWidths;\n        if (flexWidths) {\n          for (x = 0; x < flexWidths.length; x++) {\n            totalFlex += flexWidths[x];\n          }\n        } else {\n          totalFlex = cols;\n        }\n        var ratio = availableWidth / totalFlex;\n        for (x = 0; x < cols; x++) {\n          colWidths[x] += flexWidths ? flexWidths[x] * ratio : ratio;\n        }\n        posY = contPaddingBox.top;\n        for (y = 0; y < rows; y++) {\n          posX = contPaddingBox.left;\n          height = rowHeights[y] + flexV;\n          for (x = 0; x < cols; x++) {\n            if (reverseRows) {\n              idx = y * cols + cols - 1 - x;\n            } else {\n              idx = y * cols + x;\n            }\n            ctrl = items[idx];\n            if (!ctrl) {\n              break;\n            }\n            ctrlSettings = ctrl.settings;\n            ctrlLayoutRect = ctrl.layoutRect();\n            width = Math.max(colWidths[x], ctrlLayoutRect.startMinWidth);\n            ctrlLayoutRect.x = posX;\n            ctrlLayoutRect.y = posY;\n            align = ctrlSettings.alignH || (alignH ? alignH[x] || alignH[0] : null);\n            if (align === 'center') {\n              ctrlLayoutRect.x = posX + width / 2 - ctrlLayoutRect.w / 2;\n            } else if (align === 'right') {\n              ctrlLayoutRect.x = posX + width - ctrlLayoutRect.w;\n            } else if (align === 'stretch') {\n              ctrlLayoutRect.w = width;\n            }\n            align = ctrlSettings.alignV || (alignV ? alignV[x] || alignV[0] : null);\n            if (align === 'center') {\n              ctrlLayoutRect.y = posY + height / 2 - ctrlLayoutRect.h / 2;\n            } else if (align === 'bottom') {\n              ctrlLayoutRect.y = posY + height - ctrlLayoutRect.h;\n            } else if (align === 'stretch') {\n              ctrlLayoutRect.h = height;\n            }\n            ctrl.layoutRect(ctrlLayoutRect);\n            posX += width + spacingH;\n            if (ctrl.recalc) {\n              ctrl.recalc();\n            }\n          }\n          posY += height + spacingV;\n        }\n      }\n    });\n\n    var Iframe$1 = Widget.extend({\n      renderHtml: function () {\n        var self = this;\n        self.classes.add('iframe');\n        self.canFocus = false;\n        return '<iframe id=\"' + self._id + '\" class=\"' + self.classes + '\" tabindex=\"-1\" src=\"' + (self.settings.url || 'javascript:\\'\\'') + '\" frameborder=\"0\"></iframe>';\n      },\n      src: function (src) {\n        this.getEl().src = src;\n      },\n      html: function (html, callback) {\n        var self = this, body = this.getEl().contentWindow.document.body;\n        if (!body) {\n          global$7.setTimeout(function () {\n            self.html(html);\n          });\n        } else {\n          body.innerHTML = html;\n          if (callback) {\n            callback();\n          }\n        }\n        return this;\n      }\n    });\n\n    var InfoBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('widget').add('infobox');\n        self.canFocus = false;\n      },\n      severity: function (level) {\n        this.classes.remove('error');\n        this.classes.remove('warning');\n        this.classes.remove('success');\n        this.classes.add(level);\n      },\n      help: function (state) {\n        this.state.set('help', state);\n      },\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + self._id + '-body\">' + self.encode(self.state.get('text')) + '<button role=\"button\" tabindex=\"-1\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-help\"></i>' + '</button>' + '</div>' + '</div>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.getEl('body').firstChild.data = self.encode(e.value);\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        self.state.on('change:help', function (e) {\n          self.classes.toggle('has-help', e.value);\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var Label = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('widget').add('label');\n        self.canFocus = false;\n        if (settings.multiline) {\n          self.classes.add('autoscroll');\n        }\n        if (settings.strong) {\n          self.classes.add('strong');\n        }\n      },\n      initLayoutRect: function () {\n        var self = this, layoutRect = self._super();\n        if (self.settings.multiline) {\n          var size = funcs.getSize(self.getEl());\n          if (size.width > layoutRect.maxW) {\n            layoutRect.minW = layoutRect.maxW;\n            self.classes.add('multiline');\n          }\n          self.getEl().style.width = layoutRect.minW + 'px';\n          layoutRect.startMinH = layoutRect.h = layoutRect.minH = Math.min(layoutRect.maxH, funcs.getSize(self.getEl()).height);\n        }\n        return layoutRect;\n      },\n      repaint: function () {\n        var self = this;\n        if (!self.settings.multiline) {\n          self.getEl().style.lineHeight = self.layoutRect().h + 'px';\n        }\n        return self._super();\n      },\n      severity: function (level) {\n        this.classes.remove('error');\n        this.classes.remove('warning');\n        this.classes.remove('success');\n        this.classes.add(level);\n      },\n      renderHtml: function () {\n        var self = this;\n        var targetCtrl, forName, forId = self.settings.forId;\n        var text = self.settings.html ? self.settings.html : self.encode(self.state.get('text'));\n        if (!forId && (forName = self.settings.forName)) {\n          targetCtrl = self.getRoot().find('#' + forName)[0];\n          if (targetCtrl) {\n            forId = targetCtrl._id;\n          }\n        }\n        if (forId) {\n          return '<label id=\"' + self._id + '\" class=\"' + self.classes + '\"' + (forId ? ' for=\"' + forId + '\"' : '') + '>' + text + '</label>';\n        }\n        return '<span id=\"' + self._id + '\" class=\"' + self.classes + '\">' + text + '</span>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:text', function (e) {\n          self.innerHtml(self.encode(e.value));\n          if (self.state.get('rendered')) {\n            self.updateLayoutRect();\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var Toolbar$1 = Container.extend({\n      Defaults: {\n        role: 'toolbar',\n        layout: 'flow'\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('toolbar');\n      },\n      postRender: function () {\n        var self = this;\n        self.items().each(function (ctrl) {\n          ctrl.classes.add('toolbar-item');\n        });\n        return self._super();\n      }\n    });\n\n    var MenuBar = Toolbar$1.extend({\n      Defaults: {\n        role: 'menubar',\n        containerCls: 'menubar',\n        ariaRoot: true,\n        defaults: { type: 'menubutton' }\n      }\n    });\n\n    function isChildOf$1(node, parent) {\n      while (node) {\n        if (parent === node) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    }\n    var MenuButton = Button.extend({\n      init: function (settings) {\n        var self = this;\n        self._renderOpen = true;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('menubtn');\n        if (settings.fixedWidth) {\n          self.classes.add('fixed-width');\n        }\n        self.aria('haspopup', true);\n        self.state.set('menu', settings.menu || self.render());\n      },\n      showMenu: function (toggle) {\n        var self = this;\n        var menu;\n        if (self.menu && self.menu.visible() && toggle !== false) {\n          return self.hideMenu();\n        }\n        if (!self.menu) {\n          menu = self.state.get('menu') || [];\n          self.classes.add('opened');\n          if (menu.length) {\n            menu = {\n              type: 'menu',\n              animate: true,\n              items: menu\n            };\n          } else {\n            menu.type = menu.type || 'menu';\n            menu.animate = true;\n          }\n          if (!menu.renderTo) {\n            self.menu = global$4.create(menu).parent(self).renderTo();\n          } else {\n            self.menu = menu.parent(self).show().renderTo();\n          }\n          self.fire('createmenu');\n          self.menu.reflow();\n          self.menu.on('cancel', function (e) {\n            if (e.control.parent() === self.menu) {\n              e.stopPropagation();\n              self.focus();\n              self.hideMenu();\n            }\n          });\n          self.menu.on('select', function () {\n            self.focus();\n          });\n          self.menu.on('show hide', function (e) {\n            if (e.type === 'hide' && e.control.parent() === self) {\n              self.classes.remove('opened-under');\n            }\n            if (e.control === self.menu) {\n              self.activeMenu(e.type === 'show');\n              self.classes.toggle('opened', e.type === 'show');\n            }\n            self.aria('expanded', e.type === 'show');\n          }).fire('show');\n        }\n        self.menu.show();\n        self.menu.layoutRect({ w: self.layoutRect().w });\n        self.menu.repaint();\n        self.menu.moveRel(self.getEl(), self.isRtl() ? [\n          'br-tr',\n          'tr-br'\n        ] : [\n          'bl-tl',\n          'tl-bl'\n        ]);\n        var menuLayoutRect = self.menu.layoutRect();\n        var selfBottom = self.$el.offset().top + self.layoutRect().h;\n        if (selfBottom > menuLayoutRect.y && selfBottom < menuLayoutRect.y + menuLayoutRect.h) {\n          self.classes.add('opened-under');\n        }\n        self.fire('showmenu');\n      },\n      hideMenu: function () {\n        var self = this;\n        if (self.menu) {\n          self.menu.items().each(function (item) {\n            if (item.hideMenu) {\n              item.hideMenu();\n            }\n          });\n          self.menu.hide();\n        }\n      },\n      activeMenu: function (state) {\n        this.classes.toggle('active', state);\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        var icon = self.settings.icon, image;\n        var text = self.state.get('text');\n        var textHtml = '';\n        image = self.settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        icon = self.settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        self.aria('role', self.parent() instanceof MenuBar ? 'menuitem' : 'button');\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\" aria-labelledby=\"' + id + '\">' + '<button id=\"' + id + '-open\" role=\"presentation\" type=\"button\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self.on('click', function (e) {\n          if (e.control === self && isChildOf$1(e.target, self.getEl())) {\n            self.focus();\n            self.showMenu(!e.aria);\n            if (e.aria) {\n              self.menu.items().filter(':visible')[0].focus();\n            }\n          }\n        });\n        self.on('mouseenter', function (e) {\n          var overCtrl = e.control;\n          var parent = self.parent();\n          var hasVisibleSiblingMenu;\n          if (overCtrl && parent && overCtrl instanceof MenuButton && overCtrl.parent() === parent) {\n            parent.items().filter('MenuButton').each(function (ctrl) {\n              if (ctrl.hideMenu && ctrl !== overCtrl) {\n                if (ctrl.menu && ctrl.menu.visible()) {\n                  hasVisibleSiblingMenu = true;\n                }\n                ctrl.hideMenu();\n              }\n            });\n            if (hasVisibleSiblingMenu) {\n              overCtrl.focus();\n              overCtrl.showMenu();\n            }\n          }\n        });\n        return self._super();\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:menu', function () {\n          if (self.menu) {\n            self.menu.remove();\n          }\n          self.menu = null;\n        });\n        return self._super();\n      },\n      remove: function () {\n        this._super();\n        if (this.menu) {\n          this.menu.remove();\n        }\n      }\n    });\n\n    var Menu = FloatPanel.extend({\n      Defaults: {\n        defaultType: 'menuitem',\n        border: 1,\n        layout: 'stack',\n        role: 'application',\n        bodyRole: 'menu',\n        ariaRoot: true\n      },\n      init: function (settings) {\n        var self = this;\n        settings.autohide = true;\n        settings.constrainToViewport = true;\n        if (typeof settings.items === 'function') {\n          settings.itemsFactory = settings.items;\n          settings.items = [];\n        }\n        if (settings.itemDefaults) {\n          var items = settings.items;\n          var i = items.length;\n          while (i--) {\n            items[i] = global$2.extend({}, settings.itemDefaults, items[i]);\n          }\n        }\n        self._super(settings);\n        self.classes.add('menu');\n        if (settings.animate && global$8.ie !== 11) {\n          self.classes.add('animate');\n        }\n      },\n      repaint: function () {\n        this.classes.toggle('menu-align', true);\n        this._super();\n        this.getEl().style.height = '';\n        this.getEl('body').style.height = '';\n        return this;\n      },\n      cancel: function () {\n        var self = this;\n        self.hideAll();\n        self.fire('select');\n      },\n      load: function () {\n        var self = this;\n        var time, factory;\n        function hideThrobber() {\n          if (self.throbber) {\n            self.throbber.hide();\n            self.throbber = null;\n          }\n        }\n        factory = self.settings.itemsFactory;\n        if (!factory) {\n          return;\n        }\n        if (!self.throbber) {\n          self.throbber = new Throbber(self.getEl('body'), true);\n          if (self.items().length === 0) {\n            self.throbber.show();\n            self.fire('loading');\n          } else {\n            self.throbber.show(100, function () {\n              self.items().remove();\n              self.fire('loading');\n            });\n          }\n          self.on('hide close', hideThrobber);\n        }\n        self.requestTime = time = new Date().getTime();\n        self.settings.itemsFactory(function (items) {\n          if (items.length === 0) {\n            self.hide();\n            return;\n          }\n          if (self.requestTime !== time) {\n            return;\n          }\n          self.getEl().style.width = '';\n          self.getEl('body').style.width = '';\n          hideThrobber();\n          self.items().remove();\n          self.getEl('body').innerHTML = '';\n          self.add(items);\n          self.renderNew();\n          self.fire('loaded');\n        });\n      },\n      hideAll: function () {\n        var self = this;\n        this.find('menuitem').exec('hideMenu');\n        return self._super();\n      },\n      preRender: function () {\n        var self = this;\n        self.items().each(function (ctrl) {\n          var settings = ctrl.settings;\n          if (settings.icon || settings.image || settings.selectable) {\n            self._hasIcons = true;\n            return false;\n          }\n        });\n        if (self.settings.itemsFactory) {\n          self.on('postrender', function () {\n            if (self.settings.itemsFactory) {\n              self.load();\n            }\n          });\n        }\n        self.on('show hide', function (e) {\n          if (e.control === self) {\n            if (e.type === 'show') {\n              global$7.setTimeout(function () {\n                self.classes.add('in');\n              }, 0);\n            } else {\n              self.classes.remove('in');\n            }\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var ListBox = MenuButton.extend({\n      init: function (settings) {\n        var self = this;\n        var values, selected, selectedText, lastItemCtrl;\n        function setSelected(menuValues) {\n          for (var i = 0; i < menuValues.length; i++) {\n            selected = menuValues[i].selected || settings.value === menuValues[i].value;\n            if (selected) {\n              selectedText = selectedText || menuValues[i].text;\n              self.state.set('value', menuValues[i].value);\n              return true;\n            }\n            if (menuValues[i].menu) {\n              if (setSelected(menuValues[i].menu)) {\n                return true;\n              }\n            }\n          }\n        }\n        self._super(settings);\n        settings = self.settings;\n        self._values = values = settings.values;\n        if (values) {\n          if (typeof settings.value !== 'undefined') {\n            setSelected(values);\n          }\n          if (!selected && values.length > 0) {\n            selectedText = values[0].text;\n            self.state.set('value', values[0].value);\n          }\n          self.state.set('menu', values);\n        }\n        self.state.set('text', settings.text || selectedText);\n        self.classes.add('listbox');\n        self.on('select', function (e) {\n          var ctrl = e.control;\n          if (lastItemCtrl) {\n            e.lastControl = lastItemCtrl;\n          }\n          if (settings.multiple) {\n            ctrl.active(!ctrl.active());\n          } else {\n            self.value(e.control.value());\n          }\n          lastItemCtrl = ctrl;\n        });\n      },\n      value: function (value) {\n        if (arguments.length === 0) {\n          return this.state.get('value');\n        }\n        if (typeof value === 'undefined') {\n          return this;\n        }\n        function valueExists(values) {\n          return exists(values, function (a) {\n            return a.menu ? valueExists(a.menu) : a.value === value;\n          });\n        }\n        if (this.settings.values) {\n          if (valueExists(this.settings.values)) {\n            this.state.set('value', value);\n          } else if (value === null) {\n            this.state.set('value', null);\n          }\n        } else {\n          this.state.set('value', value);\n        }\n        return this;\n      },\n      bindStates: function () {\n        var self = this;\n        function activateMenuItemsByValue(menu, value) {\n          if (menu instanceof Menu) {\n            menu.items().each(function (ctrl) {\n              if (!ctrl.hasMenus()) {\n                ctrl.active(ctrl.value() === value);\n              }\n            });\n          }\n        }\n        function getSelectedItem(menuValues, value) {\n          var selectedItem;\n          if (!menuValues) {\n            return;\n          }\n          for (var i = 0; i < menuValues.length; i++) {\n            if (menuValues[i].value === value) {\n              return menuValues[i];\n            }\n            if (menuValues[i].menu) {\n              selectedItem = getSelectedItem(menuValues[i].menu, value);\n              if (selectedItem) {\n                return selectedItem;\n              }\n            }\n          }\n        }\n        self.on('show', function (e) {\n          activateMenuItemsByValue(e.control, self.value());\n        });\n        self.state.on('change:value', function (e) {\n          var selectedItem = getSelectedItem(self.state.get('menu'), e.value);\n          if (selectedItem) {\n            self.text(selectedItem.text);\n          } else {\n            self.text(self.settings.text);\n          }\n        });\n        return self._super();\n      }\n    });\n\n    var toggleTextStyle = function (ctrl, state) {\n      var textStyle = ctrl._textStyle;\n      if (textStyle) {\n        var textElm = ctrl.getEl('text');\n        textElm.setAttribute('style', textStyle);\n        if (state) {\n          textElm.style.color = '';\n          textElm.style.backgroundColor = '';\n        }\n      }\n    };\n    var MenuItem = Widget.extend({\n      Defaults: {\n        border: 0,\n        role: 'menuitem'\n      },\n      init: function (settings) {\n        var self = this;\n        var text;\n        self._super(settings);\n        settings = self.settings;\n        self.classes.add('menu-item');\n        if (settings.menu) {\n          self.classes.add('menu-item-expand');\n        }\n        if (settings.preview) {\n          self.classes.add('menu-item-preview');\n        }\n        text = self.state.get('text');\n        if (text === '-' || text === '|') {\n          self.classes.add('menu-item-sep');\n          self.aria('role', 'separator');\n          self.state.set('text', '-');\n        }\n        if (settings.selectable) {\n          self.aria('role', 'menuitemcheckbox');\n          self.classes.add('menu-item-checkbox');\n          settings.icon = 'selected';\n        }\n        if (!settings.preview && !settings.selectable) {\n          self.classes.add('menu-item-normal');\n        }\n        self.on('mousedown', function (e) {\n          e.preventDefault();\n        });\n        if (settings.menu && !settings.ariaHideMenu) {\n          self.aria('haspopup', true);\n        }\n      },\n      hasMenus: function () {\n        return !!this.settings.menu;\n      },\n      showMenu: function () {\n        var self = this;\n        var settings = self.settings;\n        var menu;\n        var parent = self.parent();\n        parent.items().each(function (ctrl) {\n          if (ctrl !== self) {\n            ctrl.hideMenu();\n          }\n        });\n        if (settings.menu) {\n          menu = self.menu;\n          if (!menu) {\n            menu = settings.menu;\n            if (menu.length) {\n              menu = {\n                type: 'menu',\n                items: menu\n              };\n            } else {\n              menu.type = menu.type || 'menu';\n            }\n            if (parent.settings.itemDefaults) {\n              menu.itemDefaults = parent.settings.itemDefaults;\n            }\n            menu = self.menu = global$4.create(menu).parent(self).renderTo();\n            menu.reflow();\n            menu.on('cancel', function (e) {\n              e.stopPropagation();\n              self.focus();\n              menu.hide();\n            });\n            menu.on('show hide', function (e) {\n              if (e.control.items) {\n                e.control.items().each(function (ctrl) {\n                  ctrl.active(ctrl.settings.selected);\n                });\n              }\n            }).fire('show');\n            menu.on('hide', function (e) {\n              if (e.control === menu) {\n                self.classes.remove('selected');\n              }\n            });\n            menu.submenu = true;\n          } else {\n            menu.show();\n          }\n          menu._parentMenu = parent;\n          menu.classes.add('menu-sub');\n          var rel = menu.testMoveRel(self.getEl(), self.isRtl() ? [\n            'tl-tr',\n            'bl-br',\n            'tr-tl',\n            'br-bl'\n          ] : [\n            'tr-tl',\n            'br-bl',\n            'tl-tr',\n            'bl-br'\n          ]);\n          menu.moveRel(self.getEl(), rel);\n          menu.rel = rel;\n          rel = 'menu-sub-' + rel;\n          menu.classes.remove(menu._lastRel).add(rel);\n          menu._lastRel = rel;\n          self.classes.add('selected');\n          self.aria('expanded', true);\n        }\n      },\n      hideMenu: function () {\n        var self = this;\n        if (self.menu) {\n          self.menu.items().each(function (item) {\n            if (item.hideMenu) {\n              item.hideMenu();\n            }\n          });\n          self.menu.hide();\n          self.aria('expanded', false);\n        }\n        return self;\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var settings = self.settings;\n        var prefix = self.classPrefix;\n        var text = self.state.get('text');\n        var icon = self.settings.icon, image = '', shortcut = settings.shortcut;\n        var url = self.encode(settings.url), iconHtml = '';\n        function convertShortcut(shortcut) {\n          var i, value, replace = {};\n          if (global$8.mac) {\n            replace = {\n              alt: '&#x2325;',\n              ctrl: '&#x2318;',\n              shift: '&#x21E7;',\n              meta: '&#x2318;'\n            };\n          } else {\n            replace = { meta: 'Ctrl' };\n          }\n          shortcut = shortcut.split('+');\n          for (i = 0; i < shortcut.length; i++) {\n            value = replace[shortcut[i].toLowerCase()];\n            if (value) {\n              shortcut[i] = value;\n            }\n          }\n          return shortcut.join('+');\n        }\n        function escapeRegExp(str) {\n          return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n        }\n        function markMatches(text) {\n          var match = settings.match || '';\n          return match ? text.replace(new RegExp(escapeRegExp(match), 'gi'), function (match) {\n            return '!mce~match[' + match + ']mce~match!';\n          }) : text;\n        }\n        function boldMatches(text) {\n          return text.replace(new RegExp(escapeRegExp('!mce~match['), 'g'), '<b>').replace(new RegExp(escapeRegExp(']mce~match!'), 'g'), '</b>');\n        }\n        if (icon) {\n          self.parent().classes.add('menu-has-icons');\n        }\n        if (settings.image) {\n          image = ' style=\"background-image: url(\\'' + settings.image + '\\')\"';\n        }\n        if (shortcut) {\n          shortcut = convertShortcut(shortcut);\n        }\n        icon = prefix + 'ico ' + prefix + 'i-' + (self.settings.icon || 'none');\n        iconHtml = text !== '-' ? '<i class=\"' + icon + '\"' + image + '></i>\\xA0' : '';\n        text = boldMatches(self.encode(markMatches(text)));\n        url = boldMatches(self.encode(markMatches(url)));\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" tabindex=\"-1\">' + iconHtml + (text !== '-' ? '<span id=\"' + id + '-text\" class=\"' + prefix + 'text\">' + text + '</span>' : '') + (shortcut ? '<div id=\"' + id + '-shortcut\" class=\"' + prefix + 'menu-shortcut\">' + shortcut + '</div>' : '') + (settings.menu ? '<div class=\"' + prefix + 'caret\"></div>' : '') + (url ? '<div class=\"' + prefix + 'menu-item-link\">' + url + '</div>' : '') + '</div>';\n      },\n      postRender: function () {\n        var self = this, settings = self.settings;\n        var textStyle = settings.textStyle;\n        if (typeof textStyle === 'function') {\n          textStyle = textStyle.call(this);\n        }\n        if (textStyle) {\n          var textElm = self.getEl('text');\n          if (textElm) {\n            textElm.setAttribute('style', textStyle);\n            self._textStyle = textStyle;\n          }\n        }\n        self.on('mouseenter click', function (e) {\n          if (e.control === self) {\n            if (!settings.menu && e.type === 'click') {\n              self.fire('select');\n              global$7.requestAnimationFrame(function () {\n                self.parent().hideAll();\n              });\n            } else {\n              self.showMenu();\n              if (e.aria) {\n                self.menu.focus(true);\n              }\n            }\n          }\n        });\n        self._super();\n        return self;\n      },\n      hover: function () {\n        var self = this;\n        self.parent().items().each(function (ctrl) {\n          ctrl.classes.remove('selected');\n        });\n        self.classes.toggle('selected', true);\n        return self;\n      },\n      active: function (state) {\n        toggleTextStyle(this, state);\n        if (typeof state !== 'undefined') {\n          this.aria('checked', state);\n        }\n        return this._super(state);\n      },\n      remove: function () {\n        this._super();\n        if (this.menu) {\n          this.menu.remove();\n        }\n      }\n    });\n\n    var Radio = Checkbox.extend({\n      Defaults: {\n        classes: 'radio',\n        role: 'radio'\n      }\n    });\n\n    var ResizeHandle = Widget.extend({\n      renderHtml: function () {\n        var self = this, prefix = self.classPrefix;\n        self.classes.add('resizehandle');\n        if (self.settings.direction === 'both') {\n          self.classes.add('resizehandle-both');\n        }\n        self.canFocus = false;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\">' + '<i class=\"' + prefix + 'ico ' + prefix + 'i-resize\"></i>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.resizeDragHelper = new DragHelper(this._id, {\n          start: function () {\n            self.fire('ResizeStart');\n          },\n          drag: function (e) {\n            if (self.settings.direction !== 'both') {\n              e.deltaX = 0;\n            }\n            self.fire('Resize', e);\n          },\n          stop: function () {\n            self.fire('ResizeEnd');\n          }\n        });\n      },\n      remove: function () {\n        if (this.resizeDragHelper) {\n          this.resizeDragHelper.destroy();\n        }\n        return this._super();\n      }\n    });\n\n    function createOptions(options) {\n      var strOptions = '';\n      if (options) {\n        for (var i = 0; i < options.length; i++) {\n          strOptions += '<option value=\"' + options[i] + '\">' + options[i] + '</option>';\n        }\n      }\n      return strOptions;\n    }\n    var SelectBox = Widget.extend({\n      Defaults: {\n        classes: 'selectbox',\n        role: 'selectbox',\n        options: []\n      },\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        if (self.settings.size) {\n          self.size = self.settings.size;\n        }\n        if (self.settings.options) {\n          self._options = self.settings.options;\n        }\n        self.on('keydown', function (e) {\n          var rootControl;\n          if (e.keyCode === 13) {\n            e.preventDefault();\n            self.parents().reverse().each(function (ctrl) {\n              if (ctrl.toJSON) {\n                rootControl = ctrl;\n                return false;\n              }\n            });\n            self.fire('submit', { data: rootControl.toJSON() });\n          }\n        });\n      },\n      options: function (state) {\n        if (!arguments.length) {\n          return this.state.get('options');\n        }\n        this.state.set('options', state);\n        return this;\n      },\n      renderHtml: function () {\n        var self = this;\n        var options, size = '';\n        options = createOptions(self._options);\n        if (self.size) {\n          size = ' size = \"' + self.size + '\"';\n        }\n        return '<select id=\"' + self._id + '\" class=\"' + self.classes + '\"' + size + '>' + options + '</select>';\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:options', function (e) {\n          self.getEl().innerHTML = createOptions(e.value);\n        });\n        return self._super();\n      }\n    });\n\n    function constrain(value, minVal, maxVal) {\n      if (value < minVal) {\n        value = minVal;\n      }\n      if (value > maxVal) {\n        value = maxVal;\n      }\n      return value;\n    }\n    function setAriaProp(el, name, value) {\n      el.setAttribute('aria-' + name, value);\n    }\n    function updateSliderHandle(ctrl, value) {\n      var maxHandlePos, shortSizeName, sizeName, stylePosName, styleValue, handleEl;\n      if (ctrl.settings.orientation === 'v') {\n        stylePosName = 'top';\n        sizeName = 'height';\n        shortSizeName = 'h';\n      } else {\n        stylePosName = 'left';\n        sizeName = 'width';\n        shortSizeName = 'w';\n      }\n      handleEl = ctrl.getEl('handle');\n      maxHandlePos = (ctrl.layoutRect()[shortSizeName] || 100) - funcs.getSize(handleEl)[sizeName];\n      styleValue = maxHandlePos * ((value - ctrl._minValue) / (ctrl._maxValue - ctrl._minValue)) + 'px';\n      handleEl.style[stylePosName] = styleValue;\n      handleEl.style.height = ctrl.layoutRect().h + 'px';\n      setAriaProp(handleEl, 'valuenow', value);\n      setAriaProp(handleEl, 'valuetext', '' + ctrl.settings.previewFilter(value));\n      setAriaProp(handleEl, 'valuemin', ctrl._minValue);\n      setAriaProp(handleEl, 'valuemax', ctrl._maxValue);\n    }\n    var Slider = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        if (!settings.previewFilter) {\n          settings.previewFilter = function (value) {\n            return Math.round(value * 100) / 100;\n          };\n        }\n        self._super(settings);\n        self.classes.add('slider');\n        if (settings.orientation === 'v') {\n          self.classes.add('vertical');\n        }\n        self._minValue = isNumber(settings.minValue) ? settings.minValue : 0;\n        self._maxValue = isNumber(settings.maxValue) ? settings.maxValue : 100;\n        self._initValue = self.state.get('value');\n      },\n      renderHtml: function () {\n        var self = this, id = self._id, prefix = self.classPrefix;\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\">' + '<div id=\"' + id + '-handle\" class=\"' + prefix + 'slider-handle\" role=\"slider\" tabindex=\"-1\"></div>' + '</div>';\n      },\n      reset: function () {\n        this.value(this._initValue).repaint();\n      },\n      postRender: function () {\n        var self = this;\n        var minValue, maxValue, screenCordName, stylePosName, sizeName, shortSizeName;\n        function toFraction(min, max, val) {\n          return (val + min) / (max - min);\n        }\n        function fromFraction(min, max, val) {\n          return val * (max - min) - min;\n        }\n        function handleKeyboard(minValue, maxValue) {\n          function alter(delta) {\n            var value;\n            value = self.value();\n            value = fromFraction(minValue, maxValue, toFraction(minValue, maxValue, value) + delta * 0.05);\n            value = constrain(value, minValue, maxValue);\n            self.value(value);\n            self.fire('dragstart', { value: value });\n            self.fire('drag', { value: value });\n            self.fire('dragend', { value: value });\n          }\n          self.on('keydown', function (e) {\n            switch (e.keyCode) {\n            case 37:\n            case 38:\n              alter(-1);\n              break;\n            case 39:\n            case 40:\n              alter(1);\n              break;\n            }\n          });\n        }\n        function handleDrag(minValue, maxValue, handleEl) {\n          var startPos, startHandlePos, maxHandlePos, handlePos, value;\n          self._dragHelper = new DragHelper(self._id, {\n            handle: self._id + '-handle',\n            start: function (e) {\n              startPos = e[screenCordName];\n              startHandlePos = parseInt(self.getEl('handle').style[stylePosName], 10);\n              maxHandlePos = (self.layoutRect()[shortSizeName] || 100) - funcs.getSize(handleEl)[sizeName];\n              self.fire('dragstart', { value: value });\n            },\n            drag: function (e) {\n              var delta = e[screenCordName] - startPos;\n              handlePos = constrain(startHandlePos + delta, 0, maxHandlePos);\n              handleEl.style[stylePosName] = handlePos + 'px';\n              value = minValue + handlePos / maxHandlePos * (maxValue - minValue);\n              self.value(value);\n              self.tooltip().text('' + self.settings.previewFilter(value)).show().moveRel(handleEl, 'bc tc');\n              self.fire('drag', { value: value });\n            },\n            stop: function () {\n              self.tooltip().hide();\n              self.fire('dragend', { value: value });\n            }\n          });\n        }\n        minValue = self._minValue;\n        maxValue = self._maxValue;\n        if (self.settings.orientation === 'v') {\n          screenCordName = 'screenY';\n          stylePosName = 'top';\n          sizeName = 'height';\n          shortSizeName = 'h';\n        } else {\n          screenCordName = 'screenX';\n          stylePosName = 'left';\n          sizeName = 'width';\n          shortSizeName = 'w';\n        }\n        self._super();\n        handleKeyboard(minValue, maxValue);\n        handleDrag(minValue, maxValue, self.getEl('handle'));\n      },\n      repaint: function () {\n        this._super();\n        updateSliderHandle(this, this.value());\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          updateSliderHandle(self, e.value);\n        });\n        return self._super();\n      }\n    });\n\n    var Spacer = Widget.extend({\n      renderHtml: function () {\n        var self = this;\n        self.classes.add('spacer');\n        self.canFocus = false;\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\"></div>';\n      }\n    });\n\n    var SplitButton = MenuButton.extend({\n      Defaults: {\n        classes: 'widget btn splitbtn',\n        role: 'button'\n      },\n      repaint: function () {\n        var self = this;\n        var elm = self.getEl();\n        var rect = self.layoutRect();\n        var mainButtonElm, menuButtonElm;\n        self._super();\n        mainButtonElm = elm.firstChild;\n        menuButtonElm = elm.lastChild;\n        global$9(mainButtonElm).css({\n          width: rect.w - funcs.getSize(menuButtonElm).width,\n          height: rect.h - 2\n        });\n        global$9(menuButtonElm).css({ height: rect.h - 2 });\n        return self;\n      },\n      activeMenu: function (state) {\n        var self = this;\n        global$9(self.getEl().lastChild).toggleClass(self.classPrefix + 'active', state);\n      },\n      renderHtml: function () {\n        var self = this;\n        var id = self._id;\n        var prefix = self.classPrefix;\n        var image;\n        var icon = self.state.get('icon');\n        var text = self.state.get('text');\n        var settings = self.settings;\n        var textHtml = '', ariaPressed;\n        image = settings.image;\n        if (image) {\n          icon = 'none';\n          if (typeof image !== 'string') {\n            image = domGlobals.window.getSelection ? image[0] : image[1];\n          }\n          image = ' style=\"background-image: url(\\'' + image + '\\')\"';\n        } else {\n          image = '';\n        }\n        icon = settings.icon ? prefix + 'ico ' + prefix + 'i-' + icon : '';\n        if (text) {\n          self.classes.add('btn-has-text');\n          textHtml = '<span class=\"' + prefix + 'txt\">' + self.encode(text) + '</span>';\n        }\n        ariaPressed = typeof settings.active === 'boolean' ? ' aria-pressed=\"' + settings.active + '\"' : '';\n        return '<div id=\"' + id + '\" class=\"' + self.classes + '\" role=\"button\"' + ariaPressed + ' tabindex=\"-1\">' + '<button type=\"button\" hidefocus=\"1\" tabindex=\"-1\">' + (icon ? '<i class=\"' + icon + '\"' + image + '></i>' : '') + textHtml + '</button>' + '<button type=\"button\" class=\"' + prefix + 'open\" hidefocus=\"1\" tabindex=\"-1\">' + (self._menuBtnText ? (icon ? '\\xA0' : '') + self._menuBtnText : '') + ' <i class=\"' + prefix + 'caret\"></i>' + '</button>' + '</div>';\n      },\n      postRender: function () {\n        var self = this, onClickHandler = self.settings.onclick;\n        self.on('click', function (e) {\n          var node = e.target;\n          if (e.control === this) {\n            while (node) {\n              if (e.aria && e.aria.key !== 'down' || node.nodeName === 'BUTTON' && node.className.indexOf('open') === -1) {\n                e.stopImmediatePropagation();\n                if (onClickHandler) {\n                  onClickHandler.call(this, e);\n                }\n                return;\n              }\n              node = node.parentNode;\n            }\n          }\n        });\n        delete self.settings.onclick;\n        return self._super();\n      }\n    });\n\n    var StackLayout = FlowLayout.extend({\n      Defaults: {\n        containerClass: 'stack-layout',\n        controlClass: 'stack-layout-item',\n        endClass: 'break'\n      },\n      isNative: function () {\n        return true;\n      }\n    });\n\n    var TabPanel = Panel.extend({\n      Defaults: {\n        layout: 'absolute',\n        defaults: { type: 'panel' }\n      },\n      activateTab: function (idx) {\n        var activeTabElm;\n        if (this.activeTabId) {\n          activeTabElm = this.getEl(this.activeTabId);\n          global$9(activeTabElm).removeClass(this.classPrefix + 'active');\n          activeTabElm.setAttribute('aria-selected', 'false');\n        }\n        this.activeTabId = 't' + idx;\n        activeTabElm = this.getEl('t' + idx);\n        activeTabElm.setAttribute('aria-selected', 'true');\n        global$9(activeTabElm).addClass(this.classPrefix + 'active');\n        this.items()[idx].show().fire('showtab');\n        this.reflow();\n        this.items().each(function (item, i) {\n          if (idx !== i) {\n            item.hide();\n          }\n        });\n      },\n      renderHtml: function () {\n        var self = this;\n        var layout = self._layout;\n        var tabsHtml = '';\n        var prefix = self.classPrefix;\n        self.preRender();\n        layout.preRender(self);\n        self.items().each(function (ctrl, i) {\n          var id = self._id + '-t' + i;\n          ctrl.aria('role', 'tabpanel');\n          ctrl.aria('labelledby', id);\n          tabsHtml += '<div id=\"' + id + '\" class=\"' + prefix + 'tab\" ' + 'unselectable=\"on\" role=\"tab\" aria-controls=\"' + ctrl._id + '\" aria-selected=\"false\" tabIndex=\"-1\">' + self.encode(ctrl.settings.title) + '</div>';\n        });\n        return '<div id=\"' + self._id + '\" class=\"' + self.classes + '\" hidefocus=\"1\" tabindex=\"-1\">' + '<div id=\"' + self._id + '-head\" class=\"' + prefix + 'tabs\" role=\"tablist\">' + tabsHtml + '</div>' + '<div id=\"' + self._id + '-body\" class=\"' + self.bodyClasses + '\">' + layout.renderHtml(self) + '</div>' + '</div>';\n      },\n      postRender: function () {\n        var self = this;\n        self._super();\n        self.settings.activeTab = self.settings.activeTab || 0;\n        self.activateTab(self.settings.activeTab);\n        this.on('click', function (e) {\n          var targetParent = e.target.parentNode;\n          if (targetParent && targetParent.id === self._id + '-head') {\n            var i = targetParent.childNodes.length;\n            while (i--) {\n              if (targetParent.childNodes[i] === e.target) {\n                self.activateTab(i);\n              }\n            }\n          }\n        });\n      },\n      initLayoutRect: function () {\n        var self = this;\n        var rect, minW, minH;\n        minW = funcs.getSize(self.getEl('head')).width;\n        minW = minW < 0 ? 0 : minW;\n        minH = 0;\n        self.items().each(function (item) {\n          minW = Math.max(minW, item.layoutRect().minW);\n          minH = Math.max(minH, item.layoutRect().minH);\n        });\n        self.items().each(function (ctrl) {\n          ctrl.settings.x = 0;\n          ctrl.settings.y = 0;\n          ctrl.settings.w = minW;\n          ctrl.settings.h = minH;\n          ctrl.layoutRect({\n            x: 0,\n            y: 0,\n            w: minW,\n            h: minH\n          });\n        });\n        var headH = funcs.getSize(self.getEl('head')).height;\n        self.settings.minWidth = minW;\n        self.settings.minHeight = minH + headH;\n        rect = self._super();\n        rect.deltaH += headH;\n        rect.innerH = rect.h - rect.deltaH;\n        return rect;\n      }\n    });\n\n    var TextBox = Widget.extend({\n      init: function (settings) {\n        var self = this;\n        self._super(settings);\n        self.classes.add('textbox');\n        if (settings.multiline) {\n          self.classes.add('multiline');\n        } else {\n          self.on('keydown', function (e) {\n            var rootControl;\n            if (e.keyCode === 13) {\n              e.preventDefault();\n              self.parents().reverse().each(function (ctrl) {\n                if (ctrl.toJSON) {\n                  rootControl = ctrl;\n                  return false;\n                }\n              });\n              self.fire('submit', { data: rootControl.toJSON() });\n            }\n          });\n          self.on('keyup', function (e) {\n            self.state.set('value', e.target.value);\n          });\n        }\n      },\n      repaint: function () {\n        var self = this;\n        var style, rect, borderBox, borderW, borderH = 0, lastRepaintRect;\n        style = self.getEl().style;\n        rect = self._layoutRect;\n        lastRepaintRect = self._lastRepaintRect || {};\n        var doc = domGlobals.document;\n        if (!self.settings.multiline && doc.all && (!doc.documentMode || doc.documentMode <= 8)) {\n          style.lineHeight = rect.h - borderH + 'px';\n        }\n        borderBox = self.borderBox;\n        borderW = borderBox.left + borderBox.right + 8;\n        borderH = borderBox.top + borderBox.bottom + (self.settings.multiline ? 8 : 0);\n        if (rect.x !== lastRepaintRect.x) {\n          style.left = rect.x + 'px';\n          lastRepaintRect.x = rect.x;\n        }\n        if (rect.y !== lastRepaintRect.y) {\n          style.top = rect.y + 'px';\n          lastRepaintRect.y = rect.y;\n        }\n        if (rect.w !== lastRepaintRect.w) {\n          style.width = rect.w - borderW + 'px';\n          lastRepaintRect.w = rect.w;\n        }\n        if (rect.h !== lastRepaintRect.h) {\n          style.height = rect.h - borderH + 'px';\n          lastRepaintRect.h = rect.h;\n        }\n        self._lastRepaintRect = lastRepaintRect;\n        self.fire('repaint', {}, false);\n        return self;\n      },\n      renderHtml: function () {\n        var self = this;\n        var settings = self.settings;\n        var attrs, elm;\n        attrs = {\n          id: self._id,\n          hidefocus: '1'\n        };\n        global$2.each([\n          'rows',\n          'spellcheck',\n          'maxLength',\n          'size',\n          'readonly',\n          'min',\n          'max',\n          'step',\n          'list',\n          'pattern',\n          'placeholder',\n          'required',\n          'multiple'\n        ], function (name) {\n          attrs[name] = settings[name];\n        });\n        if (self.disabled()) {\n          attrs.disabled = 'disabled';\n        }\n        if (settings.subtype) {\n          attrs.type = settings.subtype;\n        }\n        elm = funcs.create(settings.multiline ? 'textarea' : 'input', attrs);\n        elm.value = self.state.get('value');\n        elm.className = self.classes.toString();\n        return elm.outerHTML;\n      },\n      value: function (value) {\n        if (arguments.length) {\n          this.state.set('value', value);\n          return this;\n        }\n        if (this.state.get('rendered')) {\n          this.state.set('value', this.getEl().value);\n        }\n        return this.state.get('value');\n      },\n      postRender: function () {\n        var self = this;\n        self.getEl().value = self.state.get('value');\n        self._super();\n        self.$el.on('change', function (e) {\n          self.state.set('value', e.target.value);\n          self.fire('change', e);\n        });\n      },\n      bindStates: function () {\n        var self = this;\n        self.state.on('change:value', function (e) {\n          if (self.getEl().value !== e.value) {\n            self.getEl().value = e.value;\n          }\n        });\n        self.state.on('change:disabled', function (e) {\n          self.getEl().disabled = e.value;\n        });\n        return self._super();\n      },\n      remove: function () {\n        this.$el.off();\n        this._super();\n      }\n    });\n\n    var getApi = function () {\n      return {\n        Selector: Selector,\n        Collection: Collection$2,\n        ReflowQueue: ReflowQueue,\n        Control: Control$1,\n        Factory: global$4,\n        KeyboardNavigation: KeyboardNavigation,\n        Container: Container,\n        DragHelper: DragHelper,\n        Scrollable: Scrollable,\n        Panel: Panel,\n        Movable: Movable,\n        Resizable: Resizable,\n        FloatPanel: FloatPanel,\n        Window: Window,\n        MessageBox: MessageBox,\n        Tooltip: Tooltip,\n        Widget: Widget,\n        Progress: Progress,\n        Notification: Notification,\n        Layout: Layout,\n        AbsoluteLayout: AbsoluteLayout,\n        Button: Button,\n        ButtonGroup: ButtonGroup,\n        Checkbox: Checkbox,\n        ComboBox: ComboBox,\n        ColorBox: ColorBox,\n        PanelButton: PanelButton,\n        ColorButton: ColorButton,\n        ColorPicker: ColorPicker,\n        Path: Path,\n        ElementPath: ElementPath,\n        FormItem: FormItem,\n        Form: Form,\n        FieldSet: FieldSet,\n        FilePicker: FilePicker,\n        FitLayout: FitLayout,\n        FlexLayout: FlexLayout,\n        FlowLayout: FlowLayout,\n        FormatControls: FormatControls,\n        GridLayout: GridLayout,\n        Iframe: Iframe$1,\n        InfoBox: InfoBox,\n        Label: Label,\n        Toolbar: Toolbar$1,\n        MenuBar: MenuBar,\n        MenuButton: MenuButton,\n        MenuItem: MenuItem,\n        Throbber: Throbber,\n        Menu: Menu,\n        ListBox: ListBox,\n        Radio: Radio,\n        ResizeHandle: ResizeHandle,\n        SelectBox: SelectBox,\n        Slider: Slider,\n        Spacer: Spacer,\n        SplitButton: SplitButton,\n        StackLayout: StackLayout,\n        TabPanel: TabPanel,\n        TextBox: TextBox,\n        DropZone: DropZone,\n        BrowseButton: BrowseButton\n      };\n    };\n    var appendTo = function (target) {\n      if (target.ui) {\n        global$2.each(getApi(), function (ref, key) {\n          target.ui[key] = ref;\n        });\n      } else {\n        target.ui = getApi();\n      }\n    };\n    var registerToFactory = function () {\n      global$2.each(getApi(), function (ref, key) {\n        global$4.add(key, ref);\n      });\n    };\n    var Api = {\n      appendTo: appendTo,\n      registerToFactory: registerToFactory\n    };\n\n    Api.registerToFactory();\n    Api.appendTo(window.tinymce ? window.tinymce : {});\n    global.add('modern', function (editor) {\n      FormatControls.setup(editor);\n      return ThemeApi.get(editor);\n    });\n    function Theme () {\n    }\n\n    return Theme;\n\n}(window));\n})();\n","(function () {\nvar paste = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasProPlugin = function (editor) {\n      if (/(^|[ ,])powerpaste([, ]|$)/.test(editor.settings.plugins) && global$1.get('powerpaste')) {\n        if (typeof domGlobals.window.console !== 'undefined' && domGlobals.window.console.log) {\n          domGlobals.window.console.log('PowerPaste is incompatible with Paste plugin! Remove \\'paste\\' from the \\'plugins\\' option.');\n        }\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var DetectProPlugin = { hasProPlugin: hasProPlugin };\n\n    var get = function (clipboard, quirks) {\n      return {\n        clipboard: clipboard,\n        quirks: quirks\n      };\n    };\n    var Api = { get: get };\n\n    var firePastePreProcess = function (editor, html, internal, isWordHtml) {\n      return editor.fire('PastePreProcess', {\n        content: html,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePostProcess = function (editor, node, internal, isWordHtml) {\n      return editor.fire('PastePostProcess', {\n        node: node,\n        internal: internal,\n        wordContent: isWordHtml\n      });\n    };\n    var firePastePlainTextToggle = function (editor, state) {\n      return editor.fire('PastePlainTextToggle', { state: state });\n    };\n    var firePaste = function (editor, ieFake) {\n      return editor.fire('paste', { ieFake: ieFake });\n    };\n    var Events = {\n      firePastePreProcess: firePastePreProcess,\n      firePastePostProcess: firePastePostProcess,\n      firePastePlainTextToggle: firePastePlainTextToggle,\n      firePaste: firePaste\n    };\n\n    var shouldPlainTextInform = function (editor) {\n      return editor.getParam('paste_plaintext_inform', true);\n    };\n    var shouldBlockDrop = function (editor) {\n      return editor.getParam('paste_block_drop', false);\n    };\n    var shouldPasteDataImages = function (editor) {\n      return editor.getParam('paste_data_images', false);\n    };\n    var shouldFilterDrop = function (editor) {\n      return editor.getParam('paste_filter_drop', true);\n    };\n    var getPreProcess = function (editor) {\n      return editor.getParam('paste_preprocess');\n    };\n    var getPostProcess = function (editor) {\n      return editor.getParam('paste_postprocess');\n    };\n    var getWebkitStyles = function (editor) {\n      return editor.getParam('paste_webkit_styles');\n    };\n    var shouldRemoveWebKitStyles = function (editor) {\n      return editor.getParam('paste_remove_styles_if_webkit', true);\n    };\n    var shouldMergeFormats = function (editor) {\n      return editor.getParam('paste_merge_formats', true);\n    };\n    var isSmartPasteEnabled = function (editor) {\n      return editor.getParam('smart_paste', true);\n    };\n    var isPasteAsTextEnabled = function (editor) {\n      return editor.getParam('paste_as_text', false);\n    };\n    var getRetainStyleProps = function (editor) {\n      return editor.getParam('paste_retain_style_properties');\n    };\n    var getWordValidElements = function (editor) {\n      var defaultValidElements = '-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,' + '-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,' + 'td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody';\n      return editor.getParam('paste_word_valid_elements', defaultValidElements);\n    };\n    var shouldConvertWordFakeLists = function (editor) {\n      return editor.getParam('paste_convert_word_fake_lists', true);\n    };\n    var shouldUseDefaultFilters = function (editor) {\n      return editor.getParam('paste_enable_default_filters', true);\n    };\n    var Settings = {\n      shouldPlainTextInform: shouldPlainTextInform,\n      shouldBlockDrop: shouldBlockDrop,\n      shouldPasteDataImages: shouldPasteDataImages,\n      shouldFilterDrop: shouldFilterDrop,\n      getPreProcess: getPreProcess,\n      getPostProcess: getPostProcess,\n      getWebkitStyles: getWebkitStyles,\n      shouldRemoveWebKitStyles: shouldRemoveWebKitStyles,\n      shouldMergeFormats: shouldMergeFormats,\n      isSmartPasteEnabled: isSmartPasteEnabled,\n      isPasteAsTextEnabled: isPasteAsTextEnabled,\n      getRetainStyleProps: getRetainStyleProps,\n      getWordValidElements: getWordValidElements,\n      shouldConvertWordFakeLists: shouldConvertWordFakeLists,\n      shouldUseDefaultFilters: shouldUseDefaultFilters\n    };\n\n    var shouldInformUserAboutPlainText = function (editor, userIsInformedState) {\n      return userIsInformedState.get() === false && Settings.shouldPlainTextInform(editor);\n    };\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        text: editor.translate(message),\n        type: 'info'\n      });\n    };\n    var togglePlainTextPaste = function (editor, clipboard, userIsInformedState) {\n      if (clipboard.pasteFormat.get() === 'text') {\n        clipboard.pasteFormat.set('html');\n        Events.firePastePlainTextToggle(editor, false);\n      } else {\n        clipboard.pasteFormat.set('text');\n        Events.firePastePlainTextToggle(editor, true);\n        if (shouldInformUserAboutPlainText(editor, userIsInformedState)) {\n          displayNotification(editor, 'Paste is now in plain text mode. Contents will now be pasted as plain text until you toggle this option off.');\n          userIsInformedState.set(true);\n        }\n      }\n      editor.focus();\n    };\n    var Actions = { togglePlainTextPaste: togglePlainTextPaste };\n\n    var register = function (editor, clipboard, userIsInformedState) {\n      editor.addCommand('mceTogglePlainTextPaste', function () {\n        Actions.togglePlainTextPaste(editor, clipboard, userIsInformedState);\n      });\n      editor.addCommand('mceInsertClipboardContent', function (ui, value) {\n        if (value.content) {\n          clipboard.pasteHtml(value.content, value.internal);\n        }\n        if (value.text) {\n          clipboard.pasteText(value.text);\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var internalMimeType = 'x-tinymce/html';\n    var internalMark = '<!-- ' + internalMimeType + ' -->';\n    var mark = function (html) {\n      return internalMark + html;\n    };\n    var unmark = function (html) {\n      return html.replace(internalMark, '');\n    };\n    var isMarked = function (html) {\n      return html.indexOf(internalMark) !== -1;\n    };\n    var InternalHtml = {\n      mark: mark,\n      unmark: unmark,\n      isMarked: isMarked,\n      internalHtmlMime: function () {\n        return internalMimeType;\n      }\n    };\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.html.Entities');\n\n    var isPlainText = function (text) {\n      return !/<(?:\\/?(?!(?:div|p|br|span)>)\\w+|(?:(?!(?:span style=\"white-space:\\s?pre;?\">)|br\\s?\\/>))\\w+\\s[^>]+)>/i.test(text);\n    };\n    var toBRs = function (text) {\n      return text.replace(/\\r?\\n/g, '<br>');\n    };\n    var openContainer = function (rootTag, rootAttrs) {\n      var key;\n      var attrs = [];\n      var tag = '<' + rootTag;\n      if (typeof rootAttrs === 'object') {\n        for (key in rootAttrs) {\n          if (rootAttrs.hasOwnProperty(key)) {\n            attrs.push(key + '=\"' + global$6.encodeAllRaw(rootAttrs[key]) + '\"');\n          }\n        }\n        if (attrs.length) {\n          tag += ' ' + attrs.join(' ');\n        }\n      }\n      return tag + '>';\n    };\n    var toBlockElements = function (text, rootTag, rootAttrs) {\n      var blocks = text.split(/\\n\\n/);\n      var tagOpen = openContainer(rootTag, rootAttrs);\n      var tagClose = '</' + rootTag + '>';\n      var paragraphs = global$4.map(blocks, function (p) {\n        return p.split(/\\n/).join('<br />');\n      });\n      var stitch = function (p) {\n        return tagOpen + p + tagClose;\n      };\n      return paragraphs.length === 1 ? paragraphs[0] : global$4.map(paragraphs, stitch).join('');\n    };\n    var convert = function (text, rootTag, rootAttrs) {\n      return rootTag ? toBlockElements(text, rootTag, rootAttrs) : toBRs(text);\n    };\n    var Newlines = {\n      isPlainText: isPlainText,\n      convert: convert,\n      toBRs: toBRs,\n      toBlockElements: toBlockElements\n    };\n\n    var global$7 = tinymce.util.Tools.resolve('tinymce.html.DomParser');\n\n    var global$8 = tinymce.util.Tools.resolve('tinymce.html.Node');\n\n    var global$9 = tinymce.util.Tools.resolve('tinymce.html.Schema');\n\n    var global$a = tinymce.util.Tools.resolve('tinymce.html.Serializer');\n\n    function filter(content, items) {\n      global$4.each(items, function (v) {\n        if (v.constructor === RegExp) {\n          content = content.replace(v, '');\n        } else {\n          content = content.replace(v[0], v[1]);\n        }\n      });\n      return content;\n    }\n    function innerText(html) {\n      var schema = global$9();\n      var domParser = global$7({}, schema);\n      var text = '';\n      var shortEndedElements = schema.getShortEndedElements();\n      var ignoreElements = global$4.makeMap('script noscript style textarea video audio iframe object', ' ');\n      var blockElements = schema.getBlockElements();\n      function walk(node) {\n        var name = node.name, currentNode = node;\n        if (name === 'br') {\n          text += '\\n';\n          return;\n        }\n        if (name === 'wbr') {\n          return;\n        }\n        if (shortEndedElements[name]) {\n          text += ' ';\n        }\n        if (ignoreElements[name]) {\n          text += ' ';\n          return;\n        }\n        if (node.type === 3) {\n          text += node.value;\n        }\n        if (!node.shortEnded) {\n          if (node = node.firstChild) {\n            do {\n              walk(node);\n            } while (node = node.next);\n          }\n        }\n        if (blockElements[name] && currentNode.next) {\n          text += '\\n';\n          if (name === 'p') {\n            text += '\\n';\n          }\n        }\n      }\n      html = filter(html, [/<!\\[[^\\]]+\\]>/g]);\n      walk(domParser.parse(html));\n      return text;\n    }\n    function trimHtml(html) {\n      function trimSpaces(all, s1, s2) {\n        if (!s1 && !s2) {\n          return ' ';\n        }\n        return '\\xA0';\n      }\n      html = filter(html, [\n        /^[\\s\\S]*<body[^>]*>\\s*|\\s*<\\/body[^>]*>[\\s\\S]*$/ig,\n        /<!--StartFragment-->|<!--EndFragment-->/g,\n        [\n          /( ?)<span class=\"Apple-converted-space\">\\u00a0<\\/span>( ?)/g,\n          trimSpaces\n        ],\n        /<br class=\"Apple-interchange-newline\">/g,\n        /<br>$/i\n      ]);\n      return html;\n    }\n    function createIdGenerator(prefix) {\n      var count = 0;\n      return function () {\n        return prefix + count++;\n      };\n    }\n    var isMsEdge = function () {\n      return domGlobals.navigator.userAgent.indexOf(' Edge/') !== -1;\n    };\n    var Utils = {\n      filter: filter,\n      innerText: innerText,\n      trimHtml: trimHtml,\n      createIdGenerator: createIdGenerator,\n      isMsEdge: isMsEdge\n    };\n\n    function isWordContent(content) {\n      return /<font face=\"Times New Roman\"|class=\"?Mso|style=\"[^\"]*\\bmso-|style='[^'']*\\bmso-|w:WordDocument/i.test(content) || /class=\"OutlineElement/.test(content) || /id=\"?docs\\-internal\\-guid\\-/.test(content);\n    }\n    function isNumericList(text) {\n      var found, patterns;\n      patterns = [\n        /^[IVXLMCD]{1,2}\\.[ \\u00a0]/,\n        /^[ivxlmcd]{1,2}\\.[ \\u00a0]/,\n        /^[a-z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[A-Z]{1,2}[\\.\\)][ \\u00a0]/,\n        /^[0-9]+\\.[ \\u00a0]/,\n        /^[\\u3007\\u4e00\\u4e8c\\u4e09\\u56db\\u4e94\\u516d\\u4e03\\u516b\\u4e5d]+\\.[ \\u00a0]/,\n        /^[\\u58f1\\u5f10\\u53c2\\u56db\\u4f0d\\u516d\\u4e03\\u516b\\u4e5d\\u62fe]+\\.[ \\u00a0]/\n      ];\n      text = text.replace(/^[\\u00a0 ]+/, '');\n      global$4.each(patterns, function (pattern) {\n        if (pattern.test(text)) {\n          found = true;\n          return false;\n        }\n      });\n      return found;\n    }\n    function isBulletList(text) {\n      return /^[\\s\\u00a0]*[\\u2022\\u00b7\\u00a7\\u25CF]\\s*/.test(text);\n    }\n    function convertFakeListsToProperLists(node) {\n      var currentListNode, prevListNode, lastLevel = 1;\n      function getText(node) {\n        var txt = '';\n        if (node.type === 3) {\n          return node.value;\n        }\n        if (node = node.firstChild) {\n          do {\n            txt += getText(node);\n          } while (node = node.next);\n        }\n        return txt;\n      }\n      function trimListStart(node, regExp) {\n        if (node.type === 3) {\n          if (regExp.test(node.value)) {\n            node.value = node.value.replace(regExp, '');\n            return false;\n          }\n        }\n        if (node = node.firstChild) {\n          do {\n            if (!trimListStart(node, regExp)) {\n              return false;\n            }\n          } while (node = node.next);\n        }\n        return true;\n      }\n      function removeIgnoredNodes(node) {\n        if (node._listIgnore) {\n          node.remove();\n          return;\n        }\n        if (node = node.firstChild) {\n          do {\n            removeIgnoredNodes(node);\n          } while (node = node.next);\n        }\n      }\n      function convertParagraphToLi(paragraphNode, listName, start) {\n        var level = paragraphNode._listLevel || lastLevel;\n        if (level !== lastLevel) {\n          if (level < lastLevel) {\n            if (currentListNode) {\n              currentListNode = currentListNode.parent.parent;\n            }\n          } else {\n            prevListNode = currentListNode;\n            currentListNode = null;\n          }\n        }\n        if (!currentListNode || currentListNode.name !== listName) {\n          prevListNode = prevListNode || currentListNode;\n          currentListNode = new global$8(listName, 1);\n          if (start > 1) {\n            currentListNode.attr('start', '' + start);\n          }\n          paragraphNode.wrap(currentListNode);\n        } else {\n          currentListNode.append(paragraphNode);\n        }\n        paragraphNode.name = 'li';\n        if (level > lastLevel && prevListNode) {\n          prevListNode.lastChild.append(currentListNode);\n        }\n        lastLevel = level;\n        removeIgnoredNodes(paragraphNode);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n        trimListStart(paragraphNode, /^\\s*([\\u2022\\u00b7\\u00a7\\u25CF]|\\w+\\.)/);\n        trimListStart(paragraphNode, /^\\u00a0+/);\n      }\n      var elements = [];\n      var child = node.firstChild;\n      while (typeof child !== 'undefined' && child !== null) {\n        elements.push(child);\n        child = child.walk();\n        if (child !== null) {\n          while (typeof child !== 'undefined' && child.parent !== node) {\n            child = child.walk();\n          }\n        }\n      }\n      for (var i = 0; i < elements.length; i++) {\n        node = elements[i];\n        if (node.name === 'p' && node.firstChild) {\n          var nodeText = getText(node);\n          if (isBulletList(nodeText)) {\n            convertParagraphToLi(node, 'ul');\n            continue;\n          }\n          if (isNumericList(nodeText)) {\n            var matches = /([0-9]+)\\./.exec(nodeText);\n            var start = 1;\n            if (matches) {\n              start = parseInt(matches[1], 10);\n            }\n            convertParagraphToLi(node, 'ol', start);\n            continue;\n          }\n          if (node._listLevel) {\n            convertParagraphToLi(node, 'ul', 1);\n            continue;\n          }\n          currentListNode = null;\n        } else {\n          prevListNode = currentListNode;\n          currentListNode = null;\n        }\n      }\n    }\n    function filterStyles(editor, validStyles, node, styleValue) {\n      var outputStyles = {}, matches;\n      var styles = editor.dom.parseStyle(styleValue);\n      global$4.each(styles, function (value, name) {\n        switch (name) {\n        case 'mso-list':\n          matches = /\\w+ \\w+([0-9]+)/i.exec(styleValue);\n          if (matches) {\n            node._listLevel = parseInt(matches[1], 10);\n          }\n          if (/Ignore/i.test(value) && node.firstChild) {\n            node._listIgnore = true;\n            node.firstChild._listIgnore = true;\n          }\n          break;\n        case 'horiz-align':\n          name = 'text-align';\n          break;\n        case 'vert-align':\n          name = 'vertical-align';\n          break;\n        case 'font-color':\n        case 'mso-foreground':\n          name = 'color';\n          break;\n        case 'mso-background':\n        case 'mso-highlight':\n          name = 'background';\n          break;\n        case 'font-weight':\n        case 'font-style':\n          if (value !== 'normal') {\n            outputStyles[name] = value;\n          }\n          return;\n        case 'mso-element':\n          if (/^(comment|comment-list)$/i.test(value)) {\n            node.remove();\n            return;\n          }\n          break;\n        }\n        if (name.indexOf('mso-comment') === 0) {\n          node.remove();\n          return;\n        }\n        if (name.indexOf('mso-') === 0) {\n          return;\n        }\n        if (Settings.getRetainStyleProps(editor) === 'all' || validStyles && validStyles[name]) {\n          outputStyles[name] = value;\n        }\n      });\n      if (/(bold)/i.test(outputStyles['font-weight'])) {\n        delete outputStyles['font-weight'];\n        node.wrap(new global$8('b', 1));\n      }\n      if (/(italic)/i.test(outputStyles['font-style'])) {\n        delete outputStyles['font-style'];\n        node.wrap(new global$8('i', 1));\n      }\n      outputStyles = editor.dom.serializeStyle(outputStyles, node.name);\n      if (outputStyles) {\n        return outputStyles;\n      }\n      return null;\n    }\n    var filterWordContent = function (editor, content) {\n      var retainStyleProperties, validStyles;\n      retainStyleProperties = Settings.getRetainStyleProps(editor);\n      if (retainStyleProperties) {\n        validStyles = global$4.makeMap(retainStyleProperties.split(/[, ]/));\n      }\n      content = Utils.filter(content, [\n        /<br class=\"?Apple-interchange-newline\"?>/gi,\n        /<b[^>]+id=\"?docs-internal-[^>]*>/gi,\n        /<!--[\\s\\S]+?-->/gi,\n        /<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|img|meta|link|style|\\w:\\w+)(?=[\\s\\/>]))[^>]*>/gi,\n        [\n          /<(\\/?)s>/gi,\n          '<$1strike>'\n        ],\n        [\n          /&nbsp;/gi,\n          '\\xA0'\n        ],\n        [\n          /<span\\s+style\\s*=\\s*\"\\s*mso-spacerun\\s*:\\s*yes\\s*;?\\s*\"\\s*>([\\s\\u00a0]*)<\\/span>/gi,\n          function (str, spaces) {\n            return spaces.length > 0 ? spaces.replace(/./, ' ').slice(Math.floor(spaces.length / 2)).split('').join('\\xA0') : '';\n          }\n        ]\n      ]);\n      var validElements = Settings.getWordValidElements(editor);\n      var schema = global$9({\n        valid_elements: validElements,\n        valid_children: '-li[p]'\n      });\n      global$4.each(schema.elements, function (rule) {\n        if (!rule.attributes.class) {\n          rule.attributes.class = {};\n          rule.attributesOrder.push('class');\n        }\n        if (!rule.attributes.style) {\n          rule.attributes.style = {};\n          rule.attributesOrder.push('style');\n        }\n      });\n      var domParser = global$7({}, schema);\n      domParser.addAttributeFilter('style', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('style', filterStyles(editor, validStyles, node, node.attr('style')));\n          if (node.name === 'span' && node.parent && !node.attributes.length) {\n            node.unwrap();\n          }\n        }\n      });\n      domParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, className;\n        while (i--) {\n          node = nodes[i];\n          className = node.attr('class');\n          if (/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(className)) {\n            node.remove();\n          }\n          node.attr('class', null);\n        }\n      });\n      domParser.addNodeFilter('del', function (nodes) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].remove();\n        }\n      });\n      domParser.addNodeFilter('a', function (nodes) {\n        var i = nodes.length, node, href, name;\n        while (i--) {\n          node = nodes[i];\n          href = node.attr('href');\n          name = node.attr('name');\n          if (href && href.indexOf('#_msocom_') !== -1) {\n            node.remove();\n            continue;\n          }\n          if (href && href.indexOf('file://') === 0) {\n            href = href.split('#')[1];\n            if (href) {\n              href = '#' + href;\n            }\n          }\n          if (!href && !name) {\n            node.unwrap();\n          } else {\n            if (name && !/^_?(?:toc|edn|ftn)/i.test(name)) {\n              node.unwrap();\n              continue;\n            }\n            node.attr({\n              href: href,\n              name: name\n            });\n          }\n        }\n      });\n      var rootNode = domParser.parse(content);\n      if (Settings.shouldConvertWordFakeLists(editor)) {\n        convertFakeListsToProperLists(rootNode);\n      }\n      content = global$a({ validate: editor.settings.validate }, schema).serialize(rootNode);\n      return content;\n    };\n    var preProcess = function (editor, content) {\n      return Settings.shouldUseDefaultFilters(editor) ? filterWordContent(editor, content) : content;\n    };\n    var WordFilter = {\n      preProcess: preProcess,\n      isWordContent: isWordContent\n    };\n\n    var processResult = function (content, cancelled) {\n      return {\n        content: content,\n        cancelled: cancelled\n      };\n    };\n    var postProcessFilter = function (editor, html, internal, isWordHtml) {\n      var tempBody = editor.dom.create('div', { style: 'display:none' }, html);\n      var postProcessArgs = Events.firePastePostProcess(editor, tempBody, internal, isWordHtml);\n      return processResult(postProcessArgs.node.innerHTML, postProcessArgs.isDefaultPrevented());\n    };\n    var filterContent = function (editor, content, internal, isWordHtml) {\n      var preProcessArgs = Events.firePastePreProcess(editor, content, internal, isWordHtml);\n      if (editor.hasEventListeners('PastePostProcess') && !preProcessArgs.isDefaultPrevented()) {\n        return postProcessFilter(editor, preProcessArgs.content, internal, isWordHtml);\n      } else {\n        return processResult(preProcessArgs.content, preProcessArgs.isDefaultPrevented());\n      }\n    };\n    var process = function (editor, html, internal) {\n      var isWordHtml = WordFilter.isWordContent(html);\n      var content = isWordHtml ? WordFilter.preProcess(editor, html) : html;\n      return filterContent(editor, content, internal, isWordHtml);\n    };\n    var ProcessFilters = { process: process };\n\n    var removeMeta = function (editor, html) {\n      var body = editor.dom.create('body', {}, html);\n      global$4.each(body.querySelectorAll('meta'), function (elm) {\n        return elm.parentNode.removeChild(elm);\n      });\n      return body.innerHTML;\n    };\n    var pasteHtml = function (editor, html) {\n      editor.insertContent(removeMeta(editor, html), {\n        merge: Settings.shouldMergeFormats(editor),\n        paste: true\n      });\n      return true;\n    };\n    var isAbsoluteUrl = function (url) {\n      return /^https?:\\/\\/[\\w\\?\\-\\/+=.&%@~#]+$/i.test(url);\n    };\n    var isImageUrl = function (url) {\n      return isAbsoluteUrl(url) && /.(gif|jpe?g|png)$/.test(url);\n    };\n    var createImage = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.insertContent('<img src=\"' + url + '\">');\n      });\n      return true;\n    };\n    var createLink = function (editor, url, pasteHtmlFn) {\n      editor.undoManager.extra(function () {\n        pasteHtmlFn(editor, url);\n      }, function () {\n        editor.execCommand('mceInsertLink', false, url);\n      });\n      return true;\n    };\n    var linkSelection = function (editor, html, pasteHtmlFn) {\n      return editor.selection.isCollapsed() === false && isAbsoluteUrl(html) ? createLink(editor, html, pasteHtmlFn) : false;\n    };\n    var insertImage = function (editor, html, pasteHtmlFn) {\n      return isImageUrl(html) ? createImage(editor, html, pasteHtmlFn) : false;\n    };\n    var smartInsertContent = function (editor, html) {\n      global$4.each([\n        linkSelection,\n        insertImage,\n        pasteHtml\n      ], function (action) {\n        return action(editor, html, pasteHtml) !== true;\n      });\n    };\n    var insertContent = function (editor, html) {\n      if (Settings.isSmartPasteEnabled(editor) === false) {\n        pasteHtml(editor, html);\n      } else {\n        smartInsertContent(editor, html);\n      }\n    };\n    var SmartPaste = {\n      isImageUrl: isImageUrl,\n      isAbsoluteUrl: isAbsoluteUrl,\n      insertContent: insertContent\n    };\n\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isFunction = isType('function');\n\n    var slice = Array.prototype.slice;\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var filter$1 = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var exports$1 = {}, module = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module, undefined));\n    var Promise = module.exports.boltExport;\n\n    var nu = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$1 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$1,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n    var mapM = function (array, fn) {\n      var futures = map(array, fn);\n      return par$1(futures);\n    };\n\n    var value = function () {\n      var subject = Cell(Option.none());\n      var clear = function () {\n        subject.set(Option.none());\n      };\n      var set = function (s) {\n        subject.set(Option.some(s));\n      };\n      var on = function (f) {\n        subject.get().each(f);\n      };\n      var isSet = function () {\n        return subject.get().isSome();\n      };\n      return {\n        clear: clear,\n        set: set,\n        isSet: isSet,\n        on: on\n      };\n    };\n\n    var pasteHtml$1 = function (editor, html, internalFlag) {\n      var internal = internalFlag ? internalFlag : InternalHtml.isMarked(html);\n      var args = ProcessFilters.process(editor, InternalHtml.unmark(html), internal);\n      if (args.cancelled === false) {\n        SmartPaste.insertContent(editor, args.content);\n      }\n    };\n    var pasteText = function (editor, text) {\n      text = editor.dom.encode(text).replace(/\\r\\n/g, '\\n');\n      text = Newlines.convert(text, editor.settings.forced_root_block, editor.settings.forced_root_block_attrs);\n      pasteHtml$1(editor, text, false);\n    };\n    var getDataTransferItems = function (dataTransfer) {\n      var items = {};\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      if (dataTransfer) {\n        if (dataTransfer.getData) {\n          var legacyText = dataTransfer.getData('Text');\n          if (legacyText && legacyText.length > 0) {\n            if (legacyText.indexOf(mceInternalUrlPrefix) === -1) {\n              items['text/plain'] = legacyText;\n            }\n          }\n        }\n        if (dataTransfer.types) {\n          for (var i = 0; i < dataTransfer.types.length; i++) {\n            var contentType = dataTransfer.types[i];\n            try {\n              items[contentType] = dataTransfer.getData(contentType);\n            } catch (ex) {\n              items[contentType] = '';\n            }\n          }\n        }\n      }\n      return items;\n    };\n    var getClipboardContent = function (editor, clipboardEvent) {\n      var content = getDataTransferItems(clipboardEvent.clipboardData || editor.getDoc().dataTransfer);\n      return Utils.isMsEdge() ? global$4.extend(content, { 'text/html': '' }) : content;\n    };\n    var hasContentType = function (clipboardContent, mimeType) {\n      return mimeType in clipboardContent && clipboardContent[mimeType].length > 0;\n    };\n    var hasHtmlOrText = function (content) {\n      return hasContentType(content, 'text/html') || hasContentType(content, 'text/plain');\n    };\n    var getBase64FromUri = function (uri) {\n      var idx;\n      idx = uri.indexOf(',');\n      if (idx !== -1) {\n        return uri.substr(idx + 1);\n      }\n      return null;\n    };\n    var isValidDataUriImage = function (settings, imgElm) {\n      return settings.images_dataimg_filter ? settings.images_dataimg_filter(imgElm) : true;\n    };\n    var extractFilename = function (editor, str) {\n      var m = str.match(/([\\s\\S]+?)\\.(?:jpeg|jpg|png|gif)$/i);\n      return m ? editor.dom.encode(m[1]) : null;\n    };\n    var uniqueId = Utils.createIdGenerator('mceclip');\n    var pasteImage = function (editor, imageItem) {\n      var base64 = getBase64FromUri(imageItem.uri);\n      var id = uniqueId();\n      var name = editor.settings.images_reuse_filename && imageItem.blob.name ? extractFilename(editor, imageItem.blob.name) : id;\n      var img = new domGlobals.Image();\n      img.src = imageItem.uri;\n      if (isValidDataUriImage(editor.settings, img)) {\n        var blobCache = editor.editorUpload.blobCache;\n        var blobInfo = void 0, existingBlobInfo = void 0;\n        existingBlobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.base64() === base64;\n        });\n        if (!existingBlobInfo) {\n          blobInfo = blobCache.create(id, imageItem.blob, base64, name);\n          blobCache.add(blobInfo);\n        } else {\n          blobInfo = existingBlobInfo;\n        }\n        pasteHtml$1(editor, '<img src=\"' + blobInfo.blobUri() + '\">', false);\n      } else {\n        pasteHtml$1(editor, '<img src=\"' + imageItem.uri + '\">', false);\n      }\n    };\n    var isClipboardEvent = function (event) {\n      return event.type === 'paste';\n    };\n    var readBlobsAsDataUris = function (items) {\n      return mapM(items, function (item) {\n        return Future.nu(function (resolve) {\n          var blob = item.getAsFile ? item.getAsFile() : item;\n          var reader = new window.FileReader();\n          reader.onload = function () {\n            resolve({\n              blob: blob,\n              uri: reader.result\n            });\n          };\n          reader.readAsDataURL(blob);\n        });\n      });\n    };\n    var getImagesFromDataTransfer = function (dataTransfer) {\n      var items = dataTransfer.items ? map(from$1(dataTransfer.items), function (item) {\n        return item.getAsFile();\n      }) : [];\n      var files = dataTransfer.files ? from$1(dataTransfer.files) : [];\n      var images = filter$1(items.length > 0 ? items : files, function (file) {\n        return /^image\\/(jpeg|png|gif|bmp)$/.test(file.type);\n      });\n      return images;\n    };\n    var pasteImageData = function (editor, e, rng) {\n      var dataTransfer = isClipboardEvent(e) ? e.clipboardData : e.dataTransfer;\n      if (editor.settings.paste_data_images && dataTransfer) {\n        var images = getImagesFromDataTransfer(dataTransfer);\n        if (images.length > 0) {\n          e.preventDefault();\n          readBlobsAsDataUris(images).get(function (blobResults) {\n            if (rng) {\n              editor.selection.setRng(rng);\n            }\n            each(blobResults, function (result) {\n              pasteImage(editor, result);\n            });\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n    var isBrokenAndroidClipboardEvent = function (e) {\n      var clipboardData = e.clipboardData;\n      return domGlobals.navigator.userAgent.indexOf('Android') !== -1 && clipboardData && clipboardData.items && clipboardData.items.length === 0;\n    };\n    var isKeyboardPasteEvent = function (e) {\n      return global$5.metaKeyPressed(e) && e.keyCode === 86 || e.shiftKey && e.keyCode === 45;\n    };\n    var registerEventHandlers = function (editor, pasteBin, pasteFormat) {\n      var keyboardPasteEvent = value();\n      var keyboardPastePlainTextState;\n      editor.on('keydown', function (e) {\n        function removePasteBinOnKeyUp(e) {\n          if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n            pasteBin.remove();\n          }\n        }\n        if (isKeyboardPasteEvent(e) && !e.isDefaultPrevented()) {\n          keyboardPastePlainTextState = e.shiftKey && e.keyCode === 86;\n          if (keyboardPastePlainTextState && global$2.webkit && domGlobals.navigator.userAgent.indexOf('Version/') !== -1) {\n            return;\n          }\n          e.stopImmediatePropagation();\n          keyboardPasteEvent.set(e);\n          window.setTimeout(function () {\n            keyboardPasteEvent.clear();\n          }, 100);\n          if (global$2.ie && keyboardPastePlainTextState) {\n            e.preventDefault();\n            Events.firePaste(editor, true);\n            return;\n          }\n          pasteBin.remove();\n          pasteBin.create();\n          editor.once('keyup', removePasteBinOnKeyUp);\n          editor.once('paste', function () {\n            editor.off('keyup', removePasteBinOnKeyUp);\n          });\n        }\n      });\n      function insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal) {\n        var content, isPlainTextHtml;\n        if (hasContentType(clipboardContent, 'text/html')) {\n          content = clipboardContent['text/html'];\n        } else {\n          content = pasteBin.getHtml();\n          internal = internal ? internal : InternalHtml.isMarked(content);\n          if (pasteBin.isDefaultContent(content)) {\n            plainTextMode = true;\n          }\n        }\n        content = Utils.trimHtml(content);\n        pasteBin.remove();\n        isPlainTextHtml = internal === false && Newlines.isPlainText(content);\n        if (!content.length || isPlainTextHtml) {\n          plainTextMode = true;\n        }\n        if (plainTextMode) {\n          if (hasContentType(clipboardContent, 'text/plain') && isPlainTextHtml) {\n            content = clipboardContent['text/plain'];\n          } else {\n            content = Utils.innerText(content);\n          }\n        }\n        if (pasteBin.isDefaultContent(content)) {\n          if (!isKeyBoardPaste) {\n            editor.windowManager.alert('Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents.');\n          }\n          return;\n        }\n        if (plainTextMode) {\n          pasteText(editor, content);\n        } else {\n          pasteHtml$1(editor, content, internal);\n        }\n      }\n      var getLastRng = function () {\n        return pasteBin.getLastRng() || editor.selection.getRng();\n      };\n      editor.on('paste', function (e) {\n        var isKeyBoardPaste = keyboardPasteEvent.isSet();\n        var clipboardContent = getClipboardContent(editor, e);\n        var plainTextMode = pasteFormat.get() === 'text' || keyboardPastePlainTextState;\n        var internal = hasContentType(clipboardContent, InternalHtml.internalHtmlMime());\n        keyboardPastePlainTextState = false;\n        if (e.isDefaultPrevented() || isBrokenAndroidClipboardEvent(e)) {\n          pasteBin.remove();\n          return;\n        }\n        if (!hasHtmlOrText(clipboardContent) && pasteImageData(editor, e, getLastRng())) {\n          pasteBin.remove();\n          return;\n        }\n        if (!isKeyBoardPaste) {\n          e.preventDefault();\n        }\n        if (global$2.ie && (!isKeyBoardPaste || e.ieFake) && !hasContentType(clipboardContent, 'text/html')) {\n          pasteBin.create();\n          editor.dom.bind(pasteBin.getEl(), 'paste', function (e) {\n            e.stopPropagation();\n          });\n          editor.getDoc().execCommand('Paste', false, null);\n          clipboardContent['text/html'] = pasteBin.getHtml();\n        }\n        if (hasContentType(clipboardContent, 'text/html')) {\n          e.preventDefault();\n          if (!internal) {\n            internal = InternalHtml.isMarked(clipboardContent['text/html']);\n          }\n          insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n        } else {\n          global$3.setEditorTimeout(editor, function () {\n            insertClipboardContent(clipboardContent, isKeyBoardPaste, plainTextMode, internal);\n          }, 0);\n        }\n      });\n    };\n    var registerEventsAndFilters = function (editor, pasteBin, pasteFormat) {\n      registerEventHandlers(editor, pasteBin, pasteFormat);\n      var src;\n      editor.parser.addNodeFilter('img', function (nodes, name, args) {\n        var isPasteInsert = function (args) {\n          return args.data && args.data.paste === true;\n        };\n        var remove = function (node) {\n          if (!node.attr('data-mce-object') && src !== global$2.transparentSrc) {\n            node.remove();\n          }\n        };\n        var isWebKitFakeUrl = function (src) {\n          return src.indexOf('webkit-fake-url') === 0;\n        };\n        var isDataUri = function (src) {\n          return src.indexOf('data:') === 0;\n        };\n        if (!editor.settings.paste_data_images && isPasteInsert(args)) {\n          var i = nodes.length;\n          while (i--) {\n            src = nodes[i].attributes.map.src;\n            if (!src) {\n              continue;\n            }\n            if (isWebKitFakeUrl(src)) {\n              remove(nodes[i]);\n            } else if (!editor.settings.allow_html_data_urls && isDataUri(src)) {\n              remove(nodes[i]);\n            }\n          }\n        }\n      });\n    };\n\n    var getPasteBinParent = function (editor) {\n      return global$2.ie && editor.inline ? domGlobals.document.body : editor.getBody();\n    };\n    var isExternalPasteBin = function (editor) {\n      return getPasteBinParent(editor) !== editor.getBody();\n    };\n    var delegatePasteEvents = function (editor, pasteBinElm, pasteBinDefaultContent) {\n      if (isExternalPasteBin(editor)) {\n        editor.dom.bind(pasteBinElm, 'paste keyup', function (e) {\n          if (!isDefault(editor, pasteBinDefaultContent)) {\n            editor.fire('paste');\n          }\n        });\n      }\n    };\n    var create = function (editor, lastRngCell, pasteBinDefaultContent) {\n      var dom = editor.dom, body = editor.getBody();\n      var pasteBinElm;\n      lastRngCell.set(editor.selection.getRng());\n      pasteBinElm = editor.dom.add(getPasteBinParent(editor), 'div', {\n        'id': 'mcepastebin',\n        'class': 'mce-pastebin',\n        'contentEditable': true,\n        'data-mce-bogus': 'all',\n        'style': 'position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0'\n      }, pasteBinDefaultContent);\n      if (global$2.ie || global$2.gecko) {\n        dom.setStyle(pasteBinElm, 'left', dom.getStyle(body, 'direction', true) === 'rtl' ? 65535 : -65535);\n      }\n      dom.bind(pasteBinElm, 'beforedeactivate focusin focusout', function (e) {\n        e.stopPropagation();\n      });\n      delegatePasteEvents(editor, pasteBinElm, pasteBinDefaultContent);\n      pasteBinElm.focus();\n      editor.selection.select(pasteBinElm, true);\n    };\n    var remove = function (editor, lastRngCell) {\n      if (getEl(editor)) {\n        var pasteBinClone = void 0;\n        var lastRng = lastRngCell.get();\n        while (pasteBinClone = editor.dom.get('mcepastebin')) {\n          editor.dom.remove(pasteBinClone);\n          editor.dom.unbind(pasteBinClone);\n        }\n        if (lastRng) {\n          editor.selection.setRng(lastRng);\n        }\n      }\n      lastRngCell.set(null);\n    };\n    var getEl = function (editor) {\n      return editor.dom.get('mcepastebin');\n    };\n    var getHtml = function (editor) {\n      var pasteBinElm, pasteBinClones, i, dirtyWrappers, cleanWrapper;\n      var copyAndRemove = function (toElm, fromElm) {\n        toElm.appendChild(fromElm);\n        editor.dom.remove(fromElm, true);\n      };\n      pasteBinClones = global$4.grep(getPasteBinParent(editor).childNodes, function (elm) {\n        return elm.id === 'mcepastebin';\n      });\n      pasteBinElm = pasteBinClones.shift();\n      global$4.each(pasteBinClones, function (pasteBinClone) {\n        copyAndRemove(pasteBinElm, pasteBinClone);\n      });\n      dirtyWrappers = editor.dom.select('div[id=mcepastebin]', pasteBinElm);\n      for (i = dirtyWrappers.length - 1; i >= 0; i--) {\n        cleanWrapper = editor.dom.create('div');\n        pasteBinElm.insertBefore(cleanWrapper, dirtyWrappers[i]);\n        copyAndRemove(cleanWrapper, dirtyWrappers[i]);\n      }\n      return pasteBinElm ? pasteBinElm.innerHTML : '';\n    };\n    var getLastRng = function (lastRng) {\n      return lastRng.get();\n    };\n    var isDefaultContent = function (pasteBinDefaultContent, content) {\n      return content === pasteBinDefaultContent;\n    };\n    var isPasteBin = function (elm) {\n      return elm && elm.id === 'mcepastebin';\n    };\n    var isDefault = function (editor, pasteBinDefaultContent) {\n      var pasteBinElm = getEl(editor);\n      return isPasteBin(pasteBinElm) && isDefaultContent(pasteBinDefaultContent, pasteBinElm.innerHTML);\n    };\n    var PasteBin = function (editor) {\n      var lastRng = Cell(null);\n      var pasteBinDefaultContent = '%MCEPASTEBIN%';\n      return {\n        create: function () {\n          return create(editor, lastRng, pasteBinDefaultContent);\n        },\n        remove: function () {\n          return remove(editor, lastRng);\n        },\n        getEl: function () {\n          return getEl(editor);\n        },\n        getHtml: function () {\n          return getHtml(editor);\n        },\n        getLastRng: function () {\n          return getLastRng(lastRng);\n        },\n        isDefault: function () {\n          return isDefault(editor, pasteBinDefaultContent);\n        },\n        isDefaultContent: function (content) {\n          return isDefaultContent(pasteBinDefaultContent, content);\n        }\n      };\n    };\n\n    var Clipboard = function (editor, pasteFormat) {\n      var pasteBin = PasteBin(editor);\n      editor.on('preInit', function () {\n        return registerEventsAndFilters(editor, pasteBin, pasteFormat);\n      });\n      return {\n        pasteFormat: pasteFormat,\n        pasteHtml: function (html, internalFlag) {\n          return pasteHtml$1(editor, html, internalFlag);\n        },\n        pasteText: function (text) {\n          return pasteText(editor, text);\n        },\n        pasteImageData: function (e, rng) {\n          return pasteImageData(editor, e, rng);\n        },\n        getDataTransferItems: getDataTransferItems,\n        hasHtmlOrText: hasHtmlOrText,\n        hasContentType: hasContentType\n      };\n    };\n\n    var noop = function () {\n    };\n    var hasWorkingClipboardApi = function (clipboardData) {\n      return global$2.iOS === false && clipboardData !== undefined && typeof clipboardData.setData === 'function' && Utils.isMsEdge() !== true;\n    };\n    var setHtml5Clipboard = function (clipboardData, html, text) {\n      if (hasWorkingClipboardApi(clipboardData)) {\n        try {\n          clipboardData.clearData();\n          clipboardData.setData('text/html', html);\n          clipboardData.setData('text/plain', text);\n          clipboardData.setData(InternalHtml.internalHtmlMime(), html);\n          return true;\n        } catch (e) {\n          return false;\n        }\n      } else {\n        return false;\n      }\n    };\n    var setClipboardData = function (evt, data, fallback, done) {\n      if (setHtml5Clipboard(evt.clipboardData, data.html, data.text)) {\n        evt.preventDefault();\n        done();\n      } else {\n        fallback(data.html, done);\n      }\n    };\n    var fallback = function (editor) {\n      return function (html, done) {\n        var markedHtml = InternalHtml.mark(html);\n        var outer = editor.dom.create('div', {\n          'contenteditable': 'false',\n          'data-mce-bogus': 'all'\n        });\n        var inner = editor.dom.create('div', { contenteditable: 'true' }, markedHtml);\n        editor.dom.setStyles(outer, {\n          position: 'fixed',\n          top: '0',\n          left: '-3000px',\n          width: '1000px',\n          overflow: 'hidden'\n        });\n        outer.appendChild(inner);\n        editor.dom.add(editor.getBody(), outer);\n        var range = editor.selection.getRng();\n        inner.focus();\n        var offscreenRange = editor.dom.createRng();\n        offscreenRange.selectNodeContents(inner);\n        editor.selection.setRng(offscreenRange);\n        setTimeout(function () {\n          editor.selection.setRng(range);\n          outer.parentNode.removeChild(outer);\n          done();\n        }, 0);\n      };\n    };\n    var getData = function (editor) {\n      return {\n        html: editor.selection.getContent({ contextual: true }),\n        text: editor.selection.getContent({ format: 'text' })\n      };\n    };\n    var isTableSelection = function (editor) {\n      return !!editor.dom.getParent(editor.selection.getStart(), 'td[data-mce-selected],th[data-mce-selected]', editor.getBody());\n    };\n    var hasSelectedContent = function (editor) {\n      return !editor.selection.isCollapsed() || isTableSelection(editor);\n    };\n    var cut = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), function () {\n            setTimeout(function () {\n              editor.execCommand('Delete');\n            }, 0);\n          });\n        }\n      };\n    };\n    var copy = function (editor) {\n      return function (evt) {\n        if (hasSelectedContent(editor)) {\n          setClipboardData(evt, getData(editor), fallback(editor), noop);\n        }\n      };\n    };\n    var register$1 = function (editor) {\n      editor.on('cut', cut(editor));\n      editor.on('copy', copy(editor));\n    };\n    var CutCopy = { register: register$1 };\n\n    var global$b = tinymce.util.Tools.resolve('tinymce.dom.RangeUtils');\n\n    var getCaretRangeFromEvent = function (editor, e) {\n      return global$b.getCaretRangeFromPoint(e.clientX, e.clientY, editor.getDoc());\n    };\n    var isPlainTextFileUrl = function (content) {\n      var plainTextContent = content['text/plain'];\n      return plainTextContent ? plainTextContent.indexOf('file://') === 0 : false;\n    };\n    var setFocusedRange = function (editor, rng) {\n      editor.focus();\n      editor.selection.setRng(rng);\n    };\n    var setup = function (editor, clipboard, draggingInternallyState) {\n      if (Settings.shouldBlockDrop(editor)) {\n        editor.on('dragend dragover draggesture dragdrop drop drag', function (e) {\n          e.preventDefault();\n          e.stopPropagation();\n        });\n      }\n      if (!Settings.shouldPasteDataImages(editor)) {\n        editor.on('drop', function (e) {\n          var dataTransfer = e.dataTransfer;\n          if (dataTransfer && dataTransfer.files && dataTransfer.files.length > 0) {\n            e.preventDefault();\n          }\n        });\n      }\n      editor.on('drop', function (e) {\n        var dropContent, rng;\n        rng = getCaretRangeFromEvent(editor, e);\n        if (e.isDefaultPrevented() || draggingInternallyState.get()) {\n          return;\n        }\n        dropContent = clipboard.getDataTransferItems(e.dataTransfer);\n        var internal = clipboard.hasContentType(dropContent, InternalHtml.internalHtmlMime());\n        if ((!clipboard.hasHtmlOrText(dropContent) || isPlainTextFileUrl(dropContent)) && clipboard.pasteImageData(e, rng)) {\n          return;\n        }\n        if (rng && Settings.shouldFilterDrop(editor)) {\n          var content_1 = dropContent['mce-internal'] || dropContent['text/html'] || dropContent['text/plain'];\n          if (content_1) {\n            e.preventDefault();\n            global$3.setEditorTimeout(editor, function () {\n              editor.undoManager.transact(function () {\n                if (dropContent['mce-internal']) {\n                  editor.execCommand('Delete');\n                }\n                setFocusedRange(editor, rng);\n                content_1 = Utils.trimHtml(content_1);\n                if (!dropContent['text/html']) {\n                  clipboard.pasteText(content_1);\n                } else {\n                  clipboard.pasteHtml(content_1, internal);\n                }\n              });\n            });\n          }\n        }\n      });\n      editor.on('dragstart', function (e) {\n        draggingInternallyState.set(true);\n      });\n      editor.on('dragover dragend', function (e) {\n        if (Settings.shouldPasteDataImages(editor) && draggingInternallyState.get() === false) {\n          e.preventDefault();\n          setFocusedRange(editor, getCaretRangeFromEvent(editor, e));\n        }\n        if (e.type === 'dragend') {\n          draggingInternallyState.set(false);\n        }\n      });\n    };\n    var DragDrop = { setup: setup };\n\n    var setup$1 = function (editor) {\n      var plugin = editor.plugins.paste;\n      var preProcess = Settings.getPreProcess(editor);\n      if (preProcess) {\n        editor.on('PastePreProcess', function (e) {\n          preProcess.call(plugin, plugin, e);\n        });\n      }\n      var postProcess = Settings.getPostProcess(editor);\n      if (postProcess) {\n        editor.on('PastePostProcess', function (e) {\n          postProcess.call(plugin, plugin, e);\n        });\n      }\n    };\n    var PrePostProcess = { setup: setup$1 };\n\n    function addPreProcessFilter(editor, filterFunc) {\n      editor.on('PastePreProcess', function (e) {\n        e.content = filterFunc(editor, e.content, e.internal, e.wordContent);\n      });\n    }\n    function addPostProcessFilter(editor, filterFunc) {\n      editor.on('PastePostProcess', function (e) {\n        filterFunc(editor, e.node);\n      });\n    }\n    function removeExplorerBrElementsAfterBlocks(editor, html) {\n      if (!WordFilter.isWordContent(html)) {\n        return html;\n      }\n      var blockElements = [];\n      global$4.each(editor.schema.getBlockElements(), function (block, blockName) {\n        blockElements.push(blockName);\n      });\n      var explorerBlocksRegExp = new RegExp('(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*(<\\\\/?(' + blockElements.join('|') + ')[^>]*>)(?:<br>&nbsp;[\\\\s\\\\r\\\\n]+|<br>)*', 'g');\n      html = Utils.filter(html, [[\n          explorerBlocksRegExp,\n          '$1'\n        ]]);\n      html = Utils.filter(html, [\n        [\n          /<br><br>/g,\n          '<BR><BR>'\n        ],\n        [\n          /<br>/g,\n          ' '\n        ],\n        [\n          /<BR><BR>/g,\n          '<br>'\n        ]\n      ]);\n      return html;\n    }\n    function removeWebKitStyles(editor, content, internal, isWordHtml) {\n      if (isWordHtml || internal) {\n        return content;\n      }\n      var webKitStylesSetting = Settings.getWebkitStyles(editor);\n      var webKitStyles;\n      if (Settings.shouldRemoveWebKitStyles(editor) === false || webKitStylesSetting === 'all') {\n        return content;\n      }\n      if (webKitStylesSetting) {\n        webKitStyles = webKitStylesSetting.split(/[, ]/);\n      }\n      if (webKitStyles) {\n        var dom_1 = editor.dom, node_1 = editor.selection.getNode();\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, function (all, before, value, after) {\n          var inputStyles = dom_1.parseStyle(dom_1.decode(value));\n          var outputStyles = {};\n          if (webKitStyles === 'none') {\n            return before + after;\n          }\n          for (var i = 0; i < webKitStyles.length; i++) {\n            var inputValue = inputStyles[webKitStyles[i]], currentValue = dom_1.getStyle(node_1, webKitStyles[i], true);\n            if (/color/.test(webKitStyles[i])) {\n              inputValue = dom_1.toHex(inputValue);\n              currentValue = dom_1.toHex(currentValue);\n            }\n            if (currentValue !== inputValue) {\n              outputStyles[webKitStyles[i]] = inputValue;\n            }\n          }\n          outputStyles = dom_1.serializeStyle(outputStyles, 'span');\n          if (outputStyles) {\n            return before + ' style=\"' + outputStyles + '\"' + after;\n          }\n          return before + after;\n        });\n      } else {\n        content = content.replace(/(<[^>]+) style=\"([^\"]*)\"([^>]*>)/gi, '$1$3');\n      }\n      content = content.replace(/(<[^>]+) data-mce-style=\"([^\"]+)\"([^>]*>)/gi, function (all, before, value, after) {\n        return before + ' style=\"' + value + '\"' + after;\n      });\n      return content;\n    }\n    function removeUnderlineAndFontInAnchor(editor, root) {\n      editor.$('a', root).find('font,u').each(function (i, node) {\n        editor.dom.remove(node, true);\n      });\n    }\n    var setup$2 = function (editor) {\n      if (global$2.webkit) {\n        addPreProcessFilter(editor, removeWebKitStyles);\n      }\n      if (global$2.ie) {\n        addPreProcessFilter(editor, removeExplorerBrElementsAfterBlocks);\n        addPostProcessFilter(editor, removeUnderlineAndFontInAnchor);\n      }\n    };\n    var Quirks = { setup: setup$2 };\n\n    var stateChange = function (editor, clipboard, e) {\n      var ctrl = e.control;\n      ctrl.active(clipboard.pasteFormat.get() === 'text');\n      editor.on('PastePlainTextToggle', function (e) {\n        ctrl.active(e.state);\n      });\n    };\n    var register$2 = function (editor, clipboard) {\n      var postRender = curry(stateChange, editor, clipboard);\n      editor.addButton('pastetext', {\n        active: false,\n        icon: 'pastetext',\n        tooltip: 'Paste as text',\n        cmd: 'mceTogglePlainTextPaste',\n        onPostRender: postRender\n      });\n      editor.addMenuItem('pastetext', {\n        text: 'Paste as text',\n        selectable: true,\n        active: clipboard.pasteFormat,\n        cmd: 'mceTogglePlainTextPaste',\n        onPostRender: postRender\n      });\n    };\n    var Buttons = { register: register$2 };\n\n    global$1.add('paste', function (editor) {\n      if (DetectProPlugin.hasProPlugin(editor) === false) {\n        var userIsInformedState = Cell(false);\n        var draggingInternallyState = Cell(false);\n        var pasteFormat = Cell(Settings.isPasteAsTextEnabled(editor) ? 'text' : 'html');\n        var clipboard = Clipboard(editor, pasteFormat);\n        var quirks = Quirks.setup(editor);\n        Buttons.register(editor, clipboard);\n        Commands.register(editor, clipboard, userIsInformedState);\n        PrePostProcess.setup(editor);\n        CutCopy.register(editor);\n        DragDrop.setup(editor, clipboard, draggingInternallyState);\n        return Api.get(clipboard, quirks);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=f624f8be&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=style&index=0&id=f624f8be&lang=less&scoped=true&\"","(function () {\nvar advlist = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var applyListFormat = function (editor, listName, styleValue) {\n      var cmd = listName === 'UL' ? 'InsertUnorderedList' : 'InsertOrderedList';\n      editor.execCommand(cmd, false, styleValue === false ? null : { 'list-style-type': styleValue });\n    };\n    var Actions = { applyListFormat: applyListFormat };\n\n    var register = function (editor) {\n      editor.addCommand('ApplyUnorderedListStyle', function (ui, value) {\n        Actions.applyListFormat(editor, 'UL', value['list-style-type']);\n      });\n      editor.addCommand('ApplyOrderedListStyle', function (ui, value) {\n        Actions.applyListFormat(editor, 'OL', value['list-style-type']);\n      });\n    };\n    var Commands = { register: register };\n\n    var getNumberStyles = function (editor) {\n      var styles = editor.getParam('advlist_number_styles', 'default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman');\n      return styles ? styles.split(/[ ,]/) : [];\n    };\n    var getBulletStyles = function (editor) {\n      var styles = editor.getParam('advlist_bullet_styles', 'default,circle,disc,square');\n      return styles ? styles.split(/[ ,]/) : [];\n    };\n    var Settings = {\n      getNumberStyles: getNumberStyles,\n      getBulletStyles: getBulletStyles\n    };\n\n    var isChildOfBody = function (editor, elm) {\n      return editor.$.contains(editor.getBody(), elm);\n    };\n    var isTableCellNode = function (node) {\n      return node && /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isListNode = function (editor) {\n      return function (node) {\n        return node && /^(OL|UL|DL)$/.test(node.nodeName) && isChildOfBody(editor, node);\n      };\n    };\n    var getSelectedStyleType = function (editor) {\n      var listElm = editor.dom.getParent(editor.selection.getNode(), 'ol,ul');\n      return editor.dom.getStyle(listElm, 'listStyleType') || '';\n    };\n    var ListUtils = {\n      isTableCellNode: isTableCellNode,\n      isListNode: isListNode,\n      getSelectedStyleType: getSelectedStyleType\n    };\n\n    var styleValueToText = function (styleValue) {\n      return styleValue.replace(/\\-/g, ' ').replace(/\\b\\w/g, function (chr) {\n        return chr.toUpperCase();\n      });\n    };\n    var toMenuItems = function (styles) {\n      return global$1.map(styles, function (styleValue) {\n        var text = styleValueToText(styleValue);\n        var data = styleValue === 'default' ? '' : styleValue;\n        return {\n          text: text,\n          data: data\n        };\n      });\n    };\n    var ListStyles = { toMenuItems: toMenuItems };\n\n    var findIndex = function (list, predicate) {\n      for (var index = 0; index < list.length; index++) {\n        var element = list[index];\n        if (predicate(element)) {\n          return index;\n        }\n      }\n      return -1;\n    };\n    var listState = function (editor, listName) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('NodeChange', function (e) {\n          var tableCellIndex = findIndex(e.parents, ListUtils.isTableCellNode);\n          var parents = tableCellIndex !== -1 ? e.parents.slice(0, tableCellIndex) : e.parents;\n          var lists = global$1.grep(parents, ListUtils.isListNode(editor));\n          ctrl.active(lists.length > 0 && lists[0].nodeName === listName);\n        });\n      };\n    };\n    var updateSelection = function (editor) {\n      return function (e) {\n        var listStyleType = ListUtils.getSelectedStyleType(editor);\n        e.control.items().each(function (ctrl) {\n          ctrl.active(ctrl.settings.data === listStyleType);\n        });\n      };\n    };\n    var addSplitButton = function (editor, id, tooltip, cmd, nodeName, styles) {\n      editor.addButton(id, {\n        active: false,\n        type: 'splitbutton',\n        tooltip: tooltip,\n        menu: ListStyles.toMenuItems(styles),\n        onPostRender: listState(editor, nodeName),\n        onshow: updateSelection(editor),\n        onselect: function (e) {\n          Actions.applyListFormat(editor, nodeName, e.control.settings.data);\n        },\n        onclick: function () {\n          editor.execCommand(cmd);\n        }\n      });\n    };\n    var addButton = function (editor, id, tooltip, cmd, nodeName, styles) {\n      editor.addButton(id, {\n        active: false,\n        type: 'button',\n        tooltip: tooltip,\n        onPostRender: listState(editor, nodeName),\n        onclick: function () {\n          editor.execCommand(cmd);\n        }\n      });\n    };\n    var addControl = function (editor, id, tooltip, cmd, nodeName, styles) {\n      if (styles.length > 0) {\n        addSplitButton(editor, id, tooltip, cmd, nodeName, styles);\n      } else {\n        addButton(editor, id, tooltip, cmd, nodeName);\n      }\n    };\n    var register$1 = function (editor) {\n      addControl(editor, 'numlist', 'Numbered list', 'InsertOrderedList', 'OL', Settings.getNumberStyles(editor));\n      addControl(editor, 'bullist', 'Bullet list', 'InsertUnorderedList', 'UL', Settings.getBulletStyles(editor));\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('advlist', function (editor) {\n      var hasPlugin = function (editor, plugin) {\n        var plugins = editor.settings.plugins ? editor.settings.plugins : '';\n        return global$1.inArray(plugins.split(/[ ,]/), plugin) !== -1;\n      };\n      if (hasPlugin(editor, 'lists')) {\n        Buttons.register(editor);\n        Commands.register(editor);\n      }\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar table = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isArray = isType('array');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var slice = Array.prototype.slice;\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      return findIndex(xs, pred).isSome();\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i, xs) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var keys = Object.keys;\n    var each$1 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n    var map$1 = function (obj, f) {\n      return tupleMap(obj, function (x, i, obj) {\n        return {\n          k: i,\n          v: f(x, i, obj)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$1(obj, function (x, i) {\n        var tuple = f(x, i, obj);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var sort = function (arr) {\n      return arr.slice(0).sort();\n    };\n    var reqMessage = function (required, keys) {\n      throw new Error('All required keys (' + sort(required).join(', ') + ') were not specified. Specified keys were: ' + sort(keys).join(', ') + '.');\n    };\n    var unsuppMessage = function (unsupported) {\n      throw new Error('Unsupported keys for object: ' + sort(unsupported).join(', '));\n    };\n    var validateStrArr = function (label, array) {\n      if (!isArray(array)) {\n        throw new Error('The ' + label + ' fields must be an array. Was: ' + array + '.');\n      }\n      each(array, function (a) {\n        if (!isString(a)) {\n          throw new Error('The value ' + a + ' in the ' + label + ' fields was not a string.');\n        }\n      });\n    };\n    var invalidTypeMessage = function (incorrect, type) {\n      throw new Error('All values need to be of type: ' + type + '. Keys (' + sort(incorrect).join(', ') + ') were not.');\n    };\n    var checkDupes = function (everything) {\n      var sorted = sort(everything);\n      var dupe = find(sorted, function (s, i) {\n        return i < sorted.length - 1 && s === sorted[i + 1];\n      });\n      dupe.each(function (d) {\n        throw new Error('The field: ' + d + ' occurs more than once in the combined fields: [' + sorted.join(', ') + '].');\n      });\n    };\n\n    var MixedBag = function (required, optional) {\n      var everything = required.concat(optional);\n      if (everything.length === 0) {\n        throw new Error('You must specify at least one required or optional field.');\n      }\n      validateStrArr('required', required);\n      validateStrArr('optional', optional);\n      checkDupes(everything);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        var unsupported = filter(keys$1, function (key) {\n          return !contains(everything, key);\n        });\n        if (unsupported.length > 0) {\n          unsuppMessage(unsupported);\n        }\n        var r = {};\n        each(required, function (req) {\n          r[req] = constant(obj[req]);\n        });\n        each(optional, function (opt) {\n          r[opt] = constant(Object.prototype.hasOwnProperty.call(obj, opt) ? Option.some(obj[opt]) : Option.none());\n        });\n        return r;\n      };\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isComment = function (element) {\n      return type(element) === COMMENT || name(element) === '#comment';\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$1(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n    var clone = function (element) {\n      return foldl(element.dom().attributes, function (acc, attr) {\n        acc[attr.name] = attr.value;\n        return acc;\n      }, {});\n    };\n\n    var checkRange = function (str, substr, start) {\n      if (substr === '') {\n        return true;\n      }\n      if (str.length < substr.length) {\n        return false;\n      }\n      var x = str.substr(start, start + substr.length);\n      return x === substr;\n    };\n    var contains$1 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var endsWith = function (str, suffix) {\n      return checkRange(str, suffix, str.length - suffix.length);\n    };\n    var trim = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n    var body = cached(function () {\n      return getBody(Element.fromDom(domGlobals.document));\n    });\n    var getBody = function (doc) {\n      var b = doc.dom().body;\n      if (b === null || b === undefined) {\n        throw new Error('Body is not available yet');\n      }\n      return Element.fromDom(b);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var internalRemove = function (dom, property) {\n      if (isSupported(dom)) {\n        dom.style.removeProperty(property);\n      }\n    };\n    var set$1 = function (element, property, value) {\n      var dom = element.dom();\n      internalSet(dom, property, value);\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$1(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n    var remove$1 = function (element, property) {\n      var dom = element.dom();\n      internalRemove(dom, property);\n      if (has(element, 'style') && trim(get(element, 'style')) === '') {\n        remove(element, 'style');\n      }\n    };\n    var copy = function (source, target) {\n      var sourceDom = source.dom();\n      var targetDom = target.dom();\n      if (isSupported(sourceDom) && isSupported(targetDom)) {\n        targetDom.style.cssText = sourceDom.style.cssText;\n      }\n    };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$1 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$1(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie = 'IE';\n    var opera = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie, current),\n        isOpera: isBrowser(opera, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie),\n      opera: constant(opera),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$1(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$1(uastring, 'edge/') && contains$1(uastring, 'chrome') && contains$1(uastring, 'safari') && contains$1(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'chrome') && !contains$1(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$1(uastring, 'msie') || contains$1(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$1(uastring, 'safari') || contains$1(uastring, 'mobile/')) && contains$1(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$1(uastring, 'iphone') || contains$1(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$2 = browser.isIE() ? ieContains : regularContains;\n    var is$1 = is;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var spot = Immutable('element', 'offset');\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var after$1 = function (marker, elements) {\n      each(elements, function (x, i) {\n        var e = i === 0 ? marker : elements[i - 1];\n        after(e, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$2(rogue);\n      });\n    };\n    var remove$2 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$2(wrapper);\n    };\n\n    var dimension = Immutable('width', 'height');\n    var dimensions = Immutable('width', 'height');\n    var grid = Immutable('rows', 'columns');\n    var address = Immutable('row', 'column');\n    var coords = Immutable('x', 'y');\n    var detail = Immutable('element', 'rowspan', 'colspan');\n    var detailnew = Immutable('element', 'rowspan', 'colspan', 'isNew');\n    var extended = Immutable('element', 'rowspan', 'colspan', 'row', 'column');\n    var rowdata = Immutable('element', 'cells', 'section');\n    var elementnew = Immutable('element', 'isNew');\n    var rowdatanew = Immutable('element', 'cells', 'section', 'isNew');\n    var rowcells = Immutable('cells', 'section');\n    var rowdetails = Immutable('details', 'section');\n    var bounds = Immutable('startRow', 'startCol', 'finishRow', 'finishCol');\n\n    var ancestors = function (scope, predicate, isRoot) {\n      return filter(parents(scope, isRoot), predicate);\n    };\n    var children$1 = function (scope, predicate) {\n      return filter(children(scope), predicate);\n    };\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var ancestors$1 = function (scope, selector, isRoot) {\n      return ancestors(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var children$2 = function (scope, selector) {\n      return children$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n    var child$1 = function (scope, predicate) {\n      var pred = function (node) {\n        return predicate(Element.fromDom(node));\n      };\n      var result = find(scope.dom().childNodes, pred);\n      return result.map(Element.fromDom);\n    };\n    var descendant = function (scope, predicate) {\n      var descend = function (node) {\n        for (var i = 0; i < node.childNodes.length; i++) {\n          var child_1 = Element.fromDom(node.childNodes[i]);\n          if (predicate(child_1)) {\n            return Option.some(child_1);\n          }\n          var res = descend(node.childNodes[i]);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope.dom());\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is(e, selector);\n      }, isRoot);\n    };\n    var child$2 = function (scope, selector) {\n      return child$1(scope, function (e) {\n        return is(e, selector);\n      });\n    };\n    var descendant$1 = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is, ancestor$1, scope, selector, isRoot);\n    };\n\n    var firstLayer = function (scope, selector) {\n      return filterFirstLayer(scope, selector, constant(true));\n    };\n    var filterFirstLayer = function (scope, selector, predicate) {\n      return bind(children(scope), function (x) {\n        return is(x, selector) ? predicate(x) ? [x] : [] : filterFirstLayer(x, selector, predicate);\n      });\n    };\n    var LayerSelector = {\n      firstLayer: firstLayer,\n      filterFirstLayer: filterFirstLayer\n    };\n\n    var lookup = function (tags, element, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      if (isRoot(element)) {\n        return Option.none();\n      }\n      if (contains(tags, name(element))) {\n        return Option.some(element);\n      }\n      var isRootOrUpperTable = function (elm) {\n        return is(elm, 'table') || isRoot(elm);\n      };\n      return ancestor$1(element, tags.join(','), isRootOrUpperTable);\n    };\n    var cell = function (element, isRoot) {\n      return lookup([\n        'td',\n        'th'\n      ], element, isRoot);\n    };\n    var cells = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'th,td');\n    };\n    var notCell = function (element, isRoot) {\n      return lookup([\n        'caption',\n        'tr',\n        'tbody',\n        'tfoot',\n        'thead'\n      ], element, isRoot);\n    };\n    var neighbours = function (selector, element) {\n      return parent(element).map(function (parent) {\n        return children$2(parent, selector);\n      });\n    };\n    var neighbourCells = curry(neighbours, 'th,td');\n    var neighbourRows = curry(neighbours, 'tr');\n    var firstCell = function (ancestor) {\n      return descendant$1(ancestor, 'th,td');\n    };\n    var table = function (element, isRoot) {\n      return closest$1(element, 'table', isRoot);\n    };\n    var row = function (element, isRoot) {\n      return lookup(['tr'], element, isRoot);\n    };\n    var rows = function (ancestor) {\n      return LayerSelector.firstLayer(ancestor, 'tr');\n    };\n    var attr = function (element, property) {\n      return parseInt(get(element, property), 10);\n    };\n    var grid$1 = function (element, rowProp, colProp) {\n      var rowsCount = attr(element, rowProp);\n      var cols = attr(element, colProp);\n      return grid(rowsCount, cols);\n    };\n    var TableLookup = {\n      cell: cell,\n      firstCell: firstCell,\n      cells: cells,\n      neighbourCells: neighbourCells,\n      table: table,\n      row: row,\n      rows: rows,\n      notCell: notCell,\n      neighbourRows: neighbourRows,\n      attr: attr,\n      grid: grid$1\n    };\n\n    var fromTable = function (table) {\n      var rows = TableLookup.rows(table);\n      return map(rows, function (row) {\n        var element = row;\n        var parent$1 = parent(element);\n        var parentSection = parent$1.map(function (p) {\n          var parentName = name(p);\n          return parentName === 'tfoot' || parentName === 'thead' || parentName === 'tbody' ? parentName : 'tbody';\n        }).getOr('tbody');\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has(cell, 'rowspan') ? parseInt(get(cell, 'rowspan'), 10) : 1;\n          var colspan = has(cell, 'colspan') ? parseInt(get(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(element, cells, parentSection);\n      });\n    };\n    var fromPastedRows = function (rows, example) {\n      return map(rows, function (row) {\n        var cells = map(TableLookup.cells(row), function (cell) {\n          var rowspan = has(cell, 'rowspan') ? parseInt(get(cell, 'rowspan'), 10) : 1;\n          var colspan = has(cell, 'colspan') ? parseInt(get(cell, 'colspan'), 10) : 1;\n          return detail(cell, rowspan, colspan);\n        });\n        return rowdata(row, cells, example.section());\n      });\n    };\n    var DetailsList = {\n      fromTable: fromTable,\n      fromPastedRows: fromPastedRows\n    };\n\n    var key = function (row, column) {\n      return row + ',' + column;\n    };\n    var getAt = function (warehouse, row, column) {\n      var raw = warehouse.access()[key(row, column)];\n      return raw !== undefined ? Option.some(raw) : Option.none();\n    };\n    var findItem = function (warehouse, item, comparator) {\n      var filtered = filterItems(warehouse, function (detail) {\n        return comparator(item, detail.element());\n      });\n      return filtered.length > 0 ? Option.some(filtered[0]) : Option.none();\n    };\n    var filterItems = function (warehouse, predicate) {\n      var all = bind(warehouse.all(), function (r) {\n        return r.cells();\n      });\n      return filter(all, predicate);\n    };\n    var generate = function (list) {\n      var access = {};\n      var cells = [];\n      var maxRows = list.length;\n      var maxColumns = 0;\n      each(list, function (details, r) {\n        var currentRow = [];\n        each(details.cells(), function (detail) {\n          var start = 0;\n          while (access[key(r, start)] !== undefined) {\n            start++;\n          }\n          var current = extended(detail.element(), detail.rowspan(), detail.colspan(), r, start);\n          for (var i = 0; i < detail.colspan(); i++) {\n            for (var j = 0; j < detail.rowspan(); j++) {\n              var cr = r + j;\n              var cc = start + i;\n              var newpos = key(cr, cc);\n              access[newpos] = current;\n              maxColumns = Math.max(maxColumns, cc + 1);\n            }\n          }\n          currentRow.push(current);\n        });\n        cells.push(rowdata(details.element(), currentRow, details.section()));\n      });\n      var grid$1 = grid(maxRows, maxColumns);\n      return {\n        grid: constant(grid$1),\n        access: constant(access),\n        all: constant(cells)\n      };\n    };\n    var justCells = function (warehouse) {\n      var rows = map(warehouse.all(), function (w) {\n        return w.cells();\n      });\n      return flatten(rows);\n    };\n    var Warehouse = {\n      generate: generate,\n      getAt: getAt,\n      findItem: findItem,\n      filterItems: filterItems,\n      justCells: justCells\n    };\n\n    var statsStruct = Immutable('minRow', 'minCol', 'maxRow', 'maxCol');\n    var findSelectedStats = function (house, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      var minRow = totalRows;\n      var minCol = totalColumns;\n      var maxRow = 0;\n      var maxCol = 0;\n      each$1(house.access(), function (detail) {\n        if (isSelected(detail)) {\n          var startRow = detail.row();\n          var endRow = startRow + detail.rowspan() - 1;\n          var startCol = detail.column();\n          var endCol = startCol + detail.colspan() - 1;\n          if (startRow < minRow) {\n            minRow = startRow;\n          } else if (endRow > maxRow) {\n            maxRow = endRow;\n          }\n          if (startCol < minCol) {\n            minCol = startCol;\n          } else if (endCol > maxCol) {\n            maxCol = endCol;\n          }\n        }\n      });\n      return statsStruct(minRow, minCol, maxRow, maxCol);\n    };\n    var makeCell = function (list, seenSelected, rowIndex) {\n      var row = list[rowIndex].element();\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      var f = seenSelected ? append : prepend;\n      f(row, td);\n    };\n    var fillInGaps = function (list, house, stats, isSelected) {\n      var totalColumns = house.grid().columns();\n      var totalRows = house.grid().rows();\n      for (var i = 0; i < totalRows; i++) {\n        var seenSelected = false;\n        for (var j = 0; j < totalColumns; j++) {\n          if (!(i < stats.minRow() || i > stats.maxRow() || j < stats.minCol() || j > stats.maxCol())) {\n            var needCell = Warehouse.getAt(house, i, j).filter(isSelected).isNone();\n            if (needCell) {\n              makeCell(list, seenSelected, i);\n            } else {\n              seenSelected = true;\n            }\n          }\n        }\n      }\n    };\n    var clean = function (table, stats) {\n      var emptyRows = filter(LayerSelector.firstLayer(table, 'tr'), function (row) {\n        return row.dom().childElementCount === 0;\n      });\n      each(emptyRows, remove$2);\n      if (stats.minCol() === stats.maxCol() || stats.minRow() === stats.maxRow()) {\n        each(LayerSelector.firstLayer(table, 'th,td'), function (cell) {\n          remove(cell, 'rowspan');\n          remove(cell, 'colspan');\n        });\n      }\n      remove(table, 'width');\n      remove(table, 'height');\n      remove$1(table, 'width');\n      remove$1(table, 'height');\n    };\n    var extract = function (table, selectedSelector) {\n      var isSelected = function (detail) {\n        return is(detail.element(), selectedSelector);\n      };\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var stats = findSelectedStats(house, isSelected);\n      var selector = 'th:not(' + selectedSelector + ')' + ',td:not(' + selectedSelector + ')';\n      var unselectedCells = LayerSelector.filterFirstLayer(table, 'th,td', function (cell) {\n        return is(cell, selector);\n      });\n      each(unselectedCells, remove$2);\n      fillInGaps(list, house, stats, isSelected);\n      clean(table, stats);\n      return table;\n    };\n    var CopySelected = { extract: extract };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$2 = function (element) {\n      return api.get(element);\n    };\n    var getOption = function (element) {\n      return api.getOption(element);\n    };\n    var set$2 = function (element, value) {\n      api.set(element, value);\n    };\n\n    var getEnd = function (element) {\n      return name(element) === 'img' ? 1 : getOption(element).fold(function () {\n        return children(element).length;\n      }, function (v) {\n        return v.length;\n      });\n    };\n    var NBSP = '\\xA0';\n    var isTextNodeWithCursorPosition = function (el) {\n      return getOption(el).filter(function (text) {\n        return text.trim().length !== 0 || text.indexOf(NBSP) > -1;\n      }).isSome();\n    };\n    var elementsWithCursorPosition = [\n      'img',\n      'br'\n    ];\n    var isCursorPosition = function (elem) {\n      var hasCursorPosition = isTextNodeWithCursorPosition(elem);\n      return hasCursorPosition || contains(elementsWithCursorPosition, name(elem));\n    };\n\n    var first = function (element) {\n      return descendant(element, isCursorPosition);\n    };\n    var last$1 = function (element) {\n      return descendantRtl(element, isCursorPosition);\n    };\n    var descendantRtl = function (scope, predicate) {\n      var descend = function (element) {\n        var children$1 = children(element);\n        for (var i = children$1.length - 1; i >= 0; i--) {\n          var child = children$1[i];\n          if (predicate(child)) {\n            return Option.some(child);\n          }\n          var res = descend(child);\n          if (res.isSome()) {\n            return res;\n          }\n        }\n        return Option.none();\n      };\n      return descend(scope);\n    };\n\n    var clone$1 = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone$1(original, false);\n    };\n    var deep = function (original) {\n      return clone$1(original, true);\n    };\n    var shallowAs = function (original, tag) {\n      var nu = Element.fromTag(tag);\n      var attributes = clone(original);\n      setAll(nu, attributes);\n      return nu;\n    };\n    var copy$1 = function (original, tag) {\n      var nu = shallowAs(original, tag);\n      var cloneChildren = children(deep(original));\n      append$1(nu, cloneChildren);\n      return nu;\n    };\n\n    var createCell = function () {\n      var td = Element.fromTag('td');\n      append(td, Element.fromTag('br'));\n      return td;\n    };\n    var replace = function (cell, tag, attrs) {\n      var replica = copy$1(cell, tag);\n      each$1(attrs, function (v, k) {\n        if (v === null) {\n          remove(replica, k);\n        } else {\n          set(replica, k, v);\n        }\n      });\n      return replica;\n    };\n    var pasteReplace = function (cell) {\n      return cell;\n    };\n    var newRow = function (doc) {\n      return function () {\n        return Element.fromTag('tr', doc.dom());\n      };\n    };\n    var cloneFormats = function (oldCell, newCell, formats) {\n      var first$1 = first(oldCell);\n      return first$1.map(function (firstText) {\n        var formatSelector = formats.join(',');\n        var parents = ancestors$1(firstText, formatSelector, function (element) {\n          return eq(element, oldCell);\n        });\n        return foldr(parents, function (last, parent) {\n          var clonedFormat = shallow(parent);\n          remove(clonedFormat, 'contenteditable');\n          append(last, clonedFormat);\n          return clonedFormat;\n        }, newCell);\n      }).getOr(newCell);\n    };\n    var cellOperations = function (mutate, doc, formatsToClone) {\n      var newCell = function (prev) {\n        var docu = owner(prev.element());\n        var td = Element.fromTag(name(prev.element()), docu.dom());\n        var formats = formatsToClone.getOr([\n          'strong',\n          'em',\n          'b',\n          'i',\n          'span',\n          'font',\n          'h1',\n          'h2',\n          'h3',\n          'h4',\n          'h5',\n          'h6',\n          'p',\n          'div'\n        ]);\n        var lastNode = formats.length > 0 ? cloneFormats(prev.element(), td, formats) : td;\n        append(lastNode, Element.fromTag('br'));\n        copy(prev.element(), td);\n        remove$1(td, 'height');\n        if (prev.colspan() !== 1) {\n          remove$1(prev.element(), 'width');\n        }\n        mutate(prev.element(), td);\n        return td;\n      };\n      return {\n        row: newRow(doc),\n        cell: newCell,\n        replace: replace,\n        gap: createCell\n      };\n    };\n    var paste = function (doc) {\n      return {\n        row: newRow(doc),\n        cell: createCell,\n        replace: pasteReplace,\n        gap: createCell\n      };\n    };\n    var TableFill = {\n      cellOperations: cellOperations,\n      paste: paste\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var inSelection = function (bounds, detail) {\n      var leftEdge = detail.column();\n      var rightEdge = detail.column() + detail.colspan() - 1;\n      var topEdge = detail.row();\n      var bottomEdge = detail.row() + detail.rowspan() - 1;\n      return leftEdge <= bounds.finishCol() && rightEdge >= bounds.startCol() && (topEdge <= bounds.finishRow() && bottomEdge >= bounds.startRow());\n    };\n    var isWithin = function (bounds, detail) {\n      return detail.column() >= bounds.startCol() && detail.column() + detail.colspan() - 1 <= bounds.finishCol() && detail.row() >= bounds.startRow() && detail.row() + detail.rowspan() - 1 <= bounds.finishRow();\n    };\n    var isRectangular = function (warehouse, bounds) {\n      var isRect = true;\n      var detailIsWithin = curry(isWithin, bounds);\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          isRect = isRect && Warehouse.getAt(warehouse, i, j).exists(detailIsWithin);\n        }\n      }\n      return isRect ? Option.some(bounds) : Option.none();\n    };\n    var CellBounds = {\n      inSelection: inSelection,\n      isWithin: isWithin,\n      isRectangular: isRectangular\n    };\n\n    var getBounds = function (detailA, detailB) {\n      return bounds(Math.min(detailA.row(), detailB.row()), Math.min(detailA.column(), detailB.column()), Math.max(detailA.row() + detailA.rowspan() - 1, detailB.row() + detailB.rowspan() - 1), Math.max(detailA.column() + detailA.colspan() - 1, detailB.column() + detailB.colspan() - 1));\n    };\n    var getAnyBox = function (warehouse, startCell, finishCell) {\n      var startCoords = Warehouse.findItem(warehouse, startCell, eq);\n      var finishCoords = Warehouse.findItem(warehouse, finishCell, eq);\n      return startCoords.bind(function (sc) {\n        return finishCoords.map(function (fc) {\n          return getBounds(sc, fc);\n        });\n      });\n    };\n    var getBox = function (warehouse, startCell, finishCell) {\n      return getAnyBox(warehouse, startCell, finishCell).bind(function (bounds) {\n        return CellBounds.isRectangular(warehouse, bounds);\n      });\n    };\n    var CellGroup = {\n      getAnyBox: getAnyBox,\n      getBox: getBox\n    };\n\n    var moveBy = function (warehouse, cell, row, column) {\n      return Warehouse.findItem(warehouse, cell, eq).bind(function (detail) {\n        var startRow = row > 0 ? detail.row() + detail.rowspan() - 1 : detail.row();\n        var startCol = column > 0 ? detail.column() + detail.colspan() - 1 : detail.column();\n        var dest = Warehouse.getAt(warehouse, startRow + row, startCol + column);\n        return dest.map(function (d) {\n          return d.element();\n        });\n      });\n    };\n    var intercepts = function (warehouse, start, finish) {\n      return CellGroup.getAnyBox(warehouse, start, finish).map(function (bounds) {\n        var inside = Warehouse.filterItems(warehouse, curry(CellBounds.inSelection, bounds));\n        return map(inside, function (detail) {\n          return detail.element();\n        });\n      });\n    };\n    var parentCell = function (warehouse, innerCell) {\n      var isContainedBy = function (c1, c2) {\n        return contains$2(c2, c1);\n      };\n      return Warehouse.findItem(warehouse, innerCell, isContainedBy).map(function (detail) {\n        return detail.element();\n      });\n    };\n    var CellFinder = {\n      moveBy: moveBy,\n      intercepts: intercepts,\n      parentCell: parentCell\n    };\n\n    var moveBy$1 = function (cell, deltaRow, deltaColumn) {\n      return TableLookup.table(cell).bind(function (table) {\n        var warehouse = getWarehouse(table);\n        return CellFinder.moveBy(warehouse, cell, deltaRow, deltaColumn);\n      });\n    };\n    var intercepts$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellFinder.intercepts(warehouse, first, last);\n    };\n    var nestedIntercepts = function (table, first, firstTable, last, lastTable) {\n      var warehouse = getWarehouse(table);\n      var optStartCell = eq(table, firstTable) ? Option.some(first) : CellFinder.parentCell(warehouse, first);\n      var optLastCell = eq(table, lastTable) ? Option.some(last) : CellFinder.parentCell(warehouse, last);\n      return optStartCell.bind(function (startCell) {\n        return optLastCell.bind(function (lastCell) {\n          return CellFinder.intercepts(warehouse, startCell, lastCell);\n        });\n      });\n    };\n    var getBox$1 = function (table, first, last) {\n      var warehouse = getWarehouse(table);\n      return CellGroup.getBox(warehouse, first, last);\n    };\n    var getWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return Warehouse.generate(list);\n    };\n    var TablePositions = {\n      moveBy: moveBy$1,\n      intercepts: intercepts$1,\n      nestedIntercepts: nestedIntercepts,\n      getBox: getBox$1\n    };\n\n    var TagBoundaries = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'li',\n      'table',\n      'thead',\n      'tbody',\n      'tfoot',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n\n    function DomUniverse () {\n      var clone$1 = function (element) {\n        return Element.fromDom(element.dom().cloneNode(false));\n      };\n      var document = function (element) {\n        return element.dom().ownerDocument;\n      };\n      var isBoundary = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        if (name(element) === 'body') {\n          return true;\n        }\n        return contains(TagBoundaries, name(element));\n      };\n      var isEmptyTag = function (element) {\n        if (!isElement(element)) {\n          return false;\n        }\n        return contains([\n          'br',\n          'img',\n          'hr',\n          'input'\n        ], name(element));\n      };\n      var comparePosition = function (element, other) {\n        return element.dom().compareDocumentPosition(other.dom());\n      };\n      var copyAttributesTo = function (source, destination) {\n        var as = clone(source);\n        setAll(destination, as);\n      };\n      return {\n        up: constant({\n          selector: ancestor$1,\n          closest: closest$1,\n          predicate: ancestor,\n          all: parents\n        }),\n        down: constant({\n          selector: descendants$1,\n          predicate: descendants\n        }),\n        styles: constant({\n          get: get$1,\n          getRaw: getRaw,\n          set: set$1,\n          remove: remove$1\n        }),\n        attrs: constant({\n          get: get,\n          set: set,\n          remove: remove,\n          copyTo: copyAttributesTo\n        }),\n        insert: constant({\n          before: before,\n          after: after,\n          afterAll: after$1,\n          append: append,\n          appendAll: append$1,\n          prepend: prepend,\n          wrap: wrap\n        }),\n        remove: constant({\n          unwrap: unwrap,\n          remove: remove$2\n        }),\n        create: constant({\n          nu: Element.fromTag,\n          clone: clone$1,\n          text: Element.fromText\n        }),\n        query: constant({\n          comparePosition: comparePosition,\n          prevSibling: prevSibling,\n          nextSibling: nextSibling\n        }),\n        property: constant({\n          children: children,\n          name: name,\n          parent: parent,\n          document: document,\n          isText: isText,\n          isComment: isComment,\n          isElement: isElement,\n          getText: get$2,\n          setText: set$2,\n          isBoundary: isBoundary,\n          isEmptyTag: isEmptyTag\n        }),\n        eq: eq,\n        is: is$1\n      };\n    }\n\n    var leftRight = Immutable('left', 'right');\n    var brokenPath = Immutable('first', 'second', 'splits');\n    var bisect = function (universe, parent, child) {\n      var children = universe.property().children(parent);\n      var index = findIndex(children, curry(universe.eq, child));\n      return index.map(function (ind) {\n        return {\n          before: constant(children.slice(0, ind)),\n          after: constant(children.slice(ind + 1))\n        };\n      });\n    };\n    var breakToRight = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var second = universe.create().clone(parent);\n        universe.insert().appendAll(second, parts.after());\n        universe.insert().after(parent, second);\n        return leftRight(parent, second);\n      });\n    };\n    var breakToLeft = function (universe, parent, child) {\n      return bisect(universe, parent, child).map(function (parts) {\n        var prior = universe.create().clone(parent);\n        universe.insert().appendAll(prior, parts.before().concat([child]));\n        universe.insert().appendAll(parent, parts.after());\n        universe.insert().before(parent, prior);\n        return leftRight(prior, parent);\n      });\n    };\n    var breakPath = function (universe, item, isTop, breaker) {\n      var next = function (child, group, splits) {\n        var fallback = brokenPath(child, Option.none(), splits);\n        if (isTop(child)) {\n          return brokenPath(child, group, splits);\n        } else {\n          return universe.property().parent(child).bind(function (parent) {\n            return breaker(universe, parent, child).map(function (breakage) {\n              var extra = [{\n                  first: breakage.left,\n                  second: breakage.right\n                }];\n              var nextChild = isTop(parent) ? parent : breakage.left();\n              return next(nextChild, Option.some(breakage.right()), splits.concat(extra));\n            });\n          }).getOr(fallback);\n        }\n      };\n      return next(item, Option.none(), []);\n    };\n\n    var all$1 = function (universe, look, elements, f) {\n      var head = elements[0];\n      var tail = elements.slice(1);\n      return f(universe, look, head, tail);\n    };\n    var oneAll = function (universe, look, elements) {\n      return elements.length > 0 ? all$1(universe, look, elements, unsafeOne) : Option.none();\n    };\n    var unsafeOne = function (universe, look, head, tail) {\n      var start = look(universe, head);\n      return foldr(tail, function (b, a) {\n        var current = look(universe, a);\n        return commonElement(universe, b, current);\n      }, start);\n    };\n    var commonElement = function (universe, start, end) {\n      return start.bind(function (s) {\n        return end.filter(curry(universe.eq, s));\n      });\n    };\n\n    var eq$1 = function (universe, item) {\n      return curry(universe.eq, item);\n    };\n    var unsafeSubset = function (universe, common, ps1, ps2) {\n      var children = universe.property().children(common);\n      if (universe.eq(common, ps1[0])) {\n        return Option.some([ps1[0]]);\n      }\n      if (universe.eq(common, ps2[0])) {\n        return Option.some([ps2[0]]);\n      }\n      var finder = function (ps) {\n        var topDown = reverse(ps);\n        var index = findIndex(topDown, eq$1(universe, common)).getOr(-1);\n        var item = index < topDown.length - 1 ? topDown[index + 1] : topDown[index];\n        return findIndex(children, eq$1(universe, item));\n      };\n      var startIndex = finder(ps1);\n      var endIndex = finder(ps2);\n      return startIndex.bind(function (sIndex) {\n        return endIndex.map(function (eIndex) {\n          var first = Math.min(sIndex, eIndex);\n          var last = Math.max(sIndex, eIndex);\n          return children.slice(first, last + 1);\n        });\n      });\n    };\n    var ancestors$2 = function (universe, start, end, isRoot) {\n      if (isRoot === void 0) {\n        isRoot = never;\n      }\n      var ps1 = [start].concat(universe.up().all(start));\n      var ps2 = [end].concat(universe.up().all(end));\n      var prune = function (path) {\n        var index = findIndex(path, isRoot);\n        return index.fold(function () {\n          return path;\n        }, function (ind) {\n          return path.slice(0, ind + 1);\n        });\n      };\n      var pruned1 = prune(ps1);\n      var pruned2 = prune(ps2);\n      var shared = find(pruned1, function (x) {\n        return exists(pruned2, eq$1(universe, x));\n      });\n      return {\n        firstpath: constant(pruned1),\n        secondpath: constant(pruned2),\n        shared: constant(shared)\n      };\n    };\n    var subset = function (universe, start, end) {\n      var ancs = ancestors$2(universe, start, end);\n      return ancs.shared().bind(function (shared) {\n        return unsafeSubset(universe, shared, ancs.firstpath(), ancs.secondpath());\n      });\n    };\n    var SubsetFn = {\n      subset: subset,\n      ancestors: ancestors$2\n    };\n\n    var sharedOne = oneAll;\n    var subset$1 = SubsetFn.subset;\n    var ancestors$3 = SubsetFn.ancestors;\n    var breakToLeft$1 = breakToLeft;\n    var breakToRight$1 = breakToRight;\n    var breakPath$1 = breakPath;\n    var Parent = {\n      sharedOne: sharedOne,\n      subset: subset$1,\n      ancestors: ancestors$3,\n      breakToLeft: breakToLeft$1,\n      breakToRight: breakToRight$1,\n      breakPath: breakPath$1\n    };\n\n    var universe = DomUniverse();\n    var sharedOne$1 = function (look, elements) {\n      return Parent.sharedOne(universe, function (_universe, element) {\n        return look(element);\n      }, elements);\n    };\n    var subset$2 = function (start, finish) {\n      return Parent.subset(universe, start, finish);\n    };\n    var ancestors$4 = function (start, finish, isRoot) {\n      return Parent.ancestors(universe, start, finish, isRoot);\n    };\n    var breakToLeft$2 = function (parent, child) {\n      return Parent.breakToLeft(universe, parent, child);\n    };\n    var breakToRight$2 = function (parent, child) {\n      return Parent.breakToRight(universe, parent, child);\n    };\n    var breakPath$2 = function (child, isTop, breaker) {\n      return Parent.breakPath(universe, child, isTop, function (u, p, c) {\n        return breaker(p, c);\n      });\n    };\n    var DomParent = {\n      sharedOne: sharedOne$1,\n      subset: subset$2,\n      ancestors: ancestors$4,\n      breakToLeft: breakToLeft$2,\n      breakToRight: breakToRight$2,\n      breakPath: breakPath$2\n    };\n\n    var create = MixedBag([\n      'boxes',\n      'start',\n      'finish'\n    ], []);\n    var Identified = { create: create };\n\n    var lookupTable = function (container) {\n      return ancestor$1(container, 'table');\n    };\n    var identify = function (start, finish, isRoot) {\n      var getIsRoot = function (rootTable) {\n        return function (element) {\n          return isRoot !== undefined && isRoot(element) || eq(element, rootTable);\n        };\n      };\n      if (eq(start, finish)) {\n        return Option.some(Identified.create({\n          boxes: Option.some([start]),\n          start: start,\n          finish: finish\n        }));\n      } else {\n        return lookupTable(start).bind(function (startTable) {\n          return lookupTable(finish).bind(function (finishTable) {\n            if (eq(startTable, finishTable)) {\n              return Option.some(Identified.create({\n                boxes: TablePositions.intercepts(startTable, start, finish),\n                start: start,\n                finish: finish\n              }));\n            } else if (contains$2(startTable, finishTable)) {\n              var ancestorCells = ancestors$1(finish, 'td,th', getIsRoot(startTable));\n              var finishCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : finish;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(startTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: finishCell\n              }));\n            } else if (contains$2(finishTable, startTable)) {\n              var ancestorCells = ancestors$1(start, 'td,th', getIsRoot(finishTable));\n              var startCell = ancestorCells.length > 0 ? ancestorCells[ancestorCells.length - 1] : start;\n              return Option.some(Identified.create({\n                boxes: TablePositions.nestedIntercepts(finishTable, start, startTable, finish, finishTable),\n                start: start,\n                finish: startCell\n              }));\n            } else {\n              return DomParent.ancestors(start, finish).shared().bind(function (lca) {\n                return closest$1(lca, 'table', isRoot).bind(function (lcaTable) {\n                  var finishAncestorCells = ancestors$1(finish, 'td,th', getIsRoot(lcaTable));\n                  var finishCell = finishAncestorCells.length > 0 ? finishAncestorCells[finishAncestorCells.length - 1] : finish;\n                  var startAncestorCells = ancestors$1(start, 'td,th', getIsRoot(lcaTable));\n                  var startCell = startAncestorCells.length > 0 ? startAncestorCells[startAncestorCells.length - 1] : start;\n                  return Option.some(Identified.create({\n                    boxes: TablePositions.nestedIntercepts(lcaTable, start, startTable, finish, finishTable),\n                    start: startCell,\n                    finish: finishCell\n                  }));\n                });\n              });\n            }\n          });\n        });\n      }\n    };\n    var retrieve = function (container, selector) {\n      var sels = descendants$1(container, selector);\n      return sels.length > 0 ? Option.some(sels) : Option.none();\n    };\n    var getLast = function (boxes, lastSelectedSelector) {\n      return find(boxes, function (box) {\n        return is(box, lastSelectedSelector);\n      });\n    };\n    var getEdges = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return descendant$1(container, firstSelectedSelector).bind(function (first) {\n        return descendant$1(container, lastSelectedSelector).bind(function (last) {\n          return DomParent.sharedOne(lookupTable, [\n            first,\n            last\n          ]).map(function (tbl) {\n            return {\n              first: constant(first),\n              last: constant(last),\n              table: constant(tbl)\n            };\n          });\n        });\n      });\n    };\n    var expandTo = function (finish, firstSelectedSelector) {\n      return ancestor$1(finish, 'table').bind(function (table) {\n        return descendant$1(table, firstSelectedSelector).bind(function (start) {\n          return identify(start, finish).bind(function (identified) {\n            return identified.boxes().map(function (boxes) {\n              return {\n                boxes: constant(boxes),\n                start: constant(identified.start()),\n                finish: constant(identified.finish())\n              };\n            });\n          });\n        });\n      });\n    };\n    var shiftSelection = function (boxes, deltaRow, deltaColumn, firstSelectedSelector, lastSelectedSelector) {\n      return getLast(boxes, lastSelectedSelector).bind(function (last) {\n        return TablePositions.moveBy(last, deltaRow, deltaColumn).bind(function (finish) {\n          return expandTo(finish, firstSelectedSelector);\n        });\n      });\n    };\n    var CellSelection = {\n      identify: identify,\n      retrieve: retrieve,\n      shiftSelection: shiftSelection,\n      getEdges: getEdges\n    };\n\n    var retrieve$1 = function (container, selector) {\n      return CellSelection.retrieve(container, selector);\n    };\n    var retrieveBox = function (container, firstSelectedSelector, lastSelectedSelector) {\n      return CellSelection.getEdges(container, firstSelectedSelector, lastSelectedSelector).bind(function (edges) {\n        var isRoot = function (ancestor) {\n          return eq(container, ancestor);\n        };\n        var firstAncestor = ancestor$1(edges.first(), 'thead,tfoot,tbody,table', isRoot);\n        var lastAncestor = ancestor$1(edges.last(), 'thead,tfoot,tbody,table', isRoot);\n        return firstAncestor.bind(function (fA) {\n          return lastAncestor.bind(function (lA) {\n            return eq(fA, lA) ? TablePositions.getBox(edges.table(), edges.first(), edges.last()) : Option.none();\n          });\n        });\n      });\n    };\n    var TableSelection = {\n      retrieve: retrieve$1,\n      retrieveBox: retrieveBox\n    };\n\n    var selected = 'data-mce-selected';\n    var selectedSelector = 'td[' + selected + '],th[' + selected + ']';\n    var attributeSelector = '[' + selected + ']';\n    var firstSelected = 'data-mce-first-selected';\n    var firstSelectedSelector = 'td[' + firstSelected + '],th[' + firstSelected + ']';\n    var lastSelected = 'data-mce-last-selected';\n    var lastSelectedSelector = 'td[' + lastSelected + '],th[' + lastSelected + ']';\n    var Ephemera = {\n      selected: constant(selected),\n      selectedSelector: constant(selectedSelector),\n      attributeSelector: constant(attributeSelector),\n      firstSelected: constant(firstSelected),\n      firstSelectedSelector: constant(firstSelectedSelector),\n      lastSelected: constant(lastSelected),\n      lastSelectedSelector: constant(lastSelectedSelector)\n    };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var type$1 = Adt.generate([\n      { none: [] },\n      { multiple: ['elements'] },\n      { single: ['selection'] }\n    ]);\n    var cata = function (subject, onNone, onMultiple, onSingle) {\n      return subject.fold(onNone, onMultiple, onSingle);\n    };\n    var SelectionTypes = {\n      cata: cata,\n      none: type$1.none,\n      multiple: type$1.multiple,\n      single: type$1.single\n    };\n\n    var selection = function (cell, selections) {\n      return SelectionTypes.cata(selections.get(), constant([]), identity, constant([cell]));\n    };\n    var unmergable = function (cell, selections) {\n      var hasSpan = function (elem) {\n        return has(elem, 'rowspan') && parseInt(get(elem, 'rowspan'), 10) > 1 || has(elem, 'colspan') && parseInt(get(elem, 'colspan'), 10) > 1;\n      };\n      var candidates = selection(cell, selections);\n      return candidates.length > 0 && forall(candidates, hasSpan) ? Option.some(candidates) : Option.none();\n    };\n    var mergable = function (table, selections) {\n      return SelectionTypes.cata(selections.get(), Option.none, function (cells, _env) {\n        if (cells.length === 0) {\n          return Option.none();\n        }\n        return TableSelection.retrieveBox(table, Ephemera.firstSelectedSelector(), Ephemera.lastSelectedSelector()).bind(function (bounds) {\n          return cells.length > 1 ? Option.some({\n            bounds: constant(bounds),\n            cells: constant(cells)\n          }) : Option.none();\n        });\n      }, Option.none);\n    };\n    var CellOperations = {\n      mergable: mergable,\n      unmergable: unmergable,\n      selection: selection\n    };\n\n    var noMenu = function (cell) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant([cell])\n      };\n    };\n    var forMenu = function (selections, table, cell) {\n      return {\n        element: constant(cell),\n        mergable: constant(CellOperations.mergable(table, selections)),\n        unmergable: constant(CellOperations.unmergable(cell, selections)),\n        selection: constant(CellOperations.selection(cell, selections))\n      };\n    };\n    var notCell$1 = function (element) {\n      return noMenu(element);\n    };\n    var paste$1 = Immutable('element', 'clipboard', 'generators');\n    var pasteRows = function (selections, table, cell, clipboard, generators) {\n      return {\n        element: constant(cell),\n        mergable: Option.none,\n        unmergable: Option.none,\n        selection: constant(CellOperations.selection(cell, selections)),\n        clipboard: constant(clipboard),\n        generators: constant(generators)\n      };\n    };\n    var TableTargets = {\n      noMenu: noMenu,\n      forMenu: forMenu,\n      notCell: notCell$1,\n      paste: paste$1,\n      pasteRows: pasteRows\n    };\n\n    var extractSelected = function (cells) {\n      return TableLookup.table(cells[0]).map(deep).map(function (replica) {\n        return [CopySelected.extract(replica, Ephemera.attributeSelector())];\n      });\n    };\n    var serializeElements = function (editor, elements) {\n      return map(elements, function (elm) {\n        return editor.selection.serializer.serialize(elm.dom(), {});\n      }).join('');\n    };\n    var getTextContent = function (elements) {\n      return map(elements, function (element) {\n        return element.dom().innerText;\n      }).join('');\n    };\n    var registerEvents = function (editor, selections, actions, cellSelection) {\n      editor.on('BeforeGetContent', function (e) {\n        var multiCellContext = function (cells) {\n          e.preventDefault();\n          extractSelected(cells).each(function (elements) {\n            e.content = e.format === 'text' ? getTextContent(elements) : serializeElements(editor, elements);\n          });\n        };\n        if (e.selection === true) {\n          SelectionTypes.cata(selections.get(), noop, multiCellContext, noop);\n        }\n      });\n      editor.on('BeforeSetContent', function (e) {\n        if (e.selection === true && e.paste === true) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          cellOpt.each(function (domCell) {\n            var cell = Element.fromDom(domCell);\n            TableLookup.table(cell).each(function (table) {\n              var elements = filter(fromHtml$1(e.content), function (content) {\n                return name(content) !== 'meta';\n              });\n              if (elements.length === 1 && name(elements[0]) === 'table') {\n                e.preventDefault();\n                var doc = Element.fromDom(editor.getDoc());\n                var generators = TableFill.paste(doc);\n                var targets = TableTargets.paste(cell, elements[0], generators);\n                actions.pasteCells(table, targets).each(function (rng) {\n                  editor.selection.setRng(rng);\n                  editor.focus();\n                  cellSelection.clear(table);\n                });\n              }\n            });\n          });\n        }\n      });\n    };\n    var Clipboard = { registerEvents: registerEvents };\n\n    function Dimension (name, getOffset) {\n      var set = function (element, h) {\n        if (!isNumber(h) && !h.match(/^[0-9]+$/)) {\n          throw new Error(name + '.set accepts only positive integer values. Value was ' + h);\n        }\n        var dom = element.dom();\n        if (isSupported(dom)) {\n          dom.style[name] = h + 'px';\n        }\n      };\n      var get = function (element) {\n        var r = getOffset(element);\n        if (r <= 0 || r === null) {\n          var css = get$1(element, name);\n          return parseFloat(css) || 0;\n        }\n        return r;\n      };\n      var getOuter = get;\n      var aggregate = function (element, properties) {\n        return foldl(properties, function (acc, property) {\n          var val = get$1(element, property);\n          var value = val === undefined ? 0 : parseInt(val, 10);\n          return isNaN(value) ? acc : acc + value;\n        }, 0);\n      };\n      var max = function (element, value, properties) {\n        var cumulativeInclusions = aggregate(element, properties);\n        var absoluteMax = value > cumulativeInclusions ? value - cumulativeInclusions : 0;\n        return absoluteMax;\n      };\n      return {\n        set: set,\n        get: get,\n        getOuter: getOuter,\n        aggregate: aggregate,\n        max: max\n      };\n    }\n\n    var api$1 = Dimension('height', function (element) {\n      var dom = element.dom();\n      return inBody(element) ? dom.getBoundingClientRect().height : dom.offsetHeight;\n    });\n    var get$3 = function (element) {\n      return api$1.get(element);\n    };\n    var getOuter = function (element) {\n      return api$1.getOuter(element);\n    };\n\n    var api$2 = Dimension('width', function (element) {\n      return element.dom().offsetWidth;\n    });\n    var get$4 = function (element) {\n      return api$2.get(element);\n    };\n    var getOuter$1 = function (element) {\n      return api$2.getOuter(element);\n    };\n\n    var platform = PlatformDetection$1.detect();\n    var needManualCalc = function () {\n      return platform.browser.isIE() || platform.browser.isEdge();\n    };\n    var toNumber = function (px, fallback) {\n      var num = parseFloat(px);\n      return isNaN(num) ? fallback : num;\n    };\n    var getProp = function (elm, name, fallback) {\n      return toNumber(get$1(elm, name), fallback);\n    };\n    var getCalculatedHeight = function (cell) {\n      var paddingTop = getProp(cell, 'padding-top', 0);\n      var paddingBottom = getProp(cell, 'padding-bottom', 0);\n      var borderTop = getProp(cell, 'border-top-width', 0);\n      var borderBottom = getProp(cell, 'border-bottom-width', 0);\n      var height = cell.dom().getBoundingClientRect().height;\n      var boxSizing = get$1(cell, 'box-sizing');\n      var borders = borderTop + borderBottom;\n      return boxSizing === 'border-box' ? height : height - paddingTop - paddingBottom - borders;\n    };\n    var getWidth = function (cell) {\n      return getProp(cell, 'width', get$4(cell));\n    };\n    var getHeight = function (cell) {\n      return needManualCalc() ? getCalculatedHeight(cell) : getProp(cell, 'height', get$3(cell));\n    };\n    var RuntimeSize = {\n      getWidth: getWidth,\n      getHeight: getHeight\n    };\n\n    var genericSizeRegex = /(\\d+(\\.\\d+)?)(\\w|%)*/;\n    var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n    var pixelBasedSizeRegex = /(\\d+(\\.\\d+)?)px|em/;\n    var setPixelWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + 'px');\n    };\n    var setPercentageWidth = function (cell, amount) {\n      set$1(cell, 'width', amount + '%');\n    };\n    var setHeight = function (cell, amount) {\n      set$1(cell, 'height', amount + 'px');\n    };\n    var getHeightValue = function (cell) {\n      return getRaw(cell, 'height').getOrThunk(function () {\n        return RuntimeSize.getHeight(cell) + 'px';\n      });\n    };\n    var convert = function (cell, number, getter, setter) {\n      var newSize = TableLookup.table(cell).map(function (table) {\n        var total = getter(table);\n        return Math.floor(number / 100 * total);\n      }).getOr(number);\n      setter(cell, newSize);\n      return newSize;\n    };\n    var normalizePixelSize = function (value, cell, getter, setter) {\n      var number = parseInt(value, 10);\n      return endsWith(value, '%') && name(cell) !== 'table' ? convert(cell, number, getter, setter) : number;\n    };\n    var getTotalHeight = function (cell) {\n      var value = getHeightValue(cell);\n      if (!value) {\n        return get$3(cell);\n      }\n      return normalizePixelSize(value, cell, get$3, setHeight);\n    };\n    var get$5 = function (cell, type, f) {\n      var v = f(cell);\n      var span = getSpan(cell, type);\n      return v / span;\n    };\n    var getSpan = function (cell, type) {\n      return has(cell, type) ? parseInt(get(cell, type), 10) : 1;\n    };\n    var getRawWidth = function (element) {\n      var cssWidth = getRaw(element, 'width');\n      return cssWidth.fold(function () {\n        return Option.from(get(element, 'width'));\n      }, function (width) {\n        return Option.some(width);\n      });\n    };\n    var normalizePercentageWidth = function (cellWidth, tableSize) {\n      return cellWidth / tableSize.pixelWidth() * 100;\n    };\n    var choosePercentageSize = function (element, width, tableSize) {\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        return parseFloat(percentMatch[1]);\n      } else {\n        var intWidth = get$4(element);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }\n    };\n    var getPercentageWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        var intWidth = get$4(cell);\n        return normalizePercentageWidth(intWidth, tableSize);\n      }, function (w) {\n        return choosePercentageSize(cell, w, tableSize);\n      });\n    };\n    var normalizePixelWidth = function (cellWidth, tableSize) {\n      return cellWidth / 100 * tableSize.pixelWidth();\n    };\n    var choosePixelSize = function (element, width, tableSize) {\n      var pixelMatch = pixelBasedSizeRegex.exec(width);\n      if (pixelMatch !== null) {\n        return parseInt(pixelMatch[1], 10);\n      }\n      var percentMatch = percentageBasedSizeRegex.exec(width);\n      if (percentMatch !== null) {\n        var floatWidth = parseFloat(percentMatch[1]);\n        return normalizePixelWidth(floatWidth, tableSize);\n      }\n      return get$4(element);\n    };\n    var getPixelWidth = function (cell, tableSize) {\n      var width = getRawWidth(cell);\n      return width.fold(function () {\n        return get$4(cell);\n      }, function (w) {\n        return choosePixelSize(cell, w, tableSize);\n      });\n    };\n    var getHeight$1 = function (cell) {\n      return get$5(cell, 'rowspan', getTotalHeight);\n    };\n    var getGenericWidth = function (cell) {\n      var width = getRawWidth(cell);\n      return width.bind(function (w) {\n        var match = genericSizeRegex.exec(w);\n        if (match !== null) {\n          return Option.some({\n            width: constant(parseFloat(match[1])),\n            unit: constant(match[3])\n          });\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var setGenericWidth = function (cell, amount, unit) {\n      set$1(cell, 'width', amount + unit);\n    };\n    var Sizes = {\n      percentageBasedSizeRegex: constant(percentageBasedSizeRegex),\n      pixelBasedSizeRegex: constant(pixelBasedSizeRegex),\n      setPixelWidth: setPixelWidth,\n      setPercentageWidth: setPercentageWidth,\n      setHeight: setHeight,\n      getPixelWidth: getPixelWidth,\n      getPercentageWidth: getPercentageWidth,\n      getGenericWidth: getGenericWidth,\n      setGenericWidth: setGenericWidth,\n      getHeight: getHeight$1,\n      getRawWidth: getRawWidth\n    };\n\n    var halve = function (main, other) {\n      var width = Sizes.getGenericWidth(main);\n      width.each(function (w) {\n        var newWidth = w.width() / 2;\n        Sizes.setGenericWidth(main, newWidth, w.unit());\n        Sizes.setGenericWidth(other, newWidth, w.unit());\n      });\n    };\n    var CellMutations = { halve: halve };\n\n    var r = function (left, top) {\n      var translate = function (x, y) {\n        return r(left + x, top + y);\n      };\n      return {\n        left: constant(left),\n        top: constant(top),\n        translate: translate\n      };\n    };\n    var Position = r;\n\n    var boxPosition = function (dom) {\n      var box = dom.getBoundingClientRect();\n      return Position(box.left, box.top);\n    };\n    var firstDefinedOrZero = function (a, b) {\n      return a !== undefined ? a : b !== undefined ? b : 0;\n    };\n    var absolute = function (element) {\n      var doc = element.dom().ownerDocument;\n      var body = doc.body;\n      var win = doc.defaultView;\n      var html = doc.documentElement;\n      var scrollTop = firstDefinedOrZero(win.pageYOffset, html.scrollTop);\n      var scrollLeft = firstDefinedOrZero(win.pageXOffset, html.scrollLeft);\n      var clientTop = firstDefinedOrZero(html.clientTop, body.clientTop);\n      var clientLeft = firstDefinedOrZero(html.clientLeft, body.clientLeft);\n      return viewport(element).translate(scrollLeft - clientLeft, scrollTop - clientTop);\n    };\n    var viewport = function (element) {\n      var dom = element.dom();\n      var doc = dom.ownerDocument;\n      var body = doc.body;\n      if (body === dom) {\n        return Position(body.offsetLeft, body.offsetTop);\n      }\n      if (!inBody(element)) {\n        return Position(0, 0);\n      }\n      return boxPosition(dom);\n    };\n\n    var rowInfo = Immutable('row', 'y');\n    var colInfo = Immutable('col', 'x');\n    var rtlEdge = function (cell) {\n      var pos = absolute(cell);\n      return pos.left() + getOuter$1(cell);\n    };\n    var ltrEdge = function (cell) {\n      return absolute(cell).left();\n    };\n    var getLeftEdge = function (index, cell) {\n      return colInfo(index, ltrEdge(cell));\n    };\n    var getRightEdge = function (index, cell) {\n      return colInfo(index, rtlEdge(cell));\n    };\n    var getTop = function (cell) {\n      return absolute(cell).top();\n    };\n    var getTopEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell));\n    };\n    var getBottomEdge = function (index, cell) {\n      return rowInfo(index, getTop(cell) + getOuter(cell));\n    };\n    var findPositions = function (getInnerEdge, getOuterEdge, array) {\n      if (array.length === 0) {\n        return [];\n      }\n      var lines = map(array.slice(1), function (cellOption, index) {\n        return cellOption.map(function (cell) {\n          return getInnerEdge(index, cell);\n        });\n      });\n      var lastLine = array[array.length - 1].map(function (cell) {\n        return getOuterEdge(array.length - 1, cell);\n      });\n      return lines.concat([lastLine]);\n    };\n    var negate = function (step) {\n      return -step;\n    };\n    var height = {\n      delta: identity,\n      positions: function (optElements) {\n        return findPositions(getTopEdge, getBottomEdge, optElements);\n      },\n      edge: getTop\n    };\n    var ltr = {\n      delta: identity,\n      edge: ltrEdge,\n      positions: function (optElements) {\n        return findPositions(getLeftEdge, getRightEdge, optElements);\n      }\n    };\n    var rtl = {\n      delta: negate,\n      edge: rtlEdge,\n      positions: function (optElements) {\n        return findPositions(getRightEdge, getLeftEdge, optElements);\n      }\n    };\n    var BarPositions = {\n      height: height,\n      rtl: rtl,\n      ltr: ltr\n    };\n\n    var ResizeDirection = {\n      ltr: BarPositions.ltr,\n      rtl: BarPositions.rtl\n    };\n\n    function TableDirection (directionAt) {\n      var auto = function (table) {\n        return directionAt(table).isRtl() ? ResizeDirection.rtl : ResizeDirection.ltr;\n      };\n      var delta = function (amount, table) {\n        return auto(table).delta(amount, table);\n      };\n      var positions = function (cols, table) {\n        return auto(table).positions(cols, table);\n      };\n      var edge = function (cell) {\n        return auto(cell).edge(cell);\n      };\n      return {\n        delta: delta,\n        edge: edge,\n        positions: positions\n      };\n    }\n\n    var getGridSize = function (table) {\n      var input = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(input);\n      return warehouse.grid();\n    };\n    var TableGridSize = { getGridSize: getGridSize };\n\n    var __assign = function () {\n      __assign = Object.assign || function __assign(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p))\n              t[p] = s[p];\n        }\n        return t;\n      };\n      return __assign.apply(this, arguments);\n    };\n\n    var cat = function (arr) {\n      var r = [];\n      var push = function (x) {\n        r.push(x);\n      };\n      for (var i = 0; i < arr.length; i++) {\n        arr[i].each(push);\n      }\n      return r;\n    };\n    var findMap = function (arr, f) {\n      for (var i = 0; i < arr.length; i++) {\n        var r = f(arr[i], i);\n        if (r.isSome()) {\n          return r;\n        }\n      }\n      return Option.none();\n    };\n\n    var setIfNot = function (element, property, value, ignore) {\n      if (value === ignore) {\n        remove(element, property);\n      } else {\n        set(element, property, value);\n      }\n    };\n    var render = function (table, grid) {\n      var newRows = [];\n      var newCells = [];\n      var renderSection = function (gridSection, sectionName) {\n        var section = child$2(table, sectionName).getOrThunk(function () {\n          var tb = Element.fromTag(sectionName, owner(table).dom());\n          append(table, tb);\n          return tb;\n        });\n        empty(section);\n        var rows = map(gridSection, function (row) {\n          if (row.isNew()) {\n            newRows.push(row.element());\n          }\n          var tr = row.element();\n          empty(tr);\n          each(row.cells(), function (cell) {\n            if (cell.isNew()) {\n              newCells.push(cell.element());\n            }\n            setIfNot(cell.element(), 'colspan', cell.colspan(), 1);\n            setIfNot(cell.element(), 'rowspan', cell.rowspan(), 1);\n            append(tr, cell.element());\n          });\n          return tr;\n        });\n        append$1(section, rows);\n      };\n      var removeSection = function (sectionName) {\n        child$2(table, sectionName).each(remove$2);\n      };\n      var renderOrRemoveSection = function (gridSection, sectionName) {\n        if (gridSection.length > 0) {\n          renderSection(gridSection, sectionName);\n        } else {\n          removeSection(sectionName);\n        }\n      };\n      var headSection = [];\n      var bodySection = [];\n      var footSection = [];\n      each(grid, function (row) {\n        switch (row.section()) {\n        case 'thead':\n          headSection.push(row);\n          break;\n        case 'tbody':\n          bodySection.push(row);\n          break;\n        case 'tfoot':\n          footSection.push(row);\n          break;\n        }\n      });\n      renderOrRemoveSection(headSection, 'thead');\n      renderOrRemoveSection(bodySection, 'tbody');\n      renderOrRemoveSection(footSection, 'tfoot');\n      return {\n        newRows: constant(newRows),\n        newCells: constant(newCells)\n      };\n    };\n    var copy$2 = function (grid) {\n      var rows = map(grid, function (row) {\n        var tr = shallow(row.element());\n        each(row.cells(), function (cell) {\n          var clonedCell = deep(cell.element());\n          setIfNot(clonedCell, 'colspan', cell.colspan(), 1);\n          setIfNot(clonedCell, 'rowspan', cell.rowspan(), 1);\n          append(tr, clonedCell);\n        });\n        return tr;\n      });\n      return rows;\n    };\n    var Redraw = {\n      render: render,\n      copy: copy$2\n    };\n\n    var read = function (element, attr) {\n      var value = get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$3 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$6 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$4 = function (element, clazz) {\n      return remove$3(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$6(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$5 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$4(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$1 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var repeat = function (repititions, f) {\n      var r = [];\n      for (var i = 0; i < repititions; i++) {\n        r.push(f(i));\n      }\n      return r;\n    };\n    var range = function (start, end) {\n      var r = [];\n      for (var i = start; i < end; i++) {\n        r.push(i);\n      }\n      return r;\n    };\n    var deduce = function (xs, index) {\n      if (index < 0 || index >= xs.length - 1) {\n        return Option.none();\n      }\n      var current = xs[index].fold(function () {\n        var rest = reverse(xs.slice(0, index));\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (c) {\n        return Option.some({\n          value: c,\n          delta: 0\n        });\n      });\n      var next = xs[index + 1].fold(function () {\n        var rest = xs.slice(index + 1);\n        return findMap(rest, function (a, i) {\n          return a.map(function (aa) {\n            return {\n              value: aa,\n              delta: i + 1\n            };\n          });\n        });\n      }, function (n) {\n        return Option.some({\n          value: n,\n          delta: 1\n        });\n      });\n      return current.bind(function (c) {\n        return next.map(function (n) {\n          var extras = n.delta + c.delta;\n          return Math.abs(n.value - c.value) / extras;\n        });\n      });\n    };\n\n    var columns = function (warehouse) {\n      var grid = warehouse.grid();\n      var cols = range(0, grid.columns());\n      var rowsArr = range(0, grid.rows());\n      return map(cols, function (col) {\n        var getBlock = function () {\n          return bind(rowsArr, function (r) {\n            return Warehouse.getAt(warehouse, r, col).filter(function (detail) {\n              return detail.column() === col;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.colspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, 0, col);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var decide = function (getBlock, isSingle, getFallback) {\n      var inBlock = getBlock();\n      var singleInBlock = find(inBlock, isSingle);\n      var detailOption = singleInBlock.orThunk(function () {\n        return Option.from(inBlock[0]).orThunk(getFallback);\n      });\n      return detailOption.map(function (detail) {\n        return detail.element();\n      });\n    };\n    var rows$1 = function (warehouse) {\n      var grid = warehouse.grid();\n      var rowsArr = range(0, grid.rows());\n      var cols = range(0, grid.columns());\n      return map(rowsArr, function (row) {\n        var getBlock = function () {\n          return bind(cols, function (c) {\n            return Warehouse.getAt(warehouse, row, c).filter(function (detail) {\n              return detail.row() === row;\n            }).fold(constant([]), function (detail) {\n              return [detail];\n            });\n          });\n        };\n        var isSingle = function (detail) {\n          return detail.rowspan() === 1;\n        };\n        var getFallback = function () {\n          return Warehouse.getAt(warehouse, row, 0);\n        };\n        return decide(getBlock, isSingle, getFallback);\n      });\n    };\n    var Blocks = {\n      columns: columns,\n      rows: rows$1\n    };\n\n    var css = function (namespace) {\n      var dashNamespace = namespace.replace(/\\./g, '-');\n      var resolve = function (str) {\n        return dashNamespace + '-' + str;\n      };\n      return { resolve: resolve };\n    };\n\n    var styles = css('ephox-snooker');\n    var Styles = { resolve: styles.resolve };\n\n    var col = function (column, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x - w / 2 + 'px',\n        top: y + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-column': column,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var row$1 = function (r, x, y, w, h) {\n      var blocker = Element.fromTag('div');\n      setAll$1(blocker, {\n        position: 'absolute',\n        left: x + 'px',\n        top: y - h / 2 + 'px',\n        height: h + 'px',\n        width: w + 'px'\n      });\n      setAll(blocker, {\n        'data-row': r,\n        'role': 'presentation'\n      });\n      return blocker;\n    };\n    var Bar = {\n      col: col,\n      row: row$1\n    };\n\n    var resizeBar = Styles.resolve('resizer-bar');\n    var resizeRowBar = Styles.resolve('resizer-rows');\n    var resizeColBar = Styles.resolve('resizer-cols');\n    var BAR_THICKNESS = 7;\n    var destroy = function (wire) {\n      var previous = descendants$1(wire.parent(), '.' + resizeBar);\n      each(previous, remove$2);\n    };\n    var drawBar = function (wire, positions, create) {\n      var origin = wire.origin();\n      each(positions, function (cpOption, i) {\n        cpOption.each(function (cp) {\n          var bar = create(origin, cp);\n          add$2(bar, resizeBar);\n          append(wire.parent(), bar);\n        });\n      });\n    };\n    var refreshCol = function (wire, colPositions, position, tableHeight) {\n      drawBar(wire, colPositions, function (origin, cp) {\n        var colBar = Bar.col(cp.col(), cp.x() - origin.left(), position.top() - origin.top(), BAR_THICKNESS, tableHeight);\n        add$2(colBar, resizeColBar);\n        return colBar;\n      });\n    };\n    var refreshRow = function (wire, rowPositions, position, tableWidth) {\n      drawBar(wire, rowPositions, function (origin, cp) {\n        var rowBar = Bar.row(cp.row(), position.left() - origin.left(), cp.y() - origin.top(), tableWidth, BAR_THICKNESS);\n        add$2(rowBar, resizeRowBar);\n        return rowBar;\n      });\n    };\n    var refreshGrid = function (wire, table, rows, cols, hdirection, vdirection) {\n      var position = absolute(table);\n      var rowPositions = rows.length > 0 ? hdirection.positions(rows, table) : [];\n      refreshRow(wire, rowPositions, position, getOuter$1(table));\n      var colPositions = cols.length > 0 ? vdirection.positions(cols, table) : [];\n      refreshCol(wire, colPositions, position, getOuter(table));\n    };\n    var refresh = function (wire, table, hdirection, vdirection) {\n      destroy(wire);\n      var list = DetailsList.fromTable(table);\n      var warehouse = Warehouse.generate(list);\n      var rows = Blocks.rows(warehouse);\n      var cols = Blocks.columns(warehouse);\n      refreshGrid(wire, table, rows, cols, hdirection, vdirection);\n    };\n    var each$2 = function (wire, f) {\n      var bars = descendants$1(wire.parent(), '.' + resizeBar);\n      each(bars, f);\n    };\n    var hide = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'none');\n      });\n    };\n    var show = function (wire) {\n      each$2(wire, function (bar) {\n        set$1(bar, 'display', 'block');\n      });\n    };\n    var isRowBar = function (element) {\n      return has$1(element, resizeRowBar);\n    };\n    var isColBar = function (element) {\n      return has$1(element, resizeColBar);\n    };\n    var Bars = {\n      refresh: refresh,\n      hide: hide,\n      show: show,\n      destroy: destroy,\n      isRowBar: isRowBar,\n      isColBar: isColBar\n    };\n\n    var addCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      var before = cells.slice(0, index);\n      var after = cells.slice(index);\n      var newCells = before.concat([cell]).concat(after);\n      return setCells(gridRow, newCells);\n    };\n    var mutateCell = function (gridRow, index, cell) {\n      var cells = gridRow.cells();\n      cells[index] = cell;\n    };\n    var setCells = function (gridRow, cells) {\n      return rowcells(cells, gridRow.section());\n    };\n    var mapCells = function (gridRow, f) {\n      var cells = gridRow.cells();\n      var r = map(cells, f);\n      return rowcells(r, gridRow.section());\n    };\n    var getCell = function (gridRow, index) {\n      return gridRow.cells()[index];\n    };\n    var getCellElement = function (gridRow, index) {\n      return getCell(gridRow, index).element();\n    };\n    var cellLength = function (gridRow) {\n      return gridRow.cells().length;\n    };\n    var GridRow = {\n      addCell: addCell,\n      setCells: setCells,\n      mutateCell: mutateCell,\n      getCell: getCell,\n      getCellElement: getCellElement,\n      mapCells: mapCells,\n      cellLength: cellLength\n    };\n\n    var getColumn = function (grid, index) {\n      return map(grid, function (row) {\n        return GridRow.getCell(row, index);\n      });\n    };\n    var getRow = function (grid, index) {\n      return grid[index];\n    };\n    var findDiff = function (xs, comp) {\n      if (xs.length === 0) {\n        return 0;\n      }\n      var first = xs[0];\n      var index = findIndex(xs, function (x) {\n        return !comp(first.element(), x.element());\n      });\n      return index.fold(function () {\n        return xs.length;\n      }, function (ind) {\n        return ind;\n      });\n    };\n    var subgrid = function (grid, row, column, comparator) {\n      var restOfRow = getRow(grid, row).cells().slice(column);\n      var endColIndex = findDiff(restOfRow, comparator);\n      var restOfColumn = getColumn(grid, column).slice(row);\n      var endRowIndex = findDiff(restOfColumn, comparator);\n      return {\n        colspan: constant(endColIndex),\n        rowspan: constant(endRowIndex)\n      };\n    };\n    var TableGrid = { subgrid: subgrid };\n\n    var toDetails = function (grid, comparator) {\n      var seen = map(grid, function (row, ri) {\n        return map(row.cells(), function (col, ci) {\n          return false;\n        });\n      });\n      var updateSeen = function (ri, ci, rowspan, colspan) {\n        for (var r = ri; r < ri + rowspan; r++) {\n          for (var c = ci; c < ci + colspan; c++) {\n            seen[r][c] = true;\n          }\n        }\n      };\n      return map(grid, function (row, ri) {\n        var details = bind(row.cells(), function (cell, ci) {\n          if (seen[ri][ci] === false) {\n            var result = TableGrid.subgrid(grid, ri, ci, comparator);\n            updateSeen(ri, ci, result.rowspan(), result.colspan());\n            return [detailnew(cell.element(), result.rowspan(), result.colspan(), cell.isNew())];\n          } else {\n            return [];\n          }\n        });\n        return rowdetails(details, row.section());\n      });\n    };\n    var toGrid = function (warehouse, generators, isNew) {\n      var grid = [];\n      for (var i = 0; i < warehouse.grid().rows(); i++) {\n        var rowCells = [];\n        for (var j = 0; j < warehouse.grid().columns(); j++) {\n          var element = Warehouse.getAt(warehouse, i, j).map(function (item) {\n            return elementnew(item.element(), isNew);\n          }).getOrThunk(function () {\n            return elementnew(generators.gap(), true);\n          });\n          rowCells.push(element);\n        }\n        var row = rowcells(rowCells, warehouse.all()[i].section());\n        grid.push(row);\n      }\n      return grid;\n    };\n    var Transitions = {\n      toDetails: toDetails,\n      toGrid: toGrid\n    };\n\n    var fromWarehouse = function (warehouse, generators) {\n      return Transitions.toGrid(warehouse, generators, false);\n    };\n    var deriveRows = function (rendered, generators) {\n      var findRow = function (details) {\n        var rowOfCells = findMap(details, function (detail) {\n          return parent(detail.element()).map(function (row) {\n            var isNew = parent(row).isNone();\n            return elementnew(row, isNew);\n          });\n        });\n        return rowOfCells.getOrThunk(function () {\n          return elementnew(generators.row(), true);\n        });\n      };\n      return map(rendered, function (details) {\n        var row = findRow(details.details());\n        return rowdatanew(row.element(), details.details(), details.section(), row.isNew());\n      });\n    };\n    var toDetailList = function (grid, generators) {\n      var rendered = Transitions.toDetails(grid, eq);\n      return deriveRows(rendered, generators);\n    };\n    var findInWarehouse = function (warehouse, element) {\n      var all = flatten(map(warehouse.all(), function (r) {\n        return r.cells();\n      }));\n      return find(all, function (e) {\n        return eq(element, e.element());\n      });\n    };\n    var run = function (operation, extract, adjustment, postAction, genWrappers) {\n      return function (wire, table, target, generators, direction) {\n        var input = DetailsList.fromTable(table);\n        var warehouse = Warehouse.generate(input);\n        var output = extract(warehouse, target).map(function (info) {\n          var model = fromWarehouse(warehouse, generators);\n          var result = operation(model, info, eq, genWrappers(generators));\n          var grid = toDetailList(result.grid(), generators);\n          return {\n            grid: constant(grid),\n            cursor: result.cursor\n          };\n        });\n        return output.fold(function () {\n          return Option.none();\n        }, function (out) {\n          var newElements = Redraw.render(table, out.grid());\n          adjustment(table, out.grid(), direction);\n          postAction(table);\n          Bars.refresh(wire, table, BarPositions.height, direction);\n          return Option.some({\n            cursor: out.cursor,\n            newRows: newElements.newRows,\n            newCells: newElements.newCells\n          });\n        });\n      };\n    };\n    var onCell = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell);\n      });\n    };\n    var onPaste = function (warehouse, target) {\n      return TableLookup.cell(target.element()).bind(function (cell) {\n        return findInWarehouse(warehouse, cell).map(function (details) {\n          var value = __assign({}, details, {\n            generators: target.generators,\n            clipboard: target.clipboard\n          });\n          return value;\n        });\n      });\n    };\n    var onPasteRows = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some({\n        cells: cells,\n        generators: target.generators,\n        clipboard: target.clipboard\n      }) : Option.none();\n    };\n    var onMergable = function (_warehouse, target) {\n      return target.mergable();\n    };\n    var onUnmergable = function (_warehouse, target) {\n      return target.unmergable();\n    };\n    var onCells = function (warehouse, target) {\n      var details = map(target.selection(), function (cell) {\n        return TableLookup.cell(cell).bind(function (lc) {\n          return findInWarehouse(warehouse, lc);\n        });\n      });\n      var cells = cat(details);\n      return cells.length > 0 ? Option.some(cells) : Option.none();\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    var measure = function (startAddress, gridA, gridB) {\n      if (startAddress.row() >= gridA.length || startAddress.column() > GridRow.cellLength(gridA[0])) {\n        return Result.error('invalid start address out of table bounds, row: ' + startAddress.row() + ', column: ' + startAddress.column());\n      }\n      var rowRemainder = gridA.slice(startAddress.row());\n      var colRemainder = rowRemainder[0].cells().slice(startAddress.column());\n      var colRequired = GridRow.cellLength(gridB[0]);\n      var rowRequired = gridB.length;\n      return Result.value({\n        rowDelta: constant(rowRemainder.length - rowRequired),\n        colDelta: constant(colRemainder.length - colRequired)\n      });\n    };\n    var measureWidth = function (gridA, gridB) {\n      var colLengthA = GridRow.cellLength(gridA[0]);\n      var colLengthB = GridRow.cellLength(gridB[0]);\n      return {\n        rowDelta: constant(0),\n        colDelta: constant(colLengthA - colLengthB)\n      };\n    };\n    var fill = function (cells, generator) {\n      return map(cells, function () {\n        return elementnew(generator.cell(), true);\n      });\n    };\n    var rowFill = function (grid, amount, generator) {\n      return grid.concat(repeat(amount, function (_row) {\n        return GridRow.setCells(grid[grid.length - 1], fill(grid[grid.length - 1].cells(), generator));\n      }));\n    };\n    var colFill = function (grid, amount, generator) {\n      return map(grid, function (row) {\n        return GridRow.setCells(row, row.cells().concat(fill(range(0, amount), generator)));\n      });\n    };\n    var tailor = function (gridA, delta, generator) {\n      var fillCols = delta.colDelta() < 0 ? colFill : identity;\n      var fillRows = delta.rowDelta() < 0 ? rowFill : identity;\n      var modifiedCols = fillCols(gridA, Math.abs(delta.colDelta()), generator);\n      var tailoredGrid = fillRows(modifiedCols, Math.abs(delta.rowDelta()), generator);\n      return tailoredGrid;\n    };\n    var Fitment = {\n      measure: measure,\n      measureWidth: measureWidth,\n      tailor: tailor\n    };\n\n    var merge = function (grid, bounds, comparator, substitution) {\n      if (grid.length === 0) {\n        return grid;\n      }\n      for (var i = bounds.startRow(); i <= bounds.finishRow(); i++) {\n        for (var j = bounds.startCol(); j <= bounds.finishCol(); j++) {\n          GridRow.mutateCell(grid[i], j, elementnew(substitution(), false));\n        }\n      }\n      return grid;\n    };\n    var unmerge = function (grid, target, comparator, substitution) {\n      var first = true;\n      for (var i = 0; i < grid.length; i++) {\n        for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n          var current = GridRow.getCellElement(grid[i], j);\n          var isToReplace = comparator(current, target);\n          if (isToReplace === true && first === false) {\n            GridRow.mutateCell(grid[i], j, elementnew(substitution(), true));\n          } else if (isToReplace === true) {\n            first = false;\n          }\n        }\n      }\n      return grid;\n    };\n    var uniqueCells = function (row, comparator) {\n      return foldl(row, function (rest, cell) {\n        return exists(rest, function (currentCell) {\n          return comparator(currentCell.element(), cell.element());\n        }) ? rest : rest.concat([cell]);\n      }, []);\n    };\n    var splitRows = function (grid, index, comparator, substitution) {\n      if (index > 0 && index < grid.length) {\n        var rowPrevCells = grid[index - 1].cells();\n        var cells = uniqueCells(rowPrevCells, comparator);\n        each(cells, function (cell) {\n          var replacement = Option.none();\n          var _loop_1 = function (i) {\n            var _loop_2 = function (j) {\n              var current = grid[i].cells()[j];\n              var isToReplace = comparator(current.element(), cell.element());\n              if (isToReplace) {\n                if (replacement.isNone()) {\n                  replacement = Option.some(substitution());\n                }\n                replacement.each(function (sub) {\n                  GridRow.mutateCell(grid[i], j, elementnew(sub, true));\n                });\n              }\n            };\n            for (var j = 0; j < GridRow.cellLength(grid[0]); j++) {\n              _loop_2(j);\n            }\n          };\n          for (var i = index; i < grid.length; i++) {\n            _loop_1(i);\n          }\n        });\n      }\n      return grid;\n    };\n    var MergingOperations = {\n      merge: merge,\n      unmerge: unmerge,\n      splitRows: splitRows\n    };\n\n    var isSpanning = function (grid, row, col, comparator) {\n      var candidate = GridRow.getCell(grid[row], col);\n      var matching = curry(comparator, candidate.element());\n      var currentRow = grid[row];\n      return grid.length > 1 && GridRow.cellLength(currentRow) > 1 && (col > 0 && matching(GridRow.getCellElement(currentRow, col - 1)) || col < currentRow.cells().length - 1 && matching(GridRow.getCellElement(currentRow, col + 1)) || row > 0 && matching(GridRow.getCellElement(grid[row - 1], col)) || row < grid.length - 1 && matching(GridRow.getCellElement(grid[row + 1], col)));\n    };\n    var mergeTables = function (startAddress, gridA, gridB, generator, comparator) {\n      var startRow = startAddress.row();\n      var startCol = startAddress.column();\n      var mergeHeight = gridB.length;\n      var mergeWidth = GridRow.cellLength(gridB[0]);\n      var endRow = startRow + mergeHeight;\n      var endCol = startCol + mergeWidth;\n      for (var r = startRow; r < endRow; r++) {\n        for (var c = startCol; c < endCol; c++) {\n          if (isSpanning(gridA, r, c, comparator)) {\n            MergingOperations.unmerge(gridA, GridRow.getCellElement(gridA[r], c), comparator, generator.cell);\n          }\n          var newCell = GridRow.getCellElement(gridB[r - startRow], c - startCol);\n          var replacement = generator.replace(newCell);\n          GridRow.mutateCell(gridA[r], c, elementnew(replacement, true));\n        }\n      }\n      return gridA;\n    };\n    var merge$1 = function (startAddress, gridA, gridB, generator, comparator) {\n      var result = Fitment.measure(startAddress, gridA, gridB);\n      return result.map(function (delta) {\n        var fittedGrid = Fitment.tailor(gridA, delta, generator);\n        return mergeTables(startAddress, fittedGrid, gridB, generator, comparator);\n      });\n    };\n    var insert = function (index, gridA, gridB, generator, comparator) {\n      MergingOperations.splitRows(gridA, index, comparator, generator.cell);\n      var delta = Fitment.measureWidth(gridB, gridA);\n      var fittedNewGrid = Fitment.tailor(gridB, delta, generator);\n      var secondDelta = Fitment.measureWidth(gridA, fittedNewGrid);\n      var fittedOldGrid = Fitment.tailor(gridA, secondDelta, generator);\n      return fittedOldGrid.slice(0, index).concat(fittedNewGrid).concat(fittedOldGrid.slice(index, fittedOldGrid.length));\n    };\n    var TableMerge = {\n      merge: merge$1,\n      insert: insert\n    };\n\n    var insertRowAt = function (grid, index, example, comparator, substitution) {\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[example], function (ex, c) {\n        var withinSpan = index > 0 && index < grid.length && comparator(GridRow.getCellElement(grid[index - 1], c), GridRow.getCellElement(grid[index], c));\n        var ret = withinSpan ? GridRow.getCell(grid[index], c) : elementnew(substitution(ex.element(), comparator), true);\n        return ret;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var insertColumnAt = function (grid, index, example, comparator, substitution) {\n      return map(grid, function (row) {\n        var withinSpan = index > 0 && index < GridRow.cellLength(row) && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n        var sub = withinSpan ? GridRow.getCell(row, index) : elementnew(substitution(GridRow.getCellElement(row, example), comparator), true);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoColumns = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleCol + 1;\n      return map(grid, function (row, i) {\n        var isTargetCell = i === exampleRow;\n        var sub = isTargetCell ? elementnew(substitution(GridRow.getCellElement(row, exampleCol), comparator), true) : GridRow.getCell(row, exampleCol);\n        return GridRow.addCell(row, index, sub);\n      });\n    };\n    var splitCellIntoRows = function (grid, exampleRow, exampleCol, comparator, substitution) {\n      var index = exampleRow + 1;\n      var before = grid.slice(0, index);\n      var after = grid.slice(index);\n      var between = GridRow.mapCells(grid[exampleRow], function (ex, i) {\n        var isTargetCell = i === exampleCol;\n        return isTargetCell ? elementnew(substitution(ex.element(), comparator), true) : ex;\n      });\n      return before.concat([between]).concat(after);\n    };\n    var deleteColumnsAt = function (grid, start, finish) {\n      var rows = map(grid, function (row) {\n        var cells = row.cells().slice(0, start).concat(row.cells().slice(finish + 1));\n        return rowcells(cells, row.section());\n      });\n      return filter(rows, function (row) {\n        return row.cells().length > 0;\n      });\n    };\n    var deleteRowsAt = function (grid, start, finish) {\n      return grid.slice(0, start).concat(grid.slice(finish + 1));\n    };\n    var ModificationOperations = {\n      insertRowAt: insertRowAt,\n      insertColumnAt: insertColumnAt,\n      splitCellIntoColumns: splitCellIntoColumns,\n      splitCellIntoRows: splitCellIntoRows,\n      deleteRowsAt: deleteRowsAt,\n      deleteColumnsAt: deleteColumnsAt\n    };\n\n    var replaceIn = function (grid, targets, comparator, substitution) {\n      var isTarget = function (cell) {\n        return exists(targets, function (target) {\n          return comparator(cell.element(), target.element());\n        });\n      };\n      return map(grid, function (row) {\n        return GridRow.mapCells(row, function (cell) {\n          return isTarget(cell) ? elementnew(substitution(cell.element(), comparator), true) : cell;\n        });\n      });\n    };\n    var notStartRow = function (grid, rowIndex, colIndex, comparator) {\n      return GridRow.getCellElement(grid[rowIndex], colIndex) !== undefined && (rowIndex > 0 && comparator(GridRow.getCellElement(grid[rowIndex - 1], colIndex), GridRow.getCellElement(grid[rowIndex], colIndex)));\n    };\n    var notStartColumn = function (row, index, comparator) {\n      return index > 0 && comparator(GridRow.getCellElement(row, index - 1), GridRow.getCellElement(row, index));\n    };\n    var replaceColumn = function (grid, index, comparator, substitution) {\n      var targets = bind(grid, function (row, i) {\n        var alreadyAdded = notStartRow(grid, i, index, comparator) || notStartColumn(row, index, comparator);\n        return alreadyAdded ? [] : [GridRow.getCell(row, index)];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var replaceRow = function (grid, index, comparator, substitution) {\n      var targetRow = grid[index];\n      var targets = bind(targetRow.cells(), function (item, i) {\n        var alreadyAdded = notStartRow(grid, index, i, comparator) || notStartColumn(targetRow, i, comparator);\n        return alreadyAdded ? [] : [item];\n      });\n      return replaceIn(grid, targets, comparator, substitution);\n    };\n    var TransformOperations = {\n      replaceColumn: replaceColumn,\n      replaceRow: replaceRow\n    };\n\n    var adt = Adt.generate([\n      { none: [] },\n      { only: ['index'] },\n      {\n        left: [\n          'index',\n          'next'\n        ]\n      },\n      {\n        middle: [\n          'prev',\n          'index',\n          'next'\n        ]\n      },\n      {\n        right: [\n          'prev',\n          'index'\n        ]\n      }\n    ]);\n    var ColumnContext = __assign({}, adt);\n\n    var neighbours$1 = function (input, index) {\n      if (input.length === 0) {\n        return ColumnContext.none();\n      }\n      if (input.length === 1) {\n        return ColumnContext.only(0);\n      }\n      if (index === 0) {\n        return ColumnContext.left(0, 1);\n      }\n      if (index === input.length - 1) {\n        return ColumnContext.right(index - 1, index);\n      }\n      if (index > 0 && index < input.length - 1) {\n        return ColumnContext.middle(index - 1, index, index + 1);\n      }\n      return ColumnContext.none();\n    };\n    var determine = function (input, column, step, tableSize) {\n      var result = input.slice(0);\n      var context = neighbours$1(input, column);\n      var zero = function (array) {\n        return map(array, constant(0));\n      };\n      var onNone = constant(zero(result));\n      var onOnly = function (index) {\n        return tableSize.singleColumnWidth(result[index], step);\n      };\n      var onChange = function (index, next) {\n        if (step >= 0) {\n          var newNext = Math.max(tableSize.minCellWidth(), result[next] - step);\n          return zero(result.slice(0, index)).concat([\n            step,\n            newNext - result[next]\n          ]).concat(zero(result.slice(next + 1)));\n        } else {\n          var newThis = Math.max(tableSize.minCellWidth(), result[index] + step);\n          var diffx = result[index] - newThis;\n          return zero(result.slice(0, index)).concat([\n            newThis - result[index],\n            diffx\n          ]).concat(zero(result.slice(next + 1)));\n        }\n      };\n      var onLeft = onChange;\n      var onMiddle = function (_prev, index, next) {\n        return onChange(index, next);\n      };\n      var onRight = function (_prev, index) {\n        if (step >= 0) {\n          return zero(result.slice(0, index)).concat([step]);\n        } else {\n          var size = Math.max(tableSize.minCellWidth(), result[index] + step);\n          return zero(result.slice(0, index)).concat([size - result[index]]);\n        }\n      };\n      return context.fold(onNone, onOnly, onLeft, onMiddle, onRight);\n    };\n    var Deltas = { determine: determine };\n\n    var getSpan$1 = function (cell, type) {\n      return has(cell, type) && parseInt(get(cell, type), 10) > 1;\n    };\n    var hasColspan = function (cell) {\n      return getSpan$1(cell, 'colspan');\n    };\n    var hasRowspan = function (cell) {\n      return getSpan$1(cell, 'rowspan');\n    };\n    var getInt = function (element, property) {\n      return parseInt(get$1(element, property), 10);\n    };\n    var CellUtils = {\n      hasColspan: hasColspan,\n      hasRowspan: hasRowspan,\n      minWidth: constant(10),\n      minHeight: constant(10),\n      getInt: getInt\n    };\n\n    var getRaw$1 = function (cell, property, getter) {\n      return getRaw(cell, property).fold(function () {\n        return getter(cell) + 'px';\n      }, function (raw) {\n        return raw;\n      });\n    };\n    var getRawW = function (cell, tableSize) {\n      return getRaw$1(cell, 'width', function (e) {\n        return Sizes.getPixelWidth(e, tableSize);\n      });\n    };\n    var getRawH = function (cell) {\n      return getRaw$1(cell, 'height', Sizes.getHeight);\n    };\n    var getWidthFrom = function (warehouse, direction, getWidth, fallback, tableSize) {\n      var columns = Blocks.columns(warehouse);\n      var backups = map(columns, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(columns, function (cellOption, c) {\n        var columnCell = cellOption.filter(not(CellUtils.hasColspan));\n        return columnCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getWidth(cell, tableSize);\n        });\n      });\n    };\n    var getDeduced = function (deduced) {\n      return deduced.map(function (d) {\n        return d + 'px';\n      }).getOr('');\n    };\n    var getRawWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, getRawW, getDeduced, tableSize);\n    };\n    var getPercentageWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPercentageWidth, function (deduced) {\n        return deduced.fold(function () {\n          return tableSize.minCellWidth();\n        }, function (cellWidth) {\n          return cellWidth / tableSize.pixelWidth() * 100;\n        });\n      }, tableSize);\n    };\n    var getPixelWidths = function (warehouse, direction, tableSize) {\n      return getWidthFrom(warehouse, direction, Sizes.getPixelWidth, function (deduced) {\n        return deduced.getOrThunk(tableSize.minCellWidth);\n      }, tableSize);\n    };\n    var getHeightFrom = function (warehouse, direction, getHeight, fallback) {\n      var rows = Blocks.rows(warehouse);\n      var backups = map(rows, function (cellOption) {\n        return cellOption.map(direction.edge);\n      });\n      return map(rows, function (cellOption, c) {\n        var rowCell = cellOption.filter(not(CellUtils.hasRowspan));\n        return rowCell.fold(function () {\n          var deduced = deduce(backups, c);\n          return fallback(deduced);\n        }, function (cell) {\n          return getHeight(cell);\n        });\n      });\n    };\n    var getPixelHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, Sizes.getHeight, function (deduced) {\n        return deduced.getOrThunk(CellUtils.minHeight);\n      });\n    };\n    var getRawHeights = function (warehouse, direction) {\n      return getHeightFrom(warehouse, direction, getRawH, getDeduced);\n    };\n    var ColumnSizes = {\n      getRawWidths: getRawWidths,\n      getPixelWidths: getPixelWidths,\n      getPercentageWidths: getPercentageWidths,\n      getPixelHeights: getPixelHeights,\n      getRawHeights: getRawHeights\n    };\n\n    var total = function (start, end, measures) {\n      var r = 0;\n      for (var i = start; i < end; i++) {\n        r += measures[i] !== undefined ? measures[i] : 0;\n      }\n      return r;\n    };\n    var recalculateWidth = function (warehouse, widths) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var width = total(cell.column(), cell.column() + cell.colspan(), widths);\n        return {\n          element: cell.element,\n          width: constant(width),\n          colspan: cell.colspan\n        };\n      });\n    };\n    var recalculateHeight = function (warehouse, heights) {\n      var all = Warehouse.justCells(warehouse);\n      return map(all, function (cell) {\n        var height = total(cell.row(), cell.row() + cell.rowspan(), heights);\n        return {\n          element: cell.element,\n          height: constant(height),\n          rowspan: cell.rowspan\n        };\n      });\n    };\n    var matchRowHeight = function (warehouse, heights) {\n      return map(warehouse.all(), function (row, i) {\n        return {\n          element: row.element,\n          height: constant(heights[i])\n        };\n      });\n    };\n    var Recalculations = {\n      recalculateWidth: recalculateWidth,\n      recalculateHeight: recalculateHeight,\n      matchRowHeight: matchRowHeight\n    };\n\n    var percentageSize = function (width, element) {\n      var floatWidth = parseFloat(width);\n      var pixelWidth = get$4(element);\n      var getCellDelta = function (delta) {\n        return delta / pixelWidth * 100;\n      };\n      var singleColumnWidth = function (w, _delta) {\n        return [100 - w];\n      };\n      var minCellWidth = function () {\n        return CellUtils.minWidth() / pixelWidth * 100;\n      };\n      var setTableWidth = function (table, _newWidths, delta) {\n        var ratio = delta / 100;\n        var change = ratio * floatWidth;\n        Sizes.setPercentageWidth(table, floatWidth + change);\n      };\n      return {\n        width: constant(floatWidth),\n        pixelWidth: constant(pixelWidth),\n        getWidths: ColumnSizes.getPercentageWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: minCellWidth,\n        setElementWidth: Sizes.setPercentageWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var pixelSize = function (width) {\n      var getCellDelta = identity;\n      var singleColumnWidth = function (w, delta) {\n        var newNext = Math.max(CellUtils.minWidth(), w + delta);\n        return [newNext - w];\n      };\n      var setTableWidth = function (table, newWidths, _delta) {\n        var total = foldr(newWidths, function (b, a) {\n          return b + a;\n        }, 0);\n        Sizes.setPixelWidth(table, total);\n      };\n      return {\n        width: constant(width),\n        pixelWidth: constant(width),\n        getWidths: ColumnSizes.getPixelWidths,\n        getCellDelta: getCellDelta,\n        singleColumnWidth: singleColumnWidth,\n        minCellWidth: CellUtils.minWidth,\n        setElementWidth: Sizes.setPixelWidth,\n        setTableWidth: setTableWidth\n      };\n    };\n    var chooseSize = function (element, width) {\n      var percentMatch = Sizes.percentageBasedSizeRegex().exec(width);\n      if (percentMatch !== null) {\n        return percentageSize(percentMatch[1], element);\n      }\n      var pixelMatch = Sizes.pixelBasedSizeRegex().exec(width);\n      if (pixelMatch !== null) {\n        var intWidth = parseInt(pixelMatch[1], 10);\n        return pixelSize(intWidth);\n      }\n      var fallbackWidth = get$4(element);\n      return pixelSize(fallbackWidth);\n    };\n    var getTableSize = function (element) {\n      var width = Sizes.getRawWidth(element);\n      return width.fold(function () {\n        var fallbackWidth = get$4(element);\n        return pixelSize(fallbackWidth);\n      }, function (w) {\n        return chooseSize(element, w);\n      });\n    };\n    var TableSize = { getTableSize: getTableSize };\n\n    var getWarehouse$1 = function (list) {\n      return Warehouse.generate(list);\n    };\n    var sumUp = function (newSize) {\n      return foldr(newSize, function (b, a) {\n        return b + a;\n      }, 0);\n    };\n    var getTableWarehouse = function (table) {\n      var list = DetailsList.fromTable(table);\n      return getWarehouse$1(list);\n    };\n    var adjustWidth = function (table, delta, index, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var step = tableSize.getCellDelta(delta);\n      var warehouse = getTableWarehouse(table);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var deltas = Deltas.determine(widths, index, step, tableSize);\n      var newWidths = map(deltas, function (dx, i) {\n        return dx + widths[i];\n      });\n      var newSizes = Recalculations.recalculateWidth(warehouse, newWidths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (index === warehouse.grid().columns() - 1) {\n        tableSize.setTableWidth(table, newWidths, step);\n      }\n    };\n    var adjustHeight = function (table, delta, index, direction) {\n      var warehouse = getTableWarehouse(table);\n      var heights = ColumnSizes.getPixelHeights(warehouse, direction);\n      var newHeights = map(heights, function (dy, i) {\n        return index === i ? Math.max(delta + dy, CellUtils.minHeight()) : dy;\n      });\n      var newCellSizes = Recalculations.recalculateHeight(warehouse, newHeights);\n      var newRowSizes = Recalculations.matchRowHeight(warehouse, newHeights);\n      each(newRowSizes, function (row) {\n        Sizes.setHeight(row.element(), row.height());\n      });\n      each(newCellSizes, function (cell) {\n        Sizes.setHeight(cell.element(), cell.height());\n      });\n      var total = sumUp(newHeights);\n      Sizes.setHeight(table, total);\n    };\n    var adjustWidthTo = function (table, list, direction) {\n      var tableSize = TableSize.getTableSize(table);\n      var warehouse = getWarehouse$1(list);\n      var widths = tableSize.getWidths(warehouse, direction, tableSize);\n      var newSizes = Recalculations.recalculateWidth(warehouse, widths);\n      each(newSizes, function (cell) {\n        tableSize.setElementWidth(cell.element(), cell.width());\n      });\n      if (newSizes.length > 0) {\n        tableSize.setTableWidth(table, widths, tableSize.getCellDelta(0));\n      }\n    };\n    var Adjustments = {\n      adjustWidth: adjustWidth,\n      adjustHeight: adjustHeight,\n      adjustWidthTo: adjustWidthTo\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var base = function (handleUnsupported, required) {\n      return baseWith(handleUnsupported, required, {\n        validate: isFunction,\n        label: 'function'\n      });\n    };\n    var baseWith = function (handleUnsupported, required, pred) {\n      if (required.length === 0) {\n        throw new Error('You must specify at least one required field.');\n      }\n      validateStrArr('required', required);\n      checkDupes(required);\n      return function (obj) {\n        var keys$1 = keys(obj);\n        var allReqd = forall(required, function (req) {\n          return contains(keys$1, req);\n        });\n        if (!allReqd) {\n          reqMessage(required, keys$1);\n        }\n        handleUnsupported(required, keys$1);\n        var invalidKeys = filter(required, function (key) {\n          return !pred.validate(obj[key], key);\n        });\n        if (invalidKeys.length > 0) {\n          invalidTypeMessage(invalidKeys, pred.label);\n        }\n        return obj;\n      };\n    };\n    var handleExact = function (required, keys) {\n      var unsupported = filter(keys, function (key) {\n        return !contains(required, key);\n      });\n      if (unsupported.length > 0) {\n        unsuppMessage(unsupported);\n      }\n    };\n    var exactly = function (required) {\n      return base(handleExact, required);\n    };\n\n    var verifyGenerators = exactly([\n      'cell',\n      'row',\n      'replace',\n      'gap'\n    ]);\n    var elementToData = function (element) {\n      var colspan = has(element, 'colspan') ? parseInt(get(element, 'colspan'), 10) : 1;\n      var rowspan = has(element, 'rowspan') ? parseInt(get(element, 'rowspan'), 10) : 1;\n      return {\n        element: constant(element),\n        colspan: constant(colspan),\n        rowspan: constant(rowspan)\n      };\n    };\n    var modification = function (generators, toData) {\n      if (toData === void 0) {\n        toData = elementToData;\n      }\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var nu = function (data) {\n        return generators.cell(data);\n      };\n      var nuFrom = function (element) {\n        var data = toData(element);\n        return nu(data);\n      };\n      var add = function (element) {\n        var replacement = nuFrom(element);\n        if (position.get().isNone()) {\n          position.set(Option.some(replacement));\n        }\n        recent = Option.some({\n          item: element,\n          replacement: replacement\n        });\n        return replacement;\n      };\n      var recent = Option.none();\n      var getOrInit = function (element, comparator) {\n        return recent.fold(function () {\n          return add(element);\n        }, function (p) {\n          return comparator(element, p.item) ? p.replacement : add(element);\n        });\n      };\n      return {\n        getOrInit: getOrInit,\n        cursor: position.get\n      };\n    };\n    var transform = function (scope, tag) {\n      return function (generators) {\n        var position = Cell(Option.none());\n        verifyGenerators(generators);\n        var list = [];\n        var find$1 = function (element, comparator) {\n          return find(list, function (x) {\n            return comparator(x.item, element);\n          });\n        };\n        var makeNew = function (element) {\n          var attrs = { scope: scope };\n          var cell = generators.replace(element, tag, attrs);\n          list.push({\n            item: element,\n            sub: cell\n          });\n          if (position.get().isNone()) {\n            position.set(Option.some(cell));\n          }\n          return cell;\n        };\n        var replaceOrInit = function (element, comparator) {\n          return find$1(element, comparator).fold(function () {\n            return makeNew(element);\n          }, function (p) {\n            return comparator(element, p.item) ? p.sub : makeNew(element);\n          });\n        };\n        return {\n          replaceOrInit: replaceOrInit,\n          cursor: position.get\n        };\n      };\n    };\n    var merging = function (generators) {\n      verifyGenerators(generators);\n      var position = Cell(Option.none());\n      var combine = function (cell) {\n        if (position.get().isNone()) {\n          position.set(Option.some(cell));\n        }\n        return function () {\n          var raw = generators.cell({\n            element: constant(cell),\n            colspan: constant(1),\n            rowspan: constant(1)\n          });\n          remove$1(raw, 'width');\n          remove$1(cell, 'width');\n          return raw;\n        };\n      };\n      return {\n        combine: combine,\n        cursor: position.get\n      };\n    };\n    var Generators = {\n      modification: modification,\n      transform: transform,\n      merging: merging\n    };\n\n    var blockList = [\n      'body',\n      'p',\n      'div',\n      'article',\n      'aside',\n      'figcaption',\n      'figure',\n      'footer',\n      'header',\n      'nav',\n      'section',\n      'ol',\n      'ul',\n      'table',\n      'thead',\n      'tfoot',\n      'tbody',\n      'caption',\n      'tr',\n      'td',\n      'th',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'blockquote',\n      'pre',\n      'address'\n    ];\n    var isList = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'ol',\n        'ul'\n      ], tagName);\n    };\n    var isBlock = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains(blockList, tagName);\n    };\n    var isFormatting = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'address',\n        'pre',\n        'p',\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isHeading = function (universe, item) {\n      var tagName = universe.property().name(item);\n      return contains([\n        'h1',\n        'h2',\n        'h3',\n        'h4',\n        'h5',\n        'h6'\n      ], tagName);\n    };\n    var isContainer = function (universe, item) {\n      return contains([\n        'div',\n        'li',\n        'td',\n        'th',\n        'blockquote',\n        'body',\n        'caption'\n      ], universe.property().name(item));\n    };\n    var isEmptyTag = function (universe, item) {\n      return contains([\n        'br',\n        'img',\n        'hr',\n        'input'\n      ], universe.property().name(item));\n    };\n    var isFrame = function (universe, item) {\n      return universe.property().name(item) === 'iframe';\n    };\n    var isInline = function (universe, item) {\n      return !(isBlock(universe, item) || isEmptyTag(universe, item)) && universe.property().name(item) !== 'li';\n    };\n    var Structure = {\n      isBlock: isBlock,\n      isList: isList,\n      isFormatting: isFormatting,\n      isHeading: isHeading,\n      isContainer: isContainer,\n      isEmptyTag: isEmptyTag,\n      isFrame: isFrame,\n      isInline: isInline\n    };\n\n    var universe$1 = DomUniverse();\n    var isBlock$1 = function (element) {\n      return Structure.isBlock(universe$1, element);\n    };\n    var isList$1 = function (element) {\n      return Structure.isList(universe$1, element);\n    };\n    var isFormatting$1 = function (element) {\n      return Structure.isFormatting(universe$1, element);\n    };\n    var isHeading$1 = function (element) {\n      return Structure.isHeading(universe$1, element);\n    };\n    var isContainer$1 = function (element) {\n      return Structure.isContainer(universe$1, element);\n    };\n    var isEmptyTag$1 = function (element) {\n      return Structure.isEmptyTag(universe$1, element);\n    };\n    var isFrame$1 = function (element) {\n      return Structure.isFrame(universe$1, element);\n    };\n    var isInline$1 = function (element) {\n      return Structure.isInline(universe$1, element);\n    };\n    var DomStructure = {\n      isBlock: isBlock$1,\n      isList: isList$1,\n      isFormatting: isFormatting$1,\n      isHeading: isHeading$1,\n      isContainer: isContainer$1,\n      isEmptyTag: isEmptyTag$1,\n      isFrame: isFrame$1,\n      isInline: isInline$1\n    };\n\n    var merge$2 = function (cells) {\n      var isBr = function (el) {\n        return name(el) === 'br';\n      };\n      var advancedBr = function (children) {\n        return forall(children, function (c) {\n          return isBr(c) || isText(c) && get$2(c).trim().length === 0;\n        });\n      };\n      var isListItem = function (el) {\n        return name(el) === 'li' || ancestor(el, DomStructure.isList).isSome();\n      };\n      var siblingIsBlock = function (el) {\n        return nextSibling(el).map(function (rightSibling) {\n          if (DomStructure.isBlock(rightSibling)) {\n            return true;\n          }\n          if (DomStructure.isEmptyTag(rightSibling)) {\n            return name(rightSibling) === 'img' ? false : true;\n          }\n          return false;\n        }).getOr(false);\n      };\n      var markCell = function (cell) {\n        return last$1(cell).bind(function (rightEdge) {\n          var rightSiblingIsBlock = siblingIsBlock(rightEdge);\n          return parent(rightEdge).map(function (parent) {\n            return rightSiblingIsBlock === true || isListItem(parent) || isBr(rightEdge) || DomStructure.isBlock(parent) && !eq(cell, parent) ? [] : [Element.fromTag('br')];\n          });\n        }).getOr([]);\n      };\n      var markContent = function () {\n        var content = bind(cells, function (cell) {\n          var children$1 = children(cell);\n          return advancedBr(children$1) ? [] : children$1.concat(markCell(cell));\n        });\n        return content.length === 0 ? [Element.fromTag('br')] : content;\n      };\n      var contents = markContent();\n      empty(cells[0]);\n      append$1(cells[0], contents);\n    };\n    var TableContent = { merge: merge$2 };\n\n    var prune = function (table) {\n      var cells = TableLookup.cells(table);\n      if (cells.length === 0) {\n        remove$2(table);\n      }\n    };\n    var outcome = Immutable('grid', 'cursor');\n    var elementFromGrid = function (grid, row, column) {\n      return findIn(grid, row, column).orThunk(function () {\n        return findIn(grid, 0, 0);\n      });\n    };\n    var findIn = function (grid, row, column) {\n      return Option.from(grid[row]).bind(function (r) {\n        return Option.from(r.cells()[column]).bind(function (c) {\n          return Option.from(c.element());\n        });\n      });\n    };\n    var bundle = function (grid, row, column) {\n      return outcome(grid, findIn(grid, row, column));\n    };\n    var uniqueRows = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.row() === detail.row();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.row() - detailB.row();\n      });\n    };\n    var uniqueColumns = function (details) {\n      return foldl(details, function (rest, detail) {\n        return exists(rest, function (currentDetail) {\n          return currentDetail.column() === detail.column();\n        }) ? rest : rest.concat([detail]);\n      }, []).sort(function (detailA, detailB) {\n        return detailA.column() - detailB.column();\n      });\n    };\n    var insertRowBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsBefore = function (grid, details, comparator, genWrappers) {\n      var example = details[0].row();\n      var targetIndex = details[0].row();\n      var rows = uniqueRows(details);\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertRowAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.row();\n      var targetIndex = detail.row() + detail.rowspan();\n      var newGrid = ModificationOperations.insertRowAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, targetIndex, detail.column());\n    };\n    var insertRowsAfter = function (grid, details, comparator, genWrappers) {\n      var rows = uniqueRows(details);\n      var example = rows[rows.length - 1].row();\n      var targetIndex = rows[rows.length - 1].row() + rows[rows.length - 1].rowspan();\n      var newGrid = foldl(rows, function (newG, _row) {\n        return ModificationOperations.insertRowAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, targetIndex, details[0].column());\n    };\n    var insertColumnBefore = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsBefore = function (grid, details, comparator, genWrappers) {\n      var columns = uniqueColumns(details);\n      var example = columns[0].column();\n      var targetIndex = columns[0].column();\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var insertColumnAfter = function (grid, detail, comparator, genWrappers) {\n      var example = detail.column();\n      var targetIndex = detail.column() + detail.colspan();\n      var newGrid = ModificationOperations.insertColumnAt(grid, targetIndex, example, comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), targetIndex);\n    };\n    var insertColumnsAfter = function (grid, details, comparator, genWrappers) {\n      var example = details[details.length - 1].column();\n      var targetIndex = details[details.length - 1].column() + details[details.length - 1].colspan();\n      var columns = uniqueColumns(details);\n      var newGrid = foldl(columns, function (newG, _row) {\n        return ModificationOperations.insertColumnAt(newG, targetIndex, example, comparator, genWrappers.getOrInit);\n      }, grid);\n      return bundle(newGrid, details[0].row(), targetIndex);\n    };\n    var makeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var makeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeRowHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceRow(grid, detail.row(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var unmakeColumnHeader = function (grid, detail, comparator, genWrappers) {\n      var newGrid = TransformOperations.replaceColumn(grid, detail.column(), comparator, genWrappers.replaceOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoColumns$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoColumns(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var splitCellIntoRows$1 = function (grid, detail, comparator, genWrappers) {\n      var newGrid = ModificationOperations.splitCellIntoRows(grid, detail.row(), detail.column(), comparator, genWrappers.getOrInit);\n      return bundle(newGrid, detail.row(), detail.column());\n    };\n    var eraseColumns = function (grid, details, _comparator, _genWrappers) {\n      var columns = uniqueColumns(details);\n      var newGrid = ModificationOperations.deleteColumnsAt(grid, columns[0].column(), columns[columns.length - 1].column());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var eraseRows = function (grid, details, _comparator, _genWrappers) {\n      var rows = uniqueRows(details);\n      var newGrid = ModificationOperations.deleteRowsAt(grid, rows[0].row(), rows[rows.length - 1].row());\n      var cursor = elementFromGrid(newGrid, details[0].row(), details[0].column());\n      return outcome(newGrid, cursor);\n    };\n    var mergeCells = function (grid, mergable, comparator, _genWrappers) {\n      var cells = mergable.cells();\n      TableContent.merge(cells);\n      var newGrid = MergingOperations.merge(grid, mergable.bounds(), comparator, constant(cells[0]));\n      return outcome(newGrid, Option.from(cells[0]));\n    };\n    var unmergeCells = function (grid, unmergable, comparator, genWrappers) {\n      var newGrid = foldr(unmergable, function (b, cell) {\n        return MergingOperations.unmerge(b, cell, comparator, genWrappers.combine(cell));\n      }, grid);\n      return outcome(newGrid, Option.from(unmergable[0]));\n    };\n    var pasteCells = function (grid, pasteDetails, comparator, _genWrappers) {\n      var gridify = function (table, generators) {\n        var list = DetailsList.fromTable(table);\n        var wh = Warehouse.generate(list);\n        return Transitions.toGrid(wh, generators, true);\n      };\n      var gridB = gridify(pasteDetails.clipboard(), pasteDetails.generators());\n      var startAddress = address(pasteDetails.row(), pasteDetails.column());\n      var mergedGrid = TableMerge.merge(startAddress, grid, gridB, pasteDetails.generators(), comparator);\n      return mergedGrid.fold(function () {\n        return outcome(grid, Option.some(pasteDetails.element()));\n      }, function (nuGrid) {\n        var cursor = elementFromGrid(nuGrid, pasteDetails.row(), pasteDetails.column());\n        return outcome(nuGrid, cursor);\n      });\n    };\n    var gridifyRows = function (rows, generators, example) {\n      var pasteDetails = DetailsList.fromPastedRows(rows, example);\n      var wh = Warehouse.generate(pasteDetails);\n      return Transitions.toGrid(wh, generators, true);\n    };\n    var pasteRowsBefore = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[0].row();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var pasteRowsAfter = function (grid, pasteDetails, comparator, _genWrappers) {\n      var example = grid[pasteDetails.cells[0].row()];\n      var index = pasteDetails.cells[pasteDetails.cells.length - 1].row() + pasteDetails.cells[pasteDetails.cells.length - 1].rowspan();\n      var gridB = gridifyRows(pasteDetails.clipboard(), pasteDetails.generators(), example);\n      var mergedGrid = TableMerge.insert(index, grid, gridB, pasteDetails.generators(), comparator);\n      var cursor = elementFromGrid(mergedGrid, pasteDetails.cells[0].row(), pasteDetails.cells[0].column());\n      return outcome(mergedGrid, cursor);\n    };\n    var resize = Adjustments.adjustWidthTo;\n    var TableOperations = {\n      insertRowBefore: run(insertRowBefore, onCell, noop, noop, Generators.modification),\n      insertRowsBefore: run(insertRowsBefore, onCells, noop, noop, Generators.modification),\n      insertRowAfter: run(insertRowAfter, onCell, noop, noop, Generators.modification),\n      insertRowsAfter: run(insertRowsAfter, onCells, noop, noop, Generators.modification),\n      insertColumnBefore: run(insertColumnBefore, onCell, resize, noop, Generators.modification),\n      insertColumnsBefore: run(insertColumnsBefore, onCells, resize, noop, Generators.modification),\n      insertColumnAfter: run(insertColumnAfter, onCell, resize, noop, Generators.modification),\n      insertColumnsAfter: run(insertColumnsAfter, onCells, resize, noop, Generators.modification),\n      splitCellIntoColumns: run(splitCellIntoColumns$1, onCell, resize, noop, Generators.modification),\n      splitCellIntoRows: run(splitCellIntoRows$1, onCell, noop, noop, Generators.modification),\n      eraseColumns: run(eraseColumns, onCells, resize, prune, Generators.modification),\n      eraseRows: run(eraseRows, onCells, noop, prune, Generators.modification),\n      makeColumnHeader: run(makeColumnHeader, onCell, noop, noop, Generators.transform('row', 'th')),\n      unmakeColumnHeader: run(unmakeColumnHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      makeRowHeader: run(makeRowHeader, onCell, noop, noop, Generators.transform('col', 'th')),\n      unmakeRowHeader: run(unmakeRowHeader, onCell, noop, noop, Generators.transform(null, 'td')),\n      mergeCells: run(mergeCells, onMergable, noop, noop, Generators.merging),\n      unmergeCells: run(unmergeCells, onUnmergable, resize, noop, Generators.merging),\n      pasteCells: run(pasteCells, onPaste, resize, noop, Generators.modification),\n      pasteRowsBefore: run(pasteRowsBefore, onPasteRows, noop, noop, Generators.modification),\n      pasteRowsAfter: run(pasteRowsAfter, onPasteRows, noop, noop, Generators.modification)\n    };\n\n    var getBody$1 = function (editor) {\n      return Element.fromDom(editor.getBody());\n    };\n    var getPixelWidth$1 = function (elm) {\n      return elm.getBoundingClientRect().width;\n    };\n    var getPixelHeight = function (elm) {\n      return elm.getBoundingClientRect().height;\n    };\n    var getIsRoot = function (editor) {\n      return function (element) {\n        return eq(element, getBody$1(editor));\n      };\n    };\n    var removePxSuffix = function (size) {\n      return size ? size.replace(/px$/, '') : '';\n    };\n    var addSizeSuffix = function (size) {\n      if (/^[0-9]+$/.test(size)) {\n        size += 'px';\n      }\n      return size;\n    };\n    var removeDataStyle = function (table) {\n      var dataStyleCells = descendants$1(table, 'td[data-mce-style],th[data-mce-style]');\n      remove(table, 'data-mce-style');\n      each(dataStyleCells, function (cell) {\n        remove(cell, 'data-mce-style');\n      });\n    };\n\n    var getDirection = function (element) {\n      return get$1(element, 'direction') === 'rtl' ? 'rtl' : 'ltr';\n    };\n\n    var ltr$1 = { isRtl: constant(false) };\n    var rtl$1 = { isRtl: constant(true) };\n    var directionAt = function (element) {\n      var dir = getDirection(element);\n      return dir === 'rtl' ? rtl$1 : ltr$1;\n    };\n    var Direction = { directionAt: directionAt };\n\n    var defaultTableToolbar = [\n      'tableprops',\n      'tabledelete',\n      '|',\n      'tableinsertrowbefore',\n      'tableinsertrowafter',\n      'tabledeleterow',\n      '|',\n      'tableinsertcolbefore',\n      'tableinsertcolafter',\n      'tabledeletecol'\n    ];\n    var defaultStyles = {\n      'border-collapse': 'collapse',\n      'width': '100%'\n    };\n    var defaultAttributes = { border: '1' };\n    var getDefaultAttributes = function (editor) {\n      return editor.getParam('table_default_attributes', defaultAttributes, 'object');\n    };\n    var getDefaultStyles = function (editor) {\n      return editor.getParam('table_default_styles', defaultStyles, 'object');\n    };\n    var hasTableResizeBars = function (editor) {\n      return editor.getParam('table_resize_bars', true, 'boolean');\n    };\n    var hasTabNavigation = function (editor) {\n      return editor.getParam('table_tab_navigation', true, 'boolean');\n    };\n    var hasAdvancedCellTab = function (editor) {\n      return editor.getParam('table_cell_advtab', true, 'boolean');\n    };\n    var hasAdvancedRowTab = function (editor) {\n      return editor.getParam('table_row_advtab', true, 'boolean');\n    };\n    var hasAdvancedTableTab = function (editor) {\n      return editor.getParam('table_advtab', true, 'boolean');\n    };\n    var hasAppearanceOptions = function (editor) {\n      return editor.getParam('table_appearance_options', true, 'boolean');\n    };\n    var hasTableGrid = function (editor) {\n      return editor.getParam('table_grid', true, 'boolean');\n    };\n    var shouldStyleWithCss = function (editor) {\n      return editor.getParam('table_style_by_css', false, 'boolean');\n    };\n    var getCellClassList = function (editor) {\n      return editor.getParam('table_cell_class_list', [], 'array');\n    };\n    var getRowClassList = function (editor) {\n      return editor.getParam('table_row_class_list', [], 'array');\n    };\n    var getTableClassList = function (editor) {\n      return editor.getParam('table_class_list', [], 'array');\n    };\n    var getColorPickerCallback = function (editor) {\n      return editor.getParam('color_picker_callback');\n    };\n    var isPixelsForced = function (editor) {\n      return editor.getParam('table_responsive_width') === false;\n    };\n    var getCloneElements = function (editor) {\n      var cloneElements = editor.getParam('table_clone_elements');\n      if (isString(cloneElements)) {\n        return Option.some(cloneElements.split(/[ ,]/));\n      } else if (Array.isArray(cloneElements)) {\n        return Option.some(cloneElements);\n      } else {\n        return Option.none();\n      }\n    };\n    var hasObjectResizing = function (editor) {\n      var objectResizing = editor.getParam('object_resizing', true);\n      return objectResizing === 'table' || objectResizing;\n    };\n    var getToolbar = function (editor) {\n      var toolbar = editor.getParam('table_toolbar', defaultTableToolbar);\n      if (toolbar === '' || toolbar === false) {\n        return [];\n      } else if (isString(toolbar)) {\n        return toolbar.split(/[ ,]/);\n      } else if (isArray(toolbar)) {\n        return toolbar;\n      } else {\n        return [];\n      }\n    };\n\n    var fireNewRow = function (editor, row) {\n      return editor.fire('newrow', { node: row });\n    };\n    var fireNewCell = function (editor, cell) {\n      return editor.fire('newcell', { node: cell });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n\n    var TableActions = function (editor, lazyWire) {\n      var isTableBody = function (editor) {\n        return name(getBody$1(editor)) === 'table';\n      };\n      var lastRowGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.rows() > 1;\n      };\n      var lastColumnGuard = function (table) {\n        var size = TableGridSize.getGridSize(table);\n        return isTableBody(editor) === false || size.columns() > 1;\n      };\n      var cloneFormats = getCloneElements(editor);\n      var execute = function (operation, guard, mutate, lazyWire) {\n        return function (table, target) {\n          removeDataStyle(table);\n          var wire = lazyWire();\n          var doc = Element.fromDom(editor.getDoc());\n          var direction = TableDirection(Direction.directionAt);\n          var generators = TableFill.cellOperations(mutate, doc, cloneFormats);\n          return guard(table) ? operation(wire, table, target, generators, direction).bind(function (result) {\n            each(result.newRows(), function (row) {\n              fireNewRow(editor, row.dom());\n            });\n            each(result.newCells(), function (cell) {\n              fireNewCell(editor, cell.dom());\n            });\n            return result.cursor().map(function (cell) {\n              var rng = editor.dom.createRng();\n              rng.setStart(cell.dom(), 0);\n              rng.setEnd(cell.dom(), 0);\n              return rng;\n            });\n          }) : Option.none();\n        };\n      };\n      var deleteRow = execute(TableOperations.eraseRows, lastRowGuard, noop, lazyWire);\n      var deleteColumn = execute(TableOperations.eraseColumns, lastColumnGuard, noop, lazyWire);\n      var insertRowsBefore = execute(TableOperations.insertRowsBefore, always, noop, lazyWire);\n      var insertRowsAfter = execute(TableOperations.insertRowsAfter, always, noop, lazyWire);\n      var insertColumnsBefore = execute(TableOperations.insertColumnsBefore, always, CellMutations.halve, lazyWire);\n      var insertColumnsAfter = execute(TableOperations.insertColumnsAfter, always, CellMutations.halve, lazyWire);\n      var mergeCells = execute(TableOperations.mergeCells, always, noop, lazyWire);\n      var unmergeCells = execute(TableOperations.unmergeCells, always, noop, lazyWire);\n      var pasteRowsBefore = execute(TableOperations.pasteRowsBefore, always, noop, lazyWire);\n      var pasteRowsAfter = execute(TableOperations.pasteRowsAfter, always, noop, lazyWire);\n      var pasteCells = execute(TableOperations.pasteCells, always, noop, lazyWire);\n      return {\n        deleteRow: deleteRow,\n        deleteColumn: deleteColumn,\n        insertRowsBefore: insertRowsBefore,\n        insertRowsAfter: insertRowsAfter,\n        insertColumnsBefore: insertColumnsBefore,\n        insertColumnsAfter: insertColumnsAfter,\n        mergeCells: mergeCells,\n        unmergeCells: unmergeCells,\n        pasteRowsBefore: pasteRowsBefore,\n        pasteRowsAfter: pasteRowsAfter,\n        pasteCells: pasteCells\n      };\n    };\n\n    var copyRows = function (table, target, generators) {\n      var list = DetailsList.fromTable(table);\n      var house = Warehouse.generate(list);\n      var details = onCells(house, target);\n      return details.map(function (selectedCells) {\n        var grid = Transitions.toGrid(house, generators, false);\n        var slicedGrid = grid.slice(selectedCells[0].row(), selectedCells[selectedCells.length - 1].row() + selectedCells[selectedCells.length - 1].rowspan());\n        var slicedDetails = toDetailList(slicedGrid, generators);\n        return Redraw.copy(slicedDetails);\n      });\n    };\n    var CopyRows = { copyRows: copyRows };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var getTDTHOverallStyle = function (dom, elm, name) {\n      var cells = dom.select('td,th', elm);\n      var firstChildStyle;\n      var checkChildren = function (firstChildStyle, elms) {\n        for (var i = 0; i < elms.length; i++) {\n          var currentStyle = dom.getStyle(elms[i], name);\n          if (typeof firstChildStyle === 'undefined') {\n            firstChildStyle = currentStyle;\n          }\n          if (firstChildStyle !== currentStyle) {\n            return '';\n          }\n        }\n        return firstChildStyle;\n      };\n      firstChildStyle = checkChildren(firstChildStyle, cells);\n      return firstChildStyle;\n    };\n    var applyAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('align' + name, {}, elm);\n      }\n    };\n    var applyVAlign = function (editor, elm, name) {\n      if (name) {\n        editor.formatter.apply('valign' + name, {}, elm);\n      }\n    };\n    var unApplyAlign = function (editor, elm) {\n      global$1.each('left center right'.split(' '), function (name) {\n        editor.formatter.remove('align' + name, {}, elm);\n      });\n    };\n    var unApplyVAlign = function (editor, elm) {\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        editor.formatter.remove('valign' + name, {}, elm);\n      });\n    };\n    var Styles$1 = {\n      applyAlign: applyAlign,\n      applyVAlign: applyVAlign,\n      unApplyAlign: unApplyAlign,\n      unApplyVAlign: unApplyVAlign,\n      getTDTHOverallStyle: getTDTHOverallStyle\n    };\n\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$1.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    function styleFieldHasFocus(e) {\n      return e.control.rootControl.find('#style')[0].getEl().isEqualNode(domGlobals.document.activeElement);\n    }\n    var syncAdvancedStyleFields = function (editor, evt) {\n      if (styleFieldHasFocus(evt)) {\n        updateAdvancedFields(editor, evt);\n      } else {\n        updateStyleField(editor, evt);\n      }\n    };\n    var updateStyleField = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      css['border-style'] = data.borderStyle;\n      css['border-color'] = data.borderColor;\n      css['background-color'] = data.backgroundColor;\n      css.width = data.width ? addSizeSuffix(data.width) : '';\n      css.height = data.height ? addSizeSuffix(data.height) : '';\n      rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n    };\n    var updateAdvancedFields = function (editor, evt) {\n      var dom = editor.dom;\n      var rootControl = evt.control.rootControl;\n      var data = rootControl.toJSON();\n      var css = dom.parseStyle(data.style);\n      rootControl.find('#borderStyle').value(css['border-style'] || '');\n      rootControl.find('#borderColor').value(css['border-color'] || '');\n      rootControl.find('#backgroundColor').value(css['background-color'] || '');\n      rootControl.find('#width').value(css.width || '');\n      rootControl.find('#height').value(css.height || '');\n    };\n    var extractAdvancedStyles = function (dom, elm) {\n      var css = dom.parseStyle(dom.getAttrib(elm, 'style'));\n      var data = {};\n      if (css['border-style']) {\n        data.borderStyle = css['border-style'];\n      }\n      if (css['border-color']) {\n        data.borderColor = css['border-color'];\n      }\n      if (css['background-color']) {\n        data.backgroundColor = css['background-color'];\n      }\n      data.style = dom.serializeStyle(css);\n      return data;\n    };\n    var createStyleForm = function (editor) {\n      var createColorPickAction = function () {\n        var colorPickerCallback = getColorPickerCallback(editor);\n        if (colorPickerCallback) {\n          return function (evt) {\n            return colorPickerCallback.call(editor, function (value) {\n              evt.control.value(value).fire('change');\n            }, evt.control.value());\n          };\n        }\n      };\n      return {\n        title: 'Advanced',\n        type: 'form',\n        defaults: { onchange: curry(updateStyleField, editor) },\n        items: [\n          {\n            label: 'Style',\n            name: 'style',\n            type: 'textbox',\n            onchange: curry(updateAdvancedFields, editor)\n          },\n          {\n            type: 'form',\n            padding: 0,\n            formItemDefaults: {\n              layout: 'grid',\n              alignH: [\n                'start',\n                'right'\n              ]\n            },\n            defaults: { size: 7 },\n            items: [\n              {\n                label: 'Border style',\n                type: 'listbox',\n                name: 'borderStyle',\n                width: 90,\n                onselect: curry(updateStyleField, editor),\n                values: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              },\n              {\n                label: 'Border color',\n                type: 'colorbox',\n                name: 'borderColor',\n                onaction: createColorPickAction()\n              },\n              {\n                label: 'Background color',\n                type: 'colorbox',\n                name: 'backgroundColor',\n                onaction: createColorPickAction()\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var Helpers = {\n      createStyleForm: createStyleForm,\n      buildListItems: buildListItems,\n      updateStyleField: updateStyleField,\n      extractAdvancedStyles: extractAdvancedStyles,\n      updateAdvancedFields: updateAdvancedFields,\n      syncAdvancedStyleFields: syncAdvancedStyleFields\n    };\n\n    var updateStyles = function (elm, cssText) {\n      delete elm.dataset.mceStyle;\n      elm.style.cssText += ';' + cssText;\n    };\n    var extractDataFromElement = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(elm, 'width') || dom.getAttrib(elm, 'width'),\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        type: elm.nodeName.toLowerCase(),\n        style: '',\n        align: '',\n        valign: ''\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      global$1.each('top middle bottom'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'valign' + name)) {\n          data.valign = name;\n        }\n      });\n      if (hasAdvancedCellTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, elm));\n      }\n      return data;\n    };\n    var onSubmitCellForm = function (editor, cells, evt) {\n      var dom = editor.dom;\n      var data;\n      function setAttrib(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n      function setStyle(elm, name, value) {\n        if (cells.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n      if (hasAdvancedCellTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(cells, function (cellElm) {\n          setAttrib(cellElm, 'scope', data.scope);\n          if (cells.length === 1) {\n            setAttrib(cellElm, 'style', data.style);\n          } else {\n            updateStyles(cellElm, data.style);\n          }\n          setAttrib(cellElm, 'class', data.class);\n          setStyle(cellElm, 'width', addSizeSuffix(data.width));\n          setStyle(cellElm, 'height', addSizeSuffix(data.height));\n          if (data.type && cellElm.nodeName.toLowerCase() !== data.type) {\n            cellElm = dom.rename(cellElm, data.type);\n          }\n          if (cells.length === 1) {\n            Styles$1.unApplyAlign(editor, cellElm);\n            Styles$1.unApplyVAlign(editor, cellElm);\n          }\n          if (data.align) {\n            Styles$1.applyAlign(editor, cellElm, data.align);\n          }\n          if (data.valign) {\n            Styles$1.applyVAlign(editor, cellElm, data.valign);\n          }\n        });\n        editor.focus();\n      });\n    };\n    var open = function (editor) {\n      var cellElm, data, classListCtrl, cells = [];\n      cells = editor.dom.select('td[data-mce-selected],th[data-mce-selected]');\n      cellElm = editor.dom.getParent(editor.selection.getStart(), 'td,th');\n      if (!cells.length && cellElm) {\n        cells.push(cellElm);\n      }\n      cellElm = cellElm || cells[0];\n      if (!cellElm) {\n        return;\n      }\n      if (cells.length > 1) {\n        data = {\n          width: '',\n          height: '',\n          scope: '',\n          class: '',\n          align: '',\n          valign: '',\n          style: '',\n          type: cellElm.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement(editor, cellElm);\n      }\n      if (getCellClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getCellClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'td',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      var generalCellForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [\n          {\n            type: 'form',\n            layout: 'grid',\n            columns: 2,\n            labelGapCalc: false,\n            padding: 0,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50\n            },\n            items: [\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Cell type',\n                name: 'type',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'Cell',\n                    value: 'td'\n                  },\n                  {\n                    text: 'Header cell',\n                    value: 'th'\n                  }\n                ]\n              },\n              {\n                label: 'Scope',\n                name: 'scope',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Row',\n                    value: 'row'\n                  },\n                  {\n                    text: 'Column',\n                    value: 'col'\n                  },\n                  {\n                    text: 'Row group',\n                    value: 'rowgroup'\n                  },\n                  {\n                    text: 'Column group',\n                    value: 'colgroup'\n                  }\n                ]\n              },\n              {\n                label: 'H Align',\n                name: 'align',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Left',\n                    value: 'left'\n                  },\n                  {\n                    text: 'Center',\n                    value: 'center'\n                  },\n                  {\n                    text: 'Right',\n                    value: 'right'\n                  }\n                ]\n              },\n              {\n                label: 'V Align',\n                name: 'valign',\n                type: 'listbox',\n                text: 'None',\n                minWidth: 90,\n                maxWidth: null,\n                values: [\n                  {\n                    text: 'None',\n                    value: ''\n                  },\n                  {\n                    text: 'Top',\n                    value: 'top'\n                  },\n                  {\n                    text: 'Middle',\n                    value: 'middle'\n                  },\n                  {\n                    text: 'Bottom',\n                    value: 'bottom'\n                  }\n                ]\n              }\n            ]\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedCellTab(editor)) {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          bodyType: 'tabpanel',\n          data: data,\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalCellForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Cell properties',\n          data: data,\n          body: generalCellForm,\n          onsubmit: curry(onSubmitCellForm, editor, cells)\n        });\n      }\n    };\n    var CellDialog = { open: open };\n\n    var extractDataFromElement$1 = function (editor, elm) {\n      var dom = editor.dom;\n      var data = {\n        height: dom.getStyle(elm, 'height') || dom.getAttrib(elm, 'height'),\n        scope: dom.getAttrib(elm, 'scope'),\n        class: dom.getAttrib(elm, 'class'),\n        align: '',\n        style: '',\n        type: elm.parentNode.nodeName.toLowerCase()\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(elm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      if (hasAdvancedRowTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, elm));\n      }\n      return data;\n    };\n    var switchRowType = function (dom, rowElm, toType) {\n      var tableElm = dom.getParent(rowElm, 'table');\n      var oldParentElm = rowElm.parentNode;\n      var parentElm = dom.select(toType, tableElm)[0];\n      if (!parentElm) {\n        parentElm = dom.create(toType);\n        if (tableElm.firstChild) {\n          if (tableElm.firstChild.nodeName === 'CAPTION') {\n            dom.insertAfter(parentElm, tableElm.firstChild);\n          } else {\n            tableElm.insertBefore(parentElm, tableElm.firstChild);\n          }\n        } else {\n          tableElm.appendChild(parentElm);\n        }\n      }\n      parentElm.appendChild(rowElm);\n      if (!oldParentElm.hasChildNodes()) {\n        dom.remove(oldParentElm);\n      }\n    };\n    function onSubmitRowForm(editor, rows, oldData, evt) {\n      var dom = editor.dom;\n      function setAttrib(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setAttrib(elm, name, value);\n        }\n      }\n      function setStyle(elm, name, value) {\n        if (rows.length === 1 || value) {\n          dom.setStyle(elm, name, value);\n        }\n      }\n      if (hasAdvancedRowTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      var data = evt.control.rootControl.toJSON();\n      editor.undoManager.transact(function () {\n        global$1.each(rows, function (rowElm) {\n          setAttrib(rowElm, 'scope', data.scope);\n          setAttrib(rowElm, 'style', data.style);\n          setAttrib(rowElm, 'class', data.class);\n          setStyle(rowElm, 'height', addSizeSuffix(data.height));\n          if (data.type !== rowElm.parentNode.nodeName.toLowerCase()) {\n            switchRowType(editor.dom, rowElm, data.type);\n          }\n          if (data.align !== oldData.align) {\n            Styles$1.unApplyAlign(editor, rowElm);\n            Styles$1.applyAlign(editor, rowElm, data.align);\n          }\n        });\n        editor.focus();\n      });\n    }\n    var open$1 = function (editor) {\n      var dom = editor.dom;\n      var tableElm, cellElm, rowElm, classListCtrl, data;\n      var rows = [];\n      var generalRowForm;\n      tableElm = dom.getParent(editor.selection.getStart(), 'table');\n      cellElm = dom.getParent(editor.selection.getStart(), 'td,th');\n      global$1.each(tableElm.rows, function (row) {\n        global$1.each(row.cells, function (cell) {\n          if (dom.getAttrib(cell, 'data-mce-selected') || cell === cellElm) {\n            rows.push(row);\n            return false;\n          }\n        });\n      });\n      rowElm = rows[0];\n      if (!rowElm) {\n        return;\n      }\n      if (rows.length > 1) {\n        data = {\n          height: '',\n          scope: '',\n          style: '',\n          class: '',\n          align: '',\n          type: rowElm.parentNode.nodeName.toLowerCase()\n        };\n      } else {\n        data = extractDataFromElement$1(editor, rowElm);\n      }\n      if (getRowClassList(editor).length > 0) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getRowClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'tr',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      generalRowForm = {\n        type: 'form',\n        columns: 2,\n        padding: 0,\n        defaults: { type: 'textbox' },\n        items: [\n          {\n            type: 'listbox',\n            name: 'type',\n            label: 'Row type',\n            text: 'Header',\n            maxWidth: null,\n            values: [\n              {\n                text: 'Header',\n                value: 'thead'\n              },\n              {\n                text: 'Body',\n                value: 'tbody'\n              },\n              {\n                text: 'Footer',\n                value: 'tfoot'\n              }\n            ]\n          },\n          {\n            type: 'listbox',\n            name: 'align',\n            label: 'Alignment',\n            text: 'None',\n            maxWidth: null,\n            values: [\n              {\n                text: 'None',\n                value: ''\n              },\n              {\n                text: 'Left',\n                value: 'left'\n              },\n              {\n                text: 'Center',\n                value: 'center'\n              },\n              {\n                text: 'Right',\n                value: 'right'\n              }\n            ]\n          },\n          {\n            label: 'Height',\n            name: 'height'\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedRowTab(editor)) {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalRowForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Row properties',\n          data: data,\n          body: generalRowForm,\n          onsubmit: curry(onSubmitRowForm, editor, rows, data)\n        });\n      }\n    };\n    var RowDialog = { open: open$1 };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var DefaultRenderOptions = {\n      styles: {\n        'border-collapse': 'collapse',\n        'width': '100%'\n      },\n      attributes: { border: '1' },\n      percentages: true\n    };\n    var makeTable = function () {\n      return Element.fromTag('table');\n    };\n    var tableBody = function () {\n      return Element.fromTag('tbody');\n    };\n    var tableRow = function () {\n      return Element.fromTag('tr');\n    };\n    var tableHeaderCell = function () {\n      return Element.fromTag('th');\n    };\n    var tableCell = function () {\n      return Element.fromTag('td');\n    };\n    var render$1 = function (rows, columns, rowHeaders, columnHeaders, renderOpts) {\n      if (renderOpts === void 0) {\n        renderOpts = DefaultRenderOptions;\n      }\n      var table = makeTable();\n      setAll$1(table, renderOpts.styles);\n      setAll(table, renderOpts.attributes);\n      var tbody = tableBody();\n      append(table, tbody);\n      var trs = [];\n      for (var i = 0; i < rows; i++) {\n        var tr = tableRow();\n        for (var j = 0; j < columns; j++) {\n          var td = i < rowHeaders || j < columnHeaders ? tableHeaderCell() : tableCell();\n          if (j < columnHeaders) {\n            set(td, 'scope', 'row');\n          }\n          if (i < rowHeaders) {\n            set(td, 'scope', 'col');\n          }\n          append(td, Element.fromTag('br'));\n          if (renderOpts.percentages) {\n            set$1(td, 'width', 100 / columns + '%');\n          }\n          append(tr, td);\n        }\n        trs.push(tr);\n      }\n      append$1(tbody, trs);\n      return table;\n    };\n\n    var get$7 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var getOuter$2 = function (element) {\n      var container = Element.fromTag('div');\n      var clone = Element.fromDom(element.dom().cloneNode(true));\n      append(container, clone);\n      return get$7(container);\n    };\n\n    var placeCaretInCell = function (editor, cell) {\n      editor.selection.select(cell.dom(), true);\n      editor.selection.collapse(true);\n    };\n    var selectFirstCellInTable = function (editor, tableElm) {\n      descendant$1(tableElm, 'td,th').each(curry(placeCaretInCell, editor));\n    };\n    var fireEvents = function (editor, table) {\n      each(descendants$1(table, 'tr'), function (row) {\n        fireNewRow(editor, row.dom());\n        each(descendants$1(row, 'th,td'), function (cell) {\n          fireNewCell(editor, cell.dom());\n        });\n      });\n    };\n    var isPercentage = function (width) {\n      return isString(width) && width.indexOf('%') !== -1;\n    };\n    var insert$1 = function (editor, columns, rows) {\n      var defaultStyles = getDefaultStyles(editor);\n      var options = {\n        styles: defaultStyles,\n        attributes: getDefaultAttributes(editor),\n        percentages: isPercentage(defaultStyles.width) && !isPixelsForced(editor)\n      };\n      var table = render$1(rows, columns, 0, 0, options);\n      set(table, 'data-mce-id', '__mce');\n      var html = getOuter$2(table);\n      editor.insertContent(html);\n      return descendant$1(getBody$1(editor), 'table[data-mce-id=\"__mce\"]').map(function (table) {\n        if (isPixelsForced(editor)) {\n          set$1(table, 'width', get$1(table, 'width'));\n        }\n        remove(table, 'data-mce-id');\n        fireEvents(editor, table);\n        selectFirstCellInTable(editor, table);\n        return table.dom();\n      }).getOr(null);\n    };\n    var InsertTable = { insert: insert$1 };\n\n    function styleTDTH(dom, elm, name, value) {\n      if (elm.tagName === 'TD' || elm.tagName === 'TH') {\n        dom.setStyle(elm, name, value);\n      } else {\n        if (elm.children) {\n          for (var i = 0; i < elm.children.length; i++) {\n            styleTDTH(dom, elm.children[i], name, value);\n          }\n        }\n      }\n    }\n    var extractDataFromElement$2 = function (editor, tableElm) {\n      var dom = editor.dom;\n      var data = {\n        width: dom.getStyle(tableElm, 'width') || dom.getAttrib(tableElm, 'width'),\n        height: dom.getStyle(tableElm, 'height') || dom.getAttrib(tableElm, 'height'),\n        cellspacing: dom.getStyle(tableElm, 'border-spacing') || dom.getAttrib(tableElm, 'cellspacing'),\n        cellpadding: dom.getAttrib(tableElm, 'data-mce-cell-padding') || dom.getAttrib(tableElm, 'cellpadding') || Styles$1.getTDTHOverallStyle(editor.dom, tableElm, 'padding'),\n        border: dom.getAttrib(tableElm, 'data-mce-border') || dom.getAttrib(tableElm, 'border') || Styles$1.getTDTHOverallStyle(editor.dom, tableElm, 'border'),\n        borderColor: dom.getAttrib(tableElm, 'data-mce-border-color'),\n        caption: !!dom.select('caption', tableElm)[0],\n        class: dom.getAttrib(tableElm, 'class')\n      };\n      global$1.each('left center right'.split(' '), function (name) {\n        if (editor.formatter.matchNode(tableElm, 'align' + name)) {\n          data.align = name;\n        }\n      });\n      if (hasAdvancedTableTab(editor)) {\n        global$1.extend(data, Helpers.extractAdvancedStyles(dom, tableElm));\n      }\n      return data;\n    };\n    var applyDataToElement = function (editor, tableElm, data) {\n      var dom = editor.dom;\n      var attrs = {};\n      var styles = {};\n      attrs.class = data.class;\n      styles.height = addSizeSuffix(data.height);\n      if (dom.getAttrib(tableElm, 'width') && !shouldStyleWithCss(editor)) {\n        attrs.width = removePxSuffix(data.width);\n      } else {\n        styles.width = addSizeSuffix(data.width);\n      }\n      if (shouldStyleWithCss(editor)) {\n        styles['border-width'] = addSizeSuffix(data.border);\n        styles['border-spacing'] = addSizeSuffix(data.cellspacing);\n        global$1.extend(attrs, {\n          'data-mce-border-color': data.borderColor,\n          'data-mce-cell-padding': data.cellpadding,\n          'data-mce-border': data.border\n        });\n      } else {\n        global$1.extend(attrs, {\n          border: data.border,\n          cellpadding: data.cellpadding,\n          cellspacing: data.cellspacing\n        });\n      }\n      if (shouldStyleWithCss(editor)) {\n        if (tableElm.children) {\n          for (var i = 0; i < tableElm.children.length; i++) {\n            styleTDTH(dom, tableElm.children[i], {\n              'border-width': addSizeSuffix(data.border),\n              'border-color': data.borderColor,\n              'padding': addSizeSuffix(data.cellpadding)\n            });\n          }\n        }\n      }\n      if (data.style) {\n        global$1.extend(styles, dom.parseStyle(data.style));\n      } else {\n        styles = global$1.extend({}, dom.parseStyle(dom.getAttrib(tableElm, 'style')), styles);\n      }\n      attrs.style = dom.serializeStyle(styles);\n      dom.setAttribs(tableElm, attrs);\n    };\n    var onSubmitTableForm = function (editor, tableElm, evt) {\n      var dom = editor.dom;\n      var captionElm;\n      var data;\n      if (hasAdvancedTableTab(editor)) {\n        Helpers.syncAdvancedStyleFields(editor, evt);\n      }\n      data = evt.control.rootControl.toJSON();\n      if (data.class === false) {\n        delete data.class;\n      }\n      editor.undoManager.transact(function () {\n        if (!tableElm) {\n          tableElm = InsertTable.insert(editor, data.cols || 1, data.rows || 1);\n        }\n        applyDataToElement(editor, tableElm, data);\n        captionElm = dom.select('caption', tableElm)[0];\n        if (captionElm && !data.caption) {\n          dom.remove(captionElm);\n        }\n        if (!captionElm && data.caption) {\n          captionElm = dom.create('caption');\n          captionElm.innerHTML = !global$2.ie ? '<br data-mce-bogus=\"1\"/>' : '\\xA0';\n          tableElm.insertBefore(captionElm, tableElm.firstChild);\n        }\n        Styles$1.unApplyAlign(editor, tableElm);\n        if (data.align) {\n          Styles$1.applyAlign(editor, tableElm, data.align);\n        }\n        editor.focus();\n        editor.addVisual();\n      });\n    };\n    var open$2 = function (editor, isProps) {\n      var dom = editor.dom;\n      var tableElm, colsCtrl, rowsCtrl, classListCtrl, data = {}, generalTableForm;\n      if (isProps === true) {\n        tableElm = dom.getParent(editor.selection.getStart(), 'table');\n        if (tableElm) {\n          data = extractDataFromElement$2(editor, tableElm);\n        }\n      } else {\n        colsCtrl = {\n          label: 'Cols',\n          name: 'cols'\n        };\n        rowsCtrl = {\n          label: 'Rows',\n          name: 'rows'\n        };\n      }\n      if (getTableClassList(editor).length > 0) {\n        if (data.class) {\n          data.class = data.class.replace(/\\s*mce\\-item\\-table\\s*/g, '');\n        }\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Helpers.buildListItems(getTableClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  block: 'table',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      generalTableForm = {\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        labelGapCalc: 'children',\n        padding: 0,\n        items: [\n          {\n            type: 'form',\n            labelGapCalc: false,\n            padding: 0,\n            layout: 'grid',\n            columns: 2,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50\n            },\n            items: hasAppearanceOptions(editor) ? [\n              colsCtrl,\n              rowsCtrl,\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Cell spacing',\n                name: 'cellspacing'\n              },\n              {\n                label: 'Cell padding',\n                name: 'cellpadding'\n              },\n              {\n                label: 'Border',\n                name: 'border'\n              },\n              {\n                label: 'Caption',\n                name: 'caption',\n                type: 'checkbox'\n              }\n            ] : [\n              colsCtrl,\n              rowsCtrl,\n              {\n                label: 'Width',\n                name: 'width',\n                onchange: curry(Helpers.updateStyleField, editor)\n              },\n              {\n                label: 'Height',\n                name: 'height',\n                onchange: curry(Helpers.updateStyleField, editor)\n              }\n            ]\n          },\n          {\n            label: 'Alignment',\n            name: 'align',\n            type: 'listbox',\n            text: 'None',\n            values: [\n              {\n                text: 'None',\n                value: ''\n              },\n              {\n                text: 'Left',\n                value: 'left'\n              },\n              {\n                text: 'Center',\n                value: 'center'\n              },\n              {\n                text: 'Right',\n                value: 'right'\n              }\n            ]\n          },\n          classListCtrl\n        ]\n      };\n      if (hasAdvancedTableTab(editor)) {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          bodyType: 'tabpanel',\n          body: [\n            {\n              title: 'General',\n              type: 'form',\n              items: generalTableForm\n            },\n            Helpers.createStyleForm(editor)\n          ],\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      } else {\n        editor.windowManager.open({\n          title: 'Table properties',\n          data: data,\n          body: generalTableForm,\n          onsubmit: curry(onSubmitTableForm, editor, tableElm)\n        });\n      }\n    };\n    var TableDialog = { open: open$2 };\n\n    var each$3 = global$1.each;\n    var registerCommands = function (editor, actions, cellSelection, selections, clipboardRows) {\n      var isRoot = getIsRoot(editor);\n      var eraseTable = function () {\n        getSelectionStartCell().orThunk(getSelectionStartCaption).each(function (cellOrCaption) {\n          var table = TableLookup.table(cellOrCaption, isRoot);\n          table.filter(not(isRoot)).each(function (table) {\n            var cursor = Element.fromText('');\n            after(table, cursor);\n            remove$2(table);\n            var rng = editor.dom.createRng();\n            rng.setStart(cursor.dom(), 0);\n            rng.setEnd(cursor.dom(), 0);\n            editor.selection.setRng(rng);\n          });\n        });\n      };\n      var getSelectionStartFromSelector = function (selector) {\n        return function () {\n          return Option.from(editor.dom.getParent(editor.selection.getStart(), selector)).map(Element.fromDom);\n        };\n      };\n      var getSelectionStartCaption = getSelectionStartFromSelector('caption');\n      var getSelectionStartCell = getSelectionStartFromSelector('th,td');\n      var getTableFromCell = function (cell) {\n        return TableLookup.table(cell, isRoot);\n      };\n      var getSize = function (table) {\n        return {\n          width: getPixelWidth$1(table.dom()),\n          height: getPixelWidth$1(table.dom())\n        };\n      };\n      var resizeChange = function (editor, oldSize, table) {\n        var newSize = getSize(table);\n        if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n          fireObjectResizeStart(editor, table.dom(), oldSize.width, oldSize.height);\n          fireObjectResized(editor, table.dom(), newSize.width, newSize.height);\n        }\n      };\n      var actOnSelection = function (execute) {\n        getSelectionStartCell().each(function (cell) {\n          getTableFromCell(cell).each(function (table) {\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var beforeSize = getSize(table);\n            execute(table, targets).each(function (rng) {\n              resizeChange(editor, beforeSize, table);\n              editor.selection.setRng(rng);\n              editor.focus();\n              cellSelection.clear(table);\n              removeDataStyle(table);\n            });\n          });\n        });\n      };\n      var copyRowSelection = function (execute) {\n        return getSelectionStartCell().bind(function (cell) {\n          return getTableFromCell(cell).bind(function (table) {\n            var doc = Element.fromDom(editor.getDoc());\n            var targets = TableTargets.forMenu(selections, table, cell);\n            var generators = TableFill.cellOperations(noop, doc, Option.none());\n            return CopyRows.copyRows(table, targets, generators);\n          });\n        });\n      };\n      var pasteOnSelection = function (execute) {\n        clipboardRows.get().each(function (rows) {\n          var clonedRows = map(rows, function (row) {\n            return deep(row);\n          });\n          getSelectionStartCell().each(function (cell) {\n            getTableFromCell(cell).each(function (table) {\n              var doc = Element.fromDom(editor.getDoc());\n              var generators = TableFill.paste(doc);\n              var targets = TableTargets.pasteRows(selections, table, cell, clonedRows, generators);\n              execute(table, targets).each(function (rng) {\n                editor.selection.setRng(rng);\n                editor.focus();\n                cellSelection.clear(table);\n              });\n            });\n          });\n        });\n      };\n      each$3({\n        mceTableSplitCells: function () {\n          actOnSelection(actions.unmergeCells);\n        },\n        mceTableMergeCells: function () {\n          actOnSelection(actions.mergeCells);\n        },\n        mceTableInsertRowBefore: function () {\n          actOnSelection(actions.insertRowsBefore);\n        },\n        mceTableInsertRowAfter: function () {\n          actOnSelection(actions.insertRowsAfter);\n        },\n        mceTableInsertColBefore: function () {\n          actOnSelection(actions.insertColumnsBefore);\n        },\n        mceTableInsertColAfter: function () {\n          actOnSelection(actions.insertColumnsAfter);\n        },\n        mceTableDeleteCol: function () {\n          actOnSelection(actions.deleteColumn);\n        },\n        mceTableDeleteRow: function () {\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCutRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n          actOnSelection(actions.deleteRow);\n        },\n        mceTableCopyRow: function (grid) {\n          clipboardRows.set(copyRowSelection());\n        },\n        mceTablePasteRowBefore: function (grid) {\n          pasteOnSelection(actions.pasteRowsBefore);\n        },\n        mceTablePasteRowAfter: function (grid) {\n          pasteOnSelection(actions.pasteRowsAfter);\n        },\n        mceTableDelete: eraseTable\n      }, function (func, name) {\n        editor.addCommand(name, func);\n      });\n      each$3({\n        mceInsertTable: curry(TableDialog.open, editor),\n        mceTableProps: curry(TableDialog.open, editor, true),\n        mceTableRowProps: curry(RowDialog.open, editor),\n        mceTableCellProps: curry(CellDialog.open, editor)\n      }, function (func, name) {\n        editor.addCommand(name, function (ui, val) {\n          func(val);\n        });\n      });\n    };\n    var Commands = { registerCommands: registerCommands };\n\n    var only = function (element) {\n      var parent = Option.from(element.dom().documentElement).map(Element.fromDom).getOr(element);\n      return {\n        parent: constant(parent),\n        view: constant(element),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var detached = function (editable, chrome) {\n      var origin = function () {\n        return absolute(chrome);\n      };\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: origin\n      };\n    };\n    var body$1 = function (editable, chrome) {\n      return {\n        parent: constant(chrome),\n        view: constant(editable),\n        origin: constant(Position(0, 0))\n      };\n    };\n    var ResizeWire = {\n      only: only,\n      detached: detached,\n      body: body$1\n    };\n\n    var Event = function (fields) {\n      var struct = Immutable.apply(null, fields);\n      var handlers = [];\n      var bind = function (handler) {\n        if (handler === undefined) {\n          throw new Error('Event bind error: undefined handler');\n        }\n        handlers.push(handler);\n      };\n      var unbind = function (handler) {\n        handlers = filter(handlers, function (h) {\n          return h !== handler;\n        });\n      };\n      var trigger = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        var event = struct.apply(null, args);\n        each(handlers, function (handler) {\n          handler(event);\n        });\n      };\n      return {\n        bind: bind,\n        unbind: unbind,\n        trigger: trigger\n      };\n    };\n\n    var create$1 = function (typeDefs) {\n      var registry = map$1(typeDefs, function (event) {\n        return {\n          bind: event.bind,\n          unbind: event.unbind\n        };\n      });\n      var trigger = map$1(typeDefs, function (event) {\n        return event.trigger;\n      });\n      return {\n        registry: registry,\n        trigger: trigger\n      };\n    };\n    var Events = { create: create$1 };\n\n    var mkEvent = function (target, x, y, stop, prevent, kill, raw) {\n      return {\n        target: constant(target),\n        x: constant(x),\n        y: constant(y),\n        stop: stop,\n        prevent: prevent,\n        kill: kill,\n        raw: constant(raw)\n      };\n    };\n    var handle = function (filter, handler) {\n      return function (rawEvent) {\n        if (!filter(rawEvent)) {\n          return;\n        }\n        var target = Element.fromDom(rawEvent.target);\n        var stop = function () {\n          rawEvent.stopPropagation();\n        };\n        var prevent = function () {\n          rawEvent.preventDefault();\n        };\n        var kill = compose(prevent, stop);\n        var evt = mkEvent(target, rawEvent.clientX, rawEvent.clientY, stop, prevent, kill, rawEvent);\n        handler(evt);\n      };\n    };\n    var binder = function (element, event, filter, handler, useCapture) {\n      var wrapped = handle(filter, handler);\n      element.dom().addEventListener(event, wrapped, useCapture);\n      return { unbind: curry(unbind, element, event, wrapped, useCapture) };\n    };\n    var bind$1 = function (element, event, filter, handler) {\n      return binder(element, event, filter, handler, false);\n    };\n    var unbind = function (element, event, handler, useCapture) {\n      element.dom().removeEventListener(event, handler, useCapture);\n    };\n\n    var filter$1 = constant(true);\n    var bind$2 = function (element, event, handler) {\n      return bind$1(element, event, filter$1, handler);\n    };\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge$3 = baseMerge(shallow$1);\n\n    var styles$1 = css('ephox-dragster');\n    var Styles$2 = { resolve: styles$1.resolve };\n\n    var Blocker = function (options) {\n      var settings = merge$3({ layerClass: Styles$2.resolve('blocker') }, options);\n      var div = Element.fromTag('div');\n      set(div, 'role', 'presentation');\n      setAll$1(div, {\n        position: 'fixed',\n        left: '0px',\n        top: '0px',\n        width: '100%',\n        height: '100%'\n      });\n      add$2(div, Styles$2.resolve('blocker'));\n      add$2(div, settings.layerClass);\n      var element = function () {\n        return div;\n      };\n      var destroy = function () {\n        remove$2(div);\n      };\n      return {\n        element: element,\n        destroy: destroy\n      };\n    };\n\n    var DragMode = exactly([\n      'compare',\n      'extract',\n      'mutate',\n      'sink'\n    ]);\n    var DragSink = exactly([\n      'element',\n      'start',\n      'stop',\n      'destroy'\n    ]);\n    var DragApi = exactly([\n      'forceDrop',\n      'drop',\n      'move',\n      'delayDrop'\n    ]);\n\n    var compare = function (old, nu) {\n      return Position(nu.left() - old.left(), nu.top() - old.top());\n    };\n    var extract$1 = function (event) {\n      return Option.some(Position(event.x(), event.y()));\n    };\n    var mutate = function (mutation, info) {\n      mutation.mutate(info.left(), info.top());\n    };\n    var sink = function (dragApi, settings) {\n      var blocker = Blocker(settings);\n      var mdown = bind$2(blocker.element(), 'mousedown', dragApi.forceDrop);\n      var mup = bind$2(blocker.element(), 'mouseup', dragApi.drop);\n      var mmove = bind$2(blocker.element(), 'mousemove', dragApi.move);\n      var mout = bind$2(blocker.element(), 'mouseout', dragApi.delayDrop);\n      var destroy = function () {\n        blocker.destroy();\n        mup.unbind();\n        mmove.unbind();\n        mout.unbind();\n        mdown.unbind();\n      };\n      var start = function (parent) {\n        append(parent, blocker.element());\n      };\n      var stop = function () {\n        remove$2(blocker.element());\n      };\n      return DragSink({\n        element: blocker.element,\n        start: start,\n        stop: stop,\n        destroy: destroy\n      });\n    };\n    var MouseDrag = DragMode({\n      compare: compare,\n      extract: extract$1,\n      sink: sink,\n      mutate: mutate\n    });\n\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    function InDrag () {\n      var previous = Option.none();\n      var reset = function () {\n        previous = Option.none();\n      };\n      var update = function (mode, nu) {\n        var result = previous.map(function (old) {\n          return mode.compare(old, nu);\n        });\n        previous = Option.some(nu);\n        return result;\n      };\n      var onEvent = function (event, mode) {\n        var dataOption = mode.extract(event);\n        dataOption.each(function (data) {\n          var offset = update(mode, data);\n          offset.each(function (d) {\n            events.trigger.move(d);\n          });\n        });\n      };\n      var events = Events.create({ move: Event(['info']) });\n      return {\n        onEvent: onEvent,\n        reset: reset,\n        events: events.registry\n      };\n    }\n\n    function NoDrag () {\n      return {\n        onEvent: noop,\n        reset: noop\n      };\n    }\n\n    function Movement () {\n      var noDragState = NoDrag();\n      var inDragState = InDrag();\n      var dragState = noDragState;\n      var on = function () {\n        dragState.reset();\n        dragState = inDragState;\n      };\n      var off = function () {\n        dragState.reset();\n        dragState = noDragState;\n      };\n      var onEvent = function (event, mode) {\n        dragState.onEvent(event, mode);\n      };\n      var isOn = function () {\n        return dragState === inDragState;\n      };\n      return {\n        on: on,\n        off: off,\n        isOn: isOn,\n        onEvent: onEvent,\n        events: inDragState.events\n      };\n    }\n\n    var setup = function (mutation, mode, settings) {\n      var active = false;\n      var events = Events.create({\n        start: Event([]),\n        stop: Event([])\n      });\n      var movement = Movement();\n      var drop = function () {\n        sink.stop();\n        if (movement.isOn()) {\n          movement.off();\n          events.trigger.stop();\n        }\n      };\n      var throttledDrop = last$2(drop, 200);\n      var go = function (parent) {\n        sink.start(parent);\n        movement.on();\n        events.trigger.start();\n      };\n      var mousemove = function (event) {\n        throttledDrop.cancel();\n        movement.onEvent(event, mode);\n      };\n      movement.events.move.bind(function (event) {\n        mode.mutate(mutation, event.info());\n      });\n      var on = function () {\n        active = true;\n      };\n      var off = function () {\n        active = false;\n      };\n      var runIfActive = function (f) {\n        return function () {\n          var args = [];\n          for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n          }\n          if (active) {\n            f.apply(null, args);\n          }\n        };\n      };\n      var sink = mode.sink(DragApi({\n        forceDrop: drop,\n        drop: runIfActive(drop),\n        move: runIfActive(mousemove),\n        delayDrop: runIfActive(throttledDrop.throttle)\n      }), settings);\n      var destroy = function () {\n        sink.destroy();\n      };\n      return {\n        element: sink.element,\n        go: go,\n        on: on,\n        off: off,\n        destroy: destroy,\n        events: events.registry\n      };\n    };\n    var Dragging = { setup: setup };\n\n    var transform$1 = function (mutation, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var mode = settings.mode !== undefined ? settings.mode : MouseDrag;\n      return Dragging.setup(mutation, mode, settings);\n    };\n    var Dragger = { transform: transform$1 };\n\n    var Mutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta'\n        ])\n      });\n      var mutate = function (x, y) {\n        events.trigger.drag(x, y);\n      };\n      return {\n        mutate: mutate,\n        events: events.registry\n      };\n    };\n\n    var BarMutation = function () {\n      var events = Events.create({\n        drag: Event([\n          'xDelta',\n          'yDelta',\n          'target'\n        ])\n      });\n      var target = Option.none();\n      var delegate = Mutation();\n      delegate.events.drag.bind(function (event) {\n        target.each(function (t) {\n          events.trigger.drag(event.xDelta(), event.yDelta(), t);\n        });\n      });\n      var assign = function (t) {\n        target = Option.some(t);\n      };\n      var get = function () {\n        return target;\n      };\n      return {\n        assign: assign,\n        get: get,\n        mutate: delegate.mutate,\n        events: events.registry\n      };\n    };\n\n    var isContentEditableTrue = function (elm) {\n      return get(elm, 'contenteditable') === 'true';\n    };\n    var findClosestContentEditable = function (target, isRoot) {\n      return closest$1(target, '[contenteditable]', isRoot);\n    };\n\n    var resizeBarDragging = Styles.resolve('resizer-bar-dragging');\n    var BarManager = function (wire, direction, hdirection) {\n      var mutation = BarMutation();\n      var resizing = Dragger.transform(mutation, {});\n      var hoverTable = Option.none();\n      var getResizer = function (element, type) {\n        return Option.from(get(element, type));\n      };\n      mutation.events.drag.bind(function (event) {\n        getResizer(event.target(), 'data-row').each(function (_dataRow) {\n          var currentRow = CellUtils.getInt(event.target(), 'top');\n          set$1(event.target(), 'top', currentRow + event.yDelta() + 'px');\n        });\n        getResizer(event.target(), 'data-column').each(function (_dataCol) {\n          var currentCol = CellUtils.getInt(event.target(), 'left');\n          set$1(event.target(), 'left', currentCol + event.xDelta() + 'px');\n        });\n      });\n      var getDelta = function (target, dir) {\n        var newX = CellUtils.getInt(target, dir);\n        var oldX = parseInt(get(target, 'data-initial-' + dir), 10);\n        return newX - oldX;\n      };\n      resizing.events.stop.bind(function () {\n        mutation.get().each(function (target) {\n          hoverTable.each(function (table) {\n            getResizer(target, 'data-row').each(function (row) {\n              var delta = getDelta(target, 'top');\n              remove(target, 'data-initial-top');\n              events.trigger.adjustHeight(table, delta, parseInt(row, 10));\n            });\n            getResizer(target, 'data-column').each(function (column) {\n              var delta = getDelta(target, 'left');\n              remove(target, 'data-initial-left');\n              events.trigger.adjustWidth(table, delta, parseInt(column, 10));\n            });\n            Bars.refresh(wire, table, hdirection, direction);\n          });\n        });\n      });\n      var handler = function (target, dir) {\n        events.trigger.startAdjust();\n        mutation.assign(target);\n        set(target, 'data-initial-' + dir, parseInt(get$1(target, dir), 10));\n        add$2(target, resizeBarDragging);\n        set$1(target, 'opacity', '0.2');\n        resizing.go(wire.parent());\n      };\n      var mousedown = bind$2(wire.parent(), 'mousedown', function (event) {\n        if (Bars.isRowBar(event.target())) {\n          handler(event.target(), 'top');\n        }\n        if (Bars.isColBar(event.target())) {\n          handler(event.target(), 'left');\n        }\n      });\n      var isRoot = function (e) {\n        return eq(e, wire.view());\n      };\n      var findClosestEditableTable = function (target) {\n        return closest$1(target, 'table', isRoot).filter(function (table) {\n          return findClosestContentEditable(table, isRoot).exists(isContentEditableTrue);\n        });\n      };\n      var mouseover = bind$2(wire.view(), 'mouseover', function (event) {\n        findClosestEditableTable(event.target()).fold(function () {\n          if (inBody(event.target())) {\n            Bars.destroy(wire);\n          }\n        }, function (table) {\n          hoverTable = Option.some(table);\n          Bars.refresh(wire, table, hdirection, direction);\n        });\n      });\n      var destroy = function () {\n        mousedown.unbind();\n        mouseover.unbind();\n        resizing.destroy();\n        Bars.destroy(wire);\n      };\n      var refresh = function (tbl) {\n        Bars.refresh(wire, tbl, hdirection, direction);\n      };\n      var events = Events.create({\n        adjustHeight: Event([\n          'table',\n          'delta',\n          'row'\n        ]),\n        adjustWidth: Event([\n          'table',\n          'delta',\n          'column'\n        ]),\n        startAdjust: Event([])\n      });\n      return {\n        destroy: destroy,\n        refresh: refresh,\n        on: resizing.on,\n        off: resizing.off,\n        hideBars: curry(Bars.hide, wire),\n        showBars: curry(Bars.show, wire),\n        events: events.registry\n      };\n    };\n\n    function TableResize (wire, vdirection) {\n      var hdirection = BarPositions.height;\n      var manager = BarManager(wire, vdirection, hdirection);\n      var events = Events.create({\n        beforeResize: Event(['table']),\n        afterResize: Event(['table']),\n        startDrag: Event([])\n      });\n      manager.events.adjustHeight.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = hdirection.delta(event.delta(), event.table());\n        Adjustments.adjustHeight(event.table(), delta, event.row(), hdirection);\n        events.trigger.afterResize(event.table());\n      });\n      manager.events.startAdjust.bind(function (event) {\n        events.trigger.startDrag();\n      });\n      manager.events.adjustWidth.bind(function (event) {\n        events.trigger.beforeResize(event.table());\n        var delta = vdirection.delta(event.delta(), event.table());\n        Adjustments.adjustWidth(event.table(), delta, event.column(), vdirection);\n        events.trigger.afterResize(event.table());\n      });\n      return {\n        on: manager.on,\n        off: manager.off,\n        hideBars: manager.hideBars,\n        showBars: manager.showBars,\n        destroy: manager.destroy,\n        events: events.registry\n      };\n    }\n\n    var createContainer = function () {\n      var container = Element.fromTag('div');\n      setAll$1(container, {\n        position: 'static',\n        height: '0',\n        width: '0',\n        padding: '0',\n        margin: '0',\n        border: '0'\n      });\n      append(body(), container);\n      return container;\n    };\n    var get$8 = function (editor, container) {\n      return editor.inline ? ResizeWire.body(getBody$1(editor), createContainer()) : ResizeWire.only(Element.fromDom(editor.getDoc()));\n    };\n    var remove$6 = function (editor, wire) {\n      if (editor.inline) {\n        remove$2(wire.parent());\n      }\n    };\n    var TableWire = {\n      get: get$8,\n      remove: remove$6\n    };\n\n    var ResizeHandler = function (editor) {\n      var selectionRng = Option.none();\n      var resize = Option.none();\n      var wire = Option.none();\n      var percentageBasedSizeRegex = /(\\d+(\\.\\d+)?)%/;\n      var startW, startRawW;\n      var isTable = function (elm) {\n        return elm.nodeName === 'TABLE';\n      };\n      var getRawWidth = function (elm) {\n        return editor.dom.getStyle(elm, 'width') || editor.dom.getAttrib(elm, 'width');\n      };\n      var lazyResize = function () {\n        return resize;\n      };\n      var lazyWire = function () {\n        return wire.getOr(ResizeWire.only(Element.fromDom(editor.getBody())));\n      };\n      var destroy = function () {\n        resize.each(function (sz) {\n          sz.destroy();\n        });\n        wire.each(function (w) {\n          TableWire.remove(editor, w);\n        });\n      };\n      editor.on('init', function () {\n        var direction = TableDirection(Direction.directionAt);\n        var rawWire = TableWire.get(editor);\n        wire = Option.some(rawWire);\n        if (hasObjectResizing(editor) && hasTableResizeBars(editor)) {\n          var sz = TableResize(rawWire, direction);\n          sz.on();\n          sz.events.startDrag.bind(function (event) {\n            selectionRng = Option.some(editor.selection.getRng());\n          });\n          sz.events.beforeResize.bind(function (event) {\n            var rawTable = event.table().dom();\n            fireObjectResizeStart(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n          });\n          sz.events.afterResize.bind(function (event) {\n            var table = event.table();\n            var rawTable = table.dom();\n            removeDataStyle(table);\n            selectionRng.each(function (rng) {\n              editor.selection.setRng(rng);\n              editor.focus();\n            });\n            fireObjectResized(editor, rawTable, getPixelWidth$1(rawTable), getPixelHeight(rawTable));\n            editor.undoManager.add();\n          });\n          resize = Option.some(sz);\n        }\n      });\n      editor.on('ObjectResizeStart', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          startW = e.width;\n          startRawW = getRawWidth(targetElm);\n        }\n      });\n      editor.on('ObjectResized', function (e) {\n        var targetElm = e.target;\n        if (isTable(targetElm)) {\n          var table = targetElm;\n          if (percentageBasedSizeRegex.test(startRawW)) {\n            var percentW = parseFloat(percentageBasedSizeRegex.exec(startRawW)[1]);\n            var targetPercentW = e.width * percentW / startW;\n            editor.dom.setStyle(table, 'width', targetPercentW + '%');\n          } else {\n            var newCellSizes_1 = [];\n            global$1.each(table.rows, function (row) {\n              global$1.each(row.cells, function (cell) {\n                var width = editor.dom.getStyle(cell, 'width', true);\n                newCellSizes_1.push({\n                  cell: cell,\n                  width: width\n                });\n              });\n            });\n            global$1.each(newCellSizes_1, function (newCellSize) {\n              editor.dom.setStyle(newCellSize.cell, 'width', newCellSize.width);\n              editor.dom.setAttrib(newCellSize.cell, 'width', null);\n            });\n          }\n        }\n      });\n      return {\n        lazyResize: lazyResize,\n        lazyWire: lazyWire,\n        destroy: destroy\n      };\n    };\n\n    var adt$1 = Adt.generate([\n      { none: ['current'] },\n      { first: ['current'] },\n      {\n        middle: [\n          'current',\n          'target'\n        ]\n      },\n      { last: ['current'] }\n    ]);\n    var none$1 = function (current) {\n      if (current === void 0) {\n        current = undefined;\n      }\n      return adt$1.none(current);\n    };\n    var CellLocation = __assign({}, adt$1, { none: none$1 });\n\n    var detect$4 = function (current, isRoot) {\n      return TableLookup.table(current, isRoot).bind(function (table) {\n        var all = TableLookup.cells(table);\n        var index = findIndex(all, function (x) {\n          return eq(current, x);\n        });\n        return index.map(function (ind) {\n          return {\n            index: constant(ind),\n            all: constant(all)\n          };\n        });\n      });\n    };\n    var next = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none(current);\n      }, function (info) {\n        return info.index() + 1 < info.all().length ? CellLocation.middle(current, info.all()[info.index() + 1]) : CellLocation.last(current);\n      });\n    };\n    var prev = function (current, isRoot) {\n      var detection = detect$4(current, isRoot);\n      return detection.fold(function () {\n        return CellLocation.none();\n      }, function (info) {\n        return info.index() - 1 >= 0 ? CellLocation.middle(current, info.all()[info.index() - 1]) : CellLocation.first(current);\n      });\n    };\n    var CellNavigation = {\n      next: next,\n      prev: prev\n    };\n\n    var create$2 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$2 };\n\n    var adt$2 = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata$1 = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$2 = adt$2.before;\n    var on = adt$2.on;\n    var after$2 = adt$2.after;\n    var Situ = {\n      before: before$2,\n      on: on,\n      after: after$2,\n      cata: cata$1,\n      getStart: getStart\n    };\n\n    var adt$3 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$3.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$3.domRange;\n    var relative = adt$3.relative;\n    var exact = adt$3.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range$1 = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range$1\n    };\n\n    var selectNodeContents = function (win, element) {\n      var rng = win.document.createRange();\n      selectNodeContentsUsing(rng, element);\n      return rng;\n    };\n    var selectNodeContentsUsing = function (rng, element) {\n      rng.selectNodeContents(element.dom());\n    };\n    var setStart = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setStartBefore(e.dom());\n      }, function (e, o) {\n        rng.setStart(e.dom(), o);\n      }, function (e) {\n        rng.setStartAfter(e.dom());\n      });\n    };\n    var setFinish = function (rng, situ) {\n      situ.fold(function (e) {\n        rng.setEndBefore(e.dom());\n      }, function (e, o) {\n        rng.setEnd(e.dom(), o);\n      }, function (e) {\n        rng.setEndAfter(e.dom());\n      });\n    };\n    var relativeToNative = function (win, startSitu, finishSitu) {\n      var range = win.document.createRange();\n      setStart(range, startSitu);\n      setFinish(range, finishSitu);\n      return range;\n    };\n    var exactToNative = function (win, start, soffset, finish, foffset) {\n      var rng = win.document.createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var toRect = function (rect) {\n      return {\n        left: constant(rect.left),\n        top: constant(rect.top),\n        right: constant(rect.right),\n        bottom: constant(rect.bottom),\n        width: constant(rect.width),\n        height: constant(rect.height)\n      };\n    };\n    var getFirstRect = function (rng) {\n      var rects = rng.getClientRects();\n      var rect = rects.length > 0 ? rects[0] : rng.getBoundingClientRect();\n      return rect.width > 0 || rect.height > 0 ? Option.some(rect).map(toRect) : Option.none();\n    };\n\n    var adt$4 = Adt.generate([\n      {\n        ltr: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      },\n      {\n        rtl: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var fromRange = function (win, type, range) {\n      return type(Element.fromDom(range.startContainer), range.startOffset, Element.fromDom(range.endContainer), range.endOffset);\n    };\n    var getRanges = function (win, selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return {\n            ltr: constant(rng),\n            rtl: Option.none\n          };\n        },\n        relative: function (startSitu, finishSitu) {\n          return {\n            ltr: cached(function () {\n              return relativeToNative(win, startSitu, finishSitu);\n            }),\n            rtl: cached(function () {\n              return Option.some(relativeToNative(win, finishSitu, startSitu));\n            })\n          };\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return {\n            ltr: cached(function () {\n              return exactToNative(win, start, soffset, finish, foffset);\n            }),\n            rtl: cached(function () {\n              return Option.some(exactToNative(win, finish, foffset, start, soffset));\n            })\n          };\n        }\n      });\n    };\n    var doDiagnose = function (win, ranges) {\n      var rng = ranges.ltr();\n      if (rng.collapsed) {\n        var reversed = ranges.rtl().filter(function (rev) {\n          return rev.collapsed === false;\n        });\n        return reversed.map(function (rev) {\n          return adt$4.rtl(Element.fromDom(rev.endContainer), rev.endOffset, Element.fromDom(rev.startContainer), rev.startOffset);\n        }).getOrThunk(function () {\n          return fromRange(win, adt$4.ltr, rng);\n        });\n      } else {\n        return fromRange(win, adt$4.ltr, rng);\n      }\n    };\n    var diagnose = function (win, selection) {\n      var ranges = getRanges(win, selection);\n      return doDiagnose(win, ranges);\n    };\n    var asLtrRange = function (win, selection) {\n      var diagnosis = diagnose(win, selection);\n      return diagnosis.match({\n        ltr: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(start.dom(), soffset);\n          rng.setEnd(finish.dom(), foffset);\n          return rng;\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var rng = win.document.createRange();\n          rng.setStart(finish.dom(), foffset);\n          rng.setEnd(start.dom(), soffset);\n          return rng;\n        }\n      });\n    };\n\n    var searchForPoint = function (rectForOffset, x, y, maxX, length) {\n      if (length === 0) {\n        return 0;\n      } else if (x === maxX) {\n        return length - 1;\n      }\n      var xDelta = maxX;\n      for (var i = 1; i < length; i++) {\n        var rect = rectForOffset(i);\n        var curDeltaX = Math.abs(x - rect.left);\n        if (y <= rect.bottom) {\n          if (y < rect.top || curDeltaX > xDelta) {\n            return i - 1;\n          } else {\n            xDelta = curDeltaX;\n          }\n        }\n      }\n      return 0;\n    };\n    var inRect = function (rect, x, y) {\n      return x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom;\n    };\n\n    var locateOffset = function (doc, textnode, x, y, rect) {\n      var rangeForOffset = function (o) {\n        var r = doc.dom().createRange();\n        r.setStart(textnode.dom(), o);\n        r.collapse(true);\n        return r;\n      };\n      var rectForOffset = function (o) {\n        var r = rangeForOffset(o);\n        return r.getBoundingClientRect();\n      };\n      var length = get$2(textnode).length;\n      var offset = searchForPoint(rectForOffset, x, y, rect.right, length);\n      return rangeForOffset(offset);\n    };\n    var locate = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rects = r.getClientRects();\n      var foundRect = findMap(rects, function (rect) {\n        return inRect(rect, x, y) ? Option.some(rect) : Option.none();\n      });\n      return foundRect.map(function (rect) {\n        return locateOffset(doc, node, x, y, rect);\n      });\n    };\n\n    var searchInChildren = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      var nodes = children(node);\n      return findMap(nodes, function (n) {\n        r.selectNode(n.dom());\n        return inRect(r.getBoundingClientRect(), x, y) ? locateNode(doc, n, x, y) : Option.none();\n      });\n    };\n    var locateNode = function (doc, node, x, y) {\n      return isText(node) ? locate(doc, node, x, y) : searchInChildren(doc, node, x, y);\n    };\n    var locate$1 = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locateNode(doc, node, boundedX, boundedY);\n    };\n\n    var COLLAPSE_TO_LEFT = true;\n    var COLLAPSE_TO_RIGHT = false;\n    var getCollapseDirection = function (rect, x) {\n      return x - rect.left < rect.right - x ? COLLAPSE_TO_LEFT : COLLAPSE_TO_RIGHT;\n    };\n    var createCollapsedNode = function (doc, target, collapseDirection) {\n      var r = doc.dom().createRange();\n      r.selectNode(target.dom());\n      r.collapse(collapseDirection);\n      return r;\n    };\n    var locateInElement = function (doc, node, x) {\n      var cursorRange = doc.dom().createRange();\n      cursorRange.selectNode(node.dom());\n      var rect = cursorRange.getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      var f = collapseDirection === COLLAPSE_TO_LEFT ? first : last$1;\n      return f(node).map(function (target) {\n        return createCollapsedNode(doc, target, collapseDirection);\n      });\n    };\n    var locateInEmpty = function (doc, node, x) {\n      var rect = node.dom().getBoundingClientRect();\n      var collapseDirection = getCollapseDirection(rect, x);\n      return Option.some(createCollapsedNode(doc, node, collapseDirection));\n    };\n    var search = function (doc, node, x) {\n      var f = children(node).length === 0 ? locateInEmpty : locateInElement;\n      return f(doc, node, x);\n    };\n\n    var caretPositionFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretPositionFromPoint(x, y)).bind(function (pos) {\n        if (pos.offsetNode === null) {\n          return Option.none();\n        }\n        var r = doc.dom().createRange();\n        r.setStart(pos.offsetNode, pos.offset);\n        r.collapse();\n        return Option.some(r);\n      });\n    };\n    var caretRangeFromPoint = function (doc, x, y) {\n      return Option.from(doc.dom().caretRangeFromPoint(x, y));\n    };\n    var searchTextNodes = function (doc, node, x, y) {\n      var r = doc.dom().createRange();\n      r.selectNode(node.dom());\n      var rect = r.getBoundingClientRect();\n      var boundedX = Math.max(rect.left, Math.min(rect.right, x));\n      var boundedY = Math.max(rect.top, Math.min(rect.bottom, y));\n      return locate$1(doc, node, boundedX, boundedY);\n    };\n    var searchFromPoint = function (doc, x, y) {\n      return Element.fromPoint(doc, x, y).bind(function (elem) {\n        var fallback = function () {\n          return search(doc, elem, x);\n        };\n        return children(elem).length === 0 ? fallback() : searchTextNodes(doc, elem, x, y).orThunk(fallback);\n      });\n    };\n    var availableSearch = document.caretPositionFromPoint ? caretPositionFromPoint : document.caretRangeFromPoint ? caretRangeFromPoint : searchFromPoint;\n    var fromPoint$1 = function (win, x, y) {\n      var doc = Element.fromDom(win.document);\n      return availableSearch(doc, x, y).map(function (rng) {\n        return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n      });\n    };\n\n    var beforeSpecial = function (element, offset) {\n      var name$1 = name(element);\n      if ('input' === name$1) {\n        return Situ.after(element);\n      } else if (!contains([\n          'br',\n          'img'\n        ], name$1)) {\n        return Situ.on(element, offset);\n      } else {\n        return offset === 0 ? Situ.before(element) : Situ.after(element);\n      }\n    };\n    var preprocessRelative = function (startSitu, finishSitu) {\n      var start = startSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      var finish = finishSitu.fold(Situ.before, beforeSpecial, Situ.after);\n      return Selection.relative(start, finish);\n    };\n    var preprocessExact = function (start, soffset, finish, foffset) {\n      var startSitu = beforeSpecial(start, soffset);\n      var finishSitu = beforeSpecial(finish, foffset);\n      return Selection.relative(startSitu, finishSitu);\n    };\n    var preprocess = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          var start = Element.fromDom(rng.startContainer);\n          var finish = Element.fromDom(rng.endContainer);\n          return preprocessExact(start, rng.startOffset, finish, rng.endOffset);\n        },\n        relative: preprocessRelative,\n        exact: preprocessExact\n      });\n    };\n\n    var makeRange = function (start, soffset, finish, foffset) {\n      var doc = owner(start);\n      var rng = doc.dom().createRange();\n      rng.setStart(start.dom(), soffset);\n      rng.setEnd(finish.dom(), foffset);\n      return rng;\n    };\n    var after$3 = function (start, soffset, finish, foffset) {\n      var r = makeRange(start, soffset, finish, foffset);\n      var same = eq(start, finish) && soffset === foffset;\n      return r.collapsed && !same;\n    };\n\n    var doSetNativeRange = function (win, rng) {\n      Option.from(win.getSelection()).each(function (selection) {\n        selection.removeAllRanges();\n        selection.addRange(rng);\n      });\n    };\n    var doSetRange = function (win, start, soffset, finish, foffset) {\n      var rng = exactToNative(win, start, soffset, finish, foffset);\n      doSetNativeRange(win, rng);\n    };\n    var setLegacyRtlRange = function (win, selection, start, soffset, finish, foffset) {\n      selection.collapse(start.dom(), soffset);\n      selection.extend(finish.dom(), foffset);\n    };\n    var setRangeFromRelative = function (win, relative) {\n      return diagnose(win, relative).match({\n        ltr: function (start, soffset, finish, foffset) {\n          doSetRange(win, start, soffset, finish, foffset);\n        },\n        rtl: function (start, soffset, finish, foffset) {\n          var selection = win.getSelection();\n          if (selection.setBaseAndExtent) {\n            selection.setBaseAndExtent(start.dom(), soffset, finish.dom(), foffset);\n          } else if (selection.extend) {\n            try {\n              setLegacyRtlRange(win, selection, start, soffset, finish, foffset);\n            } catch (e) {\n              doSetRange(win, finish, foffset, start, soffset);\n            }\n          } else {\n            doSetRange(win, finish, foffset, start, soffset);\n          }\n        }\n      });\n    };\n    var setExact = function (win, start, soffset, finish, foffset) {\n      var relative = preprocessExact(start, soffset, finish, foffset);\n      setRangeFromRelative(win, relative);\n    };\n    var setRelative = function (win, startSitu, finishSitu) {\n      var relative = preprocessRelative(startSitu, finishSitu);\n      setRangeFromRelative(win, relative);\n    };\n    var toNative = function (selection) {\n      var win = Selection.getWin(selection).dom();\n      var getDomRange = function (start, soffset, finish, foffset) {\n        return exactToNative(win, start, soffset, finish, foffset);\n      };\n      var filtered = preprocess(selection);\n      return diagnose(win, filtered).match({\n        ltr: getDomRange,\n        rtl: getDomRange\n      });\n    };\n    var readRange = function (selection) {\n      if (selection.rangeCount > 0) {\n        var firstRng = selection.getRangeAt(0);\n        var lastRng = selection.getRangeAt(selection.rangeCount - 1);\n        return Option.some(SimRange.create(Element.fromDom(firstRng.startContainer), firstRng.startOffset, Element.fromDom(lastRng.endContainer), lastRng.endOffset));\n      } else {\n        return Option.none();\n      }\n    };\n    var doGetExact = function (selection) {\n      var anchor = Element.fromDom(selection.anchorNode);\n      var focus = Element.fromDom(selection.focusNode);\n      return after$3(anchor, selection.anchorOffset, focus, selection.focusOffset) ? Option.some(SimRange.create(anchor, selection.anchorOffset, focus, selection.focusOffset)) : readRange(selection);\n    };\n    var setToElement = function (win, element) {\n      var rng = selectNodeContents(win, element);\n      doSetNativeRange(win, rng);\n    };\n    var getExact = function (win) {\n      return Option.from(win.getSelection()).filter(function (sel) {\n        return sel.rangeCount > 0;\n      }).bind(doGetExact);\n    };\n    var get$9 = function (win) {\n      return getExact(win).map(function (range) {\n        return Selection.exact(range.start(), range.soffset(), range.finish(), range.foffset());\n      });\n    };\n    var getFirstRect$1 = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return getFirstRect(rng);\n    };\n    var getAtPoint = function (win, x, y) {\n      return fromPoint$1(win, x, y);\n    };\n    var clear = function (win) {\n      var selection = win.getSelection();\n      selection.removeAllRanges();\n    };\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var forward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.next(cell), lazyWire);\n    };\n    var backward = function (editor, isRoot, cell, lazyWire) {\n      return go(editor, isRoot, CellNavigation.prev(cell), lazyWire);\n    };\n    var getCellFirstCursorPosition = function (editor, cell) {\n      var selection = Selection.exact(cell, 0, cell, 0);\n      return toNative(selection);\n    };\n    var getNewRowCursorPosition = function (editor, table) {\n      var rows = descendants$1(table, 'tr');\n      return last(rows).bind(function (last) {\n        return descendant$1(last, 'td,th').map(function (first) {\n          return getCellFirstCursorPosition(editor, first);\n        });\n      });\n    };\n    var go = function (editor, isRoot, cell, actions, lazyWire) {\n      return cell.fold(Option.none, Option.none, function (current, next) {\n        return first(next).map(function (cell) {\n          return getCellFirstCursorPosition(editor, cell);\n        });\n      }, function (current) {\n        return TableLookup.table(current, isRoot).bind(function (table) {\n          var targets = TableTargets.noMenu(current);\n          editor.undoManager.transact(function () {\n            actions.insertRowsAfter(table, targets);\n          });\n          return getNewRowCursorPosition(editor, table);\n        });\n      });\n    };\n    var rootElements = [\n      'table',\n      'li',\n      'dl'\n    ];\n    var handle$1 = function (event, editor, actions, lazyWire) {\n      if (event.keyCode === global$3.TAB) {\n        var body_1 = getBody$1(editor);\n        var isRoot_1 = function (element) {\n          var name$1 = name(element);\n          return eq(element, body_1) || contains(rootElements, name$1);\n        };\n        var rng = editor.selection.getRng();\n        if (rng.collapsed) {\n          var start = Element.fromDom(rng.startContainer);\n          TableLookup.cell(start, isRoot_1).each(function (cell) {\n            event.preventDefault();\n            var navigation = event.shiftKey ? backward : forward;\n            var rng = navigation(editor, isRoot_1, cell, actions, lazyWire);\n            rng.each(function (range) {\n              editor.selection.setRng(range);\n            });\n          });\n        }\n      }\n    };\n    var TabContext = { handle: handle$1 };\n\n    var create$3 = Immutable('selection', 'kill');\n    var Response = { create: create$3 };\n\n    var create$4 = function (start, soffset, finish, foffset) {\n      return {\n        start: constant(Situ.on(start, soffset)),\n        finish: constant(Situ.on(finish, foffset))\n      };\n    };\n    var Situs = { create: create$4 };\n\n    var convertToRange = function (win, selection) {\n      var rng = asLtrRange(win, selection);\n      return SimRange.create(Element.fromDom(rng.startContainer), rng.startOffset, Element.fromDom(rng.endContainer), rng.endOffset);\n    };\n    var makeSitus = Situs.create;\n    var Util = {\n      convertToRange: convertToRange,\n      makeSitus: makeSitus\n    };\n\n    var sync = function (container, isRoot, start, soffset, finish, foffset, selectRange) {\n      if (!(eq(start, finish) && soffset === foffset)) {\n        return closest$1(start, 'td,th', isRoot).bind(function (s) {\n          return closest$1(finish, 'td,th', isRoot).bind(function (f) {\n            return detect$5(container, isRoot, s, f, selectRange);\n          });\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var detect$5 = function (container, isRoot, start, finish, selectRange) {\n      if (!eq(start, finish)) {\n        return CellSelection.identify(start, finish, isRoot).bind(function (cellSel) {\n          var boxes = cellSel.boxes().getOr([]);\n          if (boxes.length > 0) {\n            selectRange(container, boxes, cellSel.start(), cellSel.finish());\n            return Option.some(Response.create(Option.some(Util.makeSitus(start, 0, start, getEnd(start))), true));\n          } else {\n            return Option.none();\n          }\n        });\n      } else {\n        return Option.none();\n      }\n    };\n    var update = function (rows, columns, container, selected, annotations) {\n      var updateSelection = function (newSels) {\n        annotations.clear(container);\n        annotations.selectRange(container, newSels.boxes(), newSels.start(), newSels.finish());\n        return newSels.boxes();\n      };\n      return CellSelection.shiftSelection(selected, rows, columns, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(updateSelection);\n    };\n    var KeySelection = {\n      sync: sync,\n      detect: detect$5,\n      update: update\n    };\n\n    var traverse = Immutable('item', 'mode');\n    var backtrack = function (universe, item, _direction, transition) {\n      if (transition === void 0) {\n        transition = sidestep;\n      }\n      return universe.property().parent(item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var sidestep = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      return direction.sibling(universe, item).map(function (p) {\n        return traverse(p, transition);\n      });\n    };\n    var advance = function (universe, item, direction, transition) {\n      if (transition === void 0) {\n        transition = advance;\n      }\n      var children = universe.property().children(item);\n      var result = direction.first(children);\n      return result.map(function (r) {\n        return traverse(r, transition);\n      });\n    };\n    var successors = [\n      {\n        current: backtrack,\n        next: sidestep,\n        fallback: Option.none()\n      },\n      {\n        current: sidestep,\n        next: advance,\n        fallback: Option.some(backtrack)\n      },\n      {\n        current: advance,\n        next: advance,\n        fallback: Option.some(sidestep)\n      }\n    ];\n    var go$1 = function (universe, item, mode, direction, rules) {\n      if (rules === void 0) {\n        rules = successors;\n      }\n      var ruleOpt = find(rules, function (succ) {\n        return succ.current === mode;\n      });\n      return ruleOpt.bind(function (rule) {\n        return rule.current(universe, item, direction, rule.next).orThunk(function () {\n          return rule.fallback.bind(function (fb) {\n            return go$1(universe, item, fb, direction);\n          });\n        });\n      });\n    };\n\n    var left = function () {\n      var sibling = function (universe, item) {\n        return universe.query().prevSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[children.length - 1]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var right = function () {\n      var sibling = function (universe, item) {\n        return universe.query().nextSibling(item);\n      };\n      var first = function (children) {\n        return children.length > 0 ? Option.some(children[0]) : Option.none();\n      };\n      return {\n        sibling: sibling,\n        first: first\n      };\n    };\n    var Walkers = {\n      left: left,\n      right: right\n    };\n\n    var hone = function (universe, item, predicate, mode, direction, isRoot) {\n      var next = go$1(universe, item, mode, direction);\n      return next.bind(function (n) {\n        if (isRoot(n.item())) {\n          return Option.none();\n        } else {\n          return predicate(n.item()) ? Option.some(n.item()) : hone(universe, n.item(), predicate, n.mode(), direction, isRoot);\n        }\n      });\n    };\n    var left$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.left(), isRoot);\n    };\n    var right$1 = function (universe, item, predicate, isRoot) {\n      return hone(universe, item, predicate, sidestep, Walkers.right(), isRoot);\n    };\n\n    var isLeaf = function (universe) {\n      return function (element) {\n        return universe.property().children(element).length === 0;\n      };\n    };\n    var before$3 = function (universe, item, isRoot) {\n      return seekLeft(universe, item, isLeaf(universe), isRoot);\n    };\n    var after$4 = function (universe, item, isRoot) {\n      return seekRight(universe, item, isLeaf(universe), isRoot);\n    };\n    var seekLeft = left$1;\n    var seekRight = right$1;\n\n    var universe$2 = DomUniverse();\n    var before$4 = function (element, isRoot) {\n      return before$3(universe$2, element, isRoot);\n    };\n    var after$5 = function (element, isRoot) {\n      return after$4(universe$2, element, isRoot);\n    };\n    var seekLeft$1 = function (element, predicate, isRoot) {\n      return seekLeft(universe$2, element, predicate, isRoot);\n    };\n    var seekRight$1 = function (element, predicate, isRoot) {\n      return seekRight(universe$2, element, predicate, isRoot);\n    };\n\n    var ancestor$2 = function (scope, predicate, isRoot) {\n      return ancestor(scope, predicate, isRoot).isSome();\n    };\n\n    var point = Immutable('element', 'offset');\n    var delta = Immutable('element', 'deltaOffset');\n    var range$2 = Immutable('element', 'start', 'finish');\n    var points = Immutable('begin', 'end');\n    var text = Immutable('element', 'text');\n\n    var adt$5 = Adt.generate([\n      { none: ['message'] },\n      { success: [] },\n      { failedUp: ['cell'] },\n      { failedDown: ['cell'] }\n    ]);\n    var isOverlapping = function (bridge, before, after) {\n      var beforeBounds = bridge.getRect(before);\n      var afterBounds = bridge.getRect(after);\n      return afterBounds.right > beforeBounds.left && afterBounds.left < beforeBounds.right;\n    };\n    var isRow = function (elem) {\n      return closest$1(elem, 'tr');\n    };\n    var verify = function (bridge, before, beforeOffset, after, afterOffset, failure, isRoot) {\n      return closest$1(after, 'td,th', isRoot).bind(function (afterCell) {\n        return closest$1(before, 'td,th', isRoot).map(function (beforeCell) {\n          if (!eq(afterCell, beforeCell)) {\n            return DomParent.sharedOne(isRow, [\n              afterCell,\n              beforeCell\n            ]).fold(function () {\n              return isOverlapping(bridge, beforeCell, afterCell) ? adt$5.success() : failure(beforeCell);\n            }, function (_sharedRow) {\n              return failure(beforeCell);\n            });\n          } else {\n            return eq(after, afterCell) && getEnd(afterCell) === afterOffset ? failure(beforeCell) : adt$5.none('in same cell');\n          }\n        });\n      }).getOr(adt$5.none('default'));\n    };\n    var cata$2 = function (subject, onNone, onSuccess, onFailedUp, onFailedDown) {\n      return subject.fold(onNone, onSuccess, onFailedUp, onFailedDown);\n    };\n    var BeforeAfter = __assign({}, adt$5, {\n      verify: verify,\n      cata: cata$2\n    });\n\n    var inAncestor = Immutable('ancestor', 'descendants', 'element', 'index');\n    var inParent = Immutable('parent', 'children', 'element', 'index');\n    var indexInParent = function (element) {\n      return parent(element).bind(function (parent) {\n        var children$1 = children(parent);\n        return indexOf(children$1, element).map(function (index) {\n          return inParent(parent, children$1, element, index);\n        });\n      });\n    };\n    var indexOf = function (elements, element) {\n      return findIndex(elements, curry(eq, element));\n    };\n\n    var isBr = function (elem) {\n      return name(elem) === 'br';\n    };\n    var gatherer = function (cand, gather, isRoot) {\n      return gather(cand, isRoot).bind(function (target) {\n        return isText(target) && get$2(target).trim().length === 0 ? gatherer(target, gather, isRoot) : Option.some(target);\n      });\n    };\n    var handleBr = function (isRoot, element, direction) {\n      return direction.traverse(element).orThunk(function () {\n        return gatherer(element, direction.gather, isRoot);\n      }).map(direction.relative);\n    };\n    var findBr = function (element, offset) {\n      return child(element, offset).filter(isBr).orThunk(function () {\n        return child(element, offset - 1).filter(isBr);\n      });\n    };\n    var handleParent = function (isRoot, element, offset, direction) {\n      return findBr(element, offset).bind(function (br) {\n        return direction.traverse(br).fold(function () {\n          return gatherer(br, direction.gather, isRoot).map(direction.relative);\n        }, function (adjacent) {\n          return indexInParent(adjacent).map(function (info) {\n            return Situ.on(info.parent(), info.index());\n          });\n        });\n      });\n    };\n    var tryBr = function (isRoot, element, offset, direction) {\n      var target = isBr(element) ? handleBr(isRoot, element, direction) : handleParent(isRoot, element, offset, direction);\n      return target.map(function (tgt) {\n        return {\n          start: constant(tgt),\n          finish: constant(tgt)\n        };\n      });\n    };\n    var process = function (analysis) {\n      return BeforeAfter.cata(analysis, function (message) {\n        return Option.none();\n      }, function () {\n        return Option.none();\n      }, function (cell) {\n        return Option.some(point(cell, 0));\n      }, function (cell) {\n        return Option.some(point(cell, getEnd(cell)));\n      });\n    };\n    var BrTags = {\n      tryBr: tryBr,\n      process: process\n    };\n\n    var nu$3 = MixedBag([\n      'left',\n      'top',\n      'right',\n      'bottom'\n    ], []);\n    var moveDown = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() + amount,\n        right: caret.right(),\n        bottom: caret.bottom() + amount\n      });\n    };\n    var moveUp = function (caret, amount) {\n      return nu$3({\n        left: caret.left(),\n        top: caret.top() - amount,\n        right: caret.right(),\n        bottom: caret.bottom() - amount\n      });\n    };\n    var moveBottomTo = function (caret, bottom) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: bottom - height,\n        right: caret.right(),\n        bottom: bottom\n      });\n    };\n    var moveTopTo = function (caret, top) {\n      var height = caret.bottom() - caret.top();\n      return nu$3({\n        left: caret.left(),\n        top: top,\n        right: caret.right(),\n        bottom: top + height\n      });\n    };\n    var translate = function (caret, xDelta, yDelta) {\n      return nu$3({\n        left: caret.left() + xDelta,\n        top: caret.top() + yDelta,\n        right: caret.right() + xDelta,\n        bottom: caret.bottom() + yDelta\n      });\n    };\n    var getTop$1 = function (caret) {\n      return caret.top();\n    };\n    var getBottom = function (caret) {\n      return caret.bottom();\n    };\n    var toString = function (caret) {\n      return '(' + caret.left() + ', ' + caret.top() + ') -> (' + caret.right() + ', ' + caret.bottom() + ')';\n    };\n    var Carets = {\n      nu: nu$3,\n      moveUp: moveUp,\n      moveDown: moveDown,\n      moveBottomTo: moveBottomTo,\n      moveTopTo: moveTopTo,\n      getTop: getTop$1,\n      getBottom: getBottom,\n      translate: translate,\n      toString: toString\n    };\n\n    var getPartialBox = function (bridge, element, offset) {\n      if (offset >= 0 && offset < getEnd(element)) {\n        return bridge.getRangedRect(element, offset, element, offset + 1);\n      } else if (offset > 0) {\n        return bridge.getRangedRect(element, offset - 1, element, offset);\n      }\n      return Option.none();\n    };\n    var toCaret = function (rect) {\n      return Carets.nu({\n        left: rect.left,\n        top: rect.top,\n        right: rect.right,\n        bottom: rect.bottom\n      });\n    };\n    var getElemBox = function (bridge, element) {\n      return Option.some(bridge.getRect(element));\n    };\n    var getBoxAt = function (bridge, element, offset) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return getPartialBox(bridge, element, offset).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var getEntireBox = function (bridge, element) {\n      if (isElement(element)) {\n        return getElemBox(bridge, element).map(toCaret);\n      } else if (isText(element)) {\n        return bridge.getRangedRect(element, 0, element, getEnd(element)).map(toCaret);\n      } else {\n        return Option.none();\n      }\n    };\n    var Rectangles = {\n      getBoxAt: getBoxAt,\n      getEntireBox: getEntireBox\n    };\n\n    var JUMP_SIZE = 5;\n    var NUM_RETRIES = 100;\n    var adt$6 = Adt.generate([\n      { none: [] },\n      { retry: ['caret'] }\n    ]);\n    var isOutside = function (caret, box) {\n      return caret.left() < box.left() || Math.abs(box.right() - caret.left()) < 1 || caret.left() > box.right();\n    };\n    var inOutsideBlock = function (bridge, element, caret) {\n      return closest(element, DomStructure.isBlock).fold(constant(false), function (cell) {\n        return Rectangles.getEntireBox(bridge, cell).exists(function (box) {\n          return isOutside(caret, box);\n        });\n      });\n    };\n    var adjustDown = function (bridge, element, guessBox, original, caret) {\n      var lowerCaret = Carets.moveDown(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.bottom() - original.bottom()) < 1) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() > caret.bottom()) {\n        return adt$6.retry(lowerCaret);\n      } else if (guessBox.top() === caret.bottom()) {\n        return adt$6.retry(Carets.moveDown(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(lowerCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var adjustUp = function (bridge, element, guessBox, original, caret) {\n      var higherCaret = Carets.moveUp(caret, JUMP_SIZE);\n      if (Math.abs(guessBox.top() - original.top()) < 1) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() < caret.top()) {\n        return adt$6.retry(higherCaret);\n      } else if (guessBox.bottom() === caret.top()) {\n        return adt$6.retry(Carets.moveUp(caret, 1));\n      } else {\n        return inOutsideBlock(bridge, element, caret) ? adt$6.retry(Carets.translate(higherCaret, JUMP_SIZE, 0)) : adt$6.none();\n      }\n    };\n    var upMovement = {\n      point: Carets.getTop,\n      adjuster: adjustUp,\n      move: Carets.moveUp,\n      gather: before$4\n    };\n    var downMovement = {\n      point: Carets.getBottom,\n      adjuster: adjustDown,\n      move: Carets.moveDown,\n      gather: after$5\n    };\n    var isAtTable = function (bridge, x, y) {\n      return bridge.elementFromPoint(x, y).filter(function (elm) {\n        return name(elm) === 'table';\n      }).isSome();\n    };\n    var adjustForTable = function (bridge, movement, original, caret, numRetries) {\n      return adjustTil(bridge, movement, original, movement.move(caret, JUMP_SIZE), numRetries);\n    };\n    var adjustTil = function (bridge, movement, original, caret, numRetries) {\n      if (numRetries === 0) {\n        return Option.some(caret);\n      }\n      if (isAtTable(bridge, caret.left(), movement.point(caret))) {\n        return adjustForTable(bridge, movement, original, caret, numRetries - 1);\n      }\n      return bridge.situsFromPoint(caret.left(), movement.point(caret)).bind(function (guess) {\n        return guess.start().fold(Option.none, function (element) {\n          return Rectangles.getEntireBox(bridge, element).bind(function (guessBox) {\n            return movement.adjuster(bridge, element, guessBox, original, caret).fold(Option.none, function (newCaret) {\n              return adjustTil(bridge, movement, original, newCaret, numRetries - 1);\n            });\n          }).orThunk(function () {\n            return Option.some(caret);\n          });\n        }, Option.none);\n      });\n    };\n    var ieTryDown = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.bottom() + JUMP_SIZE);\n    };\n    var ieTryUp = function (bridge, caret) {\n      return bridge.situsFromPoint(caret.left(), caret.top() - JUMP_SIZE);\n    };\n    var checkScroll = function (movement, adjusted, bridge) {\n      if (movement.point(adjusted) > bridge.getInnerHeight()) {\n        return Option.some(movement.point(adjusted) - bridge.getInnerHeight());\n      } else if (movement.point(adjusted) < 0) {\n        return Option.some(-movement.point(adjusted));\n      } else {\n        return Option.none();\n      }\n    };\n    var retry = function (movement, bridge, caret) {\n      var moved = movement.move(caret, JUMP_SIZE);\n      var adjusted = adjustTil(bridge, movement, caret, moved, NUM_RETRIES).getOr(moved);\n      return checkScroll(movement, adjusted, bridge).fold(function () {\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted));\n      }, function (delta) {\n        bridge.scrollBy(0, delta);\n        return bridge.situsFromPoint(adjusted.left(), movement.point(adjusted) - delta);\n      });\n    };\n    var Retries = {\n      tryUp: curry(retry, upMovement),\n      tryDown: curry(retry, downMovement),\n      ieTryUp: ieTryUp,\n      ieTryDown: ieTryDown,\n      getJumpSize: constant(JUMP_SIZE)\n    };\n\n    var MAX_RETRIES = 20;\n    var platform$1 = PlatformDetection$1.detect();\n    var findSpot = function (bridge, isRoot, direction) {\n      return bridge.getSelection().bind(function (sel) {\n        return BrTags.tryBr(isRoot, sel.finish(), sel.foffset(), direction).fold(function () {\n          return Option.some(point(sel.finish(), sel.foffset()));\n        }, function (brNeighbour) {\n          var range = bridge.fromSitus(brNeighbour);\n          var analysis = BeforeAfter.verify(bridge, sel.finish(), sel.foffset(), range.finish(), range.foffset(), direction.failure, isRoot);\n          return BrTags.process(analysis);\n        });\n      });\n    };\n    var scan = function (bridge, isRoot, element, offset, direction, numRetries) {\n      if (numRetries === 0) {\n        return Option.none();\n      }\n      return tryCursor(bridge, isRoot, element, offset, direction).bind(function (situs) {\n        var range = bridge.fromSitus(situs);\n        var analysis = BeforeAfter.verify(bridge, element, offset, range.finish(), range.foffset(), direction.failure, isRoot);\n        return BeforeAfter.cata(analysis, function () {\n          return Option.none();\n        }, function () {\n          return Option.some(situs);\n        }, function (cell) {\n          if (eq(element, cell) && offset === 0) {\n            return tryAgain(bridge, element, offset, Carets.moveUp, direction);\n          } else {\n            return scan(bridge, isRoot, cell, 0, direction, numRetries - 1);\n          }\n        }, function (cell) {\n          if (eq(element, cell) && offset === getEnd(cell)) {\n            return tryAgain(bridge, element, offset, Carets.moveDown, direction);\n          } else {\n            return scan(bridge, isRoot, cell, getEnd(cell), direction, numRetries - 1);\n          }\n        });\n      });\n    };\n    var tryAgain = function (bridge, element, offset, move, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, move(box, Retries.getJumpSize()));\n      });\n    };\n    var tryAt = function (bridge, direction, box) {\n      if (platform$1.browser.isChrome() || platform$1.browser.isSafari() || platform$1.browser.isFirefox() || platform$1.browser.isEdge()) {\n        return direction.otherRetry(bridge, box);\n      } else if (platform$1.browser.isIE()) {\n        return direction.ieRetry(bridge, box);\n      } else {\n        return Option.none();\n      }\n    };\n    var tryCursor = function (bridge, isRoot, element, offset, direction) {\n      return Rectangles.getBoxAt(bridge, element, offset).bind(function (box) {\n        return tryAt(bridge, direction, box);\n      });\n    };\n    var handle$2 = function (bridge, isRoot, direction) {\n      return findSpot(bridge, isRoot, direction).bind(function (spot) {\n        return scan(bridge, isRoot, spot.element(), spot.offset(), direction, MAX_RETRIES).map(bridge.fromSitus);\n      });\n    };\n    var TableKeys = { handle: handle$2 };\n\n    var detection = PlatformDetection$1.detect();\n    var inSameTable = function (elem, table) {\n      return ancestor$2(elem, function (e) {\n        return parent(e).exists(function (p) {\n          return eq(p, table);\n        });\n      });\n    };\n    var simulate = function (bridge, isRoot, direction, initial, anchor) {\n      return closest$1(initial, 'td,th', isRoot).bind(function (start) {\n        return closest$1(start, 'table', isRoot).bind(function (table) {\n          if (!inSameTable(anchor, table)) {\n            return Option.none();\n          }\n          return TableKeys.handle(bridge, isRoot, direction).bind(function (range) {\n            return closest$1(range.finish(), 'td,th', isRoot).map(function (finish) {\n              return {\n                start: constant(start),\n                finish: constant(finish),\n                range: constant(range)\n              };\n            });\n          });\n        });\n      });\n    };\n    var navigate = function (bridge, isRoot, direction, initial, anchor, precheck) {\n      if (detection.browser.isIE()) {\n        return Option.none();\n      } else {\n        return precheck(initial, isRoot).orThunk(function () {\n          return simulate(bridge, isRoot, direction, initial, anchor).map(function (info) {\n            var range = info.range();\n            return Response.create(Option.some(Util.makeSitus(range.start(), range.soffset(), range.finish(), range.foffset())), true);\n          });\n        });\n      }\n    };\n    var firstUpCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[0])) {\n            return seekLeft$1(table, function (element) {\n              return last$1(element).isSome();\n            }, isRoot).map(function (last) {\n              var lastOffset = getEnd(last);\n              return Response.create(Option.some(Util.makeSitus(last, lastOffset, last, lastOffset)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var lastDownCheck = function (initial, isRoot) {\n      return closest$1(initial, 'tr', isRoot).bind(function (startRow) {\n        return closest$1(startRow, 'table', isRoot).bind(function (table) {\n          var rows = descendants$1(table, 'tr');\n          if (eq(startRow, rows[rows.length - 1])) {\n            return seekRight$1(table, function (element) {\n              return first(element).isSome();\n            }, isRoot).map(function (first) {\n              return Response.create(Option.some(Util.makeSitus(first, 0, first, 0)), true);\n            });\n          } else {\n            return Option.none();\n          }\n        });\n      });\n    };\n    var select = function (bridge, container, isRoot, direction, initial, anchor, selectRange) {\n      return simulate(bridge, isRoot, direction, initial, anchor).bind(function (info) {\n        return KeySelection.detect(container, isRoot, info.start(), info.finish(), selectRange);\n      });\n    };\n    var VerticalMovement = {\n      navigate: navigate,\n      select: select,\n      firstUpCheck: firstUpCheck,\n      lastDownCheck: lastDownCheck\n    };\n\n    var findCell = function (target, isRoot) {\n      return closest$1(target, 'td,th', isRoot);\n    };\n    function MouseSelection (bridge, container, isRoot, annotations) {\n      var cursor = Option.none();\n      var clearState = function () {\n        cursor = Option.none();\n      };\n      var mousedown = function (event) {\n        annotations.clear(container);\n        cursor = findCell(event.target(), isRoot);\n      };\n      var mouseover = function (event) {\n        cursor.each(function (start) {\n          annotations.clear(container);\n          findCell(event.target(), isRoot).each(function (finish) {\n            CellSelection.identify(start, finish, isRoot).each(function (cellSel) {\n              var boxes = cellSel.boxes().getOr([]);\n              if (boxes.length > 1 || boxes.length === 1 && !eq(start, finish)) {\n                annotations.selectRange(container, boxes, cellSel.start(), cellSel.finish());\n                bridge.selectContents(finish);\n              }\n            });\n          });\n        });\n      };\n      var mouseup = function (_event) {\n        cursor.each(clearState);\n      };\n      return {\n        mousedown: mousedown,\n        mouseover: mouseover,\n        mouseup: mouseup\n      };\n    }\n\n    var down = {\n      traverse: nextSibling,\n      gather: after$5,\n      relative: Situ.before,\n      otherRetry: Retries.tryDown,\n      ieRetry: Retries.ieTryDown,\n      failure: BeforeAfter.failedDown\n    };\n    var up = {\n      traverse: prevSibling,\n      gather: before$4,\n      relative: Situ.before,\n      otherRetry: Retries.tryUp,\n      ieRetry: Retries.ieTryUp,\n      failure: BeforeAfter.failedUp\n    };\n    var KeyDirection = {\n      down: down,\n      up: up\n    };\n\n    var isKey = function (key) {\n      return function (keycode) {\n        return keycode === key;\n      };\n    };\n    var isUp = isKey(38);\n    var isDown = isKey(40);\n    var isNavigation = function (keycode) {\n      return keycode >= 37 && keycode <= 40;\n    };\n    var SelectionKeys = {\n      ltr: {\n        isBackward: isKey(37),\n        isForward: isKey(39)\n      },\n      rtl: {\n        isBackward: isKey(39),\n        isForward: isKey(37)\n      },\n      isUp: isUp,\n      isDown: isDown,\n      isNavigation: isNavigation\n    };\n\n    var toRaw = function (sr) {\n      return {\n        left: sr.left(),\n        top: sr.top(),\n        right: sr.right(),\n        bottom: sr.bottom(),\n        width: sr.width(),\n        height: sr.height()\n      };\n    };\n    var Rect = { toRaw: toRaw };\n\n    var isSafari = PlatformDetection$1.detect().browser.isSafari();\n    var get$a = function (_DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var x = doc.body.scrollLeft || doc.documentElement.scrollLeft;\n      var y = doc.body.scrollTop || doc.documentElement.scrollTop;\n      return Position(x, y);\n    };\n    var by = function (x, y, _DOC) {\n      var doc = _DOC !== undefined ? _DOC.dom() : domGlobals.document;\n      var win = doc.defaultView;\n      win.scrollBy(x, y);\n    };\n\n    var WindowBridge = function (win) {\n      var elementFromPoint = function (x, y) {\n        return Element.fromPoint(Element.fromDom(win.document), x, y);\n      };\n      var getRect = function (element) {\n        return element.dom().getBoundingClientRect();\n      };\n      var getRangedRect = function (start, soffset, finish, foffset) {\n        var sel = Selection.exact(start, soffset, finish, foffset);\n        return getFirstRect$1(win, sel).map(Rect.toRaw);\n      };\n      var getSelection = function () {\n        return get$9(win).map(function (exactAdt) {\n          return Util.convertToRange(win, exactAdt);\n        });\n      };\n      var fromSitus = function (situs) {\n        var relative = Selection.relative(situs.start(), situs.finish());\n        return Util.convertToRange(win, relative);\n      };\n      var situsFromPoint = function (x, y) {\n        return getAtPoint(win, x, y).map(function (exact) {\n          return Situs.create(exact.start(), exact.soffset(), exact.finish(), exact.foffset());\n        });\n      };\n      var clearSelection = function () {\n        clear(win);\n      };\n      var selectContents = function (element) {\n        setToElement(win, element);\n      };\n      var setSelection = function (sel) {\n        setExact(win, sel.start(), sel.soffset(), sel.finish(), sel.foffset());\n      };\n      var setRelativeSelection = function (start, finish) {\n        setRelative(win, start, finish);\n      };\n      var getInnerHeight = function () {\n        return win.innerHeight;\n      };\n      var getScrollY = function () {\n        var pos = get$a(Element.fromDom(win.document));\n        return pos.top();\n      };\n      var scrollBy = function (x, y) {\n        by(x, y, Element.fromDom(win.document));\n      };\n      return {\n        elementFromPoint: elementFromPoint,\n        getRect: getRect,\n        getRangedRect: getRangedRect,\n        getSelection: getSelection,\n        fromSitus: fromSitus,\n        situsFromPoint: situsFromPoint,\n        clearSelection: clearSelection,\n        setSelection: setSelection,\n        setRelativeSelection: setRelativeSelection,\n        selectContents: selectContents,\n        getInnerHeight: getInnerHeight,\n        getScrollY: getScrollY,\n        scrollBy: scrollBy\n      };\n    };\n\n    var rc = Immutable('rows', 'cols');\n    var mouse = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var handlers = MouseSelection(bridge, container, isRoot, annotations);\n      return {\n        mousedown: handlers.mousedown,\n        mouseover: handlers.mouseover,\n        mouseup: handlers.mouseup\n      };\n    };\n    var keyboard = function (win, container, isRoot, annotations) {\n      var bridge = WindowBridge(win);\n      var clearToNavigate = function () {\n        annotations.clear(container);\n        return Option.none();\n      };\n      var keydown = function (event, start, soffset, finish, foffset, direction) {\n        var realEvent = event.raw();\n        var keycode = realEvent.which;\n        var shiftKey = realEvent.shiftKey === true;\n        var handler = CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.down, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return curry(VerticalMovement.select, bridge, container, isRoot, KeyDirection.up, finish, start, annotations.selectRange);\n          } else if (SelectionKeys.isDown(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.down, finish, start, VerticalMovement.lastDownCheck);\n          } else if (SelectionKeys.isUp(keycode)) {\n            return curry(VerticalMovement.navigate, bridge, isRoot, KeyDirection.up, finish, start, VerticalMovement.firstUpCheck);\n          } else {\n            return Option.none;\n          }\n        }, function (selected) {\n          var update = function (attempts) {\n            return function () {\n              var navigation = findMap(attempts, function (delta) {\n                return KeySelection.update(delta.rows(), delta.cols(), container, selected, annotations);\n              });\n              return navigation.fold(function () {\n                return CellSelection.getEdges(container, annotations.firstSelectedSelector(), annotations.lastSelectedSelector()).map(function (edges) {\n                  var relative = SelectionKeys.isDown(keycode) || direction.isForward(keycode) ? Situ.after : Situ.before;\n                  bridge.setRelativeSelection(Situ.on(edges.first(), 0), relative(edges.table()));\n                  annotations.clear(container);\n                  return Response.create(Option.none(), true);\n                });\n              }, function (_) {\n                return Option.some(Response.create(Option.none(), true));\n              });\n            };\n          };\n          if (SelectionKeys.isDown(keycode) && shiftKey) {\n            return update([rc(+1, 0)]);\n          } else if (SelectionKeys.isUp(keycode) && shiftKey) {\n            return update([rc(-1, 0)]);\n          } else if (direction.isBackward(keycode) && shiftKey) {\n            return update([\n              rc(0, -1),\n              rc(-1, 0)\n            ]);\n          } else if (direction.isForward(keycode) && shiftKey) {\n            return update([\n              rc(0, +1),\n              rc(+1, 0)\n            ]);\n          } else if (SelectionKeys.isNavigation(keycode) && shiftKey === false) {\n            return clearToNavigate;\n          } else {\n            return Option.none;\n          }\n        });\n        return handler();\n      };\n      var keyup = function (event, start, soffset, finish, foffset) {\n        return CellSelection.retrieve(container, annotations.selectedSelector()).fold(function () {\n          var realEvent = event.raw();\n          var keycode = realEvent.which;\n          var shiftKey = realEvent.shiftKey === true;\n          if (shiftKey === false) {\n            return Option.none();\n          }\n          if (SelectionKeys.isNavigation(keycode)) {\n            return KeySelection.sync(container, isRoot, start, soffset, finish, foffset, annotations.selectRange);\n          } else {\n            return Option.none();\n          }\n        }, Option.none);\n      };\n      return {\n        keydown: keydown,\n        keyup: keyup\n      };\n    };\n    var InputHandlers = {\n      mouse: mouse,\n      keyboard: keyboard\n    };\n\n    var remove$7 = function (element, classes) {\n      each(classes, function (x) {\n        remove$5(element, x);\n      });\n    };\n\n    var addClass = function (clazz) {\n      return function (element) {\n        add$2(element, clazz);\n      };\n    };\n    var removeClasses = function (classes) {\n      return function (element) {\n        remove$7(element, classes);\n      };\n    };\n\n    var byClass = function (ephemera) {\n      var addSelectionClass = addClass(ephemera.selected());\n      var removeSelectionClasses = removeClasses([\n        ephemera.selected(),\n        ephemera.lastSelected(),\n        ephemera.firstSelected()\n      ]);\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionClasses);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionClass);\n        add$2(start, ephemera.firstSelected());\n        add$2(finish, ephemera.lastSelected());\n      };\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var byAttr = function (ephemera) {\n      var removeSelectionAttributes = function (element) {\n        remove(element, ephemera.selected());\n        remove(element, ephemera.firstSelected());\n        remove(element, ephemera.lastSelected());\n      };\n      var addSelectionAttribute = function (element) {\n        set(element, ephemera.selected(), '1');\n      };\n      var clear = function (container) {\n        var sels = descendants$1(container, ephemera.selectedSelector());\n        each(sels, removeSelectionAttributes);\n      };\n      var selectRange = function (container, cells, start, finish) {\n        clear(container);\n        each(cells, addSelectionAttribute);\n        set(start, ephemera.firstSelected(), '1');\n        set(finish, ephemera.lastSelected(), '1');\n      };\n      return {\n        clear: clear,\n        selectRange: selectRange,\n        selectedSelector: ephemera.selectedSelector,\n        firstSelectedSelector: ephemera.firstSelectedSelector,\n        lastSelectedSelector: ephemera.lastSelectedSelector\n      };\n    };\n    var SelectionAnnotation = {\n      byClass: byClass,\n      byAttr: byAttr\n    };\n\n    var hasInternalTarget = function (e) {\n      return has$1(Element.fromDom(e.target), 'ephox-snooker-resizer-bar') === false;\n    };\n    function CellSelection$1 (editor, lazyResize) {\n      var handlerStruct = MixedBag([\n        'mousedown',\n        'mouseover',\n        'mouseup',\n        'keyup',\n        'keydown'\n      ], []);\n      var handlers = Option.none();\n      var annotations = SelectionAnnotation.byAttr(Ephemera);\n      editor.on('init', function (e) {\n        var win = editor.getWin();\n        var body = getBody$1(editor);\n        var isRoot = getIsRoot(editor);\n        var syncSelection = function () {\n          var sel = editor.selection;\n          var start = Element.fromDom(sel.getStart());\n          var end = Element.fromDom(sel.getEnd());\n          var shared = DomParent.sharedOne(TableLookup.table, [\n            start,\n            end\n          ]);\n          shared.fold(function () {\n            annotations.clear(body);\n          }, noop);\n        };\n        var mouseHandlers = InputHandlers.mouse(win, body, isRoot, annotations);\n        var keyHandlers = InputHandlers.keyboard(win, body, isRoot, annotations);\n        var hasShiftKey = function (event) {\n          return event.raw().shiftKey === true;\n        };\n        var handleResponse = function (event, response) {\n          if (!hasShiftKey(event)) {\n            return;\n          }\n          if (response.kill()) {\n            event.kill();\n          }\n          response.selection().each(function (ns) {\n            var relative = Selection.relative(ns.start(), ns.finish());\n            var rng = asLtrRange(win, relative);\n            editor.selection.setRng(rng);\n          });\n        };\n        var keyup = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          if (wrappedEvent.raw().shiftKey && SelectionKeys.isNavigation(wrappedEvent.raw().which)) {\n            var rng = editor.selection.getRng();\n            var start = Element.fromDom(rng.startContainer);\n            var end = Element.fromDom(rng.endContainer);\n            keyHandlers.keyup(wrappedEvent, start, rng.startOffset, end, rng.endOffset).each(function (response) {\n              handleResponse(wrappedEvent, response);\n            });\n          }\n        };\n        var keydown = function (event) {\n          var wrappedEvent = wrapEvent(event);\n          lazyResize().each(function (resize) {\n            resize.hideBars();\n          });\n          var rng = editor.selection.getRng();\n          var startContainer = Element.fromDom(editor.selection.getStart());\n          var start = Element.fromDom(rng.startContainer);\n          var end = Element.fromDom(rng.endContainer);\n          var direction = Direction.directionAt(startContainer).isRtl() ? SelectionKeys.rtl : SelectionKeys.ltr;\n          keyHandlers.keydown(wrappedEvent, start, rng.startOffset, end, rng.endOffset, direction).each(function (response) {\n            handleResponse(wrappedEvent, response);\n          });\n          lazyResize().each(function (resize) {\n            resize.showBars();\n          });\n        };\n        var isMouseEvent = function (event) {\n          return event.hasOwnProperty('x') && event.hasOwnProperty('y');\n        };\n        var wrapEvent = function (event) {\n          var target = Element.fromDom(event.target);\n          var stop = function () {\n            event.stopPropagation();\n          };\n          var prevent = function () {\n            event.preventDefault();\n          };\n          var kill = compose(prevent, stop);\n          return {\n            target: constant(target),\n            x: constant(isMouseEvent(event) ? event.x : null),\n            y: constant(isMouseEvent(event) ? event.y : null),\n            stop: stop,\n            prevent: prevent,\n            kill: kill,\n            raw: constant(event)\n          };\n        };\n        var isLeftMouse = function (raw) {\n          return raw.button === 0;\n        };\n        var isLeftButtonPressed = function (raw) {\n          if (raw.buttons === undefined) {\n            return true;\n          }\n          return (raw.buttons & 1) !== 0;\n        };\n        var mouseDown = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mousedown(wrapEvent(e));\n          }\n        };\n        var mouseOver = function (e) {\n          if (isLeftButtonPressed(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseover(wrapEvent(e));\n          }\n        };\n        var mouseUp = function (e) {\n          if (isLeftMouse(e) && hasInternalTarget(e)) {\n            mouseHandlers.mouseup(wrapEvent(e));\n          }\n        };\n        editor.on('mousedown', mouseDown);\n        editor.on('mouseover', mouseOver);\n        editor.on('mouseup', mouseUp);\n        editor.on('keyup', keyup);\n        editor.on('keydown', keydown);\n        editor.on('nodechange', syncSelection);\n        handlers = Option.some(handlerStruct({\n          mousedown: mouseDown,\n          mouseover: mouseOver,\n          mouseup: mouseUp,\n          keyup: keyup,\n          keydown: keydown\n        }));\n      });\n      var destroy = function () {\n        handlers.each(function (handlers) {\n        });\n      };\n      return {\n        clear: annotations.clear,\n        destroy: destroy\n      };\n    }\n\n    var Selections = function (editor) {\n      var get = function () {\n        var body = getBody$1(editor);\n        return TableSelection.retrieve(body, Ephemera.selectedSelector()).fold(function () {\n          if (editor.selection.getStart() === undefined) {\n            return SelectionTypes.none();\n          } else {\n            return SelectionTypes.single(editor.selection);\n          }\n        }, function (cells) {\n          return SelectionTypes.multiple(cells);\n        });\n      };\n      return { get: get };\n    };\n\n    var each$4 = global$1.each;\n    var addButtons = function (editor) {\n      var menuItems = [];\n      each$4('inserttable tableprops deletetable | cell row column'.split(' '), function (name) {\n        if (name === '|') {\n          menuItems.push({ text: '-' });\n        } else {\n          menuItems.push(editor.menuItems[name]);\n        }\n      });\n      editor.addButton('table', {\n        type: 'menubutton',\n        title: 'Table',\n        menu: menuItems\n      });\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n      editor.addButton('tableprops', {\n        title: 'Table properties',\n        onclick: cmd('mceTableProps'),\n        icon: 'table'\n      });\n      editor.addButton('tabledelete', {\n        title: 'Delete table',\n        onclick: cmd('mceTableDelete')\n      });\n      editor.addButton('tablecellprops', {\n        title: 'Cell properties',\n        onclick: cmd('mceTableCellProps')\n      });\n      editor.addButton('tablemergecells', {\n        title: 'Merge cells',\n        onclick: cmd('mceTableMergeCells')\n      });\n      editor.addButton('tablesplitcells', {\n        title: 'Split cell',\n        onclick: cmd('mceTableSplitCells')\n      });\n      editor.addButton('tableinsertrowbefore', {\n        title: 'Insert row before',\n        onclick: cmd('mceTableInsertRowBefore')\n      });\n      editor.addButton('tableinsertrowafter', {\n        title: 'Insert row after',\n        onclick: cmd('mceTableInsertRowAfter')\n      });\n      editor.addButton('tabledeleterow', {\n        title: 'Delete row',\n        onclick: cmd('mceTableDeleteRow')\n      });\n      editor.addButton('tablerowprops', {\n        title: 'Row properties',\n        onclick: cmd('mceTableRowProps')\n      });\n      editor.addButton('tablecutrow', {\n        title: 'Cut row',\n        onclick: cmd('mceTableCutRow')\n      });\n      editor.addButton('tablecopyrow', {\n        title: 'Copy row',\n        onclick: cmd('mceTableCopyRow')\n      });\n      editor.addButton('tablepasterowbefore', {\n        title: 'Paste row before',\n        onclick: cmd('mceTablePasteRowBefore')\n      });\n      editor.addButton('tablepasterowafter', {\n        title: 'Paste row after',\n        onclick: cmd('mceTablePasteRowAfter')\n      });\n      editor.addButton('tableinsertcolbefore', {\n        title: 'Insert column before',\n        onclick: cmd('mceTableInsertColBefore')\n      });\n      editor.addButton('tableinsertcolafter', {\n        title: 'Insert column after',\n        onclick: cmd('mceTableInsertColAfter')\n      });\n      editor.addButton('tabledeletecol', {\n        title: 'Delete column',\n        onclick: cmd('mceTableDeleteCol')\n      });\n    };\n    var addToolbars = function (editor) {\n      var isTable = function (table) {\n        var selectorMatched = editor.dom.is(table, 'table') && editor.getBody().contains(table);\n        return selectorMatched;\n      };\n      var toolbar = getToolbar(editor);\n      if (toolbar.length > 0) {\n        editor.addContextToolbar(isTable, toolbar.join(' '));\n      }\n    };\n    var Buttons = {\n      addButtons: addButtons,\n      addToolbars: addToolbars\n    };\n\n    var addMenuItems = function (editor, selections) {\n      var targets = Option.none();\n      var tableCtrls = [];\n      var cellCtrls = [];\n      var mergeCtrls = [];\n      var unmergeCtrls = [];\n      var noTargetDisable = function (ctrl) {\n        ctrl.disabled(true);\n      };\n      var ctrlEnable = function (ctrl) {\n        ctrl.disabled(false);\n      };\n      var pushTable = function () {\n        var self = this;\n        tableCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n      var pushCell = function () {\n        var self = this;\n        cellCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          ctrlEnable(self);\n        });\n      };\n      var pushMerge = function () {\n        var self = this;\n        mergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.mergable().isNone());\n        });\n      };\n      var pushUnmerge = function () {\n        var self = this;\n        unmergeCtrls.push(self);\n        targets.fold(function () {\n          noTargetDisable(self);\n        }, function (targets) {\n          self.disabled(targets.unmergable().isNone());\n        });\n      };\n      var setDisabledCtrls = function () {\n        targets.fold(function () {\n          each(tableCtrls, noTargetDisable);\n          each(cellCtrls, noTargetDisable);\n          each(mergeCtrls, noTargetDisable);\n          each(unmergeCtrls, noTargetDisable);\n        }, function (targets) {\n          each(tableCtrls, ctrlEnable);\n          each(cellCtrls, ctrlEnable);\n          each(mergeCtrls, function (mergeCtrl) {\n            mergeCtrl.disabled(targets.mergable().isNone());\n          });\n          each(unmergeCtrls, function (unmergeCtrl) {\n            unmergeCtrl.disabled(targets.unmergable().isNone());\n          });\n        });\n      };\n      editor.on('init', function () {\n        editor.on('nodechange', function (e) {\n          var cellOpt = Option.from(editor.dom.getParent(editor.selection.getStart(), 'th,td'));\n          targets = cellOpt.bind(function (cellDom) {\n            var cell = Element.fromDom(cellDom);\n            var table = TableLookup.table(cell);\n            return table.map(function (table) {\n              return TableTargets.forMenu(selections, table, cell);\n            });\n          });\n          setDisabledCtrls();\n        });\n      });\n      var generateTableGrid = function () {\n        var html = '';\n        html = '<table role=\"grid\" class=\"mce-grid mce-grid-border\" aria-readonly=\"true\">';\n        for (var y = 0; y < 10; y++) {\n          html += '<tr>';\n          for (var x = 0; x < 10; x++) {\n            html += '<td role=\"gridcell\" tabindex=\"-1\"><a id=\"mcegrid' + (y * 10 + x) + '\" href=\"#\" ' + 'data-mce-x=\"' + x + '\" data-mce-y=\"' + y + '\"></a></td>';\n          }\n          html += '</tr>';\n        }\n        html += '</table>';\n        html += '<div class=\"mce-text-center\" role=\"presentation\">1 x 1</div>';\n        return html;\n      };\n      var selectGrid = function (editor, tx, ty, control) {\n        var table = control.getEl().getElementsByTagName('table')[0];\n        var x, y, focusCell, cell, active;\n        var rtl = control.isRtl() || control.parent().rel === 'tl-tr';\n        table.nextSibling.innerHTML = tx + 1 + ' x ' + (ty + 1);\n        if (rtl) {\n          tx = 9 - tx;\n        }\n        for (y = 0; y < 10; y++) {\n          for (x = 0; x < 10; x++) {\n            cell = table.rows[y].childNodes[x].firstChild;\n            active = (rtl ? x >= tx : x <= tx) && y <= ty;\n            editor.dom.toggleClass(cell, 'mce-active', active);\n            if (active) {\n              focusCell = cell;\n            }\n          }\n        }\n        return focusCell.parentNode;\n      };\n      var insertTable = hasTableGrid(editor) === false ? {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        onclick: cmd('mceInsertTable')\n      } : {\n        text: 'Table',\n        icon: 'table',\n        context: 'table',\n        ariaHideMenu: true,\n        onclick: function (e) {\n          if (e.aria) {\n            this.parent().hideAll();\n            e.stopImmediatePropagation();\n            editor.execCommand('mceInsertTable');\n          }\n        },\n        onshow: function () {\n          selectGrid(editor, 0, 0, this.menu.items()[0]);\n        },\n        onhide: function () {\n          var elements = this.menu.items()[0].getEl().getElementsByTagName('a');\n          editor.dom.removeClass(elements, 'mce-active');\n          editor.dom.addClass(elements[0], 'mce-active');\n        },\n        menu: [{\n            type: 'container',\n            html: generateTableGrid(),\n            onPostRender: function () {\n              this.lastX = this.lastY = 0;\n            },\n            onmousemove: function (e) {\n              var target = e.target;\n              var x, y;\n              if (target.tagName.toUpperCase() === 'A') {\n                x = parseInt(target.getAttribute('data-mce-x'), 10);\n                y = parseInt(target.getAttribute('data-mce-y'), 10);\n                if (this.isRtl() || this.parent().rel === 'tl-tr') {\n                  x = 9 - x;\n                }\n                if (x !== this.lastX || y !== this.lastY) {\n                  selectGrid(editor, x, y, e.control);\n                  this.lastX = x;\n                  this.lastY = y;\n                }\n              }\n            },\n            onclick: function (e) {\n              var self = this;\n              if (e.target.tagName.toUpperCase() === 'A') {\n                e.preventDefault();\n                e.stopPropagation();\n                self.parent().cancel();\n                editor.undoManager.transact(function () {\n                  InsertTable.insert(editor, self.lastX + 1, self.lastY + 1);\n                });\n                editor.addVisual();\n              }\n            }\n          }]\n      };\n      function cmd(command) {\n        return function () {\n          editor.execCommand(command);\n        };\n      }\n      var tableProperties = {\n        text: 'Table properties',\n        context: 'table',\n        onPostRender: pushTable,\n        onclick: cmd('mceTableProps')\n      };\n      var deleteTable = {\n        text: 'Delete table',\n        context: 'table',\n        onPostRender: pushTable,\n        cmd: 'mceTableDelete'\n      };\n      var row = {\n        text: 'Row',\n        context: 'table',\n        menu: [\n          {\n            text: 'Insert row before',\n            onclick: cmd('mceTableInsertRowBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Insert row after',\n            onclick: cmd('mceTableInsertRowAfter'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Delete row',\n            onclick: cmd('mceTableDeleteRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Row properties',\n            onclick: cmd('mceTableRowProps'),\n            onPostRender: pushCell\n          },\n          { text: '-' },\n          {\n            text: 'Cut row',\n            onclick: cmd('mceTableCutRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Copy row',\n            onclick: cmd('mceTableCopyRow'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Paste row before',\n            onclick: cmd('mceTablePasteRowBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Paste row after',\n            onclick: cmd('mceTablePasteRowAfter'),\n            onPostRender: pushCell\n          }\n        ]\n      };\n      var column = {\n        text: 'Column',\n        context: 'table',\n        menu: [\n          {\n            text: 'Insert column before',\n            onclick: cmd('mceTableInsertColBefore'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Insert column after',\n            onclick: cmd('mceTableInsertColAfter'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Delete column',\n            onclick: cmd('mceTableDeleteCol'),\n            onPostRender: pushCell\n          }\n        ]\n      };\n      var cell = {\n        separator: 'before',\n        text: 'Cell',\n        context: 'table',\n        menu: [\n          {\n            text: 'Cell properties',\n            onclick: cmd('mceTableCellProps'),\n            onPostRender: pushCell\n          },\n          {\n            text: 'Merge cells',\n            onclick: cmd('mceTableMergeCells'),\n            onPostRender: pushMerge\n          },\n          {\n            text: 'Split cell',\n            onclick: cmd('mceTableSplitCells'),\n            onPostRender: pushUnmerge\n          }\n        ]\n      };\n      editor.addMenuItem('inserttable', insertTable);\n      editor.addMenuItem('tableprops', tableProperties);\n      editor.addMenuItem('deletetable', deleteTable);\n      editor.addMenuItem('row', row);\n      editor.addMenuItem('column', column);\n      editor.addMenuItem('cell', cell);\n    };\n    var MenuItems = { addMenuItems: addMenuItems };\n\n    var getClipboardRows = function (clipboardRows) {\n      return clipboardRows.get().fold(function () {\n        return;\n      }, function (rows) {\n        return map(rows, function (row) {\n          return row.dom();\n        });\n      });\n    };\n    var setClipboardRows = function (rows, clipboardRows) {\n      var sugarRows = map(rows, Element.fromDom);\n      clipboardRows.set(Option.from(sugarRows));\n    };\n    var getApi = function (editor, clipboardRows) {\n      return {\n        insertTable: function (columns, rows) {\n          return InsertTable.insert(editor, columns, rows);\n        },\n        setClipboardRows: function (rows) {\n          return setClipboardRows(rows, clipboardRows);\n        },\n        getClipboardRows: function () {\n          return getClipboardRows(clipboardRows);\n        }\n      };\n    };\n\n    function Plugin(editor) {\n      var resizeHandler = ResizeHandler(editor);\n      var cellSelection = CellSelection$1(editor, resizeHandler.lazyResize);\n      var actions = TableActions(editor, resizeHandler.lazyWire);\n      var selections = Selections(editor);\n      var clipboardRows = Cell(Option.none());\n      Commands.registerCommands(editor, actions, cellSelection, selections, clipboardRows);\n      Clipboard.registerEvents(editor, selections, actions, cellSelection);\n      MenuItems.addMenuItems(editor, selections);\n      Buttons.addButtons(editor);\n      Buttons.addToolbars(editor);\n      editor.on('PreInit', function () {\n        editor.serializer.addTempAttr(Ephemera.firstSelected());\n        editor.serializer.addTempAttr(Ephemera.lastSelected());\n      });\n      if (hasTabNavigation(editor)) {\n        editor.on('keydown', function (e) {\n          TabContext.handle(e, editor, actions, resizeHandler.lazyWire);\n        });\n      }\n      editor.on('remove', function () {\n        resizeHandler.destroy();\n        cellSelection.destroy();\n      });\n      return getApi(editor, clipboardRows);\n    }\n    global.add('table', Plugin);\n    function Plugin$1 () {\n    }\n\n    return Plugin$1;\n\n}(window));\n})();\n","(function () {\nvar insertdatetime = (function () {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var getDateFormat = function (editor) {\n      return editor.getParam('insertdatetime_dateformat', editor.translate('%Y-%m-%d'));\n    };\n    var getTimeFormat = function (editor) {\n      return editor.getParam('insertdatetime_timeformat', editor.translate('%H:%M:%S'));\n    };\n    var getFormats = function (editor) {\n      return editor.getParam('insertdatetime_formats', [\n        '%H:%M:%S',\n        '%Y-%m-%d',\n        '%I:%M:%S %p',\n        '%D'\n      ]);\n    };\n    var getDefaultDateTime = function (editor) {\n      var formats = getFormats(editor);\n      return formats.length > 0 ? formats[0] : getTimeFormat(editor);\n    };\n    var shouldInsertTimeElement = function (editor) {\n      return editor.getParam('insertdatetime_element', false);\n    };\n    var Settings = {\n      getDateFormat: getDateFormat,\n      getTimeFormat: getTimeFormat,\n      getFormats: getFormats,\n      getDefaultDateTime: getDefaultDateTime,\n      shouldInsertTimeElement: shouldInsertTimeElement\n    };\n\n    var daysShort = 'Sun Mon Tue Wed Thu Fri Sat Sun'.split(' ');\n    var daysLong = 'Sunday Monday Tuesday Wednesday Thursday Friday Saturday Sunday'.split(' ');\n    var monthsShort = 'Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec'.split(' ');\n    var monthsLong = 'January February March April May June July August September October November December'.split(' ');\n    var addZeros = function (value, len) {\n      value = '' + value;\n      if (value.length < len) {\n        for (var i = 0; i < len - value.length; i++) {\n          value = '0' + value;\n        }\n      }\n      return value;\n    };\n    var getDateTime = function (editor, fmt, date) {\n      date = date || new Date();\n      fmt = fmt.replace('%D', '%m/%d/%Y');\n      fmt = fmt.replace('%r', '%I:%M:%S %p');\n      fmt = fmt.replace('%Y', '' + date.getFullYear());\n      fmt = fmt.replace('%y', '' + date.getYear());\n      fmt = fmt.replace('%m', addZeros(date.getMonth() + 1, 2));\n      fmt = fmt.replace('%d', addZeros(date.getDate(), 2));\n      fmt = fmt.replace('%H', '' + addZeros(date.getHours(), 2));\n      fmt = fmt.replace('%M', '' + addZeros(date.getMinutes(), 2));\n      fmt = fmt.replace('%S', '' + addZeros(date.getSeconds(), 2));\n      fmt = fmt.replace('%I', '' + ((date.getHours() + 11) % 12 + 1));\n      fmt = fmt.replace('%p', '' + (date.getHours() < 12 ? 'AM' : 'PM'));\n      fmt = fmt.replace('%B', '' + editor.translate(monthsLong[date.getMonth()]));\n      fmt = fmt.replace('%b', '' + editor.translate(monthsShort[date.getMonth()]));\n      fmt = fmt.replace('%A', '' + editor.translate(daysLong[date.getDay()]));\n      fmt = fmt.replace('%a', '' + editor.translate(daysShort[date.getDay()]));\n      fmt = fmt.replace('%%', '%');\n      return fmt;\n    };\n    var updateElement = function (editor, timeElm, computerTime, userTime) {\n      var newTimeElm = editor.dom.create('time', { datetime: computerTime }, userTime);\n      timeElm.parentNode.insertBefore(newTimeElm, timeElm);\n      editor.dom.remove(timeElm);\n      editor.selection.select(newTimeElm, true);\n      editor.selection.collapse(false);\n    };\n    var insertDateTime = function (editor, format) {\n      if (Settings.shouldInsertTimeElement(editor)) {\n        var userTime = getDateTime(editor, format);\n        var computerTime = void 0;\n        if (/%[HMSIp]/.test(format)) {\n          computerTime = getDateTime(editor, '%Y-%m-%dT%H:%M');\n        } else {\n          computerTime = getDateTime(editor, '%Y-%m-%d');\n        }\n        var timeElm = editor.dom.getParent(editor.selection.getStart(), 'time');\n        if (timeElm) {\n          updateElement(editor, timeElm, computerTime, userTime);\n        } else {\n          editor.insertContent('<time datetime=\"' + computerTime + '\">' + userTime + '</time>');\n        }\n      } else {\n        editor.insertContent(getDateTime(editor, format));\n      }\n    };\n    var Actions = {\n      insertDateTime: insertDateTime,\n      getDateTime: getDateTime\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceInsertDate', function () {\n        Actions.insertDateTime(editor, Settings.getDateFormat(editor));\n      });\n      editor.addCommand('mceInsertTime', function () {\n        Actions.insertDateTime(editor, Settings.getTimeFormat(editor));\n      });\n    };\n    var Commands = { register: register };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var createMenuItems = function (editor, lastFormatState) {\n      var formats = Settings.getFormats(editor);\n      return global$1.map(formats, function (fmt) {\n        return {\n          text: Actions.getDateTime(editor, fmt),\n          onclick: function () {\n            lastFormatState.set(fmt);\n            Actions.insertDateTime(editor, fmt);\n          }\n        };\n      });\n    };\n    var register$1 = function (editor, lastFormatState) {\n      var menuItems = createMenuItems(editor, lastFormatState);\n      editor.addButton('insertdatetime', {\n        type: 'splitbutton',\n        title: 'Insert date/time',\n        menu: menuItems,\n        onclick: function () {\n          var lastFormat = lastFormatState.get();\n          Actions.insertDateTime(editor, lastFormat ? lastFormat : Settings.getDefaultDateTime(editor));\n        }\n      });\n      editor.addMenuItem('insertdatetime', {\n        icon: 'date',\n        text: 'Date/time',\n        menu: menuItems,\n        context: 'insert'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('insertdatetime', function (editor) {\n      var lastFormatState = Cell(null);\n      Commands.register(editor);\n      Buttons.register(editor, lastFormatState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-load\",attrs:{\"id\":\"loading\"}},[_c('Spin',[_c('Icon',{staticClass:\"spin-icon-load\",attrs:{\"type\":\"ios-loading\",\"size\":\"18\"}}),_c('div',[_vm._v(\"玩命加载中...\")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"loading\" class=\"page-load\">\r\n    <Spin>\r\n      <Icon type=\"ios-loading\" size=18 class=\"spin-icon-load\"></Icon>\r\n      <div>玩命加载中...</div>\r\n    </Spin>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  export default {\r\n    name: 'loading',\r\n    data() {\r\n      return {}\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n  .page-load {\r\n    margin:200px 0;\r\n  }\r\n\r\n  .spin-icon-load {\r\n    animation: ani-demo-spin 1s linear infinite;\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  @keyframes ani-demo-spin {\r\n    from {\r\n      transform: rotate(0deg);\r\n    }\r\n    50% {\r\n      transform: rotate(180deg);\r\n    }\r\n    to {\r\n      transform: rotate(360deg);\r\n    }\r\n  }\r\n</style>\r\n\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Loading.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Loading.vue?vue&type=template&id=f624f8be&scoped=true&\"\nimport script from \"./Loading.vue?vue&type=script&lang=js&\"\nexport * from \"./Loading.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Loading.vue?vue&type=style&index=0&id=f624f8be&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"f624f8be\",\n  null\n  \n)\n\nexport default component.exports","(function () {\nvar link = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.VK');\n\n    var assumeExternalTargets = function (editorSettings) {\n      return typeof editorSettings.link_assume_external_targets === 'boolean' ? editorSettings.link_assume_external_targets : false;\n    };\n    var hasContextToolbar = function (editorSettings) {\n      return typeof editorSettings.link_context_toolbar === 'boolean' ? editorSettings.link_context_toolbar : false;\n    };\n    var getLinkList = function (editorSettings) {\n      return editorSettings.link_list;\n    };\n    var hasDefaultLinkTarget = function (editorSettings) {\n      return typeof editorSettings.default_link_target === 'string';\n    };\n    var getDefaultLinkTarget = function (editorSettings) {\n      return editorSettings.default_link_target;\n    };\n    var getTargetList = function (editorSettings) {\n      return editorSettings.target_list;\n    };\n    var setTargetList = function (editor, list) {\n      editor.settings.target_list = list;\n    };\n    var shouldShowTargetList = function (editorSettings) {\n      return getTargetList(editorSettings) !== false;\n    };\n    var getRelList = function (editorSettings) {\n      return editorSettings.rel_list;\n    };\n    var hasRelList = function (editorSettings) {\n      return getRelList(editorSettings) !== undefined;\n    };\n    var getLinkClassList = function (editorSettings) {\n      return editorSettings.link_class_list;\n    };\n    var hasLinkClassList = function (editorSettings) {\n      return getLinkClassList(editorSettings) !== undefined;\n    };\n    var shouldShowLinkTitle = function (editorSettings) {\n      return editorSettings.link_title !== false;\n    };\n    var allowUnsafeLinkTarget = function (editorSettings) {\n      return typeof editorSettings.allow_unsafe_link_target === 'boolean' ? editorSettings.allow_unsafe_link_target : false;\n    };\n    var Settings = {\n      assumeExternalTargets: assumeExternalTargets,\n      hasContextToolbar: hasContextToolbar,\n      getLinkList: getLinkList,\n      hasDefaultLinkTarget: hasDefaultLinkTarget,\n      getDefaultLinkTarget: getDefaultLinkTarget,\n      getTargetList: getTargetList,\n      setTargetList: setTargetList,\n      shouldShowTargetList: shouldShowTargetList,\n      getRelList: getRelList,\n      hasRelList: hasRelList,\n      getLinkClassList: getLinkClassList,\n      hasLinkClassList: hasLinkClassList,\n      shouldShowLinkTitle: shouldShowLinkTitle,\n      allowUnsafeLinkTarget: allowUnsafeLinkTarget\n    };\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var appendClickRemove = function (link, evt) {\n      domGlobals.document.body.appendChild(link);\n      link.dispatchEvent(evt);\n      domGlobals.document.body.removeChild(link);\n    };\n    var open = function (url) {\n      if (!global$3.ie || global$3.ie > 10) {\n        var link = domGlobals.document.createElement('a');\n        link.target = '_blank';\n        link.href = url;\n        link.rel = 'noreferrer noopener';\n        var evt = domGlobals.document.createEvent('MouseEvents');\n        evt.initMouseEvent('click', true, true, domGlobals.window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        appendClickRemove(link, evt);\n      } else {\n        var win = domGlobals.window.open('', '_blank');\n        if (win) {\n          win.opener = null;\n          var doc = win.document;\n          doc.open();\n          doc.write('<meta http-equiv=\"refresh\" content=\"0; url=' + global$2.DOM.encode(url) + '\">');\n          doc.close();\n        }\n      }\n    };\n    var OpenUrl = { open: open };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var toggleTargetRules = function (rel, isUnsafe) {\n      var rules = ['noopener'];\n      var newRel = rel ? rel.split(/\\s+/) : [];\n      var toString = function (rel) {\n        return global$4.trim(rel.sort().join(' '));\n      };\n      var addTargetRules = function (rel) {\n        rel = removeTargetRules(rel);\n        return rel.length ? rel.concat(rules) : rules;\n      };\n      var removeTargetRules = function (rel) {\n        return rel.filter(function (val) {\n          return global$4.inArray(rules, val) === -1;\n        });\n      };\n      newRel = isUnsafe ? addTargetRules(newRel) : removeTargetRules(newRel);\n      return newRel.length ? toString(newRel) : null;\n    };\n    var trimCaretContainers = function (text) {\n      return text.replace(/\\uFEFF/g, '');\n    };\n    var getAnchorElement = function (editor, selectedElm) {\n      selectedElm = selectedElm || editor.selection.getNode();\n      if (isImageFigure(selectedElm)) {\n        return editor.dom.select('a[href]', selectedElm)[0];\n      } else {\n        return editor.dom.getParent(selectedElm, 'a[href]');\n      }\n    };\n    var getAnchorText = function (selection, anchorElm) {\n      var text = anchorElm ? anchorElm.innerText || anchorElm.textContent : selection.getContent({ format: 'text' });\n      return trimCaretContainers(text);\n    };\n    var isLink = function (elm) {\n      return elm && elm.nodeName === 'A' && elm.href;\n    };\n    var hasLinks = function (elements) {\n      return global$4.grep(elements, isLink).length > 0;\n    };\n    var isOnlyTextSelected = function (html) {\n      if (/</.test(html) && (!/^<a [^>]+>[^<]+<\\/a>$/.test(html) || html.indexOf('href=') === -1)) {\n        return false;\n      }\n      return true;\n    };\n    var isImageFigure = function (node) {\n      return node && node.nodeName === 'FIGURE' && /\\bimage\\b/i.test(node.className);\n    };\n    var link = function (editor, attachState) {\n      return function (data) {\n        editor.undoManager.transact(function () {\n          var selectedElm = editor.selection.getNode();\n          var anchorElm = getAnchorElement(editor, selectedElm);\n          var linkAttrs = {\n            href: data.href,\n            target: data.target ? data.target : null,\n            rel: data.rel ? data.rel : null,\n            class: data.class ? data.class : null,\n            title: data.title ? data.title : null\n          };\n          if (!Settings.hasRelList(editor.settings) && Settings.allowUnsafeLinkTarget(editor.settings) === false) {\n            linkAttrs.rel = toggleTargetRules(linkAttrs.rel, linkAttrs.target === '_blank');\n          }\n          if (data.href === attachState.href) {\n            attachState.attach();\n            attachState = {};\n          }\n          if (anchorElm) {\n            editor.focus();\n            if (data.hasOwnProperty('text')) {\n              if ('innerText' in anchorElm) {\n                anchorElm.innerText = data.text;\n              } else {\n                anchorElm.textContent = data.text;\n              }\n            }\n            editor.dom.setAttribs(anchorElm, linkAttrs);\n            editor.selection.select(anchorElm);\n            editor.undoManager.add();\n          } else {\n            if (isImageFigure(selectedElm)) {\n              linkImageFigure(editor, selectedElm, linkAttrs);\n            } else if (data.hasOwnProperty('text')) {\n              editor.insertContent(editor.dom.createHTML('a', linkAttrs, editor.dom.encode(data.text)));\n            } else {\n              editor.execCommand('mceInsertLink', false, linkAttrs);\n            }\n          }\n        });\n      };\n    };\n    var unlink = function (editor) {\n      return function () {\n        editor.undoManager.transact(function () {\n          var node = editor.selection.getNode();\n          if (isImageFigure(node)) {\n            unlinkImageFigure(editor, node);\n          } else {\n            editor.execCommand('unlink');\n          }\n        });\n      };\n    };\n    var unlinkImageFigure = function (editor, fig) {\n      var a, img;\n      img = editor.dom.select('img', fig)[0];\n      if (img) {\n        a = editor.dom.getParents(img, 'a[href]', fig)[0];\n        if (a) {\n          a.parentNode.insertBefore(img, a);\n          editor.dom.remove(a);\n        }\n      }\n    };\n    var linkImageFigure = function (editor, fig, attrs) {\n      var a, img;\n      img = editor.dom.select('img', fig)[0];\n      if (img) {\n        a = editor.dom.create('a', attrs);\n        img.parentNode.insertBefore(a, img);\n        a.appendChild(img);\n      }\n    };\n    var Utils = {\n      link: link,\n      unlink: unlink,\n      isLink: isLink,\n      hasLinks: hasLinks,\n      isOnlyTextSelected: isOnlyTextSelected,\n      getAnchorElement: getAnchorElement,\n      getAnchorText: getAnchorText,\n      toggleTargetRules: toggleTargetRules\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.util.Delay');\n\n    var global$6 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var attachState = {};\n    var createLinkList = function (editor, callback) {\n      var linkList = Settings.getLinkList(editor.settings);\n      if (typeof linkList === 'string') {\n        global$6.send({\n          url: linkList,\n          success: function (text) {\n            callback(editor, JSON.parse(text));\n          }\n        });\n      } else if (typeof linkList === 'function') {\n        linkList(function (list) {\n          callback(editor, list);\n        });\n      } else {\n        callback(editor, linkList);\n      }\n    };\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      var appendItems = function (values, output) {\n        output = output || [];\n        global$4.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            if (itemCallback) {\n              itemCallback(menuItem);\n            }\n          }\n          output.push(menuItem);\n        });\n        return output;\n      };\n      return appendItems(inputList, startItems || []);\n    };\n    var delayedConfirm = function (editor, message, callback) {\n      var rng = editor.selection.getRng();\n      global$5.setEditorTimeout(editor, function () {\n        editor.windowManager.confirm(message, function (state) {\n          editor.selection.setRng(rng);\n          callback(state);\n        });\n      });\n    };\n    var showDialog = function (editor, linkList) {\n      var data = {};\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var anchorElm, initialText;\n      var win, onlyText, textListCtrl, linkListCtrl, relListCtrl, targetListCtrl, classListCtrl, linkTitleCtrl, value;\n      var linkListChangeHandler = function (e) {\n        var textCtrl = win.find('#text');\n        if (!textCtrl.value() || e.lastControl && textCtrl.value() === e.lastControl.text()) {\n          textCtrl.value(e.control.text());\n        }\n        win.find('#href').value(e.control.value());\n      };\n      var buildAnchorListControl = function (url) {\n        var anchorList = [];\n        global$4.each(editor.dom.select('a:not([href])'), function (anchor) {\n          var id = anchor.name || anchor.id;\n          if (id) {\n            anchorList.push({\n              text: id,\n              value: '#' + id,\n              selected: url.indexOf('#' + id) !== -1\n            });\n          }\n        });\n        if (anchorList.length) {\n          anchorList.unshift({\n            text: 'None',\n            value: ''\n          });\n          return {\n            name: 'anchor',\n            type: 'listbox',\n            label: 'Anchors',\n            values: anchorList,\n            onselect: linkListChangeHandler\n          };\n        }\n      };\n      var updateText = function () {\n        if (!initialText && onlyText && !data.text) {\n          this.parent().parent().find('#text')[0].value(this.value());\n        }\n      };\n      var urlChange = function (e) {\n        var meta = e.meta || {};\n        if (linkListCtrl) {\n          linkListCtrl.value(editor.convertURL(this.value(), 'href'));\n        }\n        global$4.each(e.meta, function (value, key) {\n          var inp = win.find('#' + key);\n          if (key === 'text') {\n            if (initialText.length === 0) {\n              inp.value(value);\n              data.text = value;\n            }\n          } else {\n            inp.value(value);\n          }\n        });\n        if (meta.attach) {\n          attachState = {\n            href: this.value(),\n            attach: meta.attach\n          };\n        }\n        if (!meta.text) {\n          updateText.call(this);\n        }\n      };\n      var onBeforeCall = function (e) {\n        e.meta = win.toJSON();\n      };\n      onlyText = Utils.isOnlyTextSelected(selection.getContent());\n      anchorElm = Utils.getAnchorElement(editor);\n      data.text = initialText = Utils.getAnchorText(editor.selection, anchorElm);\n      data.href = anchorElm ? dom.getAttrib(anchorElm, 'href') : '';\n      if (anchorElm) {\n        data.target = dom.getAttrib(anchorElm, 'target');\n      } else if (Settings.hasDefaultLinkTarget(editor.settings)) {\n        data.target = Settings.getDefaultLinkTarget(editor.settings);\n      }\n      if (value = dom.getAttrib(anchorElm, 'rel')) {\n        data.rel = value;\n      }\n      if (value = dom.getAttrib(anchorElm, 'class')) {\n        data.class = value;\n      }\n      if (value = dom.getAttrib(anchorElm, 'title')) {\n        data.title = value;\n      }\n      if (onlyText) {\n        textListCtrl = {\n          name: 'text',\n          type: 'textbox',\n          size: 40,\n          label: 'Text to display',\n          onchange: function () {\n            data.text = this.value();\n          }\n        };\n      }\n      if (linkList) {\n        linkListCtrl = {\n          type: 'listbox',\n          label: 'Link list',\n          values: buildListItems(linkList, function (item) {\n            item.value = editor.convertURL(item.value || item.url, 'href');\n          }, [{\n              text: 'None',\n              value: ''\n            }]),\n          onselect: linkListChangeHandler,\n          value: editor.convertURL(data.href, 'href'),\n          onPostRender: function () {\n            linkListCtrl = this;\n          }\n        };\n      }\n      if (Settings.shouldShowTargetList(editor.settings)) {\n        if (Settings.getTargetList(editor.settings) === undefined) {\n          Settings.setTargetList(editor, [\n            {\n              text: 'None',\n              value: ''\n            },\n            {\n              text: 'New window',\n              value: '_blank'\n            }\n          ]);\n        }\n        targetListCtrl = {\n          name: 'target',\n          type: 'listbox',\n          label: 'Target',\n          values: buildListItems(Settings.getTargetList(editor.settings))\n        };\n      }\n      if (Settings.hasRelList(editor.settings)) {\n        relListCtrl = {\n          name: 'rel',\n          type: 'listbox',\n          label: 'Rel',\n          values: buildListItems(Settings.getRelList(editor.settings), function (item) {\n            if (Settings.allowUnsafeLinkTarget(editor.settings) === false) {\n              item.value = Utils.toggleTargetRules(item.value, data.target === '_blank');\n            }\n          })\n        };\n      }\n      if (Settings.hasLinkClassList(editor.settings)) {\n        classListCtrl = {\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: buildListItems(Settings.getLinkClassList(editor.settings), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  inline: 'a',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        };\n      }\n      if (Settings.shouldShowLinkTitle(editor.settings)) {\n        linkTitleCtrl = {\n          name: 'title',\n          type: 'textbox',\n          label: 'Title',\n          value: data.title\n        };\n      }\n      win = editor.windowManager.open({\n        title: 'Insert link',\n        data: data,\n        body: [\n          {\n            name: 'href',\n            type: 'filepicker',\n            filetype: 'file',\n            size: 40,\n            autofocus: true,\n            label: 'Url',\n            onchange: urlChange,\n            onkeyup: updateText,\n            onpaste: updateText,\n            onbeforecall: onBeforeCall\n          },\n          textListCtrl,\n          linkTitleCtrl,\n          buildAnchorListControl(data.href),\n          linkListCtrl,\n          relListCtrl,\n          targetListCtrl,\n          classListCtrl\n        ],\n        onSubmit: function (e) {\n          var assumeExternalTargets = Settings.assumeExternalTargets(editor.settings);\n          var insertLink = Utils.link(editor, attachState);\n          var removeLink = Utils.unlink(editor);\n          var resultData = global$4.extend({}, data, e.data);\n          var href = resultData.href;\n          if (!href) {\n            removeLink();\n            return;\n          }\n          if (!onlyText || resultData.text === initialText) {\n            delete resultData.text;\n          }\n          if (href.indexOf('@') > 0 && href.indexOf('//') === -1 && href.indexOf('mailto:') === -1) {\n            delayedConfirm(editor, 'The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?', function (state) {\n              if (state) {\n                resultData.href = 'mailto:' + href;\n              }\n              insertLink(resultData);\n            });\n            return;\n          }\n          if (assumeExternalTargets === true && !/^\\w+:/i.test(href) || assumeExternalTargets === false && /^\\s*www[\\.|\\d\\.]/i.test(href)) {\n            delayedConfirm(editor, 'The URL you entered seems to be an external link. Do you want to add the required http:// prefix?', function (state) {\n              if (state) {\n                resultData.href = 'http://' + href;\n              }\n              insertLink(resultData);\n            });\n            return;\n          }\n          insertLink(resultData);\n        }\n      });\n    };\n    var open$1 = function (editor) {\n      createLinkList(editor, showDialog);\n    };\n    var Dialog = { open: open$1 };\n\n    var getLink = function (editor, elm) {\n      return editor.dom.getParent(elm, 'a[href]');\n    };\n    var getSelectedLink = function (editor) {\n      return getLink(editor, editor.selection.getStart());\n    };\n    var getHref = function (elm) {\n      var href = elm.getAttribute('data-mce-href');\n      return href ? href : elm.getAttribute('href');\n    };\n    var isContextMenuVisible = function (editor) {\n      var contextmenu = editor.plugins.contextmenu;\n      return contextmenu ? contextmenu.isContextMenuVisible() : false;\n    };\n    var hasOnlyAltModifier = function (e) {\n      return e.altKey === true && e.shiftKey === false && e.ctrlKey === false && e.metaKey === false;\n    };\n    var gotoLink = function (editor, a) {\n      if (a) {\n        var href = getHref(a);\n        if (/^#/.test(href)) {\n          var targetEl = editor.$(href);\n          if (targetEl.length) {\n            editor.selection.scrollIntoView(targetEl[0], true);\n          }\n        } else {\n          OpenUrl.open(a.href);\n        }\n      }\n    };\n    var openDialog = function (editor) {\n      return function () {\n        Dialog.open(editor);\n      };\n    };\n    var gotoSelectedLink = function (editor) {\n      return function () {\n        gotoLink(editor, getSelectedLink(editor));\n      };\n    };\n    var leftClickedOnAHref = function (editor) {\n      return function (elm) {\n        var sel, rng, node;\n        if (Settings.hasContextToolbar(editor.settings) && !isContextMenuVisible(editor) && Utils.isLink(elm)) {\n          sel = editor.selection;\n          rng = sel.getRng();\n          node = rng.startContainer;\n          if (node.nodeType === 3 && sel.isCollapsed() && rng.startOffset > 0 && rng.startOffset < node.data.length) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var setupGotoLinks = function (editor) {\n      editor.on('click', function (e) {\n        var link = getLink(editor, e.target);\n        if (link && global$1.metaKeyPressed(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n      editor.on('keydown', function (e) {\n        var link = getSelectedLink(editor);\n        if (link && e.keyCode === 13 && hasOnlyAltModifier(e)) {\n          e.preventDefault();\n          gotoLink(editor, link);\n        }\n      });\n    };\n    var toggleActiveState = function (editor) {\n      return function () {\n        var self = this;\n        editor.on('nodechange', function (e) {\n          self.active(!editor.readonly && !!Utils.getAnchorElement(editor, e.element));\n        });\n      };\n    };\n    var toggleViewLinkState = function (editor) {\n      return function () {\n        var self = this;\n        var toggleVisibility = function (e) {\n          if (Utils.hasLinks(e.parents)) {\n            self.show();\n          } else {\n            self.hide();\n          }\n        };\n        if (!Utils.hasLinks(editor.dom.getParents(editor.selection.getStart()))) {\n          self.hide();\n        }\n        editor.on('nodechange', toggleVisibility);\n        self.on('remove', function () {\n          editor.off('nodechange', toggleVisibility);\n        });\n      };\n    };\n    var Actions = {\n      openDialog: openDialog,\n      gotoSelectedLink: gotoSelectedLink,\n      leftClickedOnAHref: leftClickedOnAHref,\n      setupGotoLinks: setupGotoLinks,\n      toggleActiveState: toggleActiveState,\n      toggleViewLinkState: toggleViewLinkState\n    };\n\n    var register = function (editor) {\n      editor.addCommand('mceLink', Actions.openDialog(editor));\n    };\n    var Commands = { register: register };\n\n    var setup = function (editor) {\n      editor.addShortcut('Meta+K', '', Actions.openDialog(editor));\n    };\n    var Keyboard = { setup: setup };\n\n    var setupButtons = function (editor) {\n      editor.addButton('link', {\n        active: false,\n        icon: 'link',\n        tooltip: 'Insert/edit link',\n        onclick: Actions.openDialog(editor),\n        onpostrender: Actions.toggleActiveState(editor)\n      });\n      editor.addButton('unlink', {\n        active: false,\n        icon: 'unlink',\n        tooltip: 'Remove link',\n        onclick: Utils.unlink(editor),\n        onpostrender: Actions.toggleActiveState(editor)\n      });\n      if (editor.addContextToolbar) {\n        editor.addButton('openlink', {\n          icon: 'newtab',\n          tooltip: 'Open link',\n          onclick: Actions.gotoSelectedLink(editor)\n        });\n      }\n    };\n    var setupMenuItems = function (editor) {\n      editor.addMenuItem('openlink', {\n        text: 'Open link',\n        icon: 'newtab',\n        onclick: Actions.gotoSelectedLink(editor),\n        onPostRender: Actions.toggleViewLinkState(editor),\n        prependToContext: true\n      });\n      editor.addMenuItem('link', {\n        icon: 'link',\n        text: 'Link',\n        shortcut: 'Meta+K',\n        onclick: Actions.openDialog(editor),\n        stateSelector: 'a[href]',\n        context: 'insert',\n        prependToContext: true\n      });\n      editor.addMenuItem('unlink', {\n        icon: 'unlink',\n        text: 'Remove link',\n        onclick: Utils.unlink(editor),\n        stateSelector: 'a[href]'\n      });\n    };\n    var setupContextToolbars = function (editor) {\n      if (editor.addContextToolbar) {\n        editor.addContextToolbar(Actions.leftClickedOnAHref(editor), 'openlink | link unlink');\n      }\n    };\n    var Controls = {\n      setupButtons: setupButtons,\n      setupMenuItems: setupMenuItems,\n      setupContextToolbars: setupContextToolbars\n    };\n\n    global.add('link', function (editor) {\n      Controls.setupButtons(editor);\n      Controls.setupMenuItems(editor);\n      Controls.setupContextToolbars(editor);\n      Actions.setupGotoLinks(editor);\n      Commands.register(editor);\n      Keyboard.setup(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar image = (function (domGlobals) {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var hasDimensions = function (editor) {\n      return editor.settings.image_dimensions === false ? false : true;\n    };\n    var hasAdvTab = function (editor) {\n      return editor.settings.image_advtab === true ? true : false;\n    };\n    var getPrependUrl = function (editor) {\n      return editor.getParam('image_prepend_url', '');\n    };\n    var getClassList = function (editor) {\n      return editor.getParam('image_class_list');\n    };\n    var hasDescription = function (editor) {\n      return editor.settings.image_description === false ? false : true;\n    };\n    var hasImageTitle = function (editor) {\n      return editor.settings.image_title === true ? true : false;\n    };\n    var hasImageCaption = function (editor) {\n      return editor.settings.image_caption === true ? true : false;\n    };\n    var getImageList = function (editor) {\n      return editor.getParam('image_list', false);\n    };\n    var hasUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', false);\n    };\n    var hasUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', false);\n    };\n    var getUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url');\n    };\n    var getUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler');\n    };\n    var getUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path');\n    };\n    var getUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials');\n    };\n    var Settings = {\n      hasDimensions: hasDimensions,\n      hasAdvTab: hasAdvTab,\n      getPrependUrl: getPrependUrl,\n      getClassList: getClassList,\n      hasDescription: hasDescription,\n      hasImageTitle: hasImageTitle,\n      hasImageCaption: hasImageCaption,\n      getImageList: getImageList,\n      hasUploadUrl: hasUploadUrl,\n      hasUploadHandler: hasUploadHandler,\n      getUploadUrl: getUploadUrl,\n      getUploadHandler: getUploadHandler,\n      getUploadBasePath: getUploadBasePath,\n      getUploadCredentials: getUploadCredentials\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.util.Promise');\n\n    var global$2 = tinymce.util.Tools.resolve('tinymce.util.Tools');\n\n    var global$3 = tinymce.util.Tools.resolve('tinymce.util.XHR');\n\n    var parseIntAndGetMax = function (val1, val2) {\n      return Math.max(parseInt(val1, 10), parseInt(val2, 10));\n    };\n    var getImageSize = function (url, callback) {\n      var img = domGlobals.document.createElement('img');\n      function done(width, height) {\n        if (img.parentNode) {\n          img.parentNode.removeChild(img);\n        }\n        callback({\n          width: width,\n          height: height\n        });\n      }\n      img.onload = function () {\n        var width = parseIntAndGetMax(img.width, img.clientWidth);\n        var height = parseIntAndGetMax(img.height, img.clientHeight);\n        done(width, height);\n      };\n      img.onerror = function () {\n        done(0, 0);\n      };\n      var style = img.style;\n      style.visibility = 'hidden';\n      style.position = 'fixed';\n      style.bottom = style.left = '0px';\n      style.width = style.height = 'auto';\n      domGlobals.document.body.appendChild(img);\n      img.src = url;\n    };\n    var buildListItems = function (inputList, itemCallback, startItems) {\n      function appendItems(values, output) {\n        output = output || [];\n        global$2.each(values, function (item) {\n          var menuItem = { text: item.text || item.title };\n          if (item.menu) {\n            menuItem.menu = appendItems(item.menu);\n          } else {\n            menuItem.value = item.value;\n            itemCallback(menuItem);\n          }\n          output.push(menuItem);\n        });\n        return output;\n      }\n      return appendItems(inputList, startItems || []);\n    };\n    var removePixelSuffix = function (value) {\n      if (value) {\n        value = value.replace(/px$/, '');\n      }\n      return value;\n    };\n    var addPixelSuffix = function (value) {\n      if (value.length > 0 && /^[0-9]+$/.test(value)) {\n        value += 'px';\n      }\n      return value;\n    };\n    var mergeMargins = function (css) {\n      if (css.margin) {\n        var splitMargin = css.margin.split(' ');\n        switch (splitMargin.length) {\n        case 1:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[0];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[0];\n          break;\n        case 2:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[0];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 3:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[1];\n          break;\n        case 4:\n          css['margin-top'] = css['margin-top'] || splitMargin[0];\n          css['margin-right'] = css['margin-right'] || splitMargin[1];\n          css['margin-bottom'] = css['margin-bottom'] || splitMargin[2];\n          css['margin-left'] = css['margin-left'] || splitMargin[3];\n        }\n        delete css.margin;\n      }\n      return css;\n    };\n    var createImageList = function (editor, callback) {\n      var imageList = Settings.getImageList(editor);\n      if (typeof imageList === 'string') {\n        global$3.send({\n          url: imageList,\n          success: function (text) {\n            callback(JSON.parse(text));\n          }\n        });\n      } else if (typeof imageList === 'function') {\n        imageList(callback);\n      } else {\n        callback(imageList);\n      }\n    };\n    var waitLoadImage = function (editor, data, imgElm) {\n      function selectImage() {\n        imgElm.onload = imgElm.onerror = null;\n        if (editor.selection) {\n          editor.selection.select(imgElm);\n          editor.nodeChanged();\n        }\n      }\n      imgElm.onload = function () {\n        if (!data.width && !data.height && Settings.hasDimensions(editor)) {\n          editor.dom.setAttribs(imgElm, {\n            width: imgElm.clientWidth,\n            height: imgElm.clientHeight\n          });\n        }\n        selectImage();\n      };\n      imgElm.onerror = selectImage;\n    };\n    var blobToDataUri = function (blob) {\n      return new global$1(function (resolve, reject) {\n        var reader = FileReader();\n        reader.onload = function () {\n          resolve(reader.result);\n        };\n        reader.onerror = function () {\n          reject(reader.error.message);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Utils = {\n      getImageSize: getImageSize,\n      buildListItems: buildListItems,\n      removePixelSuffix: removePixelSuffix,\n      addPixelSuffix: addPixelSuffix,\n      mergeMargins: mergeMargins,\n      createImageList: createImageList,\n      waitLoadImage: waitLoadImage,\n      blobToDataUri: blobToDataUri\n    };\n\n    var global$4 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var hasOwnProperty = Object.prototype.hasOwnProperty;\n    var shallow = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow);\n\n    var DOM = global$4.DOM;\n    var getHspace = function (image) {\n      if (image.style.marginLeft && image.style.marginRight && image.style.marginLeft === image.style.marginRight) {\n        return Utils.removePixelSuffix(image.style.marginLeft);\n      } else {\n        return '';\n      }\n    };\n    var getVspace = function (image) {\n      if (image.style.marginTop && image.style.marginBottom && image.style.marginTop === image.style.marginBottom) {\n        return Utils.removePixelSuffix(image.style.marginTop);\n      } else {\n        return '';\n      }\n    };\n    var getBorder = function (image) {\n      if (image.style.borderWidth) {\n        return Utils.removePixelSuffix(image.style.borderWidth);\n      } else {\n        return '';\n      }\n    };\n    var getAttrib = function (image, name) {\n      if (image.hasAttribute(name)) {\n        return image.getAttribute(name);\n      } else {\n        return '';\n      }\n    };\n    var getStyle = function (image, name) {\n      return image.style[name] ? image.style[name] : '';\n    };\n    var hasCaption = function (image) {\n      return image.parentNode !== null && image.parentNode.nodeName === 'FIGURE';\n    };\n    var setAttrib = function (image, name, value) {\n      image.setAttribute(name, value);\n    };\n    var wrapInFigure = function (image) {\n      var figureElm = DOM.create('figure', { class: 'image' });\n      DOM.insertAfter(figureElm, image);\n      figureElm.appendChild(image);\n      figureElm.appendChild(DOM.create('figcaption', { contentEditable: true }, 'Caption'));\n      figureElm.contentEditable = 'false';\n    };\n    var removeFigure = function (image) {\n      var figureElm = image.parentNode;\n      DOM.insertAfter(image, figureElm);\n      DOM.remove(figureElm);\n    };\n    var toggleCaption = function (image) {\n      if (hasCaption(image)) {\n        removeFigure(image);\n      } else {\n        wrapInFigure(image);\n      }\n    };\n    var normalizeStyle = function (image, normalizeCss) {\n      var attrValue = image.getAttribute('style');\n      var value = normalizeCss(attrValue !== null ? attrValue : '');\n      if (value.length > 0) {\n        image.setAttribute('style', value);\n        image.setAttribute('data-mce-style', value);\n      } else {\n        image.removeAttribute('style');\n      }\n    };\n    var setSize = function (name, normalizeCss) {\n      return function (image, name, value) {\n        if (image.style[name]) {\n          image.style[name] = Utils.addPixelSuffix(value);\n          normalizeStyle(image, normalizeCss);\n        } else {\n          setAttrib(image, name, value);\n        }\n      };\n    };\n    var getSize = function (image, name) {\n      if (image.style[name]) {\n        return Utils.removePixelSuffix(image.style[name]);\n      } else {\n        return getAttrib(image, name);\n      }\n    };\n    var setHspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginLeft = pxValue;\n      image.style.marginRight = pxValue;\n    };\n    var setVspace = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.marginTop = pxValue;\n      image.style.marginBottom = pxValue;\n    };\n    var setBorder = function (image, value) {\n      var pxValue = Utils.addPixelSuffix(value);\n      image.style.borderWidth = pxValue;\n    };\n    var setBorderStyle = function (image, value) {\n      image.style.borderStyle = value;\n    };\n    var getBorderStyle = function (image) {\n      return getStyle(image, 'borderStyle');\n    };\n    var isFigure = function (elm) {\n      return elm.nodeName === 'FIGURE';\n    };\n    var defaultData = function () {\n      return {\n        src: '',\n        alt: '',\n        title: '',\n        width: '',\n        height: '',\n        class: '',\n        style: '',\n        caption: false,\n        hspace: '',\n        vspace: '',\n        border: '',\n        borderStyle: ''\n      };\n    };\n    var getStyleValue = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      setAttrib(image, 'style', data.style);\n      if (getHspace(image) || data.hspace !== '') {\n        setHspace(image, data.hspace);\n      }\n      if (getVspace(image) || data.vspace !== '') {\n        setVspace(image, data.vspace);\n      }\n      if (getBorder(image) || data.border !== '') {\n        setBorder(image, data.border);\n      }\n      if (getBorderStyle(image) || data.borderStyle !== '') {\n        setBorderStyle(image, data.borderStyle);\n      }\n      return normalizeCss(image.getAttribute('style'));\n    };\n    var create = function (normalizeCss, data) {\n      var image = domGlobals.document.createElement('img');\n      write(normalizeCss, merge(data, { caption: false }), image);\n      setAttrib(image, 'alt', data.alt);\n      if (data.caption) {\n        var figure = DOM.create('figure', { class: 'image' });\n        figure.appendChild(image);\n        figure.appendChild(DOM.create('figcaption', { contentEditable: true }, 'Caption'));\n        figure.contentEditable = 'false';\n        return figure;\n      } else {\n        return image;\n      }\n    };\n    var read = function (normalizeCss, image) {\n      return {\n        src: getAttrib(image, 'src'),\n        alt: getAttrib(image, 'alt'),\n        title: getAttrib(image, 'title'),\n        width: getSize(image, 'width'),\n        height: getSize(image, 'height'),\n        class: getAttrib(image, 'class'),\n        style: normalizeCss(getAttrib(image, 'style')),\n        caption: hasCaption(image),\n        hspace: getHspace(image),\n        vspace: getVspace(image),\n        border: getBorder(image),\n        borderStyle: getStyle(image, 'borderStyle')\n      };\n    };\n    var updateProp = function (image, oldData, newData, name, set) {\n      if (newData[name] !== oldData[name]) {\n        set(image, name, newData[name]);\n      }\n    };\n    var normalized = function (set, normalizeCss) {\n      return function (image, name, value) {\n        set(image, value);\n        normalizeStyle(image, normalizeCss);\n      };\n    };\n    var write = function (normalizeCss, newData, image) {\n      var oldData = read(normalizeCss, image);\n      updateProp(image, oldData, newData, 'caption', function (image, _name, _value) {\n        return toggleCaption(image);\n      });\n      updateProp(image, oldData, newData, 'src', setAttrib);\n      updateProp(image, oldData, newData, 'alt', setAttrib);\n      updateProp(image, oldData, newData, 'title', setAttrib);\n      updateProp(image, oldData, newData, 'width', setSize('width', normalizeCss));\n      updateProp(image, oldData, newData, 'height', setSize('height', normalizeCss));\n      updateProp(image, oldData, newData, 'class', setAttrib);\n      updateProp(image, oldData, newData, 'style', normalized(function (image, value) {\n        return setAttrib(image, 'style', value);\n      }, normalizeCss));\n      updateProp(image, oldData, newData, 'hspace', normalized(setHspace, normalizeCss));\n      updateProp(image, oldData, newData, 'vspace', normalized(setVspace, normalizeCss));\n      updateProp(image, oldData, newData, 'border', normalized(setBorder, normalizeCss));\n      updateProp(image, oldData, newData, 'borderStyle', normalized(setBorderStyle, normalizeCss));\n    };\n\n    var normalizeCss = function (editor, cssText) {\n      var css = editor.dom.styles.parse(cssText);\n      var mergedCss = Utils.mergeMargins(css);\n      var compressed = editor.dom.styles.parse(editor.dom.styles.serialize(mergedCss));\n      return editor.dom.styles.serialize(compressed);\n    };\n    var getSelectedImage = function (editor) {\n      var imgElm = editor.selection.getNode();\n      var figureElm = editor.dom.getParent(imgElm, 'figure.image');\n      if (figureElm) {\n        return editor.dom.select('img', figureElm)[0];\n      }\n      if (imgElm && (imgElm.nodeName !== 'IMG' || imgElm.getAttribute('data-mce-object') || imgElm.getAttribute('data-mce-placeholder'))) {\n        return null;\n      }\n      return imgElm;\n    };\n    var splitTextBlock = function (editor, figure) {\n      var dom = editor.dom;\n      var textBlock = dom.getParent(figure.parentNode, function (node) {\n        return editor.schema.getTextBlockElements()[node.nodeName];\n      }, editor.getBody());\n      if (textBlock) {\n        return dom.split(textBlock, figure);\n      } else {\n        return figure;\n      }\n    };\n    var readImageDataFromSelection = function (editor) {\n      var image = getSelectedImage(editor);\n      return image ? read(function (css) {\n        return normalizeCss(editor, css);\n      }, image) : defaultData();\n    };\n    var insertImageAtCaret = function (editor, data) {\n      var elm = create(function (css) {\n        return normalizeCss(editor, css);\n      }, data);\n      editor.dom.setAttrib(elm, 'data-mce-id', '__mcenew');\n      editor.focus();\n      editor.selection.setContent(elm.outerHTML);\n      var insertedElm = editor.dom.select('*[data-mce-id=\"__mcenew\"]')[0];\n      editor.dom.setAttrib(insertedElm, 'data-mce-id', null);\n      if (isFigure(insertedElm)) {\n        var figure = splitTextBlock(editor, insertedElm);\n        editor.selection.select(figure);\n      } else {\n        editor.selection.select(insertedElm);\n      }\n    };\n    var syncSrcAttr = function (editor, image) {\n      editor.dom.setAttrib(image, 'src', image.getAttribute('src'));\n    };\n    var deleteImage = function (editor, image) {\n      if (image) {\n        var elm = editor.dom.is(image.parentNode, 'figure.image') ? image.parentNode : image;\n        editor.dom.remove(elm);\n        editor.focus();\n        editor.nodeChanged();\n        if (editor.dom.isEmpty(editor.getBody())) {\n          editor.setContent('');\n          editor.selection.setCursorLocation();\n        }\n      }\n    };\n    var writeImageDataToSelection = function (editor, data) {\n      var image = getSelectedImage(editor);\n      write(function (css) {\n        return normalizeCss(editor, css);\n      }, data, image);\n      syncSrcAttr(editor, image);\n      if (isFigure(image.parentNode)) {\n        var figure = image.parentNode;\n        splitTextBlock(editor, figure);\n        editor.selection.select(image.parentNode);\n      } else {\n        editor.selection.select(image);\n        Utils.waitLoadImage(editor, data, image);\n      }\n    };\n    var insertOrUpdateImage = function (editor, data) {\n      var image = getSelectedImage(editor);\n      if (image) {\n        if (data.src) {\n          writeImageDataToSelection(editor, data);\n        } else {\n          deleteImage(editor, image);\n        }\n      } else if (data.src) {\n        insertImageAtCaret(editor, data);\n      }\n    };\n\n    var updateVSpaceHSpaceBorder = function (editor) {\n      return function (evt) {\n        var dom = editor.dom;\n        var rootControl = evt.control.rootControl;\n        if (!Settings.hasAdvTab(editor)) {\n          return;\n        }\n        var data = rootControl.toJSON();\n        var css = dom.parseStyle(data.style);\n        rootControl.find('#vspace').value('');\n        rootControl.find('#hspace').value('');\n        css = Utils.mergeMargins(css);\n        if (css['margin-top'] && css['margin-bottom'] || css['margin-right'] && css['margin-left']) {\n          if (css['margin-top'] === css['margin-bottom']) {\n            rootControl.find('#vspace').value(Utils.removePixelSuffix(css['margin-top']));\n          } else {\n            rootControl.find('#vspace').value('');\n          }\n          if (css['margin-right'] === css['margin-left']) {\n            rootControl.find('#hspace').value(Utils.removePixelSuffix(css['margin-right']));\n          } else {\n            rootControl.find('#hspace').value('');\n          }\n        }\n        if (css['border-width']) {\n          rootControl.find('#border').value(Utils.removePixelSuffix(css['border-width']));\n        } else {\n          rootControl.find('#border').value('');\n        }\n        if (css['border-style']) {\n          rootControl.find('#borderStyle').value(css['border-style']);\n        } else {\n          rootControl.find('#borderStyle').value('');\n        }\n        rootControl.find('#style').value(dom.serializeStyle(dom.parseStyle(dom.serializeStyle(css))));\n      };\n    };\n    var updateStyle = function (editor, win) {\n      win.find('#style').each(function (ctrl) {\n        var value = getStyleValue(function (css) {\n          return normalizeCss(editor, css);\n        }, merge(defaultData(), win.toJSON()));\n        ctrl.value(value);\n      });\n    };\n    var makeTab = function (editor) {\n      return {\n        title: 'Advanced',\n        type: 'form',\n        pack: 'start',\n        items: [\n          {\n            label: 'Style',\n            name: 'style',\n            type: 'textbox',\n            onchange: updateVSpaceHSpaceBorder(editor)\n          },\n          {\n            type: 'form',\n            layout: 'grid',\n            packV: 'start',\n            columns: 2,\n            padding: 0,\n            defaults: {\n              type: 'textbox',\n              maxWidth: 50,\n              onchange: function (evt) {\n                updateStyle(editor, evt.control.rootControl);\n              }\n            },\n            items: [\n              {\n                label: 'Vertical space',\n                name: 'vspace'\n              },\n              {\n                label: 'Border width',\n                name: 'border'\n              },\n              {\n                label: 'Horizontal space',\n                name: 'hspace'\n              },\n              {\n                label: 'Border style',\n                type: 'listbox',\n                name: 'borderStyle',\n                width: 90,\n                maxWidth: 90,\n                onselect: function (evt) {\n                  updateStyle(editor, evt.control.rootControl);\n                },\n                values: [\n                  {\n                    text: 'Select...',\n                    value: ''\n                  },\n                  {\n                    text: 'Solid',\n                    value: 'solid'\n                  },\n                  {\n                    text: 'Dotted',\n                    value: 'dotted'\n                  },\n                  {\n                    text: 'Dashed',\n                    value: 'dashed'\n                  },\n                  {\n                    text: 'Double',\n                    value: 'double'\n                  },\n                  {\n                    text: 'Groove',\n                    value: 'groove'\n                  },\n                  {\n                    text: 'Ridge',\n                    value: 'ridge'\n                  },\n                  {\n                    text: 'Inset',\n                    value: 'inset'\n                  },\n                  {\n                    text: 'Outset',\n                    value: 'outset'\n                  },\n                  {\n                    text: 'None',\n                    value: 'none'\n                  },\n                  {\n                    text: 'Hidden',\n                    value: 'hidden'\n                  }\n                ]\n              }\n            ]\n          }\n        ]\n      };\n    };\n    var AdvTab = { makeTab: makeTab };\n\n    var doSyncSize = function (widthCtrl, heightCtrl) {\n      widthCtrl.state.set('oldVal', widthCtrl.value());\n      heightCtrl.state.set('oldVal', heightCtrl.value());\n    };\n    var doSizeControls = function (win, f) {\n      var widthCtrl = win.find('#width')[0];\n      var heightCtrl = win.find('#height')[0];\n      var constrained = win.find('#constrain')[0];\n      if (widthCtrl && heightCtrl && constrained) {\n        f(widthCtrl, heightCtrl, constrained.checked());\n      }\n    };\n    var doUpdateSize = function (widthCtrl, heightCtrl, isContrained) {\n      var oldWidth = widthCtrl.state.get('oldVal');\n      var oldHeight = heightCtrl.state.get('oldVal');\n      var newWidth = widthCtrl.value();\n      var newHeight = heightCtrl.value();\n      if (isContrained && oldWidth && oldHeight && newWidth && newHeight) {\n        if (newWidth !== oldWidth) {\n          newHeight = Math.round(newWidth / oldWidth * newHeight);\n          if (!isNaN(newHeight)) {\n            heightCtrl.value(newHeight);\n          }\n        } else {\n          newWidth = Math.round(newHeight / oldHeight * newWidth);\n          if (!isNaN(newWidth)) {\n            widthCtrl.value(newWidth);\n          }\n        }\n      }\n      doSyncSize(widthCtrl, heightCtrl);\n    };\n    var syncSize = function (win) {\n      doSizeControls(win, doSyncSize);\n    };\n    var updateSize = function (win) {\n      doSizeControls(win, doUpdateSize);\n    };\n    var createUi = function () {\n      var recalcSize = function (evt) {\n        updateSize(evt.control.rootControl);\n      };\n      return {\n        type: 'container',\n        label: 'Dimensions',\n        layout: 'flex',\n        align: 'center',\n        spacing: 5,\n        items: [\n          {\n            name: 'width',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Width'\n          },\n          {\n            type: 'label',\n            text: 'x'\n          },\n          {\n            name: 'height',\n            type: 'textbox',\n            maxLength: 5,\n            size: 5,\n            onchange: recalcSize,\n            ariaLabel: 'Height'\n          },\n          {\n            name: 'constrain',\n            type: 'checkbox',\n            checked: true,\n            text: 'Constrain proportions'\n          }\n        ]\n      };\n    };\n    var SizeManager = {\n      createUi: createUi,\n      syncSize: syncSize,\n      updateSize: updateSize\n    };\n\n    var onSrcChange = function (evt, editor) {\n      var srcURL, prependURL, absoluteURLPattern;\n      var meta = evt.meta || {};\n      var control = evt.control;\n      var rootControl = control.rootControl;\n      var imageListCtrl = rootControl.find('#image-list')[0];\n      if (imageListCtrl) {\n        imageListCtrl.value(editor.convertURL(control.value(), 'src'));\n      }\n      global$2.each(meta, function (value, key) {\n        rootControl.find('#' + key).value(value);\n      });\n      if (!meta.width && !meta.height) {\n        srcURL = editor.convertURL(control.value(), 'src');\n        prependURL = Settings.getPrependUrl(editor);\n        absoluteURLPattern = new RegExp('^(?:[a-z]+:)?//', 'i');\n        if (prependURL && !absoluteURLPattern.test(srcURL) && srcURL.substring(0, prependURL.length) !== prependURL) {\n          srcURL = prependURL + srcURL;\n        }\n        control.value(srcURL);\n        Utils.getImageSize(editor.documentBaseURI.toAbsolute(control.value()), function (data) {\n          if (data.width && data.height && Settings.hasDimensions(editor)) {\n            rootControl.find('#width').value(data.width);\n            rootControl.find('#height').value(data.height);\n            SizeManager.syncSize(rootControl);\n          }\n        });\n      }\n    };\n    var onBeforeCall = function (evt) {\n      evt.meta = evt.control.rootControl.toJSON();\n    };\n    var getGeneralItems = function (editor, imageListCtrl) {\n      var generalFormItems = [\n        {\n          name: 'src',\n          type: 'filepicker',\n          filetype: 'image',\n          label: 'Source',\n          autofocus: true,\n          onchange: function (evt) {\n            onSrcChange(evt, editor);\n          },\n          onbeforecall: onBeforeCall\n        },\n        imageListCtrl\n      ];\n      if (Settings.hasDescription(editor)) {\n        generalFormItems.push({\n          name: 'alt',\n          type: 'textbox',\n          label: 'Image description'\n        });\n      }\n      if (Settings.hasImageTitle(editor)) {\n        generalFormItems.push({\n          name: 'title',\n          type: 'textbox',\n          label: 'Image Title'\n        });\n      }\n      if (Settings.hasDimensions(editor)) {\n        generalFormItems.push(SizeManager.createUi());\n      }\n      if (Settings.getClassList(editor)) {\n        generalFormItems.push({\n          name: 'class',\n          type: 'listbox',\n          label: 'Class',\n          values: Utils.buildListItems(Settings.getClassList(editor), function (item) {\n            if (item.value) {\n              item.textStyle = function () {\n                return editor.formatter.getCssText({\n                  inline: 'img',\n                  classes: [item.value]\n                });\n              };\n            }\n          })\n        });\n      }\n      if (Settings.hasImageCaption(editor)) {\n        generalFormItems.push({\n          name: 'caption',\n          type: 'checkbox',\n          label: 'Caption'\n        });\n      }\n      return generalFormItems;\n    };\n    var makeTab$1 = function (editor, imageListCtrl) {\n      return {\n        title: 'General',\n        type: 'form',\n        items: getGeneralItems(editor, imageListCtrl)\n      };\n    };\n    var MainTab = {\n      makeTab: makeTab$1,\n      getGeneralItems: getGeneralItems\n    };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var global$5 = tinymce.util.Tools.resolve('tinymce.ui.Factory');\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    var noop = function () {\n    };\n    var pathJoin = function (path1, path2) {\n      if (path1) {\n        return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n      }\n      return path2;\n    };\n    function Uploader (settings) {\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var uploadBlob = function (blobInfo, handler) {\n        return new global$1(function (resolve, reject) {\n          try {\n            handler(blobInfo, resolve, reject, noop);\n          } catch (ex) {\n            reject(ex.message);\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var upload = function (blobInfo) {\n        return !settings.url && isDefaultHandler(settings.handler) ? global$1.reject('Upload url missing from the settings.') : uploadBlob(blobInfo, settings.handler);\n      };\n      settings = global$2.extend({\n        credentials: false,\n        handler: defaultHandler\n      }, settings);\n      return { upload: upload };\n    }\n\n    var onFileInput = function (editor) {\n      return function (evt) {\n        var Throbber = global$5.get('Throbber');\n        var rootControl = evt.control.rootControl;\n        var throbber = new Throbber(rootControl.getEl());\n        var file = evt.control.value();\n        var blobUri = URL.createObjectURL(file);\n        var uploader = Uploader({\n          url: Settings.getUploadUrl(editor),\n          basePath: Settings.getUploadBasePath(editor),\n          credentials: Settings.getUploadCredentials(editor),\n          handler: Settings.getUploadHandler(editor)\n        });\n        var finalize = function () {\n          throbber.hide();\n          URL.revokeObjectURL(blobUri);\n        };\n        throbber.show();\n        return Utils.blobToDataUri(file).then(function (dataUrl) {\n          var blobInfo = editor.editorUpload.blobCache.create({\n            blob: file,\n            blobUri: blobUri,\n            name: file.name ? file.name.replace(/\\.[^\\.]+$/, '') : null,\n            base64: dataUrl.split(',')[1]\n          });\n          return uploader.upload(blobInfo).then(function (url) {\n            var src = rootControl.find('#src');\n            src.value(url);\n            rootControl.find('tabpanel')[0].activateTab(0);\n            src.fire('change');\n            finalize();\n            return url;\n          });\n        }).catch(function (err) {\n          editor.windowManager.alert(err);\n          finalize();\n        });\n      };\n    };\n    var acceptExts = '.jpg,.jpeg,.png,.gif';\n    var makeTab$2 = function (editor) {\n      return {\n        title: 'Upload',\n        type: 'form',\n        layout: 'flex',\n        direction: 'column',\n        align: 'stretch',\n        padding: '20 20 20 20',\n        items: [\n          {\n            type: 'container',\n            layout: 'flex',\n            direction: 'column',\n            align: 'center',\n            spacing: 10,\n            items: [\n              {\n                text: 'Browse for an image',\n                type: 'browsebutton',\n                accept: acceptExts,\n                onchange: onFileInput(editor)\n              },\n              {\n                text: 'OR',\n                type: 'label'\n              }\n            ]\n          },\n          {\n            text: 'Drop an image here',\n            type: 'dropzone',\n            accept: acceptExts,\n            height: 100,\n            onchange: onFileInput(editor)\n          }\n        ]\n      };\n    };\n    var UploadTab = { makeTab: makeTab$2 };\n\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n\n    var submitForm = function (editor, evt) {\n      var win = evt.control.getRoot();\n      SizeManager.updateSize(win);\n      editor.undoManager.transact(function () {\n        var data = merge(readImageDataFromSelection(editor), win.toJSON());\n        insertOrUpdateImage(editor, data);\n      });\n      editor.editorUpload.uploadImagesAuto();\n    };\n    function Dialog (editor) {\n      function showDialog(imageList) {\n        var data = readImageDataFromSelection(editor);\n        var win, imageListCtrl;\n        if (imageList) {\n          imageListCtrl = {\n            type: 'listbox',\n            label: 'Image list',\n            name: 'image-list',\n            values: Utils.buildListItems(imageList, function (item) {\n              item.value = editor.convertURL(item.value || item.url, 'src');\n            }, [{\n                text: 'None',\n                value: ''\n              }]),\n            value: data.src && editor.convertURL(data.src, 'src'),\n            onselect: function (e) {\n              var altCtrl = win.find('#alt');\n              if (!altCtrl.value() || e.lastControl && altCtrl.value() === e.lastControl.text()) {\n                altCtrl.value(e.control.text());\n              }\n              win.find('#src').value(e.control.value()).fire('change');\n            },\n            onPostRender: function () {\n              imageListCtrl = this;\n            }\n          };\n        }\n        if (Settings.hasAdvTab(editor) || Settings.hasUploadUrl(editor) || Settings.hasUploadHandler(editor)) {\n          var body = [MainTab.makeTab(editor, imageListCtrl)];\n          if (Settings.hasAdvTab(editor)) {\n            body.push(AdvTab.makeTab(editor));\n          }\n          if (Settings.hasUploadUrl(editor) || Settings.hasUploadHandler(editor)) {\n            body.push(UploadTab.makeTab(editor));\n          }\n          win = editor.windowManager.open({\n            title: 'Insert/edit image',\n            data: data,\n            bodyType: 'tabpanel',\n            body: body,\n            onSubmit: curry(submitForm, editor)\n          });\n        } else {\n          win = editor.windowManager.open({\n            title: 'Insert/edit image',\n            data: data,\n            body: MainTab.getGeneralItems(editor, imageListCtrl),\n            onSubmit: curry(submitForm, editor)\n          });\n        }\n        SizeManager.syncSize(win);\n      }\n      function open() {\n        Utils.createImageList(editor, showDialog);\n      }\n      return { open: open };\n    }\n\n    var register = function (editor) {\n      editor.addCommand('mceImage', Dialog(editor).open);\n    };\n    var Commands = { register: register };\n\n    var hasImageClass = function (node) {\n      var className = node.attr('class');\n      return className && /\\bimage\\b/.test(className);\n    };\n    var toggleContentEditableState = function (state) {\n      return function (nodes) {\n        var i = nodes.length, node;\n        var toggleContentEditable = function (node) {\n          node.attr('contenteditable', state ? 'true' : null);\n        };\n        while (i--) {\n          node = nodes[i];\n          if (hasImageClass(node)) {\n            node.attr('contenteditable', state ? 'false' : null);\n            global$2.each(node.getAll('figcaption'), toggleContentEditable);\n          }\n        }\n      };\n    };\n    var setup = function (editor) {\n      editor.on('preInit', function () {\n        editor.parser.addNodeFilter('figure', toggleContentEditableState(true));\n        editor.serializer.addNodeFilter('figure', toggleContentEditableState(false));\n      });\n    };\n    var FilterContent = { setup: setup };\n\n    var register$1 = function (editor) {\n      editor.addButton('image', {\n        icon: 'image',\n        tooltip: 'Insert/edit image',\n        onclick: Dialog(editor).open,\n        stateSelector: 'img:not([data-mce-object],[data-mce-placeholder]),figure.image'\n      });\n      editor.addMenuItem('image', {\n        icon: 'image',\n        text: 'Image',\n        onclick: Dialog(editor).open,\n        context: 'insert',\n        prependToContext: true\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('image', function (editor) {\n      FilterContent.setup(editor);\n      Buttons.register(editor);\n      Commands.register(editor);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n","(function () {\nvar print = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.Env');\n\n    var register = function (editor) {\n      editor.addCommand('mcePrint', function () {\n        if (global$1.ie && global$1.ie <= 11) {\n          editor.getDoc().execCommand('print', false, null);\n        } else {\n          editor.getWin().print();\n        }\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('print', {\n        title: 'Print',\n        cmd: 'mcePrint'\n      });\n      editor.addMenuItem('print', {\n        text: 'Print',\n        cmd: 'mcePrint',\n        icon: 'print'\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('print', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      editor.addShortcut('Meta+P', '', 'mcePrint');\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","// 4.9.6 (2019-09-02)\n(function () {\n(function (domGlobals) {\n    'use strict';\n\n    var noop = function () {\n    };\n    var compose = function (fa, fb) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return fa(fb.apply(null, args));\n      };\n    };\n    var constant = function (value) {\n      return function () {\n        return value;\n      };\n    };\n    var identity = function (x) {\n      return x;\n    };\n    function curry(fn) {\n      var initialArgs = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        initialArgs[_i - 1] = arguments[_i];\n      }\n      return function () {\n        var restArgs = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          restArgs[_i] = arguments[_i];\n        }\n        var all = initialArgs.concat(restArgs);\n        return fn.apply(null, all);\n      };\n    }\n    var not = function (f) {\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        return !f.apply(null, args);\n      };\n    };\n    var die = function (msg) {\n      return function () {\n        throw new Error(msg);\n      };\n    };\n    var never = constant(false);\n    var always = constant(true);\n\n    var never$1 = never;\n    var always$1 = always;\n    var none = function () {\n      return NONE;\n    };\n    var NONE = function () {\n      var eq = function (o) {\n        return o.isNone();\n      };\n      var call = function (thunk) {\n        return thunk();\n      };\n      var id = function (n) {\n        return n;\n      };\n      var noop = function () {\n      };\n      var nul = function () {\n        return null;\n      };\n      var undef = function () {\n        return undefined;\n      };\n      var me = {\n        fold: function (n, s) {\n          return n();\n        },\n        is: never$1,\n        isSome: never$1,\n        isNone: always$1,\n        getOr: id,\n        getOrThunk: call,\n        getOrDie: function (msg) {\n          throw new Error(msg || 'error: getOrDie called on none.');\n        },\n        getOrNull: nul,\n        getOrUndefined: undef,\n        or: id,\n        orThunk: call,\n        map: none,\n        ap: none,\n        each: noop,\n        bind: none,\n        flatten: none,\n        exists: never$1,\n        forall: always$1,\n        filter: none,\n        equals: eq,\n        equals_: eq,\n        toArray: function () {\n          return [];\n        },\n        toString: constant('none()')\n      };\n      if (Object.freeze) {\n        Object.freeze(me);\n      }\n      return me;\n    }();\n    var some = function (a) {\n      var constant_a = function () {\n        return a;\n      };\n      var self = function () {\n        return me;\n      };\n      var map = function (f) {\n        return some(f(a));\n      };\n      var bind = function (f) {\n        return f(a);\n      };\n      var me = {\n        fold: function (n, s) {\n          return s(a);\n        },\n        is: function (v) {\n          return a === v;\n        },\n        isSome: always$1,\n        isNone: never$1,\n        getOr: constant_a,\n        getOrThunk: constant_a,\n        getOrDie: constant_a,\n        getOrNull: constant_a,\n        getOrUndefined: constant_a,\n        or: self,\n        orThunk: self,\n        map: map,\n        ap: function (optfab) {\n          return optfab.fold(none, function (fab) {\n            return some(fab(a));\n          });\n        },\n        each: function (f) {\n          f(a);\n        },\n        bind: bind,\n        flatten: constant_a,\n        exists: bind,\n        forall: bind,\n        filter: function (f) {\n          return f(a) ? me : NONE;\n        },\n        equals: function (o) {\n          return o.is(a);\n        },\n        equals_: function (o, elementEq) {\n          return o.fold(never$1, function (b) {\n            return elementEq(a, b);\n          });\n        },\n        toArray: function () {\n          return [a];\n        },\n        toString: function () {\n          return 'some(' + a + ')';\n        }\n      };\n      return me;\n    };\n    var from = function (value) {\n      return value === null || value === undefined ? NONE : some(value);\n    };\n    var Option = {\n      some: some,\n      none: none,\n      from: from\n    };\n\n    var typeOf = function (x) {\n      if (x === null) {\n        return 'null';\n      }\n      var t = typeof x;\n      if (t === 'object' && (Array.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'Array')) {\n        return 'array';\n      }\n      if (t === 'object' && (String.prototype.isPrototypeOf(x) || x.constructor && x.constructor.name === 'String')) {\n        return 'string';\n      }\n      return t;\n    };\n    var isType = function (type) {\n      return function (value) {\n        return typeOf(value) === type;\n      };\n    };\n    var isString = isType('string');\n    var isObject = isType('object');\n    var isArray = isType('array');\n    var isNull = isType('null');\n    var isBoolean = isType('boolean');\n    var isFunction = isType('function');\n    var isNumber = isType('number');\n\n    var slice = Array.prototype.slice;\n    var rawIndexOf = function () {\n      var pIndexOf = Array.prototype.indexOf;\n      var fastIndex = function (xs, x) {\n        return pIndexOf.call(xs, x);\n      };\n      var slowIndex = function (xs, x) {\n        return slowIndexOf(xs, x);\n      };\n      return pIndexOf === undefined ? slowIndex : fastIndex;\n    }();\n    var indexOf = function (xs, x) {\n      var r = rawIndexOf(xs, x);\n      return r === -1 ? Option.none() : Option.some(r);\n    };\n    var contains = function (xs, x) {\n      return rawIndexOf(xs, x) > -1;\n    };\n    var exists = function (xs, pred) {\n      return findIndex(xs, pred).isSome();\n    };\n    var map = function (xs, f) {\n      var len = xs.length;\n      var r = new Array(len);\n      for (var i = 0; i < len; i++) {\n        var x = xs[i];\n        r[i] = f(x, i, xs);\n      }\n      return r;\n    };\n    var each = function (xs, f) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var eachr = function (xs, f) {\n      for (var i = xs.length - 1; i >= 0; i--) {\n        var x = xs[i];\n        f(x, i, xs);\n      }\n    };\n    var partition = function (xs, pred) {\n      var pass = [];\n      var fail = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        var arr = pred(x, i, xs) ? pass : fail;\n        arr.push(x);\n      }\n      return {\n        pass: pass,\n        fail: fail\n      };\n    };\n    var filter = function (xs, pred) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          r.push(x);\n        }\n      }\n      return r;\n    };\n    var foldr = function (xs, f, acc) {\n      eachr(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var foldl = function (xs, f, acc) {\n      each(xs, function (x) {\n        acc = f(acc, x);\n      });\n      return acc;\n    };\n    var find = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(x);\n        }\n      }\n      return Option.none();\n    };\n    var findIndex = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        if (pred(x, i, xs)) {\n          return Option.some(i);\n        }\n      }\n      return Option.none();\n    };\n    var slowIndexOf = function (xs, x) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (xs[i] === x) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var push = Array.prototype.push;\n    var flatten = function (xs) {\n      var r = [];\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        if (!isArray(xs[i])) {\n          throw new Error('Arr.flatten item ' + i + ' was not an array, input: ' + xs);\n        }\n        push.apply(r, xs[i]);\n      }\n      return r;\n    };\n    var bind = function (xs, f) {\n      var output = map(xs, f);\n      return flatten(output);\n    };\n    var forall = function (xs, pred) {\n      for (var i = 0, len = xs.length; i < len; ++i) {\n        var x = xs[i];\n        if (pred(x, i, xs) !== true) {\n          return false;\n        }\n      }\n      return true;\n    };\n    var reverse = function (xs) {\n      var r = slice.call(xs, 0);\n      r.reverse();\n      return r;\n    };\n    var difference = function (a1, a2) {\n      return filter(a1, function (x) {\n        return !contains(a2, x);\n      });\n    };\n    var mapToObject = function (xs, f) {\n      var r = {};\n      for (var i = 0, len = xs.length; i < len; i++) {\n        var x = xs[i];\n        r[String(x)] = f(x, i);\n      }\n      return r;\n    };\n    var sort = function (xs, comparator) {\n      var copy = slice.call(xs, 0);\n      copy.sort(comparator);\n      return copy;\n    };\n    var head = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[0]);\n    };\n    var last = function (xs) {\n      return xs.length === 0 ? Option.none() : Option.some(xs[xs.length - 1]);\n    };\n    var from$1 = isFunction(Array.from) ? Array.from : function (x) {\n      return slice.call(x);\n    };\n\n    var Global = typeof domGlobals.window !== 'undefined' ? domGlobals.window : Function('return this;')();\n\n    var path = function (parts, scope) {\n      var o = scope !== undefined && scope !== null ? scope : Global;\n      for (var i = 0; i < parts.length && o !== undefined && o !== null; ++i) {\n        o = o[parts[i]];\n      }\n      return o;\n    };\n    var resolve = function (p, scope) {\n      var parts = p.split('.');\n      return path(parts, scope);\n    };\n\n    var unsafe = function (name, scope) {\n      return resolve(name, scope);\n    };\n    var getOrDie = function (name, scope) {\n      var actual = unsafe(name, scope);\n      if (actual === undefined || actual === null) {\n        throw new Error(name + ' not available on this browser');\n      }\n      return actual;\n    };\n    var Global$1 = { getOrDie: getOrDie };\n\n    var url = function () {\n      return Global$1.getOrDie('URL');\n    };\n    var createObjectURL = function (blob) {\n      return url().createObjectURL(blob);\n    };\n    var revokeObjectURL = function (u) {\n      url().revokeObjectURL(u);\n    };\n    var URL = {\n      createObjectURL: createObjectURL,\n      revokeObjectURL: revokeObjectURL\n    };\n\n    var nav = domGlobals.navigator, userAgent = nav.userAgent;\n    var opera, webkit, ie, ie11, ie12, gecko, mac, iDevice, android, fileApi, phone, tablet, windowsPhone;\n    var matchMediaQuery = function (query) {\n      return 'matchMedia' in domGlobals.window ? domGlobals.matchMedia(query).matches : false;\n    };\n    opera = false;\n    android = /Android/.test(userAgent);\n    webkit = /WebKit/.test(userAgent);\n    ie = !webkit && !opera && /MSIE/gi.test(userAgent) && /Explorer/gi.test(nav.appName);\n    ie = ie && /MSIE (\\w+)\\./.exec(userAgent)[1];\n    ie11 = userAgent.indexOf('Trident/') !== -1 && (userAgent.indexOf('rv:') !== -1 || nav.appName.indexOf('Netscape') !== -1) ? 11 : false;\n    ie12 = userAgent.indexOf('Edge/') !== -1 && !ie && !ie11 ? 12 : false;\n    ie = ie || ie11 || ie12;\n    gecko = !webkit && !ie11 && /Gecko/.test(userAgent);\n    mac = userAgent.indexOf('Mac') !== -1;\n    iDevice = /(iPad|iPhone)/.test(userAgent);\n    fileApi = 'FormData' in domGlobals.window && 'FileReader' in domGlobals.window && 'URL' in domGlobals.window && !!URL.createObjectURL;\n    phone = matchMediaQuery('only screen and (max-device-width: 480px)') && (android || iDevice);\n    tablet = matchMediaQuery('only screen and (min-width: 800px)') && (android || iDevice);\n    windowsPhone = userAgent.indexOf('Windows Phone') !== -1;\n    if (ie12) {\n      webkit = false;\n    }\n    var contentEditable = !iDevice || fileApi || parseInt(userAgent.match(/AppleWebKit\\/(\\d*)/)[1], 10) >= 534;\n    var Env = {\n      opera: opera,\n      webkit: webkit,\n      ie: ie,\n      gecko: gecko,\n      mac: mac,\n      iOS: iDevice,\n      android: android,\n      contentEditable: contentEditable,\n      transparentSrc: 'data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7',\n      caretAfter: ie !== 8,\n      range: domGlobals.window.getSelection && 'Range' in domGlobals.window,\n      documentMode: ie && !ie12 ? domGlobals.document.documentMode || 7 : 10,\n      fileApi: fileApi,\n      ceFalse: ie === false || ie > 8,\n      cacheSuffix: null,\n      container: null,\n      overrideViewPort: null,\n      experimentalShadowDom: false,\n      canHaveCSP: ie === false || ie > 11,\n      desktop: !phone && !tablet,\n      windowsPhone: windowsPhone\n    };\n\n    var promise = function () {\n      function bind(fn, thisArg) {\n        return function () {\n          fn.apply(thisArg, arguments);\n        };\n      }\n      var isArray = Array.isArray || function (value) {\n        return Object.prototype.toString.call(value) === '[object Array]';\n      };\n      var Promise = function (fn) {\n        if (typeof this !== 'object') {\n          throw new TypeError('Promises must be constructed via new');\n        }\n        if (typeof fn !== 'function') {\n          throw new TypeError('not a function');\n        }\n        this._state = null;\n        this._value = null;\n        this._deferreds = [];\n        doResolve(fn, bind(resolve, this), bind(reject, this));\n      };\n      var asap = Promise.immediateFn || typeof setImmediate === 'function' && setImmediate || function (fn) {\n        setTimeout(fn, 1);\n      };\n      function handle(deferred) {\n        var me = this;\n        if (this._state === null) {\n          this._deferreds.push(deferred);\n          return;\n        }\n        asap(function () {\n          var cb = me._state ? deferred.onFulfilled : deferred.onRejected;\n          if (cb === null) {\n            (me._state ? deferred.resolve : deferred.reject)(me._value);\n            return;\n          }\n          var ret;\n          try {\n            ret = cb(me._value);\n          } catch (e) {\n            deferred.reject(e);\n            return;\n          }\n          deferred.resolve(ret);\n        });\n      }\n      function resolve(newValue) {\n        try {\n          if (newValue === this) {\n            throw new TypeError('A promise cannot be resolved with itself.');\n          }\n          if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n            var then = newValue.then;\n            if (typeof then === 'function') {\n              doResolve(bind(then, newValue), bind(resolve, this), bind(reject, this));\n              return;\n            }\n          }\n          this._state = true;\n          this._value = newValue;\n          finale.call(this);\n        } catch (e) {\n          reject.call(this, e);\n        }\n      }\n      function reject(newValue) {\n        this._state = false;\n        this._value = newValue;\n        finale.call(this);\n      }\n      function finale() {\n        for (var i = 0, len = this._deferreds.length; i < len; i++) {\n          handle.call(this, this._deferreds[i]);\n        }\n        this._deferreds = null;\n      }\n      function Handler(onFulfilled, onRejected, resolve, reject) {\n        this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n        this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n        this.resolve = resolve;\n        this.reject = reject;\n      }\n      function doResolve(fn, onFulfilled, onRejected) {\n        var done = false;\n        try {\n          fn(function (value) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onFulfilled(value);\n          }, function (reason) {\n            if (done) {\n              return;\n            }\n            done = true;\n            onRejected(reason);\n          });\n        } catch (ex) {\n          if (done) {\n            return;\n          }\n          done = true;\n          onRejected(ex);\n        }\n      }\n      Promise.prototype.catch = function (onRejected) {\n        return this.then(null, onRejected);\n      };\n      Promise.prototype.then = function (onFulfilled, onRejected) {\n        var me = this;\n        return new Promise(function (resolve, reject) {\n          handle.call(me, new Handler(onFulfilled, onRejected, resolve, reject));\n        });\n      };\n      Promise.all = function () {\n        var args = Array.prototype.slice.call(arguments.length === 1 && isArray(arguments[0]) ? arguments[0] : arguments);\n        return new Promise(function (resolve, reject) {\n          if (args.length === 0) {\n            return resolve([]);\n          }\n          var remaining = args.length;\n          function res(i, val) {\n            try {\n              if (val && (typeof val === 'object' || typeof val === 'function')) {\n                var then = val.then;\n                if (typeof then === 'function') {\n                  then.call(val, function (val) {\n                    res(i, val);\n                  }, reject);\n                  return;\n                }\n              }\n              args[i] = val;\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            } catch (ex) {\n              reject(ex);\n            }\n          }\n          for (var i = 0; i < args.length; i++) {\n            res(i, args[i]);\n          }\n        });\n      };\n      Promise.resolve = function (value) {\n        if (value && typeof value === 'object' && value.constructor === Promise) {\n          return value;\n        }\n        return new Promise(function (resolve) {\n          resolve(value);\n        });\n      };\n      Promise.reject = function (value) {\n        return new Promise(function (resolve, reject) {\n          reject(value);\n        });\n      };\n      Promise.race = function (values) {\n        return new Promise(function (resolve, reject) {\n          for (var i = 0, len = values.length; i < len; i++) {\n            values[i].then(resolve, reject);\n          }\n        });\n      };\n      return Promise;\n    };\n    var promiseObj = window.Promise ? window.Promise : promise();\n\n    var requestAnimationFramePromise;\n    var requestAnimationFrame = function (callback, element) {\n      var i, requestAnimationFrameFunc = domGlobals.window.requestAnimationFrame;\n      var vendors = [\n        'ms',\n        'moz',\n        'webkit'\n      ];\n      var featurefill = function (callback) {\n        domGlobals.window.setTimeout(callback, 0);\n      };\n      for (i = 0; i < vendors.length && !requestAnimationFrameFunc; i++) {\n        requestAnimationFrameFunc = domGlobals.window[vendors[i] + 'RequestAnimationFrame'];\n      }\n      if (!requestAnimationFrameFunc) {\n        requestAnimationFrameFunc = featurefill;\n      }\n      requestAnimationFrameFunc(callback, element);\n    };\n    var wrappedSetTimeout = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 0;\n      }\n      return setTimeout(callback, time);\n    };\n    var wrappedSetInterval = function (callback, time) {\n      if (typeof time !== 'number') {\n        time = 1;\n      }\n      return setInterval(callback, time);\n    };\n    var wrappedClearTimeout = function (id) {\n      return clearTimeout(id);\n    };\n    var wrappedClearInterval = function (id) {\n      return clearInterval(id);\n    };\n    var debounce = function (callback, time) {\n      var timer, func;\n      func = function () {\n        var args = arguments;\n        clearTimeout(timer);\n        timer = wrappedSetTimeout(function () {\n          callback.apply(this, args);\n        }, time);\n      };\n      func.stop = function () {\n        clearTimeout(timer);\n      };\n      return func;\n    };\n    var Delay = {\n      requestAnimationFrame: function (callback, element) {\n        if (requestAnimationFramePromise) {\n          requestAnimationFramePromise.then(callback);\n          return;\n        }\n        requestAnimationFramePromise = new promiseObj(function (resolve) {\n          if (!element) {\n            element = domGlobals.document.body;\n          }\n          requestAnimationFrame(resolve, element);\n        }).then(callback);\n      },\n      setTimeout: wrappedSetTimeout,\n      setInterval: wrappedSetInterval,\n      setEditorTimeout: function (editor, callback, time) {\n        return wrappedSetTimeout(function () {\n          if (!editor.removed) {\n            callback();\n          }\n        }, time);\n      },\n      setEditorInterval: function (editor, callback, time) {\n        var timer;\n        timer = wrappedSetInterval(function () {\n          if (!editor.removed) {\n            callback();\n          } else {\n            clearInterval(timer);\n          }\n        }, time);\n        return timer;\n      },\n      debounce: debounce,\n      throttle: debounce,\n      clearInterval: wrappedClearInterval,\n      clearTimeout: wrappedClearTimeout\n    };\n\n    var eventExpandoPrefix = 'mce-data-';\n    var mouseEventRe = /^(?:mouse|contextmenu)|click/;\n    var deprecated = {\n      keyLocation: 1,\n      layerX: 1,\n      layerY: 1,\n      returnValue: 1,\n      webkitMovementX: 1,\n      webkitMovementY: 1,\n      keyIdentifier: 1\n    };\n    var hasIsDefaultPrevented = function (event) {\n      return event.isDefaultPrevented === returnTrue || event.isDefaultPrevented === returnFalse;\n    };\n    var returnFalse = function () {\n      return false;\n    };\n    var returnTrue = function () {\n      return true;\n    };\n    var addEvent = function (target, name, callback, capture) {\n      if (target.addEventListener) {\n        target.addEventListener(name, callback, capture || false);\n      } else if (target.attachEvent) {\n        target.attachEvent('on' + name, callback);\n      }\n    };\n    var removeEvent = function (target, name, callback, capture) {\n      if (target.removeEventListener) {\n        target.removeEventListener(name, callback, capture || false);\n      } else if (target.detachEvent) {\n        target.detachEvent('on' + name, callback);\n      }\n    };\n    var getTargetFromShadowDom = function (event, defaultTarget) {\n      if (event.composedPath) {\n        var composedPath = event.composedPath();\n        if (composedPath && composedPath.length > 0) {\n          return composedPath[0];\n        }\n      }\n      return defaultTarget;\n    };\n    var fix = function (originalEvent, data) {\n      var name;\n      var event = data || {};\n      for (name in originalEvent) {\n        if (!deprecated[name]) {\n          event[name] = originalEvent[name];\n        }\n      }\n      if (!event.target) {\n        event.target = event.srcElement || domGlobals.document;\n      }\n      if (Env.experimentalShadowDom) {\n        event.target = getTargetFromShadowDom(originalEvent, event.target);\n      }\n      if (originalEvent && mouseEventRe.test(originalEvent.type) && originalEvent.pageX === undefined && originalEvent.clientX !== undefined) {\n        var eventDoc = event.target.ownerDocument || domGlobals.document;\n        var doc = eventDoc.documentElement;\n        var body = eventDoc.body;\n        event.pageX = originalEvent.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event.pageY = originalEvent.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event.preventDefault = function () {\n        event.isDefaultPrevented = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.preventDefault) {\n            originalEvent.preventDefault();\n          } else {\n            originalEvent.returnValue = false;\n          }\n        }\n      };\n      event.stopPropagation = function () {\n        event.isPropagationStopped = returnTrue;\n        if (originalEvent) {\n          if (originalEvent.stopPropagation) {\n            originalEvent.stopPropagation();\n          } else {\n            originalEvent.cancelBubble = true;\n          }\n        }\n      };\n      event.stopImmediatePropagation = function () {\n        event.isImmediatePropagationStopped = returnTrue;\n        event.stopPropagation();\n      };\n      if (hasIsDefaultPrevented(event) === false) {\n        event.isDefaultPrevented = returnFalse;\n        event.isPropagationStopped = returnFalse;\n        event.isImmediatePropagationStopped = returnFalse;\n      }\n      if (typeof event.metaKey === 'undefined') {\n        event.metaKey = false;\n      }\n      return event;\n    };\n    var bindOnReady = function (win, callback, eventUtils) {\n      var doc = win.document, event = { type: 'ready' };\n      if (eventUtils.domLoaded) {\n        callback(event);\n        return;\n      }\n      var isDocReady = function () {\n        return doc.readyState === 'complete' || doc.readyState === 'interactive' && doc.body;\n      };\n      var readyHandler = function () {\n        if (!eventUtils.domLoaded) {\n          eventUtils.domLoaded = true;\n          callback(event);\n        }\n      };\n      var waitForDomLoaded = function () {\n        if (isDocReady()) {\n          removeEvent(doc, 'readystatechange', waitForDomLoaded);\n          readyHandler();\n        }\n      };\n      var tryScroll = function () {\n        try {\n          doc.documentElement.doScroll('left');\n        } catch (ex) {\n          Delay.setTimeout(tryScroll);\n          return;\n        }\n        readyHandler();\n      };\n      if (doc.addEventListener && !(Env.ie && Env.ie < 11)) {\n        if (isDocReady()) {\n          readyHandler();\n        } else {\n          addEvent(win, 'DOMContentLoaded', readyHandler);\n        }\n      } else {\n        addEvent(doc, 'readystatechange', waitForDomLoaded);\n        if (doc.documentElement.doScroll && win.self === win.top) {\n          tryScroll();\n        }\n      }\n      addEvent(win, 'load', readyHandler);\n    };\n    var EventUtils = function () {\n      var self = this;\n      var events = {}, count, expando, hasFocusIn, hasMouseEnterLeave, mouseEnterLeave;\n      expando = eventExpandoPrefix + (+new Date()).toString(32);\n      hasMouseEnterLeave = 'onmouseenter' in domGlobals.document.documentElement;\n      hasFocusIn = 'onfocusin' in domGlobals.document.documentElement;\n      mouseEnterLeave = {\n        mouseenter: 'mouseover',\n        mouseleave: 'mouseout'\n      };\n      count = 1;\n      self.domLoaded = false;\n      self.events = events;\n      var executeHandlers = function (evt, id) {\n        var callbackList, i, l, callback;\n        var container = events[id];\n        callbackList = container && container[evt.type];\n        if (callbackList) {\n          for (i = 0, l = callbackList.length; i < l; i++) {\n            callback = callbackList[i];\n            if (callback && callback.func.call(callback.scope, evt) === false) {\n              evt.preventDefault();\n            }\n            if (evt.isImmediatePropagationStopped()) {\n              return;\n            }\n          }\n        }\n      };\n      self.bind = function (target, names, callback, scope) {\n        var id, callbackList, i, name, fakeName, nativeHandler, capture;\n        var win = domGlobals.window;\n        var defaultNativeHandler = function (evt) {\n          executeHandlers(fix(evt || win.event), id);\n        };\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return;\n        }\n        if (!target[expando]) {\n          id = count++;\n          target[expando] = id;\n          events[id] = {};\n        } else {\n          id = target[expando];\n        }\n        scope = scope || target;\n        names = names.split(' ');\n        i = names.length;\n        while (i--) {\n          name = names[i];\n          nativeHandler = defaultNativeHandler;\n          fakeName = capture = false;\n          if (name === 'DOMContentLoaded') {\n            name = 'ready';\n          }\n          if (self.domLoaded && name === 'ready' && target.readyState === 'complete') {\n            callback.call(scope, fix({ type: name }));\n            continue;\n          }\n          if (!hasMouseEnterLeave) {\n            fakeName = mouseEnterLeave[name];\n            if (fakeName) {\n              nativeHandler = function (evt) {\n                var current, related;\n                current = evt.currentTarget;\n                related = evt.relatedTarget;\n                if (related && current.contains) {\n                  related = current.contains(related);\n                } else {\n                  while (related && related !== current) {\n                    related = related.parentNode;\n                  }\n                }\n                if (!related) {\n                  evt = fix(evt || win.event);\n                  evt.type = evt.type === 'mouseout' ? 'mouseleave' : 'mouseenter';\n                  evt.target = current;\n                  executeHandlers(evt, id);\n                }\n              };\n            }\n          }\n          if (!hasFocusIn && (name === 'focusin' || name === 'focusout')) {\n            capture = true;\n            fakeName = name === 'focusin' ? 'focus' : 'blur';\n            nativeHandler = function (evt) {\n              evt = fix(evt || win.event);\n              evt.type = evt.type === 'focus' ? 'focusin' : 'focusout';\n              executeHandlers(evt, id);\n            };\n          }\n          callbackList = events[id][name];\n          if (!callbackList) {\n            events[id][name] = callbackList = [{\n                func: callback,\n                scope: scope\n              }];\n            callbackList.fakeName = fakeName;\n            callbackList.capture = capture;\n            callbackList.nativeHandler = nativeHandler;\n            if (name === 'ready') {\n              bindOnReady(target, nativeHandler, self);\n            } else {\n              addEvent(target, fakeName || name, nativeHandler, capture);\n            }\n          } else {\n            if (name === 'ready' && self.domLoaded) {\n              callback({ type: name });\n            } else {\n              callbackList.push({\n                func: callback,\n                scope: scope\n              });\n            }\n          }\n        }\n        target = callbackList = 0;\n        return callback;\n      };\n      self.unbind = function (target, names, callback) {\n        var id, callbackList, i, ci, name, eventMap;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        id = target[expando];\n        if (id) {\n          eventMap = events[id];\n          if (names) {\n            names = names.split(' ');\n            i = names.length;\n            while (i--) {\n              name = names[i];\n              callbackList = eventMap[name];\n              if (callbackList) {\n                if (callback) {\n                  ci = callbackList.length;\n                  while (ci--) {\n                    if (callbackList[ci].func === callback) {\n                      var nativeHandler = callbackList.nativeHandler;\n                      var fakeName = callbackList.fakeName, capture = callbackList.capture;\n                      callbackList = callbackList.slice(0, ci).concat(callbackList.slice(ci + 1));\n                      callbackList.nativeHandler = nativeHandler;\n                      callbackList.fakeName = fakeName;\n                      callbackList.capture = capture;\n                      eventMap[name] = callbackList;\n                    }\n                  }\n                }\n                if (!callback || callbackList.length === 0) {\n                  delete eventMap[name];\n                  removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n                }\n              }\n            }\n          } else {\n            for (name in eventMap) {\n              callbackList = eventMap[name];\n              removeEvent(target, callbackList.fakeName || name, callbackList.nativeHandler, callbackList.capture);\n            }\n            eventMap = {};\n          }\n          for (name in eventMap) {\n            return self;\n          }\n          delete events[id];\n          try {\n            delete target[expando];\n          } catch (ex) {\n            target[expando] = null;\n          }\n        }\n        return self;\n      };\n      self.fire = function (target, name, args) {\n        var id;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        args = fix(null, args);\n        args.type = name;\n        args.target = target;\n        do {\n          id = target[expando];\n          if (id) {\n            executeHandlers(args, id);\n          }\n          target = target.parentNode || target.ownerDocument || target.defaultView || target.parentWindow;\n        } while (target && !args.isPropagationStopped());\n        return self;\n      };\n      self.clean = function (target) {\n        var i, children;\n        var unbind = self.unbind;\n        if (!target || target.nodeType === 3 || target.nodeType === 8) {\n          return self;\n        }\n        if (target[expando]) {\n          unbind(target);\n        }\n        if (!target.getElementsByTagName) {\n          target = target.document;\n        }\n        if (target && target.getElementsByTagName) {\n          unbind(target);\n          children = target.getElementsByTagName('*');\n          i = children.length;\n          while (i--) {\n            target = children[i];\n            if (target[expando]) {\n              unbind(target);\n            }\n          }\n        }\n        return self;\n      };\n      self.destroy = function () {\n        events = {};\n      };\n      self.cancel = function (e) {\n        if (e) {\n          e.preventDefault();\n          e.stopImmediatePropagation();\n        }\n        return false;\n      };\n    };\n    EventUtils.Event = new EventUtils();\n    EventUtils.Event.bind(domGlobals.window, 'ready', function () {\n    });\n\n    var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains$1, expando = 'sizzle' + -new Date(), preferredDoc = domGlobals.window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n        }\n        return 0;\n      }, strundefined = typeof undefined, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push$1 = arr.push, slice$1 = arr.slice, indexOf$1 = arr.indexOf || function (elem) {\n        var i = 0, len = this.length;\n        for (; i < len; i++) {\n          if (this[i] === elem) {\n            return i;\n          }\n        }\n        return -1;\n      }, booleans = 'checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped', whitespace = '[\\\\x20\\\\t\\\\r\\\\n\\\\f]', identifier = '(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+', attributes = '\\\\[' + whitespace + '*(' + identifier + ')(?:' + whitespace + '*([*^$|!~]?=)' + whitespace + '*(?:\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\"|(' + identifier + '))|)' + whitespace + '*\\\\]', pseudos = ':(' + identifier + ')(?:\\\\((' + '(\\'((?:\\\\\\\\.|[^\\\\\\\\\\'])*)\\'|\"((?:\\\\\\\\.|[^\\\\\\\\\"])*)\")|' + '((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|' + attributes + ')*)|' + '.*' + ')\\\\)|)', rtrim = new RegExp('^' + whitespace + '+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)' + whitespace + '+$', 'g'), rcomma = new RegExp('^' + whitespace + '*,' + whitespace + '*'), rcombinators = new RegExp('^' + whitespace + '*([>+~]|' + whitespace + ')' + whitespace + '*'), rattributeQuotes = new RegExp('=' + whitespace + '*([^\\\\]\\'\"]*?)' + whitespace + '*\\\\]', 'g'), rpseudo = new RegExp(pseudos), ridentifier = new RegExp('^' + identifier + '$'), matchExpr = {\n        ID: new RegExp('^#(' + identifier + ')'),\n        CLASS: new RegExp('^\\\\.(' + identifier + ')'),\n        TAG: new RegExp('^(' + identifier + '|[*])'),\n        ATTR: new RegExp('^' + attributes),\n        PSEUDO: new RegExp('^' + pseudos),\n        CHILD: new RegExp('^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(' + whitespace + '*(even|odd|(([+-]|)(\\\\d*)n|)' + whitespace + '*(?:([+-]|)' + whitespace + '*(\\\\d+)|))' + whitespace + '*\\\\)|)', 'i'),\n        bool: new RegExp('^(?:' + booleans + ')$', 'i'),\n        needsContext: new RegExp('^' + whitespace + '*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(' + whitespace + '*((?:-\\\\d)?\\\\d*)' + whitespace + '*\\\\)|)(?=[^-]|$)', 'i')\n      }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\\d$/i, rnative = /^[^{]+\\{\\s*\\[native \\w/, rquickExpr = /^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\\\/g, runescape = new RegExp('\\\\\\\\([\\\\da-f]{1,6}' + whitespace + '?|(' + whitespace + ')|.)', 'ig'), funescape = function (_, escaped, escapedWhitespace) {\n        var high = '0x' + escaped - 65536;\n        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);\n      };\n    try {\n      push$1.apply(arr = slice$1.call(preferredDoc.childNodes), preferredDoc.childNodes);\n      arr[preferredDoc.childNodes.length].nodeType;\n    } catch (e) {\n      push$1 = {\n        apply: arr.length ? function (target, els) {\n          push_native.apply(target, slice$1.call(els));\n        } : function (target, els) {\n          var j = target.length, i = 0;\n          while (target[j++] = els[i++]) {\n          }\n          target.length = j - 1;\n        }\n      };\n    }\n    var Sizzle = function (selector, context, results, seed) {\n      var match, elem, m, nodeType, i, groups, old, nid, newContext, newSelector;\n      if ((context ? context.ownerDocument || context : preferredDoc) !== document) {\n        setDocument(context);\n      }\n      context = context || document;\n      results = results || [];\n      if (!selector || typeof selector !== 'string') {\n        return results;\n      }\n      if ((nodeType = context.nodeType) !== 1 && nodeType !== 9) {\n        return [];\n      }\n      if (documentIsHTML && !seed) {\n        if (match = rquickExpr.exec(selector)) {\n          if (m = match[1]) {\n            if (nodeType === 9) {\n              elem = context.getElementById(m);\n              if (elem && elem.parentNode) {\n                if (elem.id === m) {\n                  results.push(elem);\n                  return results;\n                }\n              } else {\n                return results;\n              }\n            } else {\n              if (context.ownerDocument && (elem = context.ownerDocument.getElementById(m)) && contains$1(context, elem) && elem.id === m) {\n                results.push(elem);\n                return results;\n              }\n            }\n          } else if (match[2]) {\n            push$1.apply(results, context.getElementsByTagName(selector));\n            return results;\n          } else if ((m = match[3]) && support.getElementsByClassName) {\n            push$1.apply(results, context.getElementsByClassName(m));\n            return results;\n          }\n        }\n        if (support.qsa && (!rbuggyQSA || !rbuggyQSA.test(selector))) {\n          nid = old = expando;\n          newContext = context;\n          newSelector = nodeType === 9 && selector;\n          if (nodeType === 1 && context.nodeName.toLowerCase() !== 'object') {\n            groups = tokenize(selector);\n            if (old = context.getAttribute('id')) {\n              nid = old.replace(rescape, '\\\\$&');\n            } else {\n              context.setAttribute('id', nid);\n            }\n            nid = '[id=\\'' + nid + '\\'] ';\n            i = groups.length;\n            while (i--) {\n              groups[i] = nid + toSelector(groups[i]);\n            }\n            newContext = rsibling.test(selector) && testContext(context.parentNode) || context;\n            newSelector = groups.join(',');\n          }\n          if (newSelector) {\n            try {\n              push$1.apply(results, newContext.querySelectorAll(newSelector));\n              return results;\n            } catch (qsaError) {\n            } finally {\n              if (!old) {\n                context.removeAttribute('id');\n              }\n            }\n          }\n        }\n      }\n      return select(selector.replace(rtrim, '$1'), context, results, seed);\n    };\n    function createCache() {\n      var keys = [];\n      function cache(key, value) {\n        if (keys.push(key + ' ') > Expr.cacheLength) {\n          delete cache[keys.shift()];\n        }\n        return cache[key + ' '] = value;\n      }\n      return cache;\n    }\n    function markFunction(fn) {\n      fn[expando] = true;\n      return fn;\n    }\n    function siblingCheck(a, b) {\n      var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);\n      if (diff) {\n        return diff;\n      }\n      if (cur) {\n        while (cur = cur.nextSibling) {\n          if (cur === b) {\n            return -1;\n          }\n        }\n      }\n      return a ? 1 : -1;\n    }\n    function createInputPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return name === 'input' && elem.type === type;\n      };\n    }\n    function createButtonPseudo(type) {\n      return function (elem) {\n        var name = elem.nodeName.toLowerCase();\n        return (name === 'input' || name === 'button') && elem.type === type;\n      };\n    }\n    function createPositionalPseudo(fn) {\n      return markFunction(function (argument) {\n        argument = +argument;\n        return markFunction(function (seed, matches) {\n          var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;\n          while (i--) {\n            if (seed[j = matchIndexes[i]]) {\n              seed[j] = !(matches[j] = seed[j]);\n            }\n          }\n        });\n      });\n    }\n    function testContext(context) {\n      return context && typeof context.getElementsByTagName !== strundefined && context;\n    }\n    support = Sizzle.support = {};\n    isXML = Sizzle.isXML = function (elem) {\n      var documentElement = elem && (elem.ownerDocument || elem).documentElement;\n      return documentElement ? documentElement.nodeName !== 'HTML' : false;\n    };\n    setDocument = Sizzle.setDocument = function (node) {\n      var hasCompare, doc = node ? node.ownerDocument || node : preferredDoc, parent = doc.defaultView;\n      function getTop(win) {\n        try {\n          return win.top;\n        } catch (ex) {\n        }\n        return null;\n      }\n      if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {\n        return document;\n      }\n      document = doc;\n      docElem = doc.documentElement;\n      documentIsHTML = !isXML(doc);\n      if (parent && parent !== getTop(parent)) {\n        if (parent.addEventListener) {\n          parent.addEventListener('unload', function () {\n            setDocument();\n          }, false);\n        } else if (parent.attachEvent) {\n          parent.attachEvent('onunload', function () {\n            setDocument();\n          });\n        }\n      }\n      support.attributes = true;\n      support.getElementsByTagName = true;\n      support.getElementsByClassName = rnative.test(doc.getElementsByClassName);\n      support.getById = true;\n      Expr.find.ID = function (id, context) {\n        if (typeof context.getElementById !== strundefined && documentIsHTML) {\n          var m = context.getElementById(id);\n          return m && m.parentNode ? [m] : [];\n        }\n      };\n      Expr.filter.ID = function (id) {\n        var attrId = id.replace(runescape, funescape);\n        return function (elem) {\n          return elem.getAttribute('id') === attrId;\n        };\n      };\n      Expr.find.TAG = support.getElementsByTagName ? function (tag, context) {\n        if (typeof context.getElementsByTagName !== strundefined) {\n          return context.getElementsByTagName(tag);\n        }\n      } : function (tag, context) {\n        var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);\n        if (tag === '*') {\n          while (elem = results[i++]) {\n            if (elem.nodeType === 1) {\n              tmp.push(elem);\n            }\n          }\n          return tmp;\n        }\n        return results;\n      };\n      Expr.find.CLASS = support.getElementsByClassName && function (className, context) {\n        if (documentIsHTML) {\n          return context.getElementsByClassName(className);\n        }\n      };\n      rbuggyMatches = [];\n      rbuggyQSA = [];\n      support.disconnectedMatch = true;\n      rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join('|'));\n      rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join('|'));\n      hasCompare = rnative.test(docElem.compareDocumentPosition);\n      contains$1 = hasCompare || rnative.test(docElem.contains) ? function (a, b) {\n        var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;\n        return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));\n      } : function (a, b) {\n        if (b) {\n          while (b = b.parentNode) {\n            if (b === a) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n      sortOrder = hasCompare ? function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;\n        if (compare) {\n          return compare;\n        }\n        compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;\n        if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {\n          if (a === doc || a.ownerDocument === preferredDoc && contains$1(preferredDoc, a)) {\n            return -1;\n          }\n          if (b === doc || b.ownerDocument === preferredDoc && contains$1(preferredDoc, b)) {\n            return 1;\n          }\n          return sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        }\n        return compare & 4 ? -1 : 1;\n      } : function (a, b) {\n        if (a === b) {\n          hasDuplicate = true;\n          return 0;\n        }\n        var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [a], bp = [b];\n        if (!aup || !bup) {\n          return a === doc ? -1 : b === doc ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf$1.call(sortInput, a) - indexOf$1.call(sortInput, b) : 0;\n        } else if (aup === bup) {\n          return siblingCheck(a, b);\n        }\n        cur = a;\n        while (cur = cur.parentNode) {\n          ap.unshift(cur);\n        }\n        cur = b;\n        while (cur = cur.parentNode) {\n          bp.unshift(cur);\n        }\n        while (ap[i] === bp[i]) {\n          i++;\n        }\n        return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;\n      };\n      return doc;\n    };\n    Sizzle.matches = function (expr, elements) {\n      return Sizzle(expr, null, null, elements);\n    };\n    Sizzle.matchesSelector = function (elem, expr) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      expr = expr.replace(rattributeQuotes, '=\\'$1\\']');\n      if (support.matchesSelector && documentIsHTML && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {\n        try {\n          var ret = matches.call(elem, expr);\n          if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {\n            return ret;\n          }\n        } catch (e) {\n        }\n      }\n      return Sizzle(expr, document, null, [elem]).length > 0;\n    };\n    Sizzle.contains = function (context, elem) {\n      if ((context.ownerDocument || context) !== document) {\n        setDocument(context);\n      }\n      return contains$1(context, elem);\n    };\n    Sizzle.attr = function (elem, name) {\n      if ((elem.ownerDocument || elem) !== document) {\n        setDocument(elem);\n      }\n      var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;\n      return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;\n    };\n    Sizzle.error = function (msg) {\n      throw new Error('Syntax error, unrecognized expression: ' + msg);\n    };\n    Sizzle.uniqueSort = function (results) {\n      var elem, duplicates = [], j = 0, i = 0;\n      hasDuplicate = !support.detectDuplicates;\n      sortInput = !support.sortStable && results.slice(0);\n      results.sort(sortOrder);\n      if (hasDuplicate) {\n        while (elem = results[i++]) {\n          if (elem === results[i]) {\n            j = duplicates.push(i);\n          }\n        }\n        while (j--) {\n          results.splice(duplicates[j], 1);\n        }\n      }\n      sortInput = null;\n      return results;\n    };\n    getText = Sizzle.getText = function (elem) {\n      var node, ret = '', i = 0, nodeType = elem.nodeType;\n      if (!nodeType) {\n        while (node = elem[i++]) {\n          ret += getText(node);\n        }\n      } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {\n        if (typeof elem.textContent === 'string') {\n          return elem.textContent;\n        } else {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            ret += getText(elem);\n          }\n        }\n      } else if (nodeType === 3 || nodeType === 4) {\n        return elem.nodeValue;\n      }\n      return ret;\n    };\n    Expr = Sizzle.selectors = {\n      cacheLength: 50,\n      createPseudo: markFunction,\n      match: matchExpr,\n      attrHandle: {},\n      find: {},\n      relative: {\n        '>': {\n          dir: 'parentNode',\n          first: true\n        },\n        ' ': { dir: 'parentNode' },\n        '+': {\n          dir: 'previousSibling',\n          first: true\n        },\n        '~': { dir: 'previousSibling' }\n      },\n      preFilter: {\n        ATTR: function (match) {\n          match[1] = match[1].replace(runescape, funescape);\n          match[3] = (match[3] || match[4] || match[5] || '').replace(runescape, funescape);\n          if (match[2] === '~=') {\n            match[3] = ' ' + match[3] + ' ';\n          }\n          return match.slice(0, 4);\n        },\n        CHILD: function (match) {\n          match[1] = match[1].toLowerCase();\n          if (match[1].slice(0, 3) === 'nth') {\n            if (!match[3]) {\n              Sizzle.error(match[0]);\n            }\n            match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === 'even' || match[3] === 'odd'));\n            match[5] = +(match[7] + match[8] || match[3] === 'odd');\n          } else if (match[3]) {\n            Sizzle.error(match[0]);\n          }\n          return match;\n        },\n        PSEUDO: function (match) {\n          var excess, unquoted = !match[6] && match[2];\n          if (matchExpr.CHILD.test(match[0])) {\n            return null;\n          }\n          if (match[3]) {\n            match[2] = match[4] || match[5] || '';\n          } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(')', unquoted.length - excess) - unquoted.length)) {\n            match[0] = match[0].slice(0, excess);\n            match[2] = unquoted.slice(0, excess);\n          }\n          return match.slice(0, 3);\n        }\n      },\n      filter: {\n        TAG: function (nodeNameSelector) {\n          var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();\n          return nodeNameSelector === '*' ? function () {\n            return true;\n          } : function (elem) {\n            return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;\n          };\n        },\n        CLASS: function (className) {\n          var pattern = classCache[className + ' '];\n          return pattern || (pattern = new RegExp('(^|' + whitespace + ')' + className + '(' + whitespace + '|$)')) && classCache(className, function (elem) {\n            return pattern.test(typeof elem.className === 'string' && elem.className || typeof elem.getAttribute !== strundefined && elem.getAttribute('class') || '');\n          });\n        },\n        ATTR: function (name, operator, check) {\n          return function (elem) {\n            var result = Sizzle.attr(elem, name);\n            if (result == null) {\n              return operator === '!=';\n            }\n            if (!operator) {\n              return true;\n            }\n            result += '';\n            return operator === '=' ? result === check : operator === '!=' ? result !== check : operator === '^=' ? check && result.indexOf(check) === 0 : operator === '*=' ? check && result.indexOf(check) > -1 : operator === '$=' ? check && result.slice(-check.length) === check : operator === '~=' ? (' ' + result + ' ').indexOf(check) > -1 : operator === '|=' ? result === check || result.slice(0, check.length + 1) === check + '-' : false;\n          };\n        },\n        CHILD: function (type, what, argument, first, last) {\n          var simple = type.slice(0, 3) !== 'nth', forward = type.slice(-4) !== 'last', ofType = what === 'of-type';\n          return first === 1 && last === 0 ? function (elem) {\n            return !!elem.parentNode;\n          } : function (elem, context, xml) {\n            var cache, outerCache, node, diff, nodeIndex, start, dir = simple !== forward ? 'nextSibling' : 'previousSibling', parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType;\n            if (parent) {\n              if (simple) {\n                while (dir) {\n                  node = elem;\n                  while (node = node[dir]) {\n                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {\n                      return false;\n                    }\n                  }\n                  start = dir = type === 'only' && !start && 'nextSibling';\n                }\n                return true;\n              }\n              start = [forward ? parent.firstChild : parent.lastChild];\n              if (forward && useCache) {\n                outerCache = parent[expando] || (parent[expando] = {});\n                cache = outerCache[type] || [];\n                nodeIndex = cache[0] === dirruns && cache[1];\n                diff = cache[0] === dirruns && cache[2];\n                node = nodeIndex && parent.childNodes[nodeIndex];\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if (node.nodeType === 1 && ++diff && node === elem) {\n                    outerCache[type] = [\n                      dirruns,\n                      nodeIndex,\n                      diff\n                    ];\n                    break;\n                  }\n                }\n              } else if (useCache && (cache = (elem[expando] || (elem[expando] = {}))[type]) && cache[0] === dirruns) {\n                diff = cache[1];\n              } else {\n                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {\n                  if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {\n                    if (useCache) {\n                      (node[expando] || (node[expando] = {}))[type] = [\n                        dirruns,\n                        diff\n                      ];\n                    }\n                    if (node === elem) {\n                      break;\n                    }\n                  }\n                }\n              }\n              diff -= last;\n              return diff === first || diff % first === 0 && diff / first >= 0;\n            }\n          };\n        },\n        PSEUDO: function (pseudo, argument) {\n          var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error('unsupported pseudo: ' + pseudo);\n          if (fn[expando]) {\n            return fn(argument);\n          }\n          if (fn.length > 1) {\n            args = [\n              pseudo,\n              pseudo,\n              '',\n              argument\n            ];\n            return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function (seed, matches) {\n              var idx, matched = fn(seed, argument), i = matched.length;\n              while (i--) {\n                idx = indexOf$1.call(seed, matched[i]);\n                seed[idx] = !(matches[idx] = matched[i]);\n              }\n            }) : function (elem) {\n              return fn(elem, 0, args);\n            };\n          }\n          return fn;\n        }\n      },\n      pseudos: {\n        not: markFunction(function (selector) {\n          var input = [], results = [], matcher = compile(selector.replace(rtrim, '$1'));\n          return matcher[expando] ? markFunction(function (seed, matches, context, xml) {\n            var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;\n            while (i--) {\n              if (elem = unmatched[i]) {\n                seed[i] = !(matches[i] = elem);\n              }\n            }\n          }) : function (elem, context, xml) {\n            input[0] = elem;\n            matcher(input, null, xml, results);\n            return !results.pop();\n          };\n        }),\n        has: markFunction(function (selector) {\n          return function (elem) {\n            return Sizzle(selector, elem).length > 0;\n          };\n        }),\n        contains: markFunction(function (text) {\n          text = text.replace(runescape, funescape);\n          return function (elem) {\n            return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;\n          };\n        }),\n        lang: markFunction(function (lang) {\n          if (!ridentifier.test(lang || '')) {\n            Sizzle.error('unsupported lang: ' + lang);\n          }\n          lang = lang.replace(runescape, funescape).toLowerCase();\n          return function (elem) {\n            var elemLang;\n            do {\n              if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute('xml:lang') || elem.getAttribute('lang')) {\n                elemLang = elemLang.toLowerCase();\n                return elemLang === lang || elemLang.indexOf(lang + '-') === 0;\n              }\n            } while ((elem = elem.parentNode) && elem.nodeType === 1);\n            return false;\n          };\n        }),\n        target: function (elem) {\n          var hash = domGlobals.window.location && domGlobals.window.location.hash;\n          return hash && hash.slice(1) === elem.id;\n        },\n        root: function (elem) {\n          return elem === docElem;\n        },\n        focus: function (elem) {\n          return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);\n        },\n        enabled: function (elem) {\n          return elem.disabled === false;\n        },\n        disabled: function (elem) {\n          return elem.disabled === true;\n        },\n        checked: function (elem) {\n          var nodeName = elem.nodeName.toLowerCase();\n          return nodeName === 'input' && !!elem.checked || nodeName === 'option' && !!elem.selected;\n        },\n        selected: function (elem) {\n          if (elem.parentNode) {\n            elem.parentNode.selectedIndex;\n          }\n          return elem.selected === true;\n        },\n        empty: function (elem) {\n          for (elem = elem.firstChild; elem; elem = elem.nextSibling) {\n            if (elem.nodeType < 6) {\n              return false;\n            }\n          }\n          return true;\n        },\n        parent: function (elem) {\n          return !Expr.pseudos.empty(elem);\n        },\n        header: function (elem) {\n          return rheader.test(elem.nodeName);\n        },\n        input: function (elem) {\n          return rinputs.test(elem.nodeName);\n        },\n        button: function (elem) {\n          var name = elem.nodeName.toLowerCase();\n          return name === 'input' && elem.type === 'button' || name === 'button';\n        },\n        text: function (elem) {\n          var attr;\n          return elem.nodeName.toLowerCase() === 'input' && elem.type === 'text' && ((attr = elem.getAttribute('type')) == null || attr.toLowerCase() === 'text');\n        },\n        first: createPositionalPseudo(function () {\n          return [0];\n        }),\n        last: createPositionalPseudo(function (matchIndexes, length) {\n          return [length - 1];\n        }),\n        eq: createPositionalPseudo(function (matchIndexes, length, argument) {\n          return [argument < 0 ? argument + length : argument];\n        }),\n        even: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 0;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        odd: createPositionalPseudo(function (matchIndexes, length) {\n          var i = 1;\n          for (; i < length; i += 2) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        lt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; --i >= 0;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        }),\n        gt: createPositionalPseudo(function (matchIndexes, length, argument) {\n          var i = argument < 0 ? argument + length : argument;\n          for (; ++i < length;) {\n            matchIndexes.push(i);\n          }\n          return matchIndexes;\n        })\n      }\n    };\n    Expr.pseudos.nth = Expr.pseudos.eq;\n    for (i in {\n        radio: true,\n        checkbox: true,\n        file: true,\n        password: true,\n        image: true\n      }) {\n      Expr.pseudos[i] = createInputPseudo(i);\n    }\n    for (i in {\n        submit: true,\n        reset: true\n      }) {\n      Expr.pseudos[i] = createButtonPseudo(i);\n    }\n    function setFilters() {\n    }\n    setFilters.prototype = Expr.filters = Expr.pseudos;\n    Expr.setFilters = new setFilters();\n    tokenize = Sizzle.tokenize = function (selector, parseOnly) {\n      var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + ' '];\n      if (cached) {\n        return parseOnly ? 0 : cached.slice(0);\n      }\n      soFar = selector;\n      groups = [];\n      preFilters = Expr.preFilter;\n      while (soFar) {\n        if (!matched || (match = rcomma.exec(soFar))) {\n          if (match) {\n            soFar = soFar.slice(match[0].length) || soFar;\n          }\n          groups.push(tokens = []);\n        }\n        matched = false;\n        if (match = rcombinators.exec(soFar)) {\n          matched = match.shift();\n          tokens.push({\n            value: matched,\n            type: match[0].replace(rtrim, ' ')\n          });\n          soFar = soFar.slice(matched.length);\n        }\n        for (type in Expr.filter) {\n          if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {\n            matched = match.shift();\n            tokens.push({\n              value: matched,\n              type: type,\n              matches: match\n            });\n            soFar = soFar.slice(matched.length);\n          }\n        }\n        if (!matched) {\n          break;\n        }\n      }\n      return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);\n    };\n    function toSelector(tokens) {\n      var i = 0, len = tokens.length, selector = '';\n      for (; i < len; i++) {\n        selector += tokens[i].value;\n      }\n      return selector;\n    }\n    function addCombinator(matcher, combinator, base) {\n      var dir = combinator.dir, checkNonElements = base && dir === 'parentNode', doneName = done++;\n      return combinator.first ? function (elem, context, xml) {\n        while (elem = elem[dir]) {\n          if (elem.nodeType === 1 || checkNonElements) {\n            return matcher(elem, context, xml);\n          }\n        }\n      } : function (elem, context, xml) {\n        var oldCache, outerCache, newCache = [\n            dirruns,\n            doneName\n          ];\n        if (xml) {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              if (matcher(elem, context, xml)) {\n                return true;\n              }\n            }\n          }\n        } else {\n          while (elem = elem[dir]) {\n            if (elem.nodeType === 1 || checkNonElements) {\n              outerCache = elem[expando] || (elem[expando] = {});\n              if ((oldCache = outerCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {\n                return newCache[2] = oldCache[2];\n              } else {\n                outerCache[dir] = newCache;\n                if (newCache[2] = matcher(elem, context, xml)) {\n                  return true;\n                }\n              }\n            }\n          }\n        }\n      };\n    }\n    function elementMatcher(matchers) {\n      return matchers.length > 1 ? function (elem, context, xml) {\n        var i = matchers.length;\n        while (i--) {\n          if (!matchers[i](elem, context, xml)) {\n            return false;\n          }\n        }\n        return true;\n      } : matchers[0];\n    }\n    function multipleContexts(selector, contexts, results) {\n      var i = 0, len = contexts.length;\n      for (; i < len; i++) {\n        Sizzle(selector, contexts[i], results);\n      }\n      return results;\n    }\n    function condense(unmatched, map, filter, context, xml) {\n      var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;\n      for (; i < len; i++) {\n        if (elem = unmatched[i]) {\n          if (!filter || filter(elem, context, xml)) {\n            newUnmatched.push(elem);\n            if (mapped) {\n              map.push(i);\n            }\n          }\n        }\n      }\n      return newUnmatched;\n    }\n    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {\n      if (postFilter && !postFilter[expando]) {\n        postFilter = setMatcher(postFilter);\n      }\n      if (postFinder && !postFinder[expando]) {\n        postFinder = setMatcher(postFinder, postSelector);\n      }\n      return markFunction(function (seed, results, context, xml) {\n        var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || '*', context.nodeType ? [context] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;\n        if (matcher) {\n          matcher(matcherIn, matcherOut, context, xml);\n        }\n        if (postFilter) {\n          temp = condense(matcherOut, postMap);\n          postFilter(temp, [], context, xml);\n          i = temp.length;\n          while (i--) {\n            if (elem = temp[i]) {\n              matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);\n            }\n          }\n        }\n        if (seed) {\n          if (postFinder || preFilter) {\n            if (postFinder) {\n              temp = [];\n              i = matcherOut.length;\n              while (i--) {\n                if (elem = matcherOut[i]) {\n                  temp.push(matcherIn[i] = elem);\n                }\n              }\n              postFinder(null, matcherOut = [], temp, xml);\n            }\n            i = matcherOut.length;\n            while (i--) {\n              if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf$1.call(seed, elem) : preMap[i]) > -1) {\n                seed[temp] = !(results[temp] = elem);\n              }\n            }\n          }\n        } else {\n          matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);\n          if (postFinder) {\n            postFinder(null, results, matcherOut, xml);\n          } else {\n            push$1.apply(results, matcherOut);\n          }\n        }\n      });\n    }\n    function matcherFromTokens(tokens) {\n      var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[' '], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function (elem) {\n          return elem === checkContext;\n        }, implicitRelative, true), matchAnyContext = addCombinator(function (elem) {\n          return indexOf$1.call(checkContext, elem) > -1;\n        }, implicitRelative, true), matchers = [function (elem, context, xml) {\n            return !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));\n          }];\n      for (; i < len; i++) {\n        if (matcher = Expr.relative[tokens[i].type]) {\n          matchers = [addCombinator(elementMatcher(matchers), matcher)];\n        } else {\n          matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);\n          if (matcher[expando]) {\n            j = ++i;\n            for (; j < len; j++) {\n              if (Expr.relative[tokens[j].type]) {\n                break;\n              }\n            }\n            return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({ value: tokens[i - 2].type === ' ' ? '*' : '' })).replace(rtrim, '$1'), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));\n          }\n          matchers.push(matcher);\n        }\n      }\n      return elementMatcher(matchers);\n    }\n    function matcherFromGroupMatchers(elementMatchers, setMatchers) {\n      var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function (seed, context, xml, results, outermost) {\n          var elem, j, matcher, matchedCount = 0, i = '0', unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find.TAG('*', outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || 0.1, len = elems.length;\n          if (outermost) {\n            outermostContext = context !== document && context;\n          }\n          for (; i !== len && (elem = elems[i]) != null; i++) {\n            if (byElement && elem) {\n              j = 0;\n              while (matcher = elementMatchers[j++]) {\n                if (matcher(elem, context, xml)) {\n                  results.push(elem);\n                  break;\n                }\n              }\n              if (outermost) {\n                dirruns = dirrunsUnique;\n              }\n            }\n            if (bySet) {\n              if (elem = !matcher && elem) {\n                matchedCount--;\n              }\n              if (seed) {\n                unmatched.push(elem);\n              }\n            }\n          }\n          matchedCount += i;\n          if (bySet && i !== matchedCount) {\n            j = 0;\n            while (matcher = setMatchers[j++]) {\n              matcher(unmatched, setMatched, context, xml);\n            }\n            if (seed) {\n              if (matchedCount > 0) {\n                while (i--) {\n                  if (!(unmatched[i] || setMatched[i])) {\n                    setMatched[i] = pop.call(results);\n                  }\n                }\n              }\n              setMatched = condense(setMatched);\n            }\n            push$1.apply(results, setMatched);\n            if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {\n              Sizzle.uniqueSort(results);\n            }\n          }\n          if (outermost) {\n            dirruns = dirrunsUnique;\n            outermostContext = contextBackup;\n          }\n          return unmatched;\n        };\n      return bySet ? markFunction(superMatcher) : superMatcher;\n    }\n    compile = Sizzle.compile = function (selector, match) {\n      var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + ' '];\n      if (!cached) {\n        if (!match) {\n          match = tokenize(selector);\n        }\n        i = match.length;\n        while (i--) {\n          cached = matcherFromTokens(match[i]);\n          if (cached[expando]) {\n            setMatchers.push(cached);\n          } else {\n            elementMatchers.push(cached);\n          }\n        }\n        cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));\n        cached.selector = selector;\n      }\n      return cached;\n    };\n    select = Sizzle.select = function (selector, context, results, seed) {\n      var i, tokens, token, type, find, compiled = typeof selector === 'function' && selector, match = !seed && tokenize(selector = compiled.selector || selector);\n      results = results || [];\n      if (match.length === 1) {\n        tokens = match[0] = match[0].slice(0);\n        if (tokens.length > 2 && (token = tokens[0]).type === 'ID' && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {\n          context = (Expr.find.ID(token.matches[0].replace(runescape, funescape), context) || [])[0];\n          if (!context) {\n            return results;\n          } else if (compiled) {\n            context = context.parentNode;\n          }\n          selector = selector.slice(tokens.shift().value.length);\n        }\n        i = matchExpr.needsContext.test(selector) ? 0 : tokens.length;\n        while (i--) {\n          token = tokens[i];\n          if (Expr.relative[type = token.type]) {\n            break;\n          }\n          if (find = Expr.find[type]) {\n            if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {\n              tokens.splice(i, 1);\n              selector = seed.length && toSelector(tokens);\n              if (!selector) {\n                push$1.apply(results, seed);\n                return results;\n              }\n              break;\n            }\n          }\n        }\n      }\n      (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, rsibling.test(selector) && testContext(context.parentNode) || context);\n      return results;\n    };\n    support.sortStable = expando.split('').sort(sortOrder).join('') === expando;\n    support.detectDuplicates = !!hasDuplicate;\n    setDocument();\n    support.sortDetached = true;\n\n    var isArray$1 = Array.isArray;\n    var toArray = function (obj) {\n      var array = obj, i, l;\n      if (!isArray$1(obj)) {\n        array = [];\n        for (i = 0, l = obj.length; i < l; i++) {\n          array[i] = obj[i];\n        }\n      }\n      return array;\n    };\n    var each$1 = function (o, cb, s) {\n      var n, l;\n      if (!o) {\n        return 0;\n      }\n      s = s || o;\n      if (o.length !== undefined) {\n        for (n = 0, l = o.length; n < l; n++) {\n          if (cb.call(s, o[n], n, o) === false) {\n            return 0;\n          }\n        }\n      } else {\n        for (n in o) {\n          if (o.hasOwnProperty(n)) {\n            if (cb.call(s, o[n], n, o) === false) {\n              return 0;\n            }\n          }\n        }\n      }\n      return 1;\n    };\n    var map$1 = function (array, callback) {\n      var out = [];\n      each$1(array, function (item, index) {\n        out.push(callback(item, index, array));\n      });\n      return out;\n    };\n    var filter$1 = function (a, f) {\n      var o = [];\n      each$1(a, function (v, index) {\n        if (!f || f(v, index, a)) {\n          o.push(v);\n        }\n      });\n      return o;\n    };\n    var indexOf$2 = function (a, v) {\n      var i, l;\n      if (a) {\n        for (i = 0, l = a.length; i < l; i++) {\n          if (a[i] === v) {\n            return i;\n          }\n        }\n      }\n      return -1;\n    };\n    var reduce = function (collection, iteratee, accumulator, thisArg) {\n      var i = 0;\n      if (arguments.length < 3) {\n        accumulator = collection[0];\n      }\n      for (; i < collection.length; i++) {\n        accumulator = iteratee.call(thisArg, accumulator, collection[i], i);\n      }\n      return accumulator;\n    };\n    var findIndex$1 = function (array, predicate, thisArg) {\n      var i, l;\n      for (i = 0, l = array.length; i < l; i++) {\n        if (predicate.call(thisArg, array[i], i, array)) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var find$1 = function (array, predicate, thisArg) {\n      var idx = findIndex$1(array, predicate, thisArg);\n      if (idx !== -1) {\n        return array[idx];\n      }\n      return undefined;\n    };\n    var last$1 = function (collection) {\n      return collection[collection.length - 1];\n    };\n    var ArrUtils = {\n      isArray: isArray$1,\n      toArray: toArray,\n      each: each$1,\n      map: map$1,\n      filter: filter$1,\n      indexOf: indexOf$2,\n      reduce: reduce,\n      findIndex: findIndex$1,\n      find: find$1,\n      last: last$1\n    };\n\n    var whiteSpaceRegExp = /^\\s*|\\s*$/g;\n    var trim = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp, '');\n    };\n    var is = function (obj, type) {\n      if (!type) {\n        return obj !== undefined;\n      }\n      if (type === 'array' && ArrUtils.isArray(obj)) {\n        return true;\n      }\n      return typeof obj === type;\n    };\n    var makeMap = function (items, delim, map) {\n      var i;\n      items = items || [];\n      delim = delim || ',';\n      if (typeof items === 'string') {\n        items = items.split(delim);\n      }\n      map = map || {};\n      i = items.length;\n      while (i--) {\n        map[items[i]] = {};\n      }\n      return map;\n    };\n    var hasOwnProperty = function (obj, prop) {\n      return Object.prototype.hasOwnProperty.call(obj, prop);\n    };\n    var create = function (s, p, root) {\n      var self = this;\n      var sp, ns, cn, scn, c, de = 0;\n      s = /^((static) )?([\\w.]+)(:([\\w.]+))?/.exec(s);\n      cn = s[3].match(/(^|\\.)(\\w+)$/i)[2];\n      ns = self.createNS(s[3].replace(/\\.\\w+$/, ''), root);\n      if (ns[cn]) {\n        return;\n      }\n      if (s[2] === 'static') {\n        ns[cn] = p;\n        if (this.onCreate) {\n          this.onCreate(s[2], s[3], ns[cn]);\n        }\n        return;\n      }\n      if (!p[cn]) {\n        p[cn] = function () {\n        };\n        de = 1;\n      }\n      ns[cn] = p[cn];\n      self.extend(ns[cn].prototype, p);\n      if (s[5]) {\n        sp = self.resolve(s[5]).prototype;\n        scn = s[5].match(/\\.(\\w+)$/i)[1];\n        c = ns[cn];\n        if (de) {\n          ns[cn] = function () {\n            return sp[scn].apply(this, arguments);\n          };\n        } else {\n          ns[cn] = function () {\n            this.parent = sp[scn];\n            return c.apply(this, arguments);\n          };\n        }\n        ns[cn].prototype[cn] = ns[cn];\n        self.each(sp, function (f, n) {\n          ns[cn].prototype[n] = sp[n];\n        });\n        self.each(p, function (f, n) {\n          if (sp[n]) {\n            ns[cn].prototype[n] = function () {\n              this.parent = sp[n];\n              return f.apply(this, arguments);\n            };\n          } else {\n            if (n !== cn) {\n              ns[cn].prototype[n] = f;\n            }\n          }\n        });\n      }\n      self.each(p.static, function (f, n) {\n        ns[cn][n] = f;\n      });\n    };\n    var extend = function (obj, ext) {\n      var x = [];\n      for (var _i = 2; _i < arguments.length; _i++) {\n        x[_i - 2] = arguments[_i];\n      }\n      var i, l, name;\n      var args = arguments;\n      var value;\n      for (i = 1, l = args.length; i < l; i++) {\n        ext = args[i];\n        for (name in ext) {\n          if (ext.hasOwnProperty(name)) {\n            value = ext[name];\n            if (value !== undefined) {\n              obj[name] = value;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var walk = function (o, f, n, s) {\n      s = s || this;\n      if (o) {\n        if (n) {\n          o = o[n];\n        }\n        ArrUtils.each(o, function (o, i) {\n          if (f.call(s, o, i, n) === false) {\n            return false;\n          }\n          walk(o, f, n, s);\n        });\n      }\n    };\n    var createNS = function (n, o) {\n      var i, v;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0; i < n.length; i++) {\n        v = n[i];\n        if (!o[v]) {\n          o[v] = {};\n        }\n        o = o[v];\n      }\n      return o;\n    };\n    var resolve$1 = function (n, o) {\n      var i, l;\n      o = o || domGlobals.window;\n      n = n.split('.');\n      for (i = 0, l = n.length; i < l; i++) {\n        o = o[n[i]];\n        if (!o) {\n          break;\n        }\n      }\n      return o;\n    };\n    var explode = function (s, d) {\n      if (!s || is(s, 'array')) {\n        return s;\n      }\n      return ArrUtils.map(s.split(d || ','), trim);\n    };\n    var _addCacheSuffix = function (url) {\n      var cacheSuffix = Env.cacheSuffix;\n      if (cacheSuffix) {\n        url += (url.indexOf('?') === -1 ? '?' : '&') + cacheSuffix;\n      }\n      return url;\n    };\n    var Tools = {\n      trim: trim,\n      isArray: ArrUtils.isArray,\n      is: is,\n      toArray: ArrUtils.toArray,\n      makeMap: makeMap,\n      each: ArrUtils.each,\n      map: ArrUtils.map,\n      grep: ArrUtils.filter,\n      inArray: ArrUtils.indexOf,\n      hasOwn: hasOwnProperty,\n      extend: extend,\n      create: create,\n      walk: walk,\n      createNS: createNS,\n      resolve: resolve$1,\n      explode: explode,\n      _addCacheSuffix: _addCacheSuffix\n    };\n\n    var doc = domGlobals.document, push$2 = Array.prototype.push, slice$2 = Array.prototype.slice;\n    var rquickExpr$1 = /^(?:[^#<]*(<[\\w\\W]+>)[^>]*$|#([\\w\\-]*)$)/;\n    var Event = EventUtils.Event;\n    var skipUniques = Tools.makeMap('children,contents,next,prev');\n    var isDefined = function (obj) {\n      return typeof obj !== 'undefined';\n    };\n    var isString$1 = function (obj) {\n      return typeof obj === 'string';\n    };\n    var isWindow = function (obj) {\n      return obj && obj === obj.window;\n    };\n    var createFragment = function (html, fragDoc) {\n      var frag, node, container;\n      fragDoc = fragDoc || doc;\n      container = fragDoc.createElement('div');\n      frag = fragDoc.createDocumentFragment();\n      container.innerHTML = html;\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var domManipulate = function (targetNodes, sourceItem, callback, reverse) {\n      var i;\n      if (isString$1(sourceItem)) {\n        sourceItem = createFragment(sourceItem, getElementDocument(targetNodes[0]));\n      } else if (sourceItem.length && !sourceItem.nodeType) {\n        sourceItem = DomQuery.makeArray(sourceItem);\n        if (reverse) {\n          for (i = sourceItem.length - 1; i >= 0; i--) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        } else {\n          for (i = 0; i < sourceItem.length; i++) {\n            domManipulate(targetNodes, sourceItem[i], callback, reverse);\n          }\n        }\n        return targetNodes;\n      }\n      if (sourceItem.nodeType) {\n        i = targetNodes.length;\n        while (i--) {\n          callback.call(targetNodes[i], sourceItem);\n        }\n      }\n      return targetNodes;\n    };\n    var hasClass = function (node, className) {\n      return node && className && (' ' + node.className + ' ').indexOf(' ' + className + ' ') !== -1;\n    };\n    var wrap = function (elements, wrapper, all) {\n      var lastParent, newWrapper;\n      wrapper = DomQuery(wrapper)[0];\n      elements.each(function () {\n        var self = this;\n        if (!all || lastParent !== self.parentNode) {\n          lastParent = self.parentNode;\n          newWrapper = wrapper.cloneNode(false);\n          self.parentNode.insertBefore(newWrapper, self);\n          newWrapper.appendChild(self);\n        } else {\n          newWrapper.appendChild(self);\n        }\n      });\n      return elements;\n    };\n    var numericCssMap = Tools.makeMap('fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom', ' ');\n    var booleanMap = Tools.makeMap('checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected', ' ');\n    var propFix = {\n      for: 'htmlFor',\n      class: 'className',\n      readonly: 'readOnly'\n    };\n    var cssFix = { float: 'cssFloat' };\n    var attrHooks = {}, cssHooks = {};\n    var DomQuery = function (selector, context) {\n      return new DomQuery.fn.init(selector, context);\n    };\n    var inArray = function (item, array) {\n      var i;\n      if (array.indexOf) {\n        return array.indexOf(item);\n      }\n      i = array.length;\n      while (i--) {\n        if (array[i] === item) {\n          return i;\n        }\n      }\n      return -1;\n    };\n    var whiteSpaceRegExp$1 = /^\\s*|\\s*$/g;\n    var trim$1 = function (str) {\n      return str === null || str === undefined ? '' : ('' + str).replace(whiteSpaceRegExp$1, '');\n    };\n    var each$2 = function (obj, callback) {\n      var length, key, i, value;\n      if (obj) {\n        length = obj.length;\n        if (length === undefined) {\n          for (key in obj) {\n            if (obj.hasOwnProperty(key)) {\n              value = obj[key];\n              if (callback.call(value, key, value) === false) {\n                break;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < length; i++) {\n            value = obj[i];\n            if (callback.call(value, i, value) === false) {\n              break;\n            }\n          }\n        }\n      }\n      return obj;\n    };\n    var grep = function (array, callback) {\n      var out = [];\n      each$2(array, function (i, item) {\n        if (callback(item, i)) {\n          out.push(item);\n        }\n      });\n      return out;\n    };\n    var getElementDocument = function (element) {\n      if (!element) {\n        return doc;\n      }\n      if (element.nodeType === 9) {\n        return element;\n      }\n      return element.ownerDocument;\n    };\n    DomQuery.fn = DomQuery.prototype = {\n      constructor: DomQuery,\n      selector: '',\n      context: null,\n      length: 0,\n      init: function (selector, context) {\n        var self = this;\n        var match, node;\n        if (!selector) {\n          return self;\n        }\n        if (selector.nodeType) {\n          self.context = self[0] = selector;\n          self.length = 1;\n          return self;\n        }\n        if (context && context.nodeType) {\n          self.context = context;\n        } else {\n          if (context) {\n            return DomQuery(selector).attr(context);\n          }\n          self.context = context = domGlobals.document;\n        }\n        if (isString$1(selector)) {\n          self.selector = selector;\n          if (selector.charAt(0) === '<' && selector.charAt(selector.length - 1) === '>' && selector.length >= 3) {\n            match = [\n              null,\n              selector,\n              null\n            ];\n          } else {\n            match = rquickExpr$1.exec(selector);\n          }\n          if (match) {\n            if (match[1]) {\n              node = createFragment(selector, getElementDocument(context)).firstChild;\n              while (node) {\n                push$2.call(self, node);\n                node = node.nextSibling;\n              }\n            } else {\n              node = getElementDocument(context).getElementById(match[2]);\n              if (!node) {\n                return self;\n              }\n              if (node.id !== match[2]) {\n                return self.find(selector);\n              }\n              self.length = 1;\n              self[0] = node;\n            }\n          } else {\n            return DomQuery(context).find(selector);\n          }\n        } else {\n          this.add(selector, false);\n        }\n        return self;\n      },\n      toArray: function () {\n        return Tools.toArray(this);\n      },\n      add: function (items, sort) {\n        var self = this;\n        var nodes, i;\n        if (isString$1(items)) {\n          return self.add(DomQuery(items));\n        }\n        if (sort !== false) {\n          nodes = DomQuery.unique(self.toArray().concat(DomQuery.makeArray(items)));\n          self.length = nodes.length;\n          for (i = 0; i < nodes.length; i++) {\n            self[i] = nodes[i];\n          }\n        } else {\n          push$2.apply(self, DomQuery.makeArray(items));\n        }\n        return self;\n      },\n      attr: function (name, value) {\n        var self = this;\n        var hook;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.attr(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            var hook;\n            if (this.nodeType === 1) {\n              hook = attrHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              if (value === null) {\n                this.removeAttribute(name, 2);\n              } else {\n                this.setAttribute(name, value, 2);\n              }\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType === 1) {\n            hook = attrHooks[name];\n            if (hook && hook.get) {\n              return hook.get(self[0], name);\n            }\n            if (booleanMap[name]) {\n              return self.prop(name) ? name : undefined;\n            }\n            value = self[0].getAttribute(name, 2);\n            if (value === null) {\n              value = undefined;\n            }\n          }\n          return value;\n        }\n        return self;\n      },\n      removeAttr: function (name) {\n        return this.attr(name, null);\n      },\n      prop: function (name, value) {\n        var self = this;\n        name = propFix[name] || name;\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.prop(name, value);\n          });\n        } else if (isDefined(value)) {\n          this.each(function () {\n            if (this.nodeType === 1) {\n              this[name] = value;\n            }\n          });\n        } else {\n          if (self[0] && self[0].nodeType && name in self[0]) {\n            return self[0][name];\n          }\n          return value;\n        }\n        return self;\n      },\n      css: function (name, value) {\n        var self = this;\n        var elm, hook;\n        var camel = function (name) {\n          return name.replace(/-(\\D)/g, function (a, b) {\n            return b.toUpperCase();\n          });\n        };\n        var dashed = function (name) {\n          return name.replace(/[A-Z]/g, function (a) {\n            return '-' + a;\n          });\n        };\n        if (typeof name === 'object') {\n          each$2(name, function (name, value) {\n            self.css(name, value);\n          });\n        } else {\n          if (isDefined(value)) {\n            name = camel(name);\n            if (typeof value === 'number' && !numericCssMap[name]) {\n              value = value.toString() + 'px';\n            }\n            self.each(function () {\n              var style = this.style;\n              hook = cssHooks[name];\n              if (hook && hook.set) {\n                hook.set(this, value);\n                return;\n              }\n              try {\n                this.style[cssFix[name] || name] = value;\n              } catch (ex) {\n              }\n              if (value === null || value === '') {\n                if (style.removeProperty) {\n                  style.removeProperty(dashed(name));\n                } else {\n                  style.removeAttribute(name);\n                }\n              }\n            });\n          } else {\n            elm = self[0];\n            hook = cssHooks[name];\n            if (hook && hook.get) {\n              return hook.get(elm);\n            }\n            if (elm.ownerDocument.defaultView) {\n              try {\n                return elm.ownerDocument.defaultView.getComputedStyle(elm, null).getPropertyValue(dashed(name));\n              } catch (ex) {\n                return undefined;\n              }\n            } else if (elm.currentStyle) {\n              return elm.currentStyle[camel(name)];\n            } else {\n              return '';\n            }\n          }\n        }\n        return self;\n      },\n      remove: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          Event.clean(node);\n          if (node.parentNode) {\n            node.parentNode.removeChild(node);\n          }\n        }\n        return this;\n      },\n      empty: function () {\n        var self = this;\n        var node, i = this.length;\n        while (i--) {\n          node = self[i];\n          while (node.firstChild) {\n            node.removeChild(node.firstChild);\n          }\n        }\n        return this;\n      },\n      html: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          try {\n            while (i--) {\n              self[i].innerHTML = value;\n            }\n          } catch (ex) {\n            DomQuery(self[i]).empty().append(value);\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerHTML : '';\n      },\n      text: function (value) {\n        var self = this;\n        var i;\n        if (isDefined(value)) {\n          i = self.length;\n          while (i--) {\n            if ('innerText' in self[i]) {\n              self[i].innerText = value;\n            } else {\n              self[0].textContent = value;\n            }\n          }\n          return self;\n        }\n        return self[0] ? self[0].innerText || self[0].textContent : '';\n      },\n      append: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.appendChild(node);\n          }\n        });\n      },\n      prepend: function () {\n        return domManipulate(this, arguments, function (node) {\n          if (this.nodeType === 1 || this.host && this.host.nodeType === 1) {\n            this.insertBefore(node, this.firstChild);\n          }\n        }, true);\n      },\n      before: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this);\n          });\n        }\n        return self;\n      },\n      after: function () {\n        var self = this;\n        if (self[0] && self[0].parentNode) {\n          return domManipulate(self, arguments, function (node) {\n            this.parentNode.insertBefore(node, this.nextSibling);\n          }, true);\n        }\n        return self;\n      },\n      appendTo: function (val) {\n        DomQuery(val).append(this);\n        return this;\n      },\n      prependTo: function (val) {\n        DomQuery(val).prepend(this);\n        return this;\n      },\n      replaceWith: function (content) {\n        return this.before(content).remove();\n      },\n      wrap: function (content) {\n        return wrap(this, content);\n      },\n      wrapAll: function (content) {\n        return wrap(this, content, true);\n      },\n      wrapInner: function (content) {\n        this.each(function () {\n          DomQuery(this).contents().wrapAll(content);\n        });\n        return this;\n      },\n      unwrap: function () {\n        return this.parent().each(function () {\n          DomQuery(this).replaceWith(this.childNodes);\n        });\n      },\n      clone: function () {\n        var result = [];\n        this.each(function () {\n          result.push(this.cloneNode(true));\n        });\n        return DomQuery(result);\n      },\n      addClass: function (className) {\n        return this.toggleClass(className, true);\n      },\n      removeClass: function (className) {\n        return this.toggleClass(className, false);\n      },\n      toggleClass: function (className, state) {\n        var self = this;\n        if (typeof className !== 'string') {\n          return self;\n        }\n        if (className.indexOf(' ') !== -1) {\n          each$2(className.split(' '), function () {\n            self.toggleClass(this, state);\n          });\n        } else {\n          self.each(function (index, node) {\n            var existingClassName, classState;\n            classState = hasClass(node, className);\n            if (classState !== state) {\n              existingClassName = node.className;\n              if (classState) {\n                node.className = trim$1((' ' + existingClassName + ' ').replace(' ' + className + ' ', ' '));\n              } else {\n                node.className += existingClassName ? ' ' + className : className;\n              }\n            }\n          });\n        }\n        return self;\n      },\n      hasClass: function (className) {\n        return hasClass(this[0], className);\n      },\n      each: function (callback) {\n        return each$2(this, callback);\n      },\n      on: function (name, callback) {\n        return this.each(function () {\n          Event.bind(this, name, callback);\n        });\n      },\n      off: function (name, callback) {\n        return this.each(function () {\n          Event.unbind(this, name, callback);\n        });\n      },\n      trigger: function (name) {\n        return this.each(function () {\n          if (typeof name === 'object') {\n            Event.fire(this, name.type, name);\n          } else {\n            Event.fire(this, name);\n          }\n        });\n      },\n      show: function () {\n        return this.css('display', '');\n      },\n      hide: function () {\n        return this.css('display', 'none');\n      },\n      slice: function () {\n        return new DomQuery(slice$2.apply(this, arguments));\n      },\n      eq: function (index) {\n        return index === -1 ? this.slice(index) : this.slice(index, +index + 1);\n      },\n      first: function () {\n        return this.eq(0);\n      },\n      last: function () {\n        return this.eq(-1);\n      },\n      find: function (selector) {\n        var i, l;\n        var ret = [];\n        for (i = 0, l = this.length; i < l; i++) {\n          DomQuery.find(selector, this[i], ret);\n        }\n        return DomQuery(ret);\n      },\n      filter: function (selector) {\n        if (typeof selector === 'function') {\n          return DomQuery(grep(this.toArray(), function (item, i) {\n            return selector(i, item);\n          }));\n        }\n        return DomQuery(DomQuery.filter(selector, this.toArray()));\n      },\n      closest: function (selector) {\n        var result = [];\n        if (selector instanceof DomQuery) {\n          selector = selector[0];\n        }\n        this.each(function (i, node) {\n          while (node) {\n            if (typeof selector === 'string' && DomQuery(node).is(selector)) {\n              result.push(node);\n              break;\n            } else if (node === selector) {\n              result.push(node);\n              break;\n            }\n            node = node.parentNode;\n          }\n        });\n        return DomQuery(result);\n      },\n      offset: function (offset) {\n        var elm, doc, docElm;\n        var x = 0, y = 0, pos;\n        if (!offset) {\n          elm = this[0];\n          if (elm) {\n            doc = elm.ownerDocument;\n            docElm = doc.documentElement;\n            if (elm.getBoundingClientRect) {\n              pos = elm.getBoundingClientRect();\n              x = pos.left + (docElm.scrollLeft || doc.body.scrollLeft) - docElm.clientLeft;\n              y = pos.top + (docElm.scrollTop || doc.body.scrollTop) - docElm.clientTop;\n            }\n          }\n          return {\n            left: x,\n            top: y\n          };\n        }\n        return this.css(offset);\n      },\n      push: push$2,\n      sort: [].sort,\n      splice: [].splice\n    };\n    Tools.extend(DomQuery, {\n      extend: Tools.extend,\n      makeArray: function (object) {\n        if (isWindow(object) || object.nodeType) {\n          return [object];\n        }\n        return Tools.toArray(object);\n      },\n      inArray: inArray,\n      isArray: Tools.isArray,\n      each: each$2,\n      trim: trim$1,\n      grep: grep,\n      find: Sizzle,\n      expr: Sizzle.selectors,\n      unique: Sizzle.uniqueSort,\n      text: Sizzle.getText,\n      contains: Sizzle.contains,\n      filter: function (expr, elems, not) {\n        var i = elems.length;\n        if (not) {\n          expr = ':not(' + expr + ')';\n        }\n        while (i--) {\n          if (elems[i].nodeType !== 1) {\n            elems.splice(i, 1);\n          }\n        }\n        if (elems.length === 1) {\n          elems = DomQuery.find.matchesSelector(elems[0], expr) ? [elems[0]] : [];\n        } else {\n          elems = DomQuery.find.matches(expr, elems);\n        }\n        return elems;\n      }\n    });\n    var dir = function (el, prop, until) {\n      var matched = [];\n      var cur = el[prop];\n      if (typeof until !== 'string' && until instanceof DomQuery) {\n        until = until[0];\n      }\n      while (cur && cur.nodeType !== 9) {\n        if (until !== undefined) {\n          if (cur === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(cur).is(until)) {\n            break;\n          }\n        }\n        if (cur.nodeType === 1) {\n          matched.push(cur);\n        }\n        cur = cur[prop];\n      }\n      return matched;\n    };\n    var sibling = function (node, siblingName, nodeType, until) {\n      var result = [];\n      if (until instanceof DomQuery) {\n        until = until[0];\n      }\n      for (; node; node = node[siblingName]) {\n        if (nodeType && node.nodeType !== nodeType) {\n          continue;\n        }\n        if (until !== undefined) {\n          if (node === until) {\n            break;\n          }\n          if (typeof until === 'string' && DomQuery(node).is(until)) {\n            break;\n          }\n        }\n        result.push(node);\n      }\n      return result;\n    };\n    var firstSibling = function (node, siblingName, nodeType) {\n      for (node = node[siblingName]; node; node = node[siblingName]) {\n        if (node.nodeType === nodeType) {\n          return node;\n        }\n      }\n      return null;\n    };\n    each$2({\n      parent: function (node) {\n        var parent = node.parentNode;\n        return parent && parent.nodeType !== 11 ? parent : null;\n      },\n      parents: function (node) {\n        return dir(node, 'parentNode');\n      },\n      next: function (node) {\n        return firstSibling(node, 'nextSibling', 1);\n      },\n      prev: function (node) {\n        return firstSibling(node, 'previousSibling', 1);\n      },\n      children: function (node) {\n        return sibling(node.firstChild, 'nextSibling', 1);\n      },\n      contents: function (node) {\n        return Tools.toArray((node.nodeName === 'iframe' ? node.contentDocument || node.contentWindow.document : node).childNodes);\n      }\n    }, function (name, fn) {\n      DomQuery.fn[name] = function (selector) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          if (!skipUniques[name]) {\n            result = DomQuery.unique(result);\n          }\n          if (name.indexOf('parents') === 0) {\n            result = result.reverse();\n          }\n        }\n        result = DomQuery(result);\n        if (selector) {\n          return result.filter(selector);\n        }\n        return result;\n      };\n    });\n    each$2({\n      parentsUntil: function (node, until) {\n        return dir(node, 'parentNode', until);\n      },\n      nextUntil: function (node, until) {\n        return sibling(node, 'nextSibling', 1, until).slice(1);\n      },\n      prevUntil: function (node, until) {\n        return sibling(node, 'previousSibling', 1, until).slice(1);\n      }\n    }, function (name, fn) {\n      DomQuery.fn[name] = function (selector, filter) {\n        var self = this;\n        var result = [];\n        self.each(function () {\n          var nodes = fn.call(result, this, selector, result);\n          if (nodes) {\n            if (DomQuery.isArray(nodes)) {\n              result.push.apply(result, nodes);\n            } else {\n              result.push(nodes);\n            }\n          }\n        });\n        if (this.length > 1) {\n          result = DomQuery.unique(result);\n          if (name.indexOf('parents') === 0 || name === 'prevUntil') {\n            result = result.reverse();\n          }\n        }\n        result = DomQuery(result);\n        if (filter) {\n          return result.filter(filter);\n        }\n        return result;\n      };\n    });\n    DomQuery.fn.is = function (selector) {\n      return !!selector && this.filter(selector).length > 0;\n    };\n    DomQuery.fn.init.prototype = DomQuery.fn;\n    DomQuery.overrideDefaults = function (callback) {\n      var defaults;\n      var sub = function (selector, context) {\n        defaults = defaults || callback();\n        if (arguments.length === 0) {\n          selector = defaults.element;\n        }\n        if (!context) {\n          context = defaults.context;\n        }\n        return new sub.fn.init(selector, context);\n      };\n      DomQuery.extend(sub, this);\n      return sub;\n    };\n    var appendHooks = function (targetHooks, prop, hooks) {\n      each$2(hooks, function (name, func) {\n        targetHooks[name] = targetHooks[name] || {};\n        targetHooks[name][prop] = func;\n      });\n    };\n    if (Env.ie && Env.ie < 8) {\n      appendHooks(attrHooks, 'get', {\n        maxlength: function (elm) {\n          var value = elm.maxLength;\n          if (value === 2147483647) {\n            return undefined;\n          }\n          return value;\n        },\n        size: function (elm) {\n          var value = elm.size;\n          if (value === 20) {\n            return undefined;\n          }\n          return value;\n        },\n        class: function (elm) {\n          return elm.className;\n        },\n        style: function (elm) {\n          var value = elm.style.cssText;\n          if (value.length === 0) {\n            return undefined;\n          }\n          return value;\n        }\n      });\n      appendHooks(attrHooks, 'set', {\n        class: function (elm, value) {\n          elm.className = value;\n        },\n        style: function (elm, value) {\n          elm.style.cssText = value;\n        }\n      });\n    }\n    if (Env.ie && Env.ie < 9) {\n      cssFix.float = 'styleFloat';\n      appendHooks(cssHooks, 'set', {\n        opacity: function (elm, value) {\n          var style = elm.style;\n          if (value === null || value === '') {\n            style.removeAttribute('filter');\n          } else {\n            style.zoom = 1;\n            style.filter = 'alpha(opacity=' + value * 100 + ')';\n          }\n        }\n      });\n    }\n    DomQuery.attrHooks = attrHooks;\n    DomQuery.cssHooks = cssHooks;\n\n    var cached = function (f) {\n      var called = false;\n      var r;\n      return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (!called) {\n          called = true;\n          r = f.apply(null, args);\n        }\n        return r;\n      };\n    };\n\n    var firstMatch = function (regexes, s) {\n      for (var i = 0; i < regexes.length; i++) {\n        var x = regexes[i];\n        if (x.test(s)) {\n          return x;\n        }\n      }\n      return undefined;\n    };\n    var find$2 = function (regexes, agent) {\n      var r = firstMatch(regexes, agent);\n      if (!r) {\n        return {\n          major: 0,\n          minor: 0\n        };\n      }\n      var group = function (i) {\n        return Number(agent.replace(r, '$' + i));\n      };\n      return nu(group(1), group(2));\n    };\n    var detect = function (versionRegexes, agent) {\n      var cleanedAgent = String(agent).toLowerCase();\n      if (versionRegexes.length === 0) {\n        return unknown();\n      }\n      return find$2(versionRegexes, cleanedAgent);\n    };\n    var unknown = function () {\n      return nu(0, 0);\n    };\n    var nu = function (major, minor) {\n      return {\n        major: major,\n        minor: minor\n      };\n    };\n    var Version = {\n      nu: nu,\n      detect: detect,\n      unknown: unknown\n    };\n\n    var edge = 'Edge';\n    var chrome = 'Chrome';\n    var ie$1 = 'IE';\n    var opera$1 = 'Opera';\n    var firefox = 'Firefox';\n    var safari = 'Safari';\n    var isBrowser = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$1 = function () {\n      return nu$1({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$1 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isEdge: isBrowser(edge, current),\n        isChrome: isBrowser(chrome, current),\n        isIE: isBrowser(ie$1, current),\n        isOpera: isBrowser(opera$1, current),\n        isFirefox: isBrowser(firefox, current),\n        isSafari: isBrowser(safari, current)\n      };\n    };\n    var Browser = {\n      unknown: unknown$1,\n      nu: nu$1,\n      edge: constant(edge),\n      chrome: constant(chrome),\n      ie: constant(ie$1),\n      opera: constant(opera$1),\n      firefox: constant(firefox),\n      safari: constant(safari)\n    };\n\n    var windows = 'Windows';\n    var ios = 'iOS';\n    var android$1 = 'Android';\n    var linux = 'Linux';\n    var osx = 'OSX';\n    var solaris = 'Solaris';\n    var freebsd = 'FreeBSD';\n    var isOS = function (name, current) {\n      return function () {\n        return current === name;\n      };\n    };\n    var unknown$2 = function () {\n      return nu$2({\n        current: undefined,\n        version: Version.unknown()\n      });\n    };\n    var nu$2 = function (info) {\n      var current = info.current;\n      var version = info.version;\n      return {\n        current: current,\n        version: version,\n        isWindows: isOS(windows, current),\n        isiOS: isOS(ios, current),\n        isAndroid: isOS(android$1, current),\n        isOSX: isOS(osx, current),\n        isLinux: isOS(linux, current),\n        isSolaris: isOS(solaris, current),\n        isFreeBSD: isOS(freebsd, current)\n      };\n    };\n    var OperatingSystem = {\n      unknown: unknown$2,\n      nu: nu$2,\n      windows: constant(windows),\n      ios: constant(ios),\n      android: constant(android$1),\n      linux: constant(linux),\n      osx: constant(osx),\n      solaris: constant(solaris),\n      freebsd: constant(freebsd)\n    };\n\n    var DeviceType = function (os, browser, userAgent) {\n      var isiPad = os.isiOS() && /ipad/i.test(userAgent) === true;\n      var isiPhone = os.isiOS() && !isiPad;\n      var isAndroid3 = os.isAndroid() && os.version.major === 3;\n      var isAndroid4 = os.isAndroid() && os.version.major === 4;\n      var isTablet = isiPad || isAndroid3 || isAndroid4 && /mobile/i.test(userAgent) === true;\n      var isTouch = os.isiOS() || os.isAndroid();\n      var isPhone = isTouch && !isTablet;\n      var iOSwebview = browser.isSafari() && os.isiOS() && /safari/i.test(userAgent) === false;\n      return {\n        isiPad: constant(isiPad),\n        isiPhone: constant(isiPhone),\n        isTablet: constant(isTablet),\n        isPhone: constant(isPhone),\n        isTouch: constant(isTouch),\n        isAndroid: os.isAndroid,\n        isiOS: os.isiOS,\n        isWebView: constant(iOSwebview)\n      };\n    };\n\n    var detect$1 = function (candidates, userAgent) {\n      var agent = String(userAgent).toLowerCase();\n      return find(candidates, function (candidate) {\n        return candidate.search(agent);\n      });\n    };\n    var detectBrowser = function (browsers, userAgent) {\n      return detect$1(browsers, userAgent).map(function (browser) {\n        var version = Version.detect(browser.versionRegexes, userAgent);\n        return {\n          current: browser.name,\n          version: version\n        };\n      });\n    };\n    var detectOs = function (oses, userAgent) {\n      return detect$1(oses, userAgent).map(function (os) {\n        var version = Version.detect(os.versionRegexes, userAgent);\n        return {\n          current: os.name,\n          version: version\n        };\n      });\n    };\n    var UaString = {\n      detectBrowser: detectBrowser,\n      detectOs: detectOs\n    };\n\n    var contains$2 = function (str, substr) {\n      return str.indexOf(substr) !== -1;\n    };\n    var trim$2 = function (str) {\n      return str.replace(/^\\s+|\\s+$/g, '');\n    };\n    var lTrim = function (str) {\n      return str.replace(/^\\s+/g, '');\n    };\n    var rTrim = function (str) {\n      return str.replace(/\\s+$/g, '');\n    };\n\n    var normalVersionRegex = /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/;\n    var checkContains = function (target) {\n      return function (uastring) {\n        return contains$2(uastring, target);\n      };\n    };\n    var browsers = [\n      {\n        name: 'Edge',\n        versionRegexes: [/.*?edge\\/ ?([0-9]+)\\.([0-9]+)$/],\n        search: function (uastring) {\n          return contains$2(uastring, 'edge/') && contains$2(uastring, 'chrome') && contains$2(uastring, 'safari') && contains$2(uastring, 'applewebkit');\n        }\n      },\n      {\n        name: 'Chrome',\n        versionRegexes: [\n          /.*?chrome\\/([0-9]+)\\.([0-9]+).*/,\n          normalVersionRegex\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'chrome') && !contains$2(uastring, 'chromeframe');\n        }\n      },\n      {\n        name: 'IE',\n        versionRegexes: [\n          /.*?msie\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*?rv:([0-9]+)\\.([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return contains$2(uastring, 'msie') || contains$2(uastring, 'trident');\n        }\n      },\n      {\n        name: 'Opera',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?opera\\/([0-9]+)\\.([0-9]+).*/\n        ],\n        search: checkContains('opera')\n      },\n      {\n        name: 'Firefox',\n        versionRegexes: [/.*?firefox\\/\\ ?([0-9]+)\\.([0-9]+).*/],\n        search: checkContains('firefox')\n      },\n      {\n        name: 'Safari',\n        versionRegexes: [\n          normalVersionRegex,\n          /.*?cpu os ([0-9]+)_([0-9]+).*/\n        ],\n        search: function (uastring) {\n          return (contains$2(uastring, 'safari') || contains$2(uastring, 'mobile/')) && contains$2(uastring, 'applewebkit');\n        }\n      }\n    ];\n    var oses = [\n      {\n        name: 'Windows',\n        search: checkContains('win'),\n        versionRegexes: [/.*?windows\\ nt\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'iOS',\n        search: function (uastring) {\n          return contains$2(uastring, 'iphone') || contains$2(uastring, 'ipad');\n        },\n        versionRegexes: [\n          /.*?version\\/\\ ?([0-9]+)\\.([0-9]+).*/,\n          /.*cpu os ([0-9]+)_([0-9]+).*/,\n          /.*cpu iphone os ([0-9]+)_([0-9]+).*/\n        ]\n      },\n      {\n        name: 'Android',\n        search: checkContains('android'),\n        versionRegexes: [/.*?android\\ ?([0-9]+)\\.([0-9]+).*/]\n      },\n      {\n        name: 'OSX',\n        search: checkContains('os x'),\n        versionRegexes: [/.*?os\\ x\\ ?([0-9]+)_([0-9]+).*/]\n      },\n      {\n        name: 'Linux',\n        search: checkContains('linux'),\n        versionRegexes: []\n      },\n      {\n        name: 'Solaris',\n        search: checkContains('sunos'),\n        versionRegexes: []\n      },\n      {\n        name: 'FreeBSD',\n        search: checkContains('freebsd'),\n        versionRegexes: []\n      }\n    ];\n    var PlatformInfo = {\n      browsers: constant(browsers),\n      oses: constant(oses)\n    };\n\n    var detect$2 = function (userAgent) {\n      var browsers = PlatformInfo.browsers();\n      var oses = PlatformInfo.oses();\n      var browser = UaString.detectBrowser(browsers, userAgent).fold(Browser.unknown, Browser.nu);\n      var os = UaString.detectOs(oses, userAgent).fold(OperatingSystem.unknown, OperatingSystem.nu);\n      var deviceType = DeviceType(os, browser, userAgent);\n      return {\n        browser: browser,\n        os: os,\n        deviceType: deviceType\n      };\n    };\n    var PlatformDetection = { detect: detect$2 };\n\n    var detect$3 = cached(function () {\n      var userAgent = domGlobals.navigator.userAgent;\n      return PlatformDetection.detect(userAgent);\n    });\n    var PlatformDetection$1 = { detect: detect$3 };\n\n    var fromHtml = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      if (!div.hasChildNodes() || div.childNodes.length > 1) {\n        domGlobals.console.error('HTML does not have a single root node', html);\n        throw new Error('HTML must have a single root node');\n      }\n      return fromDom(div.childNodes[0]);\n    };\n    var fromTag = function (tag, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createElement(tag);\n      return fromDom(node);\n    };\n    var fromText = function (text, scope) {\n      var doc = scope || domGlobals.document;\n      var node = doc.createTextNode(text);\n      return fromDom(node);\n    };\n    var fromDom = function (node) {\n      if (node === null || node === undefined) {\n        throw new Error('Node cannot be null or undefined');\n      }\n      return { dom: constant(node) };\n    };\n    var fromPoint = function (docElm, x, y) {\n      var doc = docElm.dom();\n      return Option.from(doc.elementFromPoint(x, y)).map(fromDom);\n    };\n    var Element = {\n      fromHtml: fromHtml,\n      fromTag: fromTag,\n      fromText: fromText,\n      fromDom: fromDom,\n      fromPoint: fromPoint\n    };\n\n    var ATTRIBUTE = domGlobals.Node.ATTRIBUTE_NODE;\n    var CDATA_SECTION = domGlobals.Node.CDATA_SECTION_NODE;\n    var COMMENT = domGlobals.Node.COMMENT_NODE;\n    var DOCUMENT = domGlobals.Node.DOCUMENT_NODE;\n    var DOCUMENT_TYPE = domGlobals.Node.DOCUMENT_TYPE_NODE;\n    var DOCUMENT_FRAGMENT = domGlobals.Node.DOCUMENT_FRAGMENT_NODE;\n    var ELEMENT = domGlobals.Node.ELEMENT_NODE;\n    var TEXT = domGlobals.Node.TEXT_NODE;\n    var PROCESSING_INSTRUCTION = domGlobals.Node.PROCESSING_INSTRUCTION_NODE;\n    var ENTITY_REFERENCE = domGlobals.Node.ENTITY_REFERENCE_NODE;\n    var ENTITY = domGlobals.Node.ENTITY_NODE;\n    var NOTATION = domGlobals.Node.NOTATION_NODE;\n\n    var name = function (element) {\n      var r = element.dom().nodeName;\n      return r.toLowerCase();\n    };\n    var type = function (element) {\n      return element.dom().nodeType;\n    };\n    var isType$1 = function (t) {\n      return function (element) {\n        return type(element) === t;\n      };\n    };\n    var isElement = isType$1(ELEMENT);\n    var isText = isType$1(TEXT);\n\n    var keys = Object.keys;\n    var hasOwnProperty$1 = Object.hasOwnProperty;\n    var each$3 = function (obj, f) {\n      var props = keys(obj);\n      for (var k = 0, len = props.length; k < len; k++) {\n        var i = props[k];\n        var x = obj[i];\n        f(x, i, obj);\n      }\n    };\n    var map$2 = function (obj, f) {\n      return tupleMap(obj, function (x, i, obj) {\n        return {\n          k: i,\n          v: f(x, i, obj)\n        };\n      });\n    };\n    var tupleMap = function (obj, f) {\n      var r = {};\n      each$3(obj, function (x, i) {\n        var tuple = f(x, i, obj);\n        r[tuple.k] = tuple.v;\n      });\n      return r;\n    };\n    var bifilter = function (obj, pred) {\n      var t = {};\n      var f = {};\n      each$3(obj, function (x, i) {\n        var branch = pred(x, i) ? t : f;\n        branch[i] = x;\n      });\n      return {\n        t: t,\n        f: f\n      };\n    };\n    var has = function (obj, key) {\n      return hasOwnProperty$1.call(obj, key);\n    };\n\n    var isSupported = function (dom) {\n      return dom.style !== undefined && isFunction(dom.style.getPropertyValue);\n    };\n\n    var inBody = function (element) {\n      var dom = isText(element) ? element.dom().parentNode : element.dom();\n      return dom !== undefined && dom !== null && dom.ownerDocument.body.contains(dom);\n    };\n\n    var rawSet = function (dom, key, value) {\n      if (isString(value) || isBoolean(value) || isNumber(value)) {\n        dom.setAttribute(key, value + '');\n      } else {\n        domGlobals.console.error('Invalid call to Attr.set. Key ', key, ':: Value ', value, ':: Element ', dom);\n        throw new Error('Attribute value was not simple');\n      }\n    };\n    var set = function (element, key, value) {\n      rawSet(element.dom(), key, value);\n    };\n    var setAll = function (element, attrs) {\n      var dom = element.dom();\n      each$3(attrs, function (v, k) {\n        rawSet(dom, k, v);\n      });\n    };\n    var get = function (element, key) {\n      var v = element.dom().getAttribute(key);\n      return v === null ? undefined : v;\n    };\n    var has$1 = function (element, key) {\n      var dom = element.dom();\n      return dom && dom.hasAttribute ? dom.hasAttribute(key) : false;\n    };\n    var remove = function (element, key) {\n      element.dom().removeAttribute(key);\n    };\n\n    var internalSet = function (dom, property, value) {\n      if (!isString(value)) {\n        domGlobals.console.error('Invalid call to CSS.set. Property ', property, ':: Value ', value, ':: Element ', dom);\n        throw new Error('CSS value must be a string: ' + value);\n      }\n      if (isSupported(dom)) {\n        dom.style.setProperty(property, value);\n      }\n    };\n    var setAll$1 = function (element, css) {\n      var dom = element.dom();\n      each$3(css, function (v, k) {\n        internalSet(dom, k, v);\n      });\n    };\n    var get$1 = function (element, property) {\n      var dom = element.dom();\n      var styles = domGlobals.window.getComputedStyle(dom);\n      var r = styles.getPropertyValue(property);\n      var v = r === '' && !inBody(element) ? getUnsafeProperty(dom, property) : r;\n      return v === null ? undefined : v;\n    };\n    var getUnsafeProperty = function (dom, property) {\n      return isSupported(dom) ? dom.style.getPropertyValue(property) : '';\n    };\n    var getRaw = function (element, property) {\n      var dom = element.dom();\n      var raw = getUnsafeProperty(dom, property);\n      return Option.from(raw).filter(function (r) {\n        return r.length > 0;\n      });\n    };\n\n    var Immutable = function () {\n      var fields = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        fields[_i] = arguments[_i];\n      }\n      return function () {\n        var values = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          values[_i] = arguments[_i];\n        }\n        if (fields.length !== values.length) {\n          throw new Error('Wrong number of arguments to struct. Expected \"[' + fields.length + ']\", got ' + values.length + ' arguments');\n        }\n        var struct = {};\n        each(fields, function (name, i) {\n          struct[name] = constant(values[i]);\n        });\n        return struct;\n      };\n    };\n\n    var toArray$1 = function (target, f) {\n      var r = [];\n      var recurse = function (e) {\n        r.push(e);\n        return f(e);\n      };\n      var cur = f(target);\n      do {\n        cur = cur.bind(recurse);\n      } while (cur.isSome());\n      return r;\n    };\n    var Recurse = { toArray: toArray$1 };\n\n    var node = function () {\n      var f = Global$1.getOrDie('Node');\n      return f;\n    };\n    var compareDocumentPosition = function (a, b, match) {\n      return (a.compareDocumentPosition(b) & match) !== 0;\n    };\n    var documentPositionPreceding = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_PRECEDING);\n    };\n    var documentPositionContainedBy = function (a, b) {\n      return compareDocumentPosition(a, b, node().DOCUMENT_POSITION_CONTAINED_BY);\n    };\n    var Node = {\n      documentPositionPreceding: documentPositionPreceding,\n      documentPositionContainedBy: documentPositionContainedBy\n    };\n\n    var ELEMENT$1 = ELEMENT;\n    var DOCUMENT$1 = DOCUMENT;\n    var is$1 = function (element, selector) {\n      var dom = element.dom();\n      if (dom.nodeType !== ELEMENT$1) {\n        return false;\n      } else {\n        var elem = dom;\n        if (elem.matches !== undefined) {\n          return elem.matches(selector);\n        } else if (elem.msMatchesSelector !== undefined) {\n          return elem.msMatchesSelector(selector);\n        } else if (elem.webkitMatchesSelector !== undefined) {\n          return elem.webkitMatchesSelector(selector);\n        } else if (elem.mozMatchesSelector !== undefined) {\n          return elem.mozMatchesSelector(selector);\n        } else {\n          throw new Error('Browser lacks native selectors');\n        }\n      }\n    };\n    var bypassSelector = function (dom) {\n      return dom.nodeType !== ELEMENT$1 && dom.nodeType !== DOCUMENT$1 || dom.childElementCount === 0;\n    };\n    var all = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? [] : map(base.querySelectorAll(selector), Element.fromDom);\n    };\n    var one = function (selector, scope) {\n      var base = scope === undefined ? domGlobals.document : scope.dom();\n      return bypassSelector(base) ? Option.none() : Option.from(base.querySelector(selector)).map(Element.fromDom);\n    };\n\n    var eq = function (e1, e2) {\n      return e1.dom() === e2.dom();\n    };\n    var regularContains = function (e1, e2) {\n      var d1 = e1.dom();\n      var d2 = e2.dom();\n      return d1 === d2 ? false : d1.contains(d2);\n    };\n    var ieContains = function (e1, e2) {\n      return Node.documentPositionContainedBy(e1.dom(), e2.dom());\n    };\n    var browser = PlatformDetection$1.detect().browser;\n    var contains$3 = browser.isIE() ? ieContains : regularContains;\n\n    var owner = function (element) {\n      return Element.fromDom(element.dom().ownerDocument);\n    };\n    var documentElement = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.documentElement);\n    };\n    var defaultView = function (element) {\n      return Element.fromDom(element.dom().ownerDocument.defaultView);\n    };\n    var parent = function (element) {\n      return Option.from(element.dom().parentNode).map(Element.fromDom);\n    };\n    var parents = function (element, isRoot) {\n      var stop = isFunction(isRoot) ? isRoot : never;\n      var dom = element.dom();\n      var ret = [];\n      while (dom.parentNode !== null && dom.parentNode !== undefined) {\n        var rawParent = dom.parentNode;\n        var p = Element.fromDom(rawParent);\n        ret.push(p);\n        if (stop(p) === true) {\n          break;\n        } else {\n          dom = rawParent;\n        }\n      }\n      return ret;\n    };\n    var prevSibling = function (element) {\n      return Option.from(element.dom().previousSibling).map(Element.fromDom);\n    };\n    var nextSibling = function (element) {\n      return Option.from(element.dom().nextSibling).map(Element.fromDom);\n    };\n    var prevSiblings = function (element) {\n      return reverse(Recurse.toArray(element, prevSibling));\n    };\n    var nextSiblings = function (element) {\n      return Recurse.toArray(element, nextSibling);\n    };\n    var children = function (element) {\n      return map(element.dom().childNodes, Element.fromDom);\n    };\n    var child = function (element, index) {\n      var cs = element.dom().childNodes;\n      return Option.from(cs[index]).map(Element.fromDom);\n    };\n    var firstChild = function (element) {\n      return child(element, 0);\n    };\n    var lastChild = function (element) {\n      return child(element, element.dom().childNodes.length - 1);\n    };\n    var childNodesCount = function (element) {\n      return element.dom().childNodes.length;\n    };\n    var spot = Immutable('element', 'offset');\n\n    var browser$1 = PlatformDetection$1.detect().browser;\n    var firstElement = function (nodes) {\n      return find(nodes, isElement);\n    };\n    var getTableCaptionDeltaY = function (elm) {\n      if (browser$1.isFirefox() && name(elm) === 'table') {\n        return firstElement(children(elm)).filter(function (elm) {\n          return name(elm) === 'caption';\n        }).bind(function (caption) {\n          return firstElement(nextSiblings(caption)).map(function (body) {\n            var bodyTop = body.dom().offsetTop;\n            var captionTop = caption.dom().offsetTop;\n            var captionHeight = caption.dom().offsetHeight;\n            return bodyTop <= captionTop ? -captionHeight : 0;\n          });\n        }).getOr(0);\n      } else {\n        return 0;\n      }\n    };\n    var getPos = function (body, elm, rootElm) {\n      var x = 0, y = 0, offsetParent;\n      var doc = body.ownerDocument;\n      var pos;\n      rootElm = rootElm ? rootElm : body;\n      if (elm) {\n        if (rootElm === body && elm.getBoundingClientRect && get$1(Element.fromDom(body), 'position') === 'static') {\n          pos = elm.getBoundingClientRect();\n          x = pos.left + (doc.documentElement.scrollLeft || body.scrollLeft) - doc.documentElement.clientLeft;\n          y = pos.top + (doc.documentElement.scrollTop || body.scrollTop) - doc.documentElement.clientTop;\n          return {\n            x: x,\n            y: y\n          };\n        }\n        offsetParent = elm;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType) {\n          x += offsetParent.offsetLeft || 0;\n          y += offsetParent.offsetTop || 0;\n          offsetParent = offsetParent.offsetParent;\n        }\n        offsetParent = elm.parentNode;\n        while (offsetParent && offsetParent !== rootElm && offsetParent.nodeType) {\n          x -= offsetParent.scrollLeft || 0;\n          y -= offsetParent.scrollTop || 0;\n          offsetParent = offsetParent.parentNode;\n        }\n        y += getTableCaptionDeltaY(Element.fromDom(elm));\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var Position = { getPos: getPos };\n\n    var exports$1 = {}, module$1 = { exports: exports$1 };\n    (function (define, exports, module, require) {\n      (function (f) {\n        if (typeof exports === 'object' && typeof module !== 'undefined') {\n          module.exports = f();\n        } else if (typeof define === 'function' && define.amd) {\n          define([], f);\n        } else {\n          var g;\n          if (typeof window !== 'undefined') {\n            g = window;\n          } else if (typeof global !== 'undefined') {\n            g = global;\n          } else if (typeof self !== 'undefined') {\n            g = self;\n          } else {\n            g = this;\n          }\n          g.EphoxContactWrapper = f();\n        }\n      }(function () {\n        return function () {\n          function r(e, n, t) {\n            function o(i, f) {\n              if (!n[i]) {\n                if (!e[i]) {\n                  var c = 'function' == typeof require && require;\n                  if (!f && c)\n                    return c(i, !0);\n                  if (u)\n                    return u(i, !0);\n                  var a = new Error('Cannot find module \\'' + i + '\\'');\n                  throw a.code = 'MODULE_NOT_FOUND', a;\n                }\n                var p = n[i] = { exports: {} };\n                e[i][0].call(p.exports, function (r) {\n                  var n = e[i][1][r];\n                  return o(n || r);\n                }, p, p.exports, r, e, n, t);\n              }\n              return n[i].exports;\n            }\n            for (var u = 'function' == typeof require && require, i = 0; i < t.length; i++)\n              o(t[i]);\n            return o;\n          }\n          return r;\n        }()({\n          1: [\n            function (require, module, exports) {\n              var process = module.exports = {};\n              var cachedSetTimeout;\n              var cachedClearTimeout;\n              function defaultSetTimout() {\n                throw new Error('setTimeout has not been defined');\n              }\n              function defaultClearTimeout() {\n                throw new Error('clearTimeout has not been defined');\n              }\n              (function () {\n                try {\n                  if (typeof setTimeout === 'function') {\n                    cachedSetTimeout = setTimeout;\n                  } else {\n                    cachedSetTimeout = defaultSetTimout;\n                  }\n                } catch (e) {\n                  cachedSetTimeout = defaultSetTimout;\n                }\n                try {\n                  if (typeof clearTimeout === 'function') {\n                    cachedClearTimeout = clearTimeout;\n                  } else {\n                    cachedClearTimeout = defaultClearTimeout;\n                  }\n                } catch (e) {\n                  cachedClearTimeout = defaultClearTimeout;\n                }\n              }());\n              function runTimeout(fun) {\n                if (cachedSetTimeout === setTimeout) {\n                  return setTimeout(fun, 0);\n                }\n                if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n                  cachedSetTimeout = setTimeout;\n                  return setTimeout(fun, 0);\n                }\n                try {\n                  return cachedSetTimeout(fun, 0);\n                } catch (e) {\n                  try {\n                    return cachedSetTimeout.call(null, fun, 0);\n                  } catch (e) {\n                    return cachedSetTimeout.call(this, fun, 0);\n                  }\n                }\n              }\n              function runClearTimeout(marker) {\n                if (cachedClearTimeout === clearTimeout) {\n                  return clearTimeout(marker);\n                }\n                if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n                  cachedClearTimeout = clearTimeout;\n                  return clearTimeout(marker);\n                }\n                try {\n                  return cachedClearTimeout(marker);\n                } catch (e) {\n                  try {\n                    return cachedClearTimeout.call(null, marker);\n                  } catch (e) {\n                    return cachedClearTimeout.call(this, marker);\n                  }\n                }\n              }\n              var queue = [];\n              var draining = false;\n              var currentQueue;\n              var queueIndex = -1;\n              function cleanUpNextTick() {\n                if (!draining || !currentQueue) {\n                  return;\n                }\n                draining = false;\n                if (currentQueue.length) {\n                  queue = currentQueue.concat(queue);\n                } else {\n                  queueIndex = -1;\n                }\n                if (queue.length) {\n                  drainQueue();\n                }\n              }\n              function drainQueue() {\n                if (draining) {\n                  return;\n                }\n                var timeout = runTimeout(cleanUpNextTick);\n                draining = true;\n                var len = queue.length;\n                while (len) {\n                  currentQueue = queue;\n                  queue = [];\n                  while (++queueIndex < len) {\n                    if (currentQueue) {\n                      currentQueue[queueIndex].run();\n                    }\n                  }\n                  queueIndex = -1;\n                  len = queue.length;\n                }\n                currentQueue = null;\n                draining = false;\n                runClearTimeout(timeout);\n              }\n              process.nextTick = function (fun) {\n                var args = new Array(arguments.length - 1);\n                if (arguments.length > 1) {\n                  for (var i = 1; i < arguments.length; i++) {\n                    args[i - 1] = arguments[i];\n                  }\n                }\n                queue.push(new Item(fun, args));\n                if (queue.length === 1 && !draining) {\n                  runTimeout(drainQueue);\n                }\n              };\n              function Item(fun, array) {\n                this.fun = fun;\n                this.array = array;\n              }\n              Item.prototype.run = function () {\n                this.fun.apply(null, this.array);\n              };\n              process.title = 'browser';\n              process.browser = true;\n              process.env = {};\n              process.argv = [];\n              process.version = '';\n              process.versions = {};\n              function noop() {\n              }\n              process.on = noop;\n              process.addListener = noop;\n              process.once = noop;\n              process.off = noop;\n              process.removeListener = noop;\n              process.removeAllListeners = noop;\n              process.emit = noop;\n              process.prependListener = noop;\n              process.prependOnceListener = noop;\n              process.listeners = function (name) {\n                return [];\n              };\n              process.binding = function (name) {\n                throw new Error('process.binding is not supported');\n              };\n              process.cwd = function () {\n                return '/';\n              };\n              process.chdir = function (dir) {\n                throw new Error('process.chdir is not supported');\n              };\n              process.umask = function () {\n                return 0;\n              };\n            },\n            {}\n          ],\n          2: [\n            function (require, module, exports) {\n              (function (setImmediate) {\n                (function (root) {\n                  var setTimeoutFunc = setTimeout;\n                  function noop() {\n                  }\n                  function bind(fn, thisArg) {\n                    return function () {\n                      fn.apply(thisArg, arguments);\n                    };\n                  }\n                  function Promise(fn) {\n                    if (typeof this !== 'object')\n                      throw new TypeError('Promises must be constructed via new');\n                    if (typeof fn !== 'function')\n                      throw new TypeError('not a function');\n                    this._state = 0;\n                    this._handled = false;\n                    this._value = undefined;\n                    this._deferreds = [];\n                    doResolve(fn, this);\n                  }\n                  function handle(self, deferred) {\n                    while (self._state === 3) {\n                      self = self._value;\n                    }\n                    if (self._state === 0) {\n                      self._deferreds.push(deferred);\n                      return;\n                    }\n                    self._handled = true;\n                    Promise._immediateFn(function () {\n                      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n                      if (cb === null) {\n                        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n                        return;\n                      }\n                      var ret;\n                      try {\n                        ret = cb(self._value);\n                      } catch (e) {\n                        reject(deferred.promise, e);\n                        return;\n                      }\n                      resolve(deferred.promise, ret);\n                    });\n                  }\n                  function resolve(self, newValue) {\n                    try {\n                      if (newValue === self)\n                        throw new TypeError('A promise cannot be resolved with itself.');\n                      if (newValue && (typeof newValue === 'object' || typeof newValue === 'function')) {\n                        var then = newValue.then;\n                        if (newValue instanceof Promise) {\n                          self._state = 3;\n                          self._value = newValue;\n                          finale(self);\n                          return;\n                        } else if (typeof then === 'function') {\n                          doResolve(bind(then, newValue), self);\n                          return;\n                        }\n                      }\n                      self._state = 1;\n                      self._value = newValue;\n                      finale(self);\n                    } catch (e) {\n                      reject(self, e);\n                    }\n                  }\n                  function reject(self, newValue) {\n                    self._state = 2;\n                    self._value = newValue;\n                    finale(self);\n                  }\n                  function finale(self) {\n                    if (self._state === 2 && self._deferreds.length === 0) {\n                      Promise._immediateFn(function () {\n                        if (!self._handled) {\n                          Promise._unhandledRejectionFn(self._value);\n                        }\n                      });\n                    }\n                    for (var i = 0, len = self._deferreds.length; i < len; i++) {\n                      handle(self, self._deferreds[i]);\n                    }\n                    self._deferreds = null;\n                  }\n                  function Handler(onFulfilled, onRejected, promise) {\n                    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n                    this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n                    this.promise = promise;\n                  }\n                  function doResolve(fn, self) {\n                    var done = false;\n                    try {\n                      fn(function (value) {\n                        if (done)\n                          return;\n                        done = true;\n                        resolve(self, value);\n                      }, function (reason) {\n                        if (done)\n                          return;\n                        done = true;\n                        reject(self, reason);\n                      });\n                    } catch (ex) {\n                      if (done)\n                        return;\n                      done = true;\n                      reject(self, ex);\n                    }\n                  }\n                  Promise.prototype['catch'] = function (onRejected) {\n                    return this.then(null, onRejected);\n                  };\n                  Promise.prototype.then = function (onFulfilled, onRejected) {\n                    var prom = new this.constructor(noop);\n                    handle(this, new Handler(onFulfilled, onRejected, prom));\n                    return prom;\n                  };\n                  Promise.all = function (arr) {\n                    var args = Array.prototype.slice.call(arr);\n                    return new Promise(function (resolve, reject) {\n                      if (args.length === 0)\n                        return resolve([]);\n                      var remaining = args.length;\n                      function res(i, val) {\n                        try {\n                          if (val && (typeof val === 'object' || typeof val === 'function')) {\n                            var then = val.then;\n                            if (typeof then === 'function') {\n                              then.call(val, function (val) {\n                                res(i, val);\n                              }, reject);\n                              return;\n                            }\n                          }\n                          args[i] = val;\n                          if (--remaining === 0) {\n                            resolve(args);\n                          }\n                        } catch (ex) {\n                          reject(ex);\n                        }\n                      }\n                      for (var i = 0; i < args.length; i++) {\n                        res(i, args[i]);\n                      }\n                    });\n                  };\n                  Promise.resolve = function (value) {\n                    if (value && typeof value === 'object' && value.constructor === Promise) {\n                      return value;\n                    }\n                    return new Promise(function (resolve) {\n                      resolve(value);\n                    });\n                  };\n                  Promise.reject = function (value) {\n                    return new Promise(function (resolve, reject) {\n                      reject(value);\n                    });\n                  };\n                  Promise.race = function (values) {\n                    return new Promise(function (resolve, reject) {\n                      for (var i = 0, len = values.length; i < len; i++) {\n                        values[i].then(resolve, reject);\n                      }\n                    });\n                  };\n                  Promise._immediateFn = typeof setImmediate === 'function' ? function (fn) {\n                    setImmediate(fn);\n                  } : function (fn) {\n                    setTimeoutFunc(fn, 0);\n                  };\n                  Promise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n                    if (typeof console !== 'undefined' && console) {\n                      console.warn('Possible Unhandled Promise Rejection:', err);\n                    }\n                  };\n                  Promise._setImmediateFn = function _setImmediateFn(fn) {\n                    Promise._immediateFn = fn;\n                  };\n                  Promise._setUnhandledRejectionFn = function _setUnhandledRejectionFn(fn) {\n                    Promise._unhandledRejectionFn = fn;\n                  };\n                  if (typeof module !== 'undefined' && module.exports) {\n                    module.exports = Promise;\n                  } else if (!root.Promise) {\n                    root.Promise = Promise;\n                  }\n                }(this));\n              }.call(this, require('timers').setImmediate));\n            },\n            { 'timers': 3 }\n          ],\n          3: [\n            function (require, module, exports) {\n              (function (setImmediate, clearImmediate) {\n                var nextTick = require('process/browser.js').nextTick;\n                var apply = Function.prototype.apply;\n                var slice = Array.prototype.slice;\n                var immediateIds = {};\n                var nextImmediateId = 0;\n                exports.setTimeout = function () {\n                  return new Timeout(apply.call(setTimeout, window, arguments), clearTimeout);\n                };\n                exports.setInterval = function () {\n                  return new Timeout(apply.call(setInterval, window, arguments), clearInterval);\n                };\n                exports.clearTimeout = exports.clearInterval = function (timeout) {\n                  timeout.close();\n                };\n                function Timeout(id, clearFn) {\n                  this._id = id;\n                  this._clearFn = clearFn;\n                }\n                Timeout.prototype.unref = Timeout.prototype.ref = function () {\n                };\n                Timeout.prototype.close = function () {\n                  this._clearFn.call(window, this._id);\n                };\n                exports.enroll = function (item, msecs) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = msecs;\n                };\n                exports.unenroll = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  item._idleTimeout = -1;\n                };\n                exports._unrefActive = exports.active = function (item) {\n                  clearTimeout(item._idleTimeoutId);\n                  var msecs = item._idleTimeout;\n                  if (msecs >= 0) {\n                    item._idleTimeoutId = setTimeout(function onTimeout() {\n                      if (item._onTimeout)\n                        item._onTimeout();\n                    }, msecs);\n                  }\n                };\n                exports.setImmediate = typeof setImmediate === 'function' ? setImmediate : function (fn) {\n                  var id = nextImmediateId++;\n                  var args = arguments.length < 2 ? false : slice.call(arguments, 1);\n                  immediateIds[id] = true;\n                  nextTick(function onNextTick() {\n                    if (immediateIds[id]) {\n                      if (args) {\n                        fn.apply(null, args);\n                      } else {\n                        fn.call(null);\n                      }\n                      exports.clearImmediate(id);\n                    }\n                  });\n                  return id;\n                };\n                exports.clearImmediate = typeof clearImmediate === 'function' ? clearImmediate : function (id) {\n                  delete immediateIds[id];\n                };\n              }.call(this, require('timers').setImmediate, require('timers').clearImmediate));\n            },\n            {\n              'process/browser.js': 1,\n              'timers': 3\n            }\n          ],\n          4: [\n            function (require, module, exports) {\n              var promisePolyfill = require('promise-polyfill');\n              var Global = function () {\n                if (typeof window !== 'undefined') {\n                  return window;\n                } else {\n                  return Function('return this;')();\n                }\n              }();\n              module.exports = { boltExport: Global.Promise || promisePolyfill };\n            },\n            { 'promise-polyfill': 2 }\n          ]\n        }, {}, [4])(4);\n      }));\n    }(undefined, exports$1, module$1, undefined));\n    var Promise = module$1.exports.boltExport;\n\n    var nu$3 = function (baseFn) {\n      var data = Option.none();\n      var callbacks = [];\n      var map = function (f) {\n        return nu$3(function (nCallback) {\n          get(function (data) {\n            nCallback(f(data));\n          });\n        });\n      };\n      var get = function (nCallback) {\n        if (isReady()) {\n          call(nCallback);\n        } else {\n          callbacks.push(nCallback);\n        }\n      };\n      var set = function (x) {\n        data = Option.some(x);\n        run(callbacks);\n        callbacks = [];\n      };\n      var isReady = function () {\n        return data.isSome();\n      };\n      var run = function (cbs) {\n        each(cbs, call);\n      };\n      var call = function (cb) {\n        data.each(function (x) {\n          domGlobals.setTimeout(function () {\n            cb(x);\n          }, 0);\n        });\n      };\n      baseFn(set);\n      return {\n        get: get,\n        map: map,\n        isReady: isReady\n      };\n    };\n    var pure = function (a) {\n      return nu$3(function (callback) {\n        callback(a);\n      });\n    };\n    var LazyValue = {\n      nu: nu$3,\n      pure: pure\n    };\n\n    var errorReporter = function (err) {\n      domGlobals.setTimeout(function () {\n        throw err;\n      }, 0);\n    };\n    var make = function (run) {\n      var get = function (callback) {\n        run().then(callback, errorReporter);\n      };\n      var map = function (fab) {\n        return make(function () {\n          return run().then(fab);\n        });\n      };\n      var bind = function (aFutureB) {\n        return make(function () {\n          return run().then(function (v) {\n            return aFutureB(v).toPromise();\n          });\n        });\n      };\n      var anonBind = function (futureB) {\n        return make(function () {\n          return run().then(function () {\n            return futureB.toPromise();\n          });\n        });\n      };\n      var toLazy = function () {\n        return LazyValue.nu(get);\n      };\n      var toCached = function () {\n        var cache = null;\n        return make(function () {\n          if (cache === null) {\n            cache = run();\n          }\n          return cache;\n        });\n      };\n      var toPromise = run;\n      return {\n        map: map,\n        bind: bind,\n        anonBind: anonBind,\n        toLazy: toLazy,\n        toCached: toCached,\n        toPromise: toPromise,\n        get: get\n      };\n    };\n    var nu$4 = function (baseFn) {\n      return make(function () {\n        return new Promise(baseFn);\n      });\n    };\n    var pure$1 = function (a) {\n      return make(function () {\n        return Promise.resolve(a);\n      });\n    };\n    var Future = {\n      nu: nu$4,\n      pure: pure$1\n    };\n\n    var par = function (asyncValues, nu) {\n      return nu(function (callback) {\n        var r = [];\n        var count = 0;\n        var cb = function (i) {\n          return function (value) {\n            r[i] = value;\n            count++;\n            if (count >= asyncValues.length) {\n              callback(r);\n            }\n          };\n        };\n        if (asyncValues.length === 0) {\n          callback([]);\n        } else {\n          each(asyncValues, function (asyncValue, i) {\n            asyncValue.get(cb(i));\n          });\n        }\n      });\n    };\n\n    var par$1 = function (futures) {\n      return par(futures, Future.nu);\n    };\n\n    var value = function (o) {\n      var is = function (v) {\n        return o === v;\n      };\n      var or = function (opt) {\n        return value(o);\n      };\n      var orThunk = function (f) {\n        return value(o);\n      };\n      var map = function (f) {\n        return value(f(o));\n      };\n      var mapError = function (f) {\n        return value(o);\n      };\n      var each = function (f) {\n        f(o);\n      };\n      var bind = function (f) {\n        return f(o);\n      };\n      var fold = function (_, onValue) {\n        return onValue(o);\n      };\n      var exists = function (f) {\n        return f(o);\n      };\n      var forall = function (f) {\n        return f(o);\n      };\n      var toOption = function () {\n        return Option.some(o);\n      };\n      return {\n        is: is,\n        isValue: always,\n        isError: never,\n        getOr: constant(o),\n        getOrThunk: constant(o),\n        getOrDie: constant(o),\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: each,\n        bind: bind,\n        exists: exists,\n        forall: forall,\n        toOption: toOption\n      };\n    };\n    var error = function (message) {\n      var getOrThunk = function (f) {\n        return f();\n      };\n      var getOrDie = function () {\n        return die(String(message))();\n      };\n      var or = function (opt) {\n        return opt;\n      };\n      var orThunk = function (f) {\n        return f();\n      };\n      var map = function (f) {\n        return error(message);\n      };\n      var mapError = function (f) {\n        return error(f(message));\n      };\n      var bind = function (f) {\n        return error(message);\n      };\n      var fold = function (onError, _) {\n        return onError(message);\n      };\n      return {\n        is: never,\n        isValue: never,\n        isError: always,\n        getOr: identity,\n        getOrThunk: getOrThunk,\n        getOrDie: getOrDie,\n        or: or,\n        orThunk: orThunk,\n        fold: fold,\n        map: map,\n        mapError: mapError,\n        each: noop,\n        bind: bind,\n        exists: never,\n        forall: always,\n        toOption: Option.none\n      };\n    };\n    var fromOption = function (opt, err) {\n      return opt.fold(function () {\n        return error(err);\n      }, value);\n    };\n    var Result = {\n      value: value,\n      error: error,\n      fromOption: fromOption\n    };\n\n    function StyleSheetLoader(document, settings) {\n      if (settings === void 0) {\n        settings = {};\n      }\n      var idCount = 0;\n      var loadedStates = {};\n      var maxLoadTime;\n      maxLoadTime = settings.maxLoadTime || 5000;\n      var appendToHead = function (node) {\n        document.getElementsByTagName('head')[0].appendChild(node);\n      };\n      var load = function (url, loadedCallback, errorCallback) {\n        var link, style, startTime, state;\n        var passed = function () {\n          var callbacks = state.passed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = 2;\n          state.passed = [];\n          state.failed = [];\n        };\n        var failed = function () {\n          var callbacks = state.failed;\n          var i = callbacks.length;\n          while (i--) {\n            callbacks[i]();\n          }\n          state.status = 3;\n          state.passed = [];\n          state.failed = [];\n        };\n        var isOldWebKit = function () {\n          var webKitChunks = domGlobals.navigator.userAgent.match(/WebKit\\/(\\d*)/);\n          return !!(webKitChunks && parseInt(webKitChunks[1], 10) < 536);\n        };\n        var wait = function (testCallback, waitCallback) {\n          if (!testCallback()) {\n            if (new Date().getTime() - startTime < maxLoadTime) {\n              Delay.setTimeout(waitCallback);\n            } else {\n              failed();\n            }\n          }\n        };\n        var waitForWebKitLinkLoaded = function () {\n          wait(function () {\n            var styleSheets = document.styleSheets;\n            var styleSheet, i = styleSheets.length, owner;\n            while (i--) {\n              styleSheet = styleSheets[i];\n              owner = styleSheet.ownerNode ? styleSheet.ownerNode : styleSheet.owningElement;\n              if (owner && owner.id === link.id) {\n                passed();\n                return true;\n              }\n            }\n          }, waitForWebKitLinkLoaded);\n        };\n        var waitForGeckoLinkLoaded = function () {\n          wait(function () {\n            try {\n              var cssRules = style.sheet.cssRules;\n              passed();\n              return !!cssRules;\n            } catch (ex) {\n            }\n          }, waitForGeckoLinkLoaded);\n        };\n        url = Tools._addCacheSuffix(url);\n        if (!loadedStates[url]) {\n          state = {\n            passed: [],\n            failed: []\n          };\n          loadedStates[url] = state;\n        } else {\n          state = loadedStates[url];\n        }\n        if (loadedCallback) {\n          state.passed.push(loadedCallback);\n        }\n        if (errorCallback) {\n          state.failed.push(errorCallback);\n        }\n        if (state.status === 1) {\n          return;\n        }\n        if (state.status === 2) {\n          passed();\n          return;\n        }\n        if (state.status === 3) {\n          failed();\n          return;\n        }\n        state.status = 1;\n        link = document.createElement('link');\n        link.rel = 'stylesheet';\n        link.type = 'text/css';\n        link.id = 'u' + idCount++;\n        link.async = false;\n        link.defer = false;\n        startTime = new Date().getTime();\n        if (settings.contentCssCors) {\n          link.crossOrigin = 'anonymous';\n        }\n        if ('onload' in link && !isOldWebKit()) {\n          link.onload = waitForWebKitLinkLoaded;\n          link.onerror = failed;\n        } else {\n          if (domGlobals.navigator.userAgent.indexOf('Firefox') > 0) {\n            style = document.createElement('style');\n            style.textContent = '@import \"' + url + '\"';\n            waitForGeckoLinkLoaded();\n            appendToHead(style);\n            return;\n          }\n          waitForWebKitLinkLoaded();\n        }\n        appendToHead(link);\n        link.href = url;\n      };\n      var loadF = function (url) {\n        return Future.nu(function (resolve) {\n          load(url, compose(resolve, constant(Result.value(url))), compose(resolve, constant(Result.error(url))));\n        });\n      };\n      var unbox = function (result) {\n        return result.fold(identity, identity);\n      };\n      var loadAll = function (urls, success, failure) {\n        par$1(map(urls, loadF)).get(function (result) {\n          var parts = partition(result, function (r) {\n            return r.isValue();\n          });\n          if (parts.fail.length > 0) {\n            failure(parts.fail.map(unbox));\n          } else {\n            success(parts.pass.map(unbox));\n          }\n        });\n      };\n      return {\n        load: load,\n        loadAll: loadAll\n      };\n    }\n\n    function TreeWalker (startNode, rootNode) {\n      var node = startNode;\n      var findSibling = function (node, startName, siblingName, shallow) {\n        var sibling, parent;\n        if (node) {\n          if (!shallow && node[startName]) {\n            return node[startName];\n          }\n          if (node !== rootNode) {\n            sibling = node[siblingName];\n            if (sibling) {\n              return sibling;\n            }\n            for (parent = node.parentNode; parent && parent !== rootNode; parent = parent.parentNode) {\n              sibling = parent[siblingName];\n              if (sibling) {\n                return sibling;\n              }\n            }\n          }\n        }\n      };\n      var findPreviousNode = function (node, startName, siblingName, shallow) {\n        var sibling, parent, child;\n        if (node) {\n          sibling = node[siblingName];\n          if (rootNode && sibling === rootNode) {\n            return;\n          }\n          if (sibling) {\n            if (!shallow) {\n              for (child = sibling[startName]; child; child = child[startName]) {\n                if (!child[startName]) {\n                  return child;\n                }\n              }\n            }\n            return sibling;\n          }\n          parent = node.parentNode;\n          if (parent && parent !== rootNode) {\n            return parent;\n          }\n        }\n      };\n      this.current = function () {\n        return node;\n      };\n      this.next = function (shallow) {\n        node = findSibling(node, 'firstChild', 'nextSibling', shallow);\n        return node;\n      };\n      this.prev = function (shallow) {\n        node = findSibling(node, 'lastChild', 'previousSibling', shallow);\n        return node;\n      };\n      this.prev2 = function (shallow) {\n        node = findPreviousNode(node, 'lastChild', 'previousSibling', shallow);\n        return node;\n      };\n    }\n\n    var blocks = [\n      'article',\n      'aside',\n      'details',\n      'div',\n      'dt',\n      'figcaption',\n      'footer',\n      'form',\n      'fieldset',\n      'header',\n      'hgroup',\n      'html',\n      'main',\n      'nav',\n      'section',\n      'summary',\n      'body',\n      'p',\n      'dl',\n      'multicol',\n      'dd',\n      'figure',\n      'address',\n      'center',\n      'blockquote',\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'listing',\n      'xmp',\n      'pre',\n      'plaintext',\n      'menu',\n      'dir',\n      'ul',\n      'ol',\n      'li',\n      'hr',\n      'table',\n      'tbody',\n      'thead',\n      'tfoot',\n      'th',\n      'tr',\n      'td',\n      'caption'\n    ];\n    var voids = [\n      'area',\n      'base',\n      'basefont',\n      'br',\n      'col',\n      'frame',\n      'hr',\n      'img',\n      'input',\n      'isindex',\n      'link',\n      'meta',\n      'param',\n      'embed',\n      'source',\n      'wbr',\n      'track'\n    ];\n    var tableCells = [\n      'td',\n      'th'\n    ];\n    var tableSections = [\n      'thead',\n      'tbody',\n      'tfoot'\n    ];\n    var textBlocks = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6',\n      'p',\n      'div',\n      'address',\n      'pre',\n      'form',\n      'blockquote',\n      'center',\n      'dir',\n      'fieldset',\n      'header',\n      'footer',\n      'article',\n      'section',\n      'hgroup',\n      'aside',\n      'nav',\n      'figure'\n    ];\n    var headings = [\n      'h1',\n      'h2',\n      'h3',\n      'h4',\n      'h5',\n      'h6'\n    ];\n    var listItems = [\n      'li',\n      'dd',\n      'dt'\n    ];\n    var lists = [\n      'ul',\n      'ol',\n      'dl'\n    ];\n    var wsElements = [\n      'pre',\n      'script',\n      'textarea',\n      'style'\n    ];\n    var lazyLookup = function (items) {\n      var lookup;\n      return function (node) {\n        lookup = lookup ? lookup : mapToObject(items, constant(true));\n        return lookup.hasOwnProperty(name(node));\n      };\n    };\n    var isHeading = lazyLookup(headings);\n    var isBlock = lazyLookup(blocks);\n    var isInline = function (node) {\n      return isElement(node) && !isBlock(node);\n    };\n    var isBr = function (node) {\n      return isElement(node) && name(node) === 'br';\n    };\n    var isTextBlock = lazyLookup(textBlocks);\n    var isList = lazyLookup(lists);\n    var isListItem = lazyLookup(listItems);\n    var isVoid = lazyLookup(voids);\n    var isTableSection = lazyLookup(tableSections);\n    var isTableCell = lazyLookup(tableCells);\n    var isWsPreserveElement = lazyLookup(wsElements);\n\n    var isNodeType = function (type) {\n      return function (node) {\n        return !!node && node.nodeType === type;\n      };\n    };\n    var isRestrictedNode = function (node) {\n      return !!node && !Object.getPrototypeOf(node);\n    };\n    var isElement$1 = isNodeType(1);\n    var matchNodeNames = function (names) {\n      var items = names.toLowerCase().split(' ');\n      return function (node) {\n        var i, name;\n        if (node && node.nodeType) {\n          name = node.nodeName.toLowerCase();\n          for (i = 0; i < items.length; i++) {\n            if (name === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var matchStyleValues = function (name, values) {\n      var items = values.toLowerCase().split(' ');\n      return function (node) {\n        var i, cssValue;\n        if (isElement$1(node)) {\n          for (i = 0; i < items.length; i++) {\n            var computed = node.ownerDocument.defaultView.getComputedStyle(node, null);\n            cssValue = computed ? computed.getPropertyValue(name) : null;\n            if (cssValue === items[i]) {\n              return true;\n            }\n          }\n        }\n        return false;\n      };\n    };\n    var hasPropValue = function (propName, propValue) {\n      return function (node) {\n        return isElement$1(node) && node[propName] === propValue;\n      };\n    };\n    var hasAttribute = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.hasAttribute(attrName);\n      };\n    };\n    var hasAttributeValue = function (attrName, attrValue) {\n      return function (node) {\n        return isElement$1(node) && node.getAttribute(attrName) === attrValue;\n      };\n    };\n    var isBogus = function (node) {\n      return isElement$1(node) && node.hasAttribute('data-mce-bogus');\n    };\n    var isBogusAll = function (node) {\n      return isElement$1(node) && node.getAttribute('data-mce-bogus') === 'all';\n    };\n    var isTable = function (node) {\n      return isElement$1(node) && node.tagName === 'TABLE';\n    };\n    var hasContentEditableState = function (value) {\n      return function (node) {\n        if (isElement$1(node)) {\n          if (node.contentEditable === value) {\n            return true;\n          }\n          if (node.getAttribute('data-mce-contenteditable') === value) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var isText$1 = isNodeType(3);\n    var isComment = isNodeType(8);\n    var isDocument = isNodeType(9);\n    var isDocumentFragment = isNodeType(11);\n    var isBr$1 = matchNodeNames('br');\n    var isContentEditableTrue = hasContentEditableState('true');\n    var isContentEditableFalse = hasContentEditableState('false');\n    var NodeType = {\n      isText: isText$1,\n      isElement: isElement$1,\n      isComment: isComment,\n      isDocument: isDocument,\n      isDocumentFragment: isDocumentFragment,\n      isBr: isBr$1,\n      isContentEditableTrue: isContentEditableTrue,\n      isContentEditableFalse: isContentEditableFalse,\n      isRestrictedNode: isRestrictedNode,\n      matchNodeNames: matchNodeNames,\n      hasPropValue: hasPropValue,\n      hasAttribute: hasAttribute,\n      hasAttributeValue: hasAttributeValue,\n      matchStyleValues: matchStyleValues,\n      isBogus: isBogus,\n      isBogusAll: isBogusAll,\n      isTable: isTable\n    };\n\n    var surroundedBySpans = function (node) {\n      var previousIsSpan = node.previousSibling && node.previousSibling.nodeName === 'SPAN';\n      var nextIsSpan = node.nextSibling && node.nextSibling.nodeName === 'SPAN';\n      return previousIsSpan && nextIsSpan;\n    };\n    var isBookmarkNode = function (node) {\n      return node && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var trimNode = function (dom, node) {\n      var i, children = node.childNodes;\n      if (NodeType.isElement(node) && isBookmarkNode(node)) {\n        return;\n      }\n      for (i = children.length - 1; i >= 0; i--) {\n        trimNode(dom, children[i]);\n      }\n      if (NodeType.isDocument(node) === false) {\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          var trimmedLength = Tools.trim(node.nodeValue).length;\n          if (dom.isBlock(node.parentNode) || trimmedLength > 0) {\n            return;\n          }\n          if (trimmedLength === 0 && surroundedBySpans(node)) {\n            return;\n          }\n        } else if (NodeType.isElement(node)) {\n          children = node.childNodes;\n          if (children.length === 1 && isBookmarkNode(children[0])) {\n            node.parentNode.insertBefore(children[0], node);\n          }\n          if (children.length || isVoid(Element.fromDom(node))) {\n            return;\n          }\n        }\n        dom.remove(node);\n      }\n      return node;\n    };\n    var TrimNode = { trimNode: trimNode };\n\n    var makeMap$1 = Tools.makeMap;\n    var namedEntities, baseEntities, reverseEntities;\n    var attrsCharsRegExp = /[&<>\\\"\\u0060\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var textCharsRegExp = /[<>&\\u007E-\\uD7FF\\uE000-\\uFFEF]|[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g;\n    var rawCharsRegExp = /[<>&\\\"\\']/g;\n    var entityRegExp = /&#([a-z0-9]+);?|&([a-z0-9]+);/gi;\n    var asciiMap = {\n      128: '\\u20AC',\n      130: '\\u201A',\n      131: '\\u0192',\n      132: '\\u201E',\n      133: '\\u2026',\n      134: '\\u2020',\n      135: '\\u2021',\n      136: '\\u02c6',\n      137: '\\u2030',\n      138: '\\u0160',\n      139: '\\u2039',\n      140: '\\u0152',\n      142: '\\u017d',\n      145: '\\u2018',\n      146: '\\u2019',\n      147: '\\u201C',\n      148: '\\u201D',\n      149: '\\u2022',\n      150: '\\u2013',\n      151: '\\u2014',\n      152: '\\u02DC',\n      153: '\\u2122',\n      154: '\\u0161',\n      155: '\\u203A',\n      156: '\\u0153',\n      158: '\\u017e',\n      159: '\\u0178'\n    };\n    baseEntities = {\n      '\"': '&quot;',\n      '\\'': '&#39;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '&': '&amp;',\n      '`': '&#96;'\n    };\n    reverseEntities = {\n      '&lt;': '<',\n      '&gt;': '>',\n      '&amp;': '&',\n      '&quot;': '\"',\n      '&apos;': '\\''\n    };\n    var nativeDecode = function (text) {\n      var elm;\n      elm = Element.fromTag('div').dom();\n      elm.innerHTML = text;\n      return elm.textContent || elm.innerText || text;\n    };\n    var buildEntitiesLookup = function (items, radix) {\n      var i, chr, entity;\n      var lookup = {};\n      if (items) {\n        items = items.split(',');\n        radix = radix || 10;\n        for (i = 0; i < items.length; i += 2) {\n          chr = String.fromCharCode(parseInt(items[i], radix));\n          if (!baseEntities[chr]) {\n            entity = '&' + items[i + 1] + ';';\n            lookup[chr] = entity;\n            lookup[entity] = chr;\n          }\n        }\n        return lookup;\n      }\n    };\n    namedEntities = buildEntitiesLookup('50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,' + '5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,' + '5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,' + '5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,' + '68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,' + '6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,' + '6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,' + '75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,' + '7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,' + '7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,' + 'sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,' + 'st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,' + 't9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,' + 'tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,' + 'u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,' + '81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,' + '8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,' + '8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,' + '8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,' + '8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,' + 'nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,' + 'rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,' + 'Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,' + '80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,' + '811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro', 32);\n    var encodeRaw = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeAllRaw = function (text) {\n      return ('' + text).replace(rawCharsRegExp, function (chr) {\n        return baseEntities[chr] || chr;\n      });\n    };\n    var encodeNumeric = function (text, attr) {\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        if (chr.length > 1) {\n          return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n        }\n        return baseEntities[chr] || '&#' + chr.charCodeAt(0) + ';';\n      });\n    };\n    var encodeNamed = function (text, attr, entities) {\n      entities = entities || namedEntities;\n      return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n        return baseEntities[chr] || entities[chr] || chr;\n      });\n    };\n    var getEncodeFunc = function (name, entities) {\n      var entitiesMap = buildEntitiesLookup(entities) || namedEntities;\n      var encodeNamedAndNumeric = function (text, attr) {\n        return text.replace(attr ? attrsCharsRegExp : textCharsRegExp, function (chr) {\n          if (baseEntities[chr] !== undefined) {\n            return baseEntities[chr];\n          }\n          if (entitiesMap[chr] !== undefined) {\n            return entitiesMap[chr];\n          }\n          if (chr.length > 1) {\n            return '&#' + ((chr.charCodeAt(0) - 55296) * 1024 + (chr.charCodeAt(1) - 56320) + 65536) + ';';\n          }\n          return '&#' + chr.charCodeAt(0) + ';';\n        });\n      };\n      var encodeCustomNamed = function (text, attr) {\n        return encodeNamed(text, attr, entitiesMap);\n      };\n      var nameMap = makeMap$1(name.replace(/\\+/g, ','));\n      if (nameMap.named && nameMap.numeric) {\n        return encodeNamedAndNumeric;\n      }\n      if (nameMap.named) {\n        if (entities) {\n          return encodeCustomNamed;\n        }\n        return encodeNamed;\n      }\n      if (nameMap.numeric) {\n        return encodeNumeric;\n      }\n      return encodeRaw;\n    };\n    var decode = function (text) {\n      return text.replace(entityRegExp, function (all, numeric) {\n        if (numeric) {\n          if (numeric.charAt(0).toLowerCase() === 'x') {\n            numeric = parseInt(numeric.substr(1), 16);\n          } else {\n            numeric = parseInt(numeric, 10);\n          }\n          if (numeric > 65535) {\n            numeric -= 65536;\n            return String.fromCharCode(55296 + (numeric >> 10), 56320 + (numeric & 1023));\n          }\n          return asciiMap[numeric] || String.fromCharCode(numeric);\n        }\n        return reverseEntities[all] || namedEntities[all] || nativeDecode(all);\n      });\n    };\n    var Entities = {\n      encodeRaw: encodeRaw,\n      encodeAllRaw: encodeAllRaw,\n      encodeNumeric: encodeNumeric,\n      encodeNamed: encodeNamed,\n      getEncodeFunc: getEncodeFunc,\n      decode: decode\n    };\n\n    var mapCache = {}, dummyObj = {};\n    var makeMap$2 = Tools.makeMap, each$4 = Tools.each, extend$1 = Tools.extend, explode$1 = Tools.explode, inArray$1 = Tools.inArray;\n    var split = function (items, delim) {\n      items = Tools.trim(items);\n      return items ? items.split(delim || ' ') : [];\n    };\n    var compileSchema = function (type) {\n      var schema = {};\n      var globalAttributes, blockContent;\n      var phrasingContent, flowContent, html4BlockContent, html4PhrasingContent;\n      var add = function (name, attributes, children) {\n        var ni, attributesOrder, element;\n        var arrayToMap = function (array, obj) {\n          var map = {};\n          var i, l;\n          for (i = 0, l = array.length; i < l; i++) {\n            map[array[i]] = obj || {};\n          }\n          return map;\n        };\n        children = children || [];\n        attributes = attributes || '';\n        if (typeof children === 'string') {\n          children = split(children);\n        }\n        name = split(name);\n        ni = name.length;\n        while (ni--) {\n          attributesOrder = split([\n            globalAttributes,\n            attributes\n          ].join(' '));\n          element = {\n            attributes: arrayToMap(attributesOrder),\n            attributesOrder: attributesOrder,\n            children: arrayToMap(children, dummyObj)\n          };\n          schema[name[ni]] = element;\n        }\n      };\n      var addAttrs = function (name, attributes) {\n        var ni, schemaItem, i, l;\n        name = split(name);\n        ni = name.length;\n        attributes = split(attributes);\n        while (ni--) {\n          schemaItem = schema[name[ni]];\n          for (i = 0, l = attributes.length; i < l; i++) {\n            schemaItem.attributes[attributes[i]] = {};\n            schemaItem.attributesOrder.push(attributes[i]);\n          }\n        }\n      };\n      if (mapCache[type]) {\n        return mapCache[type];\n      }\n      globalAttributes = 'id accesskey class dir lang style tabindex title role';\n      blockContent = 'address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul';\n      phrasingContent = 'a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd ' + 'label map noscript object q s samp script select small span strong sub sup ' + 'textarea u var #text #comment';\n      if (type !== 'html4') {\n        globalAttributes += ' contenteditable contextmenu draggable dropzone ' + 'hidden spellcheck translate';\n        blockContent += ' article aside details dialog figure main header footer hgroup section nav';\n        phrasingContent += ' audio canvas command datalist mark meter output picture ' + 'progress time wbr video ruby bdi keygen';\n      }\n      if (type !== 'html5-strict') {\n        globalAttributes += ' xml:lang';\n        html4PhrasingContent = 'acronym applet basefont big font strike tt';\n        phrasingContent = [\n          phrasingContent,\n          html4PhrasingContent\n        ].join(' ');\n        each$4(split(html4PhrasingContent), function (name) {\n          add(name, '', phrasingContent);\n        });\n        html4BlockContent = 'center dir isindex noframes';\n        blockContent = [\n          blockContent,\n          html4BlockContent\n        ].join(' ');\n        flowContent = [\n          blockContent,\n          phrasingContent\n        ].join(' ');\n        each$4(split(html4BlockContent), function (name) {\n          add(name, '', flowContent);\n        });\n      }\n      flowContent = flowContent || [\n        blockContent,\n        phrasingContent\n      ].join(' ');\n      add('html', 'manifest', 'head body');\n      add('head', '', 'base command link meta noscript script style title');\n      add('title hr noscript br');\n      add('base', 'href target');\n      add('link', 'href rel media hreflang type sizes hreflang');\n      add('meta', 'name http-equiv content charset');\n      add('style', 'media type scoped');\n      add('script', 'src async defer type charset');\n      add('body', 'onafterprint onbeforeprint onbeforeunload onblur onerror onfocus ' + 'onhashchange onload onmessage onoffline ononline onpagehide onpageshow ' + 'onpopstate onresize onscroll onstorage onunload', flowContent);\n      add('address dt dd div caption', '', flowContent);\n      add('h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn', '', phrasingContent);\n      add('blockquote', 'cite', flowContent);\n      add('ol', 'reversed start type', 'li');\n      add('ul', '', 'li');\n      add('li', 'value', flowContent);\n      add('dl', '', 'dt dd');\n      add('a', 'href target rel media hreflang type', phrasingContent);\n      add('q', 'cite', phrasingContent);\n      add('ins del', 'cite datetime', flowContent);\n      add('img', 'src sizes srcset alt usemap ismap width height');\n      add('iframe', 'src name width height', flowContent);\n      add('embed', 'src type width height');\n      add('object', 'data type typemustmatch name usemap form width height', [\n        flowContent,\n        'param'\n      ].join(' '));\n      add('param', 'name value');\n      add('map', 'name', [\n        flowContent,\n        'area'\n      ].join(' '));\n      add('area', 'alt coords shape href target rel media hreflang type');\n      add('table', 'border', 'caption colgroup thead tfoot tbody tr' + (type === 'html4' ? ' col' : ''));\n      add('colgroup', 'span', 'col');\n      add('col', 'span');\n      add('tbody thead tfoot', '', 'tr');\n      add('tr', '', 'td th');\n      add('td', 'colspan rowspan headers', flowContent);\n      add('th', 'colspan rowspan headers scope abbr', flowContent);\n      add('form', 'accept-charset action autocomplete enctype method name novalidate target', flowContent);\n      add('fieldset', 'disabled form name', [\n        flowContent,\n        'legend'\n      ].join(' '));\n      add('label', 'form for', phrasingContent);\n      add('input', 'accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate ' + 'formtarget height list max maxlength min multiple name pattern readonly required size src step type value width');\n      add('button', 'disabled form formaction formenctype formmethod formnovalidate formtarget name type value', type === 'html4' ? flowContent : phrasingContent);\n      add('select', 'disabled form multiple name required size', 'option optgroup');\n      add('optgroup', 'disabled label', 'option');\n      add('option', 'disabled label selected value');\n      add('textarea', 'cols dirname disabled form maxlength name readonly required rows wrap');\n      add('menu', 'type label', [\n        flowContent,\n        'li'\n      ].join(' '));\n      add('noscript', '', flowContent);\n      if (type !== 'html4') {\n        add('wbr');\n        add('ruby', '', [\n          phrasingContent,\n          'rt rp'\n        ].join(' '));\n        add('figcaption', '', flowContent);\n        add('mark rt rp summary bdi', '', phrasingContent);\n        add('canvas', 'width height', flowContent);\n        add('video', 'src crossorigin poster preload autoplay mediagroup loop ' + 'muted controls width height buffered', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('audio', 'src crossorigin preload autoplay mediagroup loop muted controls ' + 'buffered volume', [\n          flowContent,\n          'track source'\n        ].join(' '));\n        add('picture', '', 'img source');\n        add('source', 'src srcset type media sizes');\n        add('track', 'kind src srclang label default');\n        add('datalist', '', [\n          phrasingContent,\n          'option'\n        ].join(' '));\n        add('article section nav aside main header footer', '', flowContent);\n        add('hgroup', '', 'h1 h2 h3 h4 h5 h6');\n        add('figure', '', [\n          flowContent,\n          'figcaption'\n        ].join(' '));\n        add('time', 'datetime', phrasingContent);\n        add('dialog', 'open', flowContent);\n        add('command', 'type label icon disabled checked radiogroup command');\n        add('output', 'for form name', phrasingContent);\n        add('progress', 'value max', phrasingContent);\n        add('meter', 'value min max low high optimum', phrasingContent);\n        add('details', 'open', [\n          flowContent,\n          'summary'\n        ].join(' '));\n        add('keygen', 'autofocus challenge disabled form keytype name');\n      }\n      if (type !== 'html5-strict') {\n        addAttrs('script', 'language xml:space');\n        addAttrs('style', 'xml:space');\n        addAttrs('object', 'declare classid code codebase codetype archive standby align border hspace vspace');\n        addAttrs('embed', 'align name hspace vspace');\n        addAttrs('param', 'valuetype type');\n        addAttrs('a', 'charset name rev shape coords');\n        addAttrs('br', 'clear');\n        addAttrs('applet', 'codebase archive code object alt name width height align hspace vspace');\n        addAttrs('img', 'name longdesc align border hspace vspace');\n        addAttrs('iframe', 'longdesc frameborder marginwidth marginheight scrolling align');\n        addAttrs('font basefont', 'size color face');\n        addAttrs('input', 'usemap align');\n        addAttrs('select', 'onchange');\n        addAttrs('textarea');\n        addAttrs('h1 h2 h3 h4 h5 h6 div p legend caption', 'align');\n        addAttrs('ul', 'type compact');\n        addAttrs('li', 'type');\n        addAttrs('ol dl menu dir', 'compact');\n        addAttrs('pre', 'width xml:space');\n        addAttrs('hr', 'align noshade size width');\n        addAttrs('isindex', 'prompt');\n        addAttrs('table', 'summary width frame rules cellspacing cellpadding align bgcolor');\n        addAttrs('col', 'width align char charoff valign');\n        addAttrs('colgroup', 'width align char charoff valign');\n        addAttrs('thead', 'align char charoff valign');\n        addAttrs('tr', 'align char charoff valign bgcolor');\n        addAttrs('th', 'axis align char charoff valign nowrap bgcolor width height');\n        addAttrs('form', 'accept');\n        addAttrs('td', 'abbr axis scope align char charoff valign nowrap bgcolor width height');\n        addAttrs('tfoot', 'align char charoff valign');\n        addAttrs('tbody', 'align char charoff valign');\n        addAttrs('area', 'nohref');\n        addAttrs('body', 'background bgcolor text link vlink alink');\n      }\n      if (type !== 'html4') {\n        addAttrs('input button select textarea', 'autofocus');\n        addAttrs('input textarea', 'placeholder');\n        addAttrs('a', 'download');\n        addAttrs('link script img', 'crossorigin');\n        addAttrs('iframe', 'sandbox seamless allowfullscreen');\n      }\n      each$4(split('a form meter progress dfn'), function (name) {\n        if (schema[name]) {\n          delete schema[name].children[name];\n        }\n      });\n      delete schema.caption.children.table;\n      delete schema.script;\n      mapCache[type] = schema;\n      return schema;\n    };\n    var compileElementMap = function (value, mode) {\n      var styles;\n      if (value) {\n        styles = {};\n        if (typeof value === 'string') {\n          value = { '*': value };\n        }\n        each$4(value, function (value, key) {\n          styles[key] = styles[key.toUpperCase()] = mode === 'map' ? makeMap$2(value, /[, ]/) : explode$1(value, /[, ]/);\n        });\n      }\n      return styles;\n    };\n    function Schema(settings) {\n      var elements = {};\n      var children = {};\n      var patternElements = [];\n      var validStyles;\n      var invalidStyles;\n      var schemaItems;\n      var whiteSpaceElementsMap, selfClosingElementsMap, shortEndedElementsMap, boolAttrMap, validClasses;\n      var blockElementsMap, nonEmptyElementsMap, moveCaretBeforeOnEnterElementsMap, textBlockElementsMap, textInlineElementsMap;\n      var customElementsMap = {}, specialElements = {};\n      var createLookupTable = function (option, defaultValue, extendWith) {\n        var value = settings[option];\n        if (!value) {\n          value = mapCache[option];\n          if (!value) {\n            value = makeMap$2(defaultValue, ' ', makeMap$2(defaultValue.toUpperCase(), ' '));\n            value = extend$1(value, extendWith);\n            mapCache[option] = value;\n          }\n        } else {\n          value = makeMap$2(value, /[, ]/, makeMap$2(value.toUpperCase(), /[, ]/));\n        }\n        return value;\n      };\n      settings = settings || {};\n      schemaItems = compileSchema(settings.schema);\n      if (settings.verify_html === false) {\n        settings.valid_elements = '*[*]';\n      }\n      validStyles = compileElementMap(settings.valid_styles);\n      invalidStyles = compileElementMap(settings.invalid_styles, 'map');\n      validClasses = compileElementMap(settings.valid_classes, 'map');\n      whiteSpaceElementsMap = createLookupTable('whitespace_elements', 'pre script noscript style textarea video audio iframe object code');\n      selfClosingElementsMap = createLookupTable('self_closing_elements', 'colgroup dd dt li option p td tfoot th thead tr');\n      shortEndedElementsMap = createLookupTable('short_ended_elements', 'area base basefont br col frame hr img input isindex link ' + 'meta param embed source wbr track');\n      boolAttrMap = createLookupTable('boolean_attributes', 'checked compact declare defer disabled ismap multiple nohref noresize ' + 'noshade nowrap readonly selected autoplay loop controls');\n      nonEmptyElementsMap = createLookupTable('non_empty_elements', 'td th iframe video audio object ' + 'script pre code', shortEndedElementsMap);\n      moveCaretBeforeOnEnterElementsMap = createLookupTable('move_caret_before_on_enter_elements', 'table', nonEmptyElementsMap);\n      textBlockElementsMap = createLookupTable('text_block_elements', 'h1 h2 h3 h4 h5 h6 p div address pre form ' + 'blockquote center dir fieldset header footer article section hgroup aside main nav figure');\n      blockElementsMap = createLookupTable('block_elements', 'hr table tbody thead tfoot ' + 'th tr td li ol ul caption dl dt dd noscript menu isindex option ' + 'datalist select optgroup figcaption details summary', textBlockElementsMap);\n      textInlineElementsMap = createLookupTable('text_inline_elements', 'span strong b em i font strike u var cite ' + 'dfn code mark q sup sub samp');\n      each$4((settings.special || 'script noscript noframes noembed title style textarea xmp').split(' '), function (name) {\n        specialElements[name] = new RegExp('</' + name + '[^>]*>', 'gi');\n      });\n      var patternToRegExp = function (str) {\n        return new RegExp('^' + str.replace(/([?+*])/g, '.$1') + '$');\n      };\n      var addValidElements = function (validElements) {\n        var ei, el, ai, al, matches, element, attr, attrData, elementName, attrName, attrType, attributes, attributesOrder, prefix, outputName, globalAttributes, globalAttributesOrder, key, value;\n        var elementRuleRegExp = /^([#+\\-])?([^\\[!\\/]+)(?:\\/([^\\[!]+))?(?:(!?)\\[([^\\]]+)\\])?$/, attrRuleRegExp = /^([!\\-])?(\\w+[\\\\:]:\\w+|[^=:<]+)?(?:([=:<])(.*))?$/, hasPatternsRegExp = /[*?+]/;\n        if (validElements) {\n          validElements = split(validElements, ',');\n          if (elements['@']) {\n            globalAttributes = elements['@'].attributes;\n            globalAttributesOrder = elements['@'].attributesOrder;\n          }\n          for (ei = 0, el = validElements.length; ei < el; ei++) {\n            matches = elementRuleRegExp.exec(validElements[ei]);\n            if (matches) {\n              prefix = matches[1];\n              elementName = matches[2];\n              outputName = matches[3];\n              attrData = matches[5];\n              attributes = {};\n              attributesOrder = [];\n              element = {\n                attributes: attributes,\n                attributesOrder: attributesOrder\n              };\n              if (prefix === '#') {\n                element.paddEmpty = true;\n              }\n              if (prefix === '-') {\n                element.removeEmpty = true;\n              }\n              if (matches[4] === '!') {\n                element.removeEmptyAttrs = true;\n              }\n              if (globalAttributes) {\n                for (key in globalAttributes) {\n                  attributes[key] = globalAttributes[key];\n                }\n                attributesOrder.push.apply(attributesOrder, globalAttributesOrder);\n              }\n              if (attrData) {\n                attrData = split(attrData, '|');\n                for (ai = 0, al = attrData.length; ai < al; ai++) {\n                  matches = attrRuleRegExp.exec(attrData[ai]);\n                  if (matches) {\n                    attr = {};\n                    attrType = matches[1];\n                    attrName = matches[2].replace(/[\\\\:]:/g, ':');\n                    prefix = matches[3];\n                    value = matches[4];\n                    if (attrType === '!') {\n                      element.attributesRequired = element.attributesRequired || [];\n                      element.attributesRequired.push(attrName);\n                      attr.required = true;\n                    }\n                    if (attrType === '-') {\n                      delete attributes[attrName];\n                      attributesOrder.splice(inArray$1(attributesOrder, attrName), 1);\n                      continue;\n                    }\n                    if (prefix) {\n                      if (prefix === '=') {\n                        element.attributesDefault = element.attributesDefault || [];\n                        element.attributesDefault.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.defaultValue = value;\n                      }\n                      if (prefix === ':') {\n                        element.attributesForced = element.attributesForced || [];\n                        element.attributesForced.push({\n                          name: attrName,\n                          value: value\n                        });\n                        attr.forcedValue = value;\n                      }\n                      if (prefix === '<') {\n                        attr.validValues = makeMap$2(value, '?');\n                      }\n                    }\n                    if (hasPatternsRegExp.test(attrName)) {\n                      element.attributePatterns = element.attributePatterns || [];\n                      attr.pattern = patternToRegExp(attrName);\n                      element.attributePatterns.push(attr);\n                    } else {\n                      if (!attributes[attrName]) {\n                        attributesOrder.push(attrName);\n                      }\n                      attributes[attrName] = attr;\n                    }\n                  }\n                }\n              }\n              if (!globalAttributes && elementName === '@') {\n                globalAttributes = attributes;\n                globalAttributesOrder = attributesOrder;\n              }\n              if (outputName) {\n                element.outputName = elementName;\n                elements[outputName] = element;\n              }\n              if (hasPatternsRegExp.test(elementName)) {\n                element.pattern = patternToRegExp(elementName);\n                patternElements.push(element);\n              } else {\n                elements[elementName] = element;\n              }\n            }\n          }\n        }\n      };\n      var setValidElements = function (validElements) {\n        elements = {};\n        patternElements = [];\n        addValidElements(validElements);\n        each$4(schemaItems, function (element, name) {\n          children[name] = element.children;\n        });\n      };\n      var addCustomElements = function (customElements) {\n        var customElementRegExp = /^(~)?(.+)$/;\n        if (customElements) {\n          mapCache.text_block_elements = mapCache.block_elements = null;\n          each$4(split(customElements, ','), function (rule) {\n            var matches = customElementRegExp.exec(rule), inline = matches[1] === '~', cloneName = inline ? 'span' : 'div', name = matches[2];\n            children[name] = children[cloneName];\n            customElementsMap[name] = cloneName;\n            if (!inline) {\n              blockElementsMap[name.toUpperCase()] = {};\n              blockElementsMap[name] = {};\n            }\n            if (!elements[name]) {\n              var customRule = elements[cloneName];\n              customRule = extend$1({}, customRule);\n              delete customRule.removeEmptyAttrs;\n              delete customRule.removeEmpty;\n              elements[name] = customRule;\n            }\n            each$4(children, function (element, elmName) {\n              if (element[cloneName]) {\n                children[elmName] = element = extend$1({}, children[elmName]);\n                element[name] = element[cloneName];\n              }\n            });\n          });\n        }\n      };\n      var addValidChildren = function (validChildren) {\n        var childRuleRegExp = /^([+\\-]?)(\\w+)\\[([^\\]]+)\\]$/;\n        mapCache[settings.schema] = null;\n        if (validChildren) {\n          each$4(split(validChildren, ','), function (rule) {\n            var matches = childRuleRegExp.exec(rule);\n            var parent, prefix;\n            if (matches) {\n              prefix = matches[1];\n              if (prefix) {\n                parent = children[matches[2]];\n              } else {\n                parent = children[matches[2]] = { '#comment': {} };\n              }\n              parent = children[matches[2]];\n              each$4(split(matches[3], '|'), function (child) {\n                if (prefix === '-') {\n                  delete parent[child];\n                } else {\n                  parent[child] = {};\n                }\n              });\n            }\n          });\n        }\n      };\n      var getElementRule = function (name) {\n        var element = elements[name], i;\n        if (element) {\n          return element;\n        }\n        i = patternElements.length;\n        while (i--) {\n          element = patternElements[i];\n          if (element.pattern.test(name)) {\n            return element;\n          }\n        }\n      };\n      if (!settings.valid_elements) {\n        each$4(schemaItems, function (element, name) {\n          elements[name] = {\n            attributes: element.attributes,\n            attributesOrder: element.attributesOrder\n          };\n          children[name] = element.children;\n        });\n        if (settings.schema !== 'html5') {\n          each$4(split('strong/b em/i'), function (item) {\n            item = split(item, '/');\n            elements[item[1]].outputName = item[0];\n          });\n        }\n        each$4(split('ol ul sub sup blockquote span font a table tbody tr strong em b i'), function (name) {\n          if (elements[name]) {\n            elements[name].removeEmpty = true;\n          }\n        });\n        each$4(split('p h1 h2 h3 h4 h5 h6 th td pre div address caption li'), function (name) {\n          elements[name].paddEmpty = true;\n        });\n        each$4(split('span'), function (name) {\n          elements[name].removeEmptyAttrs = true;\n        });\n      } else {\n        setValidElements(settings.valid_elements);\n      }\n      addCustomElements(settings.custom_elements);\n      addValidChildren(settings.valid_children);\n      addValidElements(settings.extended_valid_elements);\n      addValidChildren('+ol[ul|ol],+ul[ul|ol]');\n      each$4({\n        dd: 'dl',\n        dt: 'dl',\n        li: 'ul ol',\n        td: 'tr',\n        th: 'tr',\n        tr: 'tbody thead tfoot',\n        tbody: 'table',\n        thead: 'table',\n        tfoot: 'table',\n        legend: 'fieldset',\n        area: 'map',\n        param: 'video audio object'\n      }, function (parents, item) {\n        if (elements[item]) {\n          elements[item].parentsRequired = split(parents);\n        }\n      });\n      if (settings.invalid_elements) {\n        each$4(explode$1(settings.invalid_elements), function (item) {\n          if (elements[item]) {\n            delete elements[item];\n          }\n        });\n      }\n      if (!getElementRule('span')) {\n        addValidElements('span[!data-mce-type|*]');\n      }\n      var getValidStyles = function () {\n        return validStyles;\n      };\n      var getInvalidStyles = function () {\n        return invalidStyles;\n      };\n      var getValidClasses = function () {\n        return validClasses;\n      };\n      var getBoolAttrs = function () {\n        return boolAttrMap;\n      };\n      var getBlockElements = function () {\n        return blockElementsMap;\n      };\n      var getTextBlockElements = function () {\n        return textBlockElementsMap;\n      };\n      var getTextInlineElements = function () {\n        return textInlineElementsMap;\n      };\n      var getShortEndedElements = function () {\n        return shortEndedElementsMap;\n      };\n      var getSelfClosingElements = function () {\n        return selfClosingElementsMap;\n      };\n      var getNonEmptyElements = function () {\n        return nonEmptyElementsMap;\n      };\n      var getMoveCaretBeforeOnEnterElements = function () {\n        return moveCaretBeforeOnEnterElementsMap;\n      };\n      var getWhiteSpaceElements = function () {\n        return whiteSpaceElementsMap;\n      };\n      var getSpecialElements = function () {\n        return specialElements;\n      };\n      var isValidChild = function (name, child) {\n        var parent = children[name.toLowerCase()];\n        return !!(parent && parent[child.toLowerCase()]);\n      };\n      var isValid = function (name, attr) {\n        var attrPatterns, i;\n        var rule = getElementRule(name);\n        if (rule) {\n          if (attr) {\n            if (rule.attributes[attr]) {\n              return true;\n            }\n            attrPatterns = rule.attributePatterns;\n            if (attrPatterns) {\n              i = attrPatterns.length;\n              while (i--) {\n                if (attrPatterns[i].pattern.test(name)) {\n                  return true;\n                }\n              }\n            }\n          } else {\n            return true;\n          }\n        }\n        return false;\n      };\n      var getCustomElements = function () {\n        return customElementsMap;\n      };\n      return {\n        children: children,\n        elements: elements,\n        getValidStyles: getValidStyles,\n        getValidClasses: getValidClasses,\n        getBlockElements: getBlockElements,\n        getInvalidStyles: getInvalidStyles,\n        getShortEndedElements: getShortEndedElements,\n        getTextBlockElements: getTextBlockElements,\n        getTextInlineElements: getTextInlineElements,\n        getBoolAttrs: getBoolAttrs,\n        getElementRule: getElementRule,\n        getSelfClosingElements: getSelfClosingElements,\n        getNonEmptyElements: getNonEmptyElements,\n        getMoveCaretBeforeOnEnterElements: getMoveCaretBeforeOnEnterElements,\n        getWhiteSpaceElements: getWhiteSpaceElements,\n        getSpecialElements: getSpecialElements,\n        isValidChild: isValidChild,\n        isValid: isValid,\n        getCustomElements: getCustomElements,\n        addValidElements: addValidElements,\n        setValidElements: setValidElements,\n        addCustomElements: addCustomElements,\n        addValidChildren: addValidChildren\n      };\n    }\n\n    var toHex = function (match, r, g, b) {\n      var hex = function (val) {\n        val = parseInt(val, 10).toString(16);\n        return val.length > 1 ? val : '0' + val;\n      };\n      return '#' + hex(r) + hex(g) + hex(b);\n    };\n    function Styles(settings, schema) {\n      var rgbRegExp = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*\\)/gi;\n      var urlOrStrRegExp = /(?:url(?:(?:\\(\\s*\\\"([^\\\"]+)\\\"\\s*\\))|(?:\\(\\s*\\'([^\\']+)\\'\\s*\\))|(?:\\(\\s*([^)\\s]+)\\s*\\))))|(?:\\'([^\\']+)\\')|(?:\\\"([^\\\"]+)\\\")/gi;\n      var styleRegExp = /\\s*([^:]+):\\s*([^;]+);?/g;\n      var trimRightRegExp = /\\s+$/;\n      var i;\n      var encodingLookup = {};\n      var encodingItems;\n      var validStyles;\n      var invalidStyles;\n      var invisibleChar = '\\uFEFF';\n      settings = settings || {};\n      if (schema) {\n        validStyles = schema.getValidStyles();\n        invalidStyles = schema.getInvalidStyles();\n      }\n      encodingItems = ('\\\\\" \\\\\\' \\\\; \\\\: ; : ' + invisibleChar).split(' ');\n      for (i = 0; i < encodingItems.length; i++) {\n        encodingLookup[encodingItems[i]] = invisibleChar + i;\n        encodingLookup[invisibleChar + i] = encodingItems[i];\n      }\n      return {\n        toHex: function (color) {\n          return color.replace(rgbRegExp, toHex);\n        },\n        parse: function (css) {\n          var styles = {};\n          var matches, name, value, isEncoded;\n          var urlConverter = settings.url_converter;\n          var urlConverterScope = settings.url_converter_scope || this;\n          var compress = function (prefix, suffix, noJoin) {\n            var top, right, bottom, left;\n            top = styles[prefix + '-top' + suffix];\n            if (!top) {\n              return;\n            }\n            right = styles[prefix + '-right' + suffix];\n            if (!right) {\n              return;\n            }\n            bottom = styles[prefix + '-bottom' + suffix];\n            if (!bottom) {\n              return;\n            }\n            left = styles[prefix + '-left' + suffix];\n            if (!left) {\n              return;\n            }\n            var box = [\n              top,\n              right,\n              bottom,\n              left\n            ];\n            i = box.length - 1;\n            while (i--) {\n              if (box[i] !== box[i + 1]) {\n                break;\n              }\n            }\n            if (i > -1 && noJoin) {\n              return;\n            }\n            styles[prefix + suffix] = i === -1 ? box[0] : box.join(' ');\n            delete styles[prefix + '-top' + suffix];\n            delete styles[prefix + '-right' + suffix];\n            delete styles[prefix + '-bottom' + suffix];\n            delete styles[prefix + '-left' + suffix];\n          };\n          var canCompress = function (key) {\n            var value = styles[key], i;\n            if (!value) {\n              return;\n            }\n            value = value.split(' ');\n            i = value.length;\n            while (i--) {\n              if (value[i] !== value[0]) {\n                return false;\n              }\n            }\n            styles[key] = value[0];\n            return true;\n          };\n          var compress2 = function (target, a, b, c) {\n            if (!canCompress(a)) {\n              return;\n            }\n            if (!canCompress(b)) {\n              return;\n            }\n            if (!canCompress(c)) {\n              return;\n            }\n            styles[target] = styles[a] + ' ' + styles[b] + ' ' + styles[c];\n            delete styles[a];\n            delete styles[b];\n            delete styles[c];\n          };\n          var encode = function (str) {\n            isEncoded = true;\n            return encodingLookup[str];\n          };\n          var decode = function (str, keepSlashes) {\n            if (isEncoded) {\n              str = str.replace(/\\uFEFF[0-9]/g, function (str) {\n                return encodingLookup[str];\n              });\n            }\n            if (!keepSlashes) {\n              str = str.replace(/\\\\([\\'\\\";:])/g, '$1');\n            }\n            return str;\n          };\n          var decodeSingleHexSequence = function (escSeq) {\n            return String.fromCharCode(parseInt(escSeq.slice(1), 16));\n          };\n          var decodeHexSequences = function (value) {\n            return value.replace(/\\\\[0-9a-f]+/gi, decodeSingleHexSequence);\n          };\n          var processUrl = function (match, url, url2, url3, str, str2) {\n            str = str || str2;\n            if (str) {\n              str = decode(str);\n              return '\\'' + str.replace(/\\'/g, '\\\\\\'') + '\\'';\n            }\n            url = decode(url || url2 || url3);\n            if (!settings.allow_script_urls) {\n              var scriptUrl = url.replace(/[\\s\\r\\n]+/g, '');\n              if (/(java|vb)script:/i.test(scriptUrl)) {\n                return '';\n              }\n              if (!settings.allow_svg_data_urls && /^data:image\\/svg/i.test(scriptUrl)) {\n                return '';\n              }\n            }\n            if (urlConverter) {\n              url = urlConverter.call(urlConverterScope, url, 'style');\n            }\n            return 'url(\\'' + url.replace(/\\'/g, '\\\\\\'') + '\\')';\n          };\n          if (css) {\n            css = css.replace(/[\\u0000-\\u001F]/g, '');\n            css = css.replace(/\\\\[\\\"\\';:\\uFEFF]/g, encode).replace(/\\\"[^\\\"]+\\\"|\\'[^\\']+\\'/g, function (str) {\n              return str.replace(/[;:]/g, encode);\n            });\n            while (matches = styleRegExp.exec(css)) {\n              styleRegExp.lastIndex = matches.index + matches[0].length;\n              name = matches[1].replace(trimRightRegExp, '').toLowerCase();\n              value = matches[2].replace(trimRightRegExp, '');\n              if (name && value) {\n                name = decodeHexSequences(name);\n                value = decodeHexSequences(value);\n                if (name.indexOf(invisibleChar) !== -1 || name.indexOf('\"') !== -1) {\n                  continue;\n                }\n                if (!settings.allow_script_urls && (name === 'behavior' || /expression\\s*\\(|\\/\\*|\\*\\//.test(value))) {\n                  continue;\n                }\n                if (name === 'font-weight' && value === '700') {\n                  value = 'bold';\n                } else if (name === 'color' || name === 'background-color') {\n                  value = value.toLowerCase();\n                }\n                value = value.replace(rgbRegExp, toHex);\n                value = value.replace(urlOrStrRegExp, processUrl);\n                styles[name] = isEncoded ? decode(value, true) : value;\n              }\n            }\n            compress('border', '', true);\n            compress('border', '-width');\n            compress('border', '-color');\n            compress('border', '-style');\n            compress('padding', '');\n            compress('margin', '');\n            compress2('border', 'border-width', 'border-style', 'border-color');\n            if (styles.border === 'medium none') {\n              delete styles.border;\n            }\n            if (styles['border-image'] === 'none') {\n              delete styles['border-image'];\n            }\n          }\n          return styles;\n        },\n        serialize: function (styles, elementName) {\n          var css = '', name, value;\n          var serializeStyles = function (name) {\n            var styleList, i, l, value;\n            styleList = validStyles[name];\n            if (styleList) {\n              for (i = 0, l = styleList.length; i < l; i++) {\n                name = styleList[i];\n                value = styles[name];\n                if (value) {\n                  css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n                }\n              }\n            }\n          };\n          var isValid = function (name, elementName) {\n            var styleMap;\n            styleMap = invalidStyles['*'];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            styleMap = invalidStyles[elementName];\n            if (styleMap && styleMap[name]) {\n              return false;\n            }\n            return true;\n          };\n          if (elementName && validStyles) {\n            serializeStyles('*');\n            serializeStyles(elementName);\n          } else {\n            for (name in styles) {\n              value = styles[name];\n              if (value && (!invalidStyles || isValid(name, elementName))) {\n                css += (css.length > 0 ? ' ' : '') + name + ': ' + value + ';';\n              }\n            }\n          }\n          return css;\n        }\n      };\n    }\n\n    var each$5 = Tools.each;\n    var grep$1 = Tools.grep;\n    var isIE = Env.ie;\n    var simpleSelectorRe = /^([a-z0-9],?)+$/i;\n    var whiteSpaceRegExp$2 = /^[ \\t\\r\\n]*$/;\n    var setupAttrHooks = function (styles, settings, getContext) {\n      var attrHooks = {};\n      var keepValues = settings.keep_values;\n      var keepUrlHook = {\n        set: function ($elm, value, name) {\n          if (settings.url_converter) {\n            value = settings.url_converter.call(settings.url_converter_scope || getContext(), value, name, $elm[0]);\n          }\n          $elm.attr('data-mce-' + name, value).attr(name, value);\n        },\n        get: function ($elm, name) {\n          return $elm.attr('data-mce-' + name) || $elm.attr(name);\n        }\n      };\n      attrHooks = {\n        style: {\n          set: function ($elm, value) {\n            if (value !== null && typeof value === 'object') {\n              $elm.css(value);\n              return;\n            }\n            if (keepValues) {\n              $elm.attr('data-mce-style', value);\n            }\n            $elm.attr('style', value);\n          },\n          get: function ($elm) {\n            var value = $elm.attr('data-mce-style') || $elm.attr('style');\n            value = styles.serialize(styles.parse(value), $elm[0].nodeName);\n            return value;\n          }\n        }\n      };\n      if (keepValues) {\n        attrHooks.href = attrHooks.src = keepUrlHook;\n      }\n      return attrHooks;\n    };\n    var updateInternalStyleAttr = function (styles, $elm) {\n      var rawValue = $elm.attr('style');\n      var value = styles.serialize(styles.parse(rawValue), $elm[0].nodeName);\n      if (!value) {\n        value = null;\n      }\n      $elm.attr('data-mce-style', value);\n    };\n    var findNodeIndex = function (node, normalized) {\n      var idx = 0, lastNodeType, nodeType;\n      if (node) {\n        for (lastNodeType = node.nodeType, node = node.previousSibling; node; node = node.previousSibling) {\n          nodeType = node.nodeType;\n          if (normalized && nodeType === 3) {\n            if (nodeType === lastNodeType || !node.nodeValue.length) {\n              continue;\n            }\n          }\n          idx++;\n          lastNodeType = nodeType;\n        }\n      }\n      return idx;\n    };\n    function DOMUtils(doc, settings) {\n      var _this = this;\n      if (settings === void 0) {\n        settings = {};\n      }\n      var attrHooks;\n      var addedStyles = {};\n      var win = domGlobals.window;\n      var files = {};\n      var counter = 0;\n      var stdMode = true;\n      var boxModel = true;\n      var styleSheetLoader = StyleSheetLoader(doc, { contentCssCors: settings.contentCssCors });\n      var boundEvents = [];\n      var schema = settings.schema ? settings.schema : Schema({});\n      var styles = Styles({\n        url_converter: settings.url_converter,\n        url_converter_scope: settings.url_converter_scope\n      }, settings.schema);\n      var events = settings.ownEvents ? new EventUtils(settings.proxy) : EventUtils.Event;\n      var blockElementsMap = schema.getBlockElements();\n      var $ = DomQuery.overrideDefaults(function () {\n        return {\n          context: doc,\n          element: self.getRoot()\n        };\n      });\n      var isBlock = function (node) {\n        if (typeof node === 'string') {\n          return !!blockElementsMap[node];\n        } else if (node) {\n          var type = node.nodeType;\n          if (type) {\n            return !!(type === 1 && blockElementsMap[node.nodeName]);\n          }\n        }\n        return false;\n      };\n      var get = function (elm) {\n        if (elm && doc && typeof elm === 'string') {\n          var node = doc.getElementById(elm);\n          if (node && node.id !== elm) {\n            return doc.getElementsByName(elm)[1];\n          } else {\n            return node;\n          }\n        }\n        return elm;\n      };\n      var $$ = function (elm) {\n        if (typeof elm === 'string') {\n          elm = get(elm);\n        }\n        return $(elm);\n      };\n      var getAttrib = function (elm, name, defaultVal) {\n        var hook, value;\n        var $elm = $$(elm);\n        if ($elm.length) {\n          hook = attrHooks[name];\n          if (hook && hook.get) {\n            value = hook.get($elm, name);\n          } else {\n            value = $elm.attr(name);\n          }\n        }\n        if (typeof value === 'undefined') {\n          value = defaultVal || '';\n        }\n        return value;\n      };\n      var getAttribs = function (elm) {\n        var node = get(elm);\n        if (!node) {\n          return [];\n        }\n        return node.attributes;\n      };\n      var setAttrib = function (elm, name, value) {\n        var originalValue, hook;\n        if (value === '') {\n          value = null;\n        }\n        var $elm = $$(elm);\n        originalValue = $elm.attr(name);\n        if (!$elm.length) {\n          return;\n        }\n        hook = attrHooks[name];\n        if (hook && hook.set) {\n          hook.set($elm, value, name);\n        } else {\n          $elm.attr(name, value);\n        }\n        if (originalValue !== value && settings.onSetAttrib) {\n          settings.onSetAttrib({\n            attrElm: $elm,\n            attrName: name,\n            attrValue: value\n          });\n        }\n      };\n      var clone = function (node, deep) {\n        if (!isIE || node.nodeType !== 1 || deep) {\n          return node.cloneNode(deep);\n        }\n        if (!deep) {\n          var clone_1 = doc.createElement(node.nodeName);\n          each$5(getAttribs(node), function (attr) {\n            setAttrib(clone_1, attr.nodeName, getAttrib(node, attr.nodeName));\n          });\n          return clone_1;\n        }\n        return null;\n      };\n      var getRoot = function () {\n        return settings.root_element || doc.body;\n      };\n      var getViewPort = function (argWin) {\n        var actWin = !argWin ? win : argWin;\n        var doc = actWin.document;\n        var rootElm =  doc.documentElement ;\n        return {\n          x: actWin.pageXOffset || rootElm.scrollLeft,\n          y: actWin.pageYOffset || rootElm.scrollTop,\n          w: actWin.innerWidth || rootElm.clientWidth,\n          h: actWin.innerHeight || rootElm.clientHeight\n        };\n      };\n      var getPos = function (elm, rootElm) {\n        return Position.getPos(doc.body, get(elm), rootElm);\n      };\n      var setStyle = function (elm, name, value) {\n        var $elm = $$(elm).css(name, value);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var setStyles = function (elm, stylesArg) {\n        var $elm = $$(elm).css(stylesArg);\n        if (settings.update_styles) {\n          updateInternalStyleAttr(styles, $elm);\n        }\n      };\n      var getStyle = function (elm, name, computed) {\n        var $elm = $$(elm);\n        if (computed) {\n          return $elm.css(name);\n        }\n        name = name.replace(/-(\\D)/g, function (a, b) {\n          return b.toUpperCase();\n        });\n        if (name === 'float') {\n          name = Env.ie && Env.ie < 12 ? 'styleFloat' : 'cssFloat';\n        }\n        return $elm[0] && $elm[0].style ? $elm[0].style[name] : undefined;\n      };\n      var getSize = function (elm) {\n        var w, h;\n        elm = get(elm);\n        w = getStyle(elm, 'width');\n        h = getStyle(elm, 'height');\n        if (w.indexOf('px') === -1) {\n          w = 0;\n        }\n        if (h.indexOf('px') === -1) {\n          h = 0;\n        }\n        return {\n          w: parseInt(w, 10) || elm.offsetWidth || elm.clientWidth,\n          h: parseInt(h, 10) || elm.offsetHeight || elm.clientHeight\n        };\n      };\n      var getRect = function (elm) {\n        var pos, size;\n        elm = get(elm);\n        pos = getPos(elm);\n        size = getSize(elm);\n        return {\n          x: pos.x,\n          y: pos.y,\n          w: size.w,\n          h: size.h\n        };\n      };\n      var is = function (elm, selector) {\n        var i;\n        if (!elm) {\n          return false;\n        }\n        if (!Array.isArray(elm)) {\n          if (selector === '*') {\n            return elm.nodeType === 1;\n          }\n          if (simpleSelectorRe.test(selector)) {\n            var selectors = selector.toLowerCase().split(/,/);\n            var elmName = elm.nodeName.toLowerCase();\n            for (i = selectors.length - 1; i >= 0; i--) {\n              if (selectors[i] === elmName) {\n                return true;\n              }\n            }\n            return false;\n          }\n          if (elm.nodeType && elm.nodeType !== 1) {\n            return false;\n          }\n        }\n        var elms = !Array.isArray(elm) ? [elm] : elm;\n        return Sizzle(selector, elms[0].ownerDocument || elms[0], null, elms).length > 0;\n      };\n      var getParents = function (elm, selector, root, collect) {\n        var result = [];\n        var selectorVal;\n        var node = get(elm);\n        collect = collect === undefined;\n        root = root || (getRoot().nodeName !== 'BODY' ? getRoot().parentNode : null);\n        if (Tools.is(selector, 'string')) {\n          selectorVal = selector;\n          if (selector === '*') {\n            selector = function (node) {\n              return node.nodeType === 1;\n            };\n          } else {\n            selector = function (node) {\n              return is(node, selectorVal);\n            };\n          }\n        }\n        while (node) {\n          if (node === root || !node.nodeType || node.nodeType === 9) {\n            break;\n          }\n          if (!selector || typeof selector === 'function' && selector(node)) {\n            if (collect) {\n              result.push(node);\n            } else {\n              return [node];\n            }\n          }\n          node = node.parentNode;\n        }\n        return collect ? result : null;\n      };\n      var getParent = function (node, selector, root) {\n        var parents = getParents(node, selector, root, false);\n        return parents && parents.length > 0 ? parents[0] : null;\n      };\n      var _findSib = function (node, selector, name) {\n        var func = selector;\n        if (node) {\n          if (typeof selector === 'string') {\n            func = function (node) {\n              return is(node, selector);\n            };\n          }\n          for (node = node[name]; node; node = node[name]) {\n            if (typeof func === 'function' && func(node)) {\n              return node;\n            }\n          }\n        }\n        return null;\n      };\n      var getNext = function (node, selector) {\n        return _findSib(node, selector, 'nextSibling');\n      };\n      var getPrev = function (node, selector) {\n        return _findSib(node, selector, 'previousSibling');\n      };\n      var select = function (selector, scope) {\n        return Sizzle(selector, get(scope) || settings.root_element || doc, []);\n      };\n      var run = function (elm, func, scope) {\n        var result;\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        if (!node) {\n          return false;\n        }\n        if (Tools.isArray(node) && (node.length || node.length === 0)) {\n          result = [];\n          each$5(node, function (elm, i) {\n            if (elm) {\n              if (typeof elm === 'string') {\n                elm = get(elm);\n              }\n              result.push(func.call(scope, elm, i));\n            }\n          });\n          return result;\n        }\n        var context = scope ? scope : _this;\n        return func.call(context, node);\n      };\n      var setAttribs = function (elm, attrs) {\n        $$(elm).each(function (i, node) {\n          each$5(attrs, function (value, name) {\n            setAttrib(node, name, value);\n          });\n        });\n      };\n      var setHTML = function (elm, html) {\n        var $elm = $$(elm);\n        if (isIE) {\n          $elm.each(function (i, target) {\n            if (target.canHaveHTML === false) {\n              return;\n            }\n            while (target.firstChild) {\n              target.removeChild(target.firstChild);\n            }\n            try {\n              target.innerHTML = '<br>' + html;\n              target.removeChild(target.firstChild);\n            } catch (ex) {\n              DomQuery('<div></div>').html('<br>' + html).contents().slice(1).appendTo(target);\n            }\n            return html;\n          });\n        } else {\n          $elm.html(html);\n        }\n      };\n      var add = function (parentElm, name, attrs, html, create) {\n        return run(parentElm, function (parentElm) {\n          var newElm = typeof name === 'string' ? doc.createElement(name) : name;\n          setAttribs(newElm, attrs);\n          if (html) {\n            if (typeof html !== 'string' && html.nodeType) {\n              newElm.appendChild(html);\n            } else if (typeof html === 'string') {\n              setHTML(newElm, html);\n            }\n          }\n          return !create ? parentElm.appendChild(newElm) : newElm;\n        });\n      };\n      var create = function (name, attrs, html) {\n        return add(doc.createElement(name), name, attrs, html, true);\n      };\n      var decode = Entities.decode;\n      var encode = Entities.encodeAllRaw;\n      var createHTML = function (name, attrs, html) {\n        var outHtml = '', key;\n        outHtml += '<' + name;\n        for (key in attrs) {\n          if (attrs.hasOwnProperty(key) && attrs[key] !== null && typeof attrs[key] !== 'undefined') {\n            outHtml += ' ' + key + '=\"' + encode(attrs[key]) + '\"';\n          }\n        }\n        if (typeof html !== 'undefined') {\n          return outHtml + '>' + html + '</' + name + '>';\n        }\n        return outHtml + ' />';\n      };\n      var createFragment = function (html) {\n        var node;\n        var container = doc.createElement('div');\n        var frag = doc.createDocumentFragment();\n        if (html) {\n          container.innerHTML = html;\n        }\n        while (node = container.firstChild) {\n          frag.appendChild(node);\n        }\n        return frag;\n      };\n      var remove = function (node, keepChildren) {\n        var $node = $$(node);\n        if (keepChildren) {\n          $node.each(function () {\n            var child;\n            while (child = this.firstChild) {\n              if (child.nodeType === 3 && child.data.length === 0) {\n                this.removeChild(child);\n              } else {\n                this.parentNode.insertBefore(child, this);\n              }\n            }\n          }).remove();\n        } else {\n          $node.remove();\n        }\n        return $node.length > 1 ? $node.toArray() : $node[0];\n      };\n      var removeAllAttribs = function (e) {\n        return run(e, function (e) {\n          var i;\n          var attrs = e.attributes;\n          for (i = attrs.length - 1; i >= 0; i--) {\n            e.removeAttributeNode(attrs.item(i));\n          }\n        });\n      };\n      var parseStyle = function (cssText) {\n        return styles.parse(cssText);\n      };\n      var serializeStyle = function (stylesArg, name) {\n        return styles.serialize(stylesArg, name);\n      };\n      var addStyle = function (cssText) {\n        var head, styleElm;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          if (addedStyles[cssText]) {\n            return;\n          }\n          addedStyles[cssText] = true;\n        }\n        styleElm = doc.getElementById('mceDefaultStyles');\n        if (!styleElm) {\n          styleElm = doc.createElement('style');\n          styleElm.id = 'mceDefaultStyles';\n          styleElm.type = 'text/css';\n          head = doc.getElementsByTagName('head')[0];\n          if (head.firstChild) {\n            head.insertBefore(styleElm, head.firstChild);\n          } else {\n            head.appendChild(styleElm);\n          }\n        }\n        if (styleElm.styleSheet) {\n          styleElm.styleSheet.cssText += cssText;\n        } else {\n          styleElm.appendChild(doc.createTextNode(cssText));\n        }\n      };\n      var loadCSS = function (url) {\n        var head;\n        if (self !== DOMUtils.DOM && doc === domGlobals.document) {\n          DOMUtils.DOM.loadCSS(url);\n          return;\n        }\n        if (!url) {\n          url = '';\n        }\n        head = doc.getElementsByTagName('head')[0];\n        each$5(url.split(','), function (url) {\n          var link;\n          url = Tools._addCacheSuffix(url);\n          if (files[url]) {\n            return;\n          }\n          files[url] = true;\n          link = create('link', {\n            rel: 'stylesheet',\n            href: url\n          });\n          head.appendChild(link);\n        });\n      };\n      var toggleClass = function (elm, cls, state) {\n        $$(elm).toggleClass(cls, state).each(function () {\n          if (this.className === '') {\n            DomQuery(this).attr('class', null);\n          }\n        });\n      };\n      var addClass = function (elm, cls) {\n        $$(elm).addClass(cls);\n      };\n      var removeClass = function (elm, cls) {\n        toggleClass(elm, cls, false);\n      };\n      var hasClass = function (elm, cls) {\n        return $$(elm).hasClass(cls);\n      };\n      var show = function (elm) {\n        $$(elm).show();\n      };\n      var hide = function (elm) {\n        $$(elm).hide();\n      };\n      var isHidden = function (elm) {\n        return $$(elm).css('display') === 'none';\n      };\n      var uniqueId = function (prefix) {\n        return (!prefix ? 'mce_' : prefix) + counter++;\n      };\n      var getOuterHTML = function (elm) {\n        var node = typeof elm === 'string' ? get(elm) : elm;\n        return NodeType.isElement(node) ? node.outerHTML : DomQuery('<div></div>').append(DomQuery(node).clone()).html();\n      };\n      var setOuterHTML = function (elm, html) {\n        $$(elm).each(function () {\n          try {\n            if ('outerHTML' in this) {\n              this.outerHTML = html;\n              return;\n            }\n          } catch (ex) {\n          }\n          remove(DomQuery(this).html(html), true);\n        });\n      };\n      var insertAfter = function (node, reference) {\n        var referenceNode = get(reference);\n        return run(node, function (node) {\n          var parent, nextSibling;\n          parent = referenceNode.parentNode;\n          nextSibling = referenceNode.nextSibling;\n          if (nextSibling) {\n            parent.insertBefore(node, nextSibling);\n          } else {\n            parent.appendChild(node);\n          }\n          return node;\n        });\n      };\n      var replace = function (newElm, oldElm, keepChildren) {\n        return run(oldElm, function (oldElm) {\n          if (Tools.is(oldElm, 'array')) {\n            newElm = newElm.cloneNode(true);\n          }\n          if (keepChildren) {\n            each$5(grep$1(oldElm.childNodes), function (node) {\n              newElm.appendChild(node);\n            });\n          }\n          return oldElm.parentNode.replaceChild(newElm, oldElm);\n        });\n      };\n      var rename = function (elm, name) {\n        var newElm;\n        if (elm.nodeName !== name.toUpperCase()) {\n          newElm = create(name);\n          each$5(getAttribs(elm), function (attrNode) {\n            setAttrib(newElm, attrNode.nodeName, getAttrib(elm, attrNode.nodeName));\n          });\n          replace(newElm, elm, true);\n        }\n        return newElm || elm;\n      };\n      var findCommonAncestor = function (a, b) {\n        var ps = a, pe;\n        while (ps) {\n          pe = b;\n          while (pe && ps !== pe) {\n            pe = pe.parentNode;\n          }\n          if (ps === pe) {\n            break;\n          }\n          ps = ps.parentNode;\n        }\n        if (!ps && a.ownerDocument) {\n          return a.ownerDocument.documentElement;\n        }\n        return ps;\n      };\n      var toHex = function (rgbVal) {\n        return styles.toHex(Tools.trim(rgbVal));\n      };\n      var isEmpty = function (node, elements) {\n        var i, attributes, type, whitespace, walker, name, brCount = 0;\n        node = node.firstChild;\n        if (node) {\n          walker = new TreeWalker(node, node.parentNode);\n          elements = elements || (schema ? schema.getNonEmptyElements() : null);\n          whitespace = schema ? schema.getWhiteSpaceElements() : {};\n          do {\n            type = node.nodeType;\n            if (NodeType.isElement(node)) {\n              var bogusVal = node.getAttribute('data-mce-bogus');\n              if (bogusVal) {\n                node = walker.next(bogusVal === 'all');\n                continue;\n              }\n              name = node.nodeName.toLowerCase();\n              if (elements && elements[name]) {\n                if (name === 'br') {\n                  brCount++;\n                  node = walker.next();\n                  continue;\n                }\n                return false;\n              }\n              attributes = getAttribs(node);\n              i = attributes.length;\n              while (i--) {\n                name = attributes[i].nodeName;\n                if (name === 'name' || name === 'data-mce-bookmark') {\n                  return false;\n                }\n              }\n            }\n            if (type === 8) {\n              return false;\n            }\n            if (type === 3 && !whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            if (type === 3 && node.parentNode && whitespace[node.parentNode.nodeName] && whiteSpaceRegExp$2.test(node.nodeValue)) {\n              return false;\n            }\n            node = walker.next();\n          } while (node);\n        }\n        return brCount <= 1;\n      };\n      var createRng = function () {\n        return doc.createRange();\n      };\n      var split = function (parentElm, splitElm, replacementElm) {\n        var r = createRng(), bef, aft, pa;\n        if (parentElm && splitElm) {\n          r.setStart(parentElm.parentNode, findNodeIndex(parentElm));\n          r.setEnd(splitElm.parentNode, findNodeIndex(splitElm));\n          bef = r.extractContents();\n          r = createRng();\n          r.setStart(splitElm.parentNode, findNodeIndex(splitElm) + 1);\n          r.setEnd(parentElm.parentNode, findNodeIndex(parentElm) + 1);\n          aft = r.extractContents();\n          pa = parentElm.parentNode;\n          pa.insertBefore(TrimNode.trimNode(self, bef), parentElm);\n          if (replacementElm) {\n            pa.insertBefore(replacementElm, parentElm);\n          } else {\n            pa.insertBefore(splitElm, parentElm);\n          }\n          pa.insertBefore(TrimNode.trimNode(self, aft), parentElm);\n          remove(parentElm);\n          return replacementElm || splitElm;\n        }\n      };\n      var bind = function (target, name, func, scope) {\n        if (Tools.isArray(target)) {\n          var i = target.length;\n          while (i--) {\n            target[i] = bind(target[i], name, func, scope);\n          }\n          return target;\n        }\n        if (settings.collect && (target === doc || target === win)) {\n          boundEvents.push([\n            target,\n            name,\n            func,\n            scope\n          ]);\n        }\n        return events.bind(target, name, func, scope || self);\n      };\n      var unbind = function (target, name, func) {\n        var i;\n        if (Tools.isArray(target)) {\n          i = target.length;\n          while (i--) {\n            target[i] = unbind(target[i], name, func);\n          }\n          return target;\n        }\n        if (boundEvents && (target === doc || target === win)) {\n          i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            if (target === item[0] && (!name || name === item[1]) && (!func || func === item[2])) {\n              events.unbind(item[0], item[1], item[2]);\n            }\n          }\n        }\n        return events.unbind(target, name, func);\n      };\n      var fire = function (target, name, evt) {\n        return events.fire(target, name, evt);\n      };\n      var getContentEditable = function (node) {\n        if (node && NodeType.isElement(node)) {\n          var contentEditable = node.getAttribute('data-mce-contenteditable');\n          if (contentEditable && contentEditable !== 'inherit') {\n            return contentEditable;\n          }\n          return node.contentEditable !== 'inherit' ? node.contentEditable : null;\n        } else {\n          return null;\n        }\n      };\n      var getContentEditableParent = function (node) {\n        var root = getRoot();\n        var state = null;\n        for (; node && node !== root; node = node.parentNode) {\n          state = getContentEditable(node);\n          if (state !== null) {\n            break;\n          }\n        }\n        return state;\n      };\n      var destroy = function () {\n        if (boundEvents) {\n          var i = boundEvents.length;\n          while (i--) {\n            var item = boundEvents[i];\n            events.unbind(item[0], item[1], item[2]);\n          }\n        }\n        if (Sizzle.setDocument) {\n          Sizzle.setDocument();\n        }\n      };\n      var isChildOf = function (node, parent) {\n        while (node) {\n          if (parent === node) {\n            return true;\n          }\n          node = node.parentNode;\n        }\n        return false;\n      };\n      var dumpRng = function (r) {\n        return 'startContainer: ' + r.startContainer.nodeName + ', startOffset: ' + r.startOffset + ', endContainer: ' + r.endContainer.nodeName + ', endOffset: ' + r.endOffset;\n      };\n      var self = {\n        doc: doc,\n        settings: settings,\n        win: win,\n        files: files,\n        stdMode: stdMode,\n        boxModel: boxModel,\n        styleSheetLoader: styleSheetLoader,\n        boundEvents: boundEvents,\n        styles: styles,\n        schema: schema,\n        events: events,\n        isBlock: isBlock,\n        $: $,\n        $$: $$,\n        root: null,\n        clone: clone,\n        getRoot: getRoot,\n        getViewPort: getViewPort,\n        getRect: getRect,\n        getSize: getSize,\n        getParent: getParent,\n        getParents: getParents,\n        get: get,\n        getNext: getNext,\n        getPrev: getPrev,\n        select: select,\n        is: is,\n        add: add,\n        create: create,\n        createHTML: createHTML,\n        createFragment: createFragment,\n        remove: remove,\n        setStyle: setStyle,\n        getStyle: getStyle,\n        setStyles: setStyles,\n        removeAllAttribs: removeAllAttribs,\n        setAttrib: setAttrib,\n        setAttribs: setAttribs,\n        getAttrib: getAttrib,\n        getPos: getPos,\n        parseStyle: parseStyle,\n        serializeStyle: serializeStyle,\n        addStyle: addStyle,\n        loadCSS: loadCSS,\n        addClass: addClass,\n        removeClass: removeClass,\n        hasClass: hasClass,\n        toggleClass: toggleClass,\n        show: show,\n        hide: hide,\n        isHidden: isHidden,\n        uniqueId: uniqueId,\n        setHTML: setHTML,\n        getOuterHTML: getOuterHTML,\n        setOuterHTML: setOuterHTML,\n        decode: decode,\n        encode: encode,\n        insertAfter: insertAfter,\n        replace: replace,\n        rename: rename,\n        findCommonAncestor: findCommonAncestor,\n        toHex: toHex,\n        run: run,\n        getAttribs: getAttribs,\n        isEmpty: isEmpty,\n        createRng: createRng,\n        nodeIndex: findNodeIndex,\n        split: split,\n        bind: bind,\n        unbind: unbind,\n        fire: fire,\n        getContentEditable: getContentEditable,\n        getContentEditableParent: getContentEditableParent,\n        destroy: destroy,\n        isChildOf: isChildOf,\n        dumpRng: dumpRng\n      };\n      attrHooks = setupAttrHooks(styles, settings, function () {\n        return self;\n      });\n      return self;\n    }\n    (function (DOMUtils) {\n      DOMUtils.DOM = DOMUtils(domGlobals.document);\n      DOMUtils.nodeIndex = findNodeIndex;\n    }(DOMUtils || (DOMUtils = {})));\n    var DOMUtils$1 = DOMUtils;\n\n    var DOM = DOMUtils$1.DOM;\n    var each$6 = Tools.each, grep$2 = Tools.grep;\n    var isFunction$1 = function (f) {\n      return typeof f === 'function';\n    };\n    var ScriptLoader = function () {\n      var QUEUED = 0;\n      var LOADING = 1;\n      var LOADED = 2;\n      var FAILED = 3;\n      var states = {};\n      var queue = [];\n      var scriptLoadedCallbacks = {};\n      var queueLoadedCallbacks = [];\n      var loading = 0;\n      var loadScript = function (url, success, failure) {\n        var dom = DOM;\n        var elm, id;\n        var done = function () {\n          dom.remove(id);\n          if (elm) {\n            elm.onreadystatechange = elm.onload = elm = null;\n          }\n          success();\n        };\n        var error = function () {\n          if (isFunction$1(failure)) {\n            failure();\n          } else {\n            if (typeof console !== 'undefined' && console.log) {\n              console.log('Failed to load script: ' + url);\n            }\n          }\n        };\n        id = dom.uniqueId();\n        elm = domGlobals.document.createElement('script');\n        elm.id = id;\n        elm.type = 'text/javascript';\n        elm.src = Tools._addCacheSuffix(url);\n        elm.onload = done;\n        elm.onerror = error;\n        (domGlobals.document.getElementsByTagName('head')[0] || domGlobals.document.body).appendChild(elm);\n      };\n      this.isDone = function (url) {\n        return states[url] === LOADED;\n      };\n      this.markDone = function (url) {\n        states[url] = LOADED;\n      };\n      this.add = this.load = function (url, success, scope, failure) {\n        var state = states[url];\n        if (state === undefined) {\n          queue.push(url);\n          states[url] = QUEUED;\n        }\n        if (success) {\n          if (!scriptLoadedCallbacks[url]) {\n            scriptLoadedCallbacks[url] = [];\n          }\n          scriptLoadedCallbacks[url].push({\n            success: success,\n            failure: failure,\n            scope: scope || this\n          });\n        }\n      };\n      this.remove = function (url) {\n        delete states[url];\n        delete scriptLoadedCallbacks[url];\n      };\n      this.loadQueue = function (success, scope, failure) {\n        this.loadScripts(queue, success, scope, failure);\n      };\n      this.loadScripts = function (scripts, success, scope, failure) {\n        var loadScripts;\n        var failures = [];\n        var execCallbacks = function (name, url) {\n          each$6(scriptLoadedCallbacks[url], function (callback) {\n            if (isFunction$1(callback[name])) {\n              callback[name].call(callback.scope);\n            }\n          });\n          scriptLoadedCallbacks[url] = undefined;\n        };\n        queueLoadedCallbacks.push({\n          success: success,\n          failure: failure,\n          scope: scope || this\n        });\n        loadScripts = function () {\n          var loadingScripts = grep$2(scripts);\n          scripts.length = 0;\n          each$6(loadingScripts, function (url) {\n            if (states[url] === LOADED) {\n              execCallbacks('success', url);\n              return;\n            }\n            if (states[url] === FAILED) {\n              execCallbacks('failure', url);\n              return;\n            }\n            if (states[url] !== LOADING) {\n              states[url] = LOADING;\n              loading++;\n              loadScript(url, function () {\n                states[url] = LOADED;\n                loading--;\n                execCallbacks('success', url);\n                loadScripts();\n              }, function () {\n                states[url] = FAILED;\n                loading--;\n                failures.push(url);\n                execCallbacks('failure', url);\n                loadScripts();\n              });\n            }\n          });\n          if (!loading) {\n            var notifyCallbacks = queueLoadedCallbacks.slice(0);\n            queueLoadedCallbacks.length = 0;\n            each$6(notifyCallbacks, function (callback) {\n              if (failures.length === 0) {\n                if (isFunction$1(callback.success)) {\n                  callback.success.call(callback.scope);\n                }\n              } else {\n                if (isFunction$1(callback.failure)) {\n                  callback.failure.call(callback.scope, failures);\n                }\n              }\n            });\n          }\n        };\n        loadScripts();\n      };\n    };\n    ScriptLoader.ScriptLoader = new ScriptLoader();\n\n    var each$7 = Tools.each;\n    function AddOnManager() {\n      var _this = this;\n      var items = [];\n      var urls = {};\n      var lookup = {};\n      var _listeners = [];\n      var get = function (name) {\n        if (lookup[name]) {\n          return lookup[name].instance;\n        }\n        return undefined;\n      };\n      var dependencies = function (name) {\n        var result;\n        if (lookup[name]) {\n          result = lookup[name].dependencies;\n        }\n        return result || [];\n      };\n      var requireLangPack = function (name, languages) {\n        var language = AddOnManager.language;\n        if (language && AddOnManager.languageLoad !== false) {\n          if (languages) {\n            languages = ',' + languages + ',';\n            if (languages.indexOf(',' + language.substr(0, 2) + ',') !== -1) {\n              language = language.substr(0, 2);\n            } else if (languages.indexOf(',' + language + ',') === -1) {\n              return;\n            }\n          }\n          ScriptLoader.ScriptLoader.add(urls[name] + '/langs/' + language + '.js');\n        }\n      };\n      var add = function (id, addOn, dependencies) {\n        items.push(addOn);\n        lookup[id] = {\n          instance: addOn,\n          dependencies: dependencies\n        };\n        var result = partition(_listeners, function (listener) {\n          return listener.name === id;\n        });\n        _listeners = result.fail;\n        each$7(result.pass, function (listener) {\n          listener.callback();\n        });\n        return addOn;\n      };\n      var remove = function (name) {\n        delete urls[name];\n        delete lookup[name];\n      };\n      var createUrl = function (baseUrl, dep) {\n        if (typeof dep === 'object') {\n          return dep;\n        }\n        return typeof baseUrl === 'string' ? {\n          prefix: '',\n          resource: dep,\n          suffix: ''\n        } : {\n          prefix: baseUrl.prefix,\n          resource: dep,\n          suffix: baseUrl.suffix\n        };\n      };\n      var addComponents = function (pluginName, scripts) {\n        var pluginUrl = _this.urls[pluginName];\n        each$7(scripts, function (script) {\n          ScriptLoader.ScriptLoader.add(pluginUrl + '/' + script);\n        });\n      };\n      var loadDependencies = function (name, addOnUrl, success, scope) {\n        var deps = dependencies(name);\n        each$7(deps, function (dep) {\n          var newUrl = createUrl(addOnUrl, dep);\n          load(newUrl.resource, newUrl, undefined, undefined);\n        });\n        if (success) {\n          if (scope) {\n            success.call(scope);\n          } else {\n            success.call(ScriptLoader);\n          }\n        }\n      };\n      var load = function (name, addOnUrl, success, scope, failure) {\n        if (urls[name]) {\n          return;\n        }\n        var urlString = typeof addOnUrl === 'string' ? addOnUrl : addOnUrl.prefix + addOnUrl.resource + addOnUrl.suffix;\n        if (urlString.indexOf('/') !== 0 && urlString.indexOf('://') === -1) {\n          urlString = AddOnManager.baseURL + '/' + urlString;\n        }\n        urls[name] = urlString.substring(0, urlString.lastIndexOf('/'));\n        if (lookup[name]) {\n          loadDependencies(name, addOnUrl, success, scope);\n        } else {\n          ScriptLoader.ScriptLoader.add(urlString, function () {\n            return loadDependencies(name, addOnUrl, success, scope);\n          }, scope, failure);\n        }\n      };\n      var waitFor = function (name, callback) {\n        if (lookup.hasOwnProperty(name)) {\n          callback();\n        } else {\n          _listeners.push({\n            name: name,\n            callback: callback\n          });\n        }\n      };\n      return {\n        items: items,\n        urls: urls,\n        lookup: lookup,\n        _listeners: _listeners,\n        get: get,\n        dependencies: dependencies,\n        requireLangPack: requireLangPack,\n        add: add,\n        remove: remove,\n        createUrl: createUrl,\n        addComponents: addComponents,\n        load: load,\n        waitFor: waitFor\n      };\n    }\n    (function (AddOnManager) {\n      AddOnManager.PluginManager = AddOnManager();\n      AddOnManager.ThemeManager = AddOnManager();\n    }(AddOnManager || (AddOnManager = {})));\n\n    var before = function (marker, element) {\n      var parent$1 = parent(marker);\n      parent$1.each(function (v) {\n        v.dom().insertBefore(element.dom(), marker.dom());\n      });\n    };\n    var after = function (marker, element) {\n      var sibling = nextSibling(marker);\n      sibling.fold(function () {\n        var parent$1 = parent(marker);\n        parent$1.each(function (v) {\n          append(v, element);\n        });\n      }, function (v) {\n        before(v, element);\n      });\n    };\n    var prepend = function (parent, element) {\n      var firstChild$1 = firstChild(parent);\n      firstChild$1.fold(function () {\n        append(parent, element);\n      }, function (v) {\n        parent.dom().insertBefore(element.dom(), v.dom());\n      });\n    };\n    var append = function (parent, element) {\n      parent.dom().appendChild(element.dom());\n    };\n    var wrap$1 = function (element, wrapper) {\n      before(element, wrapper);\n      append(wrapper, element);\n    };\n\n    var before$1 = function (marker, elements) {\n      each(elements, function (x) {\n        before(marker, x);\n      });\n    };\n    var append$1 = function (parent, elements) {\n      each(elements, function (x) {\n        append(parent, x);\n      });\n    };\n\n    var empty = function (element) {\n      element.dom().textContent = '';\n      each(children(element), function (rogue) {\n        remove$1(rogue);\n      });\n    };\n    var remove$1 = function (element) {\n      var dom = element.dom();\n      if (dom.parentNode !== null) {\n        dom.parentNode.removeChild(dom);\n      }\n    };\n    var unwrap = function (wrapper) {\n      var children$1 = children(wrapper);\n      if (children$1.length > 0) {\n        before$1(wrapper, children$1);\n      }\n      remove$1(wrapper);\n    };\n\n    var first = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer === null) {\n          timer = domGlobals.setTimeout(function () {\n            fn.apply(null, args);\n            timer = null;\n          }, rate);\n        }\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n    var last$2 = function (fn, rate) {\n      var timer = null;\n      var cancel = function () {\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n          timer = null;\n        }\n      };\n      var throttle = function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n          args[_i] = arguments[_i];\n        }\n        if (timer !== null) {\n          domGlobals.clearTimeout(timer);\n        }\n        timer = domGlobals.setTimeout(function () {\n          fn.apply(null, args);\n          timer = null;\n        }, rate);\n      };\n      return {\n        cancel: cancel,\n        throttle: throttle\n      };\n    };\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var read = function (element, attr) {\n      var value = get(element, attr);\n      return value === undefined || value === '' ? [] : value.split(' ');\n    };\n    var add = function (element, attr, id) {\n      var old = read(element, attr);\n      var nu = old.concat([id]);\n      set(element, attr, nu.join(' '));\n      return true;\n    };\n    var remove$2 = function (element, attr, id) {\n      var nu = filter(read(element, attr), function (v) {\n        return v !== id;\n      });\n      if (nu.length > 0) {\n        set(element, attr, nu.join(' '));\n      } else {\n        remove(element, attr);\n      }\n      return false;\n    };\n\n    var supports = function (element) {\n      return element.dom().classList !== undefined;\n    };\n    var get$2 = function (element) {\n      return read(element, 'class');\n    };\n    var add$1 = function (element, clazz) {\n      return add(element, 'class', clazz);\n    };\n    var remove$3 = function (element, clazz) {\n      return remove$2(element, 'class', clazz);\n    };\n\n    var add$2 = function (element, clazz) {\n      if (supports(element)) {\n        element.dom().classList.add(clazz);\n      } else {\n        add$1(element, clazz);\n      }\n    };\n    var cleanClass = function (element) {\n      var classList = supports(element) ? element.dom().classList : get$2(element);\n      if (classList.length === 0) {\n        remove(element, 'class');\n      }\n    };\n    var remove$4 = function (element, clazz) {\n      if (supports(element)) {\n        var classList = element.dom().classList;\n        classList.remove(clazz);\n      } else {\n        remove$3(element, clazz);\n      }\n      cleanClass(element);\n    };\n    var has$2 = function (element, clazz) {\n      return supports(element) && element.dom().classList.contains(clazz);\n    };\n\n    var descendants = function (scope, predicate) {\n      var result = [];\n      each(children(scope), function (x) {\n        if (predicate(x)) {\n          result = result.concat([x]);\n        }\n        result = result.concat(descendants(x, predicate));\n      });\n      return result;\n    };\n\n    var descendants$1 = function (scope, selector) {\n      return all(selector, scope);\n    };\n\n    function ClosestOrAncestor (is, ancestor, scope, a, isRoot) {\n      return is(scope, a) ? Option.some(scope) : isFunction(isRoot) && isRoot(scope) ? Option.none() : ancestor(scope, a, isRoot);\n    }\n\n    var ancestor = function (scope, predicate, isRoot) {\n      var element = scope.dom();\n      var stop = isFunction(isRoot) ? isRoot : constant(false);\n      while (element.parentNode) {\n        element = element.parentNode;\n        var el = Element.fromDom(element);\n        if (predicate(el)) {\n          return Option.some(el);\n        } else if (stop(el)) {\n          break;\n        }\n      }\n      return Option.none();\n    };\n    var closest = function (scope, predicate, isRoot) {\n      var is = function (s, test) {\n        return test(s);\n      };\n      return ClosestOrAncestor(is, ancestor, scope, predicate, isRoot);\n    };\n\n    var ancestor$1 = function (scope, selector, isRoot) {\n      return ancestor(scope, function (e) {\n        return is$1(e, selector);\n      }, isRoot);\n    };\n    var descendant = function (scope, selector) {\n      return one(selector, scope);\n    };\n    var closest$1 = function (scope, selector, isRoot) {\n      return ClosestOrAncestor(is$1, ancestor$1, scope, selector, isRoot);\n    };\n\n    var annotation = constant('mce-annotation');\n    var dataAnnotation = constant('data-mce-annotation');\n    var dataAnnotationId = constant('data-mce-annotation-uid');\n\n    var identify = function (editor, annotationName) {\n      var rng = editor.selection.getRng();\n      var start = Element.fromDom(rng.startContainer);\n      var root = Element.fromDom(editor.getBody());\n      var selector = annotationName.fold(function () {\n        return '.' + annotation();\n      }, function (an) {\n        return '[' + dataAnnotation() + '=\"' + an + '\"]';\n      });\n      var newStart = child(start, rng.startOffset).getOr(start);\n      var closest = closest$1(newStart, selector, function (n) {\n        return eq(n, root);\n      });\n      var getAttr = function (c, property) {\n        if (has$1(c, property)) {\n          return Option.some(get(c, property));\n        } else {\n          return Option.none();\n        }\n      };\n      return closest.bind(function (c) {\n        return getAttr(c, '' + dataAnnotationId()).bind(function (uid) {\n          return getAttr(c, '' + dataAnnotation()).map(function (name) {\n            var elements = findMarkers(editor, uid);\n            return {\n              uid: uid,\n              name: name,\n              elements: elements\n            };\n          });\n        });\n      });\n    };\n    var isAnnotation = function (elem) {\n      return isElement(elem) && has$2(elem, annotation());\n    };\n    var findMarkers = function (editor, uid) {\n      var body = Element.fromDom(editor.getBody());\n      return descendants$1(body, '[' + dataAnnotationId() + '=\"' + uid + '\"]');\n    };\n    var findAll = function (editor, name) {\n      var body = Element.fromDom(editor.getBody());\n      var markers = descendants$1(body, '[' + dataAnnotation() + '=\"' + name + '\"]');\n      var directory = {};\n      each(markers, function (m) {\n        var uid = get(m, dataAnnotationId());\n        var nodesAlready = directory.hasOwnProperty(uid) ? directory[uid] : [];\n        directory[uid] = nodesAlready.concat([m]);\n      });\n      return directory;\n    };\n\n    var setup = function (editor, registry) {\n      var changeCallbacks = Cell({});\n      var initData = function () {\n        return {\n          listeners: [],\n          previous: Cell(Option.none())\n        };\n      };\n      var withCallbacks = function (name, f) {\n        updateCallbacks(name, function (data) {\n          f(data);\n          return data;\n        });\n      };\n      var updateCallbacks = function (name, f) {\n        var callbackMap = changeCallbacks.get();\n        var data = callbackMap.hasOwnProperty(name) ? callbackMap[name] : initData();\n        var outputData = f(data);\n        callbackMap[name] = outputData;\n        changeCallbacks.set(callbackMap);\n      };\n      var fireCallbacks = function (name, uid, elements) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(true, name, {\n              uid: uid,\n              nodes: map(elements, function (elem) {\n                return elem.dom();\n              })\n            });\n          });\n        });\n      };\n      var fireNoAnnotation = function (name) {\n        withCallbacks(name, function (data) {\n          each(data.listeners, function (f) {\n            return f(false, name);\n          });\n        });\n      };\n      var onNodeChange = last$2(function () {\n        var callbackMap = changeCallbacks.get();\n        var annotations = sort(keys(callbackMap));\n        each(annotations, function (name) {\n          updateCallbacks(name, function (data) {\n            var prev = data.previous.get();\n            identify(editor, Option.some(name)).fold(function () {\n              if (prev.isSome()) {\n                fireNoAnnotation(name);\n                data.previous.set(Option.none());\n              }\n            }, function (_a) {\n              var uid = _a.uid, name = _a.name, elements = _a.elements;\n              if (!prev.is(uid)) {\n                fireCallbacks(name, uid, elements);\n                data.previous.set(Option.some(uid));\n              }\n            });\n            return {\n              previous: data.previous,\n              listeners: data.listeners\n            };\n          });\n        });\n      }, 30);\n      editor.on('remove', function () {\n        onNodeChange.cancel();\n      });\n      editor.on('nodeChange', function () {\n        onNodeChange.throttle();\n      });\n      var addListener = function (name, f) {\n        updateCallbacks(name, function (data) {\n          return {\n            previous: data.previous,\n            listeners: data.listeners.concat([f])\n          };\n        });\n      };\n      return { addListener: addListener };\n    };\n\n    var setup$1 = function (editor, registry) {\n      var identifyParserNode = function (span) {\n        var optAnnotation = Option.from(span.attributes.map[dataAnnotation()]);\n        return optAnnotation.bind(registry.lookup);\n      };\n      editor.on('init', function () {\n        editor.serializer.addNodeFilter('span', function (spans) {\n          each(spans, function (span) {\n            identifyParserNode(span).each(function (settings) {\n              if (settings.persistent === false) {\n                span.unwrap();\n              }\n            });\n          });\n        });\n      });\n    };\n\n    var create$1 = function () {\n      var annotations = {};\n      var register = function (name, settings) {\n        annotations[name] = {\n          name: name,\n          settings: settings\n        };\n      };\n      var lookup = function (name) {\n        return annotations.hasOwnProperty(name) ? Option.from(annotations[name]).map(function (a) {\n          return a.settings;\n        }) : Option.none();\n      };\n      return {\n        register: register,\n        lookup: lookup\n      };\n    };\n\n    function __rest(s, e) {\n      var t = {};\n      for (var p in s)\n        if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n          t[p] = s[p];\n      if (s != null && typeof Object.getOwnPropertySymbols === 'function')\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n            t[p[i]] = s[p[i]];\n        }\n      return t;\n    }\n\n    var unique = 0;\n    var generate = function (prefix) {\n      var date = new Date();\n      var time = date.getTime();\n      var random = Math.floor(Math.random() * 1000000000);\n      unique++;\n      return prefix + '_' + random + unique + String(time);\n    };\n\n    var add$3 = function (element, classes) {\n      each(classes, function (x) {\n        add$2(element, x);\n      });\n    };\n\n    var clone = function (original, isDeep) {\n      return Element.fromDom(original.dom().cloneNode(isDeep));\n    };\n    var shallow = function (original) {\n      return clone(original, false);\n    };\n    var deep = function (original) {\n      return clone(original, true);\n    };\n\n    var fromHtml$1 = function (html, scope) {\n      var doc = scope || domGlobals.document;\n      var div = doc.createElement('div');\n      div.innerHTML = html;\n      return children(Element.fromDom(div));\n    };\n\n    var get$3 = function (element) {\n      return element.dom().innerHTML;\n    };\n    var set$1 = function (element, content) {\n      var owner$1 = owner(element);\n      var docDom = owner$1.dom();\n      var fragment = Element.fromDom(docDom.createDocumentFragment());\n      var contentElements = fromHtml$1(content, docDom);\n      append$1(fragment, contentElements);\n      empty(element);\n      append(element, fragment);\n    };\n\n    var ZWSP = '\\uFEFF';\n    var isZwsp = function (chr) {\n      return chr === ZWSP;\n    };\n    var trim$3 = function (text) {\n      return text.replace(new RegExp(ZWSP, 'g'), '');\n    };\n    var Zwsp = {\n      isZwsp: isZwsp,\n      ZWSP: ZWSP,\n      trim: trim$3\n    };\n\n    var isElement$2 = NodeType.isElement;\n    var isText$2 = NodeType.isText;\n    var isCaretContainerBlock = function (node) {\n      if (isText$2(node)) {\n        node = node.parentNode;\n      }\n      return isElement$2(node) && node.hasAttribute('data-mce-caret');\n    };\n    var isCaretContainerInline = function (node) {\n      return isText$2(node) && Zwsp.isZwsp(node.data);\n    };\n    var isCaretContainer = function (node) {\n      return isCaretContainerBlock(node) || isCaretContainerInline(node);\n    };\n    var hasContent = function (node) {\n      return node.firstChild !== node.lastChild || !NodeType.isBr(node.firstChild);\n    };\n    var insertInline = function (node, before) {\n      var doc, sibling, textNode, parentNode;\n      doc = node.ownerDocument;\n      textNode = doc.createTextNode(Zwsp.ZWSP);\n      parentNode = node.parentNode;\n      if (!before) {\n        sibling = node.nextSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (startsWithCaretContainer(sibling)) {\n            sibling.splitText(1);\n            return sibling;\n          }\n        }\n        if (node.nextSibling) {\n          parentNode.insertBefore(textNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(textNode);\n        }\n      } else {\n        sibling = node.previousSibling;\n        if (isText$2(sibling)) {\n          if (isCaretContainer(sibling)) {\n            return sibling;\n          }\n          if (endsWithCaretContainer(sibling)) {\n            return sibling.splitText(sibling.data.length - 1);\n          }\n        }\n        parentNode.insertBefore(textNode, node);\n      }\n      return textNode;\n    };\n    var isBeforeInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset()) === Zwsp.ZWSP || pos.isAtStart() && isCaretContainerInline(container.previousSibling);\n    };\n    var isAfterInline = function (pos) {\n      var container = pos.container();\n      if (!pos || !NodeType.isText(container)) {\n        return false;\n      }\n      return container.data.charAt(pos.offset() - 1) === Zwsp.ZWSP || pos.isAtEnd() && isCaretContainerInline(container.nextSibling);\n    };\n    var createBogusBr = function () {\n      var br = domGlobals.document.createElement('br');\n      br.setAttribute('data-mce-bogus', '1');\n      return br;\n    };\n    var insertBlock = function (blockName, node, before) {\n      var doc, blockNode, parentNode;\n      doc = node.ownerDocument;\n      blockNode = doc.createElement(blockName);\n      blockNode.setAttribute('data-mce-caret', before ? 'before' : 'after');\n      blockNode.setAttribute('data-mce-bogus', 'all');\n      blockNode.appendChild(createBogusBr());\n      parentNode = node.parentNode;\n      if (!before) {\n        if (node.nextSibling) {\n          parentNode.insertBefore(blockNode, node.nextSibling);\n        } else {\n          parentNode.appendChild(blockNode);\n        }\n      } else {\n        parentNode.insertBefore(blockNode, node);\n      }\n      return blockNode;\n    };\n    var startsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer = function (node) {\n      return isText$2(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var trimBogusBr = function (elm) {\n      var brs = elm.getElementsByTagName('br');\n      var lastBr = brs[brs.length - 1];\n      if (NodeType.isBogus(lastBr)) {\n        lastBr.parentNode.removeChild(lastBr);\n      }\n    };\n    var showCaretContainerBlock = function (caretContainer) {\n      if (caretContainer && caretContainer.hasAttribute('data-mce-caret')) {\n        trimBogusBr(caretContainer);\n        caretContainer.removeAttribute('data-mce-caret');\n        caretContainer.removeAttribute('data-mce-bogus');\n        caretContainer.removeAttribute('style');\n        caretContainer.removeAttribute('_moz_abspos');\n        return caretContainer;\n      }\n      return null;\n    };\n    var isRangeInCaretContainerBlock = function (range) {\n      return isCaretContainerBlock(range.startContainer);\n    };\n\n    var isContentEditableTrue$1 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$1 = NodeType.isContentEditableFalse;\n    var isBr$2 = NodeType.isBr;\n    var isText$3 = NodeType.isText;\n    var isInvalidTextElement = NodeType.matchNodeNames('script style textarea');\n    var isAtomicInline = NodeType.matchNodeNames('img input textarea hr iframe video audio object');\n    var isTable$1 = NodeType.matchNodeNames('table');\n    var isCaretContainer$1 = isCaretContainer;\n    var isCaretCandidate = function (node) {\n      if (isCaretContainer$1(node)) {\n        return false;\n      }\n      if (isText$3(node)) {\n        if (isInvalidTextElement(node.parentNode)) {\n          return false;\n        }\n        return true;\n      }\n      return isAtomicInline(node) || isBr$2(node) || isTable$1(node) || isNonUiContentEditableFalse(node);\n    };\n    var isUnselectable = function (node) {\n      return NodeType.isElement(node) && node.getAttribute('unselectable') === 'true';\n    };\n    var isNonUiContentEditableFalse = function (node) {\n      return isUnselectable(node) === false && isContentEditableFalse$1(node);\n    };\n    var isInEditable = function (node, root) {\n      for (node = node.parentNode; node && node !== root; node = node.parentNode) {\n        if (isNonUiContentEditableFalse(node)) {\n          return false;\n        }\n        if (isContentEditableTrue$1(node)) {\n          return true;\n        }\n      }\n      return true;\n    };\n    var isAtomicContentEditableFalse = function (node) {\n      if (!isNonUiContentEditableFalse(node)) {\n        return false;\n      }\n      return foldl(from$1(node.getElementsByTagName('*')), function (result, elm) {\n        return result || isContentEditableTrue$1(elm);\n      }, false) !== true;\n    };\n    var isAtomic = function (node) {\n      return isAtomicInline(node) || isAtomicContentEditableFalse(node);\n    };\n    var isEditableCaretCandidate = function (node, root) {\n      return isCaretCandidate(node) && isInEditable(node, root);\n    };\n\n    var round = Math.round;\n    var clone$1 = function (rect) {\n      if (!rect) {\n        return {\n          left: 0,\n          top: 0,\n          bottom: 0,\n          right: 0,\n          width: 0,\n          height: 0\n        };\n      }\n      return {\n        left: round(rect.left),\n        top: round(rect.top),\n        bottom: round(rect.bottom),\n        right: round(rect.right),\n        width: round(rect.width),\n        height: round(rect.height)\n      };\n    };\n    var collapse = function (rect, toStart) {\n      rect = clone$1(rect);\n      if (toStart) {\n        rect.right = rect.left;\n      } else {\n        rect.left = rect.left + rect.width;\n        rect.right = rect.left;\n      }\n      rect.width = 0;\n      return rect;\n    };\n    var isEqual = function (rect1, rect2) {\n      return rect1.left === rect2.left && rect1.top === rect2.top && rect1.bottom === rect2.bottom && rect1.right === rect2.right;\n    };\n    var isValidOverflow = function (overflowY, rect1, rect2) {\n      return overflowY >= 0 && overflowY <= Math.min(rect1.height, rect2.height) / 2;\n    };\n    var isAbove = function (rect1, rect2) {\n      if (rect1.bottom - rect1.height / 2 < rect2.top) {\n        return true;\n      }\n      if (rect1.top > rect2.bottom) {\n        return false;\n      }\n      return isValidOverflow(rect2.top - rect1.bottom, rect1, rect2);\n    };\n    var isBelow = function (rect1, rect2) {\n      if (rect1.top > rect2.bottom) {\n        return true;\n      }\n      if (rect1.bottom < rect2.top) {\n        return false;\n      }\n      return isValidOverflow(rect2.bottom - rect1.top, rect1, rect2);\n    };\n    var containsXY = function (rect, clientX, clientY) {\n      return clientX >= rect.left && clientX <= rect.right && clientY >= rect.top && clientY <= rect.bottom;\n    };\n    var overflowX = function (outer, inner) {\n      if (inner.left > outer.left && inner.right < outer.right) {\n        return 0;\n      } else {\n        return inner.left < outer.left ? inner.left - outer.left : inner.right - outer.right;\n      }\n    };\n    var overflowY = function (outer, inner) {\n      if (inner.top > outer.top && inner.bottom < outer.bottom) {\n        return 0;\n      } else {\n        return inner.top < outer.top ? inner.top - outer.top : inner.bottom - outer.bottom;\n      }\n    };\n    var getOverflow = function (outer, inner) {\n      return {\n        x: overflowX(outer, inner),\n        y: overflowY(outer, inner)\n      };\n    };\n\n    var getSelectedNode = function (range) {\n      var startContainer = range.startContainer, startOffset = range.startOffset;\n      if (startContainer.hasChildNodes() && range.endOffset === startOffset + 1) {\n        return startContainer.childNodes[startOffset];\n      }\n      return null;\n    };\n    var getNode = function (container, offset) {\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        if (offset >= container.childNodes.length) {\n          offset = container.childNodes.length - 1;\n        }\n        container = container.childNodes[offset];\n      }\n      return container;\n    };\n\n    var extendingChars = new RegExp('[\\u0300-\\u036f\\u0483-\\u0487\\u0488-\\u0489\\u0591-\\u05bd\\u05bf\\u05c1-\\u05c2\\u05c4-\\u05c5\\u05c7\\u0610-\\u061a' + '\\u064b-\\u065f\\u0670\\u06d6-\\u06dc\\u06df-\\u06e4\\u06e7-\\u06e8\\u06ea-\\u06ed\\u0711\\u0730-\\u074a\\u07a6-\\u07b0' + '\\u07eb-\\u07f3\\u0816-\\u0819\\u081b-\\u0823\\u0825-\\u0827\\u0829-\\u082d\\u0859-\\u085b\\u08e3-\\u0902\\u093a\\u093c' + '\\u0941-\\u0948\\u094d\\u0951-\\u0957\\u0962-\\u0963\\u0981\\u09bc\\u09be\\u09c1-\\u09c4\\u09cd\\u09d7\\u09e2-\\u09e3' + '\\u0a01-\\u0a02\\u0a3c\\u0a41-\\u0a42\\u0a47-\\u0a48\\u0a4b-\\u0a4d\\u0a51\\u0a70-\\u0a71\\u0a75\\u0a81-\\u0a82\\u0abc' + '\\u0ac1-\\u0ac5\\u0ac7-\\u0ac8\\u0acd\\u0ae2-\\u0ae3\\u0b01\\u0b3c\\u0b3e\\u0b3f\\u0b41-\\u0b44\\u0b4d\\u0b56\\u0b57' + '\\u0b62-\\u0b63\\u0b82\\u0bbe\\u0bc0\\u0bcd\\u0bd7\\u0c00\\u0c3e-\\u0c40\\u0c46-\\u0c48\\u0c4a-\\u0c4d\\u0c55-\\u0c56' + '\\u0c62-\\u0c63\\u0c81\\u0cbc\\u0cbf\\u0cc2\\u0cc6\\u0ccc-\\u0ccd\\u0cd5-\\u0cd6\\u0ce2-\\u0ce3\\u0d01\\u0d3e\\u0d41-\\u0d44' + '\\u0d4d\\u0d57\\u0d62-\\u0d63\\u0dca\\u0dcf\\u0dd2-\\u0dd4\\u0dd6\\u0ddf\\u0e31\\u0e34-\\u0e3a\\u0e47-\\u0e4e\\u0eb1\\u0eb4-\\u0eb9' + '\\u0ebb-\\u0ebc\\u0ec8-\\u0ecd\\u0f18-\\u0f19\\u0f35\\u0f37\\u0f39\\u0f71-\\u0f7e\\u0f80-\\u0f84\\u0f86-\\u0f87\\u0f8d-\\u0f97' + '\\u0f99-\\u0fbc\\u0fc6\\u102d-\\u1030\\u1032-\\u1037\\u1039-\\u103a\\u103d-\\u103e\\u1058-\\u1059\\u105e-\\u1060\\u1071-\\u1074' + '\\u1082\\u1085-\\u1086\\u108d\\u109d\\u135d-\\u135f\\u1712-\\u1714\\u1732-\\u1734\\u1752-\\u1753\\u1772-\\u1773\\u17b4-\\u17b5' + '\\u17b7-\\u17bd\\u17c6\\u17c9-\\u17d3\\u17dd\\u180b-\\u180d\\u18a9\\u1920-\\u1922\\u1927-\\u1928\\u1932\\u1939-\\u193b\\u1a17-\\u1a18' + '\\u1a1b\\u1a56\\u1a58-\\u1a5e\\u1a60\\u1a62\\u1a65-\\u1a6c\\u1a73-\\u1a7c\\u1a7f\\u1ab0-\\u1abd\\u1ABE\\u1b00-\\u1b03\\u1b34' + '\\u1b36-\\u1b3a\\u1b3c\\u1b42\\u1b6b-\\u1b73\\u1b80-\\u1b81\\u1ba2-\\u1ba5\\u1ba8-\\u1ba9\\u1bab-\\u1bad\\u1be6\\u1be8-\\u1be9' + '\\u1bed\\u1bef-\\u1bf1\\u1c2c-\\u1c33\\u1c36-\\u1c37\\u1cd0-\\u1cd2\\u1cd4-\\u1ce0\\u1ce2-\\u1ce8\\u1ced\\u1cf4\\u1cf8-\\u1cf9' + '\\u1dc0-\\u1df5\\u1dfc-\\u1dff\\u200c-\\u200d\\u20d0-\\u20dc\\u20DD-\\u20E0\\u20e1\\u20E2-\\u20E4\\u20e5-\\u20f0\\u2cef-\\u2cf1' + '\\u2d7f\\u2de0-\\u2dff\\u302a-\\u302d\\u302e-\\u302f\\u3099-\\u309a\\ua66f\\uA670-\\uA672\\ua674-\\ua67d\\ua69e-\\ua69f\\ua6f0-\\ua6f1' + '\\ua802\\ua806\\ua80b\\ua825-\\ua826\\ua8c4\\ua8e0-\\ua8f1\\ua926-\\ua92d\\ua947-\\ua951\\ua980-\\ua982\\ua9b3\\ua9b6-\\ua9b9\\ua9bc' + '\\ua9e5\\uaa29-\\uaa2e\\uaa31-\\uaa32\\uaa35-\\uaa36\\uaa43\\uaa4c\\uaa7c\\uaab0\\uaab2-\\uaab4\\uaab7-\\uaab8\\uaabe-\\uaabf\\uaac1' + '\\uaaec-\\uaaed\\uaaf6\\uabe5\\uabe8\\uabed\\ufb1e\\ufe00-\\ufe0f\\ufe20-\\ufe2f\\uff9e-\\uff9f]');\n    var isExtendingChar = function (ch) {\n      return typeof ch === 'string' && ch.charCodeAt(0) >= 768 && extendingChars.test(ch);\n    };\n\n    var liftN = function (arr, f) {\n      var r = [];\n      for (var i = 0; i < arr.length; i++) {\n        var x = arr[i];\n        if (x.isSome()) {\n          r.push(x.getOrDie());\n        } else {\n          return Option.none();\n        }\n      }\n      return Option.some(f.apply(null, r));\n    };\n\n    var slice$3 = [].slice;\n    var or = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$3.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (args[i](x)) {\n            return true;\n          }\n        }\n        return false;\n      };\n    };\n    var and = function () {\n      var x = [];\n      for (var _i = 0; _i < arguments.length; _i++) {\n        x[_i] = arguments[_i];\n      }\n      var args = slice$3.call(arguments);\n      return function (x) {\n        for (var i = 0; i < args.length; i++) {\n          if (!args[i](x)) {\n            return false;\n          }\n        }\n        return true;\n      };\n    };\n    var Predicate = {\n      and: and,\n      or: or\n    };\n\n    var isElement$3 = NodeType.isElement;\n    var isCaretCandidate$1 = isCaretCandidate;\n    var isBlock$1 = NodeType.matchStyleValues('display', 'block table');\n    var isFloated = NodeType.matchStyleValues('float', 'left right');\n    var isValidElementCaretCandidate = Predicate.and(isElement$3, isCaretCandidate$1, not(isFloated));\n    var isNotPre = not(NodeType.matchStyleValues('white-space', 'pre pre-line pre-wrap'));\n    var isText$4 = NodeType.isText;\n    var isBr$3 = NodeType.isBr;\n    var nodeIndex = DOMUtils$1.nodeIndex;\n    var resolveIndex = getNode;\n    var createRange = function (doc) {\n      return 'createRange' in doc ? doc.createRange() : DOMUtils$1.DOM.createRng();\n    };\n    var isWhiteSpace = function (chr) {\n      return chr && /[\\r\\n\\t ]/.test(chr);\n    };\n    var isRange = function (rng) {\n      return !!rng.setStart && !!rng.setEnd;\n    };\n    var isHiddenWhiteSpaceRange = function (range) {\n      var container = range.startContainer;\n      var offset = range.startOffset;\n      var text;\n      if (isWhiteSpace(range.toString()) && isNotPre(container.parentNode) && NodeType.isText(container)) {\n        text = container.data;\n        if (isWhiteSpace(text[offset - 1]) || isWhiteSpace(text[offset + 1])) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var getBrClientRect = function (brNode) {\n      var doc = brNode.ownerDocument;\n      var rng = createRange(doc);\n      var nbsp = doc.createTextNode('\\xA0');\n      var parentNode = brNode.parentNode;\n      var clientRect;\n      parentNode.insertBefore(nbsp, brNode);\n      rng.setStart(nbsp, 0);\n      rng.setEnd(nbsp, 1);\n      clientRect = clone$1(rng.getBoundingClientRect());\n      parentNode.removeChild(nbsp);\n      return clientRect;\n    };\n    var getBoundingClientRectWebKitText = function (rng) {\n      var sc = rng.startContainer;\n      var ec = rng.endContainer;\n      var so = rng.startOffset;\n      var eo = rng.endOffset;\n      if (sc === ec && NodeType.isText(ec) && so === 0 && eo === 1) {\n        var newRng = rng.cloneRange();\n        newRng.setEndAfter(ec);\n        return getBoundingClientRect(newRng);\n      } else {\n        return null;\n      }\n    };\n    var isZeroRect = function (r) {\n      return r.left === 0 && r.right === 0 && r.top === 0 && r.bottom === 0;\n    };\n    var getBoundingClientRect = function (item) {\n      var clientRect, clientRects;\n      clientRects = item.getClientRects();\n      if (clientRects.length > 0) {\n        clientRect = clone$1(clientRects[0]);\n      } else {\n        clientRect = clone$1(item.getBoundingClientRect());\n      }\n      if (!isRange(item) && isBr$3(item) && isZeroRect(clientRect)) {\n        return getBrClientRect(item);\n      }\n      if (isZeroRect(clientRect) && isRange(item)) {\n        return getBoundingClientRectWebKitText(item);\n      }\n      return clientRect;\n    };\n    var collapseAndInflateWidth = function (clientRect, toStart) {\n      var newClientRect = collapse(clientRect, toStart);\n      newClientRect.width = 1;\n      newClientRect.right = newClientRect.left + 1;\n      return newClientRect;\n    };\n    var getCaretPositionClientRects = function (caretPosition) {\n      var clientRects = [];\n      var beforeNode, node;\n      var addUniqueAndValidRect = function (clientRect) {\n        if (clientRect.height === 0) {\n          return;\n        }\n        if (clientRects.length > 0) {\n          if (isEqual(clientRect, clientRects[clientRects.length - 1])) {\n            return;\n          }\n        }\n        clientRects.push(clientRect);\n      };\n      var addCharacterOffset = function (container, offset) {\n        var range = createRange(container.ownerDocument);\n        if (offset < container.data.length) {\n          if (isExtendingChar(container.data[offset])) {\n            return clientRects;\n          }\n          if (isExtendingChar(container.data[offset - 1])) {\n            range.setStart(container, offset);\n            range.setEnd(container, offset + 1);\n            if (!isHiddenWhiteSpaceRange(range)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n              return clientRects;\n            }\n          }\n        }\n        if (offset > 0) {\n          range.setStart(container, offset - 1);\n          range.setEnd(container, offset);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), false));\n          }\n        }\n        if (offset < container.data.length) {\n          range.setStart(container, offset);\n          range.setEnd(container, offset + 1);\n          if (!isHiddenWhiteSpaceRange(range)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(range), true));\n          }\n        }\n      };\n      if (isText$4(caretPosition.container())) {\n        addCharacterOffset(caretPosition.container(), caretPosition.offset());\n        return clientRects;\n      }\n      if (isElement$3(caretPosition.container())) {\n        if (caretPosition.isAtEnd()) {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, node.data.length);\n          }\n          if (isValidElementCaretCandidate(node) && !isBr$3(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n          }\n        } else {\n          node = resolveIndex(caretPosition.container(), caretPosition.offset());\n          if (isText$4(node)) {\n            addCharacterOffset(node, 0);\n          }\n          if (isValidElementCaretCandidate(node) && caretPosition.isAtEnd()) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), false));\n            return clientRects;\n          }\n          beforeNode = resolveIndex(caretPosition.container(), caretPosition.offset() - 1);\n          if (isValidElementCaretCandidate(beforeNode) && !isBr$3(beforeNode)) {\n            if (isBlock$1(beforeNode) || isBlock$1(node) || !isValidElementCaretCandidate(node)) {\n              addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(beforeNode), false));\n            }\n          }\n          if (isValidElementCaretCandidate(node)) {\n            addUniqueAndValidRect(collapseAndInflateWidth(getBoundingClientRect(node), true));\n          }\n        }\n      }\n      return clientRects;\n    };\n    function CaretPosition(container, offset, clientRects) {\n      var isAtStart = function () {\n        if (isText$4(container)) {\n          return offset === 0;\n        }\n        return offset === 0;\n      };\n      var isAtEnd = function () {\n        if (isText$4(container)) {\n          return offset >= container.data.length;\n        }\n        return offset >= container.childNodes.length;\n      };\n      var toRange = function () {\n        var range;\n        range = createRange(container.ownerDocument);\n        range.setStart(container, offset);\n        range.setEnd(container, offset);\n        return range;\n      };\n      var getClientRects = function () {\n        if (!clientRects) {\n          clientRects = getCaretPositionClientRects(CaretPosition(container, offset));\n        }\n        return clientRects;\n      };\n      var isVisible = function () {\n        return getClientRects().length > 0;\n      };\n      var isEqual = function (caretPosition) {\n        return caretPosition && container === caretPosition.container() && offset === caretPosition.offset();\n      };\n      var getNode = function (before) {\n        return resolveIndex(container, before ? offset - 1 : offset);\n      };\n      return {\n        container: constant(container),\n        offset: constant(offset),\n        toRange: toRange,\n        getClientRects: getClientRects,\n        isVisible: isVisible,\n        isAtStart: isAtStart,\n        isAtEnd: isAtEnd,\n        isEqual: isEqual,\n        getNode: getNode\n      };\n    }\n    (function (CaretPosition) {\n      CaretPosition.fromRangeStart = function (range) {\n        return CaretPosition(range.startContainer, range.startOffset);\n      };\n      CaretPosition.fromRangeEnd = function (range) {\n        return CaretPosition(range.endContainer, range.endOffset);\n      };\n      CaretPosition.after = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node) + 1);\n      };\n      CaretPosition.before = function (node) {\n        return CaretPosition(node.parentNode, nodeIndex(node));\n      };\n      CaretPosition.isAbove = function (pos1, pos2) {\n        return liftN([\n          head(pos2.getClientRects()),\n          last(pos1.getClientRects())\n        ], isAbove).getOr(false);\n      };\n      CaretPosition.isBelow = function (pos1, pos2) {\n        return liftN([\n          last(pos2.getClientRects()),\n          head(pos1.getClientRects())\n        ], isBelow).getOr(false);\n      };\n      CaretPosition.isAtStart = function (pos) {\n        return pos ? pos.isAtStart() : false;\n      };\n      CaretPosition.isAtEnd = function (pos) {\n        return pos ? pos.isAtEnd() : false;\n      };\n      CaretPosition.isTextPosition = function (pos) {\n        return pos ? NodeType.isText(pos.container()) : false;\n      };\n      CaretPosition.isElementPosition = function (pos) {\n        return CaretPosition.isTextPosition(pos) === false;\n      };\n    }(CaretPosition || (CaretPosition = {})));\n    var CaretPosition$1 = CaretPosition;\n\n    var isText$5 = NodeType.isText;\n    var isBogus$1 = NodeType.isBogus;\n    var nodeIndex$1 = DOMUtils$1.nodeIndex;\n    var normalizedParent = function (node) {\n      var parentNode = node.parentNode;\n      if (isBogus$1(parentNode)) {\n        return normalizedParent(parentNode);\n      }\n      return parentNode;\n    };\n    var getChildNodes = function (node) {\n      if (!node) {\n        return [];\n      }\n      return ArrUtils.reduce(node.childNodes, function (result, node) {\n        if (isBogus$1(node) && node.nodeName !== 'BR') {\n          result = result.concat(getChildNodes(node));\n        } else {\n          result.push(node);\n        }\n        return result;\n      }, []);\n    };\n    var normalizedTextOffset = function (node, offset) {\n      while (node = node.previousSibling) {\n        if (!isText$5(node)) {\n          break;\n        }\n        offset += node.data.length;\n      }\n      return offset;\n    };\n    var equal = function (a) {\n      return function (b) {\n        return a === b;\n      };\n    };\n    var normalizedNodeIndex = function (node) {\n      var nodes, index, numTextFragments;\n      nodes = getChildNodes(normalizedParent(node));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      nodes = nodes.slice(0, index + 1);\n      numTextFragments = ArrUtils.reduce(nodes, function (result, node, i) {\n        if (isText$5(node) && isText$5(nodes[i - 1])) {\n          result++;\n        }\n        return result;\n      }, 0);\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames(node.nodeName));\n      index = ArrUtils.findIndex(nodes, equal(node), node);\n      return index - numTextFragments;\n    };\n    var createPathItem = function (node) {\n      var name;\n      if (isText$5(node)) {\n        name = 'text()';\n      } else {\n        name = node.nodeName.toLowerCase();\n      }\n      return name + '[' + normalizedNodeIndex(node) + ']';\n    };\n    var parentsUntil = function (root, node, predicate) {\n      var parents = [];\n      for (node = node.parentNode; node !== root; node = node.parentNode) {\n        if (predicate && predicate(node)) {\n          break;\n        }\n        parents.push(node);\n      }\n      return parents;\n    };\n    var create$2 = function (root, caretPosition) {\n      var container, offset, path = [], outputOffset, childNodes, parents;\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (isText$5(container)) {\n        outputOffset = normalizedTextOffset(container, offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length) {\n          outputOffset = 'after';\n          offset = childNodes.length - 1;\n        } else {\n          outputOffset = 'before';\n        }\n        container = childNodes[offset];\n      }\n      path.push(createPathItem(container));\n      parents = parentsUntil(root, container);\n      parents = ArrUtils.filter(parents, not(NodeType.isBogus));\n      path = path.concat(ArrUtils.map(parents, function (node) {\n        return createPathItem(node);\n      }));\n      return path.reverse().join('/') + ',' + outputOffset;\n    };\n    var resolvePathItem = function (node, name, index) {\n      var nodes = getChildNodes(node);\n      nodes = ArrUtils.filter(nodes, function (node, index) {\n        return !isText$5(node) || !isText$5(nodes[index - 1]);\n      });\n      nodes = ArrUtils.filter(nodes, NodeType.matchNodeNames(name));\n      return nodes[index];\n    };\n    var findTextPosition = function (container, offset) {\n      var node = container, targetOffset = 0, dataLen;\n      while (isText$5(node)) {\n        dataLen = node.data.length;\n        if (offset >= targetOffset && offset <= targetOffset + dataLen) {\n          container = node;\n          offset = offset - targetOffset;\n          break;\n        }\n        if (!isText$5(node.nextSibling)) {\n          container = node;\n          offset = dataLen;\n          break;\n        }\n        targetOffset += dataLen;\n        node = node.nextSibling;\n      }\n      if (isText$5(container) && offset > container.data.length) {\n        offset = container.data.length;\n      }\n      return CaretPosition$1(container, offset);\n    };\n    var resolve$2 = function (root, path) {\n      var parts, container, offset;\n      if (!path) {\n        return null;\n      }\n      parts = path.split(',');\n      path = parts[0].split('/');\n      offset = parts.length > 1 ? parts[1] : 'before';\n      container = ArrUtils.reduce(path, function (result, value) {\n        value = /([\\w\\-\\(\\)]+)\\[([0-9]+)\\]/.exec(value);\n        if (!value) {\n          return null;\n        }\n        if (value[1] === 'text()') {\n          value[1] = '#text';\n        }\n        return resolvePathItem(result, value[1], parseInt(value[2], 10));\n      }, root);\n      if (!container) {\n        return null;\n      }\n      if (!isText$5(container)) {\n        if (offset === 'after') {\n          offset = nodeIndex$1(container) + 1;\n        } else {\n          offset = nodeIndex$1(container);\n        }\n        return CaretPosition$1(container.parentNode, offset);\n      }\n      return findTextPosition(container, parseInt(offset, 10));\n    };\n\n    var trimEmptyTextNode = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var insertNode = function (dom, rng, node) {\n      rng.insertNode(node);\n      trimEmptyTextNode(dom, node.previousSibling);\n      trimEmptyTextNode(dom, node.nextSibling);\n    };\n    var insertFragment = function (dom, rng, frag) {\n      var firstChild = Option.from(frag.firstChild);\n      var lastChild = Option.from(frag.lastChild);\n      rng.insertNode(frag);\n      firstChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.previousSibling);\n      });\n      lastChild.each(function (child) {\n        return trimEmptyTextNode(dom, child.nextSibling);\n      });\n    };\n    var rangeInsertNode = function (dom, rng, node) {\n      if (NodeType.isDocumentFragment(node)) {\n        insertFragment(dom, rng, node);\n      } else {\n        insertNode(dom, rng, node);\n      }\n    };\n\n    var isContentEditableFalse$2 = NodeType.isContentEditableFalse;\n    var getNormalizedTextOffset = function (trim, container, offset) {\n      var node, trimmedOffset;\n      trimmedOffset = trim(container.data.slice(0, offset)).length;\n      for (node = container.previousSibling; node && NodeType.isText(node); node = node.previousSibling) {\n        trimmedOffset += trim(node.data).length;\n      }\n      return trimmedOffset;\n    };\n    var getPoint = function (dom, trim, normalized, rng, start) {\n      var container = rng[start ? 'startContainer' : 'endContainer'];\n      var offset = rng[start ? 'startOffset' : 'endOffset'];\n      var point = [];\n      var childNodes, after = 0;\n      var root = dom.getRoot();\n      if (NodeType.isText(container)) {\n        point.push(normalized ? getNormalizedTextOffset(trim, container, offset) : offset);\n      } else {\n        childNodes = container.childNodes;\n        if (offset >= childNodes.length && childNodes.length) {\n          after = 1;\n          offset = Math.max(0, childNodes.length - 1);\n        }\n        point.push(dom.nodeIndex(childNodes[offset], normalized) + after);\n      }\n      for (; container && container !== root; container = container.parentNode) {\n        point.push(dom.nodeIndex(container, normalized));\n      }\n      return point;\n    };\n    var getLocation = function (trim, selection, normalized, rng) {\n      var dom = selection.dom, bookmark = {};\n      bookmark.start = getPoint(dom, trim, normalized, rng, true);\n      if (!selection.isCollapsed()) {\n        bookmark.end = getPoint(dom, trim, normalized, rng, false);\n      }\n      return bookmark;\n    };\n    var findIndex$2 = function (dom, name, element) {\n      var count = 0;\n      Tools.each(dom.select(name), function (node) {\n        if (node.getAttribute('data-mce-bogus') === 'all') {\n          return;\n        }\n        if (node === element) {\n          return false;\n        }\n        count++;\n      });\n      return count;\n    };\n    var moveEndPoint = function (rng, start) {\n      var container, offset, childNodes;\n      var prefix = start ? 'start' : 'end';\n      container = rng[prefix + 'Container'];\n      offset = rng[prefix + 'Offset'];\n      if (NodeType.isElement(container) && container.nodeName === 'TR') {\n        childNodes = container.childNodes;\n        container = childNodes[Math.min(start ? offset : offset - 1, childNodes.length - 1)];\n        if (container) {\n          offset = start ? 0 : container.childNodes.length;\n          rng['set' + (start ? 'Start' : 'End')](container, offset);\n        }\n      }\n    };\n    var normalizeTableCellSelection = function (rng) {\n      moveEndPoint(rng, true);\n      moveEndPoint(rng, false);\n      return rng;\n    };\n    var findSibling = function (node, offset) {\n      var sibling;\n      if (NodeType.isElement(node)) {\n        node = getNode(node, offset);\n        if (isContentEditableFalse$2(node)) {\n          return node;\n        }\n      }\n      if (isCaretContainer(node)) {\n        if (NodeType.isText(node) && isCaretContainerBlock(node)) {\n          node = node.parentNode;\n        }\n        sibling = node.previousSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n        sibling = node.nextSibling;\n        if (isContentEditableFalse$2(sibling)) {\n          return sibling;\n        }\n      }\n    };\n    var findAdjacentContentEditableFalseElm = function (rng) {\n      return findSibling(rng.startContainer, rng.startOffset) || findSibling(rng.endContainer, rng.endOffset);\n    };\n    var getOffsetBookmark = function (trim, normalized, selection) {\n      var element = selection.getNode();\n      var name = element ? element.nodeName : null;\n      var rng = selection.getRng();\n      if (isContentEditableFalse$2(element) || name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, element)\n        };\n      }\n      var sibling = findAdjacentContentEditableFalseElm(rng);\n      if (sibling) {\n        name = sibling.tagName;\n        return {\n          name: name,\n          index: findIndex$2(selection.dom, name, sibling)\n        };\n      }\n      return getLocation(trim, selection, normalized, rng);\n    };\n    var getCaretBookmark = function (selection) {\n      var rng = selection.getRng();\n      return {\n        start: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeStart(rng)),\n        end: create$2(selection.dom.getRoot(), CaretPosition$1.fromRangeEnd(rng))\n      };\n    };\n    var getRangeBookmark = function (selection) {\n      return { rng: selection.getRng() };\n    };\n    var createBookmarkSpan = function (dom, id, filled) {\n      var args = {\n        'data-mce-type': 'bookmark',\n        'id': id,\n        'style': 'overflow:hidden;line-height:0px'\n      };\n      return filled ? dom.create('span', args, '&#xFEFF;') : dom.create('span', args);\n    };\n    var getPersistentBookmark = function (selection, filled) {\n      var dom = selection.dom;\n      var rng = selection.getRng();\n      var id = dom.uniqueId();\n      var collapsed = selection.isCollapsed();\n      var element = selection.getNode();\n      var name = element.nodeName;\n      if (name === 'IMG') {\n        return {\n          name: name,\n          index: findIndex$2(dom, name, element)\n        };\n      }\n      var rng2 = normalizeTableCellSelection(rng.cloneRange());\n      if (!collapsed) {\n        rng2.collapse(false);\n        var endBookmarkNode = createBookmarkSpan(dom, id + '_end', filled);\n        rangeInsertNode(dom, rng2, endBookmarkNode);\n      }\n      rng = normalizeTableCellSelection(rng);\n      rng.collapse(true);\n      var startBookmarkNode = createBookmarkSpan(dom, id + '_start', filled);\n      rangeInsertNode(dom, rng, startBookmarkNode);\n      selection.moveToBookmark({\n        id: id,\n        keep: 1\n      });\n      return { id: id };\n    };\n    var getBookmark = function (selection, type, normalized) {\n      if (type === 2) {\n        return getOffsetBookmark(Zwsp.trim, normalized, selection);\n      } else if (type === 3) {\n        return getCaretBookmark(selection);\n      } else if (type) {\n        return getRangeBookmark(selection);\n      } else {\n        return getPersistentBookmark(selection, false);\n      }\n    };\n    var GetBookmark = {\n      getBookmark: getBookmark,\n      getUndoBookmark: curry(getOffsetBookmark, identity, true),\n      getPersistentBookmark: getPersistentBookmark\n    };\n\n    var CARET_ID = '_mce_caret';\n    var isCaretNode = function (node) {\n      return NodeType.isElement(node) && node.id === CARET_ID;\n    };\n    var getParentCaretContainer = function (body, node) {\n      while (node && node !== body) {\n        if (node.id === CARET_ID) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n\n    var isElement$4 = NodeType.isElement;\n    var isText$6 = NodeType.isText;\n    var removeNode = function (node) {\n      var parentNode = node.parentNode;\n      if (parentNode) {\n        parentNode.removeChild(node);\n      }\n    };\n    var getNodeValue = function (node) {\n      try {\n        return node.nodeValue;\n      } catch (ex) {\n        return '';\n      }\n    };\n    var setNodeValue = function (node, text) {\n      if (text.length === 0) {\n        removeNode(node);\n      } else {\n        node.nodeValue = text;\n      }\n    };\n    var trimCount = function (text) {\n      var trimmedText = Zwsp.trim(text);\n      return {\n        count: text.length - trimmedText.length,\n        text: trimmedText\n      };\n    };\n    var removeUnchanged = function (caretContainer, pos) {\n      remove$5(caretContainer);\n      return pos;\n    };\n    var removeTextAndReposition = function (caretContainer, pos) {\n      var before = trimCount(caretContainer.data.substr(0, pos.offset()));\n      var after = trimCount(caretContainer.data.substr(pos.offset()));\n      var text = before.text + after.text;\n      if (text.length > 0) {\n        setNodeValue(caretContainer, text);\n        return CaretPosition$1(caretContainer, pos.offset() - before.count);\n      } else {\n        return pos;\n      }\n    };\n    var removeElementAndReposition = function (caretContainer, pos) {\n      var parentNode = pos.container();\n      var newPosition = indexOf(from$1(parentNode.childNodes), caretContainer).map(function (index) {\n        return index < pos.offset() ? CaretPosition$1(parentNode, pos.offset() - 1) : pos;\n      }).getOr(pos);\n      remove$5(caretContainer);\n      return newPosition;\n    };\n    var removeTextCaretContainer = function (caretContainer, pos) {\n      return isText$6(caretContainer) && pos.container() === caretContainer ? removeTextAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeElementCaretContainer = function (caretContainer, pos) {\n      return pos.container() === caretContainer.parentNode ? removeElementAndReposition(caretContainer, pos) : removeUnchanged(caretContainer, pos);\n    };\n    var removeAndReposition = function (container, pos) {\n      return CaretPosition$1.isTextPosition(pos) ? removeTextCaretContainer(container, pos) : removeElementCaretContainer(container, pos);\n    };\n    var remove$5 = function (caretContainerNode) {\n      if (isElement$4(caretContainerNode) && isCaretContainer(caretContainerNode)) {\n        if (hasContent(caretContainerNode)) {\n          caretContainerNode.removeAttribute('data-mce-caret');\n        } else {\n          removeNode(caretContainerNode);\n        }\n      }\n      if (isText$6(caretContainerNode)) {\n        var text = Zwsp.trim(getNodeValue(caretContainerNode));\n        setNodeValue(caretContainerNode, text);\n      }\n    };\n    var CaretContainerRemove = {\n      removeAndReposition: removeAndReposition,\n      remove: remove$5\n    };\n\n    var browser$2 = PlatformDetection$1.detect().browser;\n    var isContentEditableFalse$3 = NodeType.isContentEditableFalse;\n    var isTableCell$1 = function (node) {\n      return NodeType.isElement(node) && /^(TD|TH)$/i.test(node.tagName);\n    };\n    var getAbsoluteClientRect = function (root, element, before) {\n      var clientRect = collapse(element.getBoundingClientRect(), before);\n      var docElm, scrollX, scrollY, margin, rootRect;\n      if (root.tagName === 'BODY') {\n        docElm = root.ownerDocument.documentElement;\n        scrollX = root.scrollLeft || docElm.scrollLeft;\n        scrollY = root.scrollTop || docElm.scrollTop;\n      } else {\n        rootRect = root.getBoundingClientRect();\n        scrollX = root.scrollLeft - rootRect.left;\n        scrollY = root.scrollTop - rootRect.top;\n      }\n      clientRect.left += scrollX;\n      clientRect.right += scrollX;\n      clientRect.top += scrollY;\n      clientRect.bottom += scrollY;\n      clientRect.width = 1;\n      margin = element.offsetWidth - element.clientWidth;\n      if (margin > 0) {\n        if (before) {\n          margin *= -1;\n        }\n        clientRect.left += margin;\n        clientRect.right += margin;\n      }\n      return clientRect;\n    };\n    var trimInlineCaretContainers = function (root) {\n      var contentEditableFalseNodes, node, sibling, i, data;\n      contentEditableFalseNodes = DomQuery('*[contentEditable=false]', root);\n      for (i = 0; i < contentEditableFalseNodes.length; i++) {\n        node = contentEditableFalseNodes[i];\n        sibling = node.previousSibling;\n        if (endsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(data.length - 1, 1);\n          }\n        }\n        sibling = node.nextSibling;\n        if (startsWithCaretContainer(sibling)) {\n          data = sibling.data;\n          if (data.length === 1) {\n            sibling.parentNode.removeChild(sibling);\n          } else {\n            sibling.deleteData(0, 1);\n          }\n        }\n      }\n    };\n    var FakeCaret = function (root, isBlock, hasFocus) {\n      var lastVisualCaret = Cell(Option.none());\n      var cursorInterval, caretContainerNode;\n      var show = function (before, element) {\n        var clientRect, rng;\n        hide();\n        if (isTableCell$1(element)) {\n          return null;\n        }\n        if (isBlock(element)) {\n          caretContainerNode = insertBlock('p', element, before);\n          clientRect = getAbsoluteClientRect(root, element, before);\n          DomQuery(caretContainerNode).css('top', clientRect.top);\n          var caret = DomQuery('<div class=\"mce-visual-caret\" data-mce-bogus=\"all\"></div>').css(clientRect).appendTo(root)[0];\n          lastVisualCaret.set(Option.some({\n            caret: caret,\n            element: element,\n            before: before\n          }));\n          lastVisualCaret.get().each(function (caretState) {\n            if (before) {\n              DomQuery(caretState.caret).addClass('mce-visual-caret-before');\n            }\n          });\n          startBlink();\n          rng = element.ownerDocument.createRange();\n          rng.setStart(caretContainerNode, 0);\n          rng.setEnd(caretContainerNode, 0);\n        } else {\n          caretContainerNode = insertInline(element, before);\n          rng = element.ownerDocument.createRange();\n          if (isContentEditableFalse$3(caretContainerNode.nextSibling)) {\n            rng.setStart(caretContainerNode, 0);\n            rng.setEnd(caretContainerNode, 0);\n          } else {\n            rng.setStart(caretContainerNode, 1);\n            rng.setEnd(caretContainerNode, 1);\n          }\n          return rng;\n        }\n        return rng;\n      };\n      var hide = function () {\n        trimInlineCaretContainers(root);\n        if (caretContainerNode) {\n          CaretContainerRemove.remove(caretContainerNode);\n          caretContainerNode = null;\n        }\n        lastVisualCaret.get().each(function (caretState) {\n          DomQuery(caretState.caret).remove();\n          lastVisualCaret.set(Option.none());\n        });\n        clearInterval(cursorInterval);\n      };\n      var startBlink = function () {\n        cursorInterval = Delay.setInterval(function () {\n          if (hasFocus()) {\n            DomQuery('div.mce-visual-caret', root).toggleClass('mce-visual-caret-hidden');\n          } else {\n            DomQuery('div.mce-visual-caret', root).addClass('mce-visual-caret-hidden');\n          }\n        }, 500);\n      };\n      var reposition = function () {\n        lastVisualCaret.get().each(function (caretState) {\n          var clientRect = getAbsoluteClientRect(root, caretState.element, caretState.before);\n          DomQuery(caretState.caret).css(clientRect);\n        });\n      };\n      var destroy = function () {\n        return Delay.clearInterval(cursorInterval);\n      };\n      var getCss = function () {\n        return '.mce-visual-caret {' + 'position: absolute;' + 'background-color: black;' + 'background-color: currentcolor;' + '}' + '.mce-visual-caret-hidden {' + 'display: none;' + '}' + '*[data-mce-caret] {' + 'position: absolute;' + 'left: -1000px;' + 'right: auto;' + 'top: 0;' + 'margin: 0;' + 'padding: 0;' + '}';\n      };\n      return {\n        show: show,\n        hide: hide,\n        getCss: getCss,\n        reposition: reposition,\n        destroy: destroy\n      };\n    };\n    var isFakeCaretTableBrowser = function () {\n      return browser$2.isIE() || browser$2.isEdge() || browser$2.isFirefox();\n    };\n    var isFakeCaretTarget = function (node) {\n      return isContentEditableFalse$3(node) || NodeType.isTable(node) && isFakeCaretTableBrowser();\n    };\n\n    var isContentEditableFalse$4 = NodeType.isContentEditableFalse;\n    var isBlockLike = NodeType.matchStyleValues('display', 'block table table-cell table-caption list-item');\n    var isCaretContainer$2 = isCaretContainer;\n    var isCaretContainerBlock$1 = isCaretContainerBlock;\n    var isElement$5 = NodeType.isElement;\n    var isCaretCandidate$2 = isCaretCandidate;\n    var isForwards = function (direction) {\n      return direction > 0;\n    };\n    var isBackwards = function (direction) {\n      return direction < 0;\n    };\n    var skipCaretContainers = function (walk, shallow) {\n      var node;\n      while (node = walk(shallow)) {\n        if (!isCaretContainerBlock$1(node)) {\n          return node;\n        }\n      }\n      return null;\n    };\n    var findNode = function (node, direction, predicateFn, rootNode, shallow) {\n      var walker = new TreeWalker(node, rootNode);\n      if (isBackwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.prev, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.prev, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      if (isForwards(direction)) {\n        if (isContentEditableFalse$4(node) || isCaretContainerBlock$1(node)) {\n          node = skipCaretContainers(walker.next, true);\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n        while (node = skipCaretContainers(walker.next, shallow)) {\n          if (predicateFn(node)) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var getParentBlock = function (node, rootNode) {\n      while (node && node !== rootNode) {\n        if (isBlockLike(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var isInSameBlock = function (caretPosition1, caretPosition2, rootNode) {\n      return getParentBlock(caretPosition1.container(), rootNode) === getParentBlock(caretPosition2.container(), rootNode);\n    };\n    var getChildNodeAtRelativeOffset = function (relativeOffset, caretPosition) {\n      var container, offset;\n      if (!caretPosition) {\n        return null;\n      }\n      container = caretPosition.container();\n      offset = caretPosition.offset();\n      if (!isElement$5(container)) {\n        return null;\n      }\n      return container.childNodes[offset + relativeOffset];\n    };\n    var beforeAfter = function (before, node) {\n      var range = node.ownerDocument.createRange();\n      if (before) {\n        range.setStartBefore(node);\n        range.setEndBefore(node);\n      } else {\n        range.setStartAfter(node);\n        range.setEndAfter(node);\n      }\n      return range;\n    };\n    var isNodesInSameBlock = function (root, node1, node2) {\n      return getParentBlock(node1, root) === getParentBlock(node2, root);\n    };\n    var lean = function (left, root, node) {\n      var sibling, siblingName;\n      if (left) {\n        siblingName = 'previousSibling';\n      } else {\n        siblingName = 'nextSibling';\n      }\n      while (node && node !== root) {\n        sibling = node[siblingName];\n        if (isCaretContainer$2(sibling)) {\n          sibling = sibling[siblingName];\n        }\n        if (isContentEditableFalse$4(sibling)) {\n          if (isNodesInSameBlock(root, sibling, node)) {\n            return sibling;\n          }\n          break;\n        }\n        if (isCaretCandidate$2(sibling)) {\n          break;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var before$2 = curry(beforeAfter, true);\n    var after$1 = curry(beforeAfter, false);\n    var normalizeRange = function (direction, root, range) {\n      var node, container, offset, location;\n      var leanLeft = curry(lean, true, root);\n      var leanRight = curry(lean, false, root);\n      container = range.startContainer;\n      offset = range.startOffset;\n      if (isCaretContainerBlock(container)) {\n        if (!isElement$5(container)) {\n          container = container.parentNode;\n        }\n        location = container.getAttribute('data-mce-caret');\n        if (location === 'before') {\n          node = container.nextSibling;\n          if (isFakeCaretTarget(node)) {\n            return before$2(node);\n          }\n        }\n        if (location === 'after') {\n          node = container.previousSibling;\n          if (isFakeCaretTarget(node)) {\n            return after$1(node);\n          }\n        }\n      }\n      if (!range.collapsed) {\n        return range;\n      }\n      if (NodeType.isText(container)) {\n        if (isCaretContainer$2(container)) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (endsWithCaretContainer(container) && offset >= container.data.length - 1) {\n          if (direction === 1) {\n            node = leanRight(container);\n            if (node) {\n              return before$2(node);\n            }\n          }\n          return range;\n        }\n        if (startsWithCaretContainer(container) && offset <= 1) {\n          if (direction === -1) {\n            node = leanLeft(container);\n            if (node) {\n              return after$1(node);\n            }\n          }\n          return range;\n        }\n        if (offset === container.data.length) {\n          node = leanRight(container);\n          if (node) {\n            return before$2(node);\n          }\n          return range;\n        }\n        if (offset === 0) {\n          node = leanLeft(container);\n          if (node) {\n            return after$1(node);\n          }\n          return range;\n        }\n      }\n      return range;\n    };\n    var getRelativeCefElm = function (forward, caretPosition) {\n      return Option.from(getChildNodeAtRelativeOffset(forward ? 0 : -1, caretPosition)).filter(isContentEditableFalse$4);\n    };\n    var getNormalizedRangeEndPoint = function (direction, root, range) {\n      var normalizedRange = normalizeRange(direction, root, range);\n      if (direction === -1) {\n        return CaretPosition.fromRangeStart(normalizedRange);\n      }\n      return CaretPosition.fromRangeEnd(normalizedRange);\n    };\n    var getElementFromPosition = function (pos) {\n      return Option.from(pos.getNode()).map(Element.fromDom);\n    };\n    var getElementFromPrevPosition = function (pos) {\n      return Option.from(pos.getNode(true)).map(Element.fromDom);\n    };\n    var getVisualCaretPosition = function (walkFn, caretPosition) {\n      while (caretPosition = walkFn(caretPosition)) {\n        if (caretPosition.isVisible()) {\n          return caretPosition;\n        }\n      }\n      return caretPosition;\n    };\n    var isMoveInsideSameBlock = function (from, to) {\n      var inSameBlock = isInSameBlock(from, to);\n      if (!inSameBlock && NodeType.isBr(from.getNode())) {\n        return true;\n      }\n      return inSameBlock;\n    };\n\n    var HDirection;\n    (function (HDirection) {\n      HDirection[HDirection['Backwards'] = -1] = 'Backwards';\n      HDirection[HDirection['Forwards'] = 1] = 'Forwards';\n    }(HDirection || (HDirection = {})));\n    var isContentEditableFalse$5 = NodeType.isContentEditableFalse;\n    var isText$7 = NodeType.isText;\n    var isElement$6 = NodeType.isElement;\n    var isBr$4 = NodeType.isBr;\n    var isCaretCandidate$3 = isCaretCandidate;\n    var isAtomic$1 = isAtomic;\n    var isEditableCaretCandidate$1 = isEditableCaretCandidate;\n    var getParents = function (node, root) {\n      var parents = [];\n      while (node && node !== root) {\n        parents.push(node);\n        node = node.parentNode;\n      }\n      return parents;\n    };\n    var nodeAtIndex = function (container, offset) {\n      if (container.hasChildNodes() && offset < container.childNodes.length) {\n        return container.childNodes[offset];\n      }\n      return null;\n    };\n    var getCaretCandidatePosition = function (direction, node) {\n      if (isForwards(direction)) {\n        if (isCaretCandidate$3(node.previousSibling) && !isText$7(node.previousSibling)) {\n          return CaretPosition$1.before(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, 0);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isCaretCandidate$3(node.nextSibling) && !isText$7(node.nextSibling)) {\n          return CaretPosition$1.after(node);\n        }\n        if (isText$7(node)) {\n          return CaretPosition$1(node, node.data.length);\n        }\n      }\n      if (isBackwards(direction)) {\n        if (isBr$4(node)) {\n          return CaretPosition$1.before(node);\n        }\n        return CaretPosition$1.after(node);\n      }\n      return CaretPosition$1.before(node);\n    };\n    var moveForwardFromBr = function (root, nextNode) {\n      var nextSibling = nextNode.nextSibling;\n      if (nextSibling && isCaretCandidate$3(nextSibling)) {\n        if (isText$7(nextSibling)) {\n          return CaretPosition$1(nextSibling, 0);\n        } else {\n          return CaretPosition$1.before(nextSibling);\n        }\n      } else {\n        return findCaretPosition(HDirection.Forwards, CaretPosition$1.after(nextNode), root);\n      }\n    };\n    var findCaretPosition = function (direction, startPos, root) {\n      var node, nextNode, innerNode;\n      var rootContentEditableFalseElm, caretPosition;\n      if (!isElement$6(root) || !startPos) {\n        return null;\n      }\n      if (startPos.isEqual(CaretPosition$1.after(root)) && root.lastChild) {\n        caretPosition = CaretPosition$1.after(root.lastChild);\n        if (isBackwards(direction) && isCaretCandidate$3(root.lastChild) && isElement$6(root.lastChild)) {\n          return isBr$4(root.lastChild) ? CaretPosition$1.before(root.lastChild) : caretPosition;\n        }\n      } else {\n        caretPosition = startPos;\n      }\n      var container = caretPosition.container();\n      var offset = caretPosition.offset();\n      if (isText$7(container)) {\n        if (isBackwards(direction) && offset > 0) {\n          return CaretPosition$1(container, --offset);\n        }\n        if (isForwards(direction) && offset < container.length) {\n          return CaretPosition$1(container, ++offset);\n        }\n        node = container;\n      } else {\n        if (isBackwards(direction) && offset > 0) {\n          nextNode = nodeAtIndex(container, offset - 1);\n          if (isCaretCandidate$3(nextNode)) {\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, innerNode.data.length);\n                }\n                return CaretPosition$1.after(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, nextNode.data.length);\n            }\n            return CaretPosition$1.before(nextNode);\n          }\n        }\n        if (isForwards(direction) && offset < container.childNodes.length) {\n          nextNode = nodeAtIndex(container, offset);\n          if (isCaretCandidate$3(nextNode)) {\n            if (isBr$4(nextNode)) {\n              return moveForwardFromBr(root, nextNode);\n            }\n            if (!isAtomic$1(nextNode)) {\n              innerNode = findNode(nextNode, direction, isEditableCaretCandidate$1, nextNode);\n              if (innerNode) {\n                if (isText$7(innerNode)) {\n                  return CaretPosition$1(innerNode, 0);\n                }\n                return CaretPosition$1.before(innerNode);\n              }\n            }\n            if (isText$7(nextNode)) {\n              return CaretPosition$1(nextNode, 0);\n            }\n            return CaretPosition$1.after(nextNode);\n          }\n        }\n        node = nextNode ? nextNode : caretPosition.getNode();\n      }\n      if (isForwards(direction) && caretPosition.isAtEnd() || isBackwards(direction) && caretPosition.isAtStart()) {\n        node = findNode(node, direction, constant(true), root, true);\n        if (isEditableCaretCandidate$1(node, root)) {\n          return getCaretCandidatePosition(direction, node);\n        }\n      }\n      nextNode = findNode(node, direction, isEditableCaretCandidate$1, root);\n      rootContentEditableFalseElm = ArrUtils.last(filter(getParents(container, root), isContentEditableFalse$5));\n      if (rootContentEditableFalseElm && (!nextNode || !rootContentEditableFalseElm.contains(nextNode))) {\n        if (isForwards(direction)) {\n          caretPosition = CaretPosition$1.after(rootContentEditableFalseElm);\n        } else {\n          caretPosition = CaretPosition$1.before(rootContentEditableFalseElm);\n        }\n        return caretPosition;\n      }\n      if (nextNode) {\n        return getCaretCandidatePosition(direction, nextNode);\n      }\n      return null;\n    };\n    var CaretWalker = function (root) {\n      return {\n        next: function (caretPosition) {\n          return findCaretPosition(HDirection.Forwards, caretPosition, root);\n        },\n        prev: function (caretPosition) {\n          return findCaretPosition(HDirection.Backwards, caretPosition, root);\n        }\n      };\n    };\n\n    var walkToPositionIn = function (forward, root, start) {\n      var position = forward ? CaretPosition$1.before(start) : CaretPosition$1.after(start);\n      return fromPosition(forward, root, position);\n    };\n    var afterElement = function (node) {\n      return NodeType.isBr(node) ? CaretPosition$1.before(node) : CaretPosition$1.after(node);\n    };\n    var isBeforeOrStart = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        return position.offset() === 0;\n      } else {\n        return isCaretCandidate(position.getNode());\n      }\n    };\n    var isAfterOrEnd = function (position) {\n      if (CaretPosition$1.isTextPosition(position)) {\n        var container = position.container();\n        return position.offset() === container.data.length;\n      } else {\n        return isCaretCandidate(position.getNode(true));\n      }\n    };\n    var isBeforeAfterSameElement = function (from, to) {\n      return !CaretPosition$1.isTextPosition(from) && !CaretPosition$1.isTextPosition(to) && from.getNode() === to.getNode(true);\n    };\n    var isAtBr = function (position) {\n      return !CaretPosition$1.isTextPosition(position) && NodeType.isBr(position.getNode());\n    };\n    var shouldSkipPosition = function (forward, from, to) {\n      if (forward) {\n        return !isBeforeAfterSameElement(from, to) && !isAtBr(from) && isAfterOrEnd(from) && isBeforeOrStart(to);\n      } else {\n        return !isBeforeAfterSameElement(to, from) && isBeforeOrStart(from) && isAfterOrEnd(to);\n      }\n    };\n    var fromPosition = function (forward, root, pos) {\n      var walker = CaretWalker(root);\n      return Option.from(forward ? walker.next(pos) : walker.prev(pos));\n    };\n    var navigate = function (forward, root, from) {\n      return fromPosition(forward, root, from).bind(function (to) {\n        if (isInSameBlock(from, to, root) && shouldSkipPosition(forward, from, to)) {\n          return fromPosition(forward, root, to);\n        } else {\n          return Option.some(to);\n        }\n      });\n    };\n    var navigateIgnore = function (forward, root, from, ignoreFilter) {\n      return navigate(forward, root, from).bind(function (pos) {\n        return ignoreFilter(pos) ? navigateIgnore(forward, root, pos, ignoreFilter) : Option.some(pos);\n      });\n    };\n    var positionIn = function (forward, element) {\n      var startNode = forward ? element.firstChild : element.lastChild;\n      if (NodeType.isText(startNode)) {\n        return Option.some(CaretPosition$1(startNode, forward ? 0 : startNode.data.length));\n      } else if (startNode) {\n        if (isCaretCandidate(startNode)) {\n          return Option.some(forward ? CaretPosition$1.before(startNode) : afterElement(startNode));\n        } else {\n          return walkToPositionIn(forward, element, startNode);\n        }\n      } else {\n        return Option.none();\n      }\n    };\n    var nextPosition = curry(fromPosition, true);\n    var prevPosition = curry(fromPosition, false);\n    var CaretFinder = {\n      fromPosition: fromPosition,\n      nextPosition: nextPosition,\n      prevPosition: prevPosition,\n      navigate: navigate,\n      navigateIgnore: navigateIgnore,\n      positionIn: positionIn,\n      firstPositionIn: curry(positionIn, true),\n      lastPositionIn: curry(positionIn, false)\n    };\n\n    var isStringPathBookmark = function (bookmark) {\n      return typeof bookmark.start === 'string';\n    };\n    var isRangeBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('rng');\n    };\n    var isIdBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('id');\n    };\n    var isIndexBookmark = function (bookmark) {\n      return bookmark.hasOwnProperty('name');\n    };\n    var isPathBookmark = function (bookmark) {\n      return Tools.isArray(bookmark.start);\n    };\n\n    var addBogus = function (dom, node) {\n      if (dom.isBlock(node) && !node.innerHTML && !Env.ie) {\n        node.innerHTML = '<br data-mce-bogus=\"1\" />';\n      }\n      return node;\n    };\n    var resolveCaretPositionBookmark = function (dom, bookmark) {\n      var rng, pos;\n      rng = dom.createRng();\n      pos = resolve$2(dom.getRoot(), bookmark.start);\n      rng.setStart(pos.container(), pos.offset());\n      pos = resolve$2(dom.getRoot(), bookmark.end);\n      rng.setEnd(pos.container(), pos.offset());\n      return rng;\n    };\n    var insertZwsp = function (node, rng) {\n      var textNode = node.ownerDocument.createTextNode(Zwsp.ZWSP);\n      node.appendChild(textNode);\n      rng.setStart(textNode, 0);\n      rng.setEnd(textNode, 0);\n    };\n    var isEmpty = function (node) {\n      return node.hasChildNodes() === false;\n    };\n    var tryFindRangePosition = function (node, rng) {\n      return CaretFinder.lastPositionIn(node).fold(function () {\n        return false;\n      }, function (pos) {\n        rng.setStart(pos.container(), pos.offset());\n        rng.setEnd(pos.container(), pos.offset());\n        return true;\n      });\n    };\n    var padEmptyCaretContainer = function (root, node, rng) {\n      if (isEmpty(node) && getParentCaretContainer(root, node)) {\n        insertZwsp(node, rng);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var setEndPoint = function (dom, start, bookmark, rng) {\n      var point = bookmark[start ? 'start' : 'end'];\n      var i, node, offset, children;\n      var root = dom.getRoot();\n      if (point) {\n        offset = point[0];\n        for (node = root, i = point.length - 1; i >= 1; i--) {\n          children = node.childNodes;\n          if (padEmptyCaretContainer(root, node, rng)) {\n            return true;\n          }\n          if (point[i] > children.length - 1) {\n            if (padEmptyCaretContainer(root, node, rng)) {\n              return true;\n            }\n            return tryFindRangePosition(node, rng);\n          }\n          node = children[point[i]];\n        }\n        if (node.nodeType === 3) {\n          offset = Math.min(point[0], node.nodeValue.length);\n        }\n        if (node.nodeType === 1) {\n          offset = Math.min(point[0], node.childNodes.length);\n        }\n        if (start) {\n          rng.setStart(node, offset);\n        } else {\n          rng.setEnd(node, offset);\n        }\n      }\n      return true;\n    };\n    var isValidTextNode = function (node) {\n      return NodeType.isText(node) && node.data.length > 0;\n    };\n    var restoreEndPoint = function (dom, suffix, bookmark) {\n      var marker = dom.get(bookmark.id + '_' + suffix), node, idx, next, prev;\n      var keep = bookmark.keep;\n      var container, offset;\n      if (marker) {\n        node = marker.parentNode;\n        if (suffix === 'start') {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.nextSibling)) {\n              node = marker.nextSibling;\n              idx = 0;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker) + 1;\n            }\n          }\n          container = node;\n          offset = idx;\n        } else {\n          if (!keep) {\n            idx = dom.nodeIndex(marker);\n          } else {\n            if (marker.hasChildNodes()) {\n              node = marker.firstChild;\n              idx = 1;\n            } else if (isValidTextNode(marker.previousSibling)) {\n              node = marker.previousSibling;\n              idx = marker.previousSibling.data.length;\n            } else {\n              node = marker.parentNode;\n              idx = dom.nodeIndex(marker);\n            }\n          }\n          container = node;\n          offset = idx;\n        }\n        if (!keep) {\n          prev = marker.previousSibling;\n          next = marker.nextSibling;\n          Tools.each(Tools.grep(marker.childNodes), function (node) {\n            if (NodeType.isText(node)) {\n              node.nodeValue = node.nodeValue.replace(/\\uFEFF/g, '');\n            }\n          });\n          while (marker = dom.get(bookmark.id + '_' + suffix)) {\n            dom.remove(marker, true);\n          }\n          if (prev && next && prev.nodeType === next.nodeType && NodeType.isText(prev) && !Env.opera) {\n            idx = prev.nodeValue.length;\n            prev.appendData(next.nodeValue);\n            dom.remove(next);\n            if (suffix === 'start') {\n              container = prev;\n              offset = idx;\n            } else {\n              container = prev;\n              offset = idx;\n            }\n          }\n        }\n        return Option.some(CaretPosition$1(container, offset));\n      } else {\n        return Option.none();\n      }\n    };\n    var alt = function (o1, o2) {\n      return o1.isSome() ? o1 : o2;\n    };\n    var resolvePaths = function (dom, bookmark) {\n      var rng = dom.createRng();\n      if (setEndPoint(dom, true, bookmark, rng) && setEndPoint(dom, false, bookmark, rng)) {\n        return Option.some(rng);\n      } else {\n        return Option.none();\n      }\n    };\n    var resolveId = function (dom, bookmark) {\n      var startPos = restoreEndPoint(dom, 'start', bookmark);\n      var endPos = restoreEndPoint(dom, 'end', bookmark);\n      return liftN([\n        startPos,\n        alt(endPos, startPos)\n      ], function (spos, epos) {\n        var rng = dom.createRng();\n        rng.setStart(addBogus(dom, spos.container()), spos.offset());\n        rng.setEnd(addBogus(dom, epos.container()), epos.offset());\n        return rng;\n      });\n    };\n    var resolveIndex$1 = function (dom, bookmark) {\n      return Option.from(dom.select(bookmark.name)[bookmark.index]).map(function (elm) {\n        var rng = dom.createRng();\n        rng.selectNode(elm);\n        return rng;\n      });\n    };\n    var resolve$3 = function (selection, bookmark) {\n      var dom = selection.dom;\n      if (bookmark) {\n        if (isPathBookmark(bookmark)) {\n          return resolvePaths(dom, bookmark);\n        } else if (isStringPathBookmark(bookmark)) {\n          return Option.some(resolveCaretPositionBookmark(dom, bookmark));\n        } else if (isIdBookmark(bookmark)) {\n          return resolveId(dom, bookmark);\n        } else if (isIndexBookmark(bookmark)) {\n          return resolveIndex$1(dom, bookmark);\n        } else if (isRangeBookmark(bookmark)) {\n          return Option.some(bookmark.rng);\n        }\n      }\n      return Option.none();\n    };\n    var ResolveBookmark = { resolve: resolve$3 };\n\n    var getBookmark$1 = function (selection, type, normalized) {\n      return GetBookmark.getBookmark(selection, type, normalized);\n    };\n    var moveToBookmark = function (selection, bookmark) {\n      ResolveBookmark.resolve(selection, bookmark).each(function (rng) {\n        selection.setRng(rng);\n      });\n    };\n    var isBookmarkNode$1 = function (node) {\n      return NodeType.isElement(node) && node.tagName === 'SPAN' && node.getAttribute('data-mce-type') === 'bookmark';\n    };\n    var Bookmarks = {\n      getBookmark: getBookmark$1,\n      moveToBookmark: moveToBookmark,\n      isBookmarkNode: isBookmarkNode$1\n    };\n\n    var isInlineBlock = function (node) {\n      return node && /^(IMG)$/.test(node.nodeName);\n    };\n    var moveStart = function (dom, selection, rng) {\n      var offset = rng.startOffset;\n      var container = rng.startContainer, walker, node, nodes;\n      if (rng.startContainer === rng.endContainer) {\n        if (isInlineBlock(rng.startContainer.childNodes[rng.startOffset])) {\n          return;\n        }\n      }\n      if (container.nodeType === 1) {\n        nodes = container.childNodes;\n        if (offset < nodes.length) {\n          container = nodes[offset];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n        } else {\n          container = nodes[nodes.length - 1];\n          walker = new TreeWalker(container, dom.getParent(container, dom.isBlock));\n          walker.next(true);\n        }\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3 && !isWhiteSpaceNode(node)) {\n            rng.setStart(node, 0);\n            selection.setRng(rng);\n            return;\n          }\n        }\n      }\n    };\n    var getNonWhiteSpaceSibling = function (node, next, inc) {\n      if (node) {\n        next = next ? 'nextSibling' : 'previousSibling';\n        for (node = inc ? node : node[next]; node; node = node[next]) {\n          if (node.nodeType === 1 || !isWhiteSpaceNode(node)) {\n            return node;\n          }\n        }\n      }\n    };\n    var isTextBlock$1 = function (editor, name) {\n      if (name.nodeType) {\n        name = name.nodeName;\n      }\n      return !!editor.schema.getTextBlockElements()[name.toLowerCase()];\n    };\n    var isValid = function (ed, parent, child) {\n      return ed.schema.isValidChild(parent, child);\n    };\n    var isWhiteSpaceNode = function (node) {\n      return node && node.nodeType === 3 && /^([\\t \\r\\n]+|)$/.test(node.nodeValue);\n    };\n    var replaceVars = function (value, vars) {\n      if (typeof value !== 'string') {\n        value = value(vars);\n      } else if (vars) {\n        value = value.replace(/%(\\w+)/g, function (str, name) {\n          return vars[name] || str;\n        });\n      }\n      return value;\n    };\n    var isEq = function (str1, str2) {\n      str1 = str1 || '';\n      str2 = str2 || '';\n      str1 = '' + (str1.nodeName || str1);\n      str2 = '' + (str2.nodeName || str2);\n      return str1.toLowerCase() === str2.toLowerCase();\n    };\n    var normalizeStyleValue = function (dom, value, name) {\n      if (name === 'color' || name === 'backgroundColor') {\n        value = dom.toHex(value);\n      }\n      if (name === 'fontWeight' && value === 700) {\n        value = 'bold';\n      }\n      if (name === 'fontFamily') {\n        value = value.replace(/[\\'\\\"]/g, '').replace(/,\\s+/g, ',');\n      }\n      return '' + value;\n    };\n    var getStyle = function (dom, node, name) {\n      return normalizeStyleValue(dom, dom.getStyle(node, name), name);\n    };\n    var getTextDecoration = function (dom, node) {\n      var decoration;\n      dom.getParent(node, function (n) {\n        decoration = dom.getStyle(n, 'text-decoration');\n        return decoration && decoration !== 'none';\n      });\n      return decoration;\n    };\n    var getParents$1 = function (dom, node, selector) {\n      return dom.getParents(node, selector, dom.getRoot());\n    };\n    var FormatUtils = {\n      isInlineBlock: isInlineBlock,\n      moveStart: moveStart,\n      getNonWhiteSpaceSibling: getNonWhiteSpaceSibling,\n      isTextBlock: isTextBlock$1,\n      isValid: isValid,\n      isWhiteSpaceNode: isWhiteSpaceNode,\n      replaceVars: replaceVars,\n      isEq: isEq,\n      normalizeStyleValue: normalizeStyleValue,\n      getStyle: getStyle,\n      getTextDecoration: getTextDecoration,\n      getParents: getParents$1\n    };\n\n    var isBookmarkNode$2 = Bookmarks.isBookmarkNode;\n    var getParents$2 = FormatUtils.getParents, isWhiteSpaceNode$1 = FormatUtils.isWhiteSpaceNode, isTextBlock$2 = FormatUtils.isTextBlock;\n    var findLeaf = function (node, offset) {\n      if (typeof offset === 'undefined') {\n        offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n      }\n      while (node && node.hasChildNodes()) {\n        node = node.childNodes[offset];\n        if (node) {\n          offset = node.nodeType === 3 ? node.length : node.childNodes.length;\n        }\n      }\n      return {\n        node: node,\n        offset: offset\n      };\n    };\n    var excludeTrailingWhitespace = function (endContainer, endOffset) {\n      var leaf = findLeaf(endContainer, endOffset);\n      if (leaf.node) {\n        while (leaf.node && leaf.offset === 0 && leaf.node.previousSibling) {\n          leaf = findLeaf(leaf.node.previousSibling);\n        }\n        if (leaf.node && leaf.offset > 0 && leaf.node.nodeType === 3 && leaf.node.nodeValue.charAt(leaf.offset - 1) === ' ') {\n          if (leaf.offset > 1) {\n            endContainer = leaf.node;\n            endContainer.splitText(leaf.offset - 1);\n          }\n        }\n      }\n      return endContainer;\n    };\n    var isBogusBr = function (node) {\n      return node.nodeName === 'BR' && node.getAttribute('data-mce-bogus') && !node.nextSibling;\n    };\n    var findParentContentEditable = function (dom, node) {\n      var parent = node;\n      while (parent) {\n        if (parent.nodeType === 1 && dom.getContentEditable(parent)) {\n          return dom.getContentEditable(parent) === 'false' ? parent : node;\n        }\n        parent = parent.parentNode;\n      }\n      return node;\n    };\n    var findSpace = function (start, remove, node, offset) {\n      var pos, pos2;\n      var str = node.nodeValue;\n      if (typeof offset === 'undefined') {\n        offset = start ? str.length : 0;\n      }\n      if (start) {\n        pos = str.lastIndexOf(' ', offset);\n        pos2 = str.lastIndexOf('\\xA0', offset);\n        pos = pos > pos2 ? pos : pos2;\n        if (pos !== -1 && !remove && (pos < offset || !start) && pos <= str.length) {\n          pos++;\n        }\n      } else {\n        pos = str.indexOf(' ', offset);\n        pos2 = str.indexOf('\\xA0', offset);\n        pos = pos !== -1 && (pos2 === -1 || pos < pos2) ? pos : pos2;\n      }\n      return pos;\n    };\n    var findWordEndPoint = function (dom, body, container, offset, start, remove) {\n      var walker, node, pos, lastTextNode;\n      if (container.nodeType === 3) {\n        pos = findSpace(start, remove, container, offset);\n        if (pos !== -1) {\n          return {\n            container: container,\n            offset: pos\n          };\n        }\n        lastTextNode = container;\n      }\n      walker = new TreeWalker(container, dom.getParent(container, dom.isBlock) || body);\n      while (node = walker[start ? 'prev' : 'next']()) {\n        if (node.nodeType === 3 && !isBookmarkNode$2(node.parentNode)) {\n          lastTextNode = node;\n          pos = findSpace(start, remove, node);\n          if (pos !== -1) {\n            return {\n              container: node,\n              offset: pos\n            };\n          }\n        } else if (dom.isBlock(node) || FormatUtils.isEq(node, 'BR')) {\n          break;\n        }\n      }\n      if (lastTextNode) {\n        if (start) {\n          offset = 0;\n        } else {\n          offset = lastTextNode.length;\n        }\n        return {\n          container: lastTextNode,\n          offset: offset\n        };\n      }\n    };\n    var findSelectorEndPoint = function (dom, format, rng, container, siblingName) {\n      var parents, i, y, curFormat;\n      if (container.nodeType === 3 && container.nodeValue.length === 0 && container[siblingName]) {\n        container = container[siblingName];\n      }\n      parents = getParents$2(dom, container);\n      for (i = 0; i < parents.length; i++) {\n        for (y = 0; y < format.length; y++) {\n          curFormat = format[y];\n          if ('collapsed' in curFormat && curFormat.collapsed !== rng.collapsed) {\n            continue;\n          }\n          if (dom.is(parents[i], curFormat.selector)) {\n            return parents[i];\n          }\n        }\n      }\n      return container;\n    };\n    var findBlockEndPoint = function (editor, format, container, siblingName) {\n      var node;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      if (!format[0].wrapper) {\n        node = dom.getParent(container, format[0].block, root);\n      }\n      if (!node) {\n        var scopeRoot = dom.getParent(container, 'LI,TD,TH');\n        node = dom.getParent(container.nodeType === 3 ? container.parentNode : container, function (node) {\n          return node !== root && isTextBlock$2(editor, node);\n        }, scopeRoot);\n      }\n      if (node && format[0].wrapper) {\n        node = getParents$2(dom, node, 'ul,ol').reverse()[0] || node;\n      }\n      if (!node) {\n        node = container;\n        while (node[siblingName] && !dom.isBlock(node[siblingName])) {\n          node = node[siblingName];\n          if (FormatUtils.isEq(node, 'br')) {\n            break;\n          }\n        }\n      }\n      return node || container;\n    };\n    var findParentContainer = function (dom, format, startContainer, startOffset, endContainer, endOffset, start) {\n      var container, parent, sibling, siblingName, root;\n      container = parent = start ? startContainer : endContainer;\n      siblingName = start ? 'previousSibling' : 'nextSibling';\n      root = dom.getRoot();\n      if (container.nodeType === 3 && !isWhiteSpaceNode$1(container)) {\n        if (start ? startOffset > 0 : endOffset < container.nodeValue.length) {\n          return container;\n        }\n      }\n      while (true) {\n        if (!format[0].block_expand && dom.isBlock(parent)) {\n          return parent;\n        }\n        for (sibling = parent[siblingName]; sibling; sibling = sibling[siblingName]) {\n          if (!isBookmarkNode$2(sibling) && !isWhiteSpaceNode$1(sibling) && !isBogusBr(sibling)) {\n            return parent;\n          }\n        }\n        if (parent === root || parent.parentNode === root) {\n          container = parent;\n          break;\n        }\n        parent = parent.parentNode;\n      }\n      return container;\n    };\n    var expandRng = function (editor, rng, format, remove) {\n      var endPoint, startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      var dom = editor.dom;\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = getNode(startContainer, startOffset);\n        if (startContainer.nodeType === 3) {\n          startOffset = 0;\n        }\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getNode(endContainer, rng.collapsed ? endOffset : endOffset - 1);\n        if (endContainer.nodeType === 3) {\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      startContainer = findParentContentEditable(dom, startContainer);\n      endContainer = findParentContentEditable(dom, endContainer);\n      if (isBookmarkNode$2(startContainer.parentNode) || isBookmarkNode$2(startContainer)) {\n        startContainer = isBookmarkNode$2(startContainer) ? startContainer : startContainer.parentNode;\n        if (rng.collapsed) {\n          startContainer = startContainer.previousSibling || startContainer;\n        } else {\n          startContainer = startContainer.nextSibling || startContainer;\n        }\n        if (startContainer.nodeType === 3) {\n          startOffset = rng.collapsed ? startContainer.length : 0;\n        }\n      }\n      if (isBookmarkNode$2(endContainer.parentNode) || isBookmarkNode$2(endContainer)) {\n        endContainer = isBookmarkNode$2(endContainer) ? endContainer : endContainer.parentNode;\n        if (rng.collapsed) {\n          endContainer = endContainer.nextSibling || endContainer;\n        } else {\n          endContainer = endContainer.previousSibling || endContainer;\n        }\n        if (endContainer.nodeType === 3) {\n          endOffset = rng.collapsed ? 0 : endContainer.length;\n        }\n      }\n      if (rng.collapsed) {\n        endPoint = findWordEndPoint(dom, editor.getBody(), startContainer, startOffset, true, remove);\n        if (endPoint) {\n          startContainer = endPoint.container;\n          startOffset = endPoint.offset;\n        }\n        endPoint = findWordEndPoint(dom, editor.getBody(), endContainer, endOffset, false, remove);\n        if (endPoint) {\n          endContainer = endPoint.container;\n          endOffset = endPoint.offset;\n        }\n      }\n      if (format[0].inline) {\n        endContainer = remove ? endContainer : excludeTrailingWhitespace(endContainer, endOffset);\n      }\n      if (format[0].inline || format[0].block_expand) {\n        if (!format[0].inline || (startContainer.nodeType !== 3 || startOffset === 0)) {\n          startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n        }\n        if (!format[0].inline || (endContainer.nodeType !== 3 || endOffset === endContainer.nodeValue.length)) {\n          endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n        }\n      }\n      if (format[0].selector && format[0].expand !== false && !format[0].inline) {\n        startContainer = findSelectorEndPoint(dom, format, rng, startContainer, 'previousSibling');\n        endContainer = findSelectorEndPoint(dom, format, rng, endContainer, 'nextSibling');\n      }\n      if (format[0].block || format[0].selector) {\n        startContainer = findBlockEndPoint(editor, format, startContainer, 'previousSibling');\n        endContainer = findBlockEndPoint(editor, format, endContainer, 'nextSibling');\n        if (format[0].block) {\n          if (!dom.isBlock(startContainer)) {\n            startContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, true);\n          }\n          if (!dom.isBlock(endContainer)) {\n            endContainer = findParentContainer(dom, format, startContainer, startOffset, endContainer, endOffset, false);\n          }\n        }\n      }\n      if (startContainer.nodeType === 1) {\n        startOffset = dom.nodeIndex(startContainer);\n        startContainer = startContainer.parentNode;\n      }\n      if (endContainer.nodeType === 1) {\n        endOffset = dom.nodeIndex(endContainer) + 1;\n        endContainer = endContainer.parentNode;\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var ExpandRange = { expandRng: expandRng };\n\n    var each$8 = Tools.each;\n    var getEndChild = function (container, index) {\n      var childNodes = container.childNodes;\n      index--;\n      if (index > childNodes.length - 1) {\n        index = childNodes.length - 1;\n      } else if (index < 0) {\n        index = 0;\n      }\n      return childNodes[index] || container;\n    };\n    var walk$1 = function (dom, rng, callback) {\n      var startContainer = rng.startContainer;\n      var startOffset = rng.startOffset;\n      var endContainer = rng.endContainer;\n      var endOffset = rng.endOffset;\n      var ancestor;\n      var startPoint;\n      var endPoint;\n      var node;\n      var parent;\n      var siblings;\n      var nodes;\n      nodes = dom.select('td[data-mce-selected],th[data-mce-selected]');\n      if (nodes.length > 0) {\n        each$8(nodes, function (node) {\n          callback([node]);\n        });\n        return;\n      }\n      var exclude = function (nodes) {\n        var node;\n        node = nodes[0];\n        if (node.nodeType === 3 && node === startContainer && startOffset >= node.nodeValue.length) {\n          nodes.splice(0, 1);\n        }\n        node = nodes[nodes.length - 1];\n        if (endOffset === 0 && nodes.length > 0 && node === endContainer && node.nodeType === 3) {\n          nodes.splice(nodes.length - 1, 1);\n        }\n        return nodes;\n      };\n      var collectSiblings = function (node, name, endNode) {\n        var siblings = [];\n        for (; node && node !== endNode; node = node[name]) {\n          siblings.push(node);\n        }\n        return siblings;\n      };\n      var findEndPoint = function (node, root) {\n        do {\n          if (node.parentNode === root) {\n            return node;\n          }\n          node = node.parentNode;\n        } while (node);\n      };\n      var walkBoundary = function (startNode, endNode, next) {\n        var siblingName = next ? 'nextSibling' : 'previousSibling';\n        for (node = startNode, parent = node.parentNode; node && node !== endNode; node = parent) {\n          parent = node.parentNode;\n          siblings = collectSiblings(node === startNode ? node : node[siblingName], siblingName);\n          if (siblings.length) {\n            if (!next) {\n              siblings.reverse();\n            }\n            callback(exclude(siblings));\n          }\n        }\n      };\n      if (startContainer.nodeType === 1 && startContainer.hasChildNodes()) {\n        startContainer = startContainer.childNodes[startOffset];\n      }\n      if (endContainer.nodeType === 1 && endContainer.hasChildNodes()) {\n        endContainer = getEndChild(endContainer, endOffset);\n      }\n      if (startContainer === endContainer) {\n        return callback(exclude([startContainer]));\n      }\n      ancestor = dom.findCommonAncestor(startContainer, endContainer);\n      for (node = startContainer; node; node = node.parentNode) {\n        if (node === endContainer) {\n          return walkBoundary(startContainer, ancestor, true);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      for (node = endContainer; node; node = node.parentNode) {\n        if (node === startContainer) {\n          return walkBoundary(endContainer, ancestor);\n        }\n        if (node === ancestor) {\n          break;\n        }\n      }\n      startPoint = findEndPoint(startContainer, ancestor) || startContainer;\n      endPoint = findEndPoint(endContainer, ancestor) || endContainer;\n      walkBoundary(startContainer, startPoint, true);\n      siblings = collectSiblings(startPoint === startContainer ? startPoint : startPoint.nextSibling, 'nextSibling', endPoint === endContainer ? endPoint.nextSibling : endPoint);\n      if (siblings.length) {\n        callback(exclude(siblings));\n      }\n      walkBoundary(endContainer, endPoint);\n    };\n    var RangeWalk = { walk: walk$1 };\n\n    var zeroWidth = function () {\n      return '\\uFEFF';\n    };\n\n    function NodeValue (is, name) {\n      var get = function (element) {\n        if (!is(element)) {\n          throw new Error('Can only get ' + name + ' value of a ' + name + ' node');\n        }\n        return getOption(element).getOr('');\n      };\n      var getOption = function (element) {\n        return is(element) ? Option.from(element.dom().nodeValue) : Option.none();\n      };\n      var set = function (element, value) {\n        if (!is(element)) {\n          throw new Error('Can only set raw ' + name + ' value of a ' + name + ' node');\n        }\n        element.dom().nodeValue = value;\n      };\n      return {\n        get: get,\n        getOption: getOption,\n        set: set\n      };\n    }\n\n    var api = NodeValue(isText, 'text');\n    var get$4 = function (element) {\n      return api.get(element);\n    };\n\n    var isZeroWidth = function (elem) {\n      return isText(elem) && get$4(elem) === zeroWidth();\n    };\n    var context = function (editor, elem, wrapName, nodeName) {\n      return parent(elem).fold(function () {\n        return 'skipping';\n      }, function (parent) {\n        if (nodeName === 'br' || isZeroWidth(elem)) {\n          return 'valid';\n        } else if (isAnnotation(elem)) {\n          return 'existing';\n        } else if (isCaretNode(elem)) {\n          return 'caret';\n        } else if (!FormatUtils.isValid(editor, wrapName, nodeName) || !FormatUtils.isValid(editor, name(parent), wrapName)) {\n          return 'invalid-child';\n        } else {\n          return 'valid';\n        }\n      });\n    };\n\n    var shouldApplyToTrailingSpaces = function (rng) {\n      return rng.startContainer.nodeType === 3 && rng.startContainer.nodeValue.length >= rng.startOffset && rng.startContainer.nodeValue[rng.startOffset] === '\\xA0';\n    };\n    var applyWordGrab = function (editor, rng) {\n      var r = ExpandRange.expandRng(editor, rng, [{ inline: true }], shouldApplyToTrailingSpaces(rng));\n      rng.setStart(r.startContainer, r.startOffset);\n      rng.setEnd(r.endContainer, r.endOffset);\n      editor.selection.setRng(rng);\n    };\n    var makeAnnotation = function (eDoc, _a, annotationName, decorate) {\n      var _b = _a.uid, uid = _b === void 0 ? generate('mce-annotation') : _b, data = __rest(_a, ['uid']);\n      var master = Element.fromTag('span', eDoc);\n      add$2(master, annotation());\n      set(master, '' + dataAnnotationId(), uid);\n      set(master, '' + dataAnnotation(), annotationName);\n      var _c = decorate(uid, data), _d = _c.attributes, attributes = _d === void 0 ? {} : _d, _e = _c.classes, classes = _e === void 0 ? [] : _e;\n      setAll(master, attributes);\n      add$3(master, classes);\n      return master;\n    };\n    var annotate = function (editor, rng, annotationName, decorate, data) {\n      var newWrappers = [];\n      var master = makeAnnotation(editor.getDoc(), data, annotationName, decorate);\n      var wrapper = Cell(Option.none());\n      var finishWrapper = function () {\n        wrapper.set(Option.none());\n      };\n      var getOrOpenWrapper = function () {\n        return wrapper.get().getOrThunk(function () {\n          var nu = shallow(master);\n          newWrappers.push(nu);\n          wrapper.set(Option.some(nu));\n          return nu;\n        });\n      };\n      var processElements = function (elems) {\n        each(elems, processElement);\n      };\n      var processElement = function (elem) {\n        var ctx = context(editor, elem, 'span', name(elem));\n        switch (ctx) {\n        case 'invalid-child': {\n            finishWrapper();\n            var children$1 = children(elem);\n            processElements(children$1);\n            finishWrapper();\n            break;\n          }\n        case 'valid': {\n            var w = getOrOpenWrapper();\n            wrap$1(elem, w);\n            break;\n          }\n        case 'skipping':\n        case 'existing':\n        case 'caret':\n        }\n      };\n      var processNodes = function (nodes) {\n        var elems = map(nodes, Element.fromDom);\n        processElements(elems);\n      };\n      RangeWalk.walk(editor.dom, rng, function (nodes) {\n        finishWrapper();\n        processNodes(nodes);\n      });\n      return newWrappers;\n    };\n    var annotateWithBookmark = function (editor, name, settings, data) {\n      editor.undoManager.transact(function () {\n        var initialRng = editor.selection.getRng();\n        if (initialRng.collapsed) {\n          applyWordGrab(editor, initialRng);\n        }\n        if (editor.selection.getRng().collapsed) {\n          var wrapper = makeAnnotation(editor.getDoc(), data, name, settings.decorate);\n          set$1(wrapper, '\\xA0');\n          editor.selection.getRng().insertNode(wrapper.dom());\n          editor.selection.select(wrapper.dom());\n        } else {\n          var bookmark = GetBookmark.getPersistentBookmark(editor.selection, false);\n          var rng = editor.selection.getRng();\n          annotate(editor, rng, name, settings.decorate, data);\n          editor.selection.moveToBookmark(bookmark);\n        }\n      });\n    };\n\n    function Annotator (editor) {\n      var registry = create$1();\n      setup$1(editor, registry);\n      var changes = setup(editor);\n      return {\n        register: function (name, settings) {\n          registry.register(name, settings);\n        },\n        annotate: function (name, data) {\n          registry.lookup(name).each(function (settings) {\n            annotateWithBookmark(editor, name, settings, data);\n          });\n        },\n        annotationChanged: function (name, callback) {\n          changes.addListener(name, callback);\n        },\n        remove: function (name) {\n          identify(editor, Option.some(name)).each(function (_a) {\n            var elements = _a.elements;\n            each(elements, unwrap);\n          });\n        },\n        getAll: function (name) {\n          var directory = findAll(editor, name);\n          return map$2(directory, function (elems) {\n            return map(elems, function (elem) {\n              return elem.dom();\n            });\n          });\n        }\n      };\n    }\n\n    var hasOnlyOneChild = function (node) {\n      return node.firstChild && node.firstChild === node.lastChild;\n    };\n    var isPaddingNode = function (node) {\n      return node.name === 'br' || node.value === '\\xA0';\n    };\n    var isPaddedEmptyBlock = function (schema, node) {\n      var blockElements = schema.getBlockElements();\n      return blockElements[node.name] && hasOnlyOneChild(node) && isPaddingNode(node.firstChild);\n    };\n    var isEmptyFragmentElement = function (schema, node) {\n      var nonEmptyElements = schema.getNonEmptyElements();\n      return node && (node.isEmpty(nonEmptyElements) || isPaddedEmptyBlock(schema, node));\n    };\n    var isListFragment = function (schema, fragment) {\n      var firstChild = fragment.firstChild;\n      var lastChild = fragment.lastChild;\n      if (firstChild && firstChild.name === 'meta') {\n        firstChild = firstChild.next;\n      }\n      if (lastChild && lastChild.attr('id') === 'mce_marker') {\n        lastChild = lastChild.prev;\n      }\n      if (isEmptyFragmentElement(schema, lastChild)) {\n        lastChild = lastChild.prev;\n      }\n      if (!firstChild || firstChild !== lastChild) {\n        return false;\n      }\n      return firstChild.name === 'ul' || firstChild.name === 'ol';\n    };\n    var cleanupDomFragment = function (domFragment) {\n      var firstChild = domFragment.firstChild;\n      var lastChild = domFragment.lastChild;\n      if (firstChild && firstChild.nodeName === 'META') {\n        firstChild.parentNode.removeChild(firstChild);\n      }\n      if (lastChild && lastChild.id === 'mce_marker') {\n        lastChild.parentNode.removeChild(lastChild);\n      }\n      return domFragment;\n    };\n    var toDomFragment = function (dom, serializer, fragment) {\n      var html = serializer.serialize(fragment);\n      var domFragment = dom.createFragment(html);\n      return cleanupDomFragment(domFragment);\n    };\n    var listItems$1 = function (elm) {\n      return Tools.grep(elm.childNodes, function (child) {\n        return child.nodeName === 'LI';\n      });\n    };\n    var isPadding = function (node) {\n      return node.data === '\\xA0' || NodeType.isBr(node);\n    };\n    var isListItemPadded = function (node) {\n      return node && node.firstChild && node.firstChild === node.lastChild && isPadding(node.firstChild);\n    };\n    var isEmptyOrPadded = function (elm) {\n      return !elm.firstChild || isListItemPadded(elm);\n    };\n    var trimListItems = function (elms) {\n      return elms.length > 0 && isEmptyOrPadded(elms[elms.length - 1]) ? elms.slice(0, -1) : elms;\n    };\n    var getParentLi = function (dom, node) {\n      var parentBlock = dom.getParent(node, dom.isBlock);\n      return parentBlock && parentBlock.nodeName === 'LI' ? parentBlock : null;\n    };\n    var isParentBlockLi = function (dom, node) {\n      return !!getParentLi(dom, node);\n    };\n    var getSplit = function (parentNode, rng) {\n      var beforeRng = rng.cloneRange();\n      var afterRng = rng.cloneRange();\n      beforeRng.setStartBefore(parentNode);\n      afterRng.setEndAfter(parentNode);\n      return [\n        beforeRng.cloneContents(),\n        afterRng.cloneContents()\n      ];\n    };\n    var findFirstIn = function (node, rootNode) {\n      var caretPos = CaretPosition$1.before(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.next(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var findLastOf = function (node, rootNode) {\n      var caretPos = CaretPosition$1.after(node);\n      var caretWalker = CaretWalker(rootNode);\n      var newCaretPos = caretWalker.prev(caretPos);\n      return newCaretPos ? newCaretPos.toRange() : null;\n    };\n    var insertMiddle = function (target, elms, rootNode, rng) {\n      var parts = getSplit(target, rng);\n      var parentElm = target.parentNode;\n      parentElm.insertBefore(parts[0], target);\n      Tools.each(elms, function (li) {\n        parentElm.insertBefore(li, target);\n      });\n      parentElm.insertBefore(parts[1], target);\n      parentElm.removeChild(target);\n      return findLastOf(elms[elms.length - 1], rootNode);\n    };\n    var insertBefore = function (target, elms, rootNode) {\n      var parentElm = target.parentNode;\n      Tools.each(elms, function (elm) {\n        parentElm.insertBefore(elm, target);\n      });\n      return findFirstIn(target, rootNode);\n    };\n    var insertAfter = function (target, elms, rootNode, dom) {\n      dom.insertAfter(elms.reverse(), target);\n      return findLastOf(elms[0], rootNode);\n    };\n    var insertAtCaret = function (serializer, dom, rng, fragment) {\n      var domFragment = toDomFragment(dom, serializer, fragment);\n      var liTarget = getParentLi(dom, rng.startContainer);\n      var liElms = trimListItems(listItems$1(domFragment.firstChild));\n      var BEGINNING = 1, END = 2;\n      var rootNode = dom.getRoot();\n      var isAt = function (location) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(dom.getRoot());\n        var newPos = location === BEGINNING ? caretWalker.prev(caretPos) : caretWalker.next(caretPos);\n        return newPos ? getParentLi(dom, newPos.getNode()) !== liTarget : true;\n      };\n      if (isAt(BEGINNING)) {\n        return insertBefore(liTarget, liElms, rootNode);\n      } else if (isAt(END)) {\n        return insertAfter(liTarget, liElms, rootNode, dom);\n      }\n      return insertMiddle(liTarget, liElms, rootNode, rng);\n    };\n    var InsertList = {\n      isListFragment: isListFragment,\n      insertAtCaret: insertAtCaret,\n      isParentBlockLi: isParentBlockLi,\n      trimListItems: trimListItems,\n      listItems: listItems$1\n    };\n\n    var each$9 = Tools.each;\n    var ElementUtils = function (dom) {\n      this.compare = function (node1, node2) {\n        if (node1.nodeName !== node2.nodeName) {\n          return false;\n        }\n        var getAttribs = function (node) {\n          var attribs = {};\n          each$9(dom.getAttribs(node), function (attr) {\n            var name = attr.nodeName.toLowerCase();\n            if (name.indexOf('_') !== 0 && name !== 'style' && name.indexOf('data-') !== 0) {\n              attribs[name] = dom.getAttrib(node, name);\n            }\n          });\n          return attribs;\n        };\n        var compareObjects = function (obj1, obj2) {\n          var value, name;\n          for (name in obj1) {\n            if (obj1.hasOwnProperty(name)) {\n              value = obj2[name];\n              if (typeof value === 'undefined') {\n                return false;\n              }\n              if (obj1[name] !== value) {\n                return false;\n              }\n              delete obj2[name];\n            }\n          }\n          for (name in obj2) {\n            if (obj2.hasOwnProperty(name)) {\n              return false;\n            }\n          }\n          return true;\n        };\n        if (!compareObjects(getAttribs(node1), getAttribs(node2))) {\n          return false;\n        }\n        if (!compareObjects(dom.parseStyle(dom.getAttrib(node1, 'style')), dom.parseStyle(dom.getAttrib(node2, 'style')))) {\n          return false;\n        }\n        return !Bookmarks.isBookmarkNode(node1) && !Bookmarks.isBookmarkNode(node2);\n      };\n    };\n\n    var getLastChildren = function (elm) {\n      var children = [];\n      var rawNode = elm.dom();\n      while (rawNode) {\n        children.push(Element.fromDom(rawNode));\n        rawNode = rawNode.lastChild;\n      }\n      return children;\n    };\n    var removeTrailingBr = function (elm) {\n      var allBrs = descendants$1(elm, 'br');\n      var brs = filter(getLastChildren(elm).slice(-1), isBr);\n      if (allBrs.length === brs.length) {\n        each(brs, remove$1);\n      }\n    };\n    var fillWithPaddingBr = function (elm) {\n      empty(elm);\n      append(elm, Element.fromHtml('<br data-mce-bogus=\"1\">'));\n    };\n    var isPaddingContents = function (elm) {\n      return isText(elm) ? get$4(elm) === '\\xA0' : isBr(elm);\n    };\n    var isPaddedElement = function (elm) {\n      return filter(children(elm), isPaddingContents).length === 1;\n    };\n    var trimBlockTrailingBr = function (elm) {\n      lastChild(elm).each(function (lastChild) {\n        prevSibling(lastChild).each(function (lastChildPrevSibling) {\n          if (isBlock(elm) && isBr(lastChild) && isBlock(lastChildPrevSibling)) {\n            remove$1(lastChild);\n          }\n        });\n      });\n    };\n    var PaddingBr = {\n      removeTrailingBr: removeTrailingBr,\n      fillWithPaddingBr: fillWithPaddingBr,\n      isPaddedElement: isPaddedElement,\n      trimBlockTrailingBr: trimBlockTrailingBr\n    };\n\n    var makeMap$3 = Tools.makeMap;\n    function Writer (settings) {\n      var html = [];\n      var indent, indentBefore, indentAfter, encode, htmlOutput;\n      settings = settings || {};\n      indent = settings.indent;\n      indentBefore = makeMap$3(settings.indent_before || '');\n      indentAfter = makeMap$3(settings.indent_after || '');\n      encode = Entities.getEncodeFunc(settings.entity_encoding || 'raw', settings.entities);\n      htmlOutput = settings.element_format === 'html';\n      return {\n        start: function (name, attrs, empty) {\n          var i, l, attr, value;\n          if (indent && indentBefore[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n          html.push('<', name);\n          if (attrs) {\n            for (i = 0, l = attrs.length; i < l; i++) {\n              attr = attrs[i];\n              html.push(' ', attr.name, '=\"', encode(attr.value, true), '\"');\n            }\n          }\n          if (!empty || htmlOutput) {\n            html[html.length] = '>';\n          } else {\n            html[html.length] = ' />';\n          }\n          if (empty && indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        end: function (name) {\n          var value;\n          html.push('</', name, '>');\n          if (indent && indentAfter[name] && html.length > 0) {\n            value = html[html.length - 1];\n            if (value.length > 0 && value !== '\\n') {\n              html.push('\\n');\n            }\n          }\n        },\n        text: function (text, raw) {\n          if (text.length > 0) {\n            html[html.length] = raw ? text : encode(text);\n          }\n        },\n        cdata: function (text) {\n          html.push('<![CDATA[', text, ']]>');\n        },\n        comment: function (text) {\n          html.push('<!--', text, '-->');\n        },\n        pi: function (name, text) {\n          if (text) {\n            html.push('<?', name, ' ', encode(text), '?>');\n          } else {\n            html.push('<?', name, '?>');\n          }\n          if (indent) {\n            html.push('\\n');\n          }\n        },\n        doctype: function (text) {\n          html.push('<!DOCTYPE', text, '>', indent ? '\\n' : '');\n        },\n        reset: function () {\n          html.length = 0;\n        },\n        getContent: function () {\n          return html.join('').replace(/\\n$/, '');\n        }\n      };\n    }\n\n    function HtmlSerializer (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var writer = Writer(settings);\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      var serialize = function (node) {\n        var handlers, validate;\n        validate = settings.validate;\n        handlers = {\n          3: function (node) {\n            writer.text(node.value, node.raw);\n          },\n          8: function (node) {\n            writer.comment(node.value);\n          },\n          7: function (node) {\n            writer.pi(node.name, node.value);\n          },\n          10: function (node) {\n            writer.doctype(node.value);\n          },\n          4: function (node) {\n            writer.cdata(node.value);\n          },\n          11: function (node) {\n            if (node = node.firstChild) {\n              do {\n                walk(node);\n              } while (node = node.next);\n            }\n          }\n        };\n        writer.reset();\n        var walk = function (node) {\n          var handler = handlers[node.type];\n          var name, isEmpty, attrs, attrName, attrValue, sortedAttrs, i, l, elementRule;\n          if (!handler) {\n            name = node.name;\n            isEmpty = node.shortEnded;\n            attrs = node.attributes;\n            if (validate && attrs && attrs.length > 1) {\n              sortedAttrs = [];\n              sortedAttrs.map = {};\n              elementRule = schema.getElementRule(node.name);\n              if (elementRule) {\n                for (i = 0, l = elementRule.attributesOrder.length; i < l; i++) {\n                  attrName = elementRule.attributesOrder[i];\n                  if (attrName in attrs.map) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                for (i = 0, l = attrs.length; i < l; i++) {\n                  attrName = attrs[i].name;\n                  if (!(attrName in sortedAttrs.map)) {\n                    attrValue = attrs.map[attrName];\n                    sortedAttrs.map[attrName] = attrValue;\n                    sortedAttrs.push({\n                      name: attrName,\n                      value: attrValue\n                    });\n                  }\n                }\n                attrs = sortedAttrs;\n              }\n            }\n            writer.start(node.name, attrs, isEmpty);\n            if (!isEmpty) {\n              if (node = node.firstChild) {\n                do {\n                  walk(node);\n                } while (node = node.next);\n              }\n              writer.end(name);\n            }\n          } else {\n            handler(node);\n          }\n        };\n        if (node.type === 1 && !settings.inner) {\n          walk(node);\n        } else {\n          handlers[11](node);\n        }\n        return writer.getContent();\n      };\n      return { serialize: serialize };\n    }\n\n    var createRange$1 = function (sc, so, ec, eo) {\n      var rng = domGlobals.document.createRange();\n      rng.setStart(sc, so);\n      rng.setEnd(ec, eo);\n      return rng;\n    };\n    var normalizeBlockSelectionRange = function (rng) {\n      var startPos = CaretPosition$1.fromRangeStart(rng);\n      var endPos = CaretPosition$1.fromRangeEnd(rng);\n      var rootNode = rng.commonAncestorContainer;\n      return CaretFinder.fromPosition(false, rootNode, endPos).map(function (newEndPos) {\n        if (!isInSameBlock(startPos, endPos, rootNode) && isInSameBlock(startPos, newEndPos, rootNode)) {\n          return createRange$1(startPos.container(), startPos.offset(), newEndPos.container(), newEndPos.offset());\n        } else {\n          return rng;\n        }\n      }).getOr(rng);\n    };\n    var normalize = function (rng) {\n      return rng.collapsed ? rng : normalizeBlockSelectionRange(rng);\n    };\n    var RangeNormalizer = { normalize: normalize };\n\n    var isAfterNbsp = function (container, offset) {\n      return NodeType.isText(container) && container.nodeValue[offset - 1] === '\\xA0';\n    };\n    var trimOrPadLeftRight = function (rng, html) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      var hasSiblingText = function (siblingName) {\n        return container[siblingName] && container[siblingName].nodeType === 3;\n      };\n      if (container.nodeType === 3) {\n        if (offset > 0) {\n          html = html.replace(/^&nbsp;/, ' ');\n        } else if (!hasSiblingText('previousSibling')) {\n          html = html.replace(/^ /, '&nbsp;');\n        }\n        if (offset < container.length) {\n          html = html.replace(/&nbsp;(<br>|)$/, ' ');\n        } else if (!hasSiblingText('nextSibling')) {\n          html = html.replace(/(&nbsp;| )(<br>|)$/, '&nbsp;');\n        }\n      }\n      return html;\n    };\n    var trimNbspAfterDeleteAndPadValue = function (rng, value) {\n      var container, offset;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      if (container.nodeType === 3 && rng.collapsed) {\n        if (container.data[offset] === '\\xA0') {\n          container.deleteData(offset, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value += ' ';\n          }\n        } else if (container.data[offset - 1] === '\\xA0') {\n          container.deleteData(offset - 1, 1);\n          if (!/[\\u00a0| ]$/.test(value)) {\n            value = ' ' + value;\n          }\n        }\n      }\n      return value;\n    };\n\n    var isTableCell$2 = NodeType.matchNodeNames('td th');\n    var selectionSetContent = function (editor, content) {\n      var rng = editor.selection.getRng();\n      var container = rng.startContainer;\n      var offset = rng.startOffset;\n      if (rng.collapsed && isAfterNbsp(container, offset) && NodeType.isText(container)) {\n        container.insertData(offset - 1, ' ');\n        container.deleteData(offset, 1);\n        rng.setStart(container, offset);\n        rng.setEnd(container, offset);\n        editor.selection.setRng(rng);\n      }\n      editor.selection.setContent(content);\n    };\n    var validInsertion = function (editor, value, parentNode) {\n      if (parentNode.getAttribute('data-mce-bogus') === 'all') {\n        parentNode.parentNode.insertBefore(editor.dom.createFragment(value), parentNode);\n      } else {\n        var node = parentNode.firstChild;\n        var node2 = parentNode.lastChild;\n        if (!node || node === node2 && node.nodeName === 'BR') {\n          editor.dom.setHTML(parentNode, value);\n        } else {\n          selectionSetContent(editor, value);\n        }\n      }\n    };\n    var trimBrsFromTableCell = function (dom, elm) {\n      Option.from(dom.getParent(elm, 'td,th')).map(Element.fromDom).each(PaddingBr.trimBlockTrailingBr);\n    };\n    var reduceInlineTextElements = function (editor, merge) {\n      var textInlineElements = editor.schema.getTextInlineElements();\n      var dom = editor.dom;\n      if (merge) {\n        var root_1 = editor.getBody(), elementUtils_1 = new ElementUtils(dom);\n        Tools.each(dom.select('*[data-mce-fragment]'), function (node) {\n          for (var testNode = node.parentNode; testNode && testNode !== root_1; testNode = testNode.parentNode) {\n            if (textInlineElements[node.nodeName.toLowerCase()] && elementUtils_1.compare(testNode, node)) {\n              dom.remove(node, true);\n            }\n          }\n        });\n      }\n    };\n    var markFragmentElements = function (fragment) {\n      var node = fragment;\n      while (node = node.walk()) {\n        if (node.type === 1) {\n          node.attr('data-mce-fragment', '1');\n        }\n      }\n    };\n    var umarkFragmentElements = function (elm) {\n      Tools.each(elm.getElementsByTagName('*'), function (elm) {\n        elm.removeAttribute('data-mce-fragment');\n      });\n    };\n    var isPartOfFragment = function (node) {\n      return !!node.getAttribute('data-mce-fragment');\n    };\n    var canHaveChildren = function (editor, node) {\n      return node && !editor.schema.getShortEndedElements()[node.nodeName];\n    };\n    var moveSelectionToMarker = function (editor, marker) {\n      var parentEditableFalseElm, parentBlock, nextRng;\n      var dom = editor.dom, selection = editor.selection;\n      var node, node2;\n      var getContentEditableFalseParent = function (node) {\n        var root = editor.getBody();\n        for (; node && node !== root; node = node.parentNode) {\n          if (editor.dom.getContentEditable(node) === 'false') {\n            return node;\n          }\n        }\n        return null;\n      };\n      if (!marker) {\n        return;\n      }\n      editor.selection.scrollIntoView(marker);\n      parentEditableFalseElm = getContentEditableFalseParent(marker);\n      if (parentEditableFalseElm) {\n        dom.remove(marker);\n        selection.select(parentEditableFalseElm);\n        return;\n      }\n      var rng = dom.createRng();\n      node = marker.previousSibling;\n      if (node && node.nodeType === 3) {\n        rng.setStart(node, node.nodeValue.length);\n        if (!Env.ie) {\n          node2 = marker.nextSibling;\n          if (node2 && node2.nodeType === 3) {\n            node.appendData(node2.data);\n            node2.parentNode.removeChild(node2);\n          }\n        }\n      } else {\n        rng.setStartBefore(marker);\n        rng.setEndBefore(marker);\n      }\n      var findNextCaretRng = function (rng) {\n        var caretPos = CaretPosition$1.fromRangeStart(rng);\n        var caretWalker = CaretWalker(editor.getBody());\n        caretPos = caretWalker.next(caretPos);\n        if (caretPos) {\n          return caretPos.toRange();\n        }\n      };\n      parentBlock = dom.getParent(marker, dom.isBlock);\n      dom.remove(marker);\n      if (parentBlock && dom.isEmpty(parentBlock)) {\n        editor.$(parentBlock).empty();\n        rng.setStart(parentBlock, 0);\n        rng.setEnd(parentBlock, 0);\n        if (!isTableCell$2(parentBlock) && !isPartOfFragment(parentBlock) && (nextRng = findNextCaretRng(rng))) {\n          rng = nextRng;\n          dom.remove(parentBlock);\n        } else {\n          dom.add(parentBlock, dom.create('br', { 'data-mce-bogus': '1' }));\n        }\n      }\n      selection.setRng(rng);\n    };\n    var insertHtmlAtCaret = function (editor, value, details) {\n      var parser, serializer, parentNode, rootNode, fragment, args;\n      var marker, rng, node, bookmarkHtml, merge;\n      var selection = editor.selection, dom = editor.dom;\n      if (/^ | $/.test(value)) {\n        value = trimOrPadLeftRight(selection.getRng(), value);\n      }\n      parser = editor.parser;\n      merge = details.merge;\n      serializer = HtmlSerializer({ validate: editor.settings.validate }, editor.schema);\n      bookmarkHtml = '<span id=\"mce_marker\" data-mce-type=\"bookmark\">&#xFEFF;&#x200B;</span>';\n      args = {\n        content: value,\n        format: 'html',\n        selection: true,\n        paste: details.paste\n      };\n      args = editor.fire('BeforeSetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('SetContent', {\n          content: args.content,\n          format: 'html',\n          selection: true,\n          paste: details.paste\n        });\n        return;\n      }\n      value = args.content;\n      if (value.indexOf('{$caret}') === -1) {\n        value += '{$caret}';\n      }\n      value = value.replace(/\\{\\$caret\\}/, bookmarkHtml);\n      rng = selection.getRng();\n      var caretElement = rng.startContainer || (rng.parentElement ? rng.parentElement() : null);\n      var body = editor.getBody();\n      if (caretElement === body && selection.isCollapsed()) {\n        if (dom.isBlock(body.firstChild) && canHaveChildren(editor, body.firstChild) && dom.isEmpty(body.firstChild)) {\n          rng = dom.createRng();\n          rng.setStart(body.firstChild, 0);\n          rng.setEnd(body.firstChild, 0);\n          selection.setRng(rng);\n        }\n      }\n      if (!selection.isCollapsed()) {\n        editor.selection.setRng(RangeNormalizer.normalize(editor.selection.getRng()));\n        editor.getDoc().execCommand('Delete', false, null);\n        value = trimNbspAfterDeleteAndPadValue(editor.selection.getRng(), value);\n      }\n      parentNode = selection.getNode();\n      var parserArgs = {\n        context: parentNode.nodeName.toLowerCase(),\n        data: details.data,\n        insert: true\n      };\n      fragment = parser.parse(value, parserArgs);\n      if (details.paste === true && InsertList.isListFragment(editor.schema, fragment) && InsertList.isParentBlockLi(dom, parentNode)) {\n        rng = InsertList.insertAtCaret(serializer, dom, editor.selection.getRng(), fragment);\n        editor.selection.setRng(rng);\n        editor.fire('SetContent', args);\n        return;\n      }\n      markFragmentElements(fragment);\n      node = fragment.lastChild;\n      if (node.attr('id') === 'mce_marker') {\n        marker = node;\n        for (node = node.prev; node; node = node.walk(true)) {\n          if (node.type === 3 || !dom.isBlock(node.name)) {\n            if (editor.schema.isValidChild(node.parent.name, 'span')) {\n              node.parent.insert(marker, node, node.name === 'br');\n            }\n            break;\n          }\n        }\n      }\n      editor._selectionOverrides.showBlockCaretContainer(parentNode);\n      if (!parserArgs.invalid) {\n        value = serializer.serialize(fragment);\n        validInsertion(editor, value, parentNode);\n      } else {\n        selectionSetContent(editor, bookmarkHtml);\n        parentNode = selection.getNode();\n        rootNode = editor.getBody();\n        if (parentNode.nodeType === 9) {\n          parentNode = node = rootNode;\n        } else {\n          node = parentNode;\n        }\n        while (node !== rootNode) {\n          parentNode = node;\n          node = node.parentNode;\n        }\n        value = parentNode === rootNode ? rootNode.innerHTML : dom.getOuterHTML(parentNode);\n        value = serializer.serialize(parser.parse(value.replace(/<span (id=\"mce_marker\"|id=mce_marker).+?<\\/span>/i, function () {\n          return serializer.serialize(fragment);\n        })));\n        if (parentNode === rootNode) {\n          dom.setHTML(rootNode, value);\n        } else {\n          dom.setOuterHTML(parentNode, value);\n        }\n      }\n      reduceInlineTextElements(editor, merge);\n      moveSelectionToMarker(editor, dom.get('mce_marker'));\n      umarkFragmentElements(editor.getBody());\n      trimBrsFromTableCell(editor.dom, editor.selection.getStart());\n      editor.fire('SetContent', args);\n      editor.addVisual();\n    };\n    var processValue = function (value) {\n      var details;\n      if (typeof value !== 'string') {\n        details = Tools.extend({\n          paste: value.paste,\n          data: { paste: value.paste }\n        }, value);\n        return {\n          content: value.content,\n          details: details\n        };\n      }\n      return {\n        content: value,\n        details: {}\n      };\n    };\n    var insertAtCaret$1 = function (editor, value) {\n      var result = processValue(value);\n      insertHtmlAtCaret(editor, result.content, result.details);\n    };\n    var InsertContent = { insertAtCaret: insertAtCaret$1 };\n\n    var strongRtl = /[\\u0591-\\u07FF\\uFB1D-\\uFDFF\\uFE70-\\uFEFC]/;\n    var hasStrongRtl = function (text) {\n      return strongRtl.test(text);\n    };\n\n    var getBodySetting = function (editor, name, defaultValue) {\n      var value = editor.getParam(name, defaultValue);\n      if (value.indexOf('=') !== -1) {\n        var bodyObj = editor.getParam(name, '', 'hash');\n        return bodyObj.hasOwnProperty(editor.id) ? bodyObj[editor.id] : defaultValue;\n      } else {\n        return value;\n      }\n    };\n    var getIframeAttrs = function (editor) {\n      return editor.getParam('iframe_attrs', {});\n    };\n    var getDocType = function (editor) {\n      return editor.getParam('doctype', '<!DOCTYPE html>');\n    };\n    var getDocumentBaseUrl = function (editor) {\n      return editor.getParam('document_base_url', '');\n    };\n    var getBodyId = function (editor) {\n      return getBodySetting(editor, 'body_id', 'tinymce');\n    };\n    var getBodyClass = function (editor) {\n      return getBodySetting(editor, 'body_class', '');\n    };\n    var getContentSecurityPolicy = function (editor) {\n      return editor.getParam('content_security_policy', '');\n    };\n    var shouldPutBrInPre = function (editor) {\n      return editor.getParam('br_in_pre', true);\n    };\n    var getForcedRootBlock = function (editor) {\n      if (editor.getParam('force_p_newlines', false)) {\n        return 'p';\n      }\n      var block = editor.getParam('forced_root_block', 'p');\n      return block === false ? '' : block;\n    };\n    var getForcedRootBlockAttrs = function (editor) {\n      return editor.getParam('forced_root_block_attrs', {});\n    };\n    var getBrNewLineSelector = function (editor) {\n      return editor.getParam('br_newline_selector', '.mce-toc h2,figcaption,caption');\n    };\n    var getNoNewLineSelector = function (editor) {\n      return editor.getParam('no_newline_selector', '');\n    };\n    var shouldKeepStyles = function (editor) {\n      return editor.getParam('keep_styles', true);\n    };\n    var shouldEndContainerOnEmptyBlock = function (editor) {\n      return editor.getParam('end_container_on_empty_block', false);\n    };\n    var getFontStyleValues = function (editor) {\n      return Tools.explode(editor.getParam('font_size_style_values', ''));\n    };\n    var getFontSizeClasses = function (editor) {\n      return Tools.explode(editor.getParam('font_size_classes', ''));\n    };\n    var getImagesDataImgFilter = function (editor) {\n      return editor.getParam('images_dataimg_filter', constant(true), 'function');\n    };\n    var isAutomaticUploadsEnabled = function (editor) {\n      return editor.getParam('automatic_uploads', true, 'boolean');\n    };\n    var shouldReuseFileName = function (editor) {\n      return editor.getParam('images_reuse_filename', false, 'boolean');\n    };\n    var shouldReplaceBlobUris = function (editor) {\n      return editor.getParam('images_replace_blob_uris', true, 'boolean');\n    };\n    var getImageUploadUrl = function (editor) {\n      return editor.getParam('images_upload_url', '', 'string');\n    };\n    var getImageUploadBasePath = function (editor) {\n      return editor.getParam('images_upload_base_path', '', 'string');\n    };\n    var getImagesUploadCredentials = function (editor) {\n      return editor.getParam('images_upload_credentials', false, 'boolean');\n    };\n    var getImagesUploadHandler = function (editor) {\n      return editor.getParam('images_upload_handler', null, 'function');\n    };\n    var shouldUseContentCssCors = function (editor) {\n      return editor.getParam('content_css_cors', false, 'boolean');\n    };\n    var getInlineBoundarySelector = function (editor) {\n      return editor.getParam('inline_boundaries_selector', 'a[href],code,.mce-annotation', 'string');\n    };\n    var Settings = {\n      getIframeAttrs: getIframeAttrs,\n      getDocType: getDocType,\n      getDocumentBaseUrl: getDocumentBaseUrl,\n      getBodyId: getBodyId,\n      getBodyClass: getBodyClass,\n      getContentSecurityPolicy: getContentSecurityPolicy,\n      shouldPutBrInPre: shouldPutBrInPre,\n      getForcedRootBlock: getForcedRootBlock,\n      getForcedRootBlockAttrs: getForcedRootBlockAttrs,\n      getBrNewLineSelector: getBrNewLineSelector,\n      getNoNewLineSelector: getNoNewLineSelector,\n      shouldKeepStyles: shouldKeepStyles,\n      shouldEndContainerOnEmptyBlock: shouldEndContainerOnEmptyBlock,\n      getFontStyleValues: getFontStyleValues,\n      getFontSizeClasses: getFontSizeClasses,\n      getImagesDataImgFilter: getImagesDataImgFilter,\n      isAutomaticUploadsEnabled: isAutomaticUploadsEnabled,\n      shouldReuseFileName: shouldReuseFileName,\n      shouldReplaceBlobUris: shouldReplaceBlobUris,\n      getImageUploadUrl: getImageUploadUrl,\n      getImageUploadBasePath: getImageUploadBasePath,\n      getImagesUploadCredentials: getImagesUploadCredentials,\n      getImagesUploadHandler: getImagesUploadHandler,\n      shouldUseContentCssCors: shouldUseContentCssCors,\n      getInlineBoundarySelector: getInlineBoundarySelector\n    };\n\n    var isInlineTarget = function (editor, elm) {\n      return is$1(Element.fromDom(elm), Settings.getInlineBoundarySelector(editor));\n    };\n    var isRtl = function (element) {\n      return DOMUtils$1.DOM.getStyle(element, 'direction', true) === 'rtl' || hasStrongRtl(element.textContent);\n    };\n    var findInlineParents = function (isInlineTarget, rootNode, pos) {\n      return filter(DOMUtils$1.DOM.getParents(pos.container(), '*', rootNode), isInlineTarget);\n    };\n    var findRootInline = function (isInlineTarget, rootNode, pos) {\n      var parents = findInlineParents(isInlineTarget, rootNode, pos);\n      return Option.from(parents[parents.length - 1]);\n    };\n    var hasSameParentBlock = function (rootNode, node1, node2) {\n      var block1 = getParentBlock(node1, rootNode);\n      var block2 = getParentBlock(node2, rootNode);\n      return block1 && block1 === block2;\n    };\n    var isAtZwsp = function (pos) {\n      return isBeforeInline(pos) || isAfterInline(pos);\n    };\n    var normalizePosition = function (forward, pos) {\n      if (!pos) {\n        return pos;\n      }\n      var container = pos.container(), offset = pos.offset();\n      if (forward) {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.nextSibling)) {\n            return CaretPosition$1(container.nextSibling, 0);\n          } else {\n            return CaretPosition$1.after(container);\n          }\n        } else {\n          return isBeforeInline(pos) ? CaretPosition$1(container, offset + 1) : pos;\n        }\n      } else {\n        if (isCaretContainerInline(container)) {\n          if (NodeType.isText(container.previousSibling)) {\n            return CaretPosition$1(container.previousSibling, container.previousSibling.data.length);\n          } else {\n            return CaretPosition$1.before(container);\n          }\n        } else {\n          return isAfterInline(pos) ? CaretPosition$1(container, offset - 1) : pos;\n        }\n      }\n    };\n    var normalizeForwards = curry(normalizePosition, true);\n    var normalizeBackwards = curry(normalizePosition, false);\n    var InlineUtils = {\n      isInlineTarget: isInlineTarget,\n      findRootInline: findRootInline,\n      isRtl: isRtl,\n      isAtZwsp: isAtZwsp,\n      normalizePosition: normalizePosition,\n      normalizeForwards: normalizeForwards,\n      normalizeBackwards: normalizeBackwards,\n      hasSameParentBlock: hasSameParentBlock\n    };\n\n    var isBeforeRoot = function (rootNode) {\n      return function (elm) {\n        return eq(rootNode, Element.fromDom(elm.dom().parentNode));\n      };\n    };\n    var getParentBlock$1 = function (rootNode, elm) {\n      return contains$3(rootNode, elm) ? closest(elm, function (element) {\n        return isTextBlock(element) || isListItem(element);\n      }, isBeforeRoot(rootNode)) : Option.none();\n    };\n    var placeCaretInEmptyBody = function (editor) {\n      var body = editor.getBody();\n      var node = body.firstChild && editor.dom.isBlock(body.firstChild) ? body.firstChild : body;\n      editor.selection.setCursorLocation(node, 0);\n    };\n    var paddEmptyBody = function (editor) {\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        placeCaretInEmptyBody(editor);\n      }\n    };\n    var willDeleteLastPositionInElement = function (forward, fromPos, elm) {\n      return liftN([\n        CaretFinder.firstPositionIn(elm),\n        CaretFinder.lastPositionIn(elm)\n      ], function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        var normalizedFromPos = InlineUtils.normalizePosition(false, fromPos);\n        if (forward) {\n          return CaretFinder.nextPosition(elm, normalizedFromPos).map(function (nextPos) {\n            return nextPos.isEqual(normalizedLastPos) && fromPos.isEqual(normalizedFirstPos);\n          }).getOr(false);\n        } else {\n          return CaretFinder.prevPosition(elm, normalizedFromPos).map(function (prevPos) {\n            return prevPos.isEqual(normalizedFirstPos) && fromPos.isEqual(normalizedLastPos);\n          }).getOr(false);\n        }\n      }).getOr(true);\n    };\n    var DeleteUtils = {\n      getParentBlock: getParentBlock$1,\n      paddEmptyBody: paddEmptyBody,\n      willDeleteLastPositionInElement: willDeleteLastPositionInElement\n    };\n\n    var ancestor$2 = function (scope, selector, isRoot) {\n      return ancestor$1(scope, selector, isRoot).isSome();\n    };\n\n    var hasWhitespacePreserveParent = function (rootNode, node) {\n      var rootElement = Element.fromDom(rootNode);\n      var startNode = Element.fromDom(node);\n      return ancestor$2(startNode, 'pre,code', curry(eq, rootElement));\n    };\n    var isWhitespace = function (rootNode, node) {\n      return NodeType.isText(node) && /^[ \\t\\r\\n]*$/.test(node.data) && hasWhitespacePreserveParent(rootNode, node) === false;\n    };\n    var isNamedAnchor = function (node) {\n      return NodeType.isElement(node) && node.nodeName === 'A' && node.hasAttribute('name');\n    };\n    var isContent = function (rootNode, node) {\n      return isCaretCandidate(node) && isWhitespace(rootNode, node) === false || isNamedAnchor(node) || isBookmark(node);\n    };\n    var isBookmark = NodeType.hasAttribute('data-mce-bookmark');\n    var isBogus$2 = NodeType.hasAttribute('data-mce-bogus');\n    var isBogusAll$1 = NodeType.hasAttributeValue('data-mce-bogus', 'all');\n    var isEmptyNode = function (targetNode) {\n      var walker, node, brCount = 0;\n      if (isContent(targetNode, targetNode)) {\n        return false;\n      } else {\n        node = targetNode.firstChild;\n        if (!node) {\n          return true;\n        }\n        walker = new TreeWalker(node, targetNode);\n        do {\n          if (isBogusAll$1(node)) {\n            node = walker.next(true);\n            continue;\n          }\n          if (isBogus$2(node)) {\n            node = walker.next();\n            continue;\n          }\n          if (NodeType.isBr(node)) {\n            brCount++;\n            node = walker.next();\n            continue;\n          }\n          if (isContent(targetNode, node)) {\n            return false;\n          }\n          node = walker.next();\n        } while (node);\n        return brCount <= 1;\n      }\n    };\n    var isEmpty$1 = function (elm) {\n      return isEmptyNode(elm.dom());\n    };\n    var Empty = { isEmpty: isEmpty$1 };\n\n    var BlockPosition = Immutable('block', 'position');\n    var BlockBoundary = Immutable('from', 'to');\n    var getBlockPosition = function (rootNode, pos) {\n      var rootElm = Element.fromDom(rootNode);\n      var containerElm = Element.fromDom(pos.container());\n      return DeleteUtils.getParentBlock(rootElm, containerElm).map(function (block) {\n        return BlockPosition(block, pos);\n      });\n    };\n    var isDifferentBlocks = function (blockBoundary) {\n      return eq(blockBoundary.from().block(), blockBoundary.to().block()) === false;\n    };\n    var hasSameParent = function (blockBoundary) {\n      return parent(blockBoundary.from().block()).bind(function (parent1) {\n        return parent(blockBoundary.to().block()).filter(function (parent2) {\n          return eq(parent1, parent2);\n        });\n      }).isSome();\n    };\n    var isEditable = function (blockBoundary) {\n      return NodeType.isContentEditableFalse(blockBoundary.from().block()) === false && NodeType.isContentEditableFalse(blockBoundary.to().block()) === false;\n    };\n    var skipLastBr = function (rootNode, forward, blockPosition) {\n      if (NodeType.isBr(blockPosition.position().getNode()) && Empty.isEmpty(blockPosition.block()) === false) {\n        return CaretFinder.positionIn(false, blockPosition.block().dom()).bind(function (lastPositionInBlock) {\n          if (lastPositionInBlock.isEqual(blockPosition.position())) {\n            return CaretFinder.fromPosition(forward, rootNode, lastPositionInBlock).bind(function (to) {\n              return getBlockPosition(rootNode, to);\n            });\n          } else {\n            return Option.some(blockPosition);\n          }\n        }).getOr(blockPosition);\n      } else {\n        return blockPosition;\n      }\n    };\n    var readFromRange = function (rootNode, forward, rng) {\n      var fromBlockPos = getBlockPosition(rootNode, CaretPosition$1.fromRangeStart(rng));\n      var toBlockPos = fromBlockPos.bind(function (blockPos) {\n        return CaretFinder.fromPosition(forward, rootNode, blockPos.position()).bind(function (to) {\n          return getBlockPosition(rootNode, to).map(function (blockPos) {\n            return skipLastBr(rootNode, forward, blockPos);\n          });\n        });\n      });\n      return liftN([\n        fromBlockPos,\n        toBlockPos\n      ], BlockBoundary).filter(function (blockBoundary) {\n        return isDifferentBlocks(blockBoundary) && hasSameParent(blockBoundary) && isEditable(blockBoundary);\n      });\n    };\n    var read$1 = function (rootNode, forward, rng) {\n      return rng.collapsed ? readFromRange(rootNode, forward, rng) : Option.none();\n    };\n    var BlockMergeBoundary = { read: read$1 };\n\n    var dropLast = function (xs) {\n      return xs.slice(0, -1);\n    };\n    var parentsUntil$1 = function (start, root, predicate) {\n      if (contains$3(root, start)) {\n        return dropLast(parents(start, function (elm) {\n          return predicate(elm) || eq(elm, root);\n        }));\n      } else {\n        return [];\n      }\n    };\n    var parents$1 = function (start, root) {\n      return parentsUntil$1(start, root, constant(false));\n    };\n    var parentsAndSelf = function (start, root) {\n      return [start].concat(parents$1(start, root));\n    };\n    var Parents = {\n      parentsUntil: parentsUntil$1,\n      parents: parents$1,\n      parentsAndSelf: parentsAndSelf\n    };\n\n    var getChildrenUntilBlockBoundary = function (block) {\n      var children$1 = children(block);\n      return findIndex(children$1, isBlock).fold(function () {\n        return children$1;\n      }, function (index) {\n        return children$1.slice(0, index);\n      });\n    };\n    var extractChildren = function (block) {\n      var children = getChildrenUntilBlockBoundary(block);\n      each(children, remove$1);\n      return children;\n    };\n    var removeEmptyRoot = function (rootNode, block) {\n      var parents = Parents.parentsAndSelf(block, rootNode);\n      return find(parents.reverse(), Empty.isEmpty).each(remove$1);\n    };\n    var isEmptyBefore = function (el) {\n      return filter(prevSiblings(el), function (el) {\n        return !Empty.isEmpty(el);\n      }).length === 0;\n    };\n    var nestedBlockMerge = function (rootNode, fromBlock, toBlock, insertionPoint) {\n      if (Empty.isEmpty(toBlock)) {\n        PaddingBr.fillWithPaddingBr(toBlock);\n        return CaretFinder.firstPositionIn(toBlock.dom());\n      }\n      if (isEmptyBefore(insertionPoint) && Empty.isEmpty(fromBlock)) {\n        before(insertionPoint, Element.fromTag('br'));\n      }\n      var position = CaretFinder.prevPosition(toBlock.dom(), CaretPosition$1.before(insertionPoint.dom()));\n      each(extractChildren(fromBlock), function (child) {\n        before(insertionPoint, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var sidelongBlockMerge = function (rootNode, fromBlock, toBlock) {\n      if (Empty.isEmpty(toBlock)) {\n        remove$1(toBlock);\n        if (Empty.isEmpty(fromBlock)) {\n          PaddingBr.fillWithPaddingBr(fromBlock);\n        }\n        return CaretFinder.firstPositionIn(fromBlock.dom());\n      }\n      var position = CaretFinder.lastPositionIn(toBlock.dom());\n      each(extractChildren(fromBlock), function (child) {\n        append(toBlock, child);\n      });\n      removeEmptyRoot(rootNode, fromBlock);\n      return position;\n    };\n    var findInsertionPoint = function (toBlock, block) {\n      var parentsAndSelf = Parents.parentsAndSelf(block, toBlock);\n      return Option.from(parentsAndSelf[parentsAndSelf.length - 1]);\n    };\n    var getInsertionPoint = function (fromBlock, toBlock) {\n      return contains$3(toBlock, fromBlock) ? findInsertionPoint(toBlock, fromBlock) : Option.none();\n    };\n    var trimBr = function (first, block) {\n      CaretFinder.positionIn(first, block.dom()).map(function (position) {\n        return position.getNode();\n      }).map(Element.fromDom).filter(isBr).each(remove$1);\n    };\n    var mergeBlockInto = function (rootNode, fromBlock, toBlock) {\n      trimBr(true, fromBlock);\n      trimBr(false, toBlock);\n      return getInsertionPoint(fromBlock, toBlock).fold(curry(sidelongBlockMerge, rootNode, fromBlock, toBlock), curry(nestedBlockMerge, rootNode, fromBlock, toBlock));\n    };\n    var mergeBlocks = function (rootNode, forward, block1, block2) {\n      return forward ? mergeBlockInto(rootNode, block2, block1) : mergeBlockInto(rootNode, block1, block2);\n    };\n    var MergeBlocks = { mergeBlocks: mergeBlocks };\n\n    var backspaceDelete = function (editor, forward) {\n      var position;\n      var rootNode = Element.fromDom(editor.getBody());\n      position = BlockMergeBoundary.read(rootNode.dom(), forward, editor.selection.getRng()).bind(function (blockBoundary) {\n        return MergeBlocks.mergeBlocks(rootNode, forward, blockBoundary.from().block(), blockBoundary.to().block());\n      });\n      position.each(function (pos) {\n        editor.selection.setRng(pos.toRange());\n      });\n      return position.isSome();\n    };\n    var BlockBoundaryDelete = { backspaceDelete: backspaceDelete };\n\n    var deleteRangeMergeBlocks = function (rootNode, selection) {\n      var rng = selection.getRng();\n      return liftN([\n        DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.startContainer)),\n        DeleteUtils.getParentBlock(rootNode, Element.fromDom(rng.endContainer))\n      ], function (block1, block2) {\n        if (eq(block1, block2) === false) {\n          rng.deleteContents();\n          MergeBlocks.mergeBlocks(rootNode, true, block1, block2).each(function (pos) {\n            selection.setRng(pos.toRange());\n          });\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var isRawNodeInTable = function (root, rawNode) {\n      var node = Element.fromDom(rawNode);\n      var isRoot = curry(eq, root);\n      return ancestor(node, isTableCell, isRoot).isSome();\n    };\n    var isSelectionInTable = function (root, rng) {\n      return isRawNodeInTable(root, rng.startContainer) || isRawNodeInTable(root, rng.endContainer);\n    };\n    var isEverythingSelected = function (root, rng) {\n      var noPrevious = CaretFinder.prevPosition(root.dom(), CaretPosition$1.fromRangeStart(rng)).isNone();\n      var noNext = CaretFinder.nextPosition(root.dom(), CaretPosition$1.fromRangeEnd(rng)).isNone();\n      return !isSelectionInTable(root, rng) && noPrevious && noNext;\n    };\n    var emptyEditor = function (editor) {\n      editor.setContent('');\n      editor.selection.setCursorLocation();\n      return true;\n    };\n    var deleteRange = function (editor) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      return isEverythingSelected(rootNode, rng) ? emptyEditor(editor) : deleteRangeMergeBlocks(rootNode, editor.selection);\n    };\n    var backspaceDelete$1 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? false : deleteRange(editor);\n    };\n    var BlockRangeDelete = { backspaceDelete: backspaceDelete$1 };\n\n    var generate$1 = function (cases) {\n      if (!isArray(cases)) {\n        throw new Error('cases must be an array');\n      }\n      if (cases.length === 0) {\n        throw new Error('there must be at least one case');\n      }\n      var constructors = [];\n      var adt = {};\n      each(cases, function (acase, count) {\n        var keys$1 = keys(acase);\n        if (keys$1.length !== 1) {\n          throw new Error('one and only one name per case');\n        }\n        var key = keys$1[0];\n        var value = acase[key];\n        if (adt[key] !== undefined) {\n          throw new Error('duplicate key detected:' + key);\n        } else if (key === 'cata') {\n          throw new Error('cannot have a case named cata (sorry)');\n        } else if (!isArray(value)) {\n          throw new Error('case arguments must be an array');\n        }\n        constructors.push(key);\n        adt[key] = function () {\n          var argLength = arguments.length;\n          if (argLength !== value.length) {\n            throw new Error('Wrong number of arguments to case ' + key + '. Expected ' + value.length + ' (' + value + '), got ' + argLength);\n          }\n          var args = new Array(argLength);\n          for (var i = 0; i < args.length; i++) {\n            args[i] = arguments[i];\n          }\n          var match = function (branches) {\n            var branchKeys = keys(branches);\n            if (constructors.length !== branchKeys.length) {\n              throw new Error('Wrong number of arguments to match. Expected: ' + constructors.join(',') + '\\nActual: ' + branchKeys.join(','));\n            }\n            var allReqd = forall(constructors, function (reqKey) {\n              return contains(branchKeys, reqKey);\n            });\n            if (!allReqd) {\n              throw new Error('Not all branches were specified when using match. Specified: ' + branchKeys.join(', ') + '\\nRequired: ' + constructors.join(', '));\n            }\n            return branches[key].apply(null, args);\n          };\n          return {\n            fold: function () {\n              if (arguments.length !== cases.length) {\n                throw new Error('Wrong number of arguments to fold. Expected ' + cases.length + ', got ' + arguments.length);\n              }\n              var target = arguments[count];\n              return target.apply(null, args);\n            },\n            match: match,\n            log: function (label) {\n              domGlobals.console.log(label, {\n                constructors: constructors,\n                constructor: key,\n                params: args\n              });\n            }\n          };\n        };\n      });\n      return adt;\n    };\n    var Adt = { generate: generate$1 };\n\n    var isBr$5 = function (pos) {\n      return getElementFromPosition(pos).exists(isBr);\n    };\n    var findBr = function (forward, root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      var scope = head(parentBlocks).getOr(root);\n      return CaretFinder.fromPosition(forward, scope.dom(), pos).filter(isBr$5);\n    };\n    var isBeforeBr = function (root, pos) {\n      return getElementFromPosition(pos).exists(isBr) || findBr(true, root, pos).isSome();\n    };\n    var isAfterBr = function (root, pos) {\n      return getElementFromPrevPosition(pos).exists(isBr) || findBr(false, root, pos).isSome();\n    };\n    var findPreviousBr = curry(findBr, false);\n    var findNextBr = curry(findBr, true);\n\n    var is$2 = function (expected) {\n      return function (actual) {\n        return expected === actual;\n      };\n    };\n    var isNbsp = is$2('\\xA0');\n    var isWhiteSpace$1 = function (chr) {\n      return /^[\\r\\n\\t ]$/.test(chr);\n    };\n    var isContent$1 = function (chr) {\n      return !isWhiteSpace$1(chr) && !isNbsp(chr);\n    };\n\n    var isChar = function (forward, predicate, pos) {\n      return Option.from(pos.container()).filter(NodeType.isText).exists(function (text) {\n        var delta = forward ? 0 : -1;\n        return predicate(text.data.charAt(pos.offset() + delta));\n      });\n    };\n    var isBeforeSpace = curry(isChar, true, isWhiteSpace$1);\n    var isAfterSpace = curry(isChar, false, isWhiteSpace$1);\n    var isEmptyText = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && container.data.length === 0;\n    };\n    var isNextToContentEditableFalse = function (relativeOffset, caretPosition) {\n      var node = getChildNodeAtRelativeOffset(relativeOffset, caretPosition);\n      return NodeType.isContentEditableFalse(node) && !NodeType.isBogusAll(node);\n    };\n    var isBeforeContentEditableFalse = curry(isNextToContentEditableFalse, 0);\n    var isAfterContentEditableFalse = curry(isNextToContentEditableFalse, -1);\n    var isNextToTable = function (relativeOffset, caretPosition) {\n      return NodeType.isTable(getChildNodeAtRelativeOffset(relativeOffset, caretPosition));\n    };\n    var isBeforeTable = curry(isNextToTable, 0);\n    var isAfterTable = curry(isNextToTable, -1);\n\n    var isCompoundElement = function (node) {\n      return isTableCell(Element.fromDom(node)) || isListItem(Element.fromDom(node));\n    };\n    var DeleteAction = Adt.generate([\n      { remove: ['element'] },\n      { moveToElement: ['element'] },\n      { moveToPosition: ['position'] }\n    ]);\n    var isAtContentEditableBlockCaret = function (forward, from) {\n      var elm = from.getNode(forward === false);\n      var caretLocation = forward ? 'after' : 'before';\n      return NodeType.isElement(elm) && elm.getAttribute('data-mce-caret') === caretLocation;\n    };\n    var isDeleteFromCefDifferentBlocks = function (root, forward, from, to) {\n      var inSameBlock = function (elm) {\n        return isInline(Element.fromDom(elm)) && !isInSameBlock(from, to, root);\n      };\n      return getRelativeCefElm(!forward, from).fold(function () {\n        return getRelativeCefElm(forward, to).fold(constant(false), inSameBlock);\n      }, inSameBlock);\n    };\n    var deleteEmptyBlockOrMoveToCef = function (root, forward, from, to) {\n      var toCefElm = to.getNode(forward === false);\n      return DeleteUtils.getParentBlock(Element.fromDom(root), Element.fromDom(from.getNode())).map(function (blockElm) {\n        return Empty.isEmpty(blockElm) ? DeleteAction.remove(blockElm.dom()) : DeleteAction.moveToElement(toCefElm);\n      }).orThunk(function () {\n        return Option.some(DeleteAction.moveToElement(toCefElm));\n      });\n    };\n    var findCefPosition = function (root, forward, from) {\n      return CaretFinder.fromPosition(forward, root, from).bind(function (to) {\n        if (isCompoundElement(to.getNode())) {\n          return Option.none();\n        } else if (isDeleteFromCefDifferentBlocks(root, forward, from, to)) {\n          return Option.none();\n        } else if (forward && NodeType.isContentEditableFalse(to.getNode())) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward === false && NodeType.isContentEditableFalse(to.getNode(true))) {\n          return deleteEmptyBlockOrMoveToCef(root, forward, from, to);\n        } else if (forward && isAfterContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else if (forward === false && isBeforeContentEditableFalse(from)) {\n          return Option.some(DeleteAction.moveToPosition(to));\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var getContentEditableBlockAction = function (forward, elm) {\n      if (forward && NodeType.isContentEditableFalse(elm.nextSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.nextSibling));\n      } else if (forward === false && NodeType.isContentEditableFalse(elm.previousSibling)) {\n        return Option.some(DeleteAction.moveToElement(elm.previousSibling));\n      } else {\n        return Option.none();\n      }\n    };\n    var skipMoveToActionFromInlineCefToContent = function (root, from, deleteAction) {\n      return deleteAction.fold(function (elm) {\n        return Option.some(DeleteAction.remove(elm));\n      }, function (elm) {\n        return Option.some(DeleteAction.moveToElement(elm));\n      }, function (to) {\n        if (isInSameBlock(from, to, root)) {\n          return Option.none();\n        } else {\n          return Option.some(DeleteAction.moveToPosition(to));\n        }\n      });\n    };\n    var getContentEditableAction = function (root, forward, from) {\n      if (isAtContentEditableBlockCaret(forward, from)) {\n        return getContentEditableBlockAction(forward, from.getNode(forward === false)).fold(function () {\n          return findCefPosition(root, forward, from);\n        }, Option.some);\n      } else {\n        return findCefPosition(root, forward, from).bind(function (deleteAction) {\n          return skipMoveToActionFromInlineCefToContent(root, from, deleteAction);\n        });\n      }\n    };\n    var read$2 = function (root, forward, rng) {\n      var normalizedRange = normalizeRange(forward ? 1 : -1, root, rng);\n      var from = CaretPosition$1.fromRangeStart(normalizedRange);\n      var rootElement = Element.fromDom(root);\n      if (forward === false && isAfterContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode(true)));\n      } else if (forward && isBeforeContentEditableFalse(from)) {\n        return Option.some(DeleteAction.remove(from.getNode()));\n      } else if (forward === false && isBeforeContentEditableFalse(from) && isAfterBr(rootElement, from)) {\n        return findPreviousBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else if (forward && isAfterContentEditableFalse(from) && isBeforeBr(rootElement, from)) {\n        return findNextBr(rootElement, from).map(function (br) {\n          return DeleteAction.remove(br.getNode());\n        });\n      } else {\n        return getContentEditableAction(root, forward, from);\n      }\n    };\n\n    var isCollapsibleWhitespace = function (c) {\n      return ' \\f\\n\\r\\t\\x0B'.indexOf(c) !== -1;\n    };\n    var normalizeContent = function (content, isStartOfContent, isEndOfContent) {\n      var result = foldl(content.split(''), function (acc, c) {\n        if (isCollapsibleWhitespace(c) || c === '\\xA0') {\n          if (acc.previousCharIsSpace || acc.str === '' && isStartOfContent || acc.str.length === content.length - 1 && isEndOfContent) {\n            return {\n              previousCharIsSpace: false,\n              str: acc.str + '\\xA0'\n            };\n          } else {\n            return {\n              previousCharIsSpace: true,\n              str: acc.str + ' '\n            };\n          }\n        } else {\n          return {\n            previousCharIsSpace: false,\n            str: acc.str + c\n          };\n        }\n      }, {\n        previousCharIsSpace: false,\n        str: ''\n      });\n      return result.str;\n    };\n    var normalize$1 = function (node, offset, count) {\n      if (count === 0) {\n        return;\n      }\n      var whitespace = node.data.slice(offset, offset + count);\n      var isEndOfContent = offset + count >= node.data.length;\n      var isStartOfContent = offset === 0;\n      node.replaceData(offset, count, normalizeContent(whitespace, isStartOfContent, isEndOfContent));\n    };\n    var normalizeWhitespaceAfter = function (node, offset) {\n      var content = node.data.slice(offset);\n      var whitespaceCount = content.length - lTrim(content).length;\n      return normalize$1(node, offset, whitespaceCount);\n    };\n    var normalizeWhitespaceBefore = function (node, offset) {\n      var content = node.data.slice(0, offset);\n      var whitespaceCount = content.length - rTrim(content).length;\n      return normalize$1(node, offset - whitespaceCount, whitespaceCount);\n    };\n    var mergeTextNodes = function (prevNode, nextNode, normalizeWhitespace) {\n      var whitespaceOffset = rTrim(prevNode.data).length;\n      prevNode.appendData(nextNode.data);\n      remove$1(Element.fromDom(nextNode));\n      if (normalizeWhitespace) {\n        normalizeWhitespaceAfter(prevNode, whitespaceOffset);\n      }\n      return prevNode;\n    };\n\n    var needsReposition = function (pos, elm) {\n      var container = pos.container();\n      var offset = pos.offset();\n      return CaretPosition$1.isTextPosition(pos) === false && container === elm.parentNode && offset > CaretPosition$1.before(elm).offset();\n    };\n    var reposition = function (elm, pos) {\n      return needsReposition(pos, elm) ? CaretPosition$1(pos.container(), pos.offset() - 1) : pos;\n    };\n    var beforeOrStartOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, 0) : CaretPosition$1.before(node);\n    };\n    var afterOrEndOf = function (node) {\n      return NodeType.isText(node) ? CaretPosition$1(node, node.data.length) : CaretPosition$1.after(node);\n    };\n    var getPreviousSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.previousSibling)) {\n        return Option.some(afterOrEndOf(elm.previousSibling));\n      } else {\n        return elm.previousSibling ? CaretFinder.lastPositionIn(elm.previousSibling) : Option.none();\n      }\n    };\n    var getNextSiblingCaretPosition = function (elm) {\n      if (isCaretCandidate(elm.nextSibling)) {\n        return Option.some(beforeOrStartOf(elm.nextSibling));\n      } else {\n        return elm.nextSibling ? CaretFinder.firstPositionIn(elm.nextSibling) : Option.none();\n      }\n    };\n    var findCaretPositionBackwardsFromElm = function (rootElement, elm) {\n      var startPosition = CaretPosition$1.before(elm.previousSibling ? elm.previousSibling : elm.parentNode);\n      return CaretFinder.prevPosition(rootElement, startPosition).fold(function () {\n        return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm));\n      }, Option.some);\n    };\n    var findCaretPositionForwardsFromElm = function (rootElement, elm) {\n      return CaretFinder.nextPosition(rootElement, CaretPosition$1.after(elm)).fold(function () {\n        return CaretFinder.prevPosition(rootElement, CaretPosition$1.before(elm));\n      }, Option.some);\n    };\n    var findCaretPositionBackwards = function (rootElement, elm) {\n      return getPreviousSiblingCaretPosition(elm).orThunk(function () {\n        return getNextSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionBackwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPositionForward = function (rootElement, elm) {\n      return getNextSiblingCaretPosition(elm).orThunk(function () {\n        return getPreviousSiblingCaretPosition(elm);\n      }).orThunk(function () {\n        return findCaretPositionForwardsFromElm(rootElement, elm);\n      });\n    };\n    var findCaretPosition$1 = function (forward, rootElement, elm) {\n      return forward ? findCaretPositionForward(rootElement, elm) : findCaretPositionBackwards(rootElement, elm);\n    };\n    var findCaretPosOutsideElmAfterDelete = function (forward, rootElement, elm) {\n      return findCaretPosition$1(forward, rootElement, elm).map(curry(reposition, elm));\n    };\n    var setSelection = function (editor, forward, pos) {\n      pos.fold(function () {\n        editor.focus();\n      }, function (pos) {\n        editor.selection.setRng(pos.toRange(), forward);\n      });\n    };\n    var eqRawNode = function (rawNode) {\n      return function (elm) {\n        return elm.dom() === rawNode;\n      };\n    };\n    var isBlock$2 = function (editor, elm) {\n      return elm && editor.schema.getBlockElements().hasOwnProperty(name(elm));\n    };\n    var paddEmptyBlock = function (elm) {\n      if (Empty.isEmpty(elm)) {\n        var br = Element.fromHtml('<br data-mce-bogus=\"1\">');\n        empty(elm);\n        append(elm, br);\n        return Option.some(CaretPosition$1.before(br.dom()));\n      } else {\n        return Option.none();\n      }\n    };\n    var deleteNormalized = function (elm, afterDeletePosOpt, normalizeWhitespace) {\n      var prevTextOpt = prevSibling(elm).filter(isText);\n      var nextTextOpt = nextSibling(elm).filter(isText);\n      remove$1(elm);\n      return liftN([\n        prevTextOpt,\n        nextTextOpt,\n        afterDeletePosOpt\n      ], function (prev, next, pos) {\n        var prevNode = prev.dom(), nextNode = next.dom();\n        var offset = prevNode.data.length;\n        mergeTextNodes(prevNode, nextNode, normalizeWhitespace);\n        return pos.container() === nextNode ? CaretPosition$1(prevNode, offset) : pos;\n      }).orThunk(function () {\n        if (normalizeWhitespace) {\n          prevTextOpt.each(function (elm) {\n            return normalizeWhitespaceBefore(elm.dom(), elm.dom().length);\n          });\n          nextTextOpt.each(function (elm) {\n            return normalizeWhitespaceAfter(elm.dom(), 0);\n          });\n        }\n        return afterDeletePosOpt;\n      });\n    };\n    var isInlineElement = function (editor, element) {\n      return has(editor.schema.getTextInlineElements(), name(element));\n    };\n    var deleteElement = function (editor, forward, elm, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var afterDeletePos = findCaretPosOutsideElmAfterDelete(forward, editor.getBody(), elm.dom());\n      var parentBlock = ancestor(elm, curry(isBlock$2, editor), eqRawNode(editor.getBody()));\n      var normalizedAfterDeletePos = deleteNormalized(elm, afterDeletePos, isInlineElement(editor, elm));\n      if (editor.dom.isEmpty(editor.getBody())) {\n        editor.setContent('');\n        editor.selection.setCursorLocation();\n      } else {\n        parentBlock.bind(paddEmptyBlock).fold(function () {\n          if (moveCaret) {\n            setSelection(editor, forward, normalizedAfterDeletePos);\n          }\n        }, function (paddPos) {\n          if (moveCaret) {\n            setSelection(editor, forward, Option.some(paddPos));\n          }\n        });\n      }\n    };\n    var DeleteElement = { deleteElement: deleteElement };\n\n    var deleteElement$1 = function (editor, forward) {\n      return function (element) {\n        editor._selectionOverrides.hideFakeCaret();\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(element));\n        return true;\n      };\n    };\n    var moveToElement = function (editor, forward) {\n      return function (element) {\n        var pos = forward ? CaretPosition$1.before(element) : CaretPosition$1.after(element);\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var moveToPosition = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        return true;\n      };\n    };\n    var backspaceDeleteCaret = function (editor, forward) {\n      var result = read$2(editor.getBody(), forward, editor.selection.getRng()).map(function (deleteAction) {\n        return deleteAction.fold(deleteElement$1(editor, forward), moveToElement(editor, forward), moveToPosition(editor));\n      });\n      return result.getOr(false);\n    };\n    var deleteOffscreenSelection = function (rootElement) {\n      each(descendants$1(rootElement, '.mce-offscreen-selection'), remove$1);\n    };\n    var backspaceDeleteRange = function (editor, forward) {\n      var selectedElement = editor.selection.getNode();\n      if (NodeType.isContentEditableFalse(selectedElement)) {\n        deleteOffscreenSelection(Element.fromDom(editor.getBody()));\n        DeleteElement.deleteElement(editor, forward, Element.fromDom(editor.selection.getNode()));\n        DeleteUtils.paddEmptyBody(editor);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var getContentEditableRoot = function (root, node) {\n      while (node && node !== root) {\n        if (NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var paddEmptyElement = function (editor) {\n      var br;\n      var ceRoot = getContentEditableRoot(editor.getBody(), editor.selection.getNode());\n      if (NodeType.isContentEditableTrue(ceRoot) && editor.dom.isBlock(ceRoot) && editor.dom.isEmpty(ceRoot)) {\n        br = editor.dom.create('br', { 'data-mce-bogus': '1' });\n        editor.dom.setHTML(ceRoot, '');\n        ceRoot.appendChild(br);\n        editor.selection.setRng(CaretPosition$1.before(br).toRange());\n      }\n      return true;\n    };\n    var backspaceDelete$2 = function (editor, forward) {\n      if (editor.selection.isCollapsed()) {\n        return backspaceDeleteCaret(editor, forward);\n      } else {\n        return backspaceDeleteRange(editor, forward);\n      }\n    };\n    var CefDelete = {\n      backspaceDelete: backspaceDelete$2,\n      paddEmptyElement: paddEmptyElement\n    };\n\n    var isText$8 = NodeType.isText;\n    var startsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[0] === Zwsp.ZWSP;\n    };\n    var endsWithCaretContainer$1 = function (node) {\n      return isText$8(node) && node.data[node.data.length - 1] === Zwsp.ZWSP;\n    };\n    var createZwsp = function (node) {\n      return node.ownerDocument.createTextNode(Zwsp.ZWSP);\n    };\n    var insertBefore$1 = function (node) {\n      if (isText$8(node.previousSibling)) {\n        if (endsWithCaretContainer$1(node.previousSibling)) {\n          return node.previousSibling;\n        } else {\n          node.previousSibling.appendData(Zwsp.ZWSP);\n          return node.previousSibling;\n        }\n      } else if (isText$8(node)) {\n        if (startsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.insertData(0, Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        node.parentNode.insertBefore(newNode, node);\n        return newNode;\n      }\n    };\n    var insertAfter$1 = function (node) {\n      if (isText$8(node.nextSibling)) {\n        if (startsWithCaretContainer$1(node.nextSibling)) {\n          return node.nextSibling;\n        } else {\n          node.nextSibling.insertData(0, Zwsp.ZWSP);\n          return node.nextSibling;\n        }\n      } else if (isText$8(node)) {\n        if (endsWithCaretContainer$1(node)) {\n          return node;\n        } else {\n          node.appendData(Zwsp.ZWSP);\n          return node;\n        }\n      } else {\n        var newNode = createZwsp(node);\n        if (node.nextSibling) {\n          node.parentNode.insertBefore(newNode, node.nextSibling);\n        } else {\n          node.parentNode.appendChild(newNode);\n        }\n        return newNode;\n      }\n    };\n    var insertInline$1 = function (before, node) {\n      return before ? insertBefore$1(node) : insertAfter$1(node);\n    };\n    var insertInlineBefore = curry(insertInline$1, true);\n    var insertInlineAfter = curry(insertInline$1, false);\n\n    var insertInlinePos = function (pos, before) {\n      if (NodeType.isText(pos.container())) {\n        return insertInline$1(before, pos.container());\n      } else {\n        return insertInline$1(before, pos.getNode());\n      }\n    };\n    var isPosCaretContainer = function (pos, caret) {\n      var caretNode = caret.get();\n      return caretNode && pos.container() === caretNode && isCaretContainerInline(caretNode);\n    };\n    var renderCaret = function (caret, location) {\n      return location.fold(function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineBefore(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, text.length - 1));\n      }, function (element) {\n        return CaretFinder.firstPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, true);\n            caret.set(text);\n            return CaretPosition$1(text, 1);\n          } else {\n            return CaretPosition$1(caret.get(), 1);\n          }\n        });\n      }, function (element) {\n        return CaretFinder.lastPositionIn(element).map(function (pos) {\n          if (!isPosCaretContainer(pos, caret)) {\n            CaretContainerRemove.remove(caret.get());\n            var text = insertInlinePos(pos, false);\n            caret.set(text);\n            return CaretPosition$1(text, text.length - 1);\n          } else {\n            return CaretPosition$1(caret.get(), caret.get().length - 1);\n          }\n        });\n      }, function (element) {\n        CaretContainerRemove.remove(caret.get());\n        var text = insertInlineAfter(element);\n        caret.set(text);\n        return Option.some(CaretPosition$1(text, 1));\n      });\n    };\n    var BoundaryCaret = { renderCaret: renderCaret };\n\n    var evaluateUntil = function (fns, args) {\n      for (var i = 0; i < fns.length; i++) {\n        var result = fns[i].apply(null, args);\n        if (result.isSome()) {\n          return result;\n        }\n      }\n      return Option.none();\n    };\n    var LazyEvaluator = { evaluateUntil: evaluateUntil };\n\n    var Location = Adt.generate([\n      { before: ['element'] },\n      { start: ['element'] },\n      { end: ['element'] },\n      { after: ['element'] }\n    ]);\n    var rescope = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var before$3 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.nextPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.before(inline);\n        });\n      }, Option.none);\n    };\n    var isNotInsideFormatCaretContainer = function (rootNode, elm) {\n      return getParentCaretContainer(rootNode, elm) === null;\n    };\n    var findInsideRootInline = function (isInlineTarget, rootNode, pos) {\n      return InlineUtils.findRootInline(isInlineTarget, rootNode, pos).filter(curry(isNotInsideFormatCaretContainer, rootNode));\n    };\n    var start = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var prevPos = CaretFinder.prevPosition(inline, nPos);\n        return prevPos.isNone() ? Option.some(Location.start(inline)) : Option.none();\n      });\n    };\n    var end = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeForwards(pos);\n      return findInsideRootInline(isInlineTarget, rootNode, nPos).bind(function (inline) {\n        var nextPos = CaretFinder.nextPosition(inline, nPos);\n        return nextPos.isNone() ? Option.some(Location.end(inline)) : Option.none();\n      });\n    };\n    var after$2 = function (isInlineTarget, rootNode, pos) {\n      var nPos = InlineUtils.normalizeBackwards(pos);\n      var scope = rescope(rootNode, nPos.container());\n      return InlineUtils.findRootInline(isInlineTarget, scope, nPos).fold(function () {\n        return CaretFinder.prevPosition(scope, nPos).bind(curry(InlineUtils.findRootInline, isInlineTarget, scope)).map(function (inline) {\n          return Location.after(inline);\n        });\n      }, Option.none);\n    };\n    var isValidLocation = function (location) {\n      return InlineUtils.isRtl(getElement(location)) === false;\n    };\n    var readLocation = function (isInlineTarget, rootNode, pos) {\n      var location = LazyEvaluator.evaluateUntil([\n        before$3,\n        start,\n        end,\n        after$2\n      ], [\n        isInlineTarget,\n        rootNode,\n        pos\n      ]);\n      return location.filter(isValidLocation);\n    };\n    var getElement = function (location) {\n      return location.fold(identity, identity, identity, identity);\n    };\n    var getName = function (location) {\n      return location.fold(constant('before'), constant('start'), constant('end'), constant('after'));\n    };\n    var outside = function (location) {\n      return location.fold(Location.before, Location.before, Location.after, Location.after);\n    };\n    var inside = function (location) {\n      return location.fold(Location.start, Location.start, Location.end, Location.end);\n    };\n    var isEq$1 = function (location1, location2) {\n      return getName(location1) === getName(location2) && getElement(location1) === getElement(location2);\n    };\n    var betweenInlines = function (forward, isInlineTarget, rootNode, from, to, location) {\n      return liftN([\n        InlineUtils.findRootInline(isInlineTarget, rootNode, from),\n        InlineUtils.findRootInline(isInlineTarget, rootNode, to)\n      ], function (fromInline, toInline) {\n        if (fromInline !== toInline && InlineUtils.hasSameParentBlock(rootNode, fromInline, toInline)) {\n          return Location.after(forward ? fromInline : toInline);\n        } else {\n          return location;\n        }\n      }).getOr(location);\n    };\n    var skipNoMovement = function (fromLocation, toLocation) {\n      return fromLocation.fold(constant(true), function (fromLocation) {\n        return !isEq$1(fromLocation, toLocation);\n      });\n    };\n    var findLocationTraverse = function (forward, isInlineTarget, rootNode, fromLocation, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var to = CaretFinder.fromPosition(forward, rootNode, from).map(curry(InlineUtils.normalizePosition, forward));\n      var location = to.fold(function () {\n        return fromLocation.map(outside);\n      }, function (to) {\n        return readLocation(isInlineTarget, rootNode, to).map(curry(betweenInlines, forward, isInlineTarget, rootNode, from, to)).filter(curry(skipNoMovement, fromLocation));\n      });\n      return location.filter(isValidLocation);\n    };\n    var findLocationSimple = function (forward, location) {\n      if (forward) {\n        return location.fold(compose(Option.some, Location.start), Option.none, compose(Option.some, Location.after), Option.none);\n      } else {\n        return location.fold(Option.none, compose(Option.some, Location.before), Option.none, compose(Option.some, Location.end));\n      }\n    };\n    var findLocation = function (forward, isInlineTarget, rootNode, pos) {\n      var from = InlineUtils.normalizePosition(forward, pos);\n      var fromLocation = readLocation(isInlineTarget, rootNode, from);\n      return readLocation(isInlineTarget, rootNode, from).bind(curry(findLocationSimple, forward)).orThunk(function () {\n        return findLocationTraverse(forward, isInlineTarget, rootNode, fromLocation, pos);\n      });\n    };\n    var BoundaryLocation = {\n      readLocation: readLocation,\n      findLocation: findLocation,\n      prevLocation: curry(findLocation, false),\n      nextLocation: curry(findLocation, true),\n      getElement: getElement,\n      outside: outside,\n      inside: inside\n    };\n\n    var hasSelectionModifyApi = function (editor) {\n      return isFunction(editor.selection.getSel().modify);\n    };\n    var moveRel = function (forward, selection, pos) {\n      var delta = forward ? 1 : -1;\n      selection.setRng(CaretPosition$1(pos.container(), pos.offset() + delta).toRange());\n      selection.getSel().modify('move', forward ? 'forward' : 'backward', 'word');\n      return true;\n    };\n    var moveByWord = function (forward, editor) {\n      var rng = editor.selection.getRng();\n      var pos = forward ? CaretPosition$1.fromRangeEnd(rng) : CaretPosition$1.fromRangeStart(rng);\n      if (!hasSelectionModifyApi(editor)) {\n        return false;\n      } else if (forward && isBeforeInline(pos)) {\n        return moveRel(true, editor.selection, pos);\n      } else if (!forward && isAfterInline(pos)) {\n        return moveRel(false, editor.selection, pos);\n      } else {\n        return false;\n      }\n    };\n    var WordSelection = {\n      hasSelectionModifyApi: hasSelectionModifyApi,\n      moveByWord: moveByWord\n    };\n\n    var setCaretPosition = function (editor, pos) {\n      var rng = editor.dom.createRng();\n      rng.setStart(pos.container(), pos.offset());\n      rng.setEnd(pos.container(), pos.offset());\n      editor.selection.setRng(rng);\n    };\n    var isFeatureEnabled = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var setSelected = function (state, elm) {\n      if (state) {\n        elm.setAttribute('data-mce-selected', 'inline-boundary');\n      } else {\n        elm.removeAttribute('data-mce-selected');\n      }\n    };\n    var renderCaretLocation = function (editor, caret, location) {\n      return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n        setCaretPosition(editor, pos);\n        return location;\n      });\n    };\n    var findLocation$1 = function (editor, caret, forward) {\n      var rootNode = editor.getBody();\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var location = BoundaryLocation.findLocation(forward, isInlineTarget, rootNode, from);\n      return location.bind(function (location) {\n        return renderCaretLocation(editor, caret, location);\n      });\n    };\n    var toggleInlines = function (isInlineTarget, dom, elms) {\n      var selectedInlines = filter(dom.select('*[data-mce-selected=\"inline-boundary\"]'), isInlineTarget);\n      var targetInlines = filter(elms, isInlineTarget);\n      each(difference(selectedInlines, targetInlines), curry(setSelected, false));\n      each(difference(targetInlines, selectedInlines), curry(setSelected, true));\n    };\n    var safeRemoveCaretContainer = function (editor, caret) {\n      if (editor.selection.isCollapsed() && editor.composing !== true && caret.get()) {\n        var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (CaretPosition$1.isTextPosition(pos) && InlineUtils.isAtZwsp(pos) === false) {\n          setCaretPosition(editor, CaretContainerRemove.removeAndReposition(caret.get(), pos));\n          caret.set(null);\n        }\n      }\n    };\n    var renderInsideInlineCaret = function (isInlineTarget, editor, caret, elms) {\n      if (editor.selection.isCollapsed()) {\n        var inlines = filter(elms, isInlineTarget);\n        each(inlines, function (inline) {\n          var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n          BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), pos).bind(function (location) {\n            return renderCaretLocation(editor, caret, location);\n          });\n        });\n      }\n    };\n    var move = function (editor, caret, forward) {\n      return function () {\n        return isFeatureEnabled(editor) ? findLocation$1(editor, caret, forward).isSome() : false;\n      };\n    };\n    var moveWord = function (forward, editor, caret) {\n      return function () {\n        return isFeatureEnabled(editor) ? WordSelection.moveByWord(forward, editor) : false;\n      };\n    };\n    var setupSelectedState = function (editor) {\n      var caret = Cell(null);\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.on('NodeChange', function (e) {\n        if (isFeatureEnabled(editor)) {\n          toggleInlines(isInlineTarget, editor.dom, e.parents);\n          safeRemoveCaretContainer(editor, caret);\n          renderInsideInlineCaret(isInlineTarget, editor, caret, e.parents);\n        }\n      });\n      return caret;\n    };\n    var moveNextWord = curry(moveWord, true);\n    var movePrevWord = curry(moveWord, false);\n    var BoundarySelection = {\n      move: move,\n      moveNextWord: moveNextWord,\n      movePrevWord: movePrevWord,\n      setupSelectedState: setupSelectedState,\n      setCaretPosition: setCaretPosition\n    };\n\n    var isFeatureEnabled$1 = function (editor) {\n      return editor.settings.inline_boundaries !== false;\n    };\n    var rangeFromPositions = function (from, to) {\n      var range = domGlobals.document.createRange();\n      range.setStart(from.container(), from.offset());\n      range.setEnd(to.container(), to.offset());\n      return range;\n    };\n    var hasOnlyTwoOrLessPositionsLeft = function (elm) {\n      return liftN([\n        CaretFinder.firstPositionIn(elm),\n        CaretFinder.lastPositionIn(elm)\n      ], function (firstPos, lastPos) {\n        var normalizedFirstPos = InlineUtils.normalizePosition(true, firstPos);\n        var normalizedLastPos = InlineUtils.normalizePosition(false, lastPos);\n        return CaretFinder.nextPosition(elm, normalizedFirstPos).map(function (pos) {\n          return pos.isEqual(normalizedLastPos);\n        }).getOr(true);\n      }).getOr(true);\n    };\n    var setCaretLocation = function (editor, caret) {\n      return function (location) {\n        return BoundaryCaret.renderCaret(caret, location).map(function (pos) {\n          BoundarySelection.setCaretPosition(editor, pos);\n          return true;\n        }).getOr(false);\n      };\n    };\n    var deleteFromTo = function (editor, caret, from, to) {\n      var rootNode = editor.getBody();\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      editor.undoManager.ignore(function () {\n        editor.selection.setRng(rangeFromPositions(from, to));\n        editor.execCommand('Delete');\n        BoundaryLocation.readLocation(isInlineTarget, rootNode, CaretPosition$1.fromRangeStart(editor.selection.getRng())).map(BoundaryLocation.inside).map(setCaretLocation(editor, caret));\n      });\n      editor.nodeChanged();\n    };\n    var rescope$1 = function (rootNode, node) {\n      var parentBlock = getParentBlock(node, rootNode);\n      return parentBlock ? parentBlock : rootNode;\n    };\n    var backspaceDeleteCollapsed = function (editor, caret, forward, from) {\n      var rootNode = rescope$1(editor.getBody(), from.container());\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var fromLocation = BoundaryLocation.readLocation(isInlineTarget, rootNode, from);\n      return fromLocation.bind(function (location) {\n        if (forward) {\n          return location.fold(constant(Option.some(BoundaryLocation.inside(location))), Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none);\n        } else {\n          return location.fold(Option.none, constant(Option.some(BoundaryLocation.outside(location))), Option.none, constant(Option.some(BoundaryLocation.inside(location))));\n        }\n      }).map(setCaretLocation(editor, caret)).getOrThunk(function () {\n        var toPosition = CaretFinder.navigate(forward, rootNode, from);\n        var toLocation = toPosition.bind(function (pos) {\n          return BoundaryLocation.readLocation(isInlineTarget, rootNode, pos);\n        });\n        if (fromLocation.isSome() && toLocation.isSome()) {\n          return InlineUtils.findRootInline(isInlineTarget, rootNode, from).map(function (elm) {\n            if (hasOnlyTwoOrLessPositionsLeft(elm)) {\n              DeleteElement.deleteElement(editor, forward, Element.fromDom(elm));\n              return true;\n            } else {\n              return false;\n            }\n          }).getOr(false);\n        } else {\n          return toLocation.bind(function (_) {\n            return toPosition.map(function (to) {\n              if (forward) {\n                deleteFromTo(editor, caret, from, to);\n              } else {\n                deleteFromTo(editor, caret, to, from);\n              }\n              return true;\n            });\n          }).getOr(false);\n        }\n      });\n    };\n    var backspaceDelete$3 = function (editor, caret, forward) {\n      if (editor.selection.isCollapsed() && isFeatureEnabled$1(editor)) {\n        var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return backspaceDeleteCollapsed(editor, caret, forward, from);\n      }\n      return false;\n    };\n    var InlineBoundaryDelete = { backspaceDelete: backspaceDelete$3 };\n\n    var tableCellRng = Immutable('start', 'end');\n    var tableSelection = Immutable('rng', 'table', 'cells');\n    var deleteAction = Adt.generate([\n      { removeTable: ['element'] },\n      { emptyCells: ['cells'] }\n    ]);\n    var isRootFromElement = function (root) {\n      return curry(eq, root);\n    };\n    var getClosestCell = function (container, isRoot) {\n      return closest$1(Element.fromDom(container), 'td,th', isRoot);\n    };\n    var getClosestTable = function (cell, isRoot) {\n      return ancestor$1(cell, 'table', isRoot);\n    };\n    var isExpandedCellRng = function (cellRng) {\n      return eq(cellRng.start(), cellRng.end()) === false;\n    };\n    var getTableFromCellRng = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (startParentTable) {\n        return getClosestTable(cellRng.end(), isRoot).bind(function (endParentTable) {\n          return eq(startParentTable, endParentTable) ? Option.some(startParentTable) : Option.none();\n        });\n      });\n    };\n    var getTableCells = function (table) {\n      return descendants$1(table, 'td,th');\n    };\n    var getCellRangeFromStartTable = function (cellRng, isRoot) {\n      return getClosestTable(cellRng.start(), isRoot).bind(function (table) {\n        return last(getTableCells(table)).map(function (endCell) {\n          return tableCellRng(cellRng.start(), endCell);\n        });\n      });\n    };\n    var partialSelection = function (isRoot, rng) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return rng.collapsed ? Option.none() : liftN([\n        startCell,\n        endCell\n      ], tableCellRng).fold(function () {\n        return startCell.fold(function () {\n          return endCell.bind(function (endCell) {\n            return getClosestTable(endCell, isRoot).bind(function (table) {\n              return head(getTableCells(table)).map(function (startCell) {\n                return tableCellRng(startCell, endCell);\n              });\n            });\n          });\n        }, function (startCell) {\n          return getClosestTable(startCell, isRoot).bind(function (table) {\n            return last(getTableCells(table)).map(function (endCell) {\n              return tableCellRng(startCell, endCell);\n            });\n          });\n        });\n      }, function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng) ? Option.none() : getCellRangeFromStartTable(cellRng, isRoot);\n      });\n    };\n    var isWithinSameTable = function (isRoot, cellRng) {\n      return getTableFromCellRng(cellRng, isRoot).isSome();\n    };\n    var getCellRng = function (rng, isRoot) {\n      var startCell = getClosestCell(rng.startContainer, isRoot);\n      var endCell = getClosestCell(rng.endContainer, isRoot);\n      return liftN([\n        startCell,\n        endCell\n      ], tableCellRng).filter(isExpandedCellRng).filter(function (cellRng) {\n        return isWithinSameTable(isRoot, cellRng);\n      }).orThunk(function () {\n        return partialSelection(isRoot, rng);\n      });\n    };\n    var getTableSelectionFromCellRng = function (cellRng, isRoot) {\n      return getTableFromCellRng(cellRng, isRoot).map(function (table) {\n        return tableSelection(cellRng, table, getTableCells(table));\n      });\n    };\n    var getTableSelectionFromRng = function (root, rng) {\n      var isRoot = isRootFromElement(root);\n      return getCellRng(rng, isRoot).bind(function (cellRng) {\n        return getTableSelectionFromCellRng(cellRng, isRoot);\n      });\n    };\n    var getCellIndex = function (cells, cell) {\n      return findIndex(cells, function (x) {\n        return eq(x, cell);\n      });\n    };\n    var getSelectedCells = function (tableSelection) {\n      return liftN([\n        getCellIndex(tableSelection.cells(), tableSelection.rng().start()),\n        getCellIndex(tableSelection.cells(), tableSelection.rng().end())\n      ], function (startIndex, endIndex) {\n        return tableSelection.cells().slice(startIndex, endIndex + 1);\n      });\n    };\n    var getAction = function (tableSelection) {\n      return getSelectedCells(tableSelection).map(function (selected) {\n        var cells = tableSelection.cells();\n        return selected.length === cells.length ? deleteAction.removeTable(tableSelection.table()) : deleteAction.emptyCells(selected);\n      });\n    };\n    var getActionFromCells = function (cells) {\n      return deleteAction.emptyCells(cells);\n    };\n    var getActionFromRange = function (root, rng) {\n      return getTableSelectionFromRng(root, rng).bind(getAction);\n    };\n    var TableDeleteAction = {\n      getActionFromRange: getActionFromRange,\n      getActionFromCells: getActionFromCells\n    };\n\n    var getRanges = function (selection) {\n      var ranges = [];\n      if (selection) {\n        for (var i = 0; i < selection.rangeCount; i++) {\n          ranges.push(selection.getRangeAt(i));\n        }\n      }\n      return ranges;\n    };\n    var getSelectedNodes = function (ranges) {\n      return bind(ranges, function (range) {\n        var node = getSelectedNode(range);\n        return node ? [Element.fromDom(node)] : [];\n      });\n    };\n    var hasMultipleRanges = function (selection) {\n      return getRanges(selection).length > 1;\n    };\n    var MultiRange = {\n      getRanges: getRanges,\n      getSelectedNodes: getSelectedNodes,\n      hasMultipleRanges: hasMultipleRanges\n    };\n\n    var getCellsFromRanges = function (ranges) {\n      return filter(MultiRange.getSelectedNodes(ranges), isTableCell);\n    };\n    var getCellsFromElement = function (elm) {\n      var selectedCells = descendants$1(elm, 'td[data-mce-selected],th[data-mce-selected]');\n      return selectedCells;\n    };\n    var getCellsFromElementOrRanges = function (ranges, element) {\n      var selectedCells = getCellsFromElement(element);\n      var rangeCells = getCellsFromRanges(ranges);\n      return selectedCells.length > 0 ? selectedCells : rangeCells;\n    };\n    var getCellsFromEditor = function (editor) {\n      return getCellsFromElementOrRanges(MultiRange.getRanges(editor.selection.getSel()), Element.fromDom(editor.getBody()));\n    };\n    var TableCellSelection = {\n      getCellsFromRanges: getCellsFromRanges,\n      getCellsFromElement: getCellsFromElement,\n      getCellsFromElementOrRanges: getCellsFromElementOrRanges,\n      getCellsFromEditor: getCellsFromEditor\n    };\n\n    var emptyCells = function (editor, cells) {\n      each(cells, PaddingBr.fillWithPaddingBr);\n      editor.selection.setCursorLocation(cells[0].dom(), 0);\n      return true;\n    };\n    var deleteTableElement = function (editor, table) {\n      DeleteElement.deleteElement(editor, false, table);\n      return true;\n    };\n    var deleteCellRange = function (editor, rootElm, rng) {\n      return TableDeleteAction.getActionFromRange(rootElm, rng).map(function (action) {\n        return action.fold(curry(deleteTableElement, editor), curry(emptyCells, editor));\n      });\n    };\n    var deleteCaptionRange = function (editor, caption) {\n      return emptyElement(editor, caption);\n    };\n    var deleteTableRange = function (editor, rootElm, rng, startElm) {\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCellRange(editor, rootElm, rng);\n      }, function (caption) {\n        return deleteCaptionRange(editor, caption);\n      }).getOr(false);\n    };\n    var deleteRange$1 = function (editor, startElm) {\n      var rootNode = Element.fromDom(editor.getBody());\n      var rng = editor.selection.getRng();\n      var selectedCells = TableCellSelection.getCellsFromEditor(editor);\n      return selectedCells.length !== 0 ? emptyCells(editor, selectedCells) : deleteTableRange(editor, rootNode, rng, startElm);\n    };\n    var getParentCell = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), isTableCell);\n    };\n    var getParentCaption = function (rootElm, elm) {\n      return find(Parents.parentsAndSelf(elm, rootElm), function (elm) {\n        return name(elm) === 'caption';\n      });\n    };\n    var deleteBetweenCells = function (editor, rootElm, forward, fromCell, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return getParentCell(rootElm, Element.fromDom(to.getNode())).map(function (toCell) {\n          return eq(toCell, fromCell) === false;\n        });\n      });\n    };\n    var emptyElement = function (editor, elm) {\n      PaddingBr.fillWithPaddingBr(elm);\n      editor.selection.setCursorLocation(elm.dom(), 0);\n      return Option.some(true);\n    };\n    var isDeleteOfLastCharPos = function (fromCaption, forward, from, to) {\n      return CaretFinder.firstPositionIn(fromCaption.dom()).bind(function (first) {\n        return CaretFinder.lastPositionIn(fromCaption.dom()).map(function (last) {\n          return forward ? from.isEqual(first) && to.isEqual(last) : from.isEqual(last) && to.isEqual(first);\n        });\n      }).getOr(true);\n    };\n    var emptyCaretCaption = function (editor, elm) {\n      return emptyElement(editor, elm);\n    };\n    var validateCaretCaption = function (rootElm, fromCaption, to) {\n      return getParentCaption(rootElm, Element.fromDom(to.getNode())).map(function (toCaption) {\n        return eq(toCaption, fromCaption) === false;\n      });\n    };\n    var deleteCaretInsideCaption = function (editor, rootElm, forward, fromCaption, from) {\n      return CaretFinder.navigate(forward, editor.getBody(), from).bind(function (to) {\n        return isDeleteOfLastCharPos(fromCaption, forward, from, to) ? emptyCaretCaption(editor, fromCaption) : validateCaretCaption(rootElm, fromCaption, to);\n      }).or(Option.some(true));\n    };\n    var deleteCaretCells = function (editor, forward, rootElm, startElm) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return getParentCell(rootElm, startElm).bind(function (fromCell) {\n        return Empty.isEmpty(fromCell) ? emptyElement(editor, fromCell) : deleteBetweenCells(editor, rootElm, forward, fromCell, from);\n      });\n    };\n    var deleteCaretCaption = function (editor, forward, rootElm, fromCaption) {\n      var from = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return Empty.isEmpty(fromCaption) ? emptyElement(editor, fromCaption) : deleteCaretInsideCaption(editor, rootElm, forward, fromCaption, from);\n    };\n    var deleteCaret = function (editor, forward, startElm) {\n      var rootElm = Element.fromDom(editor.getBody());\n      return getParentCaption(rootElm, startElm).fold(function () {\n        return deleteCaretCells(editor, forward, rootElm, startElm);\n      }, function (fromCaption) {\n        return deleteCaretCaption(editor, forward, rootElm, fromCaption);\n      }).getOr(false);\n    };\n    var backspaceDelete$4 = function (editor, forward) {\n      var startElm = Element.fromDom(editor.selection.getStart(true));\n      var cells = TableCellSelection.getCellsFromEditor(editor);\n      return editor.selection.isCollapsed() && cells.length === 0 ? deleteCaret(editor, forward, startElm) : deleteRange$1(editor, startElm);\n    };\n    var TableDelete = { backspaceDelete: backspaceDelete$4 };\n\n    var isEq$2 = FormatUtils.isEq;\n    var matchesUnInheritedFormatSelector = function (ed, node, name) {\n      var formatList = ed.formatter.get(name);\n      if (formatList) {\n        for (var i = 0; i < formatList.length; i++) {\n          if (formatList[i].inherit === false && ed.dom.is(node, formatList[i].selector)) {\n            return true;\n          }\n        }\n      }\n      return false;\n    };\n    var matchParents = function (editor, node, name, vars) {\n      var root = editor.dom.getRoot();\n      if (node === root) {\n        return false;\n      }\n      node = editor.dom.getParent(node, function (node) {\n        if (matchesUnInheritedFormatSelector(editor, node, name)) {\n          return true;\n        }\n        return node.parentNode === root || !!matchNode(editor, node, name, vars, true);\n      });\n      return matchNode(editor, node, name, vars);\n    };\n    var matchName = function (dom, node, format) {\n      if (isEq$2(node, format.inline)) {\n        return true;\n      }\n      if (isEq$2(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return node.nodeType === 1 && dom.is(node, format.selector);\n      }\n    };\n    var matchItems = function (dom, node, format, itemName, similar, vars) {\n      var key, value;\n      var items = format[itemName];\n      var i;\n      if (format.onmatch) {\n        return format.onmatch(node, format, itemName);\n      }\n      if (items) {\n        if (typeof items.length === 'undefined') {\n          for (key in items) {\n            if (items.hasOwnProperty(key)) {\n              if (itemName === 'attributes') {\n                value = dom.getAttrib(node, key);\n              } else {\n                value = FormatUtils.getStyle(dom, node, key);\n              }\n              if (similar && !value && !format.exact) {\n                return;\n              }\n              if ((!similar || format.exact) && !isEq$2(value, FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(items[key], vars), key))) {\n                return;\n              }\n            }\n          }\n        } else {\n          for (i = 0; i < items.length; i++) {\n            if (itemName === 'attributes' ? dom.getAttrib(node, items[i]) : FormatUtils.getStyle(dom, node, items[i])) {\n              return format;\n            }\n          }\n        }\n      }\n      return format;\n    };\n    var matchNode = function (ed, node, name, vars, similar) {\n      var formatList = ed.formatter.get(name);\n      var format, i, x, classes;\n      var dom = ed.dom;\n      if (formatList && node) {\n        for (i = 0; i < formatList.length; i++) {\n          format = formatList[i];\n          if (matchName(ed.dom, node, format) && matchItems(dom, node, format, 'attributes', similar, vars) && matchItems(dom, node, format, 'styles', similar, vars)) {\n            if (classes = format.classes) {\n              for (x = 0; x < classes.length; x++) {\n                if (!ed.dom.hasClass(node, classes[x])) {\n                  return;\n                }\n              }\n            }\n            return format;\n          }\n        }\n      }\n    };\n    var match = function (editor, name, vars, node) {\n      var startNode;\n      if (node) {\n        return matchParents(editor, node, name, vars);\n      }\n      node = editor.selection.getNode();\n      if (matchParents(editor, node, name, vars)) {\n        return true;\n      }\n      startNode = editor.selection.getStart();\n      if (startNode !== node) {\n        if (matchParents(editor, startNode, name, vars)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var matchAll = function (editor, names, vars) {\n      var startElement;\n      var matchedFormatNames = [];\n      var checkedMap = {};\n      startElement = editor.selection.getStart();\n      editor.dom.getParent(startElement, function (node) {\n        var i, name;\n        for (i = 0; i < names.length; i++) {\n          name = names[i];\n          if (!checkedMap[name] && matchNode(editor, node, name, vars)) {\n            checkedMap[name] = true;\n            matchedFormatNames.push(name);\n          }\n        }\n      }, editor.dom.getRoot());\n      return matchedFormatNames;\n    };\n    var canApply = function (editor, name) {\n      var formatList = editor.formatter.get(name);\n      var startNode, parents, i, x, selector;\n      var dom = editor.dom;\n      if (formatList) {\n        startNode = editor.selection.getStart();\n        parents = FormatUtils.getParents(dom, startNode);\n        for (x = formatList.length - 1; x >= 0; x--) {\n          selector = formatList[x].selector;\n          if (!selector || formatList[x].defaultBlock) {\n            return true;\n          }\n          for (i = parents.length - 1; i >= 0; i--) {\n            if (dom.is(parents[i], selector)) {\n              return true;\n            }\n          }\n        }\n      }\n      return false;\n    };\n    var MatchFormat = {\n      matchNode: matchNode,\n      matchName: matchName,\n      match: match,\n      matchAll: matchAll,\n      canApply: canApply,\n      matchesUnInheritedFormatSelector: matchesUnInheritedFormatSelector\n    };\n\n    var splitText = function (node, offset) {\n      return node.splitText(offset);\n    };\n    var split$1 = function (rng) {\n      var startContainer = rng.startContainer, startOffset = rng.startOffset, endContainer = rng.endContainer, endOffset = rng.endOffset;\n      if (startContainer === endContainer && NodeType.isText(startContainer)) {\n        if (startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          endContainer = splitText(startContainer, startOffset);\n          startContainer = endContainer.previousSibling;\n          if (endOffset > startOffset) {\n            endOffset = endOffset - startOffset;\n            startContainer = endContainer = splitText(endContainer, endOffset).previousSibling;\n            endOffset = endContainer.nodeValue.length;\n            startOffset = 0;\n          } else {\n            endOffset = 0;\n          }\n        }\n      } else {\n        if (NodeType.isText(startContainer) && startOffset > 0 && startOffset < startContainer.nodeValue.length) {\n          startContainer = splitText(startContainer, startOffset);\n          startOffset = 0;\n        }\n        if (NodeType.isText(endContainer) && endOffset > 0 && endOffset < endContainer.nodeValue.length) {\n          endContainer = splitText(endContainer, endOffset).previousSibling;\n          endOffset = endContainer.nodeValue.length;\n        }\n      }\n      return {\n        startContainer: startContainer,\n        startOffset: startOffset,\n        endContainer: endContainer,\n        endOffset: endOffset\n      };\n    };\n    var SplitRange = { split: split$1 };\n\n    var ZWSP$1 = Zwsp.ZWSP, CARET_ID$1 = '_mce_caret';\n    var importNode = function (ownerDocument, node) {\n      return ownerDocument.importNode(node, true);\n    };\n    var getEmptyCaretContainers = function (node) {\n      var nodes = [];\n      while (node) {\n        if (node.nodeType === 3 && node.nodeValue !== ZWSP$1 || node.childNodes.length > 1) {\n          return [];\n        }\n        if (node.nodeType === 1) {\n          nodes.push(node);\n        }\n        node = node.firstChild;\n      }\n      return nodes;\n    };\n    var isCaretContainerEmpty = function (node) {\n      return getEmptyCaretContainers(node).length > 0;\n    };\n    var findFirstTextNode = function (node) {\n      var walker;\n      if (node) {\n        walker = new TreeWalker(node, node);\n        for (node = walker.current(); node; node = walker.next()) {\n          if (node.nodeType === 3) {\n            return node;\n          }\n        }\n      }\n      return null;\n    };\n    var createCaretContainer = function (fill) {\n      var caretContainer = Element.fromTag('span');\n      setAll(caretContainer, {\n        'id': CARET_ID$1,\n        'data-mce-bogus': '1',\n        'data-mce-type': 'format-caret'\n      });\n      if (fill) {\n        append(caretContainer, Element.fromText(ZWSP$1));\n      }\n      return caretContainer;\n    };\n    var trimZwspFromCaretContainer = function (caretContainerNode) {\n      var textNode = findFirstTextNode(caretContainerNode);\n      if (textNode && textNode.nodeValue.charAt(0) === ZWSP$1) {\n        textNode.deleteData(0, 1);\n      }\n      return textNode;\n    };\n    var removeCaretContainerNode = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (isCaretContainerEmpty(node)) {\n        DeleteElement.deleteElement(editor, false, Element.fromDom(node), moveCaret);\n      } else {\n        var rng = selection.getRng();\n        var block = dom.getParent(node, dom.isBlock);\n        var textNode = trimZwspFromCaretContainer(node);\n        if (rng.startContainer === textNode && rng.startOffset > 0) {\n          rng.setStart(textNode, rng.startOffset - 1);\n        }\n        if (rng.endContainer === textNode && rng.endOffset > 0) {\n          rng.setEnd(textNode, rng.endOffset - 1);\n        }\n        dom.remove(node, true);\n        if (block && dom.isEmpty(block)) {\n          PaddingBr.fillWithPaddingBr(Element.fromDom(block));\n        }\n        selection.setRng(rng);\n      }\n    };\n    var removeCaretContainer = function (editor, node, moveCaret) {\n      if (moveCaret === void 0) {\n        moveCaret = true;\n      }\n      var dom = editor.dom, selection = editor.selection;\n      if (!node) {\n        node = getParentCaretContainer(editor.getBody(), selection.getStart());\n        if (!node) {\n          while (node = dom.get(CARET_ID$1)) {\n            removeCaretContainerNode(editor, node, false);\n          }\n        }\n      } else {\n        removeCaretContainerNode(editor, node, moveCaret);\n      }\n    };\n    var insertCaretContainerNode = function (editor, caretContainer, formatNode) {\n      var dom = editor.dom, block = dom.getParent(formatNode, curry(FormatUtils.isTextBlock, editor));\n      if (block && dom.isEmpty(block)) {\n        formatNode.parentNode.replaceChild(caretContainer, formatNode);\n      } else {\n        PaddingBr.removeTrailingBr(Element.fromDom(formatNode));\n        if (dom.isEmpty(formatNode)) {\n          formatNode.parentNode.replaceChild(caretContainer, formatNode);\n        } else {\n          dom.insertAfter(caretContainer, formatNode);\n        }\n      }\n    };\n    var appendNode = function (parentNode, node) {\n      parentNode.appendChild(node);\n      return node;\n    };\n    var insertFormatNodesIntoCaretContainer = function (formatNodes, caretContainer) {\n      var innerMostFormatNode = foldr(formatNodes, function (parentNode, formatNode) {\n        return appendNode(parentNode, formatNode.cloneNode(false));\n      }, caretContainer);\n      return appendNode(innerMostFormatNode, innerMostFormatNode.ownerDocument.createTextNode(ZWSP$1));\n    };\n    var applyCaretFormat = function (editor, name, vars) {\n      var rng, caretContainer, textNode, offset, bookmark, container, text;\n      var selection = editor.selection;\n      rng = selection.getRng(true);\n      offset = rng.startOffset;\n      container = rng.startContainer;\n      text = container.nodeValue;\n      caretContainer = getParentCaretContainer(editor.getBody(), selection.getStart());\n      if (caretContainer) {\n        textNode = findFirstTextNode(caretContainer);\n      }\n      var wordcharRegex = /[^\\s\\u00a0\\u00ad\\u200b\\ufeff]/;\n      if (text && offset > 0 && offset < text.length && wordcharRegex.test(text.charAt(offset)) && wordcharRegex.test(text.charAt(offset - 1))) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        rng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name));\n        rng = SplitRange.split(rng);\n        editor.formatter.apply(name, vars, rng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        if (!caretContainer || textNode.nodeValue !== ZWSP$1) {\n          caretContainer = importNode(editor.getDoc(), createCaretContainer(true).dom());\n          textNode = caretContainer.firstChild;\n          rng.insertNode(caretContainer);\n          offset = 1;\n          editor.formatter.apply(name, vars, caretContainer);\n        } else {\n          editor.formatter.apply(name, vars, caretContainer);\n        }\n        selection.setCursorLocation(textNode, offset);\n      }\n    };\n    var removeCaretFormat = function (editor, name, vars, similar) {\n      var dom = editor.dom, selection = editor.selection;\n      var container, offset, bookmark;\n      var hasContentAfter, node, formatNode;\n      var parents = [], rng = selection.getRng();\n      var caretContainer;\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      node = container;\n      if (container.nodeType === 3) {\n        if (offset !== container.nodeValue.length) {\n          hasContentAfter = true;\n        }\n        node = node.parentNode;\n      }\n      while (node) {\n        if (MatchFormat.matchNode(editor, node, name, vars, similar)) {\n          formatNode = node;\n          break;\n        }\n        if (node.nextSibling) {\n          hasContentAfter = true;\n        }\n        parents.push(node);\n        node = node.parentNode;\n      }\n      if (!formatNode) {\n        return;\n      }\n      if (hasContentAfter) {\n        bookmark = selection.getBookmark();\n        rng.collapse(true);\n        var expandedRng = ExpandRange.expandRng(editor, rng, editor.formatter.get(name), true);\n        expandedRng = SplitRange.split(expandedRng);\n        editor.formatter.remove(name, vars, expandedRng);\n        selection.moveToBookmark(bookmark);\n      } else {\n        caretContainer = getParentCaretContainer(editor.getBody(), formatNode);\n        var newCaretContainer = createCaretContainer(false).dom();\n        var caretNode = insertFormatNodesIntoCaretContainer(parents, newCaretContainer);\n        if (caretContainer) {\n          insertCaretContainerNode(editor, newCaretContainer, caretContainer);\n        } else {\n          insertCaretContainerNode(editor, newCaretContainer, formatNode);\n        }\n        removeCaretContainerNode(editor, caretContainer, false);\n        selection.setCursorLocation(caretNode, 1);\n        if (dom.isEmpty(formatNode)) {\n          dom.remove(formatNode);\n        }\n      }\n    };\n    var disableCaretContainer = function (editor, keyCode) {\n      var selection = editor.selection, body = editor.getBody();\n      removeCaretContainer(editor, null, false);\n      if ((keyCode === 8 || keyCode === 46) && selection.isCollapsed() && selection.getStart().innerHTML === ZWSP$1) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n      if (keyCode === 37 || keyCode === 39) {\n        removeCaretContainer(editor, getParentCaretContainer(body, selection.getStart()));\n      }\n    };\n    var setup$2 = function (editor) {\n      editor.on('mouseup keydown', function (e) {\n        disableCaretContainer(editor, e.keyCode);\n      });\n    };\n    var replaceWithCaretFormat = function (targetNode, formatNodes) {\n      var caretContainer = createCaretContainer(false);\n      var innerMost = insertFormatNodesIntoCaretContainer(formatNodes, caretContainer.dom());\n      before(Element.fromDom(targetNode), caretContainer);\n      remove$1(Element.fromDom(targetNode));\n      return CaretPosition$1(innerMost, 0);\n    };\n    var isFormatElement = function (editor, element) {\n      var inlineElements = editor.schema.getTextInlineElements();\n      return inlineElements.hasOwnProperty(name(element)) && !isCaretNode(element.dom()) && !NodeType.isBogus(element.dom());\n    };\n    var isEmptyCaretFormatElement = function (element) {\n      return isCaretNode(element.dom()) && isCaretContainerEmpty(element.dom());\n    };\n\n    var getParentInlines = function (rootElm, startElm) {\n      var parents = Parents.parentsAndSelf(startElm, rootElm);\n      return findIndex(parents, isBlock).fold(constant(parents), function (index) {\n        return parents.slice(0, index);\n      });\n    };\n    var hasOnlyOneChild$1 = function (elm) {\n      return children(elm).length === 1;\n    };\n    var deleteLastPosition = function (forward, editor, target, parentInlines) {\n      var isFormatElement$1 = curry(isFormatElement, editor);\n      var formatNodes = map(filter(parentInlines, isFormatElement$1), function (elm) {\n        return elm.dom();\n      });\n      if (formatNodes.length === 0) {\n        DeleteElement.deleteElement(editor, forward, target);\n      } else {\n        var pos = replaceWithCaretFormat(target.dom(), formatNodes);\n        editor.selection.setRng(pos.toRange());\n      }\n    };\n    var deleteCaret$1 = function (editor, forward) {\n      var rootElm = Element.fromDom(editor.getBody());\n      var startElm = Element.fromDom(editor.selection.getStart());\n      var parentInlines = filter(getParentInlines(rootElm, startElm), hasOnlyOneChild$1);\n      return last(parentInlines).map(function (target) {\n        var fromPos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        if (DeleteUtils.willDeleteLastPositionInElement(forward, fromPos, target.dom()) && !isEmptyCaretFormatElement(target)) {\n          deleteLastPosition(forward, editor, target, parentInlines);\n          return true;\n        } else {\n          return false;\n        }\n      }).getOr(false);\n    };\n    var backspaceDelete$5 = function (editor, forward) {\n      return editor.selection.isCollapsed() ? deleteCaret$1(editor, forward) : false;\n    };\n    var InlineFormatDelete = { backspaceDelete: backspaceDelete$5 };\n\n    var isContentEditableTrue$2 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$6 = NodeType.isContentEditableFalse;\n    var showCaret = function (direction, editor, node, before, scrollIntoView) {\n      return editor._selectionOverrides.showCaret(direction, node, before, scrollIntoView);\n    };\n    var getNodeRange = function (node) {\n      var rng = node.ownerDocument.createRange();\n      rng.selectNode(node);\n      return rng;\n    };\n    var selectNode = function (editor, node) {\n      var e = editor.fire('BeforeObjectSelected', { target: node });\n      if (e.isDefaultPrevented()) {\n        return null;\n      }\n      return getNodeRange(node);\n    };\n    var renderCaretAtRange = function (editor, range, scrollIntoView) {\n      var normalizedRange = normalizeRange(1, editor.getBody(), range);\n      var caretPosition = CaretPosition$1.fromRangeStart(normalizedRange);\n      var caretPositionNode = caretPosition.getNode();\n      if (isContentEditableFalse$6(caretPositionNode)) {\n        return showCaret(1, editor, caretPositionNode, !caretPosition.isAtEnd(), false);\n      }\n      var caretPositionBeforeNode = caretPosition.getNode(true);\n      if (isContentEditableFalse$6(caretPositionBeforeNode)) {\n        return showCaret(1, editor, caretPositionBeforeNode, false, false);\n      }\n      var ceRoot = editor.dom.getParent(caretPosition.getNode(), function (node) {\n        return isContentEditableFalse$6(node) || isContentEditableTrue$2(node);\n      });\n      if (isContentEditableFalse$6(ceRoot)) {\n        return showCaret(1, editor, ceRoot, false, scrollIntoView);\n      }\n      return null;\n    };\n    var renderRangeCaret = function (editor, range, scrollIntoView) {\n      if (!range || !range.collapsed) {\n        return range;\n      }\n      var caretRange = renderCaretAtRange(editor, range, scrollIntoView);\n      if (caretRange) {\n        return caretRange;\n      }\n      return range;\n    };\n\n    var trimEmptyTextNode$1 = function (dom, node) {\n      if (NodeType.isText(node) && node.data.length === 0) {\n        dom.remove(node);\n      }\n    };\n    var deleteContentAndShowCaret = function (editor, range, node, direction, forward, peekCaretPosition) {\n      var caretRange = showCaret(direction, editor, peekCaretPosition.getNode(!forward), forward, true);\n      if (range.collapsed) {\n        var deleteRange = range.cloneRange();\n        if (forward) {\n          deleteRange.setEnd(caretRange.startContainer, caretRange.startOffset);\n        } else {\n          deleteRange.setStart(caretRange.endContainer, caretRange.endOffset);\n        }\n        deleteRange.deleteContents();\n      } else {\n        range.deleteContents();\n      }\n      editor.selection.setRng(caretRange);\n      trimEmptyTextNode$1(editor.dom, node);\n      return true;\n    };\n    var deleteCefBoundaryText = function (editor, forward) {\n      var range = editor.selection.getRng();\n      if (!NodeType.isText(range.commonAncestorContainer)) {\n        return false;\n      }\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var isBeforeContentEditableFalseFn = forward ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      var nextCaretPosition = InlineUtils.normalizePosition(forward, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        return false;\n      } else if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, nextCaretPosition);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return deleteContentAndShowCaret(editor, range, caretPosition.getNode(), direction, forward, peekCaretPosition);\n        }\n      }\n      return false;\n    };\n    var backspaceDelete$6 = function (editor, forward) {\n      return deleteCefBoundaryText(editor, forward);\n    };\n    var CefBoundaryDelete = { backspaceDelete: backspaceDelete$6 };\n\n    var nativeCommand = function (editor, command) {\n      editor.getDoc().execCommand(command, false, null);\n    };\n    var deleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, false)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, false)) {\n        return;\n      } else {\n        nativeCommand(editor, 'Delete');\n        DeleteUtils.paddEmptyBody(editor);\n      }\n    };\n    var forwardDeleteCommand = function (editor) {\n      if (CefDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (CefBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (BlockBoundaryDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (TableDelete.backspaceDelete(editor)) {\n        return;\n      } else if (BlockRangeDelete.backspaceDelete(editor, true)) {\n        return;\n      } else if (InlineFormatDelete.backspaceDelete(editor, true)) {\n        return;\n      } else {\n        nativeCommand(editor, 'ForwardDelete');\n      }\n    };\n    var DeleteCommands = {\n      deleteCommand: deleteCommand,\n      forwardDeleteCommand: forwardDeleteCommand\n    };\n\n    var getSpecifiedFontProp = function (propName, rootElm, elm) {\n      var getProperty = function (elm) {\n        return getRaw(elm, propName);\n      };\n      var isRoot = function (elm) {\n        return eq(Element.fromDom(rootElm), elm);\n      };\n      return closest(Element.fromDom(elm), function (elm) {\n        return getProperty(elm).isSome();\n      }, isRoot).bind(getProperty);\n    };\n    var round$1 = function (number, precision) {\n      var factor = Math.pow(10, precision);\n      return Math.round(number * factor) / factor;\n    };\n    var toPt = function (fontSize, precision) {\n      if (/[0-9.]+px$/.test(fontSize)) {\n        return round$1(parseInt(fontSize, 10) * 72 / 96, precision || 0) + 'pt';\n      }\n      return fontSize;\n    };\n    var normalizeFontFamily = function (fontFamily) {\n      return fontFamily.replace(/[\\'\\\"\\\\]/g, '').replace(/,\\s+/g, ',');\n    };\n    var getComputedFontProp = function (propName, elm) {\n      return Option.from(DOMUtils$1.DOM.getStyle(elm, propName, true));\n    };\n    var getFontProp = function (propName) {\n      return function (rootElm, elm) {\n        return Option.from(elm).map(Element.fromDom).filter(isElement).bind(function (element) {\n          return getSpecifiedFontProp(propName, rootElm, element.dom()).or(getComputedFontProp(propName, element.dom()));\n        }).getOr('');\n      };\n    };\n    var FontInfo = {\n      getFontSize: getFontProp('font-size'),\n      getFontFamily: compose(normalizeFontFamily, getFontProp('font-family')),\n      toPt: toPt\n    };\n\n    var findFirstCaretElement = function (editor) {\n      return CaretFinder.firstPositionIn(editor.getBody()).map(function (caret) {\n        var container = caret.container();\n        return NodeType.isText(container) ? container.parentNode : container;\n      });\n    };\n    var isRangeAtStartOfNode = function (rng, root) {\n      return rng.startContainer === root && rng.startOffset === 0;\n    };\n    var getCaretElement = function (editor) {\n      return Option.from(editor.selection.getRng()).bind(function (rng) {\n        var root = editor.getBody();\n        return isRangeAtStartOfNode(rng, root) ? Option.none() : Option.from(editor.selection.getStart(true));\n      });\n    };\n    var fromFontSizeNumber = function (editor, value) {\n      if (/^[0-9\\.]+$/.test(value)) {\n        var fontSizeNumber = parseInt(value, 10);\n        if (fontSizeNumber >= 1 && fontSizeNumber <= 7) {\n          var fontSizes = Settings.getFontStyleValues(editor);\n          var fontClasses = Settings.getFontSizeClasses(editor);\n          if (fontClasses) {\n            return fontClasses[fontSizeNumber - 1] || value;\n          } else {\n            return fontSizes[fontSizeNumber - 1] || value;\n          }\n        } else {\n          return value;\n        }\n      } else {\n        return value;\n      }\n    };\n    var fontNameAction = function (editor, value) {\n      editor.formatter.toggle('fontname', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontNameQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontFamily(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontFamily(editor.getBody(), caretElement);\n      });\n    };\n    var fontSizeAction = function (editor, value) {\n      editor.formatter.toggle('fontsize', { value: fromFontSizeNumber(editor, value) });\n      editor.nodeChanged();\n    };\n    var fontSizeQuery = function (editor) {\n      return getCaretElement(editor).fold(function () {\n        return findFirstCaretElement(editor).map(function (caretElement) {\n          return FontInfo.getFontSize(editor.getBody(), caretElement);\n        }).getOr('');\n      }, function (caretElement) {\n        return FontInfo.getFontSize(editor.getBody(), caretElement);\n      });\n    };\n\n    var isEq$3 = function (rng1, rng2) {\n      return rng1 && rng2 && (rng1.startContainer === rng2.startContainer && rng1.startOffset === rng2.startOffset) && (rng1.endContainer === rng2.endContainer && rng1.endOffset === rng2.endOffset);\n    };\n    var RangeCompare = { isEq: isEq$3 };\n\n    var findParent = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var hasParent = function (node, rootNode, predicate) {\n      return findParent(node, rootNode, predicate) !== null;\n    };\n    var hasParentWithName = function (node, rootNode, name) {\n      return hasParent(node, rootNode, function (node) {\n        return node.nodeName === name;\n      });\n    };\n    var isTable$2 = function (node) {\n      return node && node.nodeName === 'TABLE';\n    };\n    var isTableCell$3 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var isCeFalseCaretContainer = function (node, rootNode) {\n      return isCaretContainer(node) && hasParent(node, rootNode, isCaretNode) === false;\n    };\n    var hasBrBeforeAfter = function (dom, node, left) {\n      var walker = new TreeWalker(node, dom.getParent(node.parentNode, dom.isBlock) || dom.getRoot());\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (NodeType.isBr(node)) {\n          return true;\n        }\n      }\n    };\n    var isPrevNode = function (node, name) {\n      return node.previousSibling && node.previousSibling.nodeName === name;\n    };\n    var hasContentEditableFalseParent = function (body, node) {\n      while (node && node !== body) {\n        if (NodeType.isContentEditableFalse(node)) {\n          return true;\n        }\n        node = node.parentNode;\n      }\n      return false;\n    };\n    var findTextNodeRelative = function (dom, isAfterNode, collapsed, left, startNode) {\n      var walker, lastInlineElement, parentBlockContainer;\n      var body = dom.getRoot();\n      var node;\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      parentBlockContainer = dom.getParent(startNode.parentNode, dom.isBlock) || body;\n      if (left && NodeType.isBr(startNode) && isAfterNode && dom.isEmpty(parentBlockContainer)) {\n        return Option.some(CaretPosition(startNode.parentNode, dom.nodeIndex(startNode)));\n      }\n      walker = new TreeWalker(startNode, parentBlockContainer);\n      while (node = walker[left ? 'prev' : 'next']()) {\n        if (dom.getContentEditableParent(node) === 'false' || isCeFalseCaretContainer(node, body)) {\n          return Option.none();\n        }\n        if (NodeType.isText(node) && node.nodeValue.length > 0) {\n          if (hasParentWithName(node, body, 'A') === false) {\n            return Option.some(CaretPosition(node, left ? node.nodeValue.length : 0));\n          }\n          return Option.none();\n        }\n        if (dom.isBlock(node) || nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          return Option.none();\n        }\n        lastInlineElement = node;\n      }\n      if (collapsed && lastInlineElement) {\n        return Option.some(CaretPosition(lastInlineElement, 0));\n      }\n      return Option.none();\n    };\n    var normalizeEndPoint = function (dom, collapsed, start, rng) {\n      var container, offset, walker;\n      var body = dom.getRoot();\n      var node, nonEmptyElementsMap;\n      var directionLeft, isAfterNode, normalized = false;\n      container = rng[(start ? 'start' : 'end') + 'Container'];\n      offset = rng[(start ? 'start' : 'end') + 'Offset'];\n      isAfterNode = NodeType.isElement(container) && offset === container.childNodes.length;\n      nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      directionLeft = start;\n      if (isCaretContainer(container)) {\n        return Option.none();\n      }\n      if (NodeType.isElement(container) && offset > container.childNodes.length - 1) {\n        directionLeft = false;\n      }\n      if (NodeType.isDocument(container)) {\n        container = body;\n        offset = 0;\n      }\n      if (container === body) {\n        if (directionLeft) {\n          node = container.childNodes[offset > 0 ? offset - 1 : 0];\n          if (node) {\n            if (isCaretContainer(node)) {\n              return Option.none();\n            }\n            if (nonEmptyElementsMap[node.nodeName] || isTable$2(node)) {\n              return Option.none();\n            }\n          }\n        }\n        if (container.hasChildNodes()) {\n          offset = Math.min(!directionLeft && offset > 0 ? offset - 1 : offset, container.childNodes.length - 1);\n          container = container.childNodes[offset];\n          offset = NodeType.isText(container) && isAfterNode ? container.data.length : 0;\n          if (!collapsed && container === body.lastChild && isTable$2(container)) {\n            return Option.none();\n          }\n          if (hasContentEditableFalseParent(body, container) || isCaretContainer(container)) {\n            return Option.none();\n          }\n          if (container.hasChildNodes() && isTable$2(container) === false) {\n            node = container;\n            walker = new TreeWalker(container, body);\n            do {\n              if (NodeType.isContentEditableFalse(node) || isCaretContainer(node)) {\n                normalized = false;\n                break;\n              }\n              if (NodeType.isText(node) && node.nodeValue.length > 0) {\n                offset = directionLeft ? 0 : node.nodeValue.length;\n                container = node;\n                normalized = true;\n                break;\n              }\n              if (nonEmptyElementsMap[node.nodeName.toLowerCase()] && !isTableCell$3(node)) {\n                offset = dom.nodeIndex(node);\n                container = node.parentNode;\n                if (!directionLeft) {\n                  offset++;\n                }\n                normalized = true;\n                break;\n              }\n            } while (node = directionLeft ? walker.next() : walker.prev());\n          }\n        }\n      }\n      if (collapsed) {\n        if (NodeType.isText(container) && offset === 0) {\n          findTextNodeRelative(dom, isAfterNode, collapsed, true, container).each(function (pos) {\n            container = pos.container();\n            offset = pos.offset();\n            normalized = true;\n          });\n        }\n        if (NodeType.isElement(container)) {\n          node = container.childNodes[offset];\n          if (!node) {\n            node = container.childNodes[offset - 1];\n          }\n          if (node && NodeType.isBr(node) && !isPrevNode(node, 'A') && !hasBrBeforeAfter(dom, node, false) && !hasBrBeforeAfter(dom, node, true)) {\n            findTextNodeRelative(dom, isAfterNode, collapsed, true, node).each(function (pos) {\n              container = pos.container();\n              offset = pos.offset();\n              normalized = true;\n            });\n          }\n        }\n      }\n      if (directionLeft && !collapsed && NodeType.isText(container) && offset === container.nodeValue.length) {\n        findTextNodeRelative(dom, isAfterNode, collapsed, false, container).each(function (pos) {\n          container = pos.container();\n          offset = pos.offset();\n          normalized = true;\n        });\n      }\n      return normalized ? Option.some(CaretPosition(container, offset)) : Option.none();\n    };\n    var normalize$2 = function (dom, rng) {\n      var collapsed = rng.collapsed, normRng = rng.cloneRange();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      normalizeEndPoint(dom, collapsed, true, normRng).each(function (pos) {\n        if (!collapsed || !CaretPosition.isAbove(startPos, pos)) {\n          normRng.setStart(pos.container(), pos.offset());\n        }\n      });\n      if (!collapsed) {\n        normalizeEndPoint(dom, collapsed, false, normRng).each(function (pos) {\n          normRng.setEnd(pos.container(), pos.offset());\n        });\n      }\n      if (collapsed) {\n        normRng.collapse(true);\n      }\n      return RangeCompare.isEq(rng, normRng) ? Option.none() : Option.some(normRng);\n    };\n    var NormalizeRange = { normalize: normalize$2 };\n\n    var hasRightSideContent = function (schema, container, parentBlock) {\n      var walker = new TreeWalker(container, parentBlock);\n      var node;\n      var nonEmptyElementsMap = schema.getNonEmptyElements();\n      while (node = walker.next()) {\n        if (nonEmptyElementsMap[node.nodeName.toLowerCase()] || node.length > 0) {\n          return true;\n        }\n      }\n    };\n    var scrollToBr = function (dom, selection, brElm) {\n      var marker = dom.create('span', {}, '&nbsp;');\n      brElm.parentNode.insertBefore(marker, brElm);\n      selection.scrollIntoView(marker);\n      dom.remove(marker);\n    };\n    var moveSelectionToBr = function (dom, selection, brElm, extraBr) {\n      var rng = dom.createRng();\n      if (!extraBr) {\n        rng.setStartAfter(brElm);\n        rng.setEndAfter(brElm);\n      } else {\n        rng.setStartBefore(brElm);\n        rng.setEndBefore(brElm);\n      }\n      selection.setRng(rng);\n    };\n    var insertBrAtCaret = function (editor, evt) {\n      var selection = editor.selection;\n      var dom = editor.dom;\n      var rng = selection.getRng();\n      var brElm;\n      var extraBr;\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      var offset = rng.startOffset;\n      var container = rng.startContainer;\n      if (container.nodeType === 1 && container.hasChildNodes()) {\n        var isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && container.nodeType === 3) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      var parentBlock = dom.getParent(container, dom.isBlock);\n      var containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      var containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      var isControlKey = evt && evt.ctrlKey;\n      if (containerBlockName === 'LI' && !isControlKey) {\n        parentBlock = containerBlock;\n      }\n      if (container && container.nodeType === 3 && offset >= container.nodeValue.length) {\n        if (!hasRightSideContent(editor.schema, container, parentBlock)) {\n          brElm = dom.create('br');\n          rng.insertNode(brElm);\n          rng.setStartAfter(brElm);\n          rng.setEndAfter(brElm);\n          extraBr = true;\n        }\n      }\n      brElm = dom.create('br');\n      rangeInsertNode(dom, rng, brElm);\n      scrollToBr(dom, selection, brElm);\n      moveSelectionToBr(dom, selection, brElm, extraBr);\n      editor.undoManager.add();\n    };\n    var insertBrBefore = function (editor, inline) {\n      var br = Element.fromTag('br');\n      before(Element.fromDom(inline), br);\n      editor.undoManager.add();\n    };\n    var insertBrAfter = function (editor, inline) {\n      if (!hasBrAfter(editor.getBody(), inline)) {\n        after(Element.fromDom(inline), Element.fromTag('br'));\n      }\n      var br = Element.fromTag('br');\n      after(Element.fromDom(inline), br);\n      scrollToBr(editor.dom, editor.selection, br.dom());\n      moveSelectionToBr(editor.dom, editor.selection, br.dom(), false);\n      editor.undoManager.add();\n    };\n    var isBeforeBr$1 = function (pos) {\n      return NodeType.isBr(pos.getNode());\n    };\n    var hasBrAfter = function (rootNode, startNode) {\n      if (isBeforeBr$1(CaretPosition$1.after(startNode))) {\n        return true;\n      } else {\n        return CaretFinder.nextPosition(rootNode, CaretPosition$1.after(startNode)).map(function (pos) {\n          return NodeType.isBr(pos.getNode());\n        }).getOr(false);\n      }\n    };\n    var isAnchorLink = function (elm) {\n      return elm && elm.nodeName === 'A' && 'href' in elm;\n    };\n    var isInsideAnchor = function (location) {\n      return location.fold(constant(false), isAnchorLink, isAnchorLink, constant(false));\n    };\n    var readInlineAnchorLocation = function (editor) {\n      var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n      var position = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), position).filter(isInsideAnchor);\n    };\n    var insertBrOutsideAnchor = function (editor, location) {\n      location.fold(noop, curry(insertBrBefore, editor), curry(insertBrAfter, editor), noop);\n    };\n    var insert = function (editor, evt) {\n      var anchorLocation = readInlineAnchorLocation(editor);\n      if (anchorLocation.isSome()) {\n        anchorLocation.each(curry(insertBrOutsideAnchor, editor));\n      } else {\n        insertBrAtCaret(editor, evt);\n      }\n    };\n    var InsertBr = { insert: insert };\n\n    var create$3 = Immutable('start', 'soffset', 'finish', 'foffset');\n    var SimRange = { create: create$3 };\n\n    var adt = Adt.generate([\n      { before: ['element'] },\n      {\n        on: [\n          'element',\n          'offset'\n        ]\n      },\n      { after: ['element'] }\n    ]);\n    var cata = function (subject, onBefore, onOn, onAfter) {\n      return subject.fold(onBefore, onOn, onAfter);\n    };\n    var getStart = function (situ) {\n      return situ.fold(identity, identity, identity);\n    };\n    var before$4 = adt.before;\n    var on = adt.on;\n    var after$3 = adt.after;\n    var Situ = {\n      before: before$4,\n      on: on,\n      after: after$3,\n      cata: cata,\n      getStart: getStart\n    };\n\n    var adt$1 = Adt.generate([\n      { domRange: ['rng'] },\n      {\n        relative: [\n          'startSitu',\n          'finishSitu'\n        ]\n      },\n      {\n        exact: [\n          'start',\n          'soffset',\n          'finish',\n          'foffset'\n        ]\n      }\n    ]);\n    var exactFromRange = function (simRange) {\n      return adt$1.exact(simRange.start(), simRange.soffset(), simRange.finish(), simRange.foffset());\n    };\n    var getStart$1 = function (selection) {\n      return selection.match({\n        domRange: function (rng) {\n          return Element.fromDom(rng.startContainer);\n        },\n        relative: function (startSitu, finishSitu) {\n          return Situ.getStart(startSitu);\n        },\n        exact: function (start, soffset, finish, foffset) {\n          return start;\n        }\n      });\n    };\n    var domRange = adt$1.domRange;\n    var relative = adt$1.relative;\n    var exact = adt$1.exact;\n    var getWin = function (selection) {\n      var start = getStart$1(selection);\n      return defaultView(start);\n    };\n    var range = SimRange.create;\n    var Selection = {\n      domRange: domRange,\n      relative: relative,\n      exact: exact,\n      exactFromRange: exactFromRange,\n      getWin: getWin,\n      range: range\n    };\n\n    var browser$3 = PlatformDetection$1.detect().browser;\n    var clamp = function (offset, element) {\n      var max = isText(element) ? get$4(element).length : children(element).length + 1;\n      if (offset > max) {\n        return max;\n      } else if (offset < 0) {\n        return 0;\n      }\n      return offset;\n    };\n    var normalizeRng = function (rng) {\n      return Selection.range(rng.start(), clamp(rng.soffset(), rng.start()), rng.finish(), clamp(rng.foffset(), rng.finish()));\n    };\n    var isOrContains = function (root, elm) {\n      return !NodeType.isRestrictedNode(elm.dom()) && (contains$3(root, elm) || eq(root, elm));\n    };\n    var isRngInRoot = function (root) {\n      return function (rng) {\n        return isOrContains(root, rng.start()) && isOrContains(root, rng.finish());\n      };\n    };\n    var shouldStore = function (editor) {\n      return editor.inline === true || browser$3.isIE();\n    };\n    var nativeRangeToSelectionRange = function (r) {\n      return Selection.range(Element.fromDom(r.startContainer), r.startOffset, Element.fromDom(r.endContainer), r.endOffset);\n    };\n    var readRange = function (win) {\n      var selection = win.getSelection();\n      var rng = !selection || selection.rangeCount === 0 ? Option.none() : Option.from(selection.getRangeAt(0));\n      return rng.map(nativeRangeToSelectionRange);\n    };\n    var getBookmark$2 = function (root) {\n      var win = defaultView(root);\n      return readRange(win.dom()).filter(isRngInRoot(root));\n    };\n    var validate = function (root, bookmark) {\n      return Option.from(bookmark).filter(isRngInRoot(root)).map(normalizeRng);\n    };\n    var bookmarkToNativeRng = function (bookmark) {\n      var rng = domGlobals.document.createRange();\n      try {\n        rng.setStart(bookmark.start().dom(), bookmark.soffset());\n        rng.setEnd(bookmark.finish().dom(), bookmark.foffset());\n        return Option.some(rng);\n      } catch (_) {\n        return Option.none();\n      }\n    };\n    var store = function (editor) {\n      var newBookmark = shouldStore(editor) ? getBookmark$2(Element.fromDom(editor.getBody())) : Option.none();\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var storeNative = function (editor, rng) {\n      var root = Element.fromDom(editor.getBody());\n      var range = shouldStore(editor) ? Option.from(rng) : Option.none();\n      var newBookmark = range.map(nativeRangeToSelectionRange).filter(isRngInRoot(root));\n      editor.bookmark = newBookmark.isSome() ? newBookmark : editor.bookmark;\n    };\n    var getRng = function (editor) {\n      var bookmark = editor.bookmark ? editor.bookmark : Option.none();\n      return bookmark.bind(curry(validate, Element.fromDom(editor.getBody()))).bind(bookmarkToNativeRng);\n    };\n    var restore = function (editor) {\n      getRng(editor).each(function (rng) {\n        editor.selection.setRng(rng);\n      });\n    };\n    var SelectionBookmark = {\n      store: store,\n      storeNative: storeNative,\n      readRange: readRange,\n      restore: restore,\n      getRng: getRng,\n      getBookmark: getBookmark$2,\n      validate: validate\n    };\n\n    var indentElement = function (dom, command, useMargin, value, unit, element) {\n      if (dom.getContentEditable(element) === 'false') {\n        return;\n      }\n      var indentStyleName = useMargin ? 'margin' : 'padding';\n      indentStyleName = element.nodeName === 'TABLE' ? 'margin' : indentStyleName;\n      indentStyleName += dom.getStyle(element, 'direction', true) === 'rtl' ? 'Right' : 'Left';\n      if (command === 'outdent') {\n        var styleValue = Math.max(0, parseInt(element.style[indentStyleName] || 0, 10) - value);\n        dom.setStyle(element, indentStyleName, styleValue ? styleValue + unit : '');\n      } else {\n        var styleValue = parseInt(element.style[indentStyleName] || 0, 10) + value + unit;\n        dom.setStyle(element, indentStyleName, styleValue);\n      }\n    };\n    var isListComponent = function (el) {\n      return isList(el) || isListItem(el);\n    };\n    var parentIsListComponent = function (el) {\n      return parent(el).map(isListComponent).getOr(false);\n    };\n    var getBlocksToIndent = function (editor) {\n      return filter(map(editor.selection.getSelectedBlocks(), Element.fromDom), function (el) {\n        return !isListComponent(el) && !parentIsListComponent(el);\n      });\n    };\n    var handle = function (editor, command) {\n      var settings = editor.settings, dom = editor.dom, selection = editor.selection, formatter = editor.formatter;\n      var indentUnit = /[a-z%]+$/i.exec(settings.indentation)[0];\n      var indentValue = parseInt(settings.indentation, 10);\n      var useMargin = editor.getParam('indent_use_margin', false);\n      if (!editor.queryCommandState('InsertUnorderedList') && !editor.queryCommandState('InsertOrderedList')) {\n        if (!settings.forced_root_block && !dom.getParent(selection.getNode(), dom.isBlock)) {\n          formatter.apply('div');\n        }\n      }\n      each(getBlocksToIndent(editor), function (block) {\n        indentElement(dom, command, useMargin, indentValue, indentUnit, block.dom());\n      });\n    };\n\n    var each$a = Tools.each, extend$2 = Tools.extend;\n    var map$3 = Tools.map, inArray$2 = Tools.inArray;\n    function EditorCommands (editor) {\n      var dom, selection, formatter;\n      var commands = {\n        state: {},\n        exec: {},\n        value: {}\n      };\n      var settings = editor.settings, bookmark;\n      editor.on('PreInit', function () {\n        dom = editor.dom;\n        selection = editor.selection;\n        settings = editor.settings;\n        formatter = editor.formatter;\n      });\n      var execCommand = function (command, ui, value, args) {\n        var func, customCommand, state = false;\n        if (editor.removed) {\n          return;\n        }\n        if (!/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(command) && (!args || !args.skip_focus)) {\n          editor.focus();\n        } else {\n          SelectionBookmark.restore(editor);\n        }\n        args = editor.fire('BeforeExecCommand', {\n          command: command,\n          ui: ui,\n          value: value\n        });\n        if (args.isDefaultPrevented()) {\n          return false;\n        }\n        customCommand = command.toLowerCase();\n        if (func = commands.exec[customCommand]) {\n          func(customCommand, ui, value);\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        each$a(editor.plugins, function (p) {\n          if (p.execCommand && p.execCommand(command, ui, value)) {\n            editor.fire('ExecCommand', {\n              command: command,\n              ui: ui,\n              value: value\n            });\n            state = true;\n            return false;\n          }\n        });\n        if (state) {\n          return state;\n        }\n        if (editor.theme && editor.theme.execCommand && editor.theme.execCommand(command, ui, value)) {\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        try {\n          state = editor.getDoc().execCommand(command, ui, value);\n        } catch (ex) {\n        }\n        if (state) {\n          editor.fire('ExecCommand', {\n            command: command,\n            ui: ui,\n            value: value\n          });\n          return true;\n        }\n        return false;\n      };\n      var queryCommandState = function (command) {\n        var func;\n        if (editor.quirks.isHidden() || editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = commands.state[command]) {\n          return func(command);\n        }\n        try {\n          return editor.getDoc().queryCommandState(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      var queryCommandValue = function (command) {\n        var func;\n        if (editor.quirks.isHidden() || editor.removed) {\n          return;\n        }\n        command = command.toLowerCase();\n        if (func = commands.value[command]) {\n          return func(command);\n        }\n        try {\n          return editor.getDoc().queryCommandValue(command);\n        } catch (ex) {\n        }\n      };\n      var addCommands = function (commandList, type) {\n        type = type || 'exec';\n        each$a(commandList, function (callback, command) {\n          each$a(command.toLowerCase().split(','), function (command) {\n            commands[type][command] = callback;\n          });\n        });\n      };\n      var addCommand = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.exec[command] = function (command, ui, value, args) {\n          return callback.call(scope || editor, ui, value, args);\n        };\n      };\n      var queryCommandSupported = function (command) {\n        command = command.toLowerCase();\n        if (commands.exec[command]) {\n          return true;\n        }\n        try {\n          return editor.getDoc().queryCommandSupported(command);\n        } catch (ex) {\n        }\n        return false;\n      };\n      var addQueryStateHandler = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.state[command] = function () {\n          return callback.call(scope || editor);\n        };\n      };\n      var addQueryValueHandler = function (command, callback, scope) {\n        command = command.toLowerCase();\n        commands.value[command] = function () {\n          return callback.call(scope || editor);\n        };\n      };\n      var hasCustomCommand = function (command) {\n        command = command.toLowerCase();\n        return !!commands.exec[command];\n      };\n      extend$2(this, {\n        execCommand: execCommand,\n        queryCommandState: queryCommandState,\n        queryCommandValue: queryCommandValue,\n        queryCommandSupported: queryCommandSupported,\n        addCommands: addCommands,\n        addCommand: addCommand,\n        addQueryStateHandler: addQueryStateHandler,\n        addQueryValueHandler: addQueryValueHandler,\n        hasCustomCommand: hasCustomCommand\n      });\n      var execNativeCommand = function (command, ui, value) {\n        if (ui === undefined) {\n          ui = false;\n        }\n        if (value === undefined) {\n          value = null;\n        }\n        return editor.getDoc().execCommand(command, ui, value);\n      };\n      var isFormatMatch = function (name) {\n        return formatter.match(name);\n      };\n      var toggleFormat = function (name, value) {\n        formatter.toggle(name, value ? { value: value } : undefined);\n        editor.nodeChanged();\n      };\n      var storeSelection = function (type) {\n        bookmark = selection.getBookmark(type);\n      };\n      var restoreSelection = function () {\n        selection.moveToBookmark(bookmark);\n      };\n      addCommands({\n        'mceResetDesignMode,mceBeginUndoLevel': function () {\n        },\n        'mceEndUndoLevel,mceAddUndoLevel': function () {\n          editor.undoManager.add();\n        },\n        'Cut,Copy,Paste': function (command) {\n          var doc = editor.getDoc();\n          var failed;\n          try {\n            execNativeCommand(command);\n          } catch (ex) {\n            failed = true;\n          }\n          if (command === 'paste' && !doc.queryCommandEnabled(command)) {\n            failed = true;\n          }\n          if (failed || !doc.queryCommandSupported(command)) {\n            var msg = editor.translate('Your browser doesn\\'t support direct access to the clipboard. ' + 'Please use the Ctrl+X/C/V keyboard shortcuts instead.');\n            if (Env.mac) {\n              msg = msg.replace(/Ctrl\\+/g, '\\u2318+');\n            }\n            editor.notificationManager.open({\n              text: msg,\n              type: 'error'\n            });\n          }\n        },\n        'unlink': function () {\n          if (selection.isCollapsed()) {\n            var elm = editor.dom.getParent(editor.selection.getStart(), 'a');\n            if (elm) {\n              editor.dom.remove(elm, true);\n            }\n            return;\n          }\n          formatter.remove('link');\n        },\n        'JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone': function (command) {\n          var align = command.substring(7);\n          if (align === 'full') {\n            align = 'justify';\n          }\n          each$a('left,center,right,justify'.split(','), function (name) {\n            if (align !== name) {\n              formatter.remove('align' + name);\n            }\n          });\n          if (align !== 'none') {\n            toggleFormat('align' + align);\n          }\n        },\n        'InsertUnorderedList,InsertOrderedList': function (command) {\n          var listElm, listParent;\n          execNativeCommand(command);\n          listElm = dom.getParent(selection.getNode(), 'ol,ul');\n          if (listElm) {\n            listParent = listElm.parentNode;\n            if (/^(H[1-6]|P|ADDRESS|PRE)$/.test(listParent.nodeName)) {\n              storeSelection();\n              dom.split(listParent, listElm);\n              restoreSelection();\n            }\n          }\n        },\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n          toggleFormat(command);\n        },\n        'ForeColor,HiliteColor': function (command, ui, value) {\n          toggleFormat(command, value);\n        },\n        'FontName': function (command, ui, value) {\n          fontNameAction(editor, value);\n        },\n        'FontSize': function (command, ui, value) {\n          fontSizeAction(editor, value);\n        },\n        'RemoveFormat': function (command) {\n          formatter.remove(command);\n        },\n        'mceBlockQuote': function () {\n          toggleFormat('blockquote');\n        },\n        'FormatBlock': function (command, ui, value) {\n          return toggleFormat(value || 'p');\n        },\n        'mceCleanup': function () {\n          var bookmark = selection.getBookmark();\n          editor.setContent(editor.getContent());\n          selection.moveToBookmark(bookmark);\n        },\n        'mceRemoveNode': function (command, ui, value) {\n          var node = value || selection.getNode();\n          if (node !== editor.getBody()) {\n            storeSelection();\n            editor.dom.remove(node, true);\n            restoreSelection();\n          }\n        },\n        'mceSelectNodeDepth': function (command, ui, value) {\n          var counter = 0;\n          dom.getParent(selection.getNode(), function (node) {\n            if (node.nodeType === 1 && counter++ === value) {\n              selection.select(node);\n              return false;\n            }\n          }, editor.getBody());\n        },\n        'mceSelectNode': function (command, ui, value) {\n          selection.select(value);\n        },\n        'mceInsertContent': function (command, ui, value) {\n          InsertContent.insertAtCaret(editor, value);\n        },\n        'mceInsertRawHTML': function (command, ui, value) {\n          selection.setContent('tiny_mce_marker');\n          var content = editor.getContent();\n          editor.setContent(content.replace(/tiny_mce_marker/g, function () {\n            return value;\n          }));\n        },\n        'mceToggleFormat': function (command, ui, value) {\n          toggleFormat(value);\n        },\n        'mceSetContent': function (command, ui, value) {\n          editor.setContent(value);\n        },\n        'Indent,Outdent': function (command) {\n          handle(editor, command);\n        },\n        'mceRepaint': function () {\n        },\n        'InsertHorizontalRule': function () {\n          editor.execCommand('mceInsertContent', false, '<hr />');\n        },\n        'mceToggleVisualAid': function () {\n          editor.hasVisual = !editor.hasVisual;\n          editor.addVisual();\n        },\n        'mceReplaceContent': function (command, ui, value) {\n          editor.execCommand('mceInsertContent', false, value.replace(/\\{\\$selection\\}/g, selection.getContent({ format: 'text' })));\n        },\n        'mceInsertLink': function (command, ui, value) {\n          var anchor;\n          if (typeof value === 'string') {\n            value = { href: value };\n          }\n          anchor = dom.getParent(selection.getNode(), 'a');\n          value.href = value.href.replace(' ', '%20');\n          if (!anchor || !value.href) {\n            formatter.remove('link');\n          }\n          if (value.href) {\n            formatter.apply('link', value, anchor);\n          }\n        },\n        'selectAll': function () {\n          var editingHost = dom.getParent(selection.getStart(), NodeType.isContentEditableTrue);\n          if (editingHost) {\n            var rng = dom.createRng();\n            rng.selectNodeContents(editingHost);\n            selection.setRng(rng);\n          }\n        },\n        'delete': function () {\n          DeleteCommands.deleteCommand(editor);\n        },\n        'forwardDelete': function () {\n          DeleteCommands.forwardDeleteCommand(editor);\n        },\n        'mceNewDocument': function () {\n          editor.setContent('');\n        },\n        'InsertLineBreak': function (command, ui, value) {\n          InsertBr.insert(editor, value);\n          return true;\n        }\n      });\n      var alignStates = function (name) {\n        return function () {\n          var nodes = selection.isCollapsed() ? [dom.getParent(selection.getNode(), dom.isBlock)] : selection.getSelectedBlocks();\n          var matches = map$3(nodes, function (node) {\n            return !!formatter.matchNode(node, name);\n          });\n          return inArray$2(matches, true) !== -1;\n        };\n      };\n      addCommands({\n        'JustifyLeft': alignStates('alignleft'),\n        'JustifyCenter': alignStates('aligncenter'),\n        'JustifyRight': alignStates('alignright'),\n        'JustifyFull': alignStates('alignjustify'),\n        'Bold,Italic,Underline,Strikethrough,Superscript,Subscript': function (command) {\n          return isFormatMatch(command);\n        },\n        'mceBlockQuote': function () {\n          return isFormatMatch('blockquote');\n        },\n        'Outdent': function () {\n          var node;\n          if (settings.inline_styles) {\n            if ((node = dom.getParent(selection.getStart(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {\n              return true;\n            }\n            if ((node = dom.getParent(selection.getEnd(), dom.isBlock)) && parseInt(node.style.paddingLeft, 10) > 0) {\n              return true;\n            }\n          }\n          return queryCommandState('InsertUnorderedList') || queryCommandState('InsertOrderedList') || !settings.inline_styles && !!dom.getParent(selection.getNode(), 'BLOCKQUOTE');\n        },\n        'InsertUnorderedList,InsertOrderedList': function (command) {\n          var list = dom.getParent(selection.getNode(), 'ul,ol');\n          return list && (command === 'insertunorderedlist' && list.tagName === 'UL' || command === 'insertorderedlist' && list.tagName === 'OL');\n        }\n      }, 'state');\n      addCommands({\n        Undo: function () {\n          editor.undoManager.undo();\n        },\n        Redo: function () {\n          editor.undoManager.redo();\n        }\n      });\n      addQueryValueHandler('FontName', function () {\n        return fontNameQuery(editor);\n      }, this);\n      addQueryValueHandler('FontSize', function () {\n        return fontSizeQuery(editor);\n      }, this);\n    }\n\n    var nativeEvents = Tools.makeMap('focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange ' + 'mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover ' + 'draggesture dragdrop drop drag submit ' + 'compositionstart compositionend compositionupdate touchstart touchmove touchend', ' ');\n    var Dispatcher = function (settings) {\n      var self = this;\n      var scope, bindings = {}, toggleEvent;\n      var returnFalse = function () {\n        return false;\n      };\n      var returnTrue = function () {\n        return true;\n      };\n      settings = settings || {};\n      scope = settings.scope || self;\n      toggleEvent = settings.toggleEvent || returnFalse;\n      var fire = function (name, args) {\n        var handlers, i, l, callback;\n        name = name.toLowerCase();\n        args = args || {};\n        args.type = name;\n        if (!args.target) {\n          args.target = scope;\n        }\n        if (!args.preventDefault) {\n          args.preventDefault = function () {\n            args.isDefaultPrevented = returnTrue;\n          };\n          args.stopPropagation = function () {\n            args.isPropagationStopped = returnTrue;\n          };\n          args.stopImmediatePropagation = function () {\n            args.isImmediatePropagationStopped = returnTrue;\n          };\n          args.isDefaultPrevented = returnFalse;\n          args.isPropagationStopped = returnFalse;\n          args.isImmediatePropagationStopped = returnFalse;\n        }\n        if (settings.beforeFire) {\n          settings.beforeFire(args);\n        }\n        handlers = bindings[name];\n        if (handlers) {\n          for (i = 0, l = handlers.length; i < l; i++) {\n            callback = handlers[i];\n            if (callback.once) {\n              off(name, callback.func);\n            }\n            if (args.isImmediatePropagationStopped()) {\n              args.stopPropagation();\n              return args;\n            }\n            if (callback.func.call(scope, args) === false) {\n              args.preventDefault();\n              return args;\n            }\n          }\n        }\n        return args;\n      };\n      var on = function (name, callback, prepend, extra) {\n        var handlers, names, i;\n        if (callback === false) {\n          callback = returnFalse;\n        }\n        if (callback) {\n          callback = { func: callback };\n          if (extra) {\n            Tools.extend(callback, extra);\n          }\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = bindings[name];\n            if (!handlers) {\n              handlers = bindings[name] = [];\n              toggleEvent(name, true);\n            }\n            if (prepend) {\n              handlers.unshift(callback);\n            } else {\n              handlers.push(callback);\n            }\n          }\n        }\n        return self;\n      };\n      var off = function (name, callback) {\n        var i, handlers, bindingName, names, hi;\n        if (name) {\n          names = name.toLowerCase().split(' ');\n          i = names.length;\n          while (i--) {\n            name = names[i];\n            handlers = bindings[name];\n            if (!name) {\n              for (bindingName in bindings) {\n                toggleEvent(bindingName, false);\n                delete bindings[bindingName];\n              }\n              return self;\n            }\n            if (handlers) {\n              if (!callback) {\n                handlers.length = 0;\n              } else {\n                hi = handlers.length;\n                while (hi--) {\n                  if (handlers[hi].func === callback) {\n                    handlers = handlers.slice(0, hi).concat(handlers.slice(hi + 1));\n                    bindings[name] = handlers;\n                  }\n                }\n              }\n              if (!handlers.length) {\n                toggleEvent(name, false);\n                delete bindings[name];\n              }\n            }\n          }\n        } else {\n          for (name in bindings) {\n            toggleEvent(name, false);\n          }\n          bindings = {};\n        }\n        return self;\n      };\n      var once = function (name, callback, prepend) {\n        return on(name, callback, prepend, { once: true });\n      };\n      var has = function (name) {\n        name = name.toLowerCase();\n        return !(!bindings[name] || bindings[name].length === 0);\n      };\n      self.fire = fire;\n      self.on = on;\n      self.off = off;\n      self.once = once;\n      self.has = has;\n    };\n    Dispatcher.isNative = function (name) {\n      return !!nativeEvents[name.toLowerCase()];\n    };\n\n    var getEventDispatcher = function (obj) {\n      if (!obj._eventDispatcher) {\n        obj._eventDispatcher = new Dispatcher({\n          scope: obj,\n          toggleEvent: function (name, state) {\n            if (Dispatcher.isNative(name) && obj.toggleNativeEvent) {\n              obj.toggleNativeEvent(name, state);\n            }\n          }\n        });\n      }\n      return obj._eventDispatcher;\n    };\n    var Observable = {\n      fire: function (name, args, bubble) {\n        var self = this;\n        if (self.removed && name !== 'remove' && name !== 'detach') {\n          return args;\n        }\n        args = getEventDispatcher(self).fire(name, args, bubble);\n        if (bubble !== false && self.parent) {\n          var parent = self.parent();\n          while (parent && !args.isPropagationStopped()) {\n            parent.fire(name, args, false);\n            parent = parent.parent();\n          }\n        }\n        return args;\n      },\n      on: function (name, callback, prepend) {\n        return getEventDispatcher(this).on(name, callback, prepend);\n      },\n      off: function (name, callback) {\n        return getEventDispatcher(this).off(name, callback);\n      },\n      once: function (name, callback) {\n        return getEventDispatcher(this).once(name, callback);\n      },\n      hasEventListeners: function (name) {\n        return getEventDispatcher(this).has(name);\n      }\n    };\n\n    var firePreProcess = function (editor, args) {\n      return editor.fire('PreProcess', args);\n    };\n    var firePostProcess = function (editor, args) {\n      return editor.fire('PostProcess', args);\n    };\n    var fireRemove = function (editor) {\n      return editor.fire('remove');\n    };\n    var fireDetach = function (editor) {\n      return editor.fire('detach');\n    };\n    var fireSwitchMode = function (editor, mode) {\n      return editor.fire('SwitchMode', { mode: mode });\n    };\n    var fireObjectResizeStart = function (editor, target, width, height) {\n      editor.fire('ObjectResizeStart', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var fireObjectResized = function (editor, target, width, height) {\n      editor.fire('ObjectResized', {\n        target: target,\n        width: width,\n        height: height\n      });\n    };\n    var Events = {\n      firePreProcess: firePreProcess,\n      firePostProcess: firePostProcess,\n      fireRemove: fireRemove,\n      fireDetach: fireDetach,\n      fireSwitchMode: fireSwitchMode,\n      fireObjectResizeStart: fireObjectResizeStart,\n      fireObjectResized: fireObjectResized\n    };\n\n    var setEditorCommandState = function (editor, cmd, state) {\n      try {\n        editor.getDoc().execCommand(cmd, false, state);\n      } catch (ex) {\n      }\n    };\n    var toggleClass = function (elm, cls, state) {\n      if (has$2(elm, cls) && state === false) {\n        remove$4(elm, cls);\n      } else if (state) {\n        add$2(elm, cls);\n      }\n    };\n    var toggleReadOnly = function (editor, state) {\n      toggleClass(Element.fromDom(editor.getBody()), 'mce-content-readonly', state);\n      if (state) {\n        editor.selection.controlSelection.hideResizeRect();\n        editor.readonly = true;\n        editor.getBody().contentEditable = 'false';\n      } else {\n        editor.readonly = false;\n        editor.getBody().contentEditable = 'true';\n        setEditorCommandState(editor, 'StyleWithCSS', false);\n        setEditorCommandState(editor, 'enableInlineTableEditing', false);\n        setEditorCommandState(editor, 'enableObjectResizing', false);\n        editor.focus();\n        editor.nodeChanged();\n      }\n    };\n    var setMode = function (editor, mode) {\n      if (mode === getMode(editor)) {\n        return;\n      }\n      if (editor.initialized) {\n        toggleReadOnly(editor, mode === 'readonly');\n      } else {\n        editor.on('init', function () {\n          toggleReadOnly(editor, mode === 'readonly');\n        });\n      }\n      Events.fireSwitchMode(editor, mode);\n    };\n    var getMode = function (editor) {\n      return editor.readonly ? 'readonly' : 'design';\n    };\n    var isReadOnly = function (editor) {\n      return editor.readonly === true;\n    };\n\n    var DOM$1 = DOMUtils$1.DOM;\n    var customEventRootDelegates;\n    var getEventTarget = function (editor, eventName) {\n      if (eventName === 'selectionchange') {\n        return editor.getDoc();\n      }\n      if (!editor.inline && /^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(eventName)) {\n        return editor.getDoc().documentElement;\n      }\n      if (editor.settings.event_root) {\n        if (!editor.eventRoot) {\n          editor.eventRoot = DOM$1.select(editor.settings.event_root)[0];\n        }\n        return editor.eventRoot;\n      }\n      return editor.getBody();\n    };\n    var isListening = function (editor) {\n      return !editor.hidden && !editor.readonly;\n    };\n    var fireEvent = function (editor, eventName, e) {\n      if (isListening(editor)) {\n        editor.fire(eventName, e);\n      } else if (isReadOnly(editor)) {\n        e.preventDefault();\n      }\n    };\n    var bindEventDelegate = function (editor, eventName) {\n      var eventRootElm, delegate;\n      if (!editor.delegates) {\n        editor.delegates = {};\n      }\n      if (editor.delegates[eventName] || editor.removed) {\n        return;\n      }\n      eventRootElm = getEventTarget(editor, eventName);\n      if (editor.settings.event_root) {\n        if (!customEventRootDelegates) {\n          customEventRootDelegates = {};\n          editor.editorManager.on('removeEditor', function () {\n            var name;\n            if (!editor.editorManager.activeEditor) {\n              if (customEventRootDelegates) {\n                for (name in customEventRootDelegates) {\n                  editor.dom.unbind(getEventTarget(editor, name));\n                }\n                customEventRootDelegates = null;\n              }\n            }\n          });\n        }\n        if (customEventRootDelegates[eventName]) {\n          return;\n        }\n        delegate = function (e) {\n          var target = e.target;\n          var editors = editor.editorManager.get();\n          var i = editors.length;\n          while (i--) {\n            var body = editors[i].getBody();\n            if (body === target || DOM$1.isChildOf(target, body)) {\n              fireEvent(editors[i], eventName, e);\n            }\n          }\n        };\n        customEventRootDelegates[eventName] = delegate;\n        DOM$1.bind(eventRootElm, eventName, delegate);\n      } else {\n        delegate = function (e) {\n          fireEvent(editor, eventName, e);\n        };\n        DOM$1.bind(eventRootElm, eventName, delegate);\n        editor.delegates[eventName] = delegate;\n      }\n    };\n    var EditorObservable = {\n      bindPendingEventDelegates: function () {\n        var self = this;\n        Tools.each(self._pendingNativeEvents, function (name) {\n          bindEventDelegate(self, name);\n        });\n      },\n      toggleNativeEvent: function (name, state) {\n        var self = this;\n        if (name === 'focus' || name === 'blur') {\n          return;\n        }\n        if (state) {\n          if (self.initialized) {\n            bindEventDelegate(self, name);\n          } else {\n            if (!self._pendingNativeEvents) {\n              self._pendingNativeEvents = [name];\n            } else {\n              self._pendingNativeEvents.push(name);\n            }\n          }\n        } else if (self.initialized) {\n          self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          delete self.delegates[name];\n        }\n      },\n      unbindAllNativeEvents: function () {\n        var self = this;\n        var body = self.getBody();\n        var dom = self.dom;\n        var name;\n        if (self.delegates) {\n          for (name in self.delegates) {\n            self.dom.unbind(getEventTarget(self, name), name, self.delegates[name]);\n          }\n          delete self.delegates;\n        }\n        if (!self.inline && body && dom) {\n          body.onload = null;\n          dom.unbind(self.getWin());\n          dom.unbind(self.getDoc());\n        }\n        if (dom) {\n          dom.unbind(body);\n          dom.unbind(self.getContainer());\n        }\n      }\n    };\n    EditorObservable = Tools.extend({}, Observable, EditorObservable);\n    var EditorObservable$1 = EditorObservable;\n\n    var sectionResult = Immutable('sections', 'settings');\n    var detection = PlatformDetection$1.detect();\n    var isTouch = detection.deviceType.isTouch();\n    var mobilePlugins = [\n      'lists',\n      'autolink',\n      'autosave'\n    ];\n    var defaultMobileSettings = { theme: 'mobile' };\n    var normalizePlugins = function (plugins) {\n      var pluginNames = isArray(plugins) ? plugins.join(' ') : plugins;\n      var trimmedPlugins = map(isString(pluginNames) ? pluginNames.split(' ') : [], trim$2);\n      return filter(trimmedPlugins, function (item) {\n        return item.length > 0;\n      });\n    };\n    var filterMobilePlugins = function (plugins) {\n      return filter(plugins, curry(contains, mobilePlugins));\n    };\n    var extractSections = function (keys, settings) {\n      var result = bifilter(settings, function (value, key) {\n        return contains(keys, key);\n      });\n      return sectionResult(result.t, result.f);\n    };\n    var getSection = function (sectionResult, name, defaults) {\n      var sections = sectionResult.sections();\n      var sectionSettings = sections.hasOwnProperty(name) ? sections[name] : {};\n      return Tools.extend({}, defaults, sectionSettings);\n    };\n    var hasSection = function (sectionResult, name) {\n      return sectionResult.sections().hasOwnProperty(name);\n    };\n    var getDefaultSettings = function (id, documentBaseUrl, editor) {\n      return {\n        id: id,\n        theme: 'modern',\n        delta_width: 0,\n        delta_height: 0,\n        popup_css: '',\n        plugins: '',\n        document_base_url: documentBaseUrl,\n        add_form_submit_trigger: true,\n        submit_patch: true,\n        add_unload_trigger: true,\n        convert_urls: true,\n        relative_urls: true,\n        remove_script_host: true,\n        object_resizing: true,\n        doctype: '<!DOCTYPE html>',\n        visual: true,\n        font_size_style_values: 'xx-small,x-small,small,medium,large,x-large,xx-large',\n        font_size_legacy_values: 'xx-small,small,medium,large,x-large,xx-large,300%',\n        forced_root_block: 'p',\n        hidden_input: true,\n        render_ui: true,\n        indentation: '40px',\n        inline_styles: true,\n        convert_fonts_to_spans: true,\n        indent: 'simple',\n        indent_before: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        indent_after: 'p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,' + 'tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist',\n        entity_encoding: 'named',\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        ie7_compat: true\n      };\n    };\n    var getExternalPlugins = function (overrideSettings, settings) {\n      var userDefinedExternalPlugins = settings.external_plugins ? settings.external_plugins : {};\n      if (overrideSettings && overrideSettings.external_plugins) {\n        return Tools.extend({}, overrideSettings.external_plugins, userDefinedExternalPlugins);\n      } else {\n        return userDefinedExternalPlugins;\n      }\n    };\n    var combinePlugins = function (forcedPlugins, plugins) {\n      return [].concat(normalizePlugins(forcedPlugins)).concat(normalizePlugins(plugins));\n    };\n    var processPlugins = function (isTouchDevice, sectionResult, defaultOverrideSettings, settings) {\n      var forcedPlugins = normalizePlugins(defaultOverrideSettings.forced_plugins);\n      var plugins = normalizePlugins(settings.plugins);\n      var platformPlugins = isTouchDevice && hasSection(sectionResult, 'mobile') ? filterMobilePlugins(plugins) : plugins;\n      var combinedPlugins = combinePlugins(forcedPlugins, platformPlugins);\n      return Tools.extend(settings, { plugins: combinedPlugins.join(' ') });\n    };\n    var isOnMobile = function (isTouchDevice, sectionResult) {\n      var isInline = sectionResult.settings().inline;\n      return isTouchDevice && hasSection(sectionResult, 'mobile') && !isInline;\n    };\n    var combineSettings = function (isTouchDevice, defaultSettings, defaultOverrideSettings, settings) {\n      var sectionResult = extractSections(['mobile'], settings);\n      var extendedSettings = Tools.extend(defaultSettings, defaultOverrideSettings, sectionResult.settings(), isOnMobile(isTouchDevice, sectionResult) ? getSection(sectionResult, 'mobile', defaultMobileSettings) : {}, {\n        validate: true,\n        content_editable: sectionResult.settings().inline,\n        external_plugins: getExternalPlugins(defaultOverrideSettings, sectionResult.settings())\n      });\n      return processPlugins(isTouchDevice, sectionResult, defaultOverrideSettings, extendedSettings);\n    };\n    var getEditorSettings = function (editor, id, documentBaseUrl, defaultOverrideSettings, settings) {\n      var defaultSettings = getDefaultSettings(id, documentBaseUrl, editor);\n      return combineSettings(isTouch, defaultSettings, defaultOverrideSettings, settings);\n    };\n    var getFiltered = function (predicate, editor, name) {\n      return Option.from(editor.settings[name]).filter(predicate);\n    };\n    var getParamObject = function (value) {\n      var output = {};\n      if (typeof value === 'string') {\n        each(value.indexOf('=') > 0 ? value.split(/[;,](?![^=;,]*(?:[;,]|$))/) : value.split(','), function (val) {\n          var arr = val.split('=');\n          if (arr.length > 1) {\n            output[Tools.trim(arr[0])] = Tools.trim(arr[1]);\n          } else {\n            output[Tools.trim(arr[0])] = Tools.trim(arr);\n          }\n        });\n      } else {\n        output = value;\n      }\n      return output;\n    };\n    var isArrayOf = function (p) {\n      return function (a) {\n        return isArray(a) && forall(a, p);\n      };\n    };\n    var getParam = function (editor, name, defaultVal, type) {\n      var value = name in editor.settings ? editor.settings[name] : defaultVal;\n      if (type === 'hash') {\n        return getParamObject(value);\n      } else if (type === 'string') {\n        return getFiltered(isString, editor, name).getOr(defaultVal);\n      } else if (type === 'number') {\n        return getFiltered(isNumber, editor, name).getOr(defaultVal);\n      } else if (type === 'boolean') {\n        return getFiltered(isBoolean, editor, name).getOr(defaultVal);\n      } else if (type === 'object') {\n        return getFiltered(isObject, editor, name).getOr(defaultVal);\n      } else if (type === 'array') {\n        return getFiltered(isArray, editor, name).getOr(defaultVal);\n      } else if (type === 'string[]') {\n        return getFiltered(isArrayOf(isString), editor, name).getOr(defaultVal);\n      } else if (type === 'function') {\n        return getFiltered(isFunction, editor, name).getOr(defaultVal);\n      } else {\n        return value;\n      }\n    };\n\n    var each$b = Tools.each, explode$2 = Tools.explode;\n    var keyCodeLookup = {\n      f1: 112,\n      f2: 113,\n      f3: 114,\n      f4: 115,\n      f5: 116,\n      f6: 117,\n      f7: 118,\n      f8: 119,\n      f9: 120,\n      f10: 121,\n      f11: 122,\n      f12: 123\n    };\n    var modifierNames = Tools.makeMap('alt,ctrl,shift,meta,access');\n    function Shortcuts (editor) {\n      var self = this;\n      var shortcuts = {};\n      var pendingPatterns = [];\n      var parseShortcut = function (pattern) {\n        var id, key;\n        var shortcut = {};\n        each$b(explode$2(pattern, '+'), function (value) {\n          if (value in modifierNames) {\n            shortcut[value] = true;\n          } else {\n            if (/^[0-9]{2,}$/.test(value)) {\n              shortcut.keyCode = parseInt(value, 10);\n            } else {\n              shortcut.charCode = value.charCodeAt(0);\n              shortcut.keyCode = keyCodeLookup[value] || value.toUpperCase().charCodeAt(0);\n            }\n          }\n        });\n        id = [shortcut.keyCode];\n        for (key in modifierNames) {\n          if (shortcut[key]) {\n            id.push(key);\n          } else {\n            shortcut[key] = false;\n          }\n        }\n        shortcut.id = id.join(',');\n        if (shortcut.access) {\n          shortcut.alt = true;\n          if (Env.mac) {\n            shortcut.ctrl = true;\n          } else {\n            shortcut.shift = true;\n          }\n        }\n        if (shortcut.meta) {\n          if (Env.mac) {\n            shortcut.meta = true;\n          } else {\n            shortcut.ctrl = true;\n            shortcut.meta = false;\n          }\n        }\n        return shortcut;\n      };\n      var createShortcut = function (pattern, desc, cmdFunc, scope) {\n        var shortcuts;\n        shortcuts = Tools.map(explode$2(pattern, '>'), parseShortcut);\n        shortcuts[shortcuts.length - 1] = Tools.extend(shortcuts[shortcuts.length - 1], {\n          func: cmdFunc,\n          scope: scope || editor\n        });\n        return Tools.extend(shortcuts[0], {\n          desc: editor.translate(desc),\n          subpatterns: shortcuts.slice(1)\n        });\n      };\n      var hasModifier = function (e) {\n        return e.altKey || e.ctrlKey || e.metaKey;\n      };\n      var isFunctionKey = function (e) {\n        return e.type === 'keydown' && e.keyCode >= 112 && e.keyCode <= 123;\n      };\n      var matchShortcut = function (e, shortcut) {\n        if (!shortcut) {\n          return false;\n        }\n        if (shortcut.ctrl !== e.ctrlKey || shortcut.meta !== e.metaKey) {\n          return false;\n        }\n        if (shortcut.alt !== e.altKey || shortcut.shift !== e.shiftKey) {\n          return false;\n        }\n        if (e.keyCode === shortcut.keyCode || e.charCode && e.charCode === shortcut.charCode) {\n          e.preventDefault();\n          return true;\n        }\n        return false;\n      };\n      var executeShortcutAction = function (shortcut) {\n        return shortcut.func ? shortcut.func.call(shortcut.scope) : null;\n      };\n      editor.on('keyup keypress keydown', function (e) {\n        if ((hasModifier(e) || isFunctionKey(e)) && !e.isDefaultPrevented()) {\n          each$b(shortcuts, function (shortcut) {\n            if (matchShortcut(e, shortcut)) {\n              pendingPatterns = shortcut.subpatterns.slice(0);\n              if (e.type === 'keydown') {\n                executeShortcutAction(shortcut);\n              }\n              return true;\n            }\n          });\n          if (matchShortcut(e, pendingPatterns[0])) {\n            if (pendingPatterns.length === 1) {\n              if (e.type === 'keydown') {\n                executeShortcutAction(pendingPatterns[0]);\n              }\n            }\n            pendingPatterns.shift();\n          }\n        }\n      });\n      self.add = function (pattern, desc, cmdFunc, scope) {\n        var cmd;\n        cmd = cmdFunc;\n        if (typeof cmdFunc === 'string') {\n          cmdFunc = function () {\n            editor.execCommand(cmd, false, null);\n          };\n        } else if (Tools.isArray(cmd)) {\n          cmdFunc = function () {\n            editor.execCommand(cmd[0], cmd[1], cmd[2]);\n          };\n        }\n        each$b(explode$2(Tools.trim(pattern.toLowerCase())), function (pattern) {\n          var shortcut = createShortcut(pattern, desc, cmdFunc, scope);\n          shortcuts[shortcut.id] = shortcut;\n        });\n        return true;\n      };\n      self.remove = function (pattern) {\n        var shortcut = createShortcut(pattern);\n        if (shortcuts[shortcut.id]) {\n          delete shortcuts[shortcut.id];\n          return true;\n        }\n        return false;\n      };\n    }\n\n    var hasFocus = function (element) {\n      var doc = owner(element).dom();\n      return element.dom() === doc.activeElement;\n    };\n    var active = function (_doc) {\n      var doc = _doc !== undefined ? _doc.dom() : domGlobals.document;\n      return Option.from(doc.activeElement).map(Element.fromDom);\n    };\n    var search = function (element) {\n      return active(owner(element)).filter(function (e) {\n        return element.dom().contains(e.dom());\n      });\n    };\n\n    var getContentEditableHost = function (editor, node) {\n      return editor.dom.getParent(node, function (node) {\n        return editor.dom.getContentEditable(node) === 'true';\n      });\n    };\n    var getCollapsedNode = function (rng) {\n      return rng.collapsed ? Option.from(getNode(rng.startContainer, rng.startOffset)).map(Element.fromDom) : Option.none();\n    };\n    var getFocusInElement = function (root, rng) {\n      return getCollapsedNode(rng).bind(function (node) {\n        if (isTableSection(node)) {\n          return Option.some(node);\n        } else if (contains$3(root, node) === false) {\n          return Option.some(root);\n        } else {\n          return Option.none();\n        }\n      });\n    };\n    var normalizeSelection = function (editor, rng) {\n      getFocusInElement(Element.fromDom(editor.getBody()), rng).bind(function (elm) {\n        return CaretFinder.firstPositionIn(elm.dom());\n      }).fold(function () {\n        editor.selection.normalize();\n        return;\n      }, function (caretPos) {\n        return editor.selection.setRng(caretPos.toRange());\n      });\n    };\n    var focusBody = function (body) {\n      if (body.setActive) {\n        try {\n          body.setActive();\n        } catch (ex) {\n          body.focus();\n        }\n      } else {\n        body.focus();\n      }\n    };\n    var hasElementFocus = function (elm) {\n      return hasFocus(elm) || search(elm).isSome();\n    };\n    var hasIframeFocus = function (editor) {\n      return editor.iframeElement && hasFocus(Element.fromDom(editor.iframeElement));\n    };\n    var hasInlineFocus = function (editor) {\n      var rawBody = editor.getBody();\n      return rawBody && hasElementFocus(Element.fromDom(rawBody));\n    };\n    var hasFocus$1 = function (editor) {\n      return editor.inline ? hasInlineFocus(editor) : hasIframeFocus(editor);\n    };\n    var focusEditor = function (editor) {\n      var selection = editor.selection, contentEditable = editor.settings.content_editable;\n      var body = editor.getBody();\n      var rng = selection.getRng();\n      editor.quirks.refreshContentEditable();\n      var contentEditableHost = getContentEditableHost(editor, selection.getNode());\n      if (editor.$.contains(body, contentEditableHost)) {\n        focusBody(contentEditableHost);\n        normalizeSelection(editor, rng);\n        activateEditor(editor);\n        return;\n      }\n      if (editor.bookmark !== undefined && hasFocus$1(editor) === false) {\n        SelectionBookmark.getRng(editor).each(function (bookmarkRng) {\n          editor.selection.setRng(bookmarkRng);\n          rng = bookmarkRng;\n        });\n      }\n      if (!contentEditable) {\n        if (!Env.opera) {\n          focusBody(body);\n        }\n        editor.getWin().focus();\n      }\n      if (Env.gecko || contentEditable) {\n        focusBody(body);\n        normalizeSelection(editor, rng);\n      }\n      activateEditor(editor);\n    };\n    var activateEditor = function (editor) {\n      return editor.editorManager.setActive(editor);\n    };\n    var focus = function (editor, skipFocus) {\n      if (editor.removed) {\n        return;\n      }\n      skipFocus ? activateEditor(editor) : focusEditor(editor);\n    };\n    var EditorFocus = {\n      focus: focus,\n      hasFocus: hasFocus$1\n    };\n\n    var getProp = function (propName, elm) {\n      var rawElm = elm.dom();\n      return rawElm[propName];\n    };\n    var getComputedSizeProp = function (propName, elm) {\n      return parseInt(get$1(elm, propName), 10);\n    };\n    var getClientWidth = curry(getProp, 'clientWidth');\n    var getClientHeight = curry(getProp, 'clientHeight');\n    var getMarginTop = curry(getComputedSizeProp, 'margin-top');\n    var getMarginLeft = curry(getComputedSizeProp, 'margin-left');\n    var getBoundingClientRect$1 = function (elm) {\n      return elm.dom().getBoundingClientRect();\n    };\n    var isInsideElementContentArea = function (bodyElm, clientX, clientY) {\n      var clientWidth = getClientWidth(bodyElm);\n      var clientHeight = getClientHeight(bodyElm);\n      return clientX >= 0 && clientY >= 0 && clientX <= clientWidth && clientY <= clientHeight;\n    };\n    var transpose = function (inline, elm, clientX, clientY) {\n      var clientRect = getBoundingClientRect$1(elm);\n      var deltaX = inline ? clientRect.left + elm.dom().clientLeft + getMarginLeft(elm) : 0;\n      var deltaY = inline ? clientRect.top + elm.dom().clientTop + getMarginTop(elm) : 0;\n      var x = clientX - deltaX;\n      var y = clientY - deltaY;\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var isXYInContentArea = function (editor, clientX, clientY) {\n      var bodyElm = Element.fromDom(editor.getBody());\n      var targetElm = editor.inline ? bodyElm : documentElement(bodyElm);\n      var transposedPoint = transpose(editor.inline, targetElm, clientX, clientY);\n      return isInsideElementContentArea(targetElm, transposedPoint.x, transposedPoint.y);\n    };\n    var fromDomSafe = function (node) {\n      return Option.from(node).map(Element.fromDom);\n    };\n    var isEditorAttachedToDom = function (editor) {\n      var rawContainer = editor.inline ? editor.getBody() : editor.getContentAreaContainer();\n      return fromDomSafe(rawContainer).map(function (container) {\n        return contains$3(owner(container), container);\n      }).getOr(false);\n    };\n    var EditorView = {\n      isXYInContentArea: isXYInContentArea,\n      isEditorAttachedToDom: isEditorAttachedToDom\n    };\n\n    function NotificationManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a NotificationManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        close: unimplemented,\n        reposition: unimplemented,\n        getArgs: unimplemented\n      };\n    }\n\n    function NotificationManager (editor) {\n      var notifications = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getNotificationManagerImpl ? theme.getNotificationManagerImpl() : NotificationManagerImpl();\n      };\n      var getTopNotification = function () {\n        return Option.from(notifications[0]);\n      };\n      var isEqual = function (a, b) {\n        return a.type === b.type && a.text === b.text && !a.progressBar && !a.timeout && !b.progressBar && !b.timeout;\n      };\n      var reposition = function () {\n        if (notifications.length > 0) {\n          getImplementation().reposition(notifications);\n        }\n      };\n      var addNotification = function (notification) {\n        notifications.push(notification);\n      };\n      var closeNotification = function (notification) {\n        findIndex(notifications, function (otherNotification) {\n          return otherNotification === notification;\n        }).each(function (index) {\n          notifications.splice(index, 1);\n        });\n      };\n      var open = function (args) {\n        if (editor.removed || !EditorView.isEditorAttachedToDom(editor)) {\n          return;\n        }\n        return find(notifications, function (notification) {\n          return isEqual(getImplementation().getArgs(notification), args);\n        }).getOrThunk(function () {\n          editor.editorManager.setActive(editor);\n          var notification = getImplementation().open(args, function () {\n            closeNotification(notification);\n            reposition();\n          });\n          addNotification(notification);\n          reposition();\n          return notification;\n        });\n      };\n      var close = function () {\n        getTopNotification().each(function (notification) {\n          getImplementation().close(notification);\n          closeNotification(notification);\n          reposition();\n        });\n      };\n      var getNotifications = function () {\n        return notifications;\n      };\n      var registerEvents = function (editor) {\n        editor.on('SkinLoaded', function () {\n          var serviceMessage = editor.settings.service_message;\n          if (serviceMessage) {\n            open({\n              text: serviceMessage,\n              type: 'warning',\n              timeout: 0,\n              icon: ''\n            });\n          }\n        });\n        editor.on('ResizeEditor ResizeWindow', function () {\n          Delay.requestAnimationFrame(reposition);\n        });\n        editor.on('remove', function () {\n          each(notifications.slice(), function (notification) {\n            getImplementation().close(notification);\n          });\n        });\n      };\n      registerEvents(editor);\n      return {\n        open: open,\n        close: close,\n        getNotifications: getNotifications\n      };\n    }\n\n    function WindowManagerImpl () {\n      var unimplemented = function () {\n        throw new Error('Theme did not provide a WindowManager implementation.');\n      };\n      return {\n        open: unimplemented,\n        alert: unimplemented,\n        confirm: unimplemented,\n        close: unimplemented,\n        getParams: unimplemented,\n        setParams: unimplemented\n      };\n    }\n\n    function WindowManager (editor) {\n      var windows = [];\n      var getImplementation = function () {\n        var theme = editor.theme;\n        return theme && theme.getWindowManagerImpl ? theme.getWindowManagerImpl() : WindowManagerImpl();\n      };\n      var funcBind = function (scope, f) {\n        return function () {\n          return f ? f.apply(scope, arguments) : undefined;\n        };\n      };\n      var fireOpenEvent = function (win) {\n        editor.fire('OpenWindow', { win: win });\n      };\n      var fireCloseEvent = function (win) {\n        editor.fire('CloseWindow', { win: win });\n      };\n      var addWindow = function (win) {\n        windows.push(win);\n        fireOpenEvent(win);\n      };\n      var closeWindow = function (win) {\n        findIndex(windows, function (otherWindow) {\n          return otherWindow === win;\n        }).each(function (index) {\n          windows.splice(index, 1);\n          fireCloseEvent(win);\n          if (windows.length === 0) {\n            editor.focus();\n          }\n        });\n      };\n      var getTopWindow = function () {\n        return Option.from(windows[windows.length - 1]);\n      };\n      var open = function (args, params) {\n        editor.editorManager.setActive(editor);\n        SelectionBookmark.store(editor);\n        var win = getImplementation().open(args, params, closeWindow);\n        addWindow(win);\n        return win;\n      };\n      var alert = function (message, callback, scope) {\n        var win = getImplementation().alert(message, funcBind(scope ? scope : this, callback), closeWindow);\n        addWindow(win);\n      };\n      var confirm = function (message, callback, scope) {\n        var win = getImplementation().confirm(message, funcBind(scope ? scope : this, callback), closeWindow);\n        addWindow(win);\n      };\n      var close = function () {\n        getTopWindow().each(function (win) {\n          getImplementation().close(win);\n          closeWindow(win);\n        });\n      };\n      var getParams = function () {\n        return getTopWindow().map(getImplementation().getParams).getOr(null);\n      };\n      var setParams = function (params) {\n        getTopWindow().each(function (win) {\n          getImplementation().setParams(win, params);\n        });\n      };\n      var getWindows = function () {\n        return windows;\n      };\n      editor.on('remove', function () {\n        each(windows.slice(0), function (win) {\n          getImplementation().close(win);\n        });\n      });\n      return {\n        windows: windows,\n        open: open,\n        alert: alert,\n        confirm: confirm,\n        close: close,\n        getParams: getParams,\n        setParams: setParams,\n        getWindows: getWindows\n      };\n    }\n\n    var data = {};\n    var code = 'en';\n    var I18n = {\n      setCode: function (newCode) {\n        if (newCode) {\n          code = newCode;\n          this.rtl = this.data[newCode] ? this.data[newCode]._dir === 'rtl' : false;\n        }\n      },\n      getCode: function () {\n        return code;\n      },\n      rtl: false,\n      add: function (code, items) {\n        var langData = data[code];\n        if (!langData) {\n          data[code] = langData = {};\n        }\n        for (var name in items) {\n          langData[name] = items[name];\n        }\n        this.setCode(code);\n      },\n      translate: function (text) {\n        var langData = data[code] || {};\n        var toString = function (obj) {\n          if (Tools.is(obj, 'function')) {\n            return Object.prototype.toString.call(obj);\n          }\n          return !isEmpty(obj) ? '' + obj : '';\n        };\n        var isEmpty = function (text) {\n          return text === '' || text === null || Tools.is(text, 'undefined');\n        };\n        var getLangData = function (text) {\n          text = toString(text);\n          return Tools.hasOwn(langData, text) ? toString(langData[text]) : text;\n        };\n        if (isEmpty(text)) {\n          return '';\n        }\n        if (Tools.is(text, 'object') && Tools.hasOwn(text, 'raw')) {\n          return toString(text.raw);\n        }\n        if (Tools.is(text, 'array')) {\n          var values_1 = text.slice(1);\n          text = getLangData(text[0]).replace(/\\{([0-9]+)\\}/g, function ($1, $2) {\n            return Tools.hasOwn(values_1, $2) ? toString(values_1[$2]) : $1;\n          });\n        }\n        return getLangData(text).replace(/{context:\\w+}$/, '');\n      },\n      data: data\n    };\n\n    var PluginManager = AddOnManager.PluginManager;\n    var resolvePluginName = function (targetUrl, suffix) {\n      for (var name in PluginManager.urls) {\n        var matchUrl = PluginManager.urls[name] + '/plugin' + suffix + '.js';\n        if (matchUrl === targetUrl) {\n          return name;\n        }\n      }\n      return null;\n    };\n    var pluginUrlToMessage = function (editor, url) {\n      var plugin = resolvePluginName(url, editor.suffix);\n      return plugin ? I18n.translate([\n        'Failed to load plugin: {0} from url {1}',\n        plugin,\n        url\n      ]) : I18n.translate([\n        'Failed to load plugin url: {0}',\n        url\n      ]);\n    };\n    var displayNotification = function (editor, message) {\n      editor.notificationManager.open({\n        type: 'error',\n        text: message\n      });\n    };\n    var displayError = function (editor, message) {\n      if (editor._skinLoaded) {\n        displayNotification(editor, message);\n      } else {\n        editor.on('SkinLoaded', function () {\n          displayNotification(editor, message);\n        });\n      }\n    };\n    var uploadError = function (editor, message) {\n      displayError(editor, I18n.translate([\n        'Failed to upload image: {0}',\n        message\n      ]));\n    };\n    var pluginLoadError = function (editor, url) {\n      displayError(editor, pluginUrlToMessage(editor, url));\n    };\n    var pluginInitError = function (editor, name, err) {\n      var message = I18n.translate([\n        'Failed to initialize plugin: {0}',\n        name\n      ]);\n      initError(message, err);\n      displayError(editor, message);\n    };\n    var initError = function (message) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var console = domGlobals.window.console;\n      if (console) {\n        if (console.error) {\n          console.error.apply(console, arguments);\n        } else {\n          console.log.apply(console, arguments);\n        }\n      }\n    };\n    var ErrorReporter = {\n      pluginLoadError: pluginLoadError,\n      pluginInitError: pluginInitError,\n      uploadError: uploadError,\n      displayError: displayError,\n      initError: initError\n    };\n\n    var PluginManager$1 = AddOnManager.PluginManager;\n\n    var ThemeManager = AddOnManager.ThemeManager;\n\n    function XMLHttpRequest () {\n      var f = Global$1.getOrDie('XMLHttpRequest');\n      return new f();\n    }\n\n    function Uploader (uploadStatus, settings) {\n      var pendingPromises = {};\n      var pathJoin = function (path1, path2) {\n        if (path1) {\n          return path1.replace(/\\/$/, '') + '/' + path2.replace(/^\\//, '');\n        }\n        return path2;\n      };\n      var defaultHandler = function (blobInfo, success, failure, progress) {\n        var xhr, formData;\n        xhr = XMLHttpRequest();\n        xhr.open('POST', settings.url);\n        xhr.withCredentials = settings.credentials;\n        xhr.upload.onprogress = function (e) {\n          progress(e.loaded / e.total * 100);\n        };\n        xhr.onerror = function () {\n          failure('Image upload failed due to a XHR Transport error. Code: ' + xhr.status);\n        };\n        xhr.onload = function () {\n          var json;\n          if (xhr.status < 200 || xhr.status >= 300) {\n            failure('HTTP Error: ' + xhr.status);\n            return;\n          }\n          json = JSON.parse(xhr.responseText);\n          if (!json || typeof json.location !== 'string') {\n            failure('Invalid JSON: ' + xhr.responseText);\n            return;\n          }\n          success(pathJoin(settings.basePath, json.location));\n        };\n        formData = new domGlobals.FormData();\n        formData.append('file', blobInfo.blob(), blobInfo.filename());\n        xhr.send(formData);\n      };\n      var noUpload = function () {\n        return new promiseObj(function (resolve) {\n          resolve([]);\n        });\n      };\n      var handlerSuccess = function (blobInfo, url) {\n        return {\n          url: url,\n          blobInfo: blobInfo,\n          status: true\n        };\n      };\n      var handlerFailure = function (blobInfo, error) {\n        return {\n          url: '',\n          blobInfo: blobInfo,\n          status: false,\n          error: error\n        };\n      };\n      var resolvePending = function (blobUri, result) {\n        Tools.each(pendingPromises[blobUri], function (resolve) {\n          resolve(result);\n        });\n        delete pendingPromises[blobUri];\n      };\n      var uploadBlobInfo = function (blobInfo, handler, openNotification) {\n        uploadStatus.markPending(blobInfo.blobUri());\n        return new promiseObj(function (resolve) {\n          var notification, progress;\n          var noop = function () {\n          };\n          try {\n            var closeNotification_1 = function () {\n              if (notification) {\n                notification.close();\n                progress = noop;\n              }\n            };\n            var success = function (url) {\n              closeNotification_1();\n              uploadStatus.markUploaded(blobInfo.blobUri(), url);\n              resolvePending(blobInfo.blobUri(), handlerSuccess(blobInfo, url));\n              resolve(handlerSuccess(blobInfo, url));\n            };\n            var failure = function (error) {\n              closeNotification_1();\n              uploadStatus.removeFailed(blobInfo.blobUri());\n              resolvePending(blobInfo.blobUri(), handlerFailure(blobInfo, error));\n              resolve(handlerFailure(blobInfo, error));\n            };\n            progress = function (percent) {\n              if (percent < 0 || percent > 100) {\n                return;\n              }\n              if (!notification) {\n                notification = openNotification();\n              }\n              notification.progressBar.value(percent);\n            };\n            handler(blobInfo, success, failure, progress);\n          } catch (ex) {\n            resolve(handlerFailure(blobInfo, ex.message));\n          }\n        });\n      };\n      var isDefaultHandler = function (handler) {\n        return handler === defaultHandler;\n      };\n      var pendingUploadBlobInfo = function (blobInfo) {\n        var blobUri = blobInfo.blobUri();\n        return new promiseObj(function (resolve) {\n          pendingPromises[blobUri] = pendingPromises[blobUri] || [];\n          pendingPromises[blobUri].push(resolve);\n        });\n      };\n      var uploadBlobs = function (blobInfos, openNotification) {\n        blobInfos = Tools.grep(blobInfos, function (blobInfo) {\n          return !uploadStatus.isUploaded(blobInfo.blobUri());\n        });\n        return promiseObj.all(Tools.map(blobInfos, function (blobInfo) {\n          return uploadStatus.isPending(blobInfo.blobUri()) ? pendingUploadBlobInfo(blobInfo) : uploadBlobInfo(blobInfo, settings.handler, openNotification);\n        }));\n      };\n      var upload = function (blobInfos, openNotification) {\n        return !settings.url && isDefaultHandler(settings.handler) ? noUpload() : uploadBlobs(blobInfos, openNotification);\n      };\n      if (isFunction(settings.handler) === false) {\n        settings.handler = defaultHandler;\n      }\n      return { upload: upload };\n    }\n\n    function FileReader () {\n      var f = Global$1.getOrDie('FileReader');\n      return new f();\n    }\n\n    function Uint8Array (arr) {\n      var f = Global$1.getOrDie('Uint8Array');\n      return new f(arr);\n    }\n\n    var requestAnimationFrame$1 = function (callback) {\n      var f = Global$1.getOrDie('requestAnimationFrame');\n      f(callback);\n    };\n    var atob = function (base64) {\n      var f = Global$1.getOrDie('atob');\n      return f(base64);\n    };\n    var Window = {\n      atob: atob,\n      requestAnimationFrame: requestAnimationFrame$1\n    };\n\n    var blobUriToBlob = function (url) {\n      return new promiseObj(function (resolve, reject) {\n        var rejectWithError = function () {\n          reject('Cannot convert ' + url + ' to Blob. Resource might not exist or is inaccessible.');\n        };\n        try {\n          var xhr = XMLHttpRequest();\n          xhr.open('GET', url, true);\n          xhr.responseType = 'blob';\n          xhr.onload = function () {\n            if (this.status === 200) {\n              resolve(this.response);\n            } else {\n              rejectWithError();\n            }\n          };\n          xhr.onerror = rejectWithError;\n          xhr.send();\n        } catch (ex) {\n          rejectWithError();\n        }\n      });\n    };\n    var parseDataUri = function (uri) {\n      var type, matches;\n      var uriParts = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uriParts[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uriParts[1]\n      };\n    };\n    var dataUriToBlob = function (uri) {\n      return new promiseObj(function (resolve) {\n        var str, arr, i;\n        var uriParts = parseDataUri(uri);\n        try {\n          str = Window.atob(uriParts.data);\n        } catch (e) {\n          resolve(new domGlobals.Blob([]));\n          return;\n        }\n        arr = Uint8Array(str.length);\n        for (i = 0; i < arr.length; i++) {\n          arr[i] = str.charCodeAt(i);\n        }\n        resolve(new domGlobals.Blob([arr], { type: uriParts.type }));\n      });\n    };\n    var uriToBlob = function (url) {\n      if (url.indexOf('blob:') === 0) {\n        return blobUriToBlob(url);\n      }\n      if (url.indexOf('data:') === 0) {\n        return dataUriToBlob(url);\n      }\n      return null;\n    };\n    var blobToDataUri = function (blob) {\n      return new promiseObj(function (resolve) {\n        var reader = FileReader();\n        reader.onloadend = function () {\n          resolve(reader.result);\n        };\n        reader.readAsDataURL(blob);\n      });\n    };\n    var Conversions = {\n      uriToBlob: uriToBlob,\n      blobToDataUri: blobToDataUri,\n      parseDataUri: parseDataUri\n    };\n\n    var count = 0;\n    var uniqueId = function (prefix) {\n      return (prefix || 'blobid') + count++;\n    };\n    var imageToBlobInfo = function (blobCache, img, resolve, reject) {\n      var base64, blobInfo;\n      if (img.src.indexOf('blob:') === 0) {\n        blobInfo = blobCache.getByUri(img.src);\n        if (blobInfo) {\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        } else {\n          Conversions.uriToBlob(img.src).then(function (blob) {\n            Conversions.blobToDataUri(blob).then(function (dataUri) {\n              base64 = Conversions.parseDataUri(dataUri).data;\n              blobInfo = blobCache.create(uniqueId(), blob, base64);\n              blobCache.add(blobInfo);\n              resolve({\n                image: img,\n                blobInfo: blobInfo\n              });\n            });\n          }, function (err) {\n            reject(err);\n          });\n        }\n        return;\n      }\n      base64 = Conversions.parseDataUri(img.src).data;\n      blobInfo = blobCache.findFirst(function (cachedBlobInfo) {\n        return cachedBlobInfo.base64() === base64;\n      });\n      if (blobInfo) {\n        resolve({\n          image: img,\n          blobInfo: blobInfo\n        });\n      } else {\n        Conversions.uriToBlob(img.src).then(function (blob) {\n          blobInfo = blobCache.create(uniqueId(), blob, base64);\n          blobCache.add(blobInfo);\n          resolve({\n            image: img,\n            blobInfo: blobInfo\n          });\n        }, function (err) {\n          reject(err);\n        });\n      }\n    };\n    var getAllImages = function (elm) {\n      return elm ? from$1(elm.getElementsByTagName('img')) : [];\n    };\n    function ImageScanner (uploadStatus, blobCache) {\n      var cachedPromises = {};\n      var findAll = function (elm, predicate) {\n        var images;\n        if (!predicate) {\n          predicate = constant(true);\n        }\n        images = filter(getAllImages(elm), function (img) {\n          var src = img.src;\n          if (!Env.fileApi) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-bogus')) {\n            return false;\n          }\n          if (img.hasAttribute('data-mce-placeholder')) {\n            return false;\n          }\n          if (!src || src === Env.transparentSrc) {\n            return false;\n          }\n          if (src.indexOf('blob:') === 0) {\n            return !uploadStatus.isUploaded(src) && predicate(img);\n          }\n          if (src.indexOf('data:') === 0) {\n            return predicate(img);\n          }\n          return false;\n        });\n        var promises = map(images, function (img) {\n          if (cachedPromises[img.src]) {\n            return new promiseObj(function (resolve) {\n              cachedPromises[img.src].then(function (imageInfo) {\n                if (typeof imageInfo === 'string') {\n                  return imageInfo;\n                }\n                resolve({\n                  image: img,\n                  blobInfo: imageInfo.blobInfo\n                });\n              });\n            });\n          }\n          var newPromise = new promiseObj(function (resolve, reject) {\n            imageToBlobInfo(blobCache, img, resolve, reject);\n          }).then(function (result) {\n            delete cachedPromises[result.image.src];\n            return result;\n          }).catch(function (error) {\n            delete cachedPromises[img.src];\n            return error;\n          });\n          cachedPromises[img.src] = newPromise;\n          return newPromise;\n        });\n        return promiseObj.all(promises);\n      };\n      return { findAll: findAll };\n    }\n\n    var count$1 = 0;\n    var seed = function () {\n      var rnd = function () {\n        return Math.round(Math.random() * 4294967295).toString(36);\n      };\n      var now = new Date().getTime();\n      return 's' + now.toString(36) + rnd() + rnd() + rnd();\n    };\n    var uuid = function (prefix) {\n      return prefix + count$1++ + seed();\n    };\n    var Uuid = { uuid: uuid };\n\n    function BlobCache () {\n      var cache = [];\n      var mimeToExt = function (mime) {\n        var mimes = {\n          'image/jpeg': 'jpg',\n          'image/jpg': 'jpg',\n          'image/gif': 'gif',\n          'image/png': 'png'\n        };\n        return mimes[mime.toLowerCase()] || 'dat';\n      };\n      var create = function (o, blob, base64, filename) {\n        if (isString(o)) {\n          var id = o;\n          return toBlobInfo({\n            id: id,\n            name: filename,\n            blob: blob,\n            base64: base64\n          });\n        } else if (isObject(o)) {\n          return toBlobInfo(o);\n        } else {\n          throw new Error('Unknown input type');\n        }\n      };\n      var toBlobInfo = function (o) {\n        var id, name;\n        if (!o.blob || !o.base64) {\n          throw new Error('blob and base64 representations of the image are required for BlobInfo to be created');\n        }\n        id = o.id || Uuid.uuid('blobid');\n        name = o.name || id;\n        return {\n          id: constant(id),\n          name: constant(name),\n          filename: constant(name + '.' + mimeToExt(o.blob.type)),\n          blob: constant(o.blob),\n          base64: constant(o.base64),\n          blobUri: constant(o.blobUri || URL.createObjectURL(o.blob)),\n          uri: constant(o.uri)\n        };\n      };\n      var add = function (blobInfo) {\n        if (!get(blobInfo.id())) {\n          cache.push(blobInfo);\n        }\n      };\n      var get = function (id) {\n        return findFirst(function (cachedBlobInfo) {\n          return cachedBlobInfo.id() === id;\n        });\n      };\n      var findFirst = function (predicate) {\n        return filter(cache, predicate)[0];\n      };\n      var getByUri = function (blobUri) {\n        return findFirst(function (blobInfo) {\n          return blobInfo.blobUri() === blobUri;\n        });\n      };\n      var removeByUri = function (blobUri) {\n        cache = filter(cache, function (blobInfo) {\n          if (blobInfo.blobUri() === blobUri) {\n            URL.revokeObjectURL(blobInfo.blobUri());\n            return false;\n          }\n          return true;\n        });\n      };\n      var destroy = function () {\n        each(cache, function (cachedBlobInfo) {\n          URL.revokeObjectURL(cachedBlobInfo.blobUri());\n        });\n        cache = [];\n      };\n      return {\n        create: create,\n        add: add,\n        get: get,\n        getByUri: getByUri,\n        findFirst: findFirst,\n        removeByUri: removeByUri,\n        destroy: destroy\n      };\n    }\n\n    function UploadStatus () {\n      var PENDING = 1, UPLOADED = 2;\n      var blobUriStatuses = {};\n      var createStatus = function (status, resultUri) {\n        return {\n          status: status,\n          resultUri: resultUri\n        };\n      };\n      var hasBlobUri = function (blobUri) {\n        return blobUri in blobUriStatuses;\n      };\n      var getResultUri = function (blobUri) {\n        var result = blobUriStatuses[blobUri];\n        return result ? result.resultUri : null;\n      };\n      var isPending = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === PENDING : false;\n      };\n      var isUploaded = function (blobUri) {\n        return hasBlobUri(blobUri) ? blobUriStatuses[blobUri].status === UPLOADED : false;\n      };\n      var markPending = function (blobUri) {\n        blobUriStatuses[blobUri] = createStatus(PENDING, null);\n      };\n      var markUploaded = function (blobUri, resultUri) {\n        blobUriStatuses[blobUri] = createStatus(UPLOADED, resultUri);\n      };\n      var removeFailed = function (blobUri) {\n        delete blobUriStatuses[blobUri];\n      };\n      var destroy = function () {\n        blobUriStatuses = {};\n      };\n      return {\n        hasBlobUri: hasBlobUri,\n        getResultUri: getResultUri,\n        isPending: isPending,\n        isUploaded: isUploaded,\n        markPending: markPending,\n        markUploaded: markUploaded,\n        removeFailed: removeFailed,\n        destroy: destroy\n      };\n    }\n\n    function EditorUpload (editor) {\n      var blobCache = BlobCache();\n      var uploader, imageScanner;\n      var uploadStatus = UploadStatus();\n      var urlFilters = [];\n      var aliveGuard = function (callback) {\n        return function (result) {\n          if (editor.selection) {\n            return callback(result);\n          }\n          return [];\n        };\n      };\n      var cacheInvalidator = function () {\n        return '?' + new Date().getTime();\n      };\n      var replaceString = function (content, search, replace) {\n        var index = 0;\n        do {\n          index = content.indexOf(search, index);\n          if (index !== -1) {\n            content = content.substring(0, index) + replace + content.substr(index + search.length);\n            index += replace.length - search.length + 1;\n          }\n        } while (index !== -1);\n        return content;\n      };\n      var replaceImageUrl = function (content, targetUrl, replacementUrl) {\n        content = replaceString(content, 'src=\"' + targetUrl + '\"', 'src=\"' + replacementUrl + '\"');\n        content = replaceString(content, 'data-mce-src=\"' + targetUrl + '\"', 'data-mce-src=\"' + replacementUrl + '\"');\n        return content;\n      };\n      var replaceUrlInUndoStack = function (targetUrl, replacementUrl) {\n        each(editor.undoManager.data, function (level) {\n          if (level.type === 'fragmented') {\n            level.fragments = map(level.fragments, function (fragment) {\n              return replaceImageUrl(fragment, targetUrl, replacementUrl);\n            });\n          } else {\n            level.content = replaceImageUrl(level.content, targetUrl, replacementUrl);\n          }\n        });\n      };\n      var openNotification = function () {\n        return editor.notificationManager.open({\n          text: editor.translate('Image uploading...'),\n          type: 'info',\n          timeout: -1,\n          progressBar: true\n        });\n      };\n      var replaceImageUri = function (image, resultUri) {\n        blobCache.removeByUri(image.src);\n        replaceUrlInUndoStack(image.src, resultUri);\n        editor.$(image).attr({\n          'src': Settings.shouldReuseFileName(editor) ? resultUri + cacheInvalidator() : resultUri,\n          'data-mce-src': editor.convertURL(resultUri, 'src')\n        });\n      };\n      var uploadImages = function (callback) {\n        if (!uploader) {\n          uploader = Uploader(uploadStatus, {\n            url: Settings.getImageUploadUrl(editor),\n            basePath: Settings.getImageUploadBasePath(editor),\n            credentials: Settings.getImagesUploadCredentials(editor),\n            handler: Settings.getImagesUploadHandler(editor)\n          });\n        }\n        return scanForImages().then(aliveGuard(function (imageInfos) {\n          var blobInfos;\n          blobInfos = map(imageInfos, function (imageInfo) {\n            return imageInfo.blobInfo;\n          });\n          return uploader.upload(blobInfos, openNotification).then(aliveGuard(function (result) {\n            var filteredResult = map(result, function (uploadInfo, index) {\n              var image = imageInfos[index].image;\n              if (uploadInfo.status && Settings.shouldReplaceBlobUris(editor)) {\n                replaceImageUri(image, uploadInfo.url);\n              } else if (uploadInfo.error) {\n                ErrorReporter.uploadError(editor, uploadInfo.error);\n              }\n              return {\n                element: image,\n                status: uploadInfo.status\n              };\n            });\n            if (callback) {\n              callback(filteredResult);\n            }\n            return filteredResult;\n          }));\n        }));\n      };\n      var uploadImagesAuto = function (callback) {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          return uploadImages(callback);\n        }\n      };\n      var isValidDataUriImage = function (imgElm) {\n        if (forall(urlFilters, function (filter) {\n            return filter(imgElm);\n          }) === false) {\n          return false;\n        }\n        if (imgElm.getAttribute('src').indexOf('data:') === 0) {\n          var dataImgFilter = Settings.getImagesDataImgFilter(editor);\n          return dataImgFilter(imgElm);\n        }\n        return true;\n      };\n      var addFilter = function (filter) {\n        urlFilters.push(filter);\n      };\n      var scanForImages = function () {\n        if (!imageScanner) {\n          imageScanner = ImageScanner(uploadStatus, blobCache);\n        }\n        return imageScanner.findAll(editor.getBody(), isValidDataUriImage).then(aliveGuard(function (result) {\n          result = filter(result, function (resultItem) {\n            if (typeof resultItem === 'string') {\n              ErrorReporter.displayError(editor, resultItem);\n              return false;\n            }\n            return true;\n          });\n          each(result, function (resultItem) {\n            replaceUrlInUndoStack(resultItem.image.src, resultItem.blobInfo.blobUri());\n            resultItem.image.src = resultItem.blobInfo.blobUri();\n            resultItem.image.removeAttribute('data-mce-src');\n          });\n          return result;\n        }));\n      };\n      var destroy = function () {\n        blobCache.destroy();\n        uploadStatus.destroy();\n        imageScanner = uploader = null;\n      };\n      var replaceBlobUris = function (content) {\n        return content.replace(/src=\"(blob:[^\"]+)\"/g, function (match, blobUri) {\n          var resultUri = uploadStatus.getResultUri(blobUri);\n          if (resultUri) {\n            return 'src=\"' + resultUri + '\"';\n          }\n          var blobInfo = blobCache.getByUri(blobUri);\n          if (!blobInfo) {\n            blobInfo = foldl(editor.editorManager.get(), function (result, editor) {\n              return result || editor.editorUpload && editor.editorUpload.blobCache.getByUri(blobUri);\n            }, null);\n          }\n          if (blobInfo) {\n            var blob = blobInfo.blob();\n            return 'src=\"data:' + blob.type + ';base64,' + blobInfo.base64() + '\"';\n          }\n          return match;\n        });\n      };\n      editor.on('setContent', function () {\n        if (Settings.isAutomaticUploadsEnabled(editor)) {\n          uploadImagesAuto();\n        } else {\n          scanForImages();\n        }\n      });\n      editor.on('RawSaveContent', function (e) {\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('getContent', function (e) {\n        if (e.source_view || e.format === 'raw') {\n          return;\n        }\n        e.content = replaceBlobUris(e.content);\n      });\n      editor.on('PostRender', function () {\n        editor.parser.addNodeFilter('img', function (images) {\n          each(images, function (img) {\n            var src = img.attr('src');\n            if (blobCache.getByUri(src)) {\n              return;\n            }\n            var resultUri = uploadStatus.getResultUri(src);\n            if (resultUri) {\n              img.attr('src', resultUri);\n            }\n          });\n        });\n      });\n      return {\n        blobCache: blobCache,\n        addFilter: addFilter,\n        uploadImages: uploadImages,\n        uploadImagesAuto: uploadImagesAuto,\n        scanForImages: scanForImages,\n        destroy: destroy\n      };\n    }\n\n    var isBlockElement = function (blockElements, node) {\n      return blockElements.hasOwnProperty(node.nodeName);\n    };\n    var isValidTarget = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        return true;\n      } else if (NodeType.isElement(node)) {\n        return !isBlockElement(blockElements, node) && !Bookmarks.isBookmarkNode(node);\n      } else {\n        return false;\n      }\n    };\n    var hasBlockParent = function (blockElements, root, node) {\n      return exists(Parents.parents(Element.fromDom(node), Element.fromDom(root)), function (elm) {\n        return isBlockElement(blockElements, elm.dom());\n      });\n    };\n    var shouldRemoveTextNode = function (blockElements, node) {\n      if (NodeType.isText(node)) {\n        if (node.nodeValue.length === 0) {\n          return true;\n        } else if (/^\\s+$/.test(node.nodeValue) && (!node.nextSibling || isBlockElement(blockElements, node.nextSibling))) {\n          return true;\n        }\n      }\n      return false;\n    };\n    var addRootBlocks = function (editor) {\n      var settings = editor.settings, dom = editor.dom, selection = editor.selection;\n      var schema = editor.schema, blockElements = schema.getBlockElements();\n      var node = selection.getStart();\n      var rootNode = editor.getBody();\n      var rng;\n      var startContainer, startOffset, endContainer, endOffset, rootBlockNode;\n      var tempNode, wrapped, restoreSelection;\n      var rootNodeName, forcedRootBlock;\n      forcedRootBlock = settings.forced_root_block;\n      if (!node || !NodeType.isElement(node) || !forcedRootBlock) {\n        return;\n      }\n      rootNodeName = rootNode.nodeName.toLowerCase();\n      if (!schema.isValidChild(rootNodeName, forcedRootBlock.toLowerCase()) || hasBlockParent(blockElements, rootNode, node)) {\n        return;\n      }\n      rng = selection.getRng();\n      startContainer = rng.startContainer;\n      startOffset = rng.startOffset;\n      endContainer = rng.endContainer;\n      endOffset = rng.endOffset;\n      restoreSelection = EditorFocus.hasFocus(editor);\n      node = rootNode.firstChild;\n      while (node) {\n        if (isValidTarget(blockElements, node)) {\n          if (shouldRemoveTextNode(blockElements, node)) {\n            tempNode = node;\n            node = node.nextSibling;\n            dom.remove(tempNode);\n            continue;\n          }\n          if (!rootBlockNode) {\n            rootBlockNode = dom.create(forcedRootBlock, editor.settings.forced_root_block_attrs);\n            node.parentNode.insertBefore(rootBlockNode, node);\n            wrapped = true;\n          }\n          tempNode = node;\n          node = node.nextSibling;\n          rootBlockNode.appendChild(tempNode);\n        } else {\n          rootBlockNode = null;\n          node = node.nextSibling;\n        }\n      }\n      if (wrapped && restoreSelection) {\n        rng.setStart(startContainer, startOffset);\n        rng.setEnd(endContainer, endOffset);\n        selection.setRng(rng);\n        editor.nodeChanged();\n      }\n    };\n    var setup$3 = function (editor) {\n      if (editor.settings.forced_root_block) {\n        editor.on('NodeChange', curry(addRootBlocks, editor));\n      }\n    };\n    var ForceBlocks = { setup: setup$3 };\n\n    var getStartNode = function (rng) {\n      var sc = rng.startContainer, so = rng.startOffset;\n      if (NodeType.isText(sc)) {\n        return so === 0 ? Option.some(Element.fromDom(sc)) : Option.none();\n      } else {\n        return Option.from(sc.childNodes[so]).map(Element.fromDom);\n      }\n    };\n    var getEndNode = function (rng) {\n      var ec = rng.endContainer, eo = rng.endOffset;\n      if (NodeType.isText(ec)) {\n        return eo === ec.data.length ? Option.some(Element.fromDom(ec)) : Option.none();\n      } else {\n        return Option.from(ec.childNodes[eo - 1]).map(Element.fromDom);\n      }\n    };\n    var getFirstChildren = function (node) {\n      return firstChild(node).fold(constant([node]), function (child) {\n        return [node].concat(getFirstChildren(child));\n      });\n    };\n    var getLastChildren$1 = function (node) {\n      return lastChild(node).fold(constant([node]), function (child) {\n        if (name(child) === 'br') {\n          return prevSibling(child).map(function (sibling) {\n            return [node].concat(getLastChildren$1(sibling));\n          }).getOr([]);\n        } else {\n          return [node].concat(getLastChildren$1(child));\n        }\n      });\n    };\n    var hasAllContentsSelected = function (elm, rng) {\n      return liftN([\n        getStartNode(rng),\n        getEndNode(rng)\n      ], function (startNode, endNode) {\n        var start = find(getFirstChildren(elm), curry(eq, startNode));\n        var end = find(getLastChildren$1(elm), curry(eq, endNode));\n        return start.isSome() && end.isSome();\n      }).getOr(false);\n    };\n    var moveEndPoint$1 = function (dom, rng, node, start) {\n      var root = node, walker = new TreeWalker(node, root);\n      var nonEmptyElementsMap = dom.schema.getNonEmptyElements();\n      do {\n        if (node.nodeType === 3 && Tools.trim(node.nodeValue).length !== 0) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, node.nodeValue.length);\n          }\n          return;\n        }\n        if (nonEmptyElementsMap[node.nodeName] && !/^(TD|TH)$/.test(node.nodeName)) {\n          if (start) {\n            rng.setStartBefore(node);\n          } else {\n            if (node.nodeName === 'BR') {\n              rng.setEndBefore(node);\n            } else {\n              rng.setEndAfter(node);\n            }\n          }\n          return;\n        }\n        if (Env.ie && Env.ie < 11 && dom.isBlock(node) && dom.isEmpty(node)) {\n          if (start) {\n            rng.setStart(node, 0);\n          } else {\n            rng.setEnd(node, 0);\n          }\n          return;\n        }\n      } while (node = start ? walker.next() : walker.prev());\n      if (root.nodeName === 'BODY') {\n        if (start) {\n          rng.setStart(root, 0);\n        } else {\n          rng.setEnd(root, root.childNodes.length);\n        }\n      }\n    };\n    var hasAnyRanges = function (editor) {\n      var sel = editor.selection.getSel();\n      return sel && sel.rangeCount > 0;\n    };\n\n    function NodeChange (editor) {\n      var lastRng, lastPath = [];\n      var isSameElementPath = function (startElm) {\n        var i, currentPath;\n        currentPath = editor.$(startElm).parentsUntil(editor.getBody()).add(startElm);\n        if (currentPath.length === lastPath.length) {\n          for (i = currentPath.length; i >= 0; i--) {\n            if (currentPath[i] !== lastPath[i]) {\n              break;\n            }\n          }\n          if (i === -1) {\n            lastPath = currentPath;\n            return true;\n          }\n        }\n        lastPath = currentPath;\n        return false;\n      };\n      if (!('onselectionchange' in editor.getDoc())) {\n        editor.on('NodeChange Click MouseUp KeyUp Focus', function (e) {\n          var nativeRng, fakeRng;\n          nativeRng = editor.selection.getRng();\n          fakeRng = {\n            startContainer: nativeRng.startContainer,\n            startOffset: nativeRng.startOffset,\n            endContainer: nativeRng.endContainer,\n            endOffset: nativeRng.endOffset\n          };\n          if (e.type === 'nodechange' || !RangeCompare.isEq(fakeRng, lastRng)) {\n            editor.fire('SelectionChange');\n          }\n          lastRng = fakeRng;\n        });\n      }\n      editor.on('contextmenu', function () {\n        editor.fire('SelectionChange');\n      });\n      editor.on('SelectionChange', function () {\n        var startElm = editor.selection.getStart(true);\n        if (!startElm || !Env.range && editor.selection.isCollapsed()) {\n          return;\n        }\n        if (hasAnyRanges(editor) && !isSameElementPath(startElm) && editor.dom.isChildOf(startElm, editor.getBody())) {\n          editor.nodeChanged({ selectionChange: true });\n        }\n      });\n      editor.on('MouseUp', function (e) {\n        if (!e.isDefaultPrevented() && hasAnyRanges(editor)) {\n          if (editor.selection.getNode().nodeName === 'IMG') {\n            Delay.setEditorTimeout(editor, function () {\n              editor.nodeChanged();\n            });\n          } else {\n            editor.nodeChanged();\n          }\n        }\n      });\n      this.nodeChanged = function (args) {\n        var selection = editor.selection;\n        var node, parents, root;\n        if (editor.initialized && selection && !editor.settings.disable_nodechange && !editor.readonly) {\n          root = editor.getBody();\n          node = selection.getStart(true) || root;\n          if (node.ownerDocument !== editor.getDoc() || !editor.dom.isChildOf(node, root)) {\n            node = root;\n          }\n          parents = [];\n          editor.dom.getParent(node, function (node) {\n            if (node === root) {\n              return true;\n            }\n            parents.push(node);\n          });\n          args = args || {};\n          args.element = node;\n          args.parents = parents;\n          editor.fire('NodeChange', args);\n        }\n      };\n    }\n\n    var getAbsolutePosition = function (elm) {\n      var doc, docElem, win, clientRect;\n      clientRect = elm.getBoundingClientRect();\n      doc = elm.ownerDocument;\n      docElem = doc.documentElement;\n      win = doc.defaultView;\n      return {\n        top: clientRect.top + win.pageYOffset - docElem.clientTop,\n        left: clientRect.left + win.pageXOffset - docElem.clientLeft\n      };\n    };\n    var getBodyPosition = function (editor) {\n      return editor.inline ? getAbsolutePosition(editor.getBody()) : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getScrollPosition = function (editor) {\n      var body = editor.getBody();\n      return editor.inline ? {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      } : {\n        left: 0,\n        top: 0\n      };\n    };\n    var getBodyScroll = function (editor) {\n      var body = editor.getBody(), docElm = editor.getDoc().documentElement;\n      var inlineScroll = {\n        left: body.scrollLeft,\n        top: body.scrollTop\n      };\n      var iframeScroll = {\n        left: body.scrollLeft || docElm.scrollLeft,\n        top: body.scrollTop || docElm.scrollTop\n      };\n      return editor.inline ? inlineScroll : iframeScroll;\n    };\n    var getMousePosition = function (editor, event) {\n      if (event.target.ownerDocument !== editor.getDoc()) {\n        var iframePosition = getAbsolutePosition(editor.getContentAreaContainer());\n        var scrollPosition = getBodyScroll(editor);\n        return {\n          left: event.pageX - iframePosition.left + scrollPosition.left,\n          top: event.pageY - iframePosition.top + scrollPosition.top\n        };\n      }\n      return {\n        left: event.pageX,\n        top: event.pageY\n      };\n    };\n    var calculatePosition = function (bodyPosition, scrollPosition, mousePosition) {\n      return {\n        pageX: mousePosition.left - bodyPosition.left + scrollPosition.left,\n        pageY: mousePosition.top - bodyPosition.top + scrollPosition.top\n      };\n    };\n    var calc = function (editor, event) {\n      return calculatePosition(getBodyPosition(editor), getScrollPosition(editor), getMousePosition(editor, event));\n    };\n    var MousePosition = { calc: calc };\n\n    var isContentEditableFalse$7 = NodeType.isContentEditableFalse, isContentEditableTrue$3 = NodeType.isContentEditableTrue;\n    var isDraggable = function (rootElm, elm) {\n      return isContentEditableFalse$7(elm) && elm !== rootElm;\n    };\n    var isValidDropTarget = function (editor, targetElement, dragElement) {\n      if (targetElement === dragElement || editor.dom.isChildOf(targetElement, dragElement)) {\n        return false;\n      }\n      if (isContentEditableFalse$7(targetElement)) {\n        return false;\n      }\n      return true;\n    };\n    var cloneElement = function (elm) {\n      var cloneElm = elm.cloneNode(true);\n      cloneElm.removeAttribute('data-mce-selected');\n      return cloneElm;\n    };\n    var createGhost = function (editor, elm, width, height) {\n      var clonedElm = elm.cloneNode(true);\n      editor.dom.setStyles(clonedElm, {\n        width: width,\n        height: height\n      });\n      editor.dom.setAttrib(clonedElm, 'data-mce-selected', null);\n      var ghostElm = editor.dom.create('div', {\n        'class': 'mce-drag-container',\n        'data-mce-bogus': 'all',\n        'unselectable': 'on',\n        'contenteditable': 'false'\n      });\n      editor.dom.setStyles(ghostElm, {\n        position: 'absolute',\n        opacity: 0.5,\n        overflow: 'hidden',\n        border: 0,\n        padding: 0,\n        margin: 0,\n        width: width,\n        height: height\n      });\n      editor.dom.setStyles(clonedElm, {\n        margin: 0,\n        boxSizing: 'border-box'\n      });\n      ghostElm.appendChild(clonedElm);\n      return ghostElm;\n    };\n    var appendGhostToBody = function (ghostElm, bodyElm) {\n      if (ghostElm.parentNode !== bodyElm) {\n        bodyElm.appendChild(ghostElm);\n      }\n    };\n    var moveGhost = function (ghostElm, position, width, height, maxX, maxY) {\n      var overflowX = 0, overflowY = 0;\n      ghostElm.style.left = position.pageX + 'px';\n      ghostElm.style.top = position.pageY + 'px';\n      if (position.pageX + width > maxX) {\n        overflowX = position.pageX + width - maxX;\n      }\n      if (position.pageY + height > maxY) {\n        overflowY = position.pageY + height - maxY;\n      }\n      ghostElm.style.width = width - overflowX + 'px';\n      ghostElm.style.height = height - overflowY + 'px';\n    };\n    var removeElement = function (elm) {\n      if (elm && elm.parentNode) {\n        elm.parentNode.removeChild(elm);\n      }\n    };\n    var isLeftMouseButtonPressed = function (e) {\n      return e.button === 0;\n    };\n    var hasDraggableElement = function (state) {\n      return state.element;\n    };\n    var applyRelPos = function (state, position) {\n      return {\n        pageX: position.pageX - state.relX,\n        pageY: position.pageY + 5\n      };\n    };\n    var start$1 = function (state, editor) {\n      return function (e) {\n        if (isLeftMouseButtonPressed(e)) {\n          var ceElm = find(editor.dom.getParents(e.target), Predicate.or(isContentEditableFalse$7, isContentEditableTrue$3)).getOr(null);\n          if (isDraggable(editor.getBody(), ceElm)) {\n            var elmPos = editor.dom.getPos(ceElm);\n            var bodyElm = editor.getBody();\n            var docElm = editor.getDoc().documentElement;\n            state.element = ceElm;\n            state.screenX = e.screenX;\n            state.screenY = e.screenY;\n            state.maxX = (editor.inline ? bodyElm.scrollWidth : docElm.offsetWidth) - 2;\n            state.maxY = (editor.inline ? bodyElm.scrollHeight : docElm.offsetHeight) - 2;\n            state.relX = e.pageX - elmPos.x;\n            state.relY = e.pageY - elmPos.y;\n            state.width = ceElm.offsetWidth;\n            state.height = ceElm.offsetHeight;\n            state.ghost = createGhost(editor, ceElm, state.width, state.height);\n          }\n        }\n      };\n    };\n    var move$1 = function (state, editor) {\n      var throttledPlaceCaretAt = Delay.throttle(function (clientX, clientY) {\n        editor._selectionOverrides.hideFakeCaret();\n        editor.selection.placeCaretAt(clientX, clientY);\n      }, 0);\n      return function (e) {\n        var movement = Math.max(Math.abs(e.screenX - state.screenX), Math.abs(e.screenY - state.screenY));\n        if (hasDraggableElement(state) && !state.dragging && movement > 10) {\n          var args = editor.fire('dragstart', { target: state.element });\n          if (args.isDefaultPrevented()) {\n            return;\n          }\n          state.dragging = true;\n          editor.focus();\n        }\n        if (state.dragging) {\n          var targetPos = applyRelPos(state, MousePosition.calc(editor, e));\n          appendGhostToBody(state.ghost, editor.getBody());\n          moveGhost(state.ghost, targetPos, state.width, state.height, state.maxX, state.maxY);\n          throttledPlaceCaretAt(e.clientX, e.clientY);\n        }\n      };\n    };\n    var getRawTarget = function (selection) {\n      var rng = selection.getSel().getRangeAt(0);\n      var startContainer = rng.startContainer;\n      return startContainer.nodeType === 3 ? startContainer.parentNode : startContainer;\n    };\n    var drop = function (state, editor) {\n      return function (e) {\n        if (state.dragging) {\n          if (isValidDropTarget(editor, getRawTarget(editor.selection), state.element)) {\n            var targetClone_1 = cloneElement(state.element);\n            var args = editor.fire('drop', {\n              targetClone: targetClone_1,\n              clientX: e.clientX,\n              clientY: e.clientY\n            });\n            if (!args.isDefaultPrevented()) {\n              targetClone_1 = args.targetClone;\n              editor.undoManager.transact(function () {\n                removeElement(state.element);\n                editor.insertContent(editor.dom.getOuterHTML(targetClone_1));\n                editor._selectionOverrides.hideFakeCaret();\n              });\n            }\n          }\n        }\n        removeDragState(state);\n      };\n    };\n    var stop = function (state, editor) {\n      return function () {\n        if (state.dragging) {\n          editor.fire('dragend');\n        }\n        removeDragState(state);\n      };\n    };\n    var removeDragState = function (state) {\n      state.dragging = false;\n      state.element = null;\n      removeElement(state.ghost);\n    };\n    var bindFakeDragEvents = function (editor) {\n      var state = {};\n      var pageDom, dragStartHandler, dragHandler, dropHandler, dragEndHandler, rootDocument;\n      pageDom = DOMUtils$1.DOM;\n      rootDocument = domGlobals.document;\n      dragStartHandler = start$1(state, editor);\n      dragHandler = move$1(state, editor);\n      dropHandler = drop(state, editor);\n      dragEndHandler = stop(state, editor);\n      editor.on('mousedown', dragStartHandler);\n      editor.on('mousemove', dragHandler);\n      editor.on('mouseup', dropHandler);\n      pageDom.bind(rootDocument, 'mousemove', dragHandler);\n      pageDom.bind(rootDocument, 'mouseup', dragEndHandler);\n      editor.on('remove', function () {\n        pageDom.unbind(rootDocument, 'mousemove', dragHandler);\n        pageDom.unbind(rootDocument, 'mouseup', dragEndHandler);\n      });\n    };\n    var blockIeDrop = function (editor) {\n      editor.on('drop', function (e) {\n        var realTarget = typeof e.clientX !== 'undefined' ? editor.getDoc().elementFromPoint(e.clientX, e.clientY) : null;\n        if (isContentEditableFalse$7(realTarget) || isContentEditableFalse$7(editor.dom.getContentEditableParent(realTarget))) {\n          e.preventDefault();\n        }\n      });\n    };\n    var init = function (editor) {\n      bindFakeDragEvents(editor);\n      blockIeDrop(editor);\n    };\n    var DragDropOverrides = { init: init };\n\n    var getNodeClientRects = function (node) {\n      var toArrayWithNode = function (clientRects) {\n        return map(clientRects, function (clientRect) {\n          clientRect = clone$1(clientRect);\n          clientRect.node = node;\n          return clientRect;\n        });\n      };\n      if (NodeType.isElement(node)) {\n        return toArrayWithNode(node.getClientRects());\n      }\n      if (NodeType.isText(node)) {\n        var rng = node.ownerDocument.createRange();\n        rng.setStart(node, 0);\n        rng.setEnd(node, node.data.length);\n        return toArrayWithNode(rng.getClientRects());\n      }\n    };\n    var getClientRects = function (node) {\n      return foldl(node, function (result, node) {\n        return result.concat(getNodeClientRects(node));\n      }, []);\n    };\n\n    var VDirection;\n    (function (VDirection) {\n      VDirection[VDirection['Up'] = -1] = 'Up';\n      VDirection[VDirection['Down'] = 1] = 'Down';\n    }(VDirection || (VDirection = {})));\n    var findUntil = function (direction, root, predicateFn, node) {\n      while (node = findNode(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var walkUntil = function (direction, isAboveFn, isBeflowFn, root, predicateFn, caretPosition) {\n      var line = 0, node;\n      var result = [];\n      var targetClientRect;\n      var add = function (node) {\n        var i, clientRect, clientRects;\n        clientRects = getClientRects([node]);\n        if (direction === -1) {\n          clientRects = clientRects.reverse();\n        }\n        for (i = 0; i < clientRects.length; i++) {\n          clientRect = clientRects[i];\n          if (isBeflowFn(clientRect, targetClientRect)) {\n            continue;\n          }\n          if (result.length > 0 && isAboveFn(clientRect, ArrUtils.last(result))) {\n            line++;\n          }\n          clientRect.line = line;\n          if (predicateFn(clientRect)) {\n            return true;\n          }\n          result.push(clientRect);\n        }\n      };\n      targetClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (!targetClientRect) {\n        return result;\n      }\n      node = caretPosition.getNode();\n      add(node);\n      findUntil(direction, root, add, node);\n      return result;\n    };\n    var aboveLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line > lineNumber;\n    };\n    var isLineNumber = function (lineNumber, clientRect) {\n      return clientRect.line === lineNumber;\n    };\n    var upUntil = curry(walkUntil, VDirection.Up, isAbove, isBelow);\n    var downUntil = curry(walkUntil, VDirection.Down, isBelow, isAbove);\n    var positionsUntil = function (direction, root, predicateFn, node) {\n      var caretWalker = CaretWalker(root);\n      var walkFn, isBelowFn, isAboveFn, caretPosition;\n      var result = [];\n      var line = 0, clientRect, targetClientRect;\n      var getClientRect = function (caretPosition) {\n        if (direction === 1) {\n          return ArrUtils.last(caretPosition.getClientRects());\n        }\n        return ArrUtils.last(caretPosition.getClientRects());\n      };\n      if (direction === 1) {\n        walkFn = caretWalker.next;\n        isBelowFn = isBelow;\n        isAboveFn = isAbove;\n        caretPosition = CaretPosition$1.after(node);\n      } else {\n        walkFn = caretWalker.prev;\n        isBelowFn = isAbove;\n        isAboveFn = isBelow;\n        caretPosition = CaretPosition$1.before(node);\n      }\n      targetClientRect = getClientRect(caretPosition);\n      do {\n        if (!caretPosition.isVisible()) {\n          continue;\n        }\n        clientRect = getClientRect(caretPosition);\n        if (isAboveFn(clientRect, targetClientRect)) {\n          continue;\n        }\n        if (result.length > 0 && isBelowFn(clientRect, ArrUtils.last(result))) {\n          line++;\n        }\n        clientRect = clone$1(clientRect);\n        clientRect.position = caretPosition;\n        clientRect.line = line;\n        if (predicateFn(clientRect)) {\n          return result;\n        }\n        result.push(clientRect);\n      } while (caretPosition = walkFn(caretPosition));\n      return result;\n    };\n    var isAboveLine = function (lineNumber) {\n      return function (clientRect) {\n        return aboveLineNumber(lineNumber, clientRect);\n      };\n    };\n    var isLine = function (lineNumber) {\n      return function (clientRect) {\n        return isLineNumber(lineNumber, clientRect);\n      };\n    };\n\n    var isContentEditableFalse$8 = NodeType.isContentEditableFalse;\n    var findNode$1 = findNode;\n    var distanceToRectLeft = function (clientRect, clientX) {\n      return Math.abs(clientRect.left - clientX);\n    };\n    var distanceToRectRight = function (clientRect, clientX) {\n      return Math.abs(clientRect.right - clientX);\n    };\n    var isInside = function (clientX, clientRect) {\n      return clientX >= clientRect.left && clientX <= clientRect.right;\n    };\n    var findClosestClientRect = function (clientRects, clientX) {\n      return ArrUtils.reduce(clientRects, function (oldClientRect, clientRect) {\n        var oldDistance, newDistance;\n        oldDistance = Math.min(distanceToRectLeft(oldClientRect, clientX), distanceToRectRight(oldClientRect, clientX));\n        newDistance = Math.min(distanceToRectLeft(clientRect, clientX), distanceToRectRight(clientRect, clientX));\n        if (isInside(clientX, clientRect)) {\n          return clientRect;\n        }\n        if (isInside(clientX, oldClientRect)) {\n          return oldClientRect;\n        }\n        if (newDistance === oldDistance && isContentEditableFalse$8(clientRect.node)) {\n          return clientRect;\n        }\n        if (newDistance < oldDistance) {\n          return clientRect;\n        }\n        return oldClientRect;\n      });\n    };\n    var walkUntil$1 = function (direction, root, predicateFn, node) {\n      while (node = findNode$1(node, direction, isEditableCaretCandidate, root)) {\n        if (predicateFn(node)) {\n          return;\n        }\n      }\n    };\n    var findLineNodeRects = function (root, targetNodeRect) {\n      var clientRects = [];\n      var collect = function (checkPosFn, node) {\n        var lineRects;\n        lineRects = filter(getClientRects([node]), function (clientRect) {\n          return !checkPosFn(clientRect, targetNodeRect);\n        });\n        clientRects = clientRects.concat(lineRects);\n        return lineRects.length === 0;\n      };\n      clientRects.push(targetNodeRect);\n      walkUntil$1(VDirection.Up, root, curry(collect, isAbove), targetNodeRect.node);\n      walkUntil$1(VDirection.Down, root, curry(collect, isBelow), targetNodeRect.node);\n      return clientRects;\n    };\n    var getFakeCaretTargets = function (root) {\n      return filter(from$1(root.getElementsByTagName('*')), isFakeCaretTarget);\n    };\n    var caretInfo = function (clientRect, clientX) {\n      return {\n        node: clientRect.node,\n        before: distanceToRectLeft(clientRect, clientX) < distanceToRectRight(clientRect, clientX)\n      };\n    };\n    var closestCaret = function (root, clientX, clientY) {\n      var closestNodeRect;\n      var contentEditableFalseNodeRects = getClientRects(getFakeCaretTargets(root));\n      var targetNodeRects = filter(contentEditableFalseNodeRects, function (rect) {\n        return clientY >= rect.top && clientY <= rect.bottom;\n      });\n      closestNodeRect = findClosestClientRect(targetNodeRects, clientX);\n      if (closestNodeRect) {\n        closestNodeRect = findClosestClientRect(findLineNodeRects(root, closestNodeRect), clientX);\n        if (closestNodeRect && isFakeCaretTarget(closestNodeRect.node)) {\n          return caretInfo(closestNodeRect, clientX);\n        }\n      }\n      return null;\n    };\n\n    var isXYWithinRange = function (clientX, clientY, range) {\n      if (range.collapsed) {\n        return false;\n      }\n      if (Env.ie && Env.ie <= 11 && range.startOffset === range.endOffset - 1 && range.startContainer === range.endContainer) {\n        var elm = range.startContainer.childNodes[range.startOffset];\n        if (NodeType.isElement(elm)) {\n          return exists(elm.getClientRects(), function (rect) {\n            return containsXY(rect, clientX, clientY);\n          });\n        }\n      }\n      return exists(range.getClientRects(), function (rect) {\n        return containsXY(rect, clientX, clientY);\n      });\n    };\n    var RangePoint = { isXYWithinRange: isXYWithinRange };\n\n    var setup$4 = function (editor) {\n      var renderFocusCaret = first(function () {\n        if (!editor.removed) {\n          var rng = editor.selection.getRng();\n          if (rng.collapsed) {\n            var caretRange = renderRangeCaret(editor, editor.selection.getRng(), false);\n            editor.selection.setRng(caretRange);\n          }\n        }\n      }, 0);\n      editor.on('focus', function () {\n        renderFocusCaret.throttle();\n      });\n      editor.on('blur', function () {\n        renderFocusCaret.cancel();\n      });\n    };\n    var CefFocus = { setup: setup$4 };\n\n    var VK = {\n      BACKSPACE: 8,\n      DELETE: 46,\n      DOWN: 40,\n      ENTER: 13,\n      LEFT: 37,\n      RIGHT: 39,\n      SPACEBAR: 32,\n      TAB: 9,\n      UP: 38,\n      END: 35,\n      HOME: 36,\n      modifierPressed: function (e) {\n        return e.shiftKey || e.ctrlKey || e.altKey || this.metaKeyPressed(e);\n      },\n      metaKeyPressed: function (e) {\n        return Env.mac ? e.metaKey : e.ctrlKey && !e.altKey;\n      }\n    };\n\n    var isContentEditableTrue$4 = NodeType.isContentEditableTrue;\n    var isContentEditableFalse$9 = NodeType.isContentEditableFalse;\n    var getContentEditableRoot$1 = function (editor, node) {\n      var root = editor.getBody();\n      while (node && node !== root) {\n        if (isContentEditableTrue$4(node) || isContentEditableFalse$9(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var SelectionOverrides = function (editor) {\n      var isBlock = function (node) {\n        return editor.dom.isBlock(node);\n      };\n      var rootNode = editor.getBody();\n      var fakeCaret = FakeCaret(editor.getBody(), isBlock, function () {\n        return EditorFocus.hasFocus(editor);\n      });\n      var realSelectionId = 'sel-' + editor.dom.uniqueId();\n      var selectedContentEditableNode;\n      var isFakeSelectionElement = function (elm) {\n        return editor.dom.hasClass(elm, 'mce-offscreen-selection');\n      };\n      var getRealSelectionElement = function () {\n        var container = editor.dom.get(realSelectionId);\n        return container ? container.getElementsByTagName('*')[0] : container;\n      };\n      var setRange = function (range) {\n        if (range) {\n          editor.selection.setRng(range);\n        }\n      };\n      var getRange = function () {\n        return editor.selection.getRng();\n      };\n      var showCaret = function (direction, node, before, scrollIntoView) {\n        if (scrollIntoView === void 0) {\n          scrollIntoView = true;\n        }\n        var e;\n        e = editor.fire('ShowCaret', {\n          target: node,\n          direction: direction,\n          before: before\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        if (scrollIntoView) {\n          editor.selection.scrollIntoView(node, direction === -1);\n        }\n        return fakeCaret.show(before, node);\n      };\n      var getNormalizedRangeEndPoint = function (direction, range) {\n        range = normalizeRange(direction, rootNode, range);\n        if (direction === -1) {\n          return CaretPosition$1.fromRangeStart(range);\n        }\n        return CaretPosition$1.fromRangeEnd(range);\n      };\n      var showBlockCaretContainer = function (blockCaretContainer) {\n        if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n          showCaretContainerBlock(blockCaretContainer);\n          setRange(getRange());\n          editor.selection.scrollIntoView(blockCaretContainer[0]);\n        }\n      };\n      var registerEvents = function () {\n        editor.on('mouseup', function (e) {\n          var range = getRange();\n          if (range.collapsed && EditorView.isXYInContentArea(editor, e.clientX, e.clientY)) {\n            setRange(renderCaretAtRange(editor, range, false));\n          }\n        });\n        editor.on('click', function (e) {\n          var contentEditableRoot;\n          contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              editor.focus();\n            }\n            if (isContentEditableTrue$4(contentEditableRoot)) {\n              if (editor.dom.isChildOf(contentEditableRoot, editor.selection.getNode())) {\n                removeContentEditableSelection();\n              }\n            }\n          }\n        });\n        editor.on('blur NewBlock', function () {\n          removeContentEditableSelection();\n        });\n        editor.on('ResizeWindow FullscreenStateChanged', function () {\n          return fakeCaret.reposition();\n        });\n        var handleTouchSelect = function (editor) {\n          var moved = false;\n          editor.on('touchstart', function () {\n            moved = false;\n          });\n          editor.on('touchmove', function () {\n            moved = true;\n          });\n          editor.on('touchend', function (e) {\n            var contentEditableRoot = getContentEditableRoot$1(editor, e.target);\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              if (!moved) {\n                e.preventDefault();\n                setContentEditableSelection(selectNode(editor, contentEditableRoot));\n              }\n            }\n          });\n        };\n        var hasNormalCaretPosition = function (elm) {\n          var caretWalker = CaretWalker(elm);\n          if (!elm.firstChild) {\n            return false;\n          }\n          var startPos = CaretPosition$1.before(elm.firstChild);\n          var newPos = caretWalker.next(startPos);\n          return newPos && !isBeforeContentEditableFalse(newPos) && !isAfterContentEditableFalse(newPos);\n        };\n        var isInSameBlock = function (node1, node2) {\n          var block1 = editor.dom.getParent(node1, editor.dom.isBlock);\n          var block2 = editor.dom.getParent(node2, editor.dom.isBlock);\n          return block1 === block2;\n        };\n        var hasBetterMouseTarget = function (targetNode, caretNode) {\n          var targetBlock = editor.dom.getParent(targetNode, editor.dom.isBlock);\n          var caretBlock = editor.dom.getParent(caretNode, editor.dom.isBlock);\n          if (targetBlock && editor.dom.isChildOf(targetBlock, caretBlock) && isContentEditableFalse$9(getContentEditableRoot$1(editor, targetBlock)) === false) {\n            return true;\n          }\n          return targetBlock && !isInSameBlock(targetBlock, caretBlock) && hasNormalCaretPosition(targetBlock);\n        };\n        handleTouchSelect(editor);\n        editor.on('mousedown', function (e) {\n          var contentEditableRoot;\n          var targetElm = e.target;\n          if (targetElm !== rootNode && targetElm.nodeName !== 'HTML' && !editor.dom.isChildOf(targetElm, rootNode)) {\n            return;\n          }\n          if (EditorView.isXYInContentArea(editor, e.clientX, e.clientY) === false) {\n            return;\n          }\n          contentEditableRoot = getContentEditableRoot$1(editor, targetElm);\n          if (contentEditableRoot) {\n            if (isContentEditableFalse$9(contentEditableRoot)) {\n              e.preventDefault();\n              setContentEditableSelection(selectNode(editor, contentEditableRoot));\n            } else {\n              removeContentEditableSelection();\n              if (!(isContentEditableTrue$4(contentEditableRoot) && e.shiftKey) && !RangePoint.isXYWithinRange(e.clientX, e.clientY, editor.selection.getRng())) {\n                hideFakeCaret();\n                editor.selection.placeCaretAt(e.clientX, e.clientY);\n              }\n            }\n          } else if (isFakeCaretTarget(targetElm) === false) {\n            removeContentEditableSelection();\n            hideFakeCaret();\n            var caretInfo = closestCaret(rootNode, e.clientX, e.clientY);\n            if (caretInfo) {\n              if (!hasBetterMouseTarget(e.target, caretInfo.node)) {\n                e.preventDefault();\n                var range = showCaret(1, caretInfo.node, caretInfo.before, false);\n                editor.getBody().focus();\n                setRange(range);\n              }\n            }\n          }\n        });\n        editor.on('keypress', function (e) {\n          if (VK.modifierPressed(e)) {\n            return;\n          }\n          switch (e.keyCode) {\n          default:\n            if (isContentEditableFalse$9(editor.selection.getNode())) {\n              e.preventDefault();\n            }\n            break;\n          }\n        });\n        editor.on('getSelectionRange', function (e) {\n          var rng = e.range;\n          if (selectedContentEditableNode) {\n            if (!selectedContentEditableNode.parentNode) {\n              selectedContentEditableNode = null;\n              return;\n            }\n            rng = rng.cloneRange();\n            rng.selectNode(selectedContentEditableNode);\n            e.range = rng;\n          }\n        });\n        editor.on('setSelectionRange', function (e) {\n          var rng;\n          rng = setContentEditableSelection(e.range, e.forward);\n          if (rng) {\n            e.range = rng;\n          }\n        });\n        var isPasteBin = function (node) {\n          return node.id === 'mcepastebin';\n        };\n        editor.on('AfterSetSelectionRange', function (e) {\n          var rng = e.range;\n          if (!isRangeInCaretContainer(rng) && !isPasteBin(rng.startContainer.parentNode)) {\n            hideFakeCaret();\n          }\n          if (!isFakeSelectionElement(rng.startContainer.parentNode)) {\n            removeContentEditableSelection();\n          }\n        });\n        editor.on('copy', function (e) {\n          var clipboardData = e.clipboardData;\n          if (!e.isDefaultPrevented() && e.clipboardData && !Env.ie) {\n            var realSelectionElement = getRealSelectionElement();\n            if (realSelectionElement) {\n              e.preventDefault();\n              clipboardData.clearData();\n              clipboardData.setData('text/html', realSelectionElement.outerHTML);\n              clipboardData.setData('text/plain', realSelectionElement.outerText);\n            }\n          }\n        });\n        DragDropOverrides.init(editor);\n        CefFocus.setup(editor);\n      };\n      var addCss = function () {\n        var styles = editor.contentStyles, rootClass = '.mce-content-body';\n        styles.push(fakeCaret.getCss());\n        styles.push(rootClass + ' .mce-offscreen-selection {' + 'position: absolute;' + 'left: -9999999999px;' + 'max-width: 1000000px;' + '}' + rootClass + ' *[contentEditable=false] {' + 'cursor: default;' + '}' + rootClass + ' *[contentEditable=true] {' + 'cursor: text;' + '}');\n      };\n      var isWithinCaretContainer = function (node) {\n        return isCaretContainer(node) || startsWithCaretContainer(node) || endsWithCaretContainer(node);\n      };\n      var isRangeInCaretContainer = function (rng) {\n        return isWithinCaretContainer(rng.startContainer) || isWithinCaretContainer(rng.endContainer);\n      };\n      var setContentEditableSelection = function (range, forward) {\n        var node;\n        var $ = editor.$;\n        var dom = editor.dom;\n        var $realSelectionContainer, sel, startContainer, startOffset, endOffset, e, caretPosition, targetClone, origTargetClone;\n        if (!range) {\n          return null;\n        }\n        if (range.collapsed) {\n          if (!isRangeInCaretContainer(range)) {\n            if (forward === false) {\n              caretPosition = getNormalizedRangeEndPoint(-1, range);\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(-1, caretPosition.getNode(true), false, false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(-1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n            } else {\n              caretPosition = getNormalizedRangeEndPoint(1, range);\n              if (isFakeCaretTarget(caretPosition.getNode())) {\n                return showCaret(1, caretPosition.getNode(), !caretPosition.isAtEnd(), false);\n              }\n              if (isFakeCaretTarget(caretPosition.getNode(true))) {\n                return showCaret(1, caretPosition.getNode(true), false, false);\n              }\n            }\n          }\n          return null;\n        }\n        startContainer = range.startContainer;\n        startOffset = range.startOffset;\n        endOffset = range.endOffset;\n        if (startContainer.nodeType === 3 && startOffset === 0 && isContentEditableFalse$9(startContainer.parentNode)) {\n          startContainer = startContainer.parentNode;\n          startOffset = dom.nodeIndex(startContainer);\n          startContainer = startContainer.parentNode;\n        }\n        if (startContainer.nodeType !== 1) {\n          return null;\n        }\n        if (endOffset === startOffset + 1 && startContainer === range.endContainer) {\n          node = startContainer.childNodes[startOffset];\n        }\n        if (!isContentEditableFalse$9(node)) {\n          return null;\n        }\n        targetClone = origTargetClone = node.cloneNode(true);\n        e = editor.fire('ObjectSelected', {\n          target: node,\n          targetClone: targetClone\n        });\n        if (e.isDefaultPrevented()) {\n          return null;\n        }\n        $realSelectionContainer = descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).fold(function () {\n          return $([]);\n        }, function (elm) {\n          return $([elm.dom()]);\n        });\n        targetClone = e.targetClone;\n        if ($realSelectionContainer.length === 0) {\n          $realSelectionContainer = $('<div data-mce-bogus=\"all\" class=\"mce-offscreen-selection\"></div>').attr('id', realSelectionId);\n          $realSelectionContainer.appendTo(editor.getBody());\n        }\n        range = editor.dom.createRng();\n        if (targetClone === origTargetClone && Env.ie) {\n          $realSelectionContainer.empty().append('<p style=\"font-size: 0\" data-mce-bogus=\"all\">\\xA0</p>').append(targetClone);\n          range.setStartAfter($realSelectionContainer[0].firstChild.firstChild);\n          range.setEndAfter(targetClone);\n        } else {\n          $realSelectionContainer.empty().append('\\xA0').append(targetClone).append('\\xA0');\n          range.setStart($realSelectionContainer[0].firstChild, 1);\n          range.setEnd($realSelectionContainer[0].lastChild, 0);\n        }\n        $realSelectionContainer.css({ top: dom.getPos(node, editor.getBody()).y });\n        $realSelectionContainer[0].focus();\n        sel = editor.selection.getSel();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        each(descendants$1(Element.fromDom(editor.getBody()), '*[data-mce-selected]'), function (elm) {\n          remove(elm, 'data-mce-selected');\n        });\n        node.setAttribute('data-mce-selected', '1');\n        selectedContentEditableNode = node;\n        hideFakeCaret();\n        return range;\n      };\n      var removeContentEditableSelection = function () {\n        if (selectedContentEditableNode) {\n          selectedContentEditableNode.removeAttribute('data-mce-selected');\n          descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n          selectedContentEditableNode = null;\n        }\n        descendant(Element.fromDom(editor.getBody()), '#' + realSelectionId).each(remove$1);\n        selectedContentEditableNode = null;\n      };\n      var destroy = function () {\n        fakeCaret.destroy();\n        selectedContentEditableNode = null;\n      };\n      var hideFakeCaret = function () {\n        fakeCaret.hide();\n      };\n      if (Env.ceFalse) {\n        registerEvents();\n        addCss();\n      }\n      return {\n        showCaret: showCaret,\n        showBlockCaretContainer: showBlockCaretContainer,\n        hideFakeCaret: hideFakeCaret,\n        destroy: destroy\n      };\n    };\n\n    var isValidPrefixAttrName = function (name) {\n      return name.indexOf('data-') === 0 || name.indexOf('aria-') === 0;\n    };\n    var trimComments = function (text) {\n      return text.replace(/<!--|-->/g, '');\n    };\n    var isInvalidUri = function (settings, uri) {\n      if (settings.allow_html_data_urls) {\n        return false;\n      } else if (/^data:image\\//i.test(uri)) {\n        return settings.allow_svg_data_urls === false && /^data:image\\/svg\\+xml/i.test(uri);\n      } else {\n        return /^data:/i.test(uri);\n      }\n    };\n    var findEndTagIndex = function (schema, html, startIndex) {\n      var count = 1, index, matches, tokenRegExp, shortEndedElements;\n      shortEndedElements = schema.getShortEndedElements();\n      tokenRegExp = /<([!?\\/])?([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\/|\\s+)>/g;\n      tokenRegExp.lastIndex = index = startIndex;\n      while (matches = tokenRegExp.exec(html)) {\n        index = tokenRegExp.lastIndex;\n        if (matches[1] === '/') {\n          count--;\n        } else if (!matches[1]) {\n          if (matches[2] in shortEndedElements) {\n            continue;\n          }\n          count++;\n        }\n        if (count === 0) {\n          break;\n        }\n      }\n      return index;\n    };\n    var checkBogusAttribute = function (regExp, attrString) {\n      var matches = regExp.exec(attrString);\n      if (matches) {\n        var name = matches[1];\n        var value = matches[2];\n        return typeof name === 'string' && name.toLowerCase() === 'data-mce-bogus' ? value : null;\n      } else {\n        return null;\n      }\n    };\n    function SaxParser(settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var noop = function () {\n      };\n      settings = settings || {};\n      if (settings.fix_self_closing !== false) {\n        settings.fix_self_closing = true;\n      }\n      var comment = settings.comment ? settings.comment : noop;\n      var cdata = settings.cdata ? settings.cdata : noop;\n      var text = settings.text ? settings.text : noop;\n      var start = settings.start ? settings.start : noop;\n      var end = settings.end ? settings.end : noop;\n      var pi = settings.pi ? settings.pi : noop;\n      var doctype = settings.doctype ? settings.doctype : noop;\n      var parse = function (html) {\n        var matches, index = 0, value, endRegExp;\n        var stack = [];\n        var attrList, i, textData, name;\n        var isInternalElement, removeInternalElements, shortEndedElements, fillAttrsMap, isShortEnded;\n        var validate, elementRule, isValidElement, attr, attribsValue, validAttributesMap, validAttributePatterns;\n        var attributesRequired, attributesDefault, attributesForced, processHtml;\n        var anyAttributesRequired, selfClosing, tokenRegExp, attrRegExp, specialElements, attrValue, idCount = 0;\n        var decode = Entities.decode;\n        var fixSelfClosing;\n        var filteredUrlAttrs = Tools.makeMap('src,href,data,background,formaction,poster,xlink:href');\n        var scriptUriRegExp = /((java|vb)script|mhtml):/i;\n        var processEndTag = function (name) {\n          var pos, i;\n          pos = stack.length;\n          while (pos--) {\n            if (stack[pos].name === name) {\n              break;\n            }\n          }\n          if (pos >= 0) {\n            for (i = stack.length - 1; i >= pos; i--) {\n              name = stack[i];\n              if (name.valid) {\n                end(name.name);\n              }\n            }\n            stack.length = pos;\n          }\n        };\n        var parseAttribute = function (match, name, value, val2, val3) {\n          var attrRule, i;\n          var trimRegExp = /[\\s\\u0000-\\u001F]+/g;\n          name = name.toLowerCase();\n          value = name in fillAttrsMap ? name : decode(value || val2 || val3 || '');\n          if (validate && !isInternalElement && isValidPrefixAttrName(name) === false) {\n            attrRule = validAttributesMap[name];\n            if (!attrRule && validAttributePatterns) {\n              i = validAttributePatterns.length;\n              while (i--) {\n                attrRule = validAttributePatterns[i];\n                if (attrRule.pattern.test(name)) {\n                  break;\n                }\n              }\n              if (i === -1) {\n                attrRule = null;\n              }\n            }\n            if (!attrRule) {\n              return;\n            }\n            if (attrRule.validValues && !(value in attrRule.validValues)) {\n              return;\n            }\n          }\n          if (filteredUrlAttrs[name] && !settings.allow_script_urls) {\n            var uri = value.replace(trimRegExp, '');\n            try {\n              uri = decodeURIComponent(uri);\n            } catch (ex) {\n              uri = unescape(uri);\n            }\n            if (scriptUriRegExp.test(uri)) {\n              return;\n            }\n            if (isInvalidUri(settings, uri)) {\n              return;\n            }\n          }\n          if (isInternalElement && (name in filteredUrlAttrs || name.indexOf('on') === 0)) {\n            return;\n          }\n          attrList.map[name] = value;\n          attrList.push({\n            name: name,\n            value: value\n          });\n        };\n        tokenRegExp = new RegExp('<(?:' + '(?:!--([\\\\w\\\\W]*?)-->)|' + '(?:!\\\\[CDATA\\\\[([\\\\w\\\\W]*?)\\\\]\\\\]>)|' + '(?:!DOCTYPE([\\\\w\\\\W]*?)>)|' + '(?:\\\\?([^\\\\s\\\\/<>]+) ?([\\\\w\\\\W]*?)[?/]>)|' + '(?:\\\\/([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)>)|' + '(?:([A-Za-z][A-Za-z0-9\\\\-_\\\\:\\\\.]*)((?:\\\\s+[^\"\\'>]+(?:(?:\"[^\"]*\")|(?:\\'[^\\']*\\')|[^>]*))*|\\\\/|\\\\s+)>)' + ')', 'g');\n        attrRegExp = /([\\w:\\-]+)(?:\\s*=\\s*(?:(?:\\\"((?:[^\\\"])*)\\\")|(?:\\'((?:[^\\'])*)\\')|([^>\\s]+)))?/g;\n        shortEndedElements = schema.getShortEndedElements();\n        selfClosing = settings.self_closing_elements || schema.getSelfClosingElements();\n        fillAttrsMap = schema.getBoolAttrs();\n        validate = settings.validate;\n        removeInternalElements = settings.remove_internals;\n        fixSelfClosing = settings.fix_self_closing;\n        specialElements = schema.getSpecialElements();\n        processHtml = html + '>';\n        while (matches = tokenRegExp.exec(processHtml)) {\n          if (index < matches.index) {\n            text(decode(html.substr(index, matches.index - index)));\n          }\n          if (value = matches[6]) {\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            processEndTag(value);\n          } else if (value = matches[7]) {\n            if (matches.index + matches[0].length > html.length) {\n              text(decode(html.substr(matches.index)));\n              index = matches.index + matches[0].length;\n              continue;\n            }\n            value = value.toLowerCase();\n            if (value.charAt(0) === ':') {\n              value = value.substr(1);\n            }\n            isShortEnded = value in shortEndedElements;\n            if (fixSelfClosing && selfClosing[value] && stack.length > 0 && stack[stack.length - 1].name === value) {\n              processEndTag(value);\n            }\n            var bogusValue = checkBogusAttribute(attrRegExp, matches[8]);\n            if (bogusValue !== null) {\n              if (bogusValue === 'all') {\n                index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                tokenRegExp.lastIndex = index;\n                continue;\n              }\n              isValidElement = false;\n            }\n            if (!validate || (elementRule = schema.getElementRule(value))) {\n              isValidElement = true;\n              if (validate) {\n                validAttributesMap = elementRule.attributes;\n                validAttributePatterns = elementRule.attributePatterns;\n              }\n              if (attribsValue = matches[8]) {\n                isInternalElement = attribsValue.indexOf('data-mce-type') !== -1;\n                if (isInternalElement && removeInternalElements) {\n                  isValidElement = false;\n                }\n                attrList = [];\n                attrList.map = {};\n                attribsValue.replace(attrRegExp, parseAttribute);\n              } else {\n                attrList = [];\n                attrList.map = {};\n              }\n              if (validate && !isInternalElement) {\n                attributesRequired = elementRule.attributesRequired;\n                attributesDefault = elementRule.attributesDefault;\n                attributesForced = elementRule.attributesForced;\n                anyAttributesRequired = elementRule.removeEmptyAttrs;\n                if (anyAttributesRequired && !attrList.length) {\n                  isValidElement = false;\n                }\n                if (attributesForced) {\n                  i = attributesForced.length;\n                  while (i--) {\n                    attr = attributesForced[i];\n                    name = attr.name;\n                    attrValue = attr.value;\n                    if (attrValue === '{$uid}') {\n                      attrValue = 'mce_' + idCount++;\n                    }\n                    attrList.map[name] = attrValue;\n                    attrList.push({\n                      name: name,\n                      value: attrValue\n                    });\n                  }\n                }\n                if (attributesDefault) {\n                  i = attributesDefault.length;\n                  while (i--) {\n                    attr = attributesDefault[i];\n                    name = attr.name;\n                    if (!(name in attrList.map)) {\n                      attrValue = attr.value;\n                      if (attrValue === '{$uid}') {\n                        attrValue = 'mce_' + idCount++;\n                      }\n                      attrList.map[name] = attrValue;\n                      attrList.push({\n                        name: name,\n                        value: attrValue\n                      });\n                    }\n                  }\n                }\n                if (attributesRequired) {\n                  i = attributesRequired.length;\n                  while (i--) {\n                    if (attributesRequired[i] in attrList.map) {\n                      break;\n                    }\n                  }\n                  if (i === -1) {\n                    isValidElement = false;\n                  }\n                }\n                if (attr = attrList.map['data-mce-bogus']) {\n                  if (attr === 'all') {\n                    index = findEndTagIndex(schema, html, tokenRegExp.lastIndex);\n                    tokenRegExp.lastIndex = index;\n                    continue;\n                  }\n                  isValidElement = false;\n                }\n              }\n              if (isValidElement) {\n                start(value, attrList, isShortEnded);\n              }\n            } else {\n              isValidElement = false;\n            }\n            if (endRegExp = specialElements[value]) {\n              endRegExp.lastIndex = index = matches.index + matches[0].length;\n              if (matches = endRegExp.exec(html)) {\n                if (isValidElement) {\n                  textData = html.substr(index, matches.index - index);\n                }\n                index = matches.index + matches[0].length;\n              } else {\n                textData = html.substr(index);\n                index = html.length;\n              }\n              if (isValidElement) {\n                if (textData.length > 0) {\n                  text(textData, true);\n                }\n                end(value);\n              }\n              tokenRegExp.lastIndex = index;\n              continue;\n            }\n            if (!isShortEnded) {\n              if (!attribsValue || attribsValue.indexOf('/') !== attribsValue.length - 1) {\n                stack.push({\n                  name: value,\n                  valid: isValidElement\n                });\n              } else if (isValidElement) {\n                end(value);\n              }\n            }\n          } else if (value = matches[1]) {\n            if (value.charAt(0) === '>') {\n              value = ' ' + value;\n            }\n            if (!settings.allow_conditional_comments && value.substr(0, 3).toLowerCase() === '[if') {\n              value = ' ' + value;\n            }\n            comment(value);\n          } else if (value = matches[2]) {\n            cdata(trimComments(value));\n          } else if (value = matches[3]) {\n            doctype(value);\n          } else if (value = matches[4]) {\n            pi(value, matches[5]);\n          }\n          index = matches.index + matches[0].length;\n        }\n        if (index < html.length) {\n          text(decode(html.substr(index)));\n        }\n        for (i = stack.length - 1; i >= 0; i--) {\n          value = stack[i];\n          if (value.valid) {\n            end(value.name);\n          }\n        }\n      };\n      return { parse: parse };\n    }\n    (function (SaxParser) {\n      SaxParser.findEndTag = findEndTagIndex;\n    }(SaxParser || (SaxParser = {})));\n    var SaxParser$1 = SaxParser;\n\n    var trimHtml = function (tempAttrs, html) {\n      var trimContentRegExp = new RegExp(['\\\\s?(' + tempAttrs.join('|') + ')=\"[^\"]+\"'].join('|'), 'gi');\n      return html.replace(trimContentRegExp, '');\n    };\n    var trimInternal = function (serializer, html) {\n      var content = html;\n      var bogusAllRegExp = /<(\\w+) [^>]*data-mce-bogus=\"all\"[^>]*>/g;\n      var endTagIndex, index, matchLength, matches, shortEndedElements;\n      var schema = serializer.schema;\n      content = trimHtml(serializer.getTempAttrs(), content);\n      shortEndedElements = schema.getShortEndedElements();\n      while (matches = bogusAllRegExp.exec(content)) {\n        index = bogusAllRegExp.lastIndex;\n        matchLength = matches[0].length;\n        if (shortEndedElements[matches[1]]) {\n          endTagIndex = index;\n        } else {\n          endTagIndex = SaxParser$1.findEndTag(schema, content, index);\n        }\n        content = content.substring(0, index - matchLength) + content.substring(endTagIndex);\n        bogusAllRegExp.lastIndex = index - matchLength;\n      }\n      return Zwsp.trim(content);\n    };\n    var trimExternal = trimInternal;\n    var TrimHtml = {\n      trimExternal: trimExternal,\n      trimInternal: trimInternal\n    };\n\n    var KEEP = 0, INSERT = 1, DELETE = 2;\n    var diff = function (left, right) {\n      var size = left.length + right.length + 2;\n      var vDown = new Array(size);\n      var vUp = new Array(size);\n      var snake = function (start, end, diag) {\n        return {\n          start: start,\n          end: end,\n          diag: diag\n        };\n      };\n      var buildScript = function (start1, end1, start2, end2, script) {\n        var middle = getMiddleSnake(start1, end1, start2, end2);\n        if (middle === null || middle.start === end1 && middle.diag === end1 - end2 || middle.end === start1 && middle.diag === start1 - start2) {\n          var i = start1;\n          var j = start2;\n          while (i < end1 || j < end2) {\n            if (i < end1 && j < end2 && left[i] === right[j]) {\n              script.push([\n                KEEP,\n                left[i]\n              ]);\n              ++i;\n              ++j;\n            } else {\n              if (end1 - start1 > end2 - start2) {\n                script.push([\n                  DELETE,\n                  left[i]\n                ]);\n                ++i;\n              } else {\n                script.push([\n                  INSERT,\n                  right[j]\n                ]);\n                ++j;\n              }\n            }\n          }\n        } else {\n          buildScript(start1, middle.start, start2, middle.start - middle.diag, script);\n          for (var i2 = middle.start; i2 < middle.end; ++i2) {\n            script.push([\n              KEEP,\n              left[i2]\n            ]);\n          }\n          buildScript(middle.end, end1, middle.end - middle.diag, end2, script);\n        }\n      };\n      var buildSnake = function (start, diag, end1, end2) {\n        var end = start;\n        while (end - diag < end2 && end < end1 && left[end] === right[end - diag]) {\n          ++end;\n        }\n        return snake(start, end, diag);\n      };\n      var getMiddleSnake = function (start1, end1, start2, end2) {\n        var m = end1 - start1;\n        var n = end2 - start2;\n        if (m === 0 || n === 0) {\n          return null;\n        }\n        var delta = m - n;\n        var sum = n + m;\n        var offset = (sum % 2 === 0 ? sum : sum + 1) / 2;\n        vDown[1 + offset] = start1;\n        vUp[1 + offset] = end1 + 1;\n        var d, k, i, x, y;\n        for (d = 0; d <= offset; ++d) {\n          for (k = -d; k <= d; k += 2) {\n            i = k + offset;\n            if (k === -d || k !== d && vDown[i - 1] < vDown[i + 1]) {\n              vDown[i] = vDown[i + 1];\n            } else {\n              vDown[i] = vDown[i - 1] + 1;\n            }\n            x = vDown[i];\n            y = x - start1 + start2 - k;\n            while (x < end1 && y < end2 && left[x] === right[y]) {\n              vDown[i] = ++x;\n              ++y;\n            }\n            if (delta % 2 !== 0 && delta - d <= k && k <= delta + d) {\n              if (vUp[i - delta] <= vDown[i]) {\n                return buildSnake(vUp[i - delta], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n          for (k = delta - d; k <= delta + d; k += 2) {\n            i = k + offset - delta;\n            if (k === delta - d || k !== delta + d && vUp[i + 1] <= vUp[i - 1]) {\n              vUp[i] = vUp[i + 1] - 1;\n            } else {\n              vUp[i] = vUp[i - 1];\n            }\n            x = vUp[i] - 1;\n            y = x - start1 + start2 - k;\n            while (x >= start1 && y >= start2 && left[x] === right[y]) {\n              vUp[i] = x--;\n              y--;\n            }\n            if (delta % 2 === 0 && -d <= k && k <= d) {\n              if (vUp[i] <= vDown[i + delta]) {\n                return buildSnake(vUp[i], k + start1 - start2, end1, end2);\n              }\n            }\n          }\n        }\n      };\n      var script = [];\n      buildScript(0, left.length, 0, right.length, script);\n      return script;\n    };\n    var Diff = {\n      KEEP: KEEP,\n      DELETE: DELETE,\n      INSERT: INSERT,\n      diff: diff\n    };\n\n    var getOuterHtml = function (elm) {\n      if (NodeType.isElement(elm)) {\n        return elm.outerHTML;\n      } else if (NodeType.isText(elm)) {\n        return Entities.encodeRaw(elm.data, false);\n      } else if (NodeType.isComment(elm)) {\n        return '<!--' + elm.data + '-->';\n      }\n      return '';\n    };\n    var createFragment$1 = function (html) {\n      var frag, node, container;\n      container = domGlobals.document.createElement('div');\n      frag = domGlobals.document.createDocumentFragment();\n      if (html) {\n        container.innerHTML = html;\n      }\n      while (node = container.firstChild) {\n        frag.appendChild(node);\n      }\n      return frag;\n    };\n    var insertAt = function (elm, html, index) {\n      var fragment = createFragment$1(html);\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.insertBefore(fragment, target);\n      } else {\n        elm.appendChild(fragment);\n      }\n    };\n    var removeAt = function (elm, index) {\n      if (elm.hasChildNodes() && index < elm.childNodes.length) {\n        var target = elm.childNodes[index];\n        target.parentNode.removeChild(target);\n      }\n    };\n    var applyDiff = function (diff, elm) {\n      var index = 0;\n      each(diff, function (action) {\n        if (action[0] === Diff.KEEP) {\n          index++;\n        } else if (action[0] === Diff.INSERT) {\n          insertAt(elm, action[1], index);\n          index++;\n        } else if (action[0] === Diff.DELETE) {\n          removeAt(elm, index);\n        }\n      });\n    };\n    var read$3 = function (elm) {\n      return filter(map(from$1(elm.childNodes), getOuterHtml), function (item) {\n        return item.length > 0;\n      });\n    };\n    var write = function (fragments, elm) {\n      var currentFragments = map(from$1(elm.childNodes), getOuterHtml);\n      applyDiff(Diff.diff(currentFragments, fragments), elm);\n      return elm;\n    };\n    var Fragments = {\n      read: read$3,\n      write: write\n    };\n\n    var undoLevelDocument = Cell(Option.none());\n    var lazyTempDocument = function () {\n      return undoLevelDocument.get().getOrThunk(function () {\n        var doc = domGlobals.document.implementation.createHTMLDocument('undo');\n        undoLevelDocument.set(Option.some(doc));\n        return doc;\n      });\n    };\n    var hasIframes = function (html) {\n      return html.indexOf('</iframe>') !== -1;\n    };\n    var createFragmentedLevel = function (fragments) {\n      return {\n        type: 'fragmented',\n        fragments: fragments,\n        content: '',\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createCompleteLevel = function (content) {\n      return {\n        type: 'complete',\n        fragments: null,\n        content: content,\n        bookmark: null,\n        beforeBookmark: null\n      };\n    };\n    var createFromEditor = function (editor) {\n      var fragments, content, trimmedFragments;\n      fragments = Fragments.read(editor.getBody());\n      trimmedFragments = bind(fragments, function (html) {\n        var trimmed = TrimHtml.trimInternal(editor.serializer, html);\n        return trimmed.length > 0 ? [trimmed] : [];\n      });\n      content = trimmedFragments.join('');\n      return hasIframes(content) ? createFragmentedLevel(trimmedFragments) : createCompleteLevel(content);\n    };\n    var applyToEditor = function (editor, level, before) {\n      if (level.type === 'fragmented') {\n        Fragments.write(level.fragments, editor.getBody());\n      } else {\n        editor.setContent(level.content, { format: 'raw' });\n      }\n      editor.selection.moveToBookmark(before ? level.beforeBookmark : level.bookmark);\n    };\n    var getLevelContent = function (level) {\n      return level.type === 'fragmented' ? level.fragments.join('') : level.content;\n    };\n    var getCleanLevelContent = function (level) {\n      var elm = Element.fromTag('body', lazyTempDocument());\n      set$1(elm, getLevelContent(level));\n      each(descendants$1(elm, '*[data-mce-bogus]'), unwrap);\n      return get$3(elm);\n    };\n    var hasEqualContent = function (level1, level2) {\n      return getLevelContent(level1) === getLevelContent(level2);\n    };\n    var hasEqualCleanedContent = function (level1, level2) {\n      return getCleanLevelContent(level1) === getCleanLevelContent(level2);\n    };\n    var isEq$4 = function (level1, level2) {\n      if (!level1 || !level2) {\n        return false;\n      } else if (hasEqualContent(level1, level2)) {\n        return true;\n      } else {\n        return hasEqualCleanedContent(level1, level2);\n      }\n    };\n    var Levels = {\n      createFragmentedLevel: createFragmentedLevel,\n      createCompleteLevel: createCompleteLevel,\n      createFromEditor: createFromEditor,\n      applyToEditor: applyToEditor,\n      isEq: isEq$4\n    };\n\n    function UndoManager (editor) {\n      var self = this, index = 0, data = [], beforeBookmark, isFirstTypedCharacter, locks = 0;\n      var isUnlocked = function () {\n        return locks === 0;\n      };\n      var setTyping = function (typing) {\n        if (isUnlocked()) {\n          self.typing = typing;\n        }\n      };\n      var setDirty = function (state) {\n        editor.setDirty(state);\n      };\n      var addNonTypingUndoLevel = function (e) {\n        setTyping(false);\n        self.add({}, e);\n      };\n      var endTyping = function () {\n        if (self.typing) {\n          setTyping(false);\n          self.add();\n        }\n      };\n      editor.on('init', function () {\n        self.add();\n      });\n      editor.on('BeforeExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          endTyping();\n          self.beforeChange();\n        }\n      });\n      editor.on('ExecCommand', function (e) {\n        var cmd = e.command;\n        if (cmd !== 'Undo' && cmd !== 'Redo' && cmd !== 'mceRepaint') {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.on('ObjectResizeStart Cut', function () {\n        self.beforeChange();\n      });\n      editor.on('SaveContent ObjectResized blur', addNonTypingUndoLevel);\n      editor.on('DragEnd', addNonTypingUndoLevel);\n      editor.on('KeyUp', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45 || e.ctrlKey) {\n          addNonTypingUndoLevel();\n          editor.nodeChanged();\n        }\n        if (keyCode === 46 || keyCode === 8) {\n          editor.nodeChanged();\n        }\n        if (isFirstTypedCharacter && self.typing && Levels.isEq(Levels.createFromEditor(editor), data[0]) === false) {\n          if (editor.isDirty() === false) {\n            setDirty(true);\n            editor.fire('change', {\n              level: data[0],\n              lastLevel: null\n            });\n          }\n          editor.fire('TypingUndo');\n          isFirstTypedCharacter = false;\n          editor.nodeChanged();\n        }\n      });\n      editor.on('KeyDown', function (e) {\n        var keyCode = e.keyCode;\n        if (e.isDefaultPrevented()) {\n          return;\n        }\n        if (keyCode >= 33 && keyCode <= 36 || keyCode >= 37 && keyCode <= 40 || keyCode === 45) {\n          if (self.typing) {\n            addNonTypingUndoLevel(e);\n          }\n          return;\n        }\n        var modKey = e.ctrlKey && !e.altKey || e.metaKey;\n        if ((keyCode < 16 || keyCode > 20) && keyCode !== 224 && keyCode !== 91 && !self.typing && !modKey) {\n          self.beforeChange();\n          setTyping(true);\n          self.add({}, e);\n          isFirstTypedCharacter = true;\n        }\n      });\n      editor.on('MouseDown', function (e) {\n        if (self.typing) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      var isInsertReplacementText = function (event) {\n        return event.inputType === 'insertReplacementText';\n      };\n      var isInsertTextDataNull = function (event) {\n        return event.inputType === 'insertText' && event.data === null;\n      };\n      editor.on('input', function (e) {\n        if (e.inputType && (isInsertReplacementText(e) || isInsertTextDataNull(e))) {\n          addNonTypingUndoLevel(e);\n        }\n      });\n      editor.addShortcut('meta+z', '', 'Undo');\n      editor.addShortcut('meta+y,meta+shift+z', '', 'Redo');\n      editor.on('AddUndo Undo Redo ClearUndos', function (e) {\n        if (!e.isDefaultPrevented()) {\n          editor.nodeChanged();\n        }\n      });\n      self = {\n        data: data,\n        typing: false,\n        beforeChange: function () {\n          if (isUnlocked()) {\n            beforeBookmark = GetBookmark.getUndoBookmark(editor.selection);\n          }\n        },\n        add: function (level, event) {\n          var i;\n          var settings = editor.settings;\n          var lastLevel, currentLevel;\n          currentLevel = Levels.createFromEditor(editor);\n          level = level || {};\n          level = Tools.extend(level, currentLevel);\n          if (isUnlocked() === false || editor.removed) {\n            return null;\n          }\n          lastLevel = data[index];\n          if (editor.fire('BeforeAddUndo', {\n              level: level,\n              lastLevel: lastLevel,\n              originalEvent: event\n            }).isDefaultPrevented()) {\n            return null;\n          }\n          if (lastLevel && Levels.isEq(lastLevel, level)) {\n            return null;\n          }\n          if (data[index]) {\n            data[index].beforeBookmark = beforeBookmark;\n          }\n          if (settings.custom_undo_redo_levels) {\n            if (data.length > settings.custom_undo_redo_levels) {\n              for (i = 0; i < data.length - 1; i++) {\n                data[i] = data[i + 1];\n              }\n              data.length--;\n              index = data.length;\n            }\n          }\n          level.bookmark = GetBookmark.getUndoBookmark(editor.selection);\n          if (index < data.length - 1) {\n            data.length = index + 1;\n          }\n          data.push(level);\n          index = data.length - 1;\n          var args = {\n            level: level,\n            lastLevel: lastLevel,\n            originalEvent: event\n          };\n          editor.fire('AddUndo', args);\n          if (index > 0) {\n            setDirty(true);\n            editor.fire('change', args);\n          }\n          return level;\n        },\n        undo: function () {\n          var level;\n          if (self.typing) {\n            self.add();\n            self.typing = false;\n            setTyping(false);\n          }\n          if (index > 0) {\n            level = data[--index];\n            Levels.applyToEditor(editor, level, true);\n            setDirty(true);\n            editor.fire('undo', { level: level });\n          }\n          return level;\n        },\n        redo: function () {\n          var level;\n          if (index < data.length - 1) {\n            level = data[++index];\n            Levels.applyToEditor(editor, level, false);\n            setDirty(true);\n            editor.fire('redo', { level: level });\n          }\n          return level;\n        },\n        clear: function () {\n          data = [];\n          index = 0;\n          self.typing = false;\n          self.data = data;\n          editor.fire('ClearUndos');\n        },\n        hasUndo: function () {\n          return index > 0 || self.typing && data[0] && !Levels.isEq(Levels.createFromEditor(editor), data[0]);\n        },\n        hasRedo: function () {\n          return index < data.length - 1 && !self.typing;\n        },\n        transact: function (callback) {\n          endTyping();\n          self.beforeChange();\n          self.ignore(callback);\n          return self.add();\n        },\n        ignore: function (callback) {\n          try {\n            locks++;\n            callback();\n          } finally {\n            locks--;\n          }\n        },\n        extra: function (callback1, callback2) {\n          var lastLevel, bookmark;\n          if (self.transact(callback1)) {\n            bookmark = data[index].bookmark;\n            lastLevel = data[index - 1];\n            Levels.applyToEditor(editor, lastLevel, true);\n            if (self.transact(callback2)) {\n              data[index - 1].beforeBookmark = bookmark;\n            }\n          }\n        }\n      };\n      return self;\n    }\n\n    var postProcessHooks = {}, filter$2 = ArrUtils.filter, each$c = ArrUtils.each;\n    var addPostProcessHook = function (name, hook) {\n      var hooks = postProcessHooks[name];\n      if (!hooks) {\n        postProcessHooks[name] = hooks = [];\n      }\n      postProcessHooks[name].push(hook);\n    };\n    var postProcess = function (name, editor) {\n      each$c(postProcessHooks[name], function (hook) {\n        hook(editor);\n      });\n    };\n    addPostProcessHook('pre', function (editor) {\n      var rng = editor.selection.getRng();\n      var isPre, blocks;\n      var hasPreSibling = function (pre) {\n        return isPre(pre.previousSibling) && ArrUtils.indexOf(blocks, pre.previousSibling) !== -1;\n      };\n      var joinPre = function (pre1, pre2) {\n        DomQuery(pre2).remove();\n        DomQuery(pre1).append('<br><br>').append(pre2.childNodes);\n      };\n      isPre = NodeType.matchNodeNames('pre');\n      if (!rng.collapsed) {\n        blocks = editor.selection.getSelectedBlocks();\n        each$c(filter$2(filter$2(blocks, isPre), hasPreSibling), function (pre) {\n          joinPre(pre.previousSibling, pre);\n        });\n      }\n    });\n    var Hooks = { postProcess: postProcess };\n\n    var MCE_ATTR_RE = /^(src|href|style)$/;\n    var each$d = Tools.each;\n    var isEq$5 = FormatUtils.isEq;\n    var isTableCell$4 = function (node) {\n      return /^(TH|TD)$/.test(node.nodeName);\n    };\n    var isChildOfInlineParent = function (dom, node, parent) {\n      return dom.isChildOf(node, parent) && node !== parent && !dom.isBlock(parent);\n    };\n    var getContainer = function (ed, rng, start) {\n      var container, offset, lastIdx;\n      container = rng[start ? 'startContainer' : 'endContainer'];\n      offset = rng[start ? 'startOffset' : 'endOffset'];\n      if (NodeType.isElement(container)) {\n        lastIdx = container.childNodes.length - 1;\n        if (!start && offset) {\n          offset--;\n        }\n        container = container.childNodes[offset > lastIdx ? lastIdx : offset];\n      }\n      if (NodeType.isText(container) && start && offset >= container.nodeValue.length) {\n        container = new TreeWalker(container, ed.getBody()).next() || container;\n      }\n      if (NodeType.isText(container) && !start && offset === 0) {\n        container = new TreeWalker(container, ed.getBody()).prev() || container;\n      }\n      return container;\n    };\n    var wrap$2 = function (dom, node, name, attrs) {\n      var wrapper = dom.create(name, attrs);\n      node.parentNode.insertBefore(wrapper, node);\n      wrapper.appendChild(node);\n      return wrapper;\n    };\n    var wrapWithSiblings = function (dom, node, next, name, attrs) {\n      var start = Element.fromDom(node);\n      var wrapper = Element.fromDom(dom.create(name, attrs));\n      var siblings = next ? nextSiblings(start) : prevSiblings(start);\n      append$1(wrapper, siblings);\n      if (next) {\n        before(start, wrapper);\n        prepend(wrapper, start);\n      } else {\n        after(start, wrapper);\n        append(wrapper, start);\n      }\n      return wrapper.dom();\n    };\n    var matchName$1 = function (dom, node, format) {\n      if (isEq$5(node, format.inline)) {\n        return true;\n      }\n      if (isEq$5(node, format.block)) {\n        return true;\n      }\n      if (format.selector) {\n        return NodeType.isElement(node) && dom.is(node, format.selector);\n      }\n    };\n    var isColorFormatAndAnchor = function (node, format) {\n      return format.links && node.tagName === 'A';\n    };\n    var find$3 = function (dom, node, next, inc) {\n      node = FormatUtils.getNonWhiteSpaceSibling(node, next, inc);\n      return !node || (node.nodeName === 'BR' || dom.isBlock(node));\n    };\n    var removeNode$1 = function (ed, node, format) {\n      var parentNode = node.parentNode;\n      var rootBlockElm;\n      var dom = ed.dom, forcedRootBlock = ed.settings.forced_root_block;\n      if (format.block) {\n        if (!forcedRootBlock) {\n          if (dom.isBlock(node) && !dom.isBlock(parentNode)) {\n            if (!find$3(dom, node, false) && !find$3(dom, node.firstChild, true, 1)) {\n              node.insertBefore(dom.create('br'), node.firstChild);\n            }\n            if (!find$3(dom, node, true) && !find$3(dom, node.lastChild, false, 1)) {\n              node.appendChild(dom.create('br'));\n            }\n          }\n        } else {\n          if (parentNode === dom.getRoot()) {\n            if (!format.list_block || !isEq$5(node, format.list_block)) {\n              each$d(Tools.grep(node.childNodes), function (node) {\n                if (FormatUtils.isValid(ed, forcedRootBlock, node.nodeName.toLowerCase())) {\n                  if (!rootBlockElm) {\n                    rootBlockElm = wrap$2(dom, node, forcedRootBlock);\n                    dom.setAttribs(rootBlockElm, ed.settings.forced_root_block_attrs);\n                  } else {\n                    rootBlockElm.appendChild(node);\n                  }\n                } else {\n                  rootBlockElm = 0;\n                }\n              });\n            }\n          }\n        }\n      }\n      if (format.selector && format.inline && !isEq$5(format.inline, node)) {\n        return;\n      }\n      dom.remove(node, 1);\n    };\n    var removeFormat = function (ed, format, vars, node, compareNode) {\n      var i, attrs, stylesModified;\n      var dom = ed.dom;\n      if (!matchName$1(dom, node, format) && !isColorFormatAndAnchor(node, format)) {\n        return false;\n      }\n      if (format.remove !== 'all') {\n        each$d(format.styles, function (value, name) {\n          value = FormatUtils.normalizeStyleValue(dom, FormatUtils.replaceVars(value, vars), name);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (format.remove_similar || (!compareNode || isEq$5(FormatUtils.getStyle(dom, compareNode, name), value))) {\n            dom.setStyle(node, name, '');\n          }\n          stylesModified = 1;\n        });\n        if (stylesModified && dom.getAttrib(node, 'style') === '') {\n          node.removeAttribute('style');\n          node.removeAttribute('data-mce-style');\n        }\n        each$d(format.attributes, function (value, name) {\n          var valueOut;\n          value = FormatUtils.replaceVars(value, vars);\n          if (typeof name === 'number') {\n            name = value;\n            compareNode = 0;\n          }\n          if (!compareNode || isEq$5(dom.getAttrib(compareNode, name), value)) {\n            if (name === 'class') {\n              value = dom.getAttrib(node, name);\n              if (value) {\n                valueOut = '';\n                each$d(value.split(/\\s+/), function (cls) {\n                  if (/mce\\-\\w+/.test(cls)) {\n                    valueOut += (valueOut ? ' ' : '') + cls;\n                  }\n                });\n                if (valueOut) {\n                  dom.setAttrib(node, name, valueOut);\n                  return;\n                }\n              }\n            }\n            if (name === 'class') {\n              node.removeAttribute('className');\n            }\n            if (MCE_ATTR_RE.test(name)) {\n              node.removeAttribute('data-mce-' + name);\n            }\n            node.removeAttribute(name);\n          }\n        });\n        each$d(format.classes, function (value) {\n          value = FormatUtils.replaceVars(value, vars);\n          if (!compareNode || dom.hasClass(compareNode, value)) {\n            dom.removeClass(node, value);\n          }\n        });\n        attrs = dom.getAttribs(node);\n        for (i = 0; i < attrs.length; i++) {\n          var attrName = attrs[i].nodeName;\n          if (attrName.indexOf('_') !== 0 && attrName.indexOf('data-') !== 0) {\n            return false;\n          }\n        }\n      }\n      if (format.remove !== 'none') {\n        removeNode$1(ed, node, format);\n        return true;\n      }\n    };\n    var findFormatRoot = function (editor, container, name, vars, similar) {\n      var formatRoot;\n      each$d(FormatUtils.getParents(editor.dom, container.parentNode).reverse(), function (parent) {\n        var format;\n        if (!formatRoot && parent.id !== '_start' && parent.id !== '_end') {\n          format = MatchFormat.matchNode(editor, parent, name, vars, similar);\n          if (format && format.split !== false) {\n            formatRoot = parent;\n          }\n        }\n      });\n      return formatRoot;\n    };\n    var wrapAndSplit = function (editor, formatList, formatRoot, container, target, split, format, vars) {\n      var parent, clone, lastClone, firstClone, i, formatRootParent;\n      var dom = editor.dom;\n      if (formatRoot) {\n        formatRootParent = formatRoot.parentNode;\n        for (parent = container.parentNode; parent && parent !== formatRootParent; parent = parent.parentNode) {\n          clone = dom.clone(parent, false);\n          for (i = 0; i < formatList.length; i++) {\n            if (removeFormat(editor, formatList[i], vars, clone, clone)) {\n              clone = 0;\n              break;\n            }\n          }\n          if (clone) {\n            if (lastClone) {\n              clone.appendChild(lastClone);\n            }\n            if (!firstClone) {\n              firstClone = clone;\n            }\n            lastClone = clone;\n          }\n        }\n        if (split && (!format.mixed || !dom.isBlock(formatRoot))) {\n          container = dom.split(formatRoot, container);\n        }\n        if (lastClone) {\n          target.parentNode.insertBefore(lastClone, target);\n          firstClone.appendChild(target);\n        }\n      }\n      return container;\n    };\n    var remove$6 = function (ed, name, vars, node, similar) {\n      var formatList = ed.formatter.get(name), format = formatList[0];\n      var bookmark, rng, contentEditable = true;\n      var dom = ed.dom;\n      var selection = ed.selection;\n      var splitToFormatRoot = function (container) {\n        var formatRoot = findFormatRoot(ed, container, name, vars, similar);\n        return wrapAndSplit(ed, formatList, formatRoot, container, container, true, format, vars);\n      };\n      var isRemoveBookmarkNode = function (node) {\n        return Bookmarks.isBookmarkNode(node) && NodeType.isElement(node) && (node.id === '_start' || node.id === '_end');\n      };\n      var process = function (node) {\n        var children, i, l, lastContentEditable, hasContentEditableState;\n        if (NodeType.isElement(node) && dom.getContentEditable(node)) {\n          lastContentEditable = contentEditable;\n          contentEditable = dom.getContentEditable(node) === 'true';\n          hasContentEditableState = true;\n        }\n        children = Tools.grep(node.childNodes);\n        if (contentEditable && !hasContentEditableState) {\n          for (i = 0, l = formatList.length; i < l; i++) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        if (format.deep) {\n          if (children.length) {\n            for (i = 0, l = children.length; i < l; i++) {\n              process(children[i]);\n            }\n            if (hasContentEditableState) {\n              contentEditable = lastContentEditable;\n            }\n          }\n        }\n      };\n      var unwrap = function (start) {\n        var node = dom.get(start ? '_start' : '_end');\n        var out = node[start ? 'firstChild' : 'lastChild'];\n        if (isRemoveBookmarkNode(out)) {\n          out = out[start ? 'firstChild' : 'lastChild'];\n        }\n        if (NodeType.isText(out) && out.data.length === 0) {\n          out = start ? node.previousSibling || node.nextSibling : node.nextSibling || node.previousSibling;\n        }\n        dom.remove(node, true);\n        return out;\n      };\n      var removeRngStyle = function (rng) {\n        var startContainer, endContainer;\n        var commonAncestorContainer = rng.commonAncestorContainer;\n        rng = ExpandRange.expandRng(ed, rng, formatList, true);\n        if (format.split) {\n          rng = SplitRange.split(rng);\n          startContainer = getContainer(ed, rng, true);\n          endContainer = getContainer(ed, rng);\n          if (startContainer !== endContainer) {\n            if (/^(TR|TH|TD)$/.test(startContainer.nodeName) && startContainer.firstChild) {\n              if (startContainer.nodeName === 'TR') {\n                startContainer = startContainer.firstChild.firstChild || startContainer;\n              } else {\n                startContainer = startContainer.firstChild || startContainer;\n              }\n            }\n            if (commonAncestorContainer && /^T(HEAD|BODY|FOOT|R)$/.test(commonAncestorContainer.nodeName) && isTableCell$4(endContainer) && endContainer.firstChild) {\n              endContainer = endContainer.firstChild || endContainer;\n            }\n            if (isChildOfInlineParent(dom, startContainer, endContainer)) {\n              var marker = Option.from(startContainer.firstChild).getOr(startContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, true, 'span', {\n                'id': '_start',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(true);\n              return;\n            }\n            if (isChildOfInlineParent(dom, endContainer, startContainer)) {\n              var marker = Option.from(endContainer.lastChild).getOr(endContainer);\n              splitToFormatRoot(wrapWithSiblings(dom, marker, false, 'span', {\n                'id': '_end',\n                'data-mce-type': 'bookmark'\n              }));\n              unwrap(false);\n              return;\n            }\n            startContainer = wrap$2(dom, startContainer, 'span', {\n              'id': '_start',\n              'data-mce-type': 'bookmark'\n            });\n            endContainer = wrap$2(dom, endContainer, 'span', {\n              'id': '_end',\n              'data-mce-type': 'bookmark'\n            });\n            splitToFormatRoot(startContainer);\n            splitToFormatRoot(endContainer);\n            startContainer = unwrap(true);\n            endContainer = unwrap();\n          } else {\n            startContainer = endContainer = splitToFormatRoot(startContainer);\n          }\n          rng.startContainer = startContainer.parentNode ? startContainer.parentNode : startContainer;\n          rng.startOffset = dom.nodeIndex(startContainer);\n          rng.endContainer = endContainer.parentNode ? endContainer.parentNode : endContainer;\n          rng.endOffset = dom.nodeIndex(endContainer) + 1;\n        }\n        RangeWalk.walk(dom, rng, function (nodes) {\n          each$d(nodes, function (node) {\n            process(node);\n            if (NodeType.isElement(node) && ed.dom.getStyle(node, 'text-decoration') === 'underline' && node.parentNode && FormatUtils.getTextDecoration(dom, node.parentNode) === 'underline') {\n              removeFormat(ed, {\n                deep: false,\n                exact: true,\n                inline: 'span',\n                styles: { textDecoration: 'underline' }\n              }, null, node);\n            }\n          });\n        });\n      };\n      if (node) {\n        if (node.nodeType) {\n          rng = dom.createRng();\n          rng.setStartBefore(node);\n          rng.setEndAfter(node);\n          removeRngStyle(rng);\n        } else {\n          removeRngStyle(node);\n        }\n        return;\n      }\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride) {\n            if (removeFormat(ed, formatList[i], vars, node, node)) {\n              break;\n            }\n          }\n        }\n        return;\n      }\n      if (!selection.isCollapsed() || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n        bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n        removeRngStyle(selection.getRng());\n        selection.moveToBookmark(bookmark);\n        if (format.inline && MatchFormat.match(ed, name, vars, selection.getStart())) {\n          FormatUtils.moveStart(dom, selection, selection.getRng());\n        }\n        ed.nodeChanged();\n      } else {\n        removeCaretFormat(ed, name, vars, similar);\n      }\n    };\n    var RemoveFormat = {\n      removeFormat: removeFormat,\n      remove: remove$6\n    };\n\n    var each$e = Tools.each;\n    var isElementNode = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var findElementSibling = function (node, siblingName) {\n      var sibling;\n      for (sibling = node; sibling; sibling = sibling[siblingName]) {\n        if (sibling.nodeType === 3 && sibling.nodeValue.length !== 0) {\n          return node;\n        }\n        if (sibling.nodeType === 1 && !Bookmarks.isBookmarkNode(sibling)) {\n          return sibling;\n        }\n      }\n      return node;\n    };\n    var mergeSiblingsNodes = function (dom, prev, next) {\n      var sibling, tmpSibling;\n      var elementUtils = new ElementUtils(dom);\n      if (prev && next) {\n        prev = findElementSibling(prev, 'previousSibling');\n        next = findElementSibling(next, 'nextSibling');\n        if (elementUtils.compare(prev, next)) {\n          for (sibling = prev.nextSibling; sibling && sibling !== next;) {\n            tmpSibling = sibling;\n            sibling = sibling.nextSibling;\n            prev.appendChild(tmpSibling);\n          }\n          dom.remove(next);\n          Tools.each(Tools.grep(next.childNodes), function (node) {\n            prev.appendChild(node);\n          });\n          return prev;\n        }\n      }\n      return next;\n    };\n    var processChildElements = function (node, filter, process) {\n      each$e(node.childNodes, function (node) {\n        if (isElementNode(node)) {\n          if (filter(node)) {\n            process(node);\n          }\n          if (node.hasChildNodes()) {\n            processChildElements(node, filter, process);\n          }\n        }\n      });\n    };\n    var hasStyle = function (dom, name) {\n      return curry(function (name, node) {\n        return !!(node && FormatUtils.getStyle(dom, node, name));\n      }, name);\n    };\n    var applyStyle = function (dom, name, value) {\n      return curry(function (name, value, node) {\n        dom.setStyle(node, name, value);\n        if (node.getAttribute('style') === '') {\n          node.removeAttribute('style');\n        }\n        unwrapEmptySpan(dom, node);\n      }, name, value);\n    };\n    var unwrapEmptySpan = function (dom, node) {\n      if (node.nodeName === 'SPAN' && dom.getAttribs(node).length === 0) {\n        dom.remove(node, true);\n      }\n    };\n    var processUnderlineAndColor = function (dom, node) {\n      var textDecoration;\n      if (node.nodeType === 1 && node.parentNode && node.parentNode.nodeType === 1) {\n        textDecoration = FormatUtils.getTextDecoration(dom, node.parentNode);\n        if (dom.getStyle(node, 'color') && textDecoration) {\n          dom.setStyle(node, 'text-decoration', textDecoration);\n        } else if (dom.getStyle(node, 'text-decoration') === textDecoration) {\n          dom.setStyle(node, 'text-decoration', null);\n        }\n      }\n    };\n    var mergeUnderlineAndColor = function (dom, format, vars, node) {\n      if (format.styles.color || format.styles.textDecoration) {\n        Tools.walk(node, curry(processUnderlineAndColor, dom), 'childNodes');\n        processUnderlineAndColor(dom, node);\n      }\n    };\n    var mergeBackgroundColorAndFontSize = function (dom, format, vars, node) {\n      if (format.styles && format.styles.backgroundColor) {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'backgroundColor', FormatUtils.replaceVars(format.styles.backgroundColor, vars)));\n      }\n    };\n    var mergeSubSup = function (dom, format, vars, node) {\n      if (format.inline === 'sub' || format.inline === 'sup') {\n        processChildElements(node, hasStyle(dom, 'fontSize'), applyStyle(dom, 'fontSize', ''));\n        dom.remove(dom.select(format.inline === 'sup' ? 'sub' : 'sup', node), true);\n      }\n    };\n    var mergeSiblings = function (dom, format, vars, node) {\n      if (node && format.merge_siblings !== false) {\n        node = mergeSiblingsNodes(dom, FormatUtils.getNonWhiteSpaceSibling(node), node);\n        node = mergeSiblingsNodes(dom, node, FormatUtils.getNonWhiteSpaceSibling(node, true));\n      }\n    };\n    var clearChildStyles = function (dom, format, node) {\n      if (format.clear_child_styles) {\n        var selector = format.links ? '*:not(a)' : '*';\n        each$e(dom.select(selector, node), function (node) {\n          if (isElementNode(node)) {\n            each$e(format.styles, function (value, name) {\n              dom.setStyle(node, name, '');\n            });\n          }\n        });\n      }\n    };\n    var mergeWithChildren = function (editor, formatList, vars, node) {\n      each$e(formatList, function (format) {\n        each$e(editor.dom.select(format.inline, node), function (child) {\n          if (!isElementNode(child)) {\n            return;\n          }\n          RemoveFormat.removeFormat(editor, format, vars, child, format.exact ? child : null);\n        });\n        clearChildStyles(editor.dom, format, node);\n      });\n    };\n    var mergeWithParents = function (editor, format, name, vars, node) {\n      if (MatchFormat.matchNode(editor, node.parentNode, name, vars)) {\n        if (RemoveFormat.removeFormat(editor, format, vars, node)) {\n          return;\n        }\n      }\n      if (format.merge_with_parents) {\n        editor.dom.getParent(node.parentNode, function (parent) {\n          if (MatchFormat.matchNode(editor, parent, name, vars)) {\n            RemoveFormat.removeFormat(editor, format, vars, node);\n            return true;\n          }\n        });\n      }\n    };\n    var MergeFormats = {\n      mergeWithChildren: mergeWithChildren,\n      mergeUnderlineAndColor: mergeUnderlineAndColor,\n      mergeBackgroundColorAndFontSize: mergeBackgroundColorAndFontSize,\n      mergeSubSup: mergeSubSup,\n      mergeSiblings: mergeSiblings,\n      mergeWithParents: mergeWithParents\n    };\n\n    var each$f = Tools.each;\n    var isElementNode$1 = function (node) {\n      return node && node.nodeType === 1 && !Bookmarks.isBookmarkNode(node) && !isCaretNode(node) && !NodeType.isBogus(node);\n    };\n    var applyFormat = function (ed, name, vars, node) {\n      var formatList = ed.formatter.get(name);\n      var format = formatList[0];\n      var bookmark, rng;\n      var isCollapsed = !node && ed.selection.isCollapsed();\n      var dom = ed.dom, selection = ed.selection;\n      var setElementFormat = function (elm, fmt) {\n        fmt = fmt || format;\n        if (elm) {\n          if (fmt.onformat) {\n            fmt.onformat(elm, fmt, vars, node);\n          }\n          each$f(fmt.styles, function (value, name) {\n            dom.setStyle(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          if (fmt.styles) {\n            var styleVal = dom.getAttrib(elm, 'style');\n            if (styleVal) {\n              elm.setAttribute('data-mce-style', styleVal);\n            }\n          }\n          each$f(fmt.attributes, function (value, name) {\n            dom.setAttrib(elm, name, FormatUtils.replaceVars(value, vars));\n          });\n          each$f(fmt.classes, function (value) {\n            value = FormatUtils.replaceVars(value, vars);\n            if (!dom.hasClass(elm, value)) {\n              dom.addClass(elm, value);\n            }\n          });\n        }\n      };\n      var applyNodeStyle = function (formatList, node) {\n        var found = false;\n        if (!format.selector) {\n          return false;\n        }\n        each$f(formatList, function (format) {\n          if ('collapsed' in format && format.collapsed !== isCollapsed) {\n            return;\n          }\n          if (dom.is(node, format.selector) && !isCaretNode(node)) {\n            setElementFormat(node, format);\n            found = true;\n            return false;\n          }\n        });\n        return found;\n      };\n      var applyRngStyle = function (dom, rng, bookmark, nodeSpecific) {\n        var newWrappers = [];\n        var wrapName, wrapElm, contentEditable = true;\n        wrapName = format.inline || format.block;\n        wrapElm = dom.create(wrapName);\n        setElementFormat(wrapElm);\n        RangeWalk.walk(dom, rng, function (nodes) {\n          var currentWrapElm;\n          var process = function (node) {\n            var nodeName, parentName, hasContentEditableState, lastContentEditable;\n            lastContentEditable = contentEditable;\n            nodeName = node.nodeName.toLowerCase();\n            parentName = node.parentNode.nodeName.toLowerCase();\n            if (node.nodeType === 1 && dom.getContentEditable(node)) {\n              lastContentEditable = contentEditable;\n              contentEditable = dom.getContentEditable(node) === 'true';\n              hasContentEditableState = true;\n            }\n            if (FormatUtils.isEq(nodeName, 'br')) {\n              currentWrapElm = 0;\n              if (format.block) {\n                dom.remove(node);\n              }\n              return;\n            }\n            if (format.wrapper && MatchFormat.matchNode(ed, node, name, vars)) {\n              currentWrapElm = 0;\n              return;\n            }\n            if (contentEditable && !hasContentEditableState && format.block && !format.wrapper && FormatUtils.isTextBlock(ed, nodeName) && FormatUtils.isValid(ed, parentName, wrapName)) {\n              node = dom.rename(node, wrapName);\n              setElementFormat(node);\n              newWrappers.push(node);\n              currentWrapElm = 0;\n              return;\n            }\n            if (format.selector) {\n              var found = applyNodeStyle(formatList, node);\n              if (!format.inline || found) {\n                currentWrapElm = 0;\n                return;\n              }\n            }\n            if (contentEditable && !hasContentEditableState && FormatUtils.isValid(ed, wrapName, nodeName) && FormatUtils.isValid(ed, parentName, wrapName) && !(!nodeSpecific && node.nodeType === 3 && node.nodeValue.length === 1 && node.nodeValue.charCodeAt(0) === 65279) && !isCaretNode(node) && (!format.inline || !dom.isBlock(node))) {\n              if (!currentWrapElm) {\n                currentWrapElm = dom.clone(wrapElm, false);\n                node.parentNode.insertBefore(currentWrapElm, node);\n                newWrappers.push(currentWrapElm);\n              }\n              currentWrapElm.appendChild(node);\n            } else {\n              currentWrapElm = 0;\n              each$f(Tools.grep(node.childNodes), process);\n              if (hasContentEditableState) {\n                contentEditable = lastContentEditable;\n              }\n              currentWrapElm = 0;\n            }\n          };\n          each$f(nodes, process);\n        });\n        if (format.links === true) {\n          each$f(newWrappers, function (node) {\n            var process = function (node) {\n              if (node.nodeName === 'A') {\n                setElementFormat(node, format);\n              }\n              each$f(Tools.grep(node.childNodes), process);\n            };\n            process(node);\n          });\n        }\n        each$f(newWrappers, function (node) {\n          var childCount;\n          var getChildCount = function (node) {\n            var count = 0;\n            each$f(node.childNodes, function (node) {\n              if (!FormatUtils.isWhiteSpaceNode(node) && !Bookmarks.isBookmarkNode(node)) {\n                count++;\n              }\n            });\n            return count;\n          };\n          var getChildElementNode = function (root) {\n            var child = false;\n            each$f(root.childNodes, function (node) {\n              if (isElementNode$1(node)) {\n                child = node;\n                return false;\n              }\n            });\n            return child;\n          };\n          var mergeStyles = function (node) {\n            var child, clone;\n            child = getChildElementNode(node);\n            if (child && !Bookmarks.isBookmarkNode(child) && MatchFormat.matchName(dom, child, format)) {\n              clone = dom.clone(child, false);\n              setElementFormat(clone);\n              dom.replace(clone, node, true);\n              dom.remove(child, 1);\n            }\n            return clone || node;\n          };\n          childCount = getChildCount(node);\n          if ((newWrappers.length > 1 || !dom.isBlock(node)) && childCount === 0) {\n            dom.remove(node, 1);\n            return;\n          }\n          if (format.inline || format.wrapper) {\n            if (!format.exact && childCount === 1) {\n              node = mergeStyles(node);\n            }\n            MergeFormats.mergeWithChildren(ed, formatList, vars, node);\n            MergeFormats.mergeWithParents(ed, format, name, vars, node);\n            MergeFormats.mergeBackgroundColorAndFontSize(dom, format, vars, node);\n            MergeFormats.mergeSubSup(dom, format, vars, node);\n            MergeFormats.mergeSiblings(dom, format, vars, node);\n          }\n        });\n      };\n      if (dom.getContentEditable(selection.getNode()) === 'false') {\n        node = selection.getNode();\n        for (var i = 0, l = formatList.length; i < l; i++) {\n          if (formatList[i].ceFalseOverride && dom.is(node, formatList[i].selector)) {\n            setElementFormat(node, formatList[i]);\n            return;\n          }\n        }\n        return;\n      }\n      if (format) {\n        if (node) {\n          if (node.nodeType) {\n            if (!applyNodeStyle(formatList, node)) {\n              rng = dom.createRng();\n              rng.setStartBefore(node);\n              rng.setEndAfter(node);\n              applyRngStyle(dom, ExpandRange.expandRng(ed, rng, formatList), null, true);\n            }\n          } else {\n            applyRngStyle(dom, node, null, true);\n          }\n        } else {\n          if (!isCollapsed || !format.inline || dom.select('td[data-mce-selected],th[data-mce-selected]').length) {\n            var curSelNode = ed.selection.getNode();\n            if (!ed.settings.forced_root_block && formatList[0].defaultBlock && !dom.getParent(curSelNode, dom.isBlock)) {\n              applyFormat(ed, formatList[0].defaultBlock);\n            }\n            ed.selection.setRng(RangeNormalizer.normalize(ed.selection.getRng()));\n            bookmark = GetBookmark.getPersistentBookmark(ed.selection, true);\n            applyRngStyle(dom, ExpandRange.expandRng(ed, selection.getRng(), formatList));\n            if (format.styles) {\n              MergeFormats.mergeUnderlineAndColor(dom, format, vars, curSelNode);\n            }\n            selection.moveToBookmark(bookmark);\n            FormatUtils.moveStart(dom, selection, selection.getRng());\n            ed.nodeChanged();\n          } else {\n            applyCaretFormat(ed, name, vars);\n          }\n        }\n        Hooks.postProcess(name, ed);\n      }\n    };\n    var ApplyFormat = { applyFormat: applyFormat };\n\n    var each$g = Tools.each;\n    var setup$5 = function (formatChangeData, editor) {\n      var currentFormats = {};\n      formatChangeData.set({});\n      editor.on('NodeChange', function (e) {\n        var parents = FormatUtils.getParents(editor.dom, e.element);\n        var matchedFormats = {};\n        parents = Tools.grep(parents, function (node) {\n          return node.nodeType === 1 && !node.getAttribute('data-mce-bogus');\n        });\n        each$g(formatChangeData.get(), function (callbacks, format) {\n          each$g(parents, function (node) {\n            if (editor.formatter.matchNode(node, format, {}, callbacks.similar)) {\n              if (!currentFormats[format]) {\n                each$g(callbacks, function (callback) {\n                  callback(true, {\n                    node: node,\n                    format: format,\n                    parents: parents\n                  });\n                });\n                currentFormats[format] = callbacks;\n              }\n              matchedFormats[format] = callbacks;\n              return false;\n            }\n            if (MatchFormat.matchesUnInheritedFormatSelector(editor, node, format)) {\n              return false;\n            }\n          });\n        });\n        each$g(currentFormats, function (callbacks, format) {\n          if (!matchedFormats[format]) {\n            delete currentFormats[format];\n            each$g(callbacks, function (callback) {\n              callback(false, {\n                node: e.element,\n                format: format,\n                parents: parents\n              });\n            });\n          }\n        });\n      });\n    };\n    var addListeners = function (formatChangeData, formats, callback, similar) {\n      var formatChangeItems = formatChangeData.get();\n      each$g(formats.split(','), function (format) {\n        if (!formatChangeItems[format]) {\n          formatChangeItems[format] = [];\n          formatChangeItems[format].similar = similar;\n        }\n        formatChangeItems[format].push(callback);\n      });\n      formatChangeData.set(formatChangeItems);\n    };\n    var formatChanged = function (editor, formatChangeState, formats, callback, similar) {\n      if (formatChangeState.get() === null) {\n        setup$5(formatChangeState, editor);\n      }\n      addListeners(formatChangeState, formats, callback, similar);\n    };\n    var FormatChanged = { formatChanged: formatChanged };\n\n    var get$5 = function (dom) {\n      var formats = {\n        valigntop: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'top' }\n          }],\n        valignmiddle: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'middle' }\n          }],\n        valignbottom: [{\n            selector: 'td,th',\n            styles: { verticalAlign: 'bottom' }\n          }],\n        alignleft: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-left',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'left' },\n            inherit: false,\n            preview: false,\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'left' },\n            preview: 'font-family font-size'\n          }\n        ],\n        aligncenter: [\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'center' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-center',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'img',\n            collapsed: false,\n            styles: {\n              display: 'block',\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: false\n          },\n          {\n            selector: 'table',\n            collapsed: false,\n            styles: {\n              marginLeft: 'auto',\n              marginRight: 'auto'\n            },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignright: [\n          {\n            selector: 'figure.image',\n            collapsed: false,\n            classes: 'align-right',\n            ceFalseOverride: true,\n            preview: 'font-family font-size'\n          },\n          {\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'right' },\n            inherit: false,\n            preview: 'font-family font-size',\n            defaultBlock: 'div'\n          },\n          {\n            selector: 'img,table',\n            collapsed: false,\n            styles: { float: 'right' },\n            preview: 'font-family font-size'\n          }\n        ],\n        alignjustify: [{\n            selector: 'figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li',\n            styles: { textAlign: 'justify' },\n            inherit: false,\n            defaultBlock: 'div',\n            preview: 'font-family font-size'\n          }],\n        bold: [\n          {\n            inline: 'strong',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontWeight: 'bold' }\n          },\n          {\n            inline: 'b',\n            remove: 'all'\n          }\n        ],\n        italic: [\n          {\n            inline: 'em',\n            remove: 'all'\n          },\n          {\n            inline: 'span',\n            styles: { fontStyle: 'italic' }\n          },\n          {\n            inline: 'i',\n            remove: 'all'\n          }\n        ],\n        underline: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'underline' },\n            exact: true\n          },\n          {\n            inline: 'u',\n            remove: 'all'\n          }\n        ],\n        strikethrough: [\n          {\n            inline: 'span',\n            styles: { textDecoration: 'line-through' },\n            exact: true\n          },\n          {\n            inline: 'strike',\n            remove: 'all'\n          }\n        ],\n        forecolor: {\n          inline: 'span',\n          styles: { color: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        hilitecolor: {\n          inline: 'span',\n          styles: { backgroundColor: '%value' },\n          links: true,\n          remove_similar: true,\n          clear_child_styles: true\n        },\n        fontname: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontFamily: '%value' },\n          clear_child_styles: true\n        },\n        fontsize: {\n          inline: 'span',\n          toggle: false,\n          styles: { fontSize: '%value' },\n          clear_child_styles: true\n        },\n        fontsize_class: {\n          inline: 'span',\n          attributes: { class: '%value' }\n        },\n        blockquote: {\n          block: 'blockquote',\n          wrapper: 1,\n          remove: 'all'\n        },\n        subscript: { inline: 'sub' },\n        superscript: { inline: 'sup' },\n        code: { inline: 'code' },\n        link: {\n          inline: 'a',\n          selector: 'a',\n          remove: 'all',\n          split: true,\n          deep: true,\n          onmatch: function () {\n            return true;\n          },\n          onformat: function (elm, fmt, vars) {\n            Tools.each(vars, function (value, key) {\n              dom.setAttrib(elm, key, value);\n            });\n          }\n        },\n        removeformat: [\n          {\n            selector: 'b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins',\n            remove: 'all',\n            split: true,\n            expand: false,\n            block_expand: true,\n            deep: true\n          },\n          {\n            selector: 'span',\n            attributes: [\n              'style',\n              'class'\n            ],\n            remove: 'empty',\n            split: true,\n            expand: false,\n            deep: true\n          },\n          {\n            selector: '*',\n            attributes: [\n              'style',\n              'class'\n            ],\n            split: false,\n            expand: false,\n            deep: true\n          }\n        ]\n      };\n      Tools.each('p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp'.split(/\\s/), function (name) {\n        formats[name] = {\n          block: name,\n          remove: 'all'\n        };\n      });\n      return formats;\n    };\n    var DefaultFormats = { get: get$5 };\n\n    function FormatRegistry (editor) {\n      var formats = {};\n      var get = function (name) {\n        return name ? formats[name] : formats;\n      };\n      var register = function (name, format) {\n        if (name) {\n          if (typeof name !== 'string') {\n            Tools.each(name, function (format, name) {\n              register(name, format);\n            });\n          } else {\n            format = format.length ? format : [format];\n            Tools.each(format, function (format) {\n              if (typeof format.deep === 'undefined') {\n                format.deep = !format.selector;\n              }\n              if (typeof format.split === 'undefined') {\n                format.split = !format.selector || format.inline;\n              }\n              if (typeof format.remove === 'undefined' && format.selector && !format.inline) {\n                format.remove = 'none';\n              }\n              if (format.selector && format.inline) {\n                format.mixed = true;\n                format.block_expand = true;\n              }\n              if (typeof format.classes === 'string') {\n                format.classes = format.classes.split(/\\s+/);\n              }\n            });\n            formats[name] = format;\n          }\n        }\n      };\n      var unregister = function (name) {\n        if (name && formats[name]) {\n          delete formats[name];\n        }\n        return formats;\n      };\n      register(DefaultFormats.get(editor.dom));\n      register(editor.settings.formats);\n      return {\n        get: get,\n        register: register,\n        unregister: unregister\n      };\n    }\n\n    var each$h = Tools.each;\n    var dom = DOMUtils$1.DOM;\n    var parsedSelectorToHtml = function (ancestry, editor) {\n      var elm, item, fragment;\n      var schema = editor && editor.schema || Schema({});\n      var decorate = function (elm, item) {\n        if (item.classes.length) {\n          dom.addClass(elm, item.classes.join(' '));\n        }\n        dom.setAttribs(elm, item.attrs);\n      };\n      var createElement = function (sItem) {\n        var elm;\n        item = typeof sItem === 'string' ? {\n          name: sItem,\n          classes: [],\n          attrs: {}\n        } : sItem;\n        elm = dom.create(item.name);\n        decorate(elm, item);\n        return elm;\n      };\n      var getRequiredParent = function (elm, candidate) {\n        var name = typeof elm !== 'string' ? elm.nodeName.toLowerCase() : elm;\n        var elmRule = schema.getElementRule(name);\n        var parentsRequired = elmRule && elmRule.parentsRequired;\n        if (parentsRequired && parentsRequired.length) {\n          return candidate && Tools.inArray(parentsRequired, candidate) !== -1 ? candidate : parentsRequired[0];\n        } else {\n          return false;\n        }\n      };\n      var wrapInHtml = function (elm, ancestry, siblings) {\n        var parent, parentCandidate, parentRequired;\n        var ancestor = ancestry.length > 0 && ancestry[0];\n        var ancestorName = ancestor && ancestor.name;\n        parentRequired = getRequiredParent(elm, ancestorName);\n        if (parentRequired) {\n          if (ancestorName === parentRequired) {\n            parentCandidate = ancestry[0];\n            ancestry = ancestry.slice(1);\n          } else {\n            parentCandidate = parentRequired;\n          }\n        } else if (ancestor) {\n          parentCandidate = ancestry[0];\n          ancestry = ancestry.slice(1);\n        } else if (!siblings) {\n          return elm;\n        }\n        if (parentCandidate) {\n          parent = createElement(parentCandidate);\n          parent.appendChild(elm);\n        }\n        if (siblings) {\n          if (!parent) {\n            parent = dom.create('div');\n            parent.appendChild(elm);\n          }\n          Tools.each(siblings, function (sibling) {\n            var siblingElm = createElement(sibling);\n            parent.insertBefore(siblingElm, elm);\n          });\n        }\n        return wrapInHtml(parent, ancestry, parentCandidate && parentCandidate.siblings);\n      };\n      if (ancestry && ancestry.length) {\n        item = ancestry[0];\n        elm = createElement(item);\n        fragment = dom.create('div');\n        fragment.appendChild(wrapInHtml(elm, ancestry.slice(1), item.siblings));\n        return fragment;\n      } else {\n        return '';\n      }\n    };\n    var selectorToHtml = function (selector, editor) {\n      return parsedSelectorToHtml(parseSelector(selector), editor);\n    };\n    var parseSelectorItem = function (item) {\n      var tagName;\n      var obj = {\n        classes: [],\n        attrs: {}\n      };\n      item = obj.selector = Tools.trim(item);\n      if (item !== '*') {\n        tagName = item.replace(/(?:([#\\.]|::?)([\\w\\-]+)|(\\[)([^\\]]+)\\]?)/g, function ($0, $1, $2, $3, $4) {\n          switch ($1) {\n          case '#':\n            obj.attrs.id = $2;\n            break;\n          case '.':\n            obj.classes.push($2);\n            break;\n          case ':':\n            if (Tools.inArray('checked disabled enabled read-only required'.split(' '), $2) !== -1) {\n              obj.attrs[$2] = $2;\n            }\n            break;\n          }\n          if ($3 === '[') {\n            var m = $4.match(/([\\w\\-]+)(?:\\=\\\"([^\\\"]+))?/);\n            if (m) {\n              obj.attrs[m[1]] = m[2];\n            }\n          }\n          return '';\n        });\n      }\n      obj.name = tagName || 'div';\n      return obj;\n    };\n    var parseSelector = function (selector) {\n      if (!selector || typeof selector !== 'string') {\n        return [];\n      }\n      selector = selector.split(/\\s*,\\s*/)[0];\n      selector = selector.replace(/\\s*(~\\+|~|\\+|>)\\s*/g, '$1');\n      return Tools.map(selector.split(/(?:>|\\s+(?![^\\[\\]]+\\]))/), function (item) {\n        var siblings = Tools.map(item.split(/(?:~\\+|~|\\+)/), parseSelectorItem);\n        var obj = siblings.pop();\n        if (siblings.length) {\n          obj.siblings = siblings;\n        }\n        return obj;\n      }).reverse();\n    };\n    var getCssText = function (editor, format) {\n      var name, previewFrag, previewElm, items;\n      var previewCss = '', parentFontSize, previewStyles;\n      previewStyles = editor.settings.preview_styles;\n      if (previewStyles === false) {\n        return '';\n      }\n      if (typeof previewStyles !== 'string') {\n        previewStyles = 'font-family font-size font-weight font-style text-decoration ' + 'text-transform color background-color border border-radius outline text-shadow';\n      }\n      var removeVars = function (val) {\n        return val.replace(/%(\\w+)/g, '');\n      };\n      if (typeof format === 'string') {\n        format = editor.formatter.get(format);\n        if (!format) {\n          return;\n        }\n        format = format[0];\n      }\n      if ('preview' in format) {\n        previewStyles = format.preview;\n        if (previewStyles === false) {\n          return '';\n        }\n      }\n      name = format.block || format.inline || 'span';\n      items = parseSelector(format.selector);\n      if (items.length) {\n        if (!items[0].name) {\n          items[0].name = name;\n        }\n        name = format.selector;\n        previewFrag = parsedSelectorToHtml(items, editor);\n      } else {\n        previewFrag = parsedSelectorToHtml([name], editor);\n      }\n      previewElm = dom.select(name, previewFrag)[0] || previewFrag.firstChild;\n      each$h(format.styles, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setStyle(previewElm, name, value);\n        }\n      });\n      each$h(format.attributes, function (value, name) {\n        value = removeVars(value);\n        if (value) {\n          dom.setAttrib(previewElm, name, value);\n        }\n      });\n      each$h(format.classes, function (value) {\n        value = removeVars(value);\n        if (!dom.hasClass(previewElm, value)) {\n          dom.addClass(previewElm, value);\n        }\n      });\n      editor.fire('PreviewFormats');\n      dom.setStyles(previewFrag, {\n        position: 'absolute',\n        left: -65535\n      });\n      editor.getBody().appendChild(previewFrag);\n      parentFontSize = dom.getStyle(editor.getBody(), 'fontSize', true);\n      parentFontSize = /px$/.test(parentFontSize) ? parseInt(parentFontSize, 10) : 0;\n      each$h(previewStyles.split(' '), function (name) {\n        var value = dom.getStyle(previewElm, name, true);\n        if (name === 'background-color' && /transparent|rgba\\s*\\([^)]+,\\s*0\\)/.test(value)) {\n          value = dom.getStyle(editor.getBody(), name, true);\n          if (dom.toHex(value).toLowerCase() === '#ffffff') {\n            return;\n          }\n        }\n        if (name === 'color') {\n          if (dom.toHex(value).toLowerCase() === '#000000') {\n            return;\n          }\n        }\n        if (name === 'font-size') {\n          if (/em|%$/.test(value)) {\n            if (parentFontSize === 0) {\n              return;\n            }\n            var numValue = parseFloat(value) / (/%$/.test(value) ? 100 : 1);\n            value = numValue * parentFontSize + 'px';\n          }\n        }\n        if (name === 'border' && value) {\n          previewCss += 'padding:0 2px;';\n        }\n        previewCss += name + ':' + value + ';';\n      });\n      editor.fire('AfterPreviewFormats');\n      dom.remove(previewFrag);\n      return previewCss;\n    };\n    var Preview = {\n      getCssText: getCssText,\n      parseSelector: parseSelector,\n      selectorToHtml: selectorToHtml\n    };\n\n    var toggle = function (editor, formats, name, vars, node) {\n      var fmt = formats.get(name);\n      if (MatchFormat.match(editor, name, vars, node) && (!('toggle' in fmt[0]) || fmt[0].toggle)) {\n        RemoveFormat.remove(editor, name, vars, node);\n      } else {\n        ApplyFormat.applyFormat(editor, name, vars, node);\n      }\n    };\n    var ToggleFormat = { toggle: toggle };\n\n    var setup$6 = function (editor) {\n      editor.addShortcut('meta+b', '', 'Bold');\n      editor.addShortcut('meta+i', '', 'Italic');\n      editor.addShortcut('meta+u', '', 'Underline');\n      for (var i = 1; i <= 6; i++) {\n        editor.addShortcut('access+' + i, '', [\n          'FormatBlock',\n          false,\n          'h' + i\n        ]);\n      }\n      editor.addShortcut('access+7', '', [\n        'FormatBlock',\n        false,\n        'p'\n      ]);\n      editor.addShortcut('access+8', '', [\n        'FormatBlock',\n        false,\n        'div'\n      ]);\n      editor.addShortcut('access+9', '', [\n        'FormatBlock',\n        false,\n        'address'\n      ]);\n    };\n    var FormatShortcuts = { setup: setup$6 };\n\n    function Formatter (editor) {\n      var formats = FormatRegistry(editor);\n      var formatChangeState = Cell(null);\n      FormatShortcuts.setup(editor);\n      setup$2(editor);\n      return {\n        get: formats.get,\n        register: formats.register,\n        unregister: formats.unregister,\n        apply: curry(ApplyFormat.applyFormat, editor),\n        remove: curry(RemoveFormat.remove, editor),\n        toggle: curry(ToggleFormat.toggle, editor, formats),\n        match: curry(MatchFormat.match, editor),\n        matchAll: curry(MatchFormat.matchAll, editor),\n        matchNode: curry(MatchFormat.matchNode, editor),\n        canApply: curry(MatchFormat.canApply, editor),\n        formatChanged: curry(FormatChanged.formatChanged, editor, formatChangeState),\n        getCssText: curry(Preview.getCssText, editor)\n      };\n    }\n\n    var hasOwnProperty$2 = Object.prototype.hasOwnProperty;\n    var shallow$1 = function (old, nu) {\n      return nu;\n    };\n    var baseMerge = function (merger) {\n      return function () {\n        var objects = new Array(arguments.length);\n        for (var i = 0; i < objects.length; i++) {\n          objects[i] = arguments[i];\n        }\n        if (objects.length === 0) {\n          throw new Error('Can\\'t merge zero objects');\n        }\n        var ret = {};\n        for (var j = 0; j < objects.length; j++) {\n          var curObject = objects[j];\n          for (var key in curObject) {\n            if (hasOwnProperty$2.call(curObject, key)) {\n              ret[key] = merger(ret[key], curObject[key]);\n            }\n          }\n        }\n        return ret;\n      };\n    };\n    var merge = baseMerge(shallow$1);\n\n    var register = function (htmlParser, settings, dom) {\n      htmlParser.addAttributeFilter('data-mce-tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.attr('tabindex', node.attributes.map['data-mce-tabindex']);\n          node.attr(name, null);\n        }\n      });\n      htmlParser.addAttributeFilter('src,href,style', function (nodes, name) {\n        var i = nodes.length, node, value;\n        var internalName = 'data-mce-' + name;\n        var urlConverter = settings.url_converter;\n        var urlConverterScope = settings.url_converter_scope;\n        while (i--) {\n          node = nodes[i];\n          value = node.attributes.map[internalName];\n          if (value !== undefined) {\n            node.attr(name, value.length > 0 ? value : null);\n            node.attr(internalName, null);\n          } else {\n            value = node.attributes.map[name];\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n            } else if (urlConverter) {\n              value = urlConverter.call(urlConverterScope, value, name, node.name);\n            }\n            node.attr(name, value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('class', function (nodes) {\n        var i = nodes.length, node, value;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr('class');\n          if (value) {\n            value = node.attr('class').replace(/(?:^|\\s)mce-item-\\w+(?!\\S)/g, '');\n            node.attr('class', value.length > 0 ? value : null);\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes, name, args) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.attributes.map['data-mce-type'] === 'bookmark' && !args.cleanup) {\n            var hasChildren = Option.from(node.firstChild).exists(function (firstChild) {\n              return !Zwsp.isZwsp(firstChild.value);\n            });\n            if (hasChildren) {\n              node.unwrap();\n            } else {\n              node.remove();\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('noscript', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i].firstChild;\n          if (node) {\n            node.value = Entities.decode(node.value);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('script,style', function (nodes, name) {\n        var i = nodes.length, node, value, type;\n        var trim = function (value) {\n          return value.replace(/(<!--\\[CDATA\\[|\\]\\]-->)/g, '\\n').replace(/^[\\r\\n]*|[\\r\\n]*$/g, '').replace(/^\\s*((<!--)?(\\s*\\/\\/)?\\s*<!\\[CDATA\\[|(<!--\\s*)?\\/\\*\\s*<!\\[CDATA\\[\\s*\\*\\/|(\\/\\/)?\\s*<!--|\\/\\*\\s*<!--\\s*\\*\\/)\\s*[\\r\\n]*/gi, '').replace(/\\s*(\\/\\*\\s*\\]\\]>\\s*\\*\\/(-->)?|\\s*\\/\\/\\s*\\]\\]>(-->)?|\\/\\/\\s*(-->)?|\\]\\]>|\\/\\*\\s*-->\\s*\\*\\/|\\s*-->\\s*)\\s*$/g, '');\n        };\n        while (i--) {\n          node = nodes[i];\n          value = node.firstChild ? node.firstChild.value : '';\n          if (name === 'script') {\n            type = node.attr('type');\n            if (type) {\n              node.attr('type', type === 'mce-no/type' ? null : type.replace(/^mce\\-/, ''));\n            }\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '// <![CDATA[\\n' + trim(value) + '\\n// ]]>';\n            }\n          } else {\n            if (settings.element_format === 'xhtml' && value.length > 0) {\n              node.firstChild.value = '<!--\\n' + trim(value) + '\\n-->';\n            }\n          }\n        }\n      });\n      htmlParser.addNodeFilter('#comment', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.value.indexOf('[CDATA[') === 0) {\n            node.name = '#cdata';\n            node.type = 4;\n            node.value = node.value.replace(/^\\[CDATA\\[|\\]\\]$/g, '');\n          } else if (node.value.indexOf('mce:protected ') === 0) {\n            node.name = '#text';\n            node.type = 3;\n            node.raw = true;\n            node.value = unescape(node.value).substr(14);\n          }\n        }\n      });\n      htmlParser.addNodeFilter('xml:namespace,input', function (nodes, name) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          if (node.type === 7) {\n            node.remove();\n          } else if (node.type === 1) {\n            if (name === 'input' && !('type' in node.attributes.map)) {\n              node.attr('type', 'text');\n            }\n          }\n        }\n      });\n      htmlParser.addAttributeFilter('data-mce-type', function (nodes) {\n        each(nodes, function (node) {\n          if (node.attr('data-mce-type') === 'format-caret') {\n            if (node.isEmpty(htmlParser.schema.getNonEmptyElements())) {\n              node.remove();\n            } else {\n              node.unwrap();\n            }\n          }\n        });\n      });\n      htmlParser.addAttributeFilter('data-mce-src,data-mce-href,data-mce-style,' + 'data-mce-selected,data-mce-expando,' + 'data-mce-type,data-mce-resize', function (nodes, name) {\n        var i = nodes.length;\n        while (i--) {\n          nodes[i].attr(name, null);\n        }\n      });\n    };\n    var trimTrailingBr = function (rootNode) {\n      var brNode1, brNode2;\n      var isBr = function (node) {\n        return node && node.name === 'br';\n      };\n      brNode1 = rootNode.lastChild;\n      if (isBr(brNode1)) {\n        brNode2 = brNode1.prev;\n        if (isBr(brNode2)) {\n          brNode1.remove();\n          brNode2.remove();\n        }\n      }\n    };\n    var DomSerializerFilters = {\n      register: register,\n      trimTrailingBr: trimTrailingBr\n    };\n\n    var preProcess = function (editor, node, args) {\n      var impl, doc, oldDoc;\n      var dom = editor.dom;\n      node = node.cloneNode(true);\n      impl = domGlobals.document.implementation;\n      if (impl.createHTMLDocument) {\n        doc = impl.createHTMLDocument('');\n        Tools.each(node.nodeName === 'BODY' ? node.childNodes : [node], function (node) {\n          doc.body.appendChild(doc.importNode(node, true));\n        });\n        if (node.nodeName !== 'BODY') {\n          node = doc.body.firstChild;\n        } else {\n          node = doc.body;\n        }\n        oldDoc = dom.doc;\n        dom.doc = doc;\n      }\n      Events.firePreProcess(editor, merge(args, { node: node }));\n      if (oldDoc) {\n        dom.doc = oldDoc;\n      }\n      return node;\n    };\n    var shouldFireEvent = function (editor, args) {\n      return editor && editor.hasEventListeners('PreProcess') && !args.no_events;\n    };\n    var process = function (editor, node, args) {\n      return shouldFireEvent(editor, args) ? preProcess(editor, node, args) : node;\n    };\n    var DomSerializerPreProcess = { process: process };\n\n    var removeAttrs = function (node, names) {\n      each(names, function (name) {\n        node.attr(name, null);\n      });\n    };\n    var addFontToSpansFilter = function (domParser, styles, fontSizes) {\n      domParser.addNodeFilter('font', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          var color = node.attr('color');\n          var face = node.attr('face');\n          var size = node.attr('size');\n          if (color) {\n            props.color = color;\n          }\n          if (face) {\n            props['font-family'] = face;\n          }\n          if (size) {\n            props['font-size'] = fontSizes[parseInt(node.attr('size'), 10) - 1];\n          }\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n          removeAttrs(node, [\n            'color',\n            'face',\n            'size'\n          ]);\n        });\n      });\n    };\n    var addStrikeToSpanFilter = function (domParser, styles) {\n      domParser.addNodeFilter('strike', function (nodes) {\n        each(nodes, function (node) {\n          var props = styles.parse(node.attr('style'));\n          props['text-decoration'] = 'line-through';\n          node.name = 'span';\n          node.attr('style', styles.serialize(props));\n        });\n      });\n    };\n    var addFilters = function (domParser, settings) {\n      var styles = Styles();\n      if (settings.convert_fonts_to_spans) {\n        addFontToSpansFilter(domParser, styles, Tools.explode(settings.font_size_legacy_values));\n      }\n      addStrikeToSpanFilter(domParser, styles);\n    };\n    var register$1 = function (domParser, settings) {\n      if (settings.inline_styles) {\n        addFilters(domParser, settings);\n      }\n    };\n    var LegacyFilter = { register: register$1 };\n\n    var whiteSpaceRegExp$3 = /^[ \\t\\r\\n]*$/;\n    var typeLookup = {\n      '#text': 3,\n      '#comment': 8,\n      '#cdata': 4,\n      '#pi': 7,\n      '#doctype': 10,\n      '#document-fragment': 11\n    };\n    var walk$2 = function (node, root, prev) {\n      var sibling;\n      var parent;\n      var startName = prev ? 'lastChild' : 'firstChild';\n      var siblingName = prev ? 'prev' : 'next';\n      if (node[startName]) {\n        return node[startName];\n      }\n      if (node !== root) {\n        sibling = node[siblingName];\n        if (sibling) {\n          return sibling;\n        }\n        for (parent = node.parent; parent && parent !== root; parent = parent.parent) {\n          sibling = parent[siblingName];\n          if (sibling) {\n            return sibling;\n          }\n        }\n      }\n    };\n    var Node$1 = function () {\n      function Node(name, type) {\n        this.name = name;\n        this.type = type;\n        if (type === 1) {\n          this.attributes = [];\n          this.attributes.map = {};\n        }\n      }\n      Node.create = function (name, attrs) {\n        var node, attrName;\n        node = new Node(name, typeLookup[name] || 1);\n        if (attrs) {\n          for (attrName in attrs) {\n            node.attr(attrName, attrs[attrName]);\n          }\n        }\n        return node;\n      };\n      Node.prototype.replace = function (node) {\n        var self = this;\n        if (node.parent) {\n          node.remove();\n        }\n        self.insert(node, self);\n        self.remove();\n        return self;\n      };\n      Node.prototype.attr = function (name, value) {\n        var self = this;\n        var attrs, i;\n        if (typeof name !== 'string') {\n          for (i in name) {\n            self.attr(i, name[i]);\n          }\n          return self;\n        }\n        if (attrs = self.attributes) {\n          if (value !== undefined) {\n            if (value === null) {\n              if (name in attrs.map) {\n                delete attrs.map[name];\n                i = attrs.length;\n                while (i--) {\n                  if (attrs[i].name === name) {\n                    attrs = attrs.splice(i, 1);\n                    return self;\n                  }\n                }\n              }\n              return self;\n            }\n            if (name in attrs.map) {\n              i = attrs.length;\n              while (i--) {\n                if (attrs[i].name === name) {\n                  attrs[i].value = value;\n                  break;\n                }\n              }\n            } else {\n              attrs.push({\n                name: name,\n                value: value\n              });\n            }\n            attrs.map[name] = value;\n            return self;\n          }\n          return attrs.map[name];\n        }\n      };\n      Node.prototype.clone = function () {\n        var self = this;\n        var clone = new Node(self.name, self.type);\n        var i, l, selfAttrs, selfAttr, cloneAttrs;\n        if (selfAttrs = self.attributes) {\n          cloneAttrs = [];\n          cloneAttrs.map = {};\n          for (i = 0, l = selfAttrs.length; i < l; i++) {\n            selfAttr = selfAttrs[i];\n            if (selfAttr.name !== 'id') {\n              cloneAttrs[cloneAttrs.length] = {\n                name: selfAttr.name,\n                value: selfAttr.value\n              };\n              cloneAttrs.map[selfAttr.name] = selfAttr.value;\n            }\n          }\n          clone.attributes = cloneAttrs;\n        }\n        clone.value = self.value;\n        clone.shortEnded = self.shortEnded;\n        return clone;\n      };\n      Node.prototype.wrap = function (wrapper) {\n        var self = this;\n        self.parent.insert(wrapper, self);\n        wrapper.append(self);\n        return self;\n      };\n      Node.prototype.unwrap = function () {\n        var self = this;\n        var node, next;\n        for (node = self.firstChild; node;) {\n          next = node.next;\n          self.insert(node, self, true);\n          node = next;\n        }\n        self.remove();\n      };\n      Node.prototype.remove = function () {\n        var self = this, parent = self.parent, next = self.next, prev = self.prev;\n        if (parent) {\n          if (parent.firstChild === self) {\n            parent.firstChild = next;\n            if (next) {\n              next.prev = null;\n            }\n          } else {\n            prev.next = next;\n          }\n          if (parent.lastChild === self) {\n            parent.lastChild = prev;\n            if (prev) {\n              prev.next = null;\n            }\n          } else {\n            next.prev = prev;\n          }\n          self.parent = self.next = self.prev = null;\n        }\n        return self;\n      };\n      Node.prototype.append = function (node) {\n        var self = this;\n        var last;\n        if (node.parent) {\n          node.remove();\n        }\n        last = self.lastChild;\n        if (last) {\n          last.next = node;\n          node.prev = last;\n          self.lastChild = node;\n        } else {\n          self.lastChild = self.firstChild = node;\n        }\n        node.parent = self;\n        return node;\n      };\n      Node.prototype.insert = function (node, refNode, before) {\n        var parent;\n        if (node.parent) {\n          node.remove();\n        }\n        parent = refNode.parent || this;\n        if (before) {\n          if (refNode === parent.firstChild) {\n            parent.firstChild = node;\n          } else {\n            refNode.prev.next = node;\n          }\n          node.prev = refNode.prev;\n          node.next = refNode;\n          refNode.prev = node;\n        } else {\n          if (refNode === parent.lastChild) {\n            parent.lastChild = node;\n          } else {\n            refNode.next.prev = node;\n          }\n          node.next = refNode.next;\n          node.prev = refNode;\n          refNode.next = node;\n        }\n        node.parent = parent;\n        return node;\n      };\n      Node.prototype.getAll = function (name) {\n        var self = this;\n        var node;\n        var collection = [];\n        for (node = self.firstChild; node; node = walk$2(node, self)) {\n          if (node.name === name) {\n            collection.push(node);\n          }\n        }\n        return collection;\n      };\n      Node.prototype.empty = function () {\n        var self = this;\n        var nodes, i, node;\n        if (self.firstChild) {\n          nodes = [];\n          for (node = self.firstChild; node; node = walk$2(node, self)) {\n            nodes.push(node);\n          }\n          i = nodes.length;\n          while (i--) {\n            node = nodes[i];\n            node.parent = node.firstChild = node.lastChild = node.next = node.prev = null;\n          }\n        }\n        self.firstChild = self.lastChild = null;\n        return self;\n      };\n      Node.prototype.isEmpty = function (elements, whitespace, predicate) {\n        var self = this;\n        var node = self.firstChild, i, name;\n        whitespace = whitespace || {};\n        if (node) {\n          do {\n            if (node.type === 1) {\n              if (node.attributes.map['data-mce-bogus']) {\n                continue;\n              }\n              if (elements[node.name]) {\n                return false;\n              }\n              i = node.attributes.length;\n              while (i--) {\n                name = node.attributes[i].name;\n                if (name === 'name' || name.indexOf('data-mce-bookmark') === 0) {\n                  return false;\n                }\n              }\n            }\n            if (node.type === 8) {\n              return false;\n            }\n            if (node.type === 3 && !whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (node.type === 3 && node.parent && whitespace[node.parent.name] && whiteSpaceRegExp$3.test(node.value)) {\n              return false;\n            }\n            if (predicate && predicate(node)) {\n              return false;\n            }\n          } while (node = walk$2(node, self));\n        }\n        return true;\n      };\n      Node.prototype.walk = function (prev) {\n        return walk$2(this, null, prev);\n      };\n      return Node;\n    }();\n\n    var paddEmptyNode = function (settings, args, blockElements, node) {\n      var brPreferred = settings.padd_empty_with_br || args.insert;\n      if (brPreferred && blockElements[node.name]) {\n        node.empty().append(new Node$1('br', 1)).shortEnded = true;\n      } else {\n        node.empty().append(new Node$1('#text', 3)).value = '\\xA0';\n      }\n    };\n    var isPaddedWithNbsp = function (node) {\n      return hasOnlyChild(node, '#text') && node.firstChild.value === '\\xA0';\n    };\n    var hasOnlyChild = function (node, name) {\n      return node && node.firstChild && node.firstChild === node.lastChild && node.firstChild.name === name;\n    };\n    var isPadded = function (schema, node) {\n      var rule = schema.getElementRule(node.name);\n      return rule && rule.paddEmpty;\n    };\n    var isEmpty$2 = function (schema, nonEmptyElements, whitespaceElements, node) {\n      return node.isEmpty(nonEmptyElements, whitespaceElements, function (node) {\n        return isPadded(schema, node);\n      });\n    };\n    var isLineBreakNode = function (node, blockElements) {\n      return node && (blockElements[node.name] || node.name === 'br');\n    };\n\n    var register$2 = function (parser, settings) {\n      var schema = parser.schema;\n      if (settings.remove_trailing_brs) {\n        parser.addNodeFilter('br', function (nodes, _, args) {\n          var i;\n          var l = nodes.length;\n          var node;\n          var blockElements = Tools.extend({}, schema.getBlockElements());\n          var nonEmptyElements = schema.getNonEmptyElements();\n          var parent, lastParent, prev, prevName;\n          var whiteSpaceElements = schema.getNonEmptyElements();\n          var elementRule, textNode;\n          blockElements.body = 1;\n          for (i = 0; i < l; i++) {\n            node = nodes[i];\n            parent = node.parent;\n            if (blockElements[node.parent.name] && node === parent.lastChild) {\n              prev = node.prev;\n              while (prev) {\n                prevName = prev.name;\n                if (prevName !== 'span' || prev.attr('data-mce-type') !== 'bookmark') {\n                  if (prevName !== 'br') {\n                    break;\n                  }\n                  if (prevName === 'br') {\n                    node = null;\n                    break;\n                  }\n                }\n                prev = prev.prev;\n              }\n              if (node) {\n                node.remove();\n                if (isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, parent)) {\n                  elementRule = schema.getElementRule(parent.name);\n                  if (elementRule) {\n                    if (elementRule.removeEmpty) {\n                      parent.remove();\n                    } else if (elementRule.paddEmpty) {\n                      paddEmptyNode(settings, args, blockElements, parent);\n                    }\n                  }\n                }\n              }\n            } else {\n              lastParent = node;\n              while (parent && parent.firstChild === lastParent && parent.lastChild === lastParent) {\n                lastParent = parent;\n                if (blockElements[parent.name]) {\n                  break;\n                }\n                parent = parent.parent;\n              }\n              if (lastParent === parent && settings.padd_empty_with_br !== true) {\n                textNode = new Node$1('#text', 3);\n                textNode.value = '\\xA0';\n                node.replace(textNode);\n              }\n            }\n          }\n        });\n      }\n      parser.addAttributeFilter('href', function (nodes) {\n        var i = nodes.length, node;\n        var appendRel = function (rel) {\n          var parts = rel.split(' ').filter(function (p) {\n            return p.length > 0;\n          });\n          return parts.concat(['noopener']).sort().join(' ');\n        };\n        var addNoOpener = function (rel) {\n          var newRel = rel ? Tools.trim(rel) : '';\n          if (!/\\b(noopener)\\b/g.test(newRel)) {\n            return appendRel(newRel);\n          } else {\n            return newRel;\n          }\n        };\n        if (!settings.allow_unsafe_link_target) {\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.attr('target') === '_blank') {\n              node.attr('rel', addNoOpener(node.attr('rel')));\n            }\n          }\n        }\n      });\n      if (!settings.allow_html_in_named_anchor) {\n        parser.addAttributeFilter('id,name', function (nodes) {\n          var i = nodes.length, sibling, prevSibling, parent, node;\n          while (i--) {\n            node = nodes[i];\n            if (node.name === 'a' && node.firstChild && !node.attr('href')) {\n              parent = node.parent;\n              sibling = node.lastChild;\n              do {\n                prevSibling = sibling.prev;\n                parent.insert(sibling, node);\n                sibling = prevSibling;\n              } while (sibling);\n            }\n          }\n        });\n      }\n      if (settings.fix_list_elements) {\n        parser.addNodeFilter('ul,ol', function (nodes) {\n          var i = nodes.length, node, parentNode;\n          while (i--) {\n            node = nodes[i];\n            parentNode = node.parent;\n            if (parentNode.name === 'ul' || parentNode.name === 'ol') {\n              if (node.prev && node.prev.name === 'li') {\n                node.prev.append(node);\n              } else {\n                var li = new Node$1('li', 1);\n                li.attr('style', 'list-style-type: none');\n                node.wrap(li);\n              }\n            }\n          }\n        });\n      }\n      if (settings.validate && schema.getValidClasses()) {\n        parser.addAttributeFilter('class', function (nodes) {\n          var i = nodes.length, node, classList, ci, className, classValue;\n          var validClasses = schema.getValidClasses();\n          var validClassesMap, valid;\n          while (i--) {\n            node = nodes[i];\n            classList = node.attr('class').split(' ');\n            classValue = '';\n            for (ci = 0; ci < classList.length; ci++) {\n              className = classList[ci];\n              valid = false;\n              validClassesMap = validClasses['*'];\n              if (validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              validClassesMap = validClasses[node.name];\n              if (!valid && validClassesMap && validClassesMap[className]) {\n                valid = true;\n              }\n              if (valid) {\n                if (classValue) {\n                  classValue += ' ';\n                }\n                classValue += className;\n              }\n            }\n            if (!classValue.length) {\n              classValue = null;\n            }\n            node.attr('class', classValue);\n          }\n        });\n      }\n    };\n\n    var makeMap$4 = Tools.makeMap, each$i = Tools.each, explode$3 = Tools.explode, extend$3 = Tools.extend;\n    function DomParser (settings, schema) {\n      if (schema === void 0) {\n        schema = Schema();\n      }\n      var nodeFilters = {};\n      var attributeFilters = [];\n      var matchedNodes = {};\n      var matchedAttributes = {};\n      settings = settings || {};\n      settings.validate = 'validate' in settings ? settings.validate : true;\n      settings.root_name = settings.root_name || 'body';\n      var fixInvalidChildren = function (nodes) {\n        var ni, node, parent, parents, newParent, currentNode, tempNode, childNode, i;\n        var nonEmptyElements, whitespaceElements, nonSplitableElements, textBlockElements, specialElements, sibling, nextNode;\n        nonSplitableElements = makeMap$4('tr,td,th,tbody,thead,tfoot,table');\n        nonEmptyElements = schema.getNonEmptyElements();\n        whitespaceElements = schema.getWhiteSpaceElements();\n        textBlockElements = schema.getTextBlockElements();\n        specialElements = schema.getSpecialElements();\n        for (ni = 0; ni < nodes.length; ni++) {\n          node = nodes[ni];\n          if (!node.parent || node.fixed) {\n            continue;\n          }\n          if (textBlockElements[node.name] && node.parent.name === 'li') {\n            sibling = node.next;\n            while (sibling) {\n              if (textBlockElements[sibling.name]) {\n                sibling.name = 'li';\n                sibling.fixed = true;\n                node.parent.insert(sibling, node.parent);\n              } else {\n                break;\n              }\n              sibling = sibling.next;\n            }\n            node.unwrap(node);\n            continue;\n          }\n          parents = [node];\n          for (parent = node.parent; parent && !schema.isValidChild(parent.name, node.name) && !nonSplitableElements[parent.name]; parent = parent.parent) {\n            parents.push(parent);\n          }\n          if (parent && parents.length > 1) {\n            parents.reverse();\n            newParent = currentNode = filterNode(parents[0].clone());\n            for (i = 0; i < parents.length - 1; i++) {\n              if (schema.isValidChild(currentNode.name, parents[i].name)) {\n                tempNode = filterNode(parents[i].clone());\n                currentNode.append(tempNode);\n              } else {\n                tempNode = currentNode;\n              }\n              for (childNode = parents[i].firstChild; childNode && childNode !== parents[i + 1];) {\n                nextNode = childNode.next;\n                tempNode.append(childNode);\n                childNode = nextNode;\n              }\n              currentNode = tempNode;\n            }\n            if (!isEmpty$2(schema, nonEmptyElements, whitespaceElements, newParent)) {\n              parent.insert(newParent, parents[0], true);\n              parent.insert(node, newParent);\n            } else {\n              parent.insert(node, parents[0], true);\n            }\n            parent = parents[0];\n            if (isEmpty$2(schema, nonEmptyElements, whitespaceElements, parent) || hasOnlyChild(parent, 'br')) {\n              parent.empty().remove();\n            }\n          } else if (node.parent) {\n            if (node.name === 'li') {\n              sibling = node.prev;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.append(node);\n                continue;\n              }\n              sibling = node.next;\n              if (sibling && (sibling.name === 'ul' || sibling.name === 'ul')) {\n                sibling.insert(node, sibling.firstChild, true);\n                continue;\n              }\n              node.wrap(filterNode(new Node$1('ul', 1)));\n              continue;\n            }\n            if (schema.isValidChild(node.parent.name, 'div') && schema.isValidChild('div', node.name)) {\n              node.wrap(filterNode(new Node$1('div', 1)));\n            } else {\n              if (specialElements[node.name]) {\n                node.empty().remove();\n              } else {\n                node.unwrap();\n              }\n            }\n          }\n        }\n      };\n      var filterNode = function (node) {\n        var i, name, list;\n        name = node.name;\n        if (name in nodeFilters) {\n          list = matchedNodes[name];\n          if (list) {\n            list.push(node);\n          } else {\n            matchedNodes[name] = [node];\n          }\n        }\n        i = attributeFilters.length;\n        while (i--) {\n          name = attributeFilters[i].name;\n          if (name in node.attributes.map) {\n            list = matchedAttributes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedAttributes[name] = [node];\n            }\n          }\n        }\n        return node;\n      };\n      var addNodeFilter = function (name, callback) {\n        each$i(explode$3(name), function (name) {\n          var list = nodeFilters[name];\n          if (!list) {\n            nodeFilters[name] = list = [];\n          }\n          list.push(callback);\n        });\n      };\n      var getNodeFilters = function () {\n        var out = [];\n        for (var name in nodeFilters) {\n          if (nodeFilters.hasOwnProperty(name)) {\n            out.push({\n              name: name,\n              callbacks: nodeFilters[name]\n            });\n          }\n        }\n        return out;\n      };\n      var addAttributeFilter = function (name, callback) {\n        each$i(explode$3(name), function (name) {\n          var i;\n          for (i = 0; i < attributeFilters.length; i++) {\n            if (attributeFilters[i].name === name) {\n              attributeFilters[i].callbacks.push(callback);\n              return;\n            }\n          }\n          attributeFilters.push({\n            name: name,\n            callbacks: [callback]\n          });\n        });\n      };\n      var getAttributeFilters = function () {\n        return [].concat(attributeFilters);\n      };\n      var parse = function (html, args) {\n        var parser, nodes, i, l, fi, fl, list, name;\n        var blockElements;\n        var invalidChildren = [];\n        var isInWhiteSpacePreservedElement;\n        var node;\n        args = args || {};\n        matchedNodes = {};\n        matchedAttributes = {};\n        blockElements = extend$3(makeMap$4('script,style,head,html,body,title,meta,param'), schema.getBlockElements());\n        var nonEmptyElements = schema.getNonEmptyElements();\n        var children = schema.children;\n        var validate = settings.validate;\n        var rootBlockName = 'forced_root_block' in args ? args.forced_root_block : settings.forced_root_block;\n        var whiteSpaceElements = schema.getWhiteSpaceElements();\n        var startWhiteSpaceRegExp = /^[ \\t\\r\\n]+/;\n        var endWhiteSpaceRegExp = /[ \\t\\r\\n]+$/;\n        var allWhiteSpaceRegExp = /[ \\t\\r\\n]+/g;\n        var isAllWhiteSpaceRegExp = /^[ \\t\\r\\n]+$/;\n        isInWhiteSpacePreservedElement = whiteSpaceElements.hasOwnProperty(args.context) || whiteSpaceElements.hasOwnProperty(settings.root_name);\n        var addRootBlocks = function () {\n          var node = rootNode.firstChild, next, rootBlockNode;\n          var trim = function (rootBlockNode) {\n            if (rootBlockNode) {\n              node = rootBlockNode.firstChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(startWhiteSpaceRegExp, '');\n              }\n              node = rootBlockNode.lastChild;\n              if (node && node.type === 3) {\n                node.value = node.value.replace(endWhiteSpaceRegExp, '');\n              }\n            }\n          };\n          if (!schema.isValidChild(rootNode.name, rootBlockName.toLowerCase())) {\n            return;\n          }\n          while (node) {\n            next = node.next;\n            if (node.type === 3 || node.type === 1 && node.name !== 'p' && !blockElements[node.name] && !node.attr('data-mce-type')) {\n              if (!rootBlockNode) {\n                rootBlockNode = createNode(rootBlockName, 1);\n                rootBlockNode.attr(settings.forced_root_block_attrs);\n                rootNode.insert(rootBlockNode, node);\n                rootBlockNode.append(node);\n              } else {\n                rootBlockNode.append(node);\n              }\n            } else {\n              trim(rootBlockNode);\n              rootBlockNode = null;\n            }\n            node = next;\n          }\n          trim(rootBlockNode);\n        };\n        var createNode = function (name, type) {\n          var node = new Node$1(name, type);\n          var list;\n          if (name in nodeFilters) {\n            list = matchedNodes[name];\n            if (list) {\n              list.push(node);\n            } else {\n              matchedNodes[name] = [node];\n            }\n          }\n          return node;\n        };\n        var removeWhitespaceBefore = function (node) {\n          var textNode, textNodeNext, textVal, sibling;\n          var blockElements = schema.getBlockElements();\n          for (textNode = node.prev; textNode && textNode.type === 3;) {\n            textVal = textNode.value.replace(endWhiteSpaceRegExp, '');\n            if (textVal.length > 0) {\n              textNode.value = textVal;\n              return;\n            }\n            textNodeNext = textNode.next;\n            if (textNodeNext) {\n              if (textNodeNext.type === 3 && textNodeNext.value.length) {\n                textNode = textNode.prev;\n                continue;\n              }\n              if (!blockElements[textNodeNext.name] && textNodeNext.name !== 'script' && textNodeNext.name !== 'style') {\n                textNode = textNode.prev;\n                continue;\n              }\n            }\n            sibling = textNode.prev;\n            textNode.remove();\n            textNode = sibling;\n          }\n        };\n        var cloneAndExcludeBlocks = function (input) {\n          var name;\n          var output = {};\n          for (name in input) {\n            if (name !== 'li' && name !== 'p') {\n              output[name] = input[name];\n            }\n          }\n          return output;\n        };\n        parser = SaxParser$1({\n          validate: validate,\n          allow_script_urls: settings.allow_script_urls,\n          allow_conditional_comments: settings.allow_conditional_comments,\n          self_closing_elements: cloneAndExcludeBlocks(schema.getSelfClosingElements()),\n          cdata: function (text) {\n            node.append(createNode('#cdata', 4)).value = text;\n          },\n          text: function (text, raw) {\n            var textNode;\n            if (!isInWhiteSpacePreservedElement) {\n              text = text.replace(allWhiteSpaceRegExp, ' ');\n              if (isLineBreakNode(node.lastChild, blockElements)) {\n                text = text.replace(startWhiteSpaceRegExp, '');\n              }\n            }\n            if (text.length !== 0) {\n              textNode = createNode('#text', 3);\n              textNode.raw = !!raw;\n              node.append(textNode).value = text;\n            }\n          },\n          comment: function (text) {\n            node.append(createNode('#comment', 8)).value = text;\n          },\n          pi: function (name, text) {\n            node.append(createNode(name, 7)).value = text;\n            removeWhitespaceBefore(node);\n          },\n          doctype: function (text) {\n            var newNode;\n            newNode = node.append(createNode('#doctype', 10));\n            newNode.value = text;\n            removeWhitespaceBefore(node);\n          },\n          start: function (name, attrs, empty) {\n            var newNode, attrFiltersLen, elementRule, attrName, parent;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              newNode = createNode(elementRule.outputName || name, 1);\n              newNode.attributes = attrs;\n              newNode.shortEnded = empty;\n              node.append(newNode);\n              parent = children[node.name];\n              if (parent && children[newNode.name] && !parent[newNode.name]) {\n                invalidChildren.push(newNode);\n              }\n              attrFiltersLen = attributeFilters.length;\n              while (attrFiltersLen--) {\n                attrName = attributeFilters[attrFiltersLen].name;\n                if (attrName in attrs.map) {\n                  list = matchedAttributes[attrName];\n                  if (list) {\n                    list.push(newNode);\n                  } else {\n                    matchedAttributes[attrName] = [newNode];\n                  }\n                }\n              }\n              if (blockElements[name]) {\n                removeWhitespaceBefore(newNode);\n              }\n              if (!empty) {\n                node = newNode;\n              }\n              if (!isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = true;\n              }\n            }\n          },\n          end: function (name) {\n            var textNode, elementRule, text, sibling, tempNode;\n            elementRule = validate ? schema.getElementRule(name) : {};\n            if (elementRule) {\n              if (blockElements[name]) {\n                if (!isInWhiteSpacePreservedElement) {\n                  textNode = node.firstChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(startWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.next;\n                    } else {\n                      sibling = textNode.next;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.next;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                  textNode = node.lastChild;\n                  if (textNode && textNode.type === 3) {\n                    text = textNode.value.replace(endWhiteSpaceRegExp, '');\n                    if (text.length > 0) {\n                      textNode.value = text;\n                      textNode = textNode.prev;\n                    } else {\n                      sibling = textNode.prev;\n                      textNode.remove();\n                      textNode = sibling;\n                      while (textNode && textNode.type === 3) {\n                        text = textNode.value;\n                        sibling = textNode.prev;\n                        if (text.length === 0 || isAllWhiteSpaceRegExp.test(text)) {\n                          textNode.remove();\n                          textNode = sibling;\n                        }\n                        textNode = sibling;\n                      }\n                    }\n                  }\n                }\n              }\n              if (isInWhiteSpacePreservedElement && whiteSpaceElements[name]) {\n                isInWhiteSpacePreservedElement = false;\n              }\n              if (elementRule.removeEmpty && isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node)) {\n                if (!node.attributes.map.name && !node.attr('id')) {\n                  tempNode = node.parent;\n                  if (blockElements[node.name]) {\n                    node.empty().remove();\n                  } else {\n                    node.unwrap();\n                  }\n                  node = tempNode;\n                  return;\n                }\n              }\n              if (elementRule.paddEmpty && (isPaddedWithNbsp(node) || isEmpty$2(schema, nonEmptyElements, whiteSpaceElements, node))) {\n                paddEmptyNode(settings, args, blockElements, node);\n              }\n              node = node.parent;\n            }\n          }\n        }, schema);\n        var rootNode = node = new Node$1(args.context || settings.root_name, 11);\n        parser.parse(html);\n        if (validate && invalidChildren.length) {\n          if (!args.context) {\n            fixInvalidChildren(invalidChildren);\n          } else {\n            args.invalid = true;\n          }\n        }\n        if (rootBlockName && (rootNode.name === 'body' || args.isRootContent)) {\n          addRootBlocks();\n        }\n        if (!args.invalid) {\n          for (name in matchedNodes) {\n            list = nodeFilters[name];\n            nodes = matchedNodes[name];\n            fi = nodes.length;\n            while (fi--) {\n              if (!nodes[fi].parent) {\n                nodes.splice(fi, 1);\n              }\n            }\n            for (i = 0, l = list.length; i < l; i++) {\n              list[i](nodes, name, args);\n            }\n          }\n          for (i = 0, l = attributeFilters.length; i < l; i++) {\n            list = attributeFilters[i];\n            if (list.name in matchedAttributes) {\n              nodes = matchedAttributes[list.name];\n              fi = nodes.length;\n              while (fi--) {\n                if (!nodes[fi].parent) {\n                  nodes.splice(fi, 1);\n                }\n              }\n              for (fi = 0, fl = list.callbacks.length; fi < fl; fi++) {\n                list.callbacks[fi](nodes, list.name, args);\n              }\n            }\n          }\n        }\n        return rootNode;\n      };\n      var exports = {\n        schema: schema,\n        addAttributeFilter: addAttributeFilter,\n        getAttributeFilters: getAttributeFilters,\n        addNodeFilter: addNodeFilter,\n        getNodeFilters: getNodeFilters,\n        filterNode: filterNode,\n        parse: parse\n      };\n      register$2(exports, settings);\n      LegacyFilter.register(exports, settings);\n      return exports;\n    }\n\n    var addTempAttr = function (htmlParser, tempAttrs, name) {\n      if (Tools.inArray(tempAttrs, name) === -1) {\n        htmlParser.addAttributeFilter(name, function (nodes, name) {\n          var i = nodes.length;\n          while (i--) {\n            nodes[i].attr(name, null);\n          }\n        });\n        tempAttrs.push(name);\n      }\n    };\n    var postProcess$1 = function (editor, args, content) {\n      if (!args.no_events && editor) {\n        var outArgs = Events.firePostProcess(editor, merge(args, { content: content }));\n        return outArgs.content;\n      } else {\n        return content;\n      }\n    };\n    var getHtmlFromNode = function (dom, node, args) {\n      var html = Zwsp.trim(args.getInner ? node.innerHTML : dom.getOuterHTML(node));\n      return args.selection || isWsPreserveElement(Element.fromDom(node)) ? html : Tools.trim(html);\n    };\n    var parseHtml = function (htmlParser, html, args) {\n      var parserArgs = args.selection ? merge({ forced_root_block: false }, args) : args;\n      var rootNode = htmlParser.parse(html, parserArgs);\n      DomSerializerFilters.trimTrailingBr(rootNode);\n      return rootNode;\n    };\n    var serializeNode = function (settings, schema, node) {\n      var htmlSerializer = HtmlSerializer(settings, schema);\n      return htmlSerializer.serialize(node);\n    };\n    var toHtml = function (editor, settings, schema, rootNode, args) {\n      var content = serializeNode(settings, schema, rootNode);\n      return postProcess$1(editor, args, content);\n    };\n    function DomSerializer (settings, editor) {\n      var dom, schema, htmlParser;\n      var tempAttrs = ['data-mce-selected'];\n      dom = editor && editor.dom ? editor.dom : DOMUtils$1.DOM;\n      schema = editor && editor.schema ? editor.schema : Schema(settings);\n      settings.entity_encoding = settings.entity_encoding || 'named';\n      settings.remove_trailing_brs = 'remove_trailing_brs' in settings ? settings.remove_trailing_brs : true;\n      htmlParser = DomParser(settings, schema);\n      DomSerializerFilters.register(htmlParser, settings, dom);\n      var serialize = function (node, parserArgs) {\n        var args = merge({ format: 'html' }, parserArgs ? parserArgs : {});\n        var targetNode = DomSerializerPreProcess.process(editor, node, args);\n        var html = getHtmlFromNode(dom, targetNode, args);\n        var rootNode = parseHtml(htmlParser, html, args);\n        return args.format === 'tree' ? rootNode : toHtml(editor, settings, schema, rootNode, args);\n      };\n      return {\n        schema: schema,\n        addNodeFilter: htmlParser.addNodeFilter,\n        addAttributeFilter: htmlParser.addAttributeFilter,\n        serialize: serialize,\n        addRules: function (rules) {\n          schema.addValidElements(rules);\n        },\n        setRules: function (rules) {\n          schema.setValidElements(rules);\n        },\n        addTempAttr: curry(addTempAttr, htmlParser, tempAttrs),\n        getTempAttrs: function () {\n          return tempAttrs;\n        }\n      };\n    }\n\n    function DomSerializer$1 (settings, editor) {\n      var domSerializer = DomSerializer(settings, editor);\n      return {\n        schema: domSerializer.schema,\n        addNodeFilter: domSerializer.addNodeFilter,\n        addAttributeFilter: domSerializer.addAttributeFilter,\n        serialize: domSerializer.serialize,\n        addRules: domSerializer.addRules,\n        setRules: domSerializer.setRules,\n        addTempAttr: domSerializer.addTempAttr,\n        getTempAttrs: domSerializer.getTempAttrs\n      };\n    }\n\n    function BookmarkManager(selection) {\n      return {\n        getBookmark: curry(Bookmarks.getBookmark, selection),\n        moveToBookmark: curry(Bookmarks.moveToBookmark, selection)\n      };\n    }\n    (function (BookmarkManager) {\n      BookmarkManager.isBookmarkNode = Bookmarks.isBookmarkNode;\n    }(BookmarkManager || (BookmarkManager = {})));\n    var BookmarkManager$1 = BookmarkManager;\n\n    var isContentEditableFalse$a = NodeType.isContentEditableFalse;\n    var isContentEditableTrue$5 = NodeType.isContentEditableTrue;\n    var getContentEditableRoot$2 = function (root, node) {\n      while (node && node !== root) {\n        if (isContentEditableTrue$5(node) || isContentEditableFalse$a(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var ControlSelection = function (selection, editor) {\n      var dom = editor.dom, each = Tools.each;\n      var selectedElm, selectedElmGhost, resizeHelper, resizeHandles, selectedHandle;\n      var startX, startY, selectedElmX, selectedElmY, startW, startH, ratio, resizeStarted;\n      var width, height;\n      var editableDoc = editor.getDoc(), rootDocument = domGlobals.document;\n      var abs = Math.abs, round = Math.round, rootElement = editor.getBody();\n      var startScrollWidth, startScrollHeight;\n      resizeHandles = {\n        nw: [\n          0,\n          0,\n          -1,\n          -1\n        ],\n        ne: [\n          1,\n          0,\n          1,\n          -1\n        ],\n        se: [\n          1,\n          1,\n          1,\n          1\n        ],\n        sw: [\n          0,\n          1,\n          -1,\n          1\n        ]\n      };\n      var rootClass = '.mce-content-body';\n      editor.contentStyles.push(rootClass + ' div.mce-resizehandle {' + 'position: absolute;' + 'border: 1px solid black;' + 'box-sizing: content-box;' + 'background: #FFF;' + 'width: 7px;' + 'height: 7px;' + 'z-index: 10000' + '}' + rootClass + ' .mce-resizehandle:hover {' + 'background: #000' + '}' + rootClass + ' img[data-mce-selected],' + rootClass + ' hr[data-mce-selected] {' + 'outline: 1px solid black;' + 'resize: none' + '}' + rootClass + ' .mce-clonedresizable {' + 'position: absolute;' + (Env.gecko ? '' : 'outline: 1px dashed black;') + 'opacity: .5;' + 'filter: alpha(opacity=50);' + 'z-index: 10000' + '}' + rootClass + ' .mce-resize-helper {' + 'background: #555;' + 'background: rgba(0,0,0,0.75);' + 'border-radius: 3px;' + 'border: 1px;' + 'color: white;' + 'display: none;' + 'font-family: sans-serif;' + 'font-size: 12px;' + 'white-space: nowrap;' + 'line-height: 14px;' + 'margin: 5px 10px;' + 'padding: 5px;' + 'position: absolute;' + 'z-index: 10001' + '}');\n      var isImage = function (elm) {\n        return elm && (elm.nodeName === 'IMG' || editor.dom.is(elm, 'figure.image'));\n      };\n      var isEventOnImageOutsideRange = function (evt, range) {\n        return isImage(evt.target) && !RangePoint.isXYWithinRange(evt.clientX, evt.clientY, range);\n      };\n      var contextMenuSelectImage = function (evt) {\n        var target = evt.target;\n        if (isEventOnImageOutsideRange(evt, editor.selection.getRng()) && !evt.isDefaultPrevented()) {\n          editor.selection.select(target);\n        }\n      };\n      var getResizeTarget = function (elm) {\n        return editor.dom.is(elm, 'figure.image') ? elm.querySelector('img') : elm;\n      };\n      var isResizable = function (elm) {\n        var selector = editor.settings.object_resizing;\n        if (selector === false || Env.iOS) {\n          return false;\n        }\n        if (typeof selector !== 'string') {\n          selector = 'table,img,figure.image,div';\n        }\n        if (elm.getAttribute('data-mce-resize') === 'false') {\n          return false;\n        }\n        if (elm === editor.getBody()) {\n          return false;\n        }\n        return is$1(Element.fromDom(elm), selector);\n      };\n      var resizeGhostElement = function (e) {\n        var deltaX, deltaY, proportional;\n        var resizeHelperX, resizeHelperY;\n        deltaX = e.screenX - startX;\n        deltaY = e.screenY - startY;\n        width = deltaX * selectedHandle[2] + startW;\n        height = deltaY * selectedHandle[3] + startH;\n        width = width < 5 ? 5 : width;\n        height = height < 5 ? 5 : height;\n        if (isImage(selectedElm) && editor.settings.resize_img_proportional !== false) {\n          proportional = !VK.modifierPressed(e);\n        } else {\n          proportional = VK.modifierPressed(e) || isImage(selectedElm) && selectedHandle[2] * selectedHandle[3] !== 0;\n        }\n        if (proportional) {\n          if (abs(deltaX) > abs(deltaY)) {\n            height = round(width * ratio);\n            width = round(height / ratio);\n          } else {\n            width = round(height / ratio);\n            height = round(width * ratio);\n          }\n        }\n        dom.setStyles(getResizeTarget(selectedElmGhost), {\n          width: width,\n          height: height\n        });\n        resizeHelperX = selectedHandle.startPos.x + deltaX;\n        resizeHelperY = selectedHandle.startPos.y + deltaY;\n        resizeHelperX = resizeHelperX > 0 ? resizeHelperX : 0;\n        resizeHelperY = resizeHelperY > 0 ? resizeHelperY : 0;\n        dom.setStyles(resizeHelper, {\n          left: resizeHelperX,\n          top: resizeHelperY,\n          display: 'block'\n        });\n        resizeHelper.innerHTML = width + ' &times; ' + height;\n        if (selectedHandle[2] < 0 && selectedElmGhost.clientWidth <= width) {\n          dom.setStyle(selectedElmGhost, 'left', selectedElmX + (startW - width));\n        }\n        if (selectedHandle[3] < 0 && selectedElmGhost.clientHeight <= height) {\n          dom.setStyle(selectedElmGhost, 'top', selectedElmY + (startH - height));\n        }\n        deltaX = rootElement.scrollWidth - startScrollWidth;\n        deltaY = rootElement.scrollHeight - startScrollHeight;\n        if (deltaX + deltaY !== 0) {\n          dom.setStyles(resizeHelper, {\n            left: resizeHelperX - deltaX,\n            top: resizeHelperY - deltaY\n          });\n        }\n        if (!resizeStarted) {\n          Events.fireObjectResizeStart(editor, selectedElm, startW, startH);\n          resizeStarted = true;\n        }\n      };\n      var endGhostResize = function () {\n        resizeStarted = false;\n        var setSizeProp = function (name, value) {\n          if (value) {\n            if (selectedElm.style[name] || !editor.schema.isValid(selectedElm.nodeName.toLowerCase(), name)) {\n              dom.setStyle(getResizeTarget(selectedElm), name, value);\n            } else {\n              dom.setAttrib(getResizeTarget(selectedElm), name, value);\n            }\n          }\n        };\n        setSizeProp('width', width);\n        setSizeProp('height', height);\n        dom.unbind(editableDoc, 'mousemove', resizeGhostElement);\n        dom.unbind(editableDoc, 'mouseup', endGhostResize);\n        if (rootDocument !== editableDoc) {\n          dom.unbind(rootDocument, 'mousemove', resizeGhostElement);\n          dom.unbind(rootDocument, 'mouseup', endGhostResize);\n        }\n        dom.remove(selectedElmGhost);\n        dom.remove(resizeHelper);\n        showResizeRect(selectedElm);\n        Events.fireObjectResized(editor, selectedElm, width, height);\n        dom.setAttrib(selectedElm, 'style', dom.getAttrib(selectedElm, 'style'));\n        editor.nodeChanged();\n      };\n      var showResizeRect = function (targetElm) {\n        var position, targetWidth, targetHeight, e, rect;\n        hideResizeRect();\n        unbindResizeHandleEvents();\n        position = dom.getPos(targetElm, rootElement);\n        selectedElmX = position.x;\n        selectedElmY = position.y;\n        rect = targetElm.getBoundingClientRect();\n        targetWidth = rect.width || rect.right - rect.left;\n        targetHeight = rect.height || rect.bottom - rect.top;\n        if (selectedElm !== targetElm) {\n          selectedElm = targetElm;\n          width = height = 0;\n        }\n        e = editor.fire('ObjectSelected', { target: targetElm });\n        if (isResizable(targetElm) && !e.isDefaultPrevented()) {\n          each(resizeHandles, function (handle, name) {\n            var handleElm;\n            var startDrag = function (e) {\n              startX = e.screenX;\n              startY = e.screenY;\n              startW = getResizeTarget(selectedElm).clientWidth;\n              startH = getResizeTarget(selectedElm).clientHeight;\n              ratio = startH / startW;\n              selectedHandle = handle;\n              handle.startPos = {\n                x: targetWidth * handle[0] + selectedElmX,\n                y: targetHeight * handle[1] + selectedElmY\n              };\n              startScrollWidth = rootElement.scrollWidth;\n              startScrollHeight = rootElement.scrollHeight;\n              selectedElmGhost = selectedElm.cloneNode(true);\n              dom.addClass(selectedElmGhost, 'mce-clonedresizable');\n              dom.setAttrib(selectedElmGhost, 'data-mce-bogus', 'all');\n              selectedElmGhost.contentEditable = false;\n              selectedElmGhost.unSelectabe = true;\n              dom.setStyles(selectedElmGhost, {\n                left: selectedElmX,\n                top: selectedElmY,\n                margin: 0\n              });\n              selectedElmGhost.removeAttribute('data-mce-selected');\n              rootElement.appendChild(selectedElmGhost);\n              dom.bind(editableDoc, 'mousemove', resizeGhostElement);\n              dom.bind(editableDoc, 'mouseup', endGhostResize);\n              if (rootDocument !== editableDoc) {\n                dom.bind(rootDocument, 'mousemove', resizeGhostElement);\n                dom.bind(rootDocument, 'mouseup', endGhostResize);\n              }\n              resizeHelper = dom.add(rootElement, 'div', {\n                'class': 'mce-resize-helper',\n                'data-mce-bogus': 'all'\n              }, startW + ' &times; ' + startH);\n            };\n            handleElm = dom.get('mceResizeHandle' + name);\n            if (handleElm) {\n              dom.remove(handleElm);\n            }\n            handleElm = dom.add(rootElement, 'div', {\n              'id': 'mceResizeHandle' + name,\n              'data-mce-bogus': 'all',\n              'class': 'mce-resizehandle',\n              'unselectable': true,\n              'style': 'cursor:' + name + '-resize; margin:0; padding:0'\n            });\n            if (Env.ie === 11) {\n              handleElm.contentEditable = false;\n            }\n            dom.bind(handleElm, 'mousedown', function (e) {\n              e.stopImmediatePropagation();\n              e.preventDefault();\n              startDrag(e);\n            });\n            handle.elm = handleElm;\n            dom.setStyles(handleElm, {\n              left: targetWidth * handle[0] + selectedElmX - handleElm.offsetWidth / 2,\n              top: targetHeight * handle[1] + selectedElmY - handleElm.offsetHeight / 2\n            });\n          });\n        } else {\n          hideResizeRect();\n        }\n        selectedElm.setAttribute('data-mce-selected', '1');\n      };\n      var hideResizeRect = function () {\n        var name, handleElm;\n        unbindResizeHandleEvents();\n        if (selectedElm) {\n          selectedElm.removeAttribute('data-mce-selected');\n        }\n        for (name in resizeHandles) {\n          handleElm = dom.get('mceResizeHandle' + name);\n          if (handleElm) {\n            dom.unbind(handleElm);\n            dom.remove(handleElm);\n          }\n        }\n      };\n      var updateResizeRect = function (e) {\n        var startElm, controlElm;\n        var isChildOrEqual = function (node, parent) {\n          if (node) {\n            do {\n              if (node === parent) {\n                return true;\n              }\n            } while (node = node.parentNode);\n          }\n        };\n        if (resizeStarted || editor.removed) {\n          return;\n        }\n        each(dom.select('img[data-mce-selected],hr[data-mce-selected]'), function (img) {\n          img.removeAttribute('data-mce-selected');\n        });\n        controlElm = e.type === 'mousedown' ? e.target : selection.getNode();\n        controlElm = dom.$(controlElm).closest('table,img,figure.image,hr')[0];\n        if (isChildOrEqual(controlElm, rootElement)) {\n          disableGeckoResize();\n          startElm = selection.getStart(true);\n          if (isChildOrEqual(startElm, controlElm) && isChildOrEqual(selection.getEnd(true), controlElm)) {\n            showResizeRect(controlElm);\n            return;\n          }\n        }\n        hideResizeRect();\n      };\n      var isWithinContentEditableFalse = function (elm) {\n        return isContentEditableFalse$a(getContentEditableRoot$2(editor.getBody(), elm));\n      };\n      var unbindResizeHandleEvents = function () {\n        for (var name in resizeHandles) {\n          var handle = resizeHandles[name];\n          if (handle.elm) {\n            dom.unbind(handle.elm);\n            delete handle.elm;\n          }\n        }\n      };\n      var disableGeckoResize = function () {\n        try {\n          editor.getDoc().execCommand('enableObjectResizing', false, false);\n        } catch (ex) {\n        }\n      };\n      editor.on('init', function () {\n        disableGeckoResize();\n        if (Env.ie && Env.ie >= 11) {\n          editor.on('mousedown click', function (e) {\n            var target = e.target, nodeName = target.nodeName;\n            if (!resizeStarted && /^(TABLE|IMG|HR)$/.test(nodeName) && !isWithinContentEditableFalse(target)) {\n              if (e.button !== 2) {\n                editor.selection.select(target, nodeName === 'TABLE');\n              }\n              if (e.type === 'mousedown') {\n                editor.nodeChanged();\n              }\n            }\n          });\n          editor.dom.bind(rootElement, 'mscontrolselect', function (e) {\n            var delayedSelect = function (node) {\n              Delay.setEditorTimeout(editor, function () {\n                editor.selection.select(node);\n              });\n            };\n            if (isWithinContentEditableFalse(e.target)) {\n              e.preventDefault();\n              delayedSelect(e.target);\n              return;\n            }\n            if (/^(TABLE|IMG|HR)$/.test(e.target.nodeName)) {\n              e.preventDefault();\n              if (e.target.tagName === 'IMG') {\n                delayedSelect(e.target);\n              }\n            }\n          });\n        }\n        var throttledUpdateResizeRect = Delay.throttle(function (e) {\n          if (!editor.composing) {\n            updateResizeRect(e);\n          }\n        });\n        editor.on('nodechange ResizeEditor ResizeWindow drop FullscreenStateChanged', throttledUpdateResizeRect);\n        editor.on('keyup compositionend', function (e) {\n          if (selectedElm && selectedElm.nodeName === 'TABLE') {\n            throttledUpdateResizeRect(e);\n          }\n        });\n        editor.on('hide blur', hideResizeRect);\n        editor.on('contextmenu', contextMenuSelectImage);\n      });\n      editor.on('remove', unbindResizeHandleEvents);\n      var destroy = function () {\n        selectedElm = selectedElmGhost = null;\n      };\n      return {\n        isResizable: isResizable,\n        showResizeRect: showResizeRect,\n        hideResizeRect: hideResizeRect,\n        updateResizeRect: updateResizeRect,\n        destroy: destroy\n      };\n    };\n\n    var getPos$1 = function (elm) {\n      var x = 0, y = 0;\n      var offsetParent = elm;\n      while (offsetParent && offsetParent.nodeType) {\n        x += offsetParent.offsetLeft || 0;\n        y += offsetParent.offsetTop || 0;\n        offsetParent = offsetParent.offsetParent;\n      }\n      return {\n        x: x,\n        y: y\n      };\n    };\n    var fireScrollIntoViewEvent = function (editor, elm, alignToTop) {\n      var scrollEvent = {\n        elm: elm,\n        alignToTop: alignToTop\n      };\n      editor.fire('scrollIntoView', scrollEvent);\n      return scrollEvent.isDefaultPrevented();\n    };\n    var scrollElementIntoView = function (editor, elm, alignToTop) {\n      var y, viewPort;\n      var dom = editor.dom;\n      var root = dom.getRoot();\n      var viewPortY, viewPortH, offsetY = 0;\n      if (fireScrollIntoViewEvent(editor, elm, alignToTop)) {\n        return;\n      }\n      if (!NodeType.isElement(elm)) {\n        return;\n      }\n      if (alignToTop === false) {\n        offsetY = elm.offsetHeight;\n      }\n      if (root.nodeName !== 'BODY') {\n        var scrollContainer = editor.selection.getScrollContainer();\n        if (scrollContainer) {\n          y = getPos$1(elm).y - getPos$1(scrollContainer).y + offsetY;\n          viewPortH = scrollContainer.clientHeight;\n          viewPortY = scrollContainer.scrollTop;\n          if (y < viewPortY || y + 25 > viewPortY + viewPortH) {\n            scrollContainer.scrollTop = y < viewPortY ? y : y - viewPortH + 25;\n          }\n          return;\n        }\n      }\n      viewPort = dom.getViewPort(editor.getWin());\n      y = dom.getPos(elm).y + offsetY;\n      viewPortY = viewPort.y;\n      viewPortH = viewPort.h;\n      if (y < viewPort.y || y + 25 > viewPortY + viewPortH) {\n        editor.getWin().scrollTo(0, y < viewPortY ? y : y - viewPortH + 25);\n      }\n    };\n    var getViewPortRect = function (editor) {\n      if (editor.inline) {\n        return editor.getBody().getBoundingClientRect();\n      } else {\n        var win = editor.getWin();\n        return {\n          left: 0,\n          right: win.innerWidth,\n          top: 0,\n          bottom: win.innerHeight,\n          width: win.innerWidth,\n          height: win.innerHeight\n        };\n      }\n    };\n    var scrollBy = function (editor, dx, dy) {\n      if (editor.inline) {\n        editor.getBody().scrollLeft += dx;\n        editor.getBody().scrollTop += dy;\n      } else {\n        editor.getWin().scrollBy(dx, dy);\n      }\n    };\n    var scrollRangeIntoView = function (editor, rng) {\n      head(CaretPosition.fromRangeStart(rng).getClientRects()).each(function (rngRect) {\n        var bodyRect = getViewPortRect(editor);\n        var overflow = getOverflow(bodyRect, rngRect);\n        var margin = 4;\n        var dx = overflow.x > 0 ? overflow.x + margin : overflow.x - margin;\n        var dy = overflow.y > 0 ? overflow.y + margin : overflow.y - margin;\n        scrollBy(editor, overflow.x !== 0 ? dx : 0, overflow.y !== 0 ? dy : 0);\n      });\n    };\n    var ScrollIntoView = {\n      scrollElementIntoView: scrollElementIntoView,\n      scrollRangeIntoView: scrollRangeIntoView\n    };\n\n    var hasCeProperty = function (node) {\n      return NodeType.isContentEditableTrue(node) || NodeType.isContentEditableFalse(node);\n    };\n    var findParent$1 = function (node, rootNode, predicate) {\n      while (node && node !== rootNode) {\n        if (predicate(node)) {\n          return node;\n        }\n        node = node.parentNode;\n      }\n      return null;\n    };\n    var findClosestIeRange = function (clientX, clientY, doc) {\n      var element, rng, rects;\n      element = doc.elementFromPoint(clientX, clientY);\n      rng = doc.body.createTextRange();\n      if (!element || element.tagName === 'HTML') {\n        element = doc.body;\n      }\n      rng.moveToElementText(element);\n      rects = Tools.toArray(rng.getClientRects());\n      rects = rects.sort(function (a, b) {\n        a = Math.abs(Math.max(a.top - clientY, a.bottom - clientY));\n        b = Math.abs(Math.max(b.top - clientY, b.bottom - clientY));\n        return a - b;\n      });\n      if (rects.length > 0) {\n        clientY = (rects[0].bottom + rects[0].top) / 2;\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n          return rng;\n        } catch (ex) {\n        }\n      }\n      return null;\n    };\n    var moveOutOfContentEditableFalse = function (rng, rootNode) {\n      var parentElement = rng && rng.parentElement ? rng.parentElement() : null;\n      return NodeType.isContentEditableFalse(findParent$1(parentElement, rootNode, hasCeProperty)) ? null : rng;\n    };\n    var fromPoint$1 = function (clientX, clientY, doc) {\n      var rng, point;\n      var pointDoc = doc;\n      if (pointDoc.caretPositionFromPoint) {\n        point = pointDoc.caretPositionFromPoint(clientX, clientY);\n        if (point) {\n          rng = doc.createRange();\n          rng.setStart(point.offsetNode, point.offset);\n          rng.collapse(true);\n        }\n      } else if (doc.caretRangeFromPoint) {\n        rng = doc.caretRangeFromPoint(clientX, clientY);\n      } else if (pointDoc.body.createTextRange) {\n        rng = pointDoc.body.createTextRange();\n        try {\n          rng.moveToPoint(clientX, clientY);\n          rng.collapse(true);\n        } catch (ex) {\n          rng = findClosestIeRange(clientX, clientY, doc);\n        }\n        return moveOutOfContentEditableFalse(rng, doc.body);\n      }\n      return rng;\n    };\n    var CaretRangeFromPoint = { fromPoint: fromPoint$1 };\n\n    var processRanges = function (editor, ranges) {\n      return map(ranges, function (range) {\n        var evt = editor.fire('GetSelectionRange', { range: range });\n        return evt.range !== range ? evt.range : range;\n      });\n    };\n    var EventProcessRanges = { processRanges: processRanges };\n\n    var fromElements = function (elements, scope) {\n      var doc = scope || domGlobals.document;\n      var fragment = doc.createDocumentFragment();\n      each(elements, function (element) {\n        fragment.appendChild(element.dom());\n      });\n      return Element.fromDom(fragment);\n    };\n\n    var tableModel = Immutable('element', 'width', 'rows');\n    var tableRow = Immutable('element', 'cells');\n    var cellPosition = Immutable('x', 'y');\n    var getSpan = function (td, key) {\n      var value = parseInt(get(td, key), 10);\n      return isNaN(value) ? 1 : value;\n    };\n    var fillout = function (table, x, y, tr, td) {\n      var rowspan = getSpan(td, 'rowspan');\n      var colspan = getSpan(td, 'colspan');\n      var rows = table.rows();\n      for (var y2 = y; y2 < y + rowspan; y2++) {\n        if (!rows[y2]) {\n          rows[y2] = tableRow(deep(tr), []);\n        }\n        for (var x2 = x; x2 < x + colspan; x2++) {\n          var cells = rows[y2].cells();\n          cells[x2] = y2 === y && x2 === x ? td : shallow(td);\n        }\n      }\n    };\n    var cellExists = function (table, x, y) {\n      var rows = table.rows();\n      var cells = rows[y] ? rows[y].cells() : [];\n      return !!cells[x];\n    };\n    var skipCellsX = function (table, x, y) {\n      while (cellExists(table, x, y)) {\n        x++;\n      }\n      return x;\n    };\n    var getWidth = function (rows) {\n      return foldl(rows, function (acc, row) {\n        return row.cells().length > acc ? row.cells().length : acc;\n      }, 0);\n    };\n    var findElementPos = function (table, element) {\n      var rows = table.rows();\n      for (var y = 0; y < rows.length; y++) {\n        var cells = rows[y].cells();\n        for (var x = 0; x < cells.length; x++) {\n          if (eq(cells[x], element)) {\n            return Option.some(cellPosition(x, y));\n          }\n        }\n      }\n      return Option.none();\n    };\n    var extractRows = function (table, sx, sy, ex, ey) {\n      var newRows = [];\n      var rows = table.rows();\n      for (var y = sy; y <= ey; y++) {\n        var cells = rows[y].cells();\n        var slice = sx < ex ? cells.slice(sx, ex + 1) : cells.slice(ex, sx + 1);\n        newRows.push(tableRow(rows[y].element(), slice));\n      }\n      return newRows;\n    };\n    var subTable = function (table, startPos, endPos) {\n      var sx = startPos.x(), sy = startPos.y();\n      var ex = endPos.x(), ey = endPos.y();\n      var newRows = sy < ey ? extractRows(table, sx, sy, ex, ey) : extractRows(table, sx, ey, ex, sy);\n      return tableModel(table.element(), getWidth(newRows), newRows);\n    };\n    var createDomTable = function (table, rows) {\n      var tableElement = shallow(table.element());\n      var tableBody = Element.fromTag('tbody');\n      append$1(tableBody, rows);\n      append(tableElement, tableBody);\n      return tableElement;\n    };\n    var modelRowsToDomRows = function (table) {\n      return map(table.rows(), function (row) {\n        var cells = map(row.cells(), function (cell) {\n          var td = deep(cell);\n          remove(td, 'colspan');\n          remove(td, 'rowspan');\n          return td;\n        });\n        var tr = shallow(row.element());\n        append$1(tr, cells);\n        return tr;\n      });\n    };\n    var fromDom$1 = function (tableElm) {\n      var table = tableModel(shallow(tableElm), 0, []);\n      each(descendants$1(tableElm, 'tr'), function (tr, y) {\n        each(descendants$1(tr, 'td,th'), function (td, x) {\n          fillout(table, skipCellsX(table, x, y), y, tr, td);\n        });\n      });\n      return tableModel(table.element(), getWidth(table.rows()), table.rows());\n    };\n    var toDom = function (table) {\n      return createDomTable(table, modelRowsToDomRows(table));\n    };\n    var subsection = function (table, startElement, endElement) {\n      return findElementPos(table, startElement).bind(function (startPos) {\n        return findElementPos(table, endElement).map(function (endPos) {\n          return subTable(table, startPos, endPos);\n        });\n      });\n    };\n    var SimpleTableModel = {\n      fromDom: fromDom$1,\n      toDom: toDom,\n      subsection: subsection\n    };\n\n    var findParentListContainer = function (parents) {\n      return find(parents, function (elm) {\n        return name(elm) === 'ul' || name(elm) === 'ol';\n      });\n    };\n    var getFullySelectedListWrappers = function (parents, rng) {\n      return find(parents, function (elm) {\n        return name(elm) === 'li' && hasAllContentsSelected(elm, rng);\n      }).fold(constant([]), function (li) {\n        return findParentListContainer(parents).map(function (listCont) {\n          return [\n            Element.fromTag('li'),\n            Element.fromTag(name(listCont))\n          ];\n        }).getOr([]);\n      });\n    };\n    var wrap$3 = function (innerElm, elms) {\n      var wrapped = foldl(elms, function (acc, elm) {\n        append(elm, acc);\n        return elm;\n      }, innerElm);\n      return elms.length > 0 ? fromElements([wrapped]) : wrapped;\n    };\n    var directListWrappers = function (commonAnchorContainer) {\n      if (isListItem(commonAnchorContainer)) {\n        return parent(commonAnchorContainer).filter(isList).fold(constant([]), function (listElm) {\n          return [\n            commonAnchorContainer,\n            listElm\n          ];\n        });\n      } else {\n        return isList(commonAnchorContainer) ? [commonAnchorContainer] : [];\n      }\n    };\n    var getWrapElements = function (rootNode, rng) {\n      var commonAnchorContainer = Element.fromDom(rng.commonAncestorContainer);\n      var parents = Parents.parentsAndSelf(commonAnchorContainer, rootNode);\n      var wrapElements = filter(parents, function (elm) {\n        return isInline(elm) || isHeading(elm);\n      });\n      var listWrappers = getFullySelectedListWrappers(parents, rng);\n      var allWrappers = wrapElements.concat(listWrappers.length ? listWrappers : directListWrappers(commonAnchorContainer));\n      return map(allWrappers, shallow);\n    };\n    var emptyFragment = function () {\n      return fromElements([]);\n    };\n    var getFragmentFromRange = function (rootNode, rng) {\n      return wrap$3(Element.fromDom(rng.cloneContents()), getWrapElements(rootNode, rng));\n    };\n    var getParentTable = function (rootElm, cell) {\n      return ancestor$1(cell, 'table', curry(eq, rootElm));\n    };\n    var getTableFragment = function (rootNode, selectedTableCells) {\n      return getParentTable(rootNode, selectedTableCells[0]).bind(function (tableElm) {\n        var firstCell = selectedTableCells[0];\n        var lastCell = selectedTableCells[selectedTableCells.length - 1];\n        var fullTableModel = SimpleTableModel.fromDom(tableElm);\n        return SimpleTableModel.subsection(fullTableModel, firstCell, lastCell).map(function (sectionedTableModel) {\n          return fromElements([SimpleTableModel.toDom(sectionedTableModel)]);\n        });\n      }).getOrThunk(emptyFragment);\n    };\n    var getSelectionFragment = function (rootNode, ranges) {\n      return ranges.length > 0 && ranges[0].collapsed ? emptyFragment() : getFragmentFromRange(rootNode, ranges[0]);\n    };\n    var read$4 = function (rootNode, ranges) {\n      var selectedCells = TableCellSelection.getCellsFromElementOrRanges(ranges, rootNode);\n      return selectedCells.length > 0 ? getTableFragment(rootNode, selectedCells) : getSelectionFragment(rootNode, ranges);\n    };\n    var FragmentReader = { read: read$4 };\n\n    var getTextContent = function (editor) {\n      return Option.from(editor.selection.getRng()).map(function (rng) {\n        var bin = editor.dom.add(editor.getBody(), 'div', {\n          'data-mce-bogus': 'all',\n          'style': 'overflow: hidden; opacity: 0;'\n        }, rng.cloneContents());\n        var text = Zwsp.trim(bin.innerText);\n        editor.dom.remove(bin);\n        return text;\n      }).getOr('');\n    };\n    var getHtmlContent = function (editor, args) {\n      var rng = editor.selection.getRng(), tmpElm = editor.dom.create('body');\n      var sel = editor.selection.getSel();\n      var fragment;\n      var ranges = EventProcessRanges.processRanges(editor, MultiRange.getRanges(sel));\n      fragment = args.contextual ? FragmentReader.read(Element.fromDom(editor.getBody()), ranges).dom() : rng.cloneContents();\n      if (fragment) {\n        tmpElm.appendChild(fragment);\n      }\n      return editor.selection.serializer.serialize(tmpElm, args);\n    };\n    var getContent = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.get = true;\n      args.format = args.format || 'html';\n      args.selection = true;\n      args = editor.fire('BeforeGetContent', args);\n      if (args.isDefaultPrevented()) {\n        editor.fire('GetContent', args);\n        return args.content;\n      }\n      if (args.format === 'text') {\n        return getTextContent(editor);\n      } else {\n        args.getInner = true;\n        var content = getHtmlContent(editor, args);\n        if (args.format === 'tree') {\n          return content;\n        } else {\n          args.content = editor.selection.isCollapsed() ? '' : content;\n          editor.fire('GetContent', args);\n          return args.content;\n        }\n      }\n    };\n    var GetSelectionContent = { getContent: getContent };\n\n    var setContent = function (editor, content, args) {\n      var rng = editor.selection.getRng(), caretNode;\n      var doc = editor.getDoc();\n      var frag, temp;\n      args = args || { format: 'html' };\n      args.set = true;\n      args.selection = true;\n      args.content = content;\n      if (!args.no_events) {\n        args = editor.fire('BeforeSetContent', args);\n        if (args.isDefaultPrevented()) {\n          editor.fire('SetContent', args);\n          return;\n        }\n      }\n      content = args.content;\n      if (rng.insertNode) {\n        content += '<span id=\"__caret\">_</span>';\n        if (rng.startContainer === doc && rng.endContainer === doc) {\n          doc.body.innerHTML = content;\n        } else {\n          rng.deleteContents();\n          if (doc.body.childNodes.length === 0) {\n            doc.body.innerHTML = content;\n          } else {\n            if (rng.createContextualFragment) {\n              rng.insertNode(rng.createContextualFragment(content));\n            } else {\n              frag = doc.createDocumentFragment();\n              temp = doc.createElement('div');\n              frag.appendChild(temp);\n              temp.outerHTML = content;\n              rng.insertNode(frag);\n            }\n          }\n        }\n        caretNode = editor.dom.get('__caret');\n        rng = doc.createRange();\n        rng.setStartBefore(caretNode);\n        rng.setEndBefore(caretNode);\n        editor.selection.setRng(rng);\n        editor.dom.remove('__caret');\n        try {\n          editor.selection.setRng(rng);\n        } catch (ex) {\n        }\n      } else {\n        if (rng.item) {\n          doc.execCommand('Delete', false, null);\n          rng = editor.getRng();\n        }\n        if (/^\\s+/.test(content)) {\n          rng.pasteHTML('<span id=\"__mce_tmp\">_</span>' + content);\n          editor.dom.remove('__mce_tmp');\n        } else {\n          rng.pasteHTML(content);\n        }\n      }\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n    };\n    var SetSelectionContent = { setContent: setContent };\n\n    var getEndpointElement = function (root, rng, start, real, resolve) {\n      var container = start ? rng.startContainer : rng.endContainer;\n      var offset = start ? rng.startOffset : rng.endOffset;\n      return Option.from(container).map(Element.fromDom).map(function (elm) {\n        return !real || !rng.collapsed ? child(elm, resolve(elm, offset)).getOr(elm) : elm;\n      }).bind(function (elm) {\n        return isElement(elm) ? Option.some(elm) : parent(elm);\n      }).map(function (elm) {\n        return elm.dom();\n      }).getOr(root);\n    };\n    var getStart$2 = function (root, rng, real) {\n      return getEndpointElement(root, rng, true, real, function (elm, offset) {\n        return Math.min(childNodesCount(elm), offset);\n      });\n    };\n    var getEnd = function (root, rng, real) {\n      return getEndpointElement(root, rng, false, real, function (elm, offset) {\n        return offset > 0 ? offset - 1 : offset;\n      });\n    };\n    var skipEmptyTextNodes = function (node, forwards) {\n      var orig = node;\n      while (node && NodeType.isText(node) && node.length === 0) {\n        node = forwards ? node.nextSibling : node.previousSibling;\n      }\n      return node || orig;\n    };\n    var getNode$1 = function (root, rng) {\n      var elm, startContainer, endContainer, startOffset, endOffset;\n      if (!rng) {\n        return root;\n      }\n      startContainer = rng.startContainer;\n      endContainer = rng.endContainer;\n      startOffset = rng.startOffset;\n      endOffset = rng.endOffset;\n      elm = rng.commonAncestorContainer;\n      if (!rng.collapsed) {\n        if (startContainer === endContainer) {\n          if (endOffset - startOffset < 2) {\n            if (startContainer.hasChildNodes()) {\n              elm = startContainer.childNodes[startOffset];\n            }\n          }\n        }\n        if (startContainer.nodeType === 3 && endContainer.nodeType === 3) {\n          if (startContainer.length === startOffset) {\n            startContainer = skipEmptyTextNodes(startContainer.nextSibling, true);\n          } else {\n            startContainer = startContainer.parentNode;\n          }\n          if (endOffset === 0) {\n            endContainer = skipEmptyTextNodes(endContainer.previousSibling, false);\n          } else {\n            endContainer = endContainer.parentNode;\n          }\n          if (startContainer && startContainer === endContainer) {\n            return startContainer;\n          }\n        }\n      }\n      if (elm && elm.nodeType === 3) {\n        return elm.parentNode;\n      }\n      return elm;\n    };\n    var getSelectedBlocks = function (dom, rng, startElm, endElm) {\n      var node, root;\n      var selectedBlocks = [];\n      root = dom.getRoot();\n      startElm = dom.getParent(startElm || getStart$2(root, rng, rng.collapsed), dom.isBlock);\n      endElm = dom.getParent(endElm || getEnd(root, rng, rng.collapsed), dom.isBlock);\n      if (startElm && startElm !== root) {\n        selectedBlocks.push(startElm);\n      }\n      if (startElm && endElm && startElm !== endElm) {\n        node = startElm;\n        var walker = new TreeWalker(startElm, root);\n        while ((node = walker.next()) && node !== endElm) {\n          if (dom.isBlock(node)) {\n            selectedBlocks.push(node);\n          }\n        }\n      }\n      if (endElm && startElm !== endElm && endElm !== root) {\n        selectedBlocks.push(endElm);\n      }\n      return selectedBlocks;\n    };\n    var select$1 = function (dom, node, content) {\n      return Option.from(node).map(function (node) {\n        var idx = dom.nodeIndex(node);\n        var rng = dom.createRng();\n        rng.setStart(node.parentNode, idx);\n        rng.setEnd(node.parentNode, idx + 1);\n        if (content) {\n          moveEndPoint$1(dom, rng, node, true);\n          moveEndPoint$1(dom, rng, node, false);\n        }\n        return rng;\n      });\n    };\n\n    var each$j = Tools.each;\n    var isNativeIeSelection = function (rng) {\n      return !!rng.select;\n    };\n    var isAttachedToDom = function (node) {\n      return !!(node && node.ownerDocument) && contains$3(Element.fromDom(node.ownerDocument), Element.fromDom(node));\n    };\n    var isValidRange = function (rng) {\n      if (!rng) {\n        return false;\n      } else if (isNativeIeSelection(rng)) {\n        return true;\n      } else {\n        return isAttachedToDom(rng.startContainer) && isAttachedToDom(rng.endContainer);\n      }\n    };\n    var Selection$1 = function (dom, win, serializer, editor) {\n      var bookmarkManager, controlSelection;\n      var selectedRange, explicitRange, selectorChangedData;\n      var setCursorLocation = function (node, offset) {\n        var rng = dom.createRng();\n        if (!node) {\n          moveEndPoint$1(dom, rng, editor.getBody(), true);\n          setRng(rng);\n        } else {\n          rng.setStart(node, offset);\n          rng.setEnd(node, offset);\n          setRng(rng);\n          collapse(false);\n        }\n      };\n      var getContent = function (args) {\n        return GetSelectionContent.getContent(editor, args);\n      };\n      var setContent = function (content, args) {\n        return SetSelectionContent.setContent(editor, content, args);\n      };\n      var getStart = function (real) {\n        return getStart$2(editor.getBody(), getRng(), real);\n      };\n      var getEnd$1 = function (real) {\n        return getEnd(editor.getBody(), getRng(), real);\n      };\n      var getBookmark = function (type, normalized) {\n        return bookmarkManager.getBookmark(type, normalized);\n      };\n      var moveToBookmark = function (bookmark) {\n        return bookmarkManager.moveToBookmark(bookmark);\n      };\n      var select = function (node, content) {\n        select$1(dom, node, content).each(setRng);\n        return node;\n      };\n      var isCollapsed = function () {\n        var rng = getRng(), sel = getSel();\n        if (!rng || rng.item) {\n          return false;\n        }\n        if (rng.compareEndPoints) {\n          return rng.compareEndPoints('StartToEnd', rng) === 0;\n        }\n        return !sel || rng.collapsed;\n      };\n      var collapse = function (toStart) {\n        var rng = getRng();\n        rng.collapse(!!toStart);\n        setRng(rng);\n      };\n      var getSel = function () {\n        return win.getSelection ? win.getSelection() : win.document.selection;\n      };\n      var getRng = function () {\n        var selection, rng, elm, doc;\n        var tryCompareBoundaryPoints = function (how, sourceRange, destinationRange) {\n          try {\n            return sourceRange.compareBoundaryPoints(how, destinationRange);\n          } catch (ex) {\n            return -1;\n          }\n        };\n        if (!win) {\n          return null;\n        }\n        doc = win.document;\n        if (typeof doc === 'undefined' || doc === null) {\n          return null;\n        }\n        if (editor.bookmark !== undefined && EditorFocus.hasFocus(editor) === false) {\n          var bookmark = SelectionBookmark.getRng(editor);\n          if (bookmark.isSome()) {\n            return bookmark.map(function (r) {\n              return EventProcessRanges.processRanges(editor, [r])[0];\n            }).getOr(doc.createRange());\n          }\n        }\n        try {\n          if ((selection = getSel()) && !NodeType.isRestrictedNode(selection.anchorNode)) {\n            if (selection.rangeCount > 0) {\n              rng = selection.getRangeAt(0);\n            } else {\n              rng = selection.createRange ? selection.createRange() : doc.createRange();\n            }\n          }\n        } catch (ex) {\n        }\n        rng = EventProcessRanges.processRanges(editor, [rng])[0];\n        if (!rng) {\n          rng = doc.createRange ? doc.createRange() : doc.body.createTextRange();\n        }\n        if (rng.setStart && rng.startContainer.nodeType === 9 && rng.collapsed) {\n          elm = dom.getRoot();\n          rng.setStart(elm, 0);\n          rng.setEnd(elm, 0);\n        }\n        if (selectedRange && explicitRange) {\n          if (tryCompareBoundaryPoints(rng.START_TO_START, rng, selectedRange) === 0 && tryCompareBoundaryPoints(rng.END_TO_END, rng, selectedRange) === 0) {\n            rng = explicitRange;\n          } else {\n            selectedRange = null;\n            explicitRange = null;\n          }\n        }\n        return rng;\n      };\n      var setRng = function (rng, forward) {\n        var sel, node, evt;\n        if (!isValidRange(rng)) {\n          return;\n        }\n        var ieRange = isNativeIeSelection(rng) ? rng : null;\n        if (ieRange) {\n          explicitRange = null;\n          try {\n            ieRange.select();\n          } catch (ex) {\n          }\n          return;\n        }\n        sel = getSel();\n        evt = editor.fire('SetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n        rng = evt.range;\n        if (sel) {\n          explicitRange = rng;\n          try {\n            sel.removeAllRanges();\n            sel.addRange(rng);\n          } catch (ex) {\n          }\n          if (forward === false && sel.extend) {\n            sel.collapse(rng.endContainer, rng.endOffset);\n            sel.extend(rng.startContainer, rng.startOffset);\n          }\n          selectedRange = sel.rangeCount > 0 ? sel.getRangeAt(0) : null;\n        }\n        if (!rng.collapsed && rng.startContainer === rng.endContainer && sel.setBaseAndExtent && !Env.ie) {\n          if (rng.endOffset - rng.startOffset < 2) {\n            if (rng.startContainer.hasChildNodes()) {\n              node = rng.startContainer.childNodes[rng.startOffset];\n              if (node && node.tagName === 'IMG') {\n                sel.setBaseAndExtent(rng.startContainer, rng.startOffset, rng.endContainer, rng.endOffset);\n                if (sel.anchorNode !== rng.startContainer || sel.focusNode !== rng.endContainer) {\n                  sel.setBaseAndExtent(node, 0, node, 1);\n                }\n              }\n            }\n          }\n        }\n        editor.fire('AfterSetSelectionRange', {\n          range: rng,\n          forward: forward\n        });\n      };\n      var setNode = function (elm) {\n        setContent(dom.getOuterHTML(elm));\n        return elm;\n      };\n      var getNode = function () {\n        return getNode$1(editor.getBody(), getRng());\n      };\n      var getSelectedBlocks$1 = function (startElm, endElm) {\n        return getSelectedBlocks(dom, getRng(), startElm, endElm);\n      };\n      var isForward = function () {\n        var sel = getSel();\n        var anchorRange, focusRange;\n        if (!sel || !sel.anchorNode || !sel.focusNode) {\n          return true;\n        }\n        anchorRange = dom.createRng();\n        anchorRange.setStart(sel.anchorNode, sel.anchorOffset);\n        anchorRange.collapse(true);\n        focusRange = dom.createRng();\n        focusRange.setStart(sel.focusNode, sel.focusOffset);\n        focusRange.collapse(true);\n        return anchorRange.compareBoundaryPoints(anchorRange.START_TO_START, focusRange) <= 0;\n      };\n      var normalize = function () {\n        var rng = getRng();\n        var sel = getSel();\n        if (!MultiRange.hasMultipleRanges(sel) && hasAnyRanges(editor)) {\n          var normRng = NormalizeRange.normalize(dom, rng);\n          normRng.each(function (normRng) {\n            setRng(normRng, isForward());\n          });\n          return normRng.getOr(rng);\n        }\n        return rng;\n      };\n      var selectorChanged = function (selector, callback) {\n        var currentSelectors;\n        if (!selectorChangedData) {\n          selectorChangedData = {};\n          currentSelectors = {};\n          editor.on('NodeChange', function (e) {\n            var node = e.element, parents = dom.getParents(node, null, dom.getRoot()), matchedSelectors = {};\n            each$j(selectorChangedData, function (callbacks, selector) {\n              each$j(parents, function (node) {\n                if (dom.is(node, selector)) {\n                  if (!currentSelectors[selector]) {\n                    each$j(callbacks, function (callback) {\n                      callback(true, {\n                        node: node,\n                        selector: selector,\n                        parents: parents\n                      });\n                    });\n                    currentSelectors[selector] = callbacks;\n                  }\n                  matchedSelectors[selector] = callbacks;\n                  return false;\n                }\n              });\n            });\n            each$j(currentSelectors, function (callbacks, selector) {\n              if (!matchedSelectors[selector]) {\n                delete currentSelectors[selector];\n                each$j(callbacks, function (callback) {\n                  callback(false, {\n                    node: node,\n                    selector: selector,\n                    parents: parents\n                  });\n                });\n              }\n            });\n          });\n        }\n        if (!selectorChangedData[selector]) {\n          selectorChangedData[selector] = [];\n        }\n        selectorChangedData[selector].push(callback);\n        return exports;\n      };\n      var getScrollContainer = function () {\n        var scrollContainer;\n        var node = dom.getRoot();\n        while (node && node.nodeName !== 'BODY') {\n          if (node.scrollHeight > node.clientHeight) {\n            scrollContainer = node;\n            break;\n          }\n          node = node.parentNode;\n        }\n        return scrollContainer;\n      };\n      var scrollIntoView = function (elm, alignToTop) {\n        return ScrollIntoView.scrollElementIntoView(editor, elm, alignToTop);\n      };\n      var placeCaretAt = function (clientX, clientY) {\n        return setRng(CaretRangeFromPoint.fromPoint(clientX, clientY, editor.getDoc()));\n      };\n      var getBoundingClientRect = function () {\n        var rng = getRng();\n        return rng.collapsed ? CaretPosition$1.fromRangeStart(rng).getClientRects()[0] : rng.getBoundingClientRect();\n      };\n      var destroy = function () {\n        win = selectedRange = explicitRange = null;\n        controlSelection.destroy();\n      };\n      var exports = {\n        bookmarkManager: null,\n        controlSelection: null,\n        dom: dom,\n        win: win,\n        serializer: serializer,\n        editor: editor,\n        collapse: collapse,\n        setCursorLocation: setCursorLocation,\n        getContent: getContent,\n        setContent: setContent,\n        getBookmark: getBookmark,\n        moveToBookmark: moveToBookmark,\n        select: select,\n        isCollapsed: isCollapsed,\n        isForward: isForward,\n        setNode: setNode,\n        getNode: getNode,\n        getSel: getSel,\n        setRng: setRng,\n        getRng: getRng,\n        getStart: getStart,\n        getEnd: getEnd$1,\n        getSelectedBlocks: getSelectedBlocks$1,\n        normalize: normalize,\n        selectorChanged: selectorChanged,\n        getScrollContainer: getScrollContainer,\n        scrollIntoView: scrollIntoView,\n        placeCaretAt: placeCaretAt,\n        getBoundingClientRect: getBoundingClientRect,\n        destroy: destroy\n      };\n      bookmarkManager = BookmarkManager$1(exports);\n      controlSelection = ControlSelection(exports, editor);\n      exports.bookmarkManager = bookmarkManager;\n      exports.controlSelection = controlSelection;\n      return exports;\n    };\n\n    var BreakType;\n    (function (BreakType) {\n      BreakType[BreakType['Br'] = 0] = 'Br';\n      BreakType[BreakType['Block'] = 1] = 'Block';\n      BreakType[BreakType['Wrap'] = 2] = 'Wrap';\n      BreakType[BreakType['Eol'] = 3] = 'Eol';\n    }(BreakType || (BreakType = {})));\n    var flip = function (direction, positions) {\n      return direction === HDirection.Backwards ? positions.reverse() : positions;\n    };\n    var walk$3 = function (direction, caretWalker, pos) {\n      return direction === HDirection.Forwards ? caretWalker.next(pos) : caretWalker.prev(pos);\n    };\n    var getBreakType = function (scope, direction, currentPos, nextPos) {\n      if (NodeType.isBr(nextPos.getNode(direction === HDirection.Forwards))) {\n        return BreakType.Br;\n      } else if (isInSameBlock(currentPos, nextPos) === false) {\n        return BreakType.Block;\n      } else {\n        return BreakType.Wrap;\n      }\n    };\n    var getPositionsUntil = function (predicate, direction, scope, start) {\n      var caretWalker = CaretWalker(scope);\n      var currentPos = start, nextPos;\n      var positions = [];\n      while (currentPos) {\n        nextPos = walk$3(direction, caretWalker, currentPos);\n        if (!nextPos) {\n          break;\n        }\n        if (NodeType.isBr(nextPos.getNode(false))) {\n          if (direction === HDirection.Forwards) {\n            return {\n              positions: flip(direction, positions).concat([nextPos]),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          } else {\n            return {\n              positions: flip(direction, positions),\n              breakType: BreakType.Br,\n              breakAt: Option.some(nextPos)\n            };\n          }\n        }\n        if (!nextPos.isVisible()) {\n          currentPos = nextPos;\n          continue;\n        }\n        if (predicate(currentPos, nextPos)) {\n          var breakType = getBreakType(scope, direction, currentPos, nextPos);\n          return {\n            positions: flip(direction, positions),\n            breakType: breakType,\n            breakAt: Option.some(nextPos)\n          };\n        }\n        positions.push(nextPos);\n        currentPos = nextPos;\n      }\n      return {\n        positions: flip(direction, positions),\n        breakType: BreakType.Eol,\n        breakAt: Option.none()\n      };\n    };\n    var getAdjacentLinePositions = function (direction, getPositionsUntilBreak, scope, start) {\n      return getPositionsUntilBreak(scope, start).breakAt.map(function (pos) {\n        var positions = getPositionsUntilBreak(scope, pos).positions;\n        return direction === HDirection.Backwards ? positions.concat(pos) : [pos].concat(positions);\n      }).getOr([]);\n    };\n    var findClosestHorizontalPositionFromPoint = function (positions, x) {\n      return foldl(positions, function (acc, newPos) {\n        return acc.fold(function () {\n          return Option.some(newPos);\n        }, function (lastPos) {\n          return liftN([\n            head(lastPos.getClientRects()),\n            head(newPos.getClientRects())\n          ], function (lastRect, newRect) {\n            var lastDist = Math.abs(x - lastRect.left);\n            var newDist = Math.abs(x - newRect.left);\n            return newDist <= lastDist ? newPos : lastPos;\n          }).or(acc);\n        });\n      }, Option.none());\n    };\n    var findClosestHorizontalPosition = function (positions, pos) {\n      return head(pos.getClientRects()).bind(function (targetRect) {\n        return findClosestHorizontalPositionFromPoint(positions, targetRect.left);\n      });\n    };\n    var getPositionsUntilPreviousLine = curry(getPositionsUntil, CaretPosition.isAbove, -1);\n    var getPositionsUntilNextLine = curry(getPositionsUntil, CaretPosition.isBelow, 1);\n    var isAtFirstLine = function (scope, pos) {\n      return getPositionsUntilPreviousLine(scope, pos).breakAt.isNone();\n    };\n    var isAtLastLine = function (scope, pos) {\n      return getPositionsUntilNextLine(scope, pos).breakAt.isNone();\n    };\n    var getPositionsAbove = curry(getAdjacentLinePositions, -1, getPositionsUntilPreviousLine);\n    var getPositionsBelow = curry(getAdjacentLinePositions, 1, getPositionsUntilNextLine);\n    var getFirstLinePositions = function (scope) {\n      return CaretFinder.firstPositionIn(scope).map(function (pos) {\n        return [pos].concat(getPositionsUntilNextLine(scope, pos).positions);\n      }).getOr([]);\n    };\n    var getLastLinePositions = function (scope) {\n      return CaretFinder.lastPositionIn(scope).map(function (pos) {\n        return getPositionsUntilPreviousLine(scope, pos).positions.concat(pos);\n      }).getOr([]);\n    };\n\n    var isContentEditableFalse$b = NodeType.isContentEditableFalse;\n    var getSelectedNode$1 = getSelectedNode;\n    var moveToCeFalseHorizontally = function (direction, editor, getNextPosFn, range) {\n      var forwards = direction === HDirection.Forwards;\n      var isBeforeContentEditableFalseFn = forwards ? isBeforeContentEditableFalse : isAfterContentEditableFalse;\n      if (!range.collapsed) {\n        var node = getSelectedNode$1(range);\n        if (isContentEditableFalse$b(node)) {\n          return showCaret(direction, editor, node, direction === HDirection.Backwards, true);\n        }\n      }\n      var rangeIsInContainerBlock = isRangeInCaretContainerBlock(range);\n      var caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      if (isBeforeContentEditableFalseFn(caretPosition)) {\n        return selectNode(editor, caretPosition.getNode(!forwards));\n      }\n      var nextCaretPosition = InlineUtils.normalizePosition(forwards, getNextPosFn(caretPosition));\n      if (!nextCaretPosition) {\n        if (rangeIsInContainerBlock) {\n          return range;\n        }\n        return null;\n      }\n      if (isBeforeContentEditableFalseFn(nextCaretPosition)) {\n        return showCaret(direction, editor, nextCaretPosition.getNode(!forwards), forwards, true);\n      }\n      var peekCaretPosition = getNextPosFn(nextCaretPosition);\n      if (peekCaretPosition && isBeforeContentEditableFalseFn(peekCaretPosition)) {\n        if (isMoveInsideSameBlock(nextCaretPosition, peekCaretPosition)) {\n          return showCaret(direction, editor, peekCaretPosition.getNode(!forwards), forwards, true);\n        }\n      }\n      if (rangeIsInContainerBlock) {\n        return renderRangeCaret(editor, nextCaretPosition.toRange(), true);\n      }\n      return null;\n    };\n    var moveToCeFalseVertically = function (direction, editor, walkerFn, range) {\n      var caretPosition, linePositions, nextLinePositions;\n      var closestNextLineRect, caretClientRect, clientX;\n      var dist1, dist2, contentEditableFalseNode;\n      contentEditableFalseNode = getSelectedNode$1(range);\n      caretPosition = getNormalizedRangeEndPoint(direction, editor.getBody(), range);\n      linePositions = walkerFn(editor.getBody(), isAboveLine(1), caretPosition);\n      nextLinePositions = filter(linePositions, isLine(1));\n      caretClientRect = ArrUtils.last(caretPosition.getClientRects());\n      if (isBeforeContentEditableFalse(caretPosition) || isBeforeTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode();\n      }\n      if (isAfterContentEditableFalse(caretPosition) || isAfterTable(caretPosition)) {\n        contentEditableFalseNode = caretPosition.getNode(true);\n      }\n      if (!caretClientRect) {\n        return null;\n      }\n      clientX = caretClientRect.left;\n      closestNextLineRect = findClosestClientRect(nextLinePositions, clientX);\n      if (closestNextLineRect) {\n        if (isContentEditableFalse$b(closestNextLineRect.node)) {\n          dist1 = Math.abs(clientX - closestNextLineRect.left);\n          dist2 = Math.abs(clientX - closestNextLineRect.right);\n          return showCaret(direction, editor, closestNextLineRect.node, dist1 < dist2, true);\n        }\n      }\n      if (contentEditableFalseNode) {\n        var caretPositions = positionsUntil(direction, editor.getBody(), isAboveLine(1), contentEditableFalseNode);\n        closestNextLineRect = findClosestClientRect(filter(caretPositions, isLine(1)), clientX);\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n        closestNextLineRect = ArrUtils.last(filter(caretPositions, isLine(0)));\n        if (closestNextLineRect) {\n          return renderRangeCaret(editor, closestNextLineRect.position.toRange(), true);\n        }\n      }\n    };\n    var createTextBlock = function (editor) {\n      var textBlock = editor.dom.create(Settings.getForcedRootBlock(editor));\n      if (!Env.ie || Env.ie >= 11) {\n        textBlock.innerHTML = '<br data-mce-bogus=\"1\">';\n      }\n      return textBlock;\n    };\n    var exitPreBlock = function (editor, direction, range) {\n      var pre, caretPos, newBlock;\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      if (range.collapsed && editor.settings.forced_root_block) {\n        pre = editor.dom.getParent(range.startContainer, 'PRE');\n        if (!pre) {\n          return;\n        }\n        if (direction === 1) {\n          caretPos = getNextVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        } else {\n          caretPos = getPrevVisualCaretPosition(CaretPosition$1.fromRangeStart(range));\n        }\n        if (!caretPos) {\n          newBlock = createTextBlock(editor);\n          if (direction === 1) {\n            editor.$(pre).after(newBlock);\n          } else {\n            editor.$(pre).before(newBlock);\n          }\n          editor.selection.select(newBlock, true);\n          editor.selection.collapse();\n        }\n      }\n    };\n    var getHorizontalRange = function (editor, forward) {\n      var caretWalker = CaretWalker(editor.getBody());\n      var getNextVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.next);\n      var getPrevVisualCaretPosition = curry(getVisualCaretPosition, caretWalker.prev);\n      var newRange;\n      var direction = forward ? HDirection.Forwards : HDirection.Backwards;\n      var getNextPosFn = forward ? getNextVisualCaretPosition : getPrevVisualCaretPosition;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseHorizontally(direction, editor, getNextPosFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var getVerticalRange = function (editor, down) {\n      var newRange;\n      var direction = down ? 1 : -1;\n      var walkerFn = down ? downUntil : upUntil;\n      var range = editor.selection.getRng();\n      newRange = moveToCeFalseVertically(direction, editor, walkerFn, range);\n      if (newRange) {\n        return newRange;\n      }\n      newRange = exitPreBlock(editor, direction, range);\n      if (newRange) {\n        return newRange;\n      }\n      return null;\n    };\n    var moveH = function (editor, forward) {\n      return function () {\n        var newRng = getHorizontalRange(editor, forward);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var moveV = function (editor, down) {\n      return function () {\n        var newRng = getVerticalRange(editor, down);\n        if (newRng) {\n          editor.selection.setRng(newRng);\n          return true;\n        } else {\n          return false;\n        }\n      };\n    };\n    var isCefPosition = function (forward) {\n      return function (pos) {\n        return forward ? isAfterContentEditableFalse(pos) : isBeforeContentEditableFalse(pos);\n      };\n    };\n    var moveToLineEndPoint = function (editor, forward) {\n      return function () {\n        var from = forward ? CaretPosition$1.fromRangeEnd(editor.selection.getRng()) : CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        var result = forward ? getPositionsUntilNextLine(editor.getBody(), from) : getPositionsUntilPreviousLine(editor.getBody(), from);\n        var to = forward ? last(result.positions) : head(result.positions);\n        return to.filter(isCefPosition(forward)).fold(constant(false), function (pos) {\n          editor.selection.setRng(pos.toRange());\n          return true;\n        });\n      };\n    };\n\n    var deflate = function (rect, delta) {\n      return {\n        left: rect.left - delta,\n        top: rect.top - delta,\n        right: rect.right + delta * 2,\n        bottom: rect.bottom + delta * 2,\n        width: rect.width + delta,\n        height: rect.height + delta\n      };\n    };\n    var getCorners = function (getYAxisValue, tds) {\n      return bind(tds, function (td) {\n        var rect = deflate(clone$1(td.getBoundingClientRect()), -1);\n        return [\n          {\n            x: rect.left,\n            y: getYAxisValue(rect),\n            cell: td\n          },\n          {\n            x: rect.right,\n            y: getYAxisValue(rect),\n            cell: td\n          }\n        ];\n      });\n    };\n    var findClosestCorner = function (corners, x, y) {\n      return foldl(corners, function (acc, newCorner) {\n        return acc.fold(function () {\n          return Option.some(newCorner);\n        }, function (oldCorner) {\n          var oldDist = Math.sqrt(Math.abs(oldCorner.x - x) + Math.abs(oldCorner.y - y));\n          var newDist = Math.sqrt(Math.abs(newCorner.x - x) + Math.abs(newCorner.y - y));\n          return Option.some(newDist < oldDist ? newCorner : oldCorner);\n        });\n      }, Option.none());\n    };\n    var getClosestCell$1 = function (getYAxisValue, isTargetCorner, table, x, y) {\n      var cells = descendants$1(Element.fromDom(table), 'td,th,caption').map(function (e) {\n        return e.dom();\n      });\n      var corners = filter(getCorners(getYAxisValue, cells), function (corner) {\n        return isTargetCorner(corner, y);\n      });\n      return findClosestCorner(corners, x, y).map(function (corner) {\n        return corner.cell;\n      });\n    };\n    var getBottomValue = function (rect) {\n      return rect.bottom;\n    };\n    var getTopValue = function (rect) {\n      return rect.top;\n    };\n    var isAbove$1 = function (corner, y) {\n      return corner.y < y;\n    };\n    var isBelow$1 = function (corner, y) {\n      return corner.y > y;\n    };\n    var getClosestCellAbove = curry(getClosestCell$1, getBottomValue, isAbove$1);\n    var getClosestCellBelow = curry(getClosestCell$1, getTopValue, isBelow$1);\n    var findClosestPositionInAboveCell = function (table, pos) {\n      return head(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellAbove(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getLastLinePositions(cell), pos);\n      });\n    };\n    var findClosestPositionInBelowCell = function (table, pos) {\n      return last(pos.getClientRects()).bind(function (rect) {\n        return getClosestCellBelow(table, rect.left, rect.top);\n      }).bind(function (cell) {\n        return findClosestHorizontalPosition(getFirstLinePositions(cell), pos);\n      });\n    };\n\n    var moveToRange = function (editor, rng) {\n      editor.selection.setRng(rng);\n      ScrollIntoView.scrollRangeIntoView(editor, rng);\n    };\n    var hasNextBreak = function (getPositionsUntil, scope, lineInfo) {\n      return lineInfo.breakAt.map(function (breakPos) {\n        return getPositionsUntil(scope, breakPos).breakAt.isSome();\n      }).getOr(false);\n    };\n    var startsWithWrapBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Wrap && lineInfo.positions.length === 0;\n    };\n    var startsWithBrBreak = function (lineInfo) {\n      return lineInfo.breakType === BreakType.Br && lineInfo.positions.length === 1;\n    };\n    var isAtTableCellLine = function (getPositionsUntil, scope, pos) {\n      var lineInfo = getPositionsUntil(scope, pos);\n      if (startsWithWrapBreak(lineInfo) || !NodeType.isBr(pos.getNode()) && startsWithBrBreak(lineInfo)) {\n        return !hasNextBreak(getPositionsUntil, scope, lineInfo);\n      } else {\n        return lineInfo.breakAt.isNone();\n      }\n    };\n    var isAtFirstTableCellLine = curry(isAtTableCellLine, getPositionsUntilPreviousLine);\n    var isAtLastTableCellLine = curry(isAtTableCellLine, getPositionsUntilNextLine);\n    var isCaretAtStartOrEndOfTable = function (forward, rng, table) {\n      var caretPos = CaretPosition$1.fromRangeStart(rng);\n      return CaretFinder.positionIn(!forward, table).map(function (pos) {\n        return pos.isEqual(caretPos);\n      }).getOr(false);\n    };\n    var navigateHorizontally = function (editor, forward, table, td) {\n      var rng = editor.selection.getRng();\n      var direction = forward ? 1 : -1;\n      if (isFakeCaretTableBrowser() && isCaretAtStartOrEndOfTable(forward, rng, table)) {\n        var newRng = showCaret(direction, editor, table, !forward, true);\n        moveToRange(editor, newRng);\n        return true;\n      }\n      return false;\n    };\n    var getClosestAbovePosition = function (root, table, start) {\n      return findClosestPositionInAboveCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsAbove(root, CaretPosition$1.before(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.before(table));\n    };\n    var getClosestBelowPosition = function (root, table, start) {\n      return findClosestPositionInBelowCell(table, start).orThunk(function () {\n        return head(start.getClientRects()).bind(function (rect) {\n          return findClosestHorizontalPositionFromPoint(getPositionsBelow(root, CaretPosition$1.after(table)), rect.left);\n        });\n      }).getOr(CaretPosition$1.after(table));\n    };\n    var getTable = function (previous, pos) {\n      var node = pos.getNode(previous);\n      return NodeType.isElement(node) && node.nodeName === 'TABLE' ? Option.some(node) : Option.none();\n    };\n    var renderBlock = function (down, editor, table, pos) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlock) {\n        editor.undoManager.transact(function () {\n          var element = Element.fromTag(forcedRootBlock);\n          setAll(element, Settings.getForcedRootBlockAttrs(editor));\n          append(element, Element.fromTag('br'));\n          if (down) {\n            after(Element.fromDom(table), element);\n          } else {\n            before(Element.fromDom(table), element);\n          }\n          var rng = editor.dom.createRng();\n          rng.setStart(element.dom(), 0);\n          rng.setEnd(element.dom(), 0);\n          moveToRange(editor, rng);\n        });\n      } else {\n        moveToRange(editor, pos.toRange());\n      }\n    };\n    var moveCaret = function (editor, down, pos) {\n      var table = down ? getTable(true, pos) : getTable(false, pos);\n      var last = down === false;\n      table.fold(function () {\n        return moveToRange(editor, pos.toRange());\n      }, function (table) {\n        return CaretFinder.positionIn(last, editor.getBody()).filter(function (lastPos) {\n          return lastPos.isEqual(pos);\n        }).fold(function () {\n          return moveToRange(editor, pos.toRange());\n        }, function (_) {\n          return renderBlock(down, editor, table, pos);\n        });\n      });\n    };\n    var navigateVertically = function (editor, down, table, td) {\n      var rng = editor.selection.getRng();\n      var pos = CaretPosition$1.fromRangeStart(rng);\n      var root = editor.getBody();\n      if (!down && isAtFirstTableCellLine(td, pos)) {\n        var newPos = getClosestAbovePosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else if (down && isAtLastTableCellLine(td, pos)) {\n        var newPos = getClosestBelowPosition(root, table, pos);\n        moveCaret(editor, down, newPos);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var moveH$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateHorizontally(editor, forward, table);\n          });\n        }).getOr(false);\n      };\n    };\n    var moveV$1 = function (editor, forward) {\n      return function () {\n        return Option.from(editor.dom.getParent(editor.selection.getNode(), 'td,th')).bind(function (td) {\n          return Option.from(editor.dom.getParent(td, 'table')).map(function (table) {\n            return navigateVertically(editor, forward, table, td);\n          });\n        }).getOr(false);\n      };\n    };\n\n    var isTarget = function (node) {\n      return contains(['figcaption'], name(node));\n    };\n    var rangeBefore = function (target) {\n      var rng = domGlobals.document.createRange();\n      rng.setStartBefore(target.dom());\n      rng.setEndBefore(target.dom());\n      return rng;\n    };\n    var insertElement = function (root, elm, forward) {\n      if (forward) {\n        append(root, elm);\n      } else {\n        prepend(root, elm);\n      }\n    };\n    var insertBr = function (root, forward) {\n      var br = Element.fromTag('br');\n      insertElement(root, br, forward);\n      return rangeBefore(br);\n    };\n    var insertBlock$1 = function (root, forward, blockName, attrs) {\n      var block = Element.fromTag(blockName);\n      var br = Element.fromTag('br');\n      setAll(block, attrs);\n      append(block, br);\n      insertElement(root, block, forward);\n      return rangeBefore(br);\n    };\n    var insertEmptyLine = function (root, rootBlockName, attrs, forward) {\n      if (rootBlockName === '') {\n        return insertBr(root, forward);\n      } else {\n        return insertBlock$1(root, forward, rootBlockName, attrs);\n      }\n    };\n    var getClosestTargetBlock = function (pos, root) {\n      var isRoot = curry(eq, root);\n      return closest(Element.fromDom(pos.container()), isBlock, isRoot).filter(isTarget);\n    };\n    var isAtFirstOrLastLine = function (root, forward, pos) {\n      return forward ? isAtLastLine(root.dom(), pos) : isAtFirstLine(root.dom(), pos);\n    };\n    var moveCaretToNewEmptyLine = function (editor, forward) {\n      var root = Element.fromDom(editor.getBody());\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var rootBlock = Settings.getForcedRootBlock(editor);\n      var rootBlockAttrs = Settings.getForcedRootBlockAttrs(editor);\n      return getClosestTargetBlock(pos, root).exists(function () {\n        if (isAtFirstOrLastLine(root, forward, pos)) {\n          var rng = insertEmptyLine(root, rootBlock, rootBlockAttrs, forward);\n          editor.selection.setRng(rng);\n          return true;\n        } else {\n          return false;\n        }\n      });\n    };\n    var moveV$2 = function (editor, forward) {\n      return function () {\n        if (editor.selection.isCollapsed()) {\n          return moveCaretToNewEmptyLine(editor, forward);\n        } else {\n          return false;\n        }\n      };\n    };\n\n    var defaultPatterns = function (patterns) {\n      return map(patterns, function (pattern) {\n        return merge({\n          shiftKey: false,\n          altKey: false,\n          ctrlKey: false,\n          metaKey: false,\n          keyCode: 0,\n          action: noop\n        }, pattern);\n      });\n    };\n    var matchesEvent = function (pattern, evt) {\n      return evt.keyCode === pattern.keyCode && evt.shiftKey === pattern.shiftKey && evt.altKey === pattern.altKey && evt.ctrlKey === pattern.ctrlKey && evt.metaKey === pattern.metaKey;\n    };\n    var match$1 = function (patterns, evt) {\n      return bind(defaultPatterns(patterns), function (pattern) {\n        return matchesEvent(pattern, evt) ? [pattern] : [];\n      });\n    };\n    var action = function (f) {\n      var x = [];\n      for (var _i = 1; _i < arguments.length; _i++) {\n        x[_i - 1] = arguments[_i];\n      }\n      var args = Array.prototype.slice.call(arguments, 1);\n      return function () {\n        return f.apply(null, args);\n      };\n    };\n    var execute = function (patterns, evt) {\n      return find(match$1(patterns, evt), function (pattern) {\n        return pattern.action();\n      });\n    };\n    var MatchKeys = {\n      match: match$1,\n      action: action,\n      execute: execute\n    };\n\n    var executeKeydownOverride = function (editor, caret, evt) {\n      var os = PlatformDetection$1.detect().os;\n      MatchKeys.execute([\n        {\n          keyCode: VK.RIGHT,\n          action: moveH(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: moveH$1(editor, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: moveH$1(editor, false)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$1(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$1(editor, true)\n        },\n        {\n          keyCode: VK.RIGHT,\n          action: BoundarySelection.move(editor, caret, true)\n        },\n        {\n          keyCode: VK.LEFT,\n          action: BoundarySelection.move(editor, caret, false)\n        },\n        {\n          keyCode: VK.RIGHT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.moveNextWord(editor, caret)\n        },\n        {\n          keyCode: VK.LEFT,\n          ctrlKey: !os.isOSX(),\n          altKey: os.isOSX(),\n          action: BoundarySelection.movePrevWord(editor, caret)\n        },\n        {\n          keyCode: VK.UP,\n          action: moveV$2(editor, false)\n        },\n        {\n          keyCode: VK.DOWN,\n          action: moveV$2(editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$7 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride(editor, caret, evt);\n        }\n      });\n    };\n    var ArrowKeys = { setup: setup$7 };\n\n    var executeKeydownOverride$1 = function (editor, caret, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineBoundaryDelete.backspaceDelete, editor, caret, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineBoundaryDelete.backspaceDelete, editor, caret, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(TableDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockRangeDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(BlockBoundaryDelete.backspaceDelete, editor, true)\n        },\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, false)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(InlineFormatDelete.backspaceDelete, editor, true)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var executeKeyupOverride = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.BACKSPACE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        },\n        {\n          keyCode: VK.DELETE,\n          action: MatchKeys.action(CefDelete.paddEmptyElement, editor)\n        }\n      ], evt);\n    };\n    var setup$8 = function (editor, caret) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$1(editor, caret, evt);\n        }\n      });\n      editor.on('keyup', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeyupOverride(editor, evt);\n        }\n      });\n    };\n    var DeleteBackspaceKeys = { setup: setup$8 };\n\n    var firstNonWhiteSpaceNodeSibling = function (node) {\n      while (node) {\n        if (node.nodeType === 1 || node.nodeType === 3 && node.data && /[\\r\\n\\s]/.test(node.data)) {\n          return node;\n        }\n        node = node.nextSibling;\n      }\n    };\n    var moveToCaretPosition = function (editor, root) {\n      var walker, node, rng, lastNode = root, tempElm;\n      var dom = editor.dom;\n      var moveCaretBeforeOnEnterElementsMap = editor.schema.getMoveCaretBeforeOnEnterElements();\n      if (!root) {\n        return;\n      }\n      if (/^(LI|DT|DD)$/.test(root.nodeName)) {\n        var firstChild = firstNonWhiteSpaceNodeSibling(root.firstChild);\n        if (firstChild && /^(UL|OL|DL)$/.test(firstChild.nodeName)) {\n          root.insertBefore(dom.doc.createTextNode('\\xA0'), root.firstChild);\n        }\n      }\n      rng = dom.createRng();\n      root.normalize();\n      if (root.hasChildNodes()) {\n        walker = new TreeWalker(root, root);\n        while (node = walker.current()) {\n          if (NodeType.isText(node)) {\n            rng.setStart(node, 0);\n            rng.setEnd(node, 0);\n            break;\n          }\n          if (moveCaretBeforeOnEnterElementsMap[node.nodeName.toLowerCase()]) {\n            rng.setStartBefore(node);\n            rng.setEndBefore(node);\n            break;\n          }\n          lastNode = node;\n          node = walker.next();\n        }\n        if (!node) {\n          rng.setStart(lastNode, 0);\n          rng.setEnd(lastNode, 0);\n        }\n      } else {\n        if (NodeType.isBr(root)) {\n          if (root.nextSibling && dom.isBlock(root.nextSibling)) {\n            rng.setStartBefore(root);\n            rng.setEndBefore(root);\n          } else {\n            rng.setStartAfter(root);\n            rng.setEndAfter(root);\n          }\n        } else {\n          rng.setStart(root, 0);\n          rng.setEnd(root, 0);\n        }\n      }\n      editor.selection.setRng(rng);\n      dom.remove(tempElm);\n      editor.selection.scrollIntoView(root);\n    };\n    var getEditableRoot = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var getParentBlock$2 = function (editor) {\n      return Option.from(editor.dom.getParent(editor.selection.getStart(true), editor.dom.isBlock));\n    };\n    var getParentBlockName = function (editor) {\n      return getParentBlock$2(editor).fold(constant(''), function (parentBlock) {\n        return parentBlock.nodeName.toUpperCase();\n      });\n    };\n    var isListItemParentBlock = function (editor) {\n      return getParentBlock$2(editor).filter(function (elm) {\n        return isListItem(Element.fromDom(elm));\n      }).isSome();\n    };\n    var NewLineUtils = {\n      moveToCaretPosition: moveToCaretPosition,\n      getEditableRoot: getEditableRoot,\n      getParentBlock: getParentBlock$2,\n      getParentBlockName: getParentBlockName,\n      isListItemParentBlock: isListItemParentBlock\n    };\n\n    var hasFirstChild = function (elm, name) {\n      return elm.firstChild && elm.firstChild.nodeName === name;\n    };\n    var hasParent$1 = function (elm, parentName) {\n      return elm && elm.parentNode && elm.parentNode.nodeName === parentName;\n    };\n    var isListBlock = function (elm) {\n      return elm && /^(OL|UL|LI)$/.test(elm.nodeName);\n    };\n    var isNestedList = function (elm) {\n      return isListBlock(elm) && isListBlock(elm.parentNode);\n    };\n    var getContainerBlock = function (containerBlock) {\n      var containerBlockParent = containerBlock.parentNode;\n      if (/^(LI|DT|DD)$/.test(containerBlockParent.nodeName)) {\n        return containerBlockParent;\n      }\n      return containerBlock;\n    };\n    var isFirstOrLastLi = function (containerBlock, parentBlock, first) {\n      var node = containerBlock[first ? 'firstChild' : 'lastChild'];\n      while (node) {\n        if (NodeType.isElement(node)) {\n          break;\n        }\n        node = node[first ? 'nextSibling' : 'previousSibling'];\n      }\n      return node === parentBlock;\n    };\n    var insert$1 = function (editor, createNewBlock, containerBlock, parentBlock, newBlockName) {\n      var dom = editor.dom;\n      var rng = editor.selection.getRng();\n      if (containerBlock === editor.getBody()) {\n        return;\n      }\n      if (isNestedList(containerBlock)) {\n        newBlockName = 'LI';\n      }\n      var newBlock = newBlockName ? createNewBlock(newBlockName) : dom.create('BR');\n      if (isFirstOrLastLi(containerBlock, parentBlock, true) && isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n        } else {\n          dom.replace(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, true)) {\n        if (hasParent$1(containerBlock, 'LI')) {\n          dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n          newBlock.appendChild(dom.doc.createTextNode(' '));\n          newBlock.appendChild(containerBlock);\n        } else {\n          containerBlock.parentNode.insertBefore(newBlock, containerBlock);\n        }\n      } else if (isFirstOrLastLi(containerBlock, parentBlock, false)) {\n        dom.insertAfter(newBlock, getContainerBlock(containerBlock));\n      } else {\n        containerBlock = getContainerBlock(containerBlock);\n        var tmpRng = rng.cloneRange();\n        tmpRng.setStartAfter(parentBlock);\n        tmpRng.setEndAfter(containerBlock);\n        var fragment = tmpRng.extractContents();\n        if (newBlockName === 'LI' && hasFirstChild(fragment, 'LI')) {\n          newBlock = fragment.firstChild;\n          dom.insertAfter(fragment, containerBlock);\n        } else {\n          dom.insertAfter(fragment, containerBlock);\n          dom.insertAfter(newBlock, containerBlock);\n        }\n      }\n      dom.remove(parentBlock);\n      NewLineUtils.moveToCaretPosition(editor, newBlock);\n    };\n    var InsertLi = { insert: insert$1 };\n\n    var trimZwsp = function (fragment) {\n      each(descendants(Element.fromDom(fragment), isText), function (text) {\n        var rawNode = text.dom();\n        rawNode.nodeValue = Zwsp.trim(rawNode.nodeValue);\n      });\n    };\n    var isEmptyAnchor = function (dom, elm) {\n      return elm && elm.nodeName === 'A' && dom.isEmpty(elm);\n    };\n    var isTableCell$5 = function (node) {\n      return node && /^(TD|TH|CAPTION)$/.test(node.nodeName);\n    };\n    var emptyBlock = function (elm) {\n      elm.innerHTML = '<br data-mce-bogus=\"1\">';\n    };\n    var containerAndSiblingName = function (container, nodeName) {\n      return container.nodeName === nodeName || container.previousSibling && container.previousSibling.nodeName === nodeName;\n    };\n    var canSplitBlock = function (dom, node) {\n      return node && dom.isBlock(node) && !/^(TD|TH|CAPTION|FORM)$/.test(node.nodeName) && !/^(fixed|absolute)/i.test(node.style.position) && dom.getContentEditable(node) !== 'true';\n    };\n    var trimInlineElementsOnLeftSideOfBlock = function (dom, nonEmptyElementsMap, block) {\n      var node = block;\n      var firstChilds = [];\n      var i;\n      if (!node) {\n        return;\n      }\n      while (node = node.firstChild) {\n        if (dom.isBlock(node)) {\n          return;\n        }\n        if (NodeType.isElement(node) && !nonEmptyElementsMap[node.nodeName.toLowerCase()]) {\n          firstChilds.push(node);\n        }\n      }\n      i = firstChilds.length;\n      while (i--) {\n        node = firstChilds[i];\n        if (!node.hasChildNodes() || node.firstChild === node.lastChild && node.firstChild.nodeValue === '') {\n          dom.remove(node);\n        } else {\n          if (isEmptyAnchor(dom, node)) {\n            dom.remove(node);\n          }\n        }\n      }\n    };\n    var normalizeZwspOffset = function (start, container, offset) {\n      if (NodeType.isText(container) === false) {\n        return offset;\n      } else if (start) {\n        return offset === 1 && container.data.charAt(offset - 1) === Zwsp.ZWSP ? 0 : offset;\n      } else {\n        return offset === container.data.length - 1 && container.data.charAt(offset) === Zwsp.ZWSP ? container.data.length : offset;\n      }\n    };\n    var includeZwspInRange = function (rng) {\n      var newRng = rng.cloneRange();\n      newRng.setStart(rng.startContainer, normalizeZwspOffset(true, rng.startContainer, rng.startOffset));\n      newRng.setEnd(rng.endContainer, normalizeZwspOffset(false, rng.endContainer, rng.endOffset));\n      return newRng;\n    };\n    var trimLeadingLineBreaks = function (node) {\n      do {\n        if (NodeType.isText(node)) {\n          node.nodeValue = node.nodeValue.replace(/^[\\r\\n]+/, '');\n        }\n        node = node.firstChild;\n      } while (node);\n    };\n    var getEditableRoot$1 = function (dom, node) {\n      var root = dom.getRoot();\n      var parent, editableRoot;\n      parent = node;\n      while (parent !== root && dom.getContentEditable(parent) !== 'false') {\n        if (dom.getContentEditable(parent) === 'true') {\n          editableRoot = parent;\n        }\n        parent = parent.parentNode;\n      }\n      return parent !== root ? editableRoot : root;\n    };\n    var setForcedBlockAttrs = function (editor, node) {\n      var forcedRootBlockName = Settings.getForcedRootBlock(editor);\n      if (forcedRootBlockName && forcedRootBlockName.toLowerCase() === node.tagName.toLowerCase()) {\n        editor.dom.setAttribs(node, Settings.getForcedRootBlockAttrs(editor));\n      }\n    };\n    var wrapSelfAndSiblingsInDefaultBlock = function (editor, newBlockName, rng, container, offset) {\n      var newBlock, parentBlock, startNode, node, next, rootBlockName;\n      var blockName = newBlockName || 'P';\n      var dom = editor.dom, editableRoot = getEditableRoot$1(dom, container);\n      parentBlock = dom.getParent(container, dom.isBlock);\n      if (!parentBlock || !canSplitBlock(dom, parentBlock)) {\n        parentBlock = parentBlock || editableRoot;\n        if (parentBlock === editor.getBody() || isTableCell$5(parentBlock)) {\n          rootBlockName = parentBlock.nodeName.toLowerCase();\n        } else {\n          rootBlockName = parentBlock.parentNode.nodeName.toLowerCase();\n        }\n        if (!parentBlock.hasChildNodes()) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          parentBlock.appendChild(newBlock);\n          rng.setStart(newBlock, 0);\n          rng.setEnd(newBlock, 0);\n          return newBlock;\n        }\n        node = container;\n        while (node.parentNode !== parentBlock) {\n          node = node.parentNode;\n        }\n        while (node && !dom.isBlock(node)) {\n          startNode = node;\n          node = node.previousSibling;\n        }\n        if (startNode && editor.schema.isValidChild(rootBlockName, blockName.toLowerCase())) {\n          newBlock = dom.create(blockName);\n          setForcedBlockAttrs(editor, newBlock);\n          startNode.parentNode.insertBefore(newBlock, startNode);\n          node = startNode;\n          while (node && !dom.isBlock(node)) {\n            next = node.nextSibling;\n            newBlock.appendChild(node);\n            node = next;\n          }\n          rng.setStart(container, offset);\n          rng.setEnd(container, offset);\n        }\n      }\n      return container;\n    };\n    var addBrToBlockIfNeeded = function (dom, block) {\n      var lastChild;\n      block.normalize();\n      lastChild = block.lastChild;\n      if (!lastChild || /^(left|right)$/gi.test(dom.getStyle(lastChild, 'float', true))) {\n        dom.add(block, 'br');\n      }\n    };\n    var insert$2 = function (editor, evt) {\n      var tmpRng, editableRoot, container, offset, parentBlock, shiftKey;\n      var newBlock, fragment, containerBlock, parentBlockName, containerBlockName, newBlockName, isAfterLastNodeInContainer;\n      var dom = editor.dom;\n      var schema = editor.schema, nonEmptyElementsMap = schema.getNonEmptyElements();\n      var rng = editor.selection.getRng();\n      var createNewBlock = function (name) {\n        var node = container, block, clonedNode, caretNode;\n        var textInlineElements = schema.getTextInlineElements();\n        if (name || parentBlockName === 'TABLE' || parentBlockName === 'HR') {\n          block = dom.create(name || newBlockName);\n          setForcedBlockAttrs(editor, block);\n        } else {\n          block = parentBlock.cloneNode(false);\n        }\n        caretNode = block;\n        if (Settings.shouldKeepStyles(editor) === false) {\n          dom.setAttrib(block, 'style', null);\n          dom.setAttrib(block, 'class', null);\n        } else {\n          do {\n            if (textInlineElements[node.nodeName]) {\n              if (isCaretNode(node) || Bookmarks.isBookmarkNode(node)) {\n                continue;\n              }\n              clonedNode = node.cloneNode(false);\n              dom.setAttrib(clonedNode, 'id', '');\n              if (block.hasChildNodes()) {\n                clonedNode.appendChild(block.firstChild);\n                block.appendChild(clonedNode);\n              } else {\n                caretNode = clonedNode;\n                block.appendChild(clonedNode);\n              }\n            }\n          } while ((node = node.parentNode) && node !== editableRoot);\n        }\n        emptyBlock(caretNode);\n        return block;\n      };\n      var isCaretAtStartOrEndOfBlock = function (start) {\n        var walker, node, name, normalizedOffset;\n        normalizedOffset = normalizeZwspOffset(start, container, offset);\n        if (NodeType.isText(container) && (start ? normalizedOffset > 0 : normalizedOffset < container.nodeValue.length)) {\n          return false;\n        }\n        if (container.parentNode === parentBlock && isAfterLastNodeInContainer && !start) {\n          return true;\n        }\n        if (start && NodeType.isElement(container) && container === parentBlock.firstChild) {\n          return true;\n        }\n        if (containerAndSiblingName(container, 'TABLE') || containerAndSiblingName(container, 'HR')) {\n          return isAfterLastNodeInContainer && !start || !isAfterLastNodeInContainer && start;\n        }\n        walker = new TreeWalker(container, parentBlock);\n        if (NodeType.isText(container)) {\n          if (start && normalizedOffset === 0) {\n            walker.prev();\n          } else if (!start && normalizedOffset === container.nodeValue.length) {\n            walker.next();\n          }\n        }\n        while (node = walker.current()) {\n          if (NodeType.isElement(node)) {\n            if (!node.getAttribute('data-mce-bogus')) {\n              name = node.nodeName.toLowerCase();\n              if (nonEmptyElementsMap[name] && name !== 'br') {\n                return false;\n              }\n            }\n          } else if (NodeType.isText(node) && !/^[ \\t\\r\\n]*$/.test(node.nodeValue)) {\n            return false;\n          }\n          if (start) {\n            walker.prev();\n          } else {\n            walker.next();\n          }\n        }\n        return true;\n      };\n      var insertNewBlockAfter = function () {\n        if (/^(H[1-6]|PRE|FIGURE)$/.test(parentBlockName) && containerBlockName !== 'HGROUP') {\n          newBlock = createNewBlock(newBlockName);\n        } else {\n          newBlock = createNewBlock();\n        }\n        if (Settings.shouldEndContainerOnEmptyBlock(editor) && canSplitBlock(dom, containerBlock) && dom.isEmpty(parentBlock)) {\n          newBlock = dom.split(containerBlock, parentBlock);\n        } else {\n          dom.insertAfter(newBlock, parentBlock);\n        }\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      };\n      NormalizeRange.normalize(dom, rng).each(function (normRng) {\n        rng.setStart(normRng.startContainer, normRng.startOffset);\n        rng.setEnd(normRng.endContainer, normRng.endOffset);\n      });\n      container = rng.startContainer;\n      offset = rng.startOffset;\n      newBlockName = Settings.getForcedRootBlock(editor);\n      shiftKey = evt.shiftKey;\n      if (NodeType.isElement(container) && container.hasChildNodes()) {\n        isAfterLastNodeInContainer = offset > container.childNodes.length - 1;\n        container = container.childNodes[Math.min(offset, container.childNodes.length - 1)] || container;\n        if (isAfterLastNodeInContainer && NodeType.isText(container)) {\n          offset = container.nodeValue.length;\n        } else {\n          offset = 0;\n        }\n      }\n      editableRoot = getEditableRoot$1(dom, container);\n      if (!editableRoot) {\n        return;\n      }\n      if (newBlockName && !shiftKey || !newBlockName && shiftKey) {\n        container = wrapSelfAndSiblingsInDefaultBlock(editor, newBlockName, rng, container, offset);\n      }\n      parentBlock = dom.getParent(container, dom.isBlock);\n      containerBlock = parentBlock ? dom.getParent(parentBlock.parentNode, dom.isBlock) : null;\n      parentBlockName = parentBlock ? parentBlock.nodeName.toUpperCase() : '';\n      containerBlockName = containerBlock ? containerBlock.nodeName.toUpperCase() : '';\n      if (containerBlockName === 'LI' && !evt.ctrlKey) {\n        parentBlock = containerBlock;\n        containerBlock = containerBlock.parentNode;\n        parentBlockName = containerBlockName;\n      }\n      if (/^(LI|DT|DD)$/.test(parentBlockName)) {\n        if (dom.isEmpty(parentBlock)) {\n          InsertLi.insert(editor, createNewBlock, containerBlock, parentBlock, newBlockName);\n          return;\n        }\n      }\n      if (newBlockName && parentBlock === editor.getBody()) {\n        return;\n      }\n      newBlockName = newBlockName || 'P';\n      if (isCaretContainerBlock(parentBlock)) {\n        newBlock = showCaretContainerBlock(parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        NewLineUtils.moveToCaretPosition(editor, newBlock);\n      } else if (isCaretAtStartOrEndOfBlock()) {\n        insertNewBlockAfter();\n      } else if (isCaretAtStartOrEndOfBlock(true)) {\n        newBlock = parentBlock.parentNode.insertBefore(createNewBlock(), parentBlock);\n        NewLineUtils.moveToCaretPosition(editor, containerAndSiblingName(parentBlock, 'HR') ? newBlock : parentBlock);\n      } else {\n        tmpRng = includeZwspInRange(rng).cloneRange();\n        tmpRng.setEndAfter(parentBlock);\n        fragment = tmpRng.extractContents();\n        trimZwsp(fragment);\n        trimLeadingLineBreaks(fragment);\n        newBlock = fragment.firstChild;\n        dom.insertAfter(fragment, parentBlock);\n        trimInlineElementsOnLeftSideOfBlock(dom, nonEmptyElementsMap, newBlock);\n        addBrToBlockIfNeeded(dom, parentBlock);\n        if (dom.isEmpty(parentBlock)) {\n          emptyBlock(parentBlock);\n        }\n        newBlock.normalize();\n        if (dom.isEmpty(newBlock)) {\n          dom.remove(newBlock);\n          insertNewBlockAfter();\n        } else {\n          NewLineUtils.moveToCaretPosition(editor, newBlock);\n        }\n      }\n      dom.setAttrib(newBlock, 'id', '');\n      editor.fire('NewBlock', { newBlock: newBlock });\n    };\n    var InsertBlock = { insert: insert$2 };\n\n    var matchesSelector = function (editor, selector) {\n      return NewLineUtils.getParentBlock(editor).filter(function (parentBlock) {\n        return selector.length > 0 && is$1(Element.fromDom(parentBlock), selector);\n      }).isSome();\n    };\n    var shouldInsertBr = function (editor) {\n      return matchesSelector(editor, Settings.getBrNewLineSelector(editor));\n    };\n    var shouldBlockNewLine = function (editor) {\n      return matchesSelector(editor, Settings.getNoNewLineSelector(editor));\n    };\n    var ContextSelectors = {\n      shouldInsertBr: shouldInsertBr,\n      shouldBlockNewLine: shouldBlockNewLine\n    };\n\n    var newLineAction = Adt.generate([\n      { br: [] },\n      { block: [] },\n      { none: [] }\n    ]);\n    var shouldBlockNewLine$1 = function (editor, shiftKey) {\n      return ContextSelectors.shouldBlockNewLine(editor);\n    };\n    var isBrMode = function (requiredState) {\n      return function (editor, shiftKey) {\n        var brMode = Settings.getForcedRootBlock(editor) === '';\n        return brMode === requiredState;\n      };\n    };\n    var inListBlock = function (requiredState) {\n      return function (editor, shiftKey) {\n        return NewLineUtils.isListItemParentBlock(editor) === requiredState;\n      };\n    };\n    var inBlock = function (blockName, requiredState) {\n      return function (editor, shiftKey) {\n        var state = NewLineUtils.getParentBlockName(editor) === blockName.toUpperCase();\n        return state === requiredState;\n      };\n    };\n    var inPreBlock = function (requiredState) {\n      return inBlock('pre', requiredState);\n    };\n    var inSummaryBlock = function () {\n      return inBlock('summary', true);\n    };\n    var shouldPutBrInPre$1 = function (requiredState) {\n      return function (editor, shiftKey) {\n        return Settings.shouldPutBrInPre(editor) === requiredState;\n      };\n    };\n    var inBrContext = function (editor, shiftKey) {\n      return ContextSelectors.shouldInsertBr(editor);\n    };\n    var hasShiftKey = function (editor, shiftKey) {\n      return shiftKey;\n    };\n    var canInsertIntoEditableRoot = function (editor) {\n      var forcedRootBlock = Settings.getForcedRootBlock(editor);\n      var rootEditable = NewLineUtils.getEditableRoot(editor.dom, editor.selection.getStart());\n      return rootEditable && editor.schema.isValidChild(rootEditable.nodeName, forcedRootBlock ? forcedRootBlock : 'P');\n    };\n    var match$2 = function (predicates, action) {\n      return function (editor, shiftKey) {\n        var isMatch = foldl(predicates, function (res, p) {\n          return res && p(editor, shiftKey);\n        }, true);\n        return isMatch ? Option.some(action) : Option.none();\n      };\n    };\n    var getAction$1 = function (editor, evt) {\n      return LazyEvaluator.evaluateUntil([\n        match$2([shouldBlockNewLine$1], newLineAction.none()),\n        match$2([inSummaryBlock()], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(false)\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true),\n          hasShiftKey\n        ], newLineAction.block()),\n        match$2([\n          inPreBlock(true),\n          shouldPutBrInPre$1(true)\n        ], newLineAction.br()),\n        match$2([\n          inListBlock(true),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([inListBlock(true)], newLineAction.block()),\n        match$2([\n          isBrMode(true),\n          hasShiftKey,\n          canInsertIntoEditableRoot\n        ], newLineAction.block()),\n        match$2([isBrMode(true)], newLineAction.br()),\n        match$2([inBrContext], newLineAction.br()),\n        match$2([\n          isBrMode(false),\n          hasShiftKey\n        ], newLineAction.br()),\n        match$2([canInsertIntoEditableRoot], newLineAction.block())\n      ], [\n        editor,\n        evt.shiftKey\n      ]).getOr(newLineAction.none());\n    };\n    var NewLineAction = { getAction: getAction$1 };\n\n    var insert$3 = function (editor, evt) {\n      NewLineAction.getAction(editor, evt).fold(function () {\n        InsertBr.insert(editor, evt);\n      }, function () {\n        InsertBlock.insert(editor, evt);\n      }, noop);\n    };\n    var InsertNewLine = { insert: insert$3 };\n\n    var endTypingLevel = function (undoManager) {\n      if (undoManager.typing) {\n        undoManager.typing = false;\n        undoManager.add();\n      }\n    };\n    var handleEnterKeyEvent = function (editor, event) {\n      if (event.isDefaultPrevented()) {\n        return;\n      }\n      event.preventDefault();\n      endTypingLevel(editor.undoManager);\n      editor.undoManager.transact(function () {\n        if (editor.selection.isCollapsed() === false) {\n          editor.execCommand('Delete');\n        }\n        InsertNewLine.insert(editor, event);\n      });\n    };\n    var setup$9 = function (editor) {\n      editor.on('keydown', function (event) {\n        if (event.keyCode === VK.ENTER) {\n          handleEnterKeyEvent(editor, event);\n        }\n      });\n    };\n    var EnterKey = { setup: setup$9 };\n\n    var insertTextAtPosition = function (text, pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container)) {\n        container.insertData(offset, text);\n        return Option.some(CaretPosition(container, offset + text.length));\n      } else {\n        return getElementFromPosition(pos).map(function (elm) {\n          var textNode = Element.fromText(text);\n          if (pos.isAtEnd()) {\n            after(elm, textNode);\n          } else {\n            before(elm, textNode);\n          }\n          return CaretPosition(textNode.dom(), text.length);\n        });\n      }\n    };\n    var insertNbspAtPosition = curry(insertTextAtPosition, '\\xA0');\n    var insertSpaceAtPosition = curry(insertTextAtPosition, ' ');\n\n    var navigateIgnoreEmptyTextNodes = function (forward, root, from) {\n      return CaretFinder.navigateIgnore(forward, root, from, isEmptyText);\n    };\n    var getClosestBlock = function (root, pos) {\n      return find(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n    };\n    var isAtBeforeAfterBlockBoundary = function (forward, root, pos) {\n      return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n        return getClosestBlock(root, pos).fold(function () {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        }, function (fromBlock) {\n          return isInSameBlock(newPos, pos, root.dom()) === false && contains$3(fromBlock, Element.fromDom(newPos.container()));\n        });\n      });\n    };\n    var isAtBlockBoundary = function (forward, root, pos) {\n      return getClosestBlock(root, pos).fold(function () {\n        return navigateIgnoreEmptyTextNodes(forward, root.dom(), pos).forall(function (newPos) {\n          return isInSameBlock(newPos, pos, root.dom()) === false;\n        });\n      }, function (parent) {\n        return navigateIgnoreEmptyTextNodes(forward, parent.dom(), pos).isNone();\n      });\n    };\n    var isAtStartOfBlock = curry(isAtBlockBoundary, false);\n    var isAtEndOfBlock = curry(isAtBlockBoundary, true);\n    var isBeforeBlock = curry(isAtBeforeAfterBlockBoundary, false);\n    var isAfterBlock = curry(isAtBeforeAfterBlockBoundary, true);\n\n    var nbsp = '\\xA0';\n    var isInMiddleOfText = function (pos) {\n      return CaretPosition.isTextPosition(pos) && !pos.isAtStart() && !pos.isAtEnd();\n    };\n    var getClosestBlock$1 = function (root, pos) {\n      var parentBlocks = filter(Parents.parentsAndSelf(Element.fromDom(pos.container()), root), isBlock);\n      return head(parentBlocks).getOr(root);\n    };\n    var hasSpaceBefore = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isAfterSpace(pos);\n      } else {\n        return isAfterSpace(pos) || CaretFinder.prevPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isAfterSpace);\n      }\n    };\n    var hasSpaceAfter = function (root, pos) {\n      if (isInMiddleOfText(pos)) {\n        return isBeforeSpace(pos);\n      } else {\n        return isBeforeSpace(pos) || CaretFinder.nextPosition(getClosestBlock$1(root, pos).dom(), pos).exists(isBeforeSpace);\n      }\n    };\n    var isPreValue = function (value) {\n      return contains([\n        'pre',\n        'pre-wrap'\n      ], value);\n    };\n    var isInPre = function (pos) {\n      return getElementFromPosition(pos).bind(function (elm) {\n        return closest(elm, isElement);\n      }).exists(function (elm) {\n        return isPreValue(get$1(elm, 'white-space'));\n      });\n    };\n    var isAtBeginningOfBody = function (root, pos) {\n      return CaretFinder.prevPosition(root.dom(), pos).isNone();\n    };\n    var isAtEndOfBody = function (root, pos) {\n      return CaretFinder.nextPosition(root.dom(), pos).isNone();\n    };\n    var isAtLineBoundary = function (root, pos) {\n      return isAtBeginningOfBody(root, pos) || isAtEndOfBody(root, pos) || isAtStartOfBlock(root, pos) || isAtEndOfBlock(root, pos) || isAfterBr(root, pos) || isBeforeBr(root, pos);\n    };\n    var needsToHaveNbsp = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtLineBoundary(root, pos) || hasSpaceBefore(root, pos) || hasSpaceAfter(root, pos);\n      }\n    };\n    var needsToBeNbspLeft = function (root, pos) {\n      if (isInPre(pos)) {\n        return false;\n      } else {\n        return isAtStartOfBlock(root, pos) || isBeforeBlock(root, pos) || isAfterBr(root, pos) || hasSpaceBefore(root, pos);\n      }\n    };\n    var leanRight = function (pos) {\n      var container = pos.container();\n      var offset = pos.offset();\n      if (NodeType.isText(container) && offset < container.data.length) {\n        return CaretPosition(container, offset + 1);\n      } else {\n        return pos;\n      }\n    };\n    var needsToBeNbspRight = function (root, pos) {\n      var afterPos = leanRight(pos);\n      if (isInPre(afterPos)) {\n        return false;\n      } else {\n        return isAtEndOfBlock(root, afterPos) || isAfterBlock(root, afterPos) || isBeforeBr(root, afterPos) || hasSpaceAfter(root, afterPos);\n      }\n    };\n    var needsToBeNbsp = function (root, pos) {\n      return needsToBeNbspLeft(root, pos) || needsToBeNbspRight(root, pos);\n    };\n    var isNbspAt = function (text, offset) {\n      return isNbsp(text.charAt(offset));\n    };\n    var hasNbsp = function (pos) {\n      var container = pos.container();\n      return NodeType.isText(container) && contains$2(container.data, nbsp);\n    };\n    var normalizeNbspMiddle = function (text) {\n      return map(text.split(''), function (chr, i, chars) {\n        if (isNbsp(chr) && i > 0 && i < chars.length - 1 && isContent$1(chars[i - 1]) && isContent$1(chars[i + 1])) {\n          return ' ';\n        } else {\n          return chr;\n        }\n      }).join('');\n    };\n    var normalizeNbspAtStart = function (root, node) {\n      var text = node.data;\n      var firstPos = CaretPosition(node, 0);\n      if (isNbspAt(text, 0) && !needsToBeNbsp(root, firstPos)) {\n        node.data = ' ' + text.slice(1);\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspInMiddleOfTextNode = function (node) {\n      var text = node.data;\n      var newText = normalizeNbspMiddle(text);\n      if (newText !== text) {\n        node.data = newText;\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbspAtEnd = function (root, node) {\n      var text = node.data;\n      var lastPos = CaretPosition(node, text.length - 1);\n      if (isNbspAt(text, text.length - 1) && !needsToBeNbsp(root, lastPos)) {\n        node.data = text.slice(0, -1) + ' ';\n        return true;\n      } else {\n        return false;\n      }\n    };\n    var normalizeNbsps = function (root, pos) {\n      return Option.some(pos).filter(hasNbsp).bind(function (pos) {\n        var container = pos.container();\n        var normalized = normalizeNbspAtStart(root, container) || normalizeNbspInMiddleOfTextNode(container) || normalizeNbspAtEnd(root, container);\n        return normalized ? Option.some(pos) : Option.none();\n      });\n    };\n    var normalizeNbspsInEditor = function (editor) {\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        normalizeNbsps(root, CaretPosition.fromRangeStart(editor.selection.getRng())).each(function (pos) {\n          editor.selection.setRng(pos.toRange());\n        });\n      }\n    };\n\n    var locationToCaretPosition = function (root) {\n      return function (location) {\n        return location.fold(function (element) {\n          return CaretFinder.prevPosition(root.dom(), CaretPosition$1.before(element));\n        }, function (element) {\n          return CaretFinder.firstPositionIn(element);\n        }, function (element) {\n          return CaretFinder.lastPositionIn(element);\n        }, function (element) {\n          return CaretFinder.nextPosition(root.dom(), CaretPosition$1.after(element));\n        });\n      };\n    };\n    var insertInlineBoundarySpaceOrNbsp = function (root, pos) {\n      return function (checkPos) {\n        return needsToHaveNbsp(root, checkPos) ? insertNbspAtPosition(pos) : insertSpaceAtPosition(pos);\n      };\n    };\n    var setSelection$1 = function (editor) {\n      return function (pos) {\n        editor.selection.setRng(pos.toRange());\n        editor.nodeChanged();\n        return true;\n      };\n    };\n    var insertSpaceOrNbspAtSelection = function (editor) {\n      var pos = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n      var root = Element.fromDom(editor.getBody());\n      if (editor.selection.isCollapsed()) {\n        var isInlineTarget = curry(InlineUtils.isInlineTarget, editor);\n        var caretPosition = CaretPosition$1.fromRangeStart(editor.selection.getRng());\n        return BoundaryLocation.readLocation(isInlineTarget, editor.getBody(), caretPosition).bind(locationToCaretPosition(root)).bind(insertInlineBoundarySpaceOrNbsp(root, pos)).exists(setSelection$1(editor));\n      } else {\n        return false;\n      }\n    };\n\n    var executeKeydownOverride$2 = function (editor, evt) {\n      MatchKeys.execute([{\n          keyCode: VK.SPACEBAR,\n          action: MatchKeys.action(insertSpaceOrNbspAtSelection, editor)\n        }], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$a = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$2(editor, evt);\n        }\n      });\n    };\n    var SpaceKey = { setup: setup$a };\n\n    var findBlockCaretContainer = function (editor) {\n      return descendant(Element.fromDom(editor.getBody()), '*[data-mce-caret]').fold(constant(null), function (elm) {\n        return elm.dom();\n      });\n    };\n    var removeIeControlRect = function (editor) {\n      editor.selection.setRng(editor.selection.getRng());\n    };\n    var showBlockCaretContainer = function (editor, blockCaretContainer) {\n      if (blockCaretContainer.hasAttribute('data-mce-caret')) {\n        showCaretContainerBlock(blockCaretContainer);\n        removeIeControlRect(editor);\n        editor.selection.scrollIntoView(blockCaretContainer);\n      }\n    };\n    var handleBlockContainer = function (editor, e) {\n      var blockCaretContainer = findBlockCaretContainer(editor);\n      if (!blockCaretContainer) {\n        return;\n      }\n      if (e.type === 'compositionstart') {\n        e.preventDefault();\n        e.stopPropagation();\n        showBlockCaretContainer(editor, blockCaretContainer);\n        return;\n      }\n      if (hasContent(blockCaretContainer)) {\n        showBlockCaretContainer(editor, blockCaretContainer);\n        editor.undoManager.add();\n      }\n    };\n    var setup$b = function (editor) {\n      editor.on('keyup compositionstart', curry(handleBlockContainer, editor));\n    };\n    var CaretContainerInput = { setup: setup$b };\n\n    var browser$4 = PlatformDetection$1.detect().browser;\n    var setupIeInput = function (editor) {\n      var keypressThrotter = first(function () {\n        if (!editor.composing) {\n          normalizeNbspsInEditor(editor);\n        }\n      }, 0);\n      if (browser$4.isIE()) {\n        editor.on('keypress', function (e) {\n          keypressThrotter.throttle();\n        });\n        editor.on('remove', function (e) {\n          keypressThrotter.cancel();\n        });\n      }\n    };\n    var setup$c = function (editor) {\n      setupIeInput(editor);\n      editor.on('input', function (e) {\n        if (e.isComposing === false) {\n          normalizeNbspsInEditor(editor);\n        }\n      });\n    };\n\n    var executeKeydownOverride$3 = function (editor, evt) {\n      MatchKeys.execute([\n        {\n          keyCode: VK.END,\n          action: moveToLineEndPoint(editor, true)\n        },\n        {\n          keyCode: VK.HOME,\n          action: moveToLineEndPoint(editor, false)\n        }\n      ], evt).each(function (_) {\n        evt.preventDefault();\n      });\n    };\n    var setup$d = function (editor) {\n      editor.on('keydown', function (evt) {\n        if (evt.isDefaultPrevented() === false) {\n          executeKeydownOverride$3(editor, evt);\n        }\n      });\n    };\n    var HomeEndKeys = { setup: setup$d };\n\n    var setup$e = function (editor) {\n      var caret = BoundarySelection.setupSelectedState(editor);\n      CaretContainerInput.setup(editor);\n      ArrowKeys.setup(editor, caret);\n      DeleteBackspaceKeys.setup(editor, caret);\n      EnterKey.setup(editor);\n      SpaceKey.setup(editor);\n      setup$c(editor);\n      HomeEndKeys.setup(editor);\n    };\n    var KeyboardOverrides = { setup: setup$e };\n\n    function Quirks (editor) {\n      var each = Tools.each;\n      var BACKSPACE = VK.BACKSPACE, DELETE = VK.DELETE, dom = editor.dom, selection = editor.selection, settings = editor.settings, parser = editor.parser;\n      var isGecko = Env.gecko, isIE = Env.ie, isWebKit = Env.webkit;\n      var mceInternalUrlPrefix = 'data:text/mce-internal,';\n      var mceInternalDataType = isIE ? 'Text' : 'URL';\n      var setEditorCommandState = function (cmd, state) {\n        try {\n          editor.getDoc().execCommand(cmd, false, state);\n        } catch (ex) {\n        }\n      };\n      var isDefaultPrevented = function (e) {\n        return e.isDefaultPrevented();\n      };\n      var setMceInternalContent = function (e) {\n        var selectionHtml, internalContent;\n        if (e.dataTransfer) {\n          if (editor.selection.isCollapsed() && e.target.tagName === 'IMG') {\n            selection.select(e.target);\n          }\n          selectionHtml = editor.selection.getContent();\n          if (selectionHtml.length > 0) {\n            internalContent = mceInternalUrlPrefix + escape(editor.id) + ',' + escape(selectionHtml);\n            e.dataTransfer.setData(mceInternalDataType, internalContent);\n          }\n        }\n      };\n      var getMceInternalContent = function (e) {\n        var internalContent;\n        if (e.dataTransfer) {\n          internalContent = e.dataTransfer.getData(mceInternalDataType);\n          if (internalContent && internalContent.indexOf(mceInternalUrlPrefix) >= 0) {\n            internalContent = internalContent.substr(mceInternalUrlPrefix.length).split(',');\n            return {\n              id: unescape(internalContent[0]),\n              html: unescape(internalContent[1])\n            };\n          }\n        }\n        return null;\n      };\n      var insertClipboardContents = function (content, internal) {\n        if (editor.queryCommandSupported('mceInsertClipboardContent')) {\n          editor.execCommand('mceInsertClipboardContent', false, {\n            content: content,\n            internal: internal\n          });\n        } else {\n          editor.execCommand('mceInsertContent', false, content);\n        }\n      };\n      var emptyEditorWhenDeleting = function () {\n        var serializeRng = function (rng) {\n          var body = dom.create('body');\n          var contents = rng.cloneContents();\n          body.appendChild(contents);\n          return selection.serializer.serialize(body, { format: 'html' });\n        };\n        var allContentsSelected = function (rng) {\n          var selection = serializeRng(rng);\n          var allRng = dom.createRng();\n          allRng.selectNode(editor.getBody());\n          var allSelection = serializeRng(allRng);\n          return selection === allSelection;\n        };\n        editor.on('keydown', function (e) {\n          var keyCode = e.keyCode;\n          var isCollapsed, body;\n          if (!isDefaultPrevented(e) && (keyCode === DELETE || keyCode === BACKSPACE)) {\n            isCollapsed = editor.selection.isCollapsed();\n            body = editor.getBody();\n            if (isCollapsed && !dom.isEmpty(body)) {\n              return;\n            }\n            if (!isCollapsed && !allContentsSelected(editor.selection.getRng())) {\n              return;\n            }\n            e.preventDefault();\n            editor.setContent('');\n            if (body.firstChild && dom.isBlock(body.firstChild)) {\n              editor.selection.setCursorLocation(body.firstChild, 0);\n            } else {\n              editor.selection.setCursorLocation(body, 0);\n            }\n            editor.nodeChanged();\n          }\n        });\n      };\n      var selectAll = function () {\n        editor.shortcuts.add('meta+a', null, 'SelectAll');\n      };\n      var inputMethodFocus = function () {\n        if (!editor.settings.content_editable) {\n          dom.bind(editor.getDoc(), 'mousedown mouseup', function (e) {\n            var rng;\n            if (e.target === editor.getDoc().documentElement) {\n              rng = selection.getRng();\n              editor.getBody().focus();\n              if (e.type === 'mousedown') {\n                if (isCaretContainer(rng.startContainer)) {\n                  return;\n                }\n                selection.placeCaretAt(e.clientX, e.clientY);\n              } else {\n                selection.setRng(rng);\n              }\n            }\n          });\n        }\n      };\n      var removeHrOnBackspace = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (!editor.getBody().getElementsByTagName('hr').length) {\n              return;\n            }\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var node = selection.getNode();\n              var previousSibling = node.previousSibling;\n              if (node.nodeName === 'HR') {\n                dom.remove(node);\n                e.preventDefault();\n                return;\n              }\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'hr') {\n                dom.remove(previousSibling);\n                e.preventDefault();\n              }\n            }\n          }\n        });\n      };\n      var focusBody = function () {\n        if (!domGlobals.Range.prototype.getClientRects) {\n          editor.on('mousedown', function (e) {\n            if (!isDefaultPrevented(e) && e.target.nodeName === 'HTML') {\n              var body_1 = editor.getBody();\n              body_1.blur();\n              Delay.setEditorTimeout(editor, function () {\n                body_1.focus();\n              });\n            }\n          });\n        }\n      };\n      var selectControlElements = function () {\n        editor.on('click', function (e) {\n          var target = e.target;\n          if (/^(IMG|HR)$/.test(target.nodeName) && dom.getContentEditableParent(target) !== 'false') {\n            e.preventDefault();\n            editor.selection.select(target);\n            editor.nodeChanged();\n          }\n          if (target.nodeName === 'A' && dom.hasClass(target, 'mce-item-anchor')) {\n            e.preventDefault();\n            selection.select(target);\n          }\n        });\n      };\n      var removeStylesWhenDeletingAcrossBlockElements = function () {\n        var getAttributeApplyFunction = function () {\n          var template = dom.getAttribs(selection.getStart().cloneNode(false));\n          return function () {\n            var target = selection.getStart();\n            if (target !== editor.getBody()) {\n              dom.setAttrib(target, 'style', null);\n              each(template, function (attr) {\n                target.setAttributeNode(attr.cloneNode(true));\n              });\n            }\n          };\n        };\n        var isSelectionAcrossElements = function () {\n          return !selection.isCollapsed() && dom.getParent(selection.getStart(), dom.isBlock) !== dom.getParent(selection.getEnd(), dom.isBlock);\n        };\n        editor.on('keypress', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && (e.keyCode === 8 || e.keyCode === 46) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            editor.getDoc().execCommand('delete', false, null);\n            applyAttributes();\n            e.preventDefault();\n            return false;\n          }\n        });\n        dom.bind(editor.getDoc(), 'cut', function (e) {\n          var applyAttributes;\n          if (!isDefaultPrevented(e) && isSelectionAcrossElements()) {\n            applyAttributes = getAttributeApplyFunction();\n            Delay.setEditorTimeout(editor, function () {\n              applyAttributes();\n            });\n          }\n        });\n      };\n      var disableBackspaceIntoATable = function () {\n        editor.on('keydown', function (e) {\n          if (!isDefaultPrevented(e) && e.keyCode === BACKSPACE) {\n            if (selection.isCollapsed() && selection.getRng().startOffset === 0) {\n              var previousSibling = selection.getNode().previousSibling;\n              if (previousSibling && previousSibling.nodeName && previousSibling.nodeName.toLowerCase() === 'table') {\n                e.preventDefault();\n                return false;\n              }\n            }\n          }\n        });\n      };\n      var removeBlockQuoteOnBackSpace = function () {\n        editor.on('keydown', function (e) {\n          var rng, container, offset, root, parent;\n          if (isDefaultPrevented(e) || e.keyCode !== VK.BACKSPACE) {\n            return;\n          }\n          rng = selection.getRng();\n          container = rng.startContainer;\n          offset = rng.startOffset;\n          root = dom.getRoot();\n          parent = container;\n          if (!rng.collapsed || offset !== 0) {\n            return;\n          }\n          while (parent && parent.parentNode && parent.parentNode.firstChild === parent && parent.parentNode !== root) {\n            parent = parent.parentNode;\n          }\n          if (parent.tagName === 'BLOCKQUOTE') {\n            editor.formatter.toggle('blockquote', null, parent);\n            rng = dom.createRng();\n            rng.setStart(container, 0);\n            rng.setEnd(container, 0);\n            selection.setRng(rng);\n          }\n        });\n      };\n      var setGeckoEditingOptions = function () {\n        var setOpts = function () {\n          setEditorCommandState('StyleWithCSS', false);\n          setEditorCommandState('enableInlineTableEditing', false);\n          if (!settings.object_resizing) {\n            setEditorCommandState('enableObjectResizing', false);\n          }\n        };\n        if (!settings.readonly) {\n          editor.on('BeforeExecCommand MouseDown', setOpts);\n        }\n      };\n      var addBrAfterLastLinks = function () {\n        var fixLinks = function () {\n          each(dom.select('a'), function (node) {\n            var parentNode = node.parentNode;\n            var root = dom.getRoot();\n            if (parentNode.lastChild === node) {\n              while (parentNode && !dom.isBlock(parentNode)) {\n                if (parentNode.parentNode.lastChild !== parentNode || parentNode === root) {\n                  return;\n                }\n                parentNode = parentNode.parentNode;\n              }\n              dom.add(parentNode, 'br', { 'data-mce-bogus': 1 });\n            }\n          });\n        };\n        editor.on('SetContent ExecCommand', function (e) {\n          if (e.type === 'setcontent' || e.command === 'mceInsertLink') {\n            fixLinks();\n          }\n        });\n      };\n      var setDefaultBlockType = function () {\n        if (settings.forced_root_block) {\n          editor.on('init', function () {\n            setEditorCommandState('DefaultParagraphSeparator', settings.forced_root_block);\n          });\n        }\n      };\n      var normalizeSelection = function () {\n        editor.on('keyup focusin mouseup', function (e) {\n          if (!VK.modifierPressed(e)) {\n            selection.normalize();\n          }\n        }, true);\n      };\n      var showBrokenImageIcon = function () {\n        editor.contentStyles.push('img:-moz-broken {' + '-moz-force-broken-image-icon:1;' + 'min-width:24px;' + 'min-height:24px' + '}');\n      };\n      var restoreFocusOnKeyDown = function () {\n        if (!editor.inline) {\n          editor.on('keydown', function () {\n            if (domGlobals.document.activeElement === domGlobals.document.body) {\n              editor.getWin().focus();\n            }\n          });\n        }\n      };\n      var bodyHeight = function () {\n        if (!editor.inline) {\n          editor.contentStyles.push('body {min-height: 150px}');\n          editor.on('click', function (e) {\n            var rng;\n            if (e.target.nodeName === 'HTML') {\n              if (Env.ie > 11) {\n                editor.getBody().focus();\n                return;\n              }\n              rng = editor.selection.getRng();\n              editor.getBody().focus();\n              editor.selection.setRng(rng);\n              editor.selection.normalize();\n              editor.nodeChanged();\n            }\n          });\n        }\n      };\n      var blockCmdArrowNavigation = function () {\n        if (Env.mac) {\n          editor.on('keydown', function (e) {\n            if (VK.metaKeyPressed(e) && !e.shiftKey && (e.keyCode === 37 || e.keyCode === 39)) {\n              e.preventDefault();\n              editor.selection.getSel().modify('move', e.keyCode === 37 ? 'backward' : 'forward', 'lineboundary');\n            }\n          });\n        }\n      };\n      var disableAutoUrlDetect = function () {\n        setEditorCommandState('AutoUrlDetect', false);\n      };\n      var tapLinksAndImages = function () {\n        editor.on('click', function (e) {\n          var elm = e.target;\n          do {\n            if (elm.tagName === 'A') {\n              e.preventDefault();\n              return;\n            }\n          } while (elm = elm.parentNode);\n        });\n        editor.contentStyles.push('.mce-content-body {-webkit-touch-callout: none}');\n      };\n      var blockFormSubmitInsideEditor = function () {\n        editor.on('init', function () {\n          editor.dom.bind(editor.getBody(), 'submit', function (e) {\n            e.preventDefault();\n          });\n        });\n      };\n      var removeAppleInterchangeBrs = function () {\n        parser.addNodeFilter('br', function (nodes) {\n          var i = nodes.length;\n          while (i--) {\n            if (nodes[i].attr('class') === 'Apple-interchange-newline') {\n              nodes[i].remove();\n            }\n          }\n        });\n      };\n      var ieInternalDragAndDrop = function () {\n        editor.on('dragstart', function (e) {\n          setMceInternalContent(e);\n        });\n        editor.on('drop', function (e) {\n          if (!isDefaultPrevented(e)) {\n            var internalContent = getMceInternalContent(e);\n            if (internalContent && internalContent.id !== editor.id) {\n              e.preventDefault();\n              var rng = CaretRangeFromPoint.fromPoint(e.x, e.y, editor.getDoc());\n              selection.setRng(rng);\n              insertClipboardContents(internalContent.html, true);\n            }\n          }\n        });\n      };\n      var refreshContentEditable = function () {\n      };\n      var isHidden = function () {\n        var sel;\n        if (!isGecko || editor.removed) {\n          return 0;\n        }\n        sel = editor.selection.getSel();\n        return !sel || !sel.rangeCount || sel.rangeCount === 0;\n      };\n      removeBlockQuoteOnBackSpace();\n      emptyEditorWhenDeleting();\n      if (!Env.windowsPhone) {\n        normalizeSelection();\n      }\n      if (isWebKit) {\n        inputMethodFocus();\n        selectControlElements();\n        setDefaultBlockType();\n        blockFormSubmitInsideEditor();\n        disableBackspaceIntoATable();\n        removeAppleInterchangeBrs();\n        if (Env.iOS) {\n          restoreFocusOnKeyDown();\n          bodyHeight();\n          tapLinksAndImages();\n        } else {\n          selectAll();\n        }\n      }\n      if (Env.ie >= 11) {\n        bodyHeight();\n        disableBackspaceIntoATable();\n      }\n      if (Env.ie) {\n        selectAll();\n        disableAutoUrlDetect();\n        ieInternalDragAndDrop();\n      }\n      if (isGecko) {\n        removeHrOnBackspace();\n        focusBody();\n        removeStylesWhenDeletingAcrossBlockElements();\n        setGeckoEditingOptions();\n        addBrAfterLastLinks();\n        showBrokenImageIcon();\n        blockCmdArrowNavigation();\n        disableBackspaceIntoATable();\n      }\n      return {\n        refreshContentEditable: refreshContentEditable,\n        isHidden: isHidden\n      };\n    }\n\n    var isTextBlockNode = function (node) {\n      return NodeType.isElement(node) && isTextBlock(Element.fromDom(node));\n    };\n    var normalizeSelection$1 = function (editor) {\n      var rng = editor.selection.getRng();\n      var startPos = CaretPosition.fromRangeStart(rng);\n      var endPos = CaretPosition.fromRangeEnd(rng);\n      if (CaretPosition.isElementPosition(startPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.firstPositionIn(container).each(function (pos) {\n            return rng.setStart(pos.container(), pos.offset());\n          });\n        }\n      }\n      if (CaretPosition.isElementPosition(endPos)) {\n        var container = startPos.container();\n        if (isTextBlockNode(container)) {\n          CaretFinder.lastPositionIn(container).each(function (pos) {\n            return rng.setEnd(pos.container(), pos.offset());\n          });\n        }\n      }\n      editor.selection.setRng(RangeNormalizer.normalize(rng));\n    };\n    var setup$f = function (editor) {\n      editor.on('click', function (e) {\n        if (e.detail >= 3) {\n          normalizeSelection$1(editor);\n        }\n      });\n    };\n\n    var preventSummaryToggle = function (editor) {\n      editor.on('click', function (e) {\n        if (editor.dom.getParent(e.target, 'details')) {\n          e.preventDefault();\n        }\n      });\n    };\n    var filterDetails = function (editor) {\n      editor.parser.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          details.attr('data-mce-open', details.attr('open'));\n          details.attr('open', 'open');\n        });\n      });\n      editor.serializer.addNodeFilter('details', function (elms) {\n        each(elms, function (details) {\n          var open = details.attr('data-mce-open');\n          details.attr('open', isString(open) ? open : null);\n          details.attr('data-mce-open', null);\n        });\n      });\n    };\n    var setup$g = function (editor) {\n      preventSummaryToggle(editor);\n      filterDetails(editor);\n    };\n\n    var DOM$2 = DOMUtils$1.DOM;\n    var appendStyle = function (editor, text) {\n      var head = Element.fromDom(editor.getDoc().head);\n      var tag = Element.fromTag('style');\n      set(tag, 'type', 'text/css');\n      append(tag, Element.fromText(text));\n      append(head, tag);\n    };\n    var createParser = function (editor) {\n      var parser = DomParser(editor.settings, editor.schema);\n      parser.addAttributeFilter('src,href,style,tabindex', function (nodes, name) {\n        var i = nodes.length, node;\n        var dom = editor.dom;\n        var value, internalName;\n        while (i--) {\n          node = nodes[i];\n          value = node.attr(name);\n          internalName = 'data-mce-' + name;\n          if (!node.attributes.map[internalName]) {\n            if (value.indexOf('data:') === 0 || value.indexOf('blob:') === 0) {\n              continue;\n            }\n            if (name === 'style') {\n              value = dom.serializeStyle(dom.parseStyle(value), node.name);\n              if (!value.length) {\n                value = null;\n              }\n              node.attr(internalName, value);\n              node.attr(name, value);\n            } else if (name === 'tabindex') {\n              node.attr(internalName, value);\n              node.attr(name, null);\n            } else {\n              node.attr(internalName, editor.convertURL(value, name, node.name));\n            }\n          }\n        }\n      });\n      parser.addNodeFilter('script', function (nodes) {\n        var i = nodes.length, node, type;\n        while (i--) {\n          node = nodes[i];\n          type = node.attr('type') || 'no/type';\n          if (type.indexOf('mce-') !== 0) {\n            node.attr('type', 'mce-' + type);\n          }\n        }\n      });\n      parser.addNodeFilter('#cdata', function (nodes) {\n        var i = nodes.length, node;\n        while (i--) {\n          node = nodes[i];\n          node.type = 8;\n          node.name = '#comment';\n          node.value = '[CDATA[' + node.value + ']]';\n        }\n      });\n      parser.addNodeFilter('p,h1,h2,h3,h4,h5,h6,div', function (nodes) {\n        var i = nodes.length, node;\n        var nonEmptyElements = editor.schema.getNonEmptyElements();\n        while (i--) {\n          node = nodes[i];\n          if (node.isEmpty(nonEmptyElements) && node.getAll('br').length === 0) {\n            node.append(new Node$1('br', 1)).shortEnded = true;\n          }\n        }\n      });\n      return parser;\n    };\n    var autoFocus = function (editor) {\n      if (editor.settings.auto_focus) {\n        Delay.setEditorTimeout(editor, function () {\n          var focusEditor;\n          if (editor.settings.auto_focus === true) {\n            focusEditor = editor;\n          } else {\n            focusEditor = editor.editorManager.get(editor.settings.auto_focus);\n          }\n          if (!focusEditor.destroyed) {\n            focusEditor.focus();\n          }\n        }, 100);\n      }\n    };\n    var initEditor = function (editor) {\n      editor.bindPendingEventDelegates();\n      editor.initialized = true;\n      editor.fire('init');\n      editor.focus(true);\n      editor.nodeChanged({ initial: true });\n      editor.execCallback('init_instance_callback', editor);\n      autoFocus(editor);\n    };\n    var getStyleSheetLoader = function (editor) {\n      return editor.inline ? DOM$2.styleSheetLoader : editor.dom.styleSheetLoader;\n    };\n    var initContentBody = function (editor, skipWrite) {\n      var settings = editor.settings;\n      var targetElm = editor.getElement();\n      var doc = editor.getDoc(), body, contentCssText;\n      if (!settings.inline) {\n        editor.getElement().style.visibility = editor.orgVisibility;\n      }\n      if (!skipWrite && !settings.content_editable) {\n        doc.open();\n        doc.write(editor.iframeHTML);\n        doc.close();\n      }\n      if (settings.content_editable) {\n        editor.on('remove', function () {\n          var bodyEl = this.getBody();\n          DOM$2.removeClass(bodyEl, 'mce-content-body');\n          DOM$2.removeClass(bodyEl, 'mce-edit-focus');\n          DOM$2.setAttrib(bodyEl, 'contentEditable', null);\n        });\n        DOM$2.addClass(targetElm, 'mce-content-body');\n        editor.contentDocument = doc = settings.content_document || domGlobals.document;\n        editor.contentWindow = settings.content_window || domGlobals.window;\n        editor.bodyElement = targetElm;\n        settings.content_document = settings.content_window = null;\n        settings.root_name = targetElm.nodeName.toLowerCase();\n      }\n      body = editor.getBody();\n      body.disabled = true;\n      editor.readonly = settings.readonly;\n      if (!editor.readonly) {\n        if (editor.inline && DOM$2.getStyle(body, 'position', true) === 'static') {\n          body.style.position = 'relative';\n        }\n        body.contentEditable = editor.getParam('content_editable_state', true);\n      }\n      body.disabled = false;\n      editor.editorUpload = EditorUpload(editor);\n      editor.schema = Schema(settings);\n      editor.dom = DOMUtils$1(doc, {\n        keep_values: true,\n        url_converter: editor.convertURL,\n        url_converter_scope: editor,\n        hex_colors: settings.force_hex_style_colors,\n        class_filter: settings.class_filter,\n        update_styles: true,\n        root_element: editor.inline ? editor.getBody() : null,\n        collect: settings.content_editable,\n        schema: editor.schema,\n        contentCssCors: Settings.shouldUseContentCssCors(editor),\n        onSetAttrib: function (e) {\n          editor.fire('SetAttrib', e);\n        }\n      });\n      editor.parser = createParser(editor);\n      editor.serializer = DomSerializer$1(settings, editor);\n      editor.selection = Selection$1(editor.dom, editor.getWin(), editor.serializer, editor);\n      editor.annotator = Annotator(editor);\n      editor.formatter = Formatter(editor);\n      editor.undoManager = UndoManager(editor);\n      editor._nodeChangeDispatcher = new NodeChange(editor);\n      editor._selectionOverrides = SelectionOverrides(editor);\n      setup$g(editor);\n      setup$f(editor);\n      KeyboardOverrides.setup(editor);\n      ForceBlocks.setup(editor);\n      editor.fire('PreInit');\n      if (!settings.browser_spellcheck && !settings.gecko_spellcheck) {\n        doc.body.spellcheck = false;\n        DOM$2.setAttrib(body, 'spellcheck', 'false');\n      }\n      editor.quirks = Quirks(editor);\n      editor.fire('PostRender');\n      if (settings.directionality) {\n        body.dir = settings.directionality;\n      }\n      if (settings.nowrap) {\n        body.style.whiteSpace = 'nowrap';\n      }\n      if (settings.protect) {\n        editor.on('BeforeSetContent', function (e) {\n          Tools.each(settings.protect, function (pattern) {\n            e.content = e.content.replace(pattern, function (str) {\n              return '<!--mce:protected ' + escape(str) + '-->';\n            });\n          });\n        });\n      }\n      editor.on('SetContent', function () {\n        editor.addVisual(editor.getBody());\n      });\n      editor.load({\n        initial: true,\n        format: 'html'\n      });\n      editor.startContent = editor.getContent({ format: 'raw' });\n      editor.on('compositionstart compositionend', function (e) {\n        editor.composing = e.type === 'compositionstart';\n      });\n      if (editor.contentStyles.length > 0) {\n        contentCssText = '';\n        Tools.each(editor.contentStyles, function (style) {\n          contentCssText += style + '\\r\\n';\n        });\n        editor.dom.addStyle(contentCssText);\n      }\n      getStyleSheetLoader(editor).loadAll(editor.contentCSS, function (_) {\n        initEditor(editor);\n      }, function (urls) {\n        initEditor(editor);\n      });\n      if (settings.content_style) {\n        appendStyle(editor, settings.content_style);\n      }\n    };\n    var InitContentBody = { initContentBody: initContentBody };\n\n    var DOM$3 = DOMUtils$1.DOM;\n    var relaxDomain = function (editor, ifr) {\n      if (domGlobals.document.domain !== domGlobals.window.location.hostname && Env.ie && Env.ie < 12) {\n        var bodyUuid = Uuid.uuid('mce');\n        editor[bodyUuid] = function () {\n          InitContentBody.initContentBody(editor);\n        };\n        var domainRelaxUrl = 'javascript:(function(){' + 'document.open();document.domain=\"' + domGlobals.document.domain + '\";' + 'var ed = window.parent.tinymce.get(\"' + editor.id + '\");document.write(ed.iframeHTML);' + 'document.close();ed.' + bodyUuid + '(true);})()';\n        DOM$3.setAttrib(ifr, 'src', domainRelaxUrl);\n        return true;\n      }\n      return false;\n    };\n    var normalizeHeight = function (height) {\n      var normalizedHeight = typeof height === 'number' ? height + 'px' : height;\n      return normalizedHeight ? normalizedHeight : '';\n    };\n    var createIframeElement = function (id, title, height, customAttrs) {\n      var iframe = Element.fromTag('iframe');\n      setAll(iframe, customAttrs);\n      setAll(iframe, {\n        id: id + '_ifr',\n        frameBorder: '0',\n        allowTransparency: 'true',\n        title: title\n      });\n      setAll$1(iframe, {\n        width: '100%',\n        height: normalizeHeight(height),\n        display: 'block'\n      });\n      return iframe;\n    };\n    var getIframeHtml = function (editor) {\n      var bodyId, bodyClass, iframeHTML;\n      iframeHTML = Settings.getDocType(editor) + '<html><head>';\n      if (Settings.getDocumentBaseUrl(editor) !== editor.documentBaseUrl) {\n        iframeHTML += '<base href=\"' + editor.documentBaseURI.getURI() + '\" />';\n      }\n      iframeHTML += '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=UTF-8\" />';\n      bodyId = Settings.getBodyId(editor);\n      bodyClass = Settings.getBodyClass(editor);\n      if (Settings.getContentSecurityPolicy(editor)) {\n        iframeHTML += '<meta http-equiv=\"Content-Security-Policy\" content=\"' + Settings.getContentSecurityPolicy(editor) + '\" />';\n      }\n      iframeHTML += '</head><body id=\"' + bodyId + '\" class=\"mce-content-body ' + bodyClass + '\" data-id=\"' + editor.id + '\"><br></body></html>';\n      return iframeHTML;\n    };\n    var createIframe = function (editor, o) {\n      var title = editor.editorManager.translate('Rich Text Area. Press ALT-F9 for menu. ' + 'Press ALT-F10 for toolbar. Press ALT-0 for help');\n      var ifr = createIframeElement(editor.id, title, o.height, Settings.getIframeAttrs(editor)).dom();\n      ifr.onload = function () {\n        ifr.onload = null;\n        editor.fire('load');\n      };\n      var isDomainRelaxed = relaxDomain(editor, ifr);\n      editor.contentAreaContainer = o.iframeContainer;\n      editor.iframeElement = ifr;\n      editor.iframeHTML = getIframeHtml(editor);\n      DOM$3.add(o.iframeContainer, ifr);\n      return isDomainRelaxed;\n    };\n    var init$1 = function (editor, boxInfo) {\n      var isDomainRelaxed = createIframe(editor, boxInfo);\n      if (boxInfo.editorContainer) {\n        DOM$3.get(boxInfo.editorContainer).style.display = editor.orgDisplay;\n        editor.hidden = DOM$3.isHidden(boxInfo.editorContainer);\n      }\n      editor.getElement().style.display = 'none';\n      DOM$3.setAttrib(editor.id, 'aria-hidden', 'true');\n      if (!isDomainRelaxed) {\n        InitContentBody.initContentBody(editor);\n      }\n    };\n    var InitIframe = { init: init$1 };\n\n    var DOM$4 = DOMUtils$1.DOM;\n    var initPlugin = function (editor, initializedPlugins, plugin) {\n      var Plugin = PluginManager$1.get(plugin);\n      var pluginUrl = PluginManager$1.urls[plugin] || editor.documentBaseUrl.replace(/\\/$/, '');\n      plugin = Tools.trim(plugin);\n      if (Plugin && Tools.inArray(initializedPlugins, plugin) === -1) {\n        Tools.each(PluginManager$1.dependencies(plugin), function (dep) {\n          initPlugin(editor, initializedPlugins, dep);\n        });\n        if (editor.plugins[plugin]) {\n          return;\n        }\n        try {\n          var pluginInstance = new Plugin(editor, pluginUrl, editor.$);\n          editor.plugins[plugin] = pluginInstance;\n          if (pluginInstance.init) {\n            pluginInstance.init(editor, pluginUrl);\n            initializedPlugins.push(plugin);\n          }\n        } catch (e) {\n          ErrorReporter.pluginInitError(editor, plugin, e);\n        }\n      }\n    };\n    var trimLegacyPrefix = function (name) {\n      return name.replace(/^\\-/, '');\n    };\n    var initPlugins = function (editor) {\n      var initializedPlugins = [];\n      Tools.each(editor.settings.plugins.split(/[ ,]/), function (name) {\n        initPlugin(editor, initializedPlugins, trimLegacyPrefix(name));\n      });\n    };\n    var initTheme = function (editor) {\n      var Theme;\n      var theme = editor.settings.theme;\n      if (isString(theme)) {\n        editor.settings.theme = trimLegacyPrefix(theme);\n        Theme = ThemeManager.get(theme);\n        editor.theme = new Theme(editor, ThemeManager.urls[theme]);\n        if (editor.theme.init) {\n          editor.theme.init(editor, ThemeManager.urls[theme] || editor.documentBaseUrl.replace(/\\/$/, ''), editor.$);\n        }\n      } else {\n        editor.theme = {};\n      }\n    };\n    var renderFromLoadedTheme = function (editor) {\n      var w, h, minHeight, re, info;\n      var settings = editor.settings;\n      var elm = editor.getElement();\n      w = settings.width || DOM$4.getStyle(elm, 'width') || '100%';\n      h = settings.height || DOM$4.getStyle(elm, 'height') || elm.offsetHeight;\n      minHeight = settings.min_height || 100;\n      re = /^[0-9\\.]+(|px)$/i;\n      if (re.test('' + w)) {\n        w = Math.max(parseInt(w, 10), 100);\n      }\n      if (re.test('' + h)) {\n        h = Math.max(parseInt(h, 10), minHeight);\n      }\n      info = editor.theme.renderUI({\n        targetNode: elm,\n        width: w,\n        height: h,\n        deltaWidth: settings.delta_width,\n        deltaHeight: settings.delta_height\n      });\n      if (!settings.content_editable) {\n        h = (info.iframeHeight || h) + (typeof h === 'number' ? info.deltaHeight || 0 : '');\n        if (h < minHeight) {\n          h = minHeight;\n        }\n      }\n      info.height = h;\n      return info;\n    };\n    var renderFromThemeFunc = function (editor) {\n      var info;\n      var elm = editor.getElement();\n      info = editor.settings.theme(editor, elm);\n      if (info.editorContainer.nodeType) {\n        info.editorContainer.id = info.editorContainer.id || editor.id + '_parent';\n      }\n      if (info.iframeContainer && info.iframeContainer.nodeType) {\n        info.iframeContainer.id = info.iframeContainer.id || editor.id + '_iframecontainer';\n      }\n      info.height = info.iframeHeight ? info.iframeHeight : elm.offsetHeight;\n      return info;\n    };\n    var createThemeFalseResult = function (element) {\n      return {\n        editorContainer: element,\n        iframeContainer: element\n      };\n    };\n    var renderThemeFalseIframe = function (targetElement) {\n      var iframeContainer = DOM$4.create('div');\n      DOM$4.insertAfter(iframeContainer, targetElement);\n      return createThemeFalseResult(iframeContainer);\n    };\n    var renderThemeFalse = function (editor) {\n      var targetElement = editor.getElement();\n      return editor.inline ? createThemeFalseResult(null) : renderThemeFalseIframe(targetElement);\n    };\n    var renderThemeUi = function (editor) {\n      var settings = editor.settings, elm = editor.getElement();\n      editor.orgDisplay = elm.style.display;\n      if (isString(settings.theme)) {\n        return renderFromLoadedTheme(editor);\n      } else if (isFunction(settings.theme)) {\n        return renderFromThemeFunc(editor);\n      } else {\n        return renderThemeFalse(editor);\n      }\n    };\n    var init$2 = function (editor) {\n      var settings = editor.settings;\n      var elm = editor.getElement();\n      var boxInfo;\n      editor.rtl = settings.rtl_ui || editor.editorManager.i18n.rtl;\n      editor.editorManager.i18n.setCode(settings.language);\n      settings.aria_label = settings.aria_label || DOM$4.getAttrib(elm, 'aria-label', editor.getLang('aria.rich_text_area'));\n      editor.fire('ScriptsLoaded');\n      initTheme(editor);\n      initPlugins(editor);\n      boxInfo = renderThemeUi(editor);\n      editor.editorContainer = boxInfo.editorContainer ? boxInfo.editorContainer : null;\n      if (settings.content_css) {\n        Tools.each(Tools.explode(settings.content_css), function (u) {\n          editor.contentCSS.push(editor.documentBaseURI.toAbsolute(u));\n        });\n      }\n      if (settings.content_editable) {\n        return InitContentBody.initContentBody(editor);\n      } else {\n        return InitIframe.init(editor, boxInfo);\n      }\n    };\n    var Init = { init: init$2 };\n\n    var DOM$5 = DOMUtils$1.DOM;\n    var hasSkipLoadPrefix = function (name) {\n      return name.charAt(0) === '-';\n    };\n    var loadLanguage = function (scriptLoader, editor) {\n      var settings = editor.settings;\n      if (settings.language && settings.language !== 'en' && !settings.language_url) {\n        settings.language_url = editor.editorManager.baseURL + '/langs/' + settings.language + '.js';\n      }\n      if (settings.language_url && !editor.editorManager.i18n.data[settings.language]) {\n        scriptLoader.add(settings.language_url);\n      }\n    };\n    var loadTheme = function (scriptLoader, editor, suffix, callback) {\n      var settings = editor.settings, theme = settings.theme;\n      if (isString(theme)) {\n        if (!hasSkipLoadPrefix(theme) && !ThemeManager.urls.hasOwnProperty(theme)) {\n          var themeUrl = settings.theme_url;\n          if (themeUrl) {\n            ThemeManager.load(theme, editor.documentBaseURI.toAbsolute(themeUrl));\n          } else {\n            ThemeManager.load(theme, 'themes/' + theme + '/theme' + suffix + '.js');\n          }\n        }\n        scriptLoader.loadQueue(function () {\n          ThemeManager.waitFor(theme, callback);\n        });\n      } else {\n        callback();\n      }\n    };\n    var loadPlugins = function (settings, suffix) {\n      if (Tools.isArray(settings.plugins)) {\n        settings.plugins = settings.plugins.join(' ');\n      }\n      Tools.each(settings.external_plugins, function (url, name) {\n        PluginManager$1.load(name, url);\n        settings.plugins += ' ' + name;\n      });\n      Tools.each(settings.plugins.split(/[ ,]/), function (plugin) {\n        plugin = Tools.trim(plugin);\n        if (plugin && !PluginManager$1.urls[plugin]) {\n          if (hasSkipLoadPrefix(plugin)) {\n            plugin = plugin.substr(1, plugin.length);\n            var dependencies = PluginManager$1.dependencies(plugin);\n            Tools.each(dependencies, function (dep) {\n              var defaultSettings = {\n                prefix: 'plugins/',\n                resource: dep,\n                suffix: '/plugin' + suffix + '.js'\n              };\n              dep = PluginManager$1.createUrl(defaultSettings, dep);\n              PluginManager$1.load(dep.resource, dep);\n            });\n          } else {\n            PluginManager$1.load(plugin, {\n              prefix: 'plugins/',\n              resource: plugin,\n              suffix: '/plugin' + suffix + '.js'\n            });\n          }\n        }\n      });\n    };\n    var loadScripts = function (editor, suffix) {\n      var scriptLoader = ScriptLoader.ScriptLoader;\n      loadTheme(scriptLoader, editor, suffix, function () {\n        loadLanguage(scriptLoader, editor);\n        loadPlugins(editor.settings, suffix);\n        scriptLoader.loadQueue(function () {\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        }, editor, function (urls) {\n          ErrorReporter.pluginLoadError(editor, urls[0]);\n          if (!editor.removed) {\n            Init.init(editor);\n          }\n        });\n      });\n    };\n    var render = function (editor) {\n      var settings = editor.settings, id = editor.id;\n      var readyHandler = function () {\n        DOM$5.unbind(domGlobals.window, 'ready', readyHandler);\n        editor.render();\n      };\n      if (!EventUtils.Event.domLoaded) {\n        DOM$5.bind(domGlobals.window, 'ready', readyHandler);\n        return;\n      }\n      if (!editor.getElement()) {\n        return;\n      }\n      if (!Env.contentEditable) {\n        return;\n      }\n      if (!settings.inline) {\n        editor.orgVisibility = editor.getElement().style.visibility;\n        editor.getElement().style.visibility = 'hidden';\n      } else {\n        editor.inline = true;\n      }\n      var form = editor.getElement().form || DOM$5.getParent(id, 'form');\n      if (form) {\n        editor.formElement = form;\n        if (settings.hidden_input && !/TEXTAREA|INPUT/i.test(editor.getElement().nodeName)) {\n          DOM$5.insertAfter(DOM$5.create('input', {\n            type: 'hidden',\n            name: id\n          }), id);\n          editor.hasHiddenInput = true;\n        }\n        editor.formEventDelegate = function (e) {\n          editor.fire(e.type, e);\n        };\n        DOM$5.bind(form, 'submit reset', editor.formEventDelegate);\n        editor.on('reset', function () {\n          editor.setContent(editor.startContent, { format: 'raw' });\n        });\n        if (settings.submit_patch && !form.submit.nodeType && !form.submit.length && !form._mceOldSubmit) {\n          form._mceOldSubmit = form.submit;\n          form.submit = function () {\n            editor.editorManager.triggerSave();\n            editor.setDirty(false);\n            return form._mceOldSubmit(form);\n          };\n        }\n      }\n      editor.windowManager = WindowManager(editor);\n      editor.notificationManager = NotificationManager(editor);\n      if (settings.encoding === 'xml') {\n        editor.on('GetContent', function (e) {\n          if (e.save) {\n            e.content = DOM$5.encode(e.content);\n          }\n        });\n      }\n      if (settings.add_form_submit_trigger) {\n        editor.on('submit', function () {\n          if (editor.initialized) {\n            editor.save();\n          }\n        });\n      }\n      if (settings.add_unload_trigger) {\n        editor._beforeUnload = function () {\n          if (editor.initialized && !editor.destroyed && !editor.isHidden()) {\n            editor.save({\n              format: 'raw',\n              no_events: true,\n              set_dirty: false\n            });\n          }\n        };\n        editor.editorManager.on('BeforeUnload', editor._beforeUnload);\n      }\n      editor.editorManager.add(editor);\n      loadScripts(editor, editor.suffix);\n    };\n    var Render = { render: render };\n\n    var add$4 = function (editor, name, settings) {\n      var sidebars = editor.sidebars ? editor.sidebars : [];\n      sidebars.push({\n        name: name,\n        settings: settings\n      });\n      editor.sidebars = sidebars;\n    };\n    var Sidebar = { add: add$4 };\n\n    var each$k = Tools.each, trim$4 = Tools.trim;\n    var queryParts = 'source protocol authority userInfo user password host port relative path directory file query anchor'.split(' ');\n    var DEFAULT_PORTS = {\n      ftp: 21,\n      http: 80,\n      https: 443,\n      mailto: 25\n    };\n    var URI = function (url, settings) {\n      var self = this;\n      var baseUri, baseUrl;\n      url = trim$4(url);\n      settings = self.settings = settings || {};\n      baseUri = settings.base_uri;\n      if (/^([\\w\\-]+):([^\\/]{2})/i.test(url) || /^\\s*#/.test(url)) {\n        self.source = url;\n        return;\n      }\n      var isProtocolRelative = url.indexOf('//') === 0;\n      if (url.indexOf('/') === 0 && !isProtocolRelative) {\n        url = (baseUri ? baseUri.protocol || 'http' : 'http') + '://mce_host' + url;\n      }\n      if (!/^[\\w\\-]*:?\\/\\//.test(url)) {\n        baseUrl = settings.base_uri ? settings.base_uri.path : new URI(domGlobals.document.location.href).directory;\n        if (settings.base_uri.protocol == '') {\n          url = '//mce_host' + self.toAbsPath(baseUrl, url);\n        } else {\n          url = /([^#?]*)([#?]?.*)/.exec(url);\n          url = (baseUri && baseUri.protocol || 'http') + '://mce_host' + self.toAbsPath(baseUrl, url[1]) + url[2];\n        }\n      }\n      url = url.replace(/@@/g, '(mce_at)');\n      url = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@\\/]*):?([^:@\\/]*))?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/.exec(url);\n      each$k(queryParts, function (v, i) {\n        var part = url[i];\n        if (part) {\n          part = part.replace(/\\(mce_at\\)/g, '@@');\n        }\n        self[v] = part;\n      });\n      if (baseUri) {\n        if (!self.protocol) {\n          self.protocol = baseUri.protocol;\n        }\n        if (!self.userInfo) {\n          self.userInfo = baseUri.userInfo;\n        }\n        if (!self.port && self.host === 'mce_host') {\n          self.port = baseUri.port;\n        }\n        if (!self.host || self.host === 'mce_host') {\n          self.host = baseUri.host;\n        }\n        self.source = '';\n      }\n      if (isProtocolRelative) {\n        self.protocol = '';\n      }\n    };\n    URI.prototype = {\n      setPath: function (path) {\n        var self = this;\n        path = /^(.*?)\\/?(\\w+)?$/.exec(path);\n        self.path = path[0];\n        self.directory = path[1];\n        self.file = path[2];\n        self.source = '';\n        self.getURI();\n      },\n      toRelative: function (uri) {\n        var self = this;\n        var output;\n        if (uri === './') {\n          return uri;\n        }\n        uri = new URI(uri, { base_uri: self });\n        if (uri.host !== 'mce_host' && self.host !== uri.host && uri.host || self.port !== uri.port || self.protocol !== uri.protocol && uri.protocol !== '') {\n          return uri.getURI();\n        }\n        var tu = self.getURI(), uu = uri.getURI();\n        if (tu === uu || tu.charAt(tu.length - 1) === '/' && tu.substr(0, tu.length - 1) === uu) {\n          return tu;\n        }\n        output = self.toRelPath(self.path, uri.path);\n        if (uri.query) {\n          output += '?' + uri.query;\n        }\n        if (uri.anchor) {\n          output += '#' + uri.anchor;\n        }\n        return output;\n      },\n      toAbsolute: function (uri, noHost) {\n        uri = new URI(uri, { base_uri: this });\n        return uri.getURI(noHost && this.isSameOrigin(uri));\n      },\n      isSameOrigin: function (uri) {\n        if (this.host == uri.host && this.protocol == uri.protocol) {\n          if (this.port == uri.port) {\n            return true;\n          }\n          var defaultPort = DEFAULT_PORTS[this.protocol];\n          if (defaultPort && (this.port || defaultPort) == (uri.port || defaultPort)) {\n            return true;\n          }\n        }\n        return false;\n      },\n      toRelPath: function (base, path) {\n        var items, breakPoint = 0, out = '', i, l;\n        base = base.substring(0, base.lastIndexOf('/'));\n        base = base.split('/');\n        items = path.split('/');\n        if (base.length >= items.length) {\n          for (i = 0, l = base.length; i < l; i++) {\n            if (i >= items.length || base[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (base.length < items.length) {\n          for (i = 0, l = items.length; i < l; i++) {\n            if (i >= base.length || base[i] !== items[i]) {\n              breakPoint = i + 1;\n              break;\n            }\n          }\n        }\n        if (breakPoint === 1) {\n          return path;\n        }\n        for (i = 0, l = base.length - (breakPoint - 1); i < l; i++) {\n          out += '../';\n        }\n        for (i = breakPoint - 1, l = items.length; i < l; i++) {\n          if (i !== breakPoint - 1) {\n            out += '/' + items[i];\n          } else {\n            out += items[i];\n          }\n        }\n        return out;\n      },\n      toAbsPath: function (base, path) {\n        var i, nb = 0, o = [], tr, outPath;\n        tr = /\\/$/.test(path) ? '/' : '';\n        base = base.split('/');\n        path = path.split('/');\n        each$k(base, function (k) {\n          if (k) {\n            o.push(k);\n          }\n        });\n        base = o;\n        for (i = path.length - 1, o = []; i >= 0; i--) {\n          if (path[i].length === 0 || path[i] === '.') {\n            continue;\n          }\n          if (path[i] === '..') {\n            nb++;\n            continue;\n          }\n          if (nb > 0) {\n            nb--;\n            continue;\n          }\n          o.push(path[i]);\n        }\n        i = base.length - nb;\n        if (i <= 0) {\n          outPath = o.reverse().join('/');\n        } else {\n          outPath = base.slice(0, i).join('/') + '/' + o.reverse().join('/');\n        }\n        if (outPath.indexOf('/') !== 0) {\n          outPath = '/' + outPath;\n        }\n        if (tr && outPath.lastIndexOf('/') !== outPath.length - 1) {\n          outPath += tr;\n        }\n        return outPath;\n      },\n      getURI: function (noProtoHost) {\n        var s;\n        var self = this;\n        if (!self.source || noProtoHost) {\n          s = '';\n          if (!noProtoHost) {\n            if (self.protocol) {\n              s += self.protocol + '://';\n            } else {\n              s += '//';\n            }\n            if (self.userInfo) {\n              s += self.userInfo + '@';\n            }\n            if (self.host) {\n              s += self.host;\n            }\n            if (self.port) {\n              s += ':' + self.port;\n            }\n          }\n          if (self.path) {\n            s += self.path;\n          }\n          if (self.query) {\n            s += '?' + self.query;\n          }\n          if (self.anchor) {\n            s += '#' + self.anchor;\n          }\n          self.source = s;\n        }\n        return self.source;\n      }\n    };\n    URI.parseDataUri = function (uri) {\n      var type, matches;\n      uri = decodeURIComponent(uri).split(',');\n      matches = /data:([^;]+)/.exec(uri[0]);\n      if (matches) {\n        type = matches[1];\n      }\n      return {\n        type: type,\n        data: uri[1]\n      };\n    };\n    URI.getDocumentBaseUrl = function (loc) {\n      var baseUrl;\n      if (loc.protocol.indexOf('http') !== 0 && loc.protocol !== 'file:') {\n        baseUrl = loc.href;\n      } else {\n        baseUrl = loc.protocol + '//' + loc.host + loc.pathname;\n      }\n      if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(baseUrl)) {\n        baseUrl = baseUrl.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n        if (!/[\\/\\\\]$/.test(baseUrl)) {\n          baseUrl += '/';\n        }\n      }\n      return baseUrl;\n    };\n\n    var defaultFormat = 'html';\n    var trimEmptyContents = function (editor, html) {\n      var blockName = Settings.getForcedRootBlock(editor);\n      var emptyRegExp = new RegExp('^(<' + blockName + '[^>]*>(&nbsp;|&#160;|\\\\s|\\xA0|<br \\\\/>|)<\\\\/' + blockName + '>[\\r\\n]*|<br \\\\/>[\\r\\n]*)$');\n      return html.replace(emptyRegExp, '');\n    };\n    var getContentFromBody = function (editor, args, body) {\n      var content;\n      args.format = args.format ? args.format : defaultFormat;\n      args.get = true;\n      args.getInner = true;\n      if (!args.no_events) {\n        editor.fire('BeforeGetContent', args);\n      }\n      if (args.format === 'raw') {\n        content = Tools.trim(TrimHtml.trimExternal(editor.serializer, body.innerHTML));\n      } else if (args.format === 'text') {\n        content = Zwsp.trim(body.innerText || body.textContent);\n      } else if (args.format === 'tree') {\n        return editor.serializer.serialize(body, args);\n      } else {\n        content = trimEmptyContents(editor, editor.serializer.serialize(body, args));\n      }\n      if (args.format !== 'text' && !isWsPreserveElement(Element.fromDom(body))) {\n        args.content = Tools.trim(content);\n      } else {\n        args.content = content;\n      }\n      if (!args.no_events) {\n        editor.fire('GetContent', args);\n      }\n      return args.content;\n    };\n    var getContent$1 = function (editor, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      return Option.from(editor.getBody()).fold(constant(args.format === 'tree' ? new Node$1('body', 11) : ''), function (body) {\n        return getContentFromBody(editor, args, body);\n      });\n    };\n\n    var traverse = function (node, fn) {\n      fn(node);\n      if (node.firstChild) {\n        traverse(node.firstChild, fn);\n      }\n      if (node.next) {\n        traverse(node.next, fn);\n      }\n    };\n    var findMatchingNodes = function (nodeFilters, attributeFilters, node) {\n      var nodeMatches = {};\n      var attrMatches = {};\n      var matches = [];\n      if (node.firstChild) {\n        traverse(node.firstChild, function (node) {\n          each(nodeFilters, function (filter) {\n            if (filter.name === node.name) {\n              if (nodeMatches[filter.name]) {\n                nodeMatches[filter.name].nodes.push(node);\n              } else {\n                nodeMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n          each(attributeFilters, function (filter) {\n            if (typeof node.attr(filter.name) === 'string') {\n              if (attrMatches[filter.name]) {\n                attrMatches[filter.name].nodes.push(node);\n              } else {\n                attrMatches[filter.name] = {\n                  filter: filter,\n                  nodes: [node]\n                };\n              }\n            }\n          });\n        });\n      }\n      for (var name in nodeMatches) {\n        if (nodeMatches.hasOwnProperty(name)) {\n          matches.push(nodeMatches[name]);\n        }\n      }\n      for (var name in attrMatches) {\n        if (attrMatches.hasOwnProperty(name)) {\n          matches.push(attrMatches[name]);\n        }\n      }\n      return matches;\n    };\n    var filter$3 = function (nodeFilters, attributeFilters, node) {\n      var matches = findMatchingNodes(nodeFilters, attributeFilters, node);\n      each(matches, function (match) {\n        each(match.filter.callbacks, function (callback) {\n          callback(match.nodes, match.filter.name, {});\n        });\n      });\n    };\n\n    var defaultFormat$1 = 'html';\n    var isTreeNode = function (content) {\n      return content instanceof Node$1;\n    };\n    var moveSelection = function (editor) {\n      if (EditorFocus.hasFocus(editor)) {\n        CaretFinder.firstPositionIn(editor.getBody()).each(function (pos) {\n          var node = pos.getNode();\n          var caretPos = NodeType.isTable(node) ? CaretFinder.firstPositionIn(node).getOr(pos) : pos;\n          editor.selection.setRng(caretPos.toRange());\n        });\n      }\n    };\n    var setEditorHtml = function (editor, html) {\n      editor.dom.setHTML(editor.getBody(), html);\n      moveSelection(editor);\n    };\n    var setContentString = function (editor, body, content, args) {\n      var forcedRootBlockName, padd;\n      if (content.length === 0 || /^\\s+$/.test(content)) {\n        padd = '<br data-mce-bogus=\"1\">';\n        if (body.nodeName === 'TABLE') {\n          content = '<tr><td>' + padd + '</td></tr>';\n        } else if (/^(UL|OL)$/.test(body.nodeName)) {\n          content = '<li>' + padd + '</li>';\n        }\n        forcedRootBlockName = Settings.getForcedRootBlock(editor);\n        if (forcedRootBlockName && editor.schema.isValidChild(body.nodeName.toLowerCase(), forcedRootBlockName.toLowerCase())) {\n          content = padd;\n          content = editor.dom.createHTML(forcedRootBlockName, editor.settings.forced_root_block_attrs, content);\n        } else if (!content) {\n          content = '<br data-mce-bogus=\"1\">';\n        }\n        setEditorHtml(editor, content);\n        editor.fire('SetContent', args);\n      } else {\n        if (args.format !== 'raw') {\n          content = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(editor.parser.parse(content, {\n            isRootContent: true,\n            insert: true\n          }));\n        }\n        args.content = isWsPreserveElement(Element.fromDom(body)) ? content : Tools.trim(content);\n        setEditorHtml(editor, args.content);\n        if (!args.no_events) {\n          editor.fire('SetContent', args);\n        }\n      }\n      return args.content;\n    };\n    var setContentTree = function (editor, body, content, args) {\n      filter$3(editor.parser.getNodeFilters(), editor.parser.getAttributeFilters(), content);\n      var html = HtmlSerializer({ validate: editor.validate }, editor.schema).serialize(content);\n      args.content = isWsPreserveElement(Element.fromDom(body)) ? html : Tools.trim(html);\n      setEditorHtml(editor, args.content);\n      if (!args.no_events) {\n        editor.fire('SetContent', args);\n      }\n      return content;\n    };\n    var setContent$1 = function (editor, content, args) {\n      if (args === void 0) {\n        args = {};\n      }\n      args.format = args.format ? args.format : defaultFormat$1;\n      args.set = true;\n      args.content = isTreeNode(content) ? '' : content;\n      if (!isTreeNode(content) && !args.no_events) {\n        editor.fire('BeforeSetContent', args);\n        content = args.content;\n      }\n      return Option.from(editor.getBody()).fold(constant(content), function (body) {\n        return isTreeNode(content) ? setContentTree(editor, body, content, args) : setContentString(editor, body, content, args);\n      });\n    };\n\n    var DOM$6 = DOMUtils$1.DOM;\n    var restoreOriginalStyles = function (editor) {\n      DOM$6.setStyle(editor.id, 'display', editor.orgDisplay);\n    };\n    var safeDestroy = function (x) {\n      return Option.from(x).each(function (x) {\n        return x.destroy();\n      });\n    };\n    var clearDomReferences = function (editor) {\n      editor.contentAreaContainer = editor.formElement = editor.container = editor.editorContainer = null;\n      editor.bodyElement = editor.contentDocument = editor.contentWindow = null;\n      editor.iframeElement = editor.targetElm = null;\n      if (editor.selection) {\n        editor.selection = editor.selection.win = editor.selection.dom = editor.selection.dom.doc = null;\n      }\n    };\n    var restoreForm = function (editor) {\n      var form = editor.formElement;\n      if (form) {\n        if (form._mceOldSubmit) {\n          form.submit = form._mceOldSubmit;\n          form._mceOldSubmit = null;\n        }\n        DOM$6.unbind(form, 'submit reset', editor.formEventDelegate);\n      }\n    };\n    var remove$7 = function (editor) {\n      if (!editor.removed) {\n        var _selectionOverrides = editor._selectionOverrides, editorUpload = editor.editorUpload;\n        var body = editor.getBody();\n        var element = editor.getElement();\n        if (body) {\n          editor.save({ is_removing: true });\n        }\n        editor.removed = true;\n        editor.unbindAllNativeEvents();\n        if (editor.hasHiddenInput && element) {\n          DOM$6.remove(element.nextSibling);\n        }\n        Events.fireRemove(editor);\n        editor.editorManager.remove(editor);\n        if (!editor.inline && body) {\n          restoreOriginalStyles(editor);\n        }\n        Events.fireDetach(editor);\n        DOM$6.remove(editor.getContainer());\n        safeDestroy(_selectionOverrides);\n        safeDestroy(editorUpload);\n        editor.destroy();\n      }\n    };\n    var destroy = function (editor, automatic) {\n      var selection = editor.selection, dom = editor.dom;\n      if (editor.destroyed) {\n        return;\n      }\n      if (!automatic && !editor.removed) {\n        editor.remove();\n        return;\n      }\n      if (!automatic) {\n        editor.editorManager.off('beforeunload', editor._beforeUnload);\n        if (editor.theme && editor.theme.destroy) {\n          editor.theme.destroy();\n        }\n        safeDestroy(selection);\n        safeDestroy(dom);\n      }\n      restoreForm(editor);\n      clearDomReferences(editor);\n      editor.destroyed = true;\n    };\n\n    var DOM$7 = DOMUtils$1.DOM;\n    var extend$4 = Tools.extend, each$l = Tools.each;\n    var resolve$4 = Tools.resolve;\n    var ie$2 = Env.ie;\n    var Editor = function (id, settings, editorManager) {\n      var self = this;\n      var documentBaseUrl = self.documentBaseUrl = editorManager.documentBaseURL;\n      var baseUri = editorManager.baseURI;\n      settings = getEditorSettings(self, id, documentBaseUrl, editorManager.defaultSettings, settings);\n      self.settings = settings;\n      AddOnManager.language = settings.language || 'en';\n      AddOnManager.languageLoad = settings.language_load;\n      AddOnManager.baseURL = editorManager.baseURL;\n      self.id = id;\n      self.setDirty(false);\n      self.plugins = {};\n      self.documentBaseURI = new URI(settings.document_base_url, { base_uri: baseUri });\n      self.baseURI = baseUri;\n      self.contentCSS = [];\n      self.contentStyles = [];\n      self.shortcuts = new Shortcuts(self);\n      self.loadedCSS = {};\n      self.editorCommands = new EditorCommands(self);\n      self.suffix = editorManager.suffix;\n      self.editorManager = editorManager;\n      self.inline = settings.inline;\n      self.buttons = {};\n      self.menuItems = {};\n      if (settings.cache_suffix) {\n        Env.cacheSuffix = settings.cache_suffix.replace(/^[\\?\\&]+/, '');\n      }\n      if (settings.override_viewport === false) {\n        Env.overrideViewPort = false;\n      }\n      editorManager.fire('SetupEditor', { editor: self });\n      self.execCallback('setup', self);\n      self.$ = DomQuery.overrideDefaults(function () {\n        return {\n          context: self.inline ? self.getBody() : self.getDoc(),\n          element: self.getBody()\n        };\n      });\n    };\n    Editor.prototype = {\n      render: function () {\n        Render.render(this);\n      },\n      focus: function (skipFocus) {\n        EditorFocus.focus(this, skipFocus);\n      },\n      hasFocus: function () {\n        return EditorFocus.hasFocus(this);\n      },\n      execCallback: function (name) {\n        var x = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n          x[_i - 1] = arguments[_i];\n        }\n        var self = this;\n        var callback = self.settings[name], scope;\n        if (!callback) {\n          return;\n        }\n        if (self.callbackLookup && (scope = self.callbackLookup[name])) {\n          callback = scope.func;\n          scope = scope.scope;\n        }\n        if (typeof callback === 'string') {\n          scope = callback.replace(/\\.\\w+$/, '');\n          scope = scope ? resolve$4(scope) : 0;\n          callback = resolve$4(callback);\n          self.callbackLookup = self.callbackLookup || {};\n          self.callbackLookup[name] = {\n            func: callback,\n            scope: scope\n          };\n        }\n        return callback.apply(scope || self, Array.prototype.slice.call(arguments, 1));\n      },\n      translate: function (text) {\n        if (text && Tools.is(text, 'string')) {\n          var lang_1 = this.settings.language || 'en', i18n_1 = this.editorManager.i18n;\n          text = i18n_1.data[lang_1 + '.' + text] || text.replace(/\\{\\#([^\\}]+)\\}/g, function (a, b) {\n            return i18n_1.data[lang_1 + '.' + b] || '{#' + b + '}';\n          });\n        }\n        return this.editorManager.translate(text);\n      },\n      getLang: function (name, defaultVal) {\n        return this.editorManager.i18n.data[(this.settings.language || 'en') + '.' + name] || (defaultVal !== undefined ? defaultVal : '{#' + name + '}');\n      },\n      getParam: function (name, defaultVal, type) {\n        return getParam(this, name, defaultVal, type);\n      },\n      nodeChanged: function (args) {\n        this._nodeChangeDispatcher.nodeChanged(args);\n      },\n      addButton: function (name, settings) {\n        var self = this;\n        if (settings.cmd) {\n          settings.onclick = function () {\n            self.execCommand(settings.cmd);\n          };\n        }\n        if (settings.stateSelector && typeof settings.active === 'undefined') {\n          settings.active = false;\n        }\n        if (!settings.text && !settings.icon) {\n          settings.icon = name;\n        }\n        settings.tooltip = settings.tooltip || settings.title;\n        self.buttons[name] = settings;\n      },\n      addSidebar: function (name, settings) {\n        return Sidebar.add(this, name, settings);\n      },\n      addMenuItem: function (name, settings) {\n        var self = this;\n        if (settings.cmd) {\n          settings.onclick = function () {\n            self.execCommand(settings.cmd);\n          };\n        }\n        self.menuItems[name] = settings;\n      },\n      addContextToolbar: function (predicate, items) {\n        var self = this;\n        var selector;\n        self.contextToolbars = self.contextToolbars || [];\n        if (typeof predicate === 'string') {\n          selector = predicate;\n          predicate = function (elm) {\n            return self.dom.is(elm, selector);\n          };\n        }\n        self.contextToolbars.push({\n          id: Uuid.uuid('mcet'),\n          predicate: predicate,\n          items: items\n        });\n      },\n      addCommand: function (name, callback, scope) {\n        this.editorCommands.addCommand(name, callback, scope);\n      },\n      addQueryStateHandler: function (name, callback, scope) {\n        this.editorCommands.addQueryStateHandler(name, callback, scope);\n      },\n      addQueryValueHandler: function (name, callback, scope) {\n        this.editorCommands.addQueryValueHandler(name, callback, scope);\n      },\n      addShortcut: function (pattern, desc, cmdFunc, scope) {\n        this.shortcuts.add(pattern, desc, cmdFunc, scope);\n      },\n      execCommand: function (cmd, ui, value, args) {\n        return this.editorCommands.execCommand(cmd, ui, value, args);\n      },\n      queryCommandState: function (cmd) {\n        return this.editorCommands.queryCommandState(cmd);\n      },\n      queryCommandValue: function (cmd) {\n        return this.editorCommands.queryCommandValue(cmd);\n      },\n      queryCommandSupported: function (cmd) {\n        return this.editorCommands.queryCommandSupported(cmd);\n      },\n      show: function () {\n        var self = this;\n        if (self.hidden) {\n          self.hidden = false;\n          if (self.inline) {\n            self.getBody().contentEditable = true;\n          } else {\n            DOM$7.show(self.getContainer());\n            DOM$7.hide(self.id);\n          }\n          self.load();\n          self.fire('show');\n        }\n      },\n      hide: function () {\n        var self = this, doc = self.getDoc();\n        if (!self.hidden) {\n          if (ie$2 && doc && !self.inline) {\n            doc.execCommand('SelectAll');\n          }\n          self.save();\n          if (self.inline) {\n            self.getBody().contentEditable = false;\n            if (self === self.editorManager.focusedEditor) {\n              self.editorManager.focusedEditor = null;\n            }\n          } else {\n            DOM$7.hide(self.getContainer());\n            DOM$7.setStyle(self.id, 'display', self.orgDisplay);\n          }\n          self.hidden = true;\n          self.fire('hide');\n        }\n      },\n      isHidden: function () {\n        return !!this.hidden;\n      },\n      setProgressState: function (state, time) {\n        this.fire('ProgressState', {\n          state: state,\n          time: time\n        });\n      },\n      load: function (args) {\n        var self = this;\n        var elm = self.getElement(), html;\n        if (self.removed) {\n          return '';\n        }\n        if (elm) {\n          args = args || {};\n          args.load = true;\n          html = self.setContent(elm.value !== undefined ? elm.value : elm.innerHTML, args);\n          args.element = elm;\n          if (!args.no_events) {\n            self.fire('LoadContent', args);\n          }\n          args.element = elm = null;\n          return html;\n        }\n      },\n      save: function (args) {\n        var self = this;\n        var elm = self.getElement(), html, form;\n        if (!elm || !self.initialized || self.removed) {\n          return;\n        }\n        args = args || {};\n        args.save = true;\n        args.element = elm;\n        html = args.content = self.getContent(args);\n        if (!args.no_events) {\n          self.fire('SaveContent', args);\n        }\n        if (args.format === 'raw') {\n          self.fire('RawSaveContent', args);\n        }\n        html = args.content;\n        if (!/TEXTAREA|INPUT/i.test(elm.nodeName)) {\n          if (args.is_removing || !self.inline) {\n            elm.innerHTML = html;\n          }\n          if (form = DOM$7.getParent(self.id, 'form')) {\n            each$l(form.elements, function (elm) {\n              if (elm.name === self.id) {\n                elm.value = html;\n                return false;\n              }\n            });\n          }\n        } else {\n          elm.value = html;\n        }\n        args.element = elm = null;\n        if (args.set_dirty !== false) {\n          self.setDirty(false);\n        }\n        return html;\n      },\n      setContent: function (content, args) {\n        return setContent$1(this, content, args);\n      },\n      getContent: function (args) {\n        return getContent$1(this, args);\n      },\n      insertContent: function (content, args) {\n        if (args) {\n          content = extend$4({ content: content }, args);\n        }\n        this.execCommand('mceInsertContent', false, content);\n      },\n      isDirty: function () {\n        return !this.isNotDirty;\n      },\n      setDirty: function (state) {\n        var oldState = !this.isNotDirty;\n        this.isNotDirty = !state;\n        if (state && state !== oldState) {\n          this.fire('dirty');\n        }\n      },\n      setMode: function (mode) {\n        setMode(this, mode);\n      },\n      getContainer: function () {\n        var self = this;\n        if (!self.container) {\n          self.container = DOM$7.get(self.editorContainer || self.id + '_parent');\n        }\n        return self.container;\n      },\n      getContentAreaContainer: function () {\n        return this.contentAreaContainer;\n      },\n      getElement: function () {\n        if (!this.targetElm) {\n          this.targetElm = DOM$7.get(this.id);\n        }\n        return this.targetElm;\n      },\n      getWin: function () {\n        var self = this;\n        var elm;\n        if (!self.contentWindow) {\n          elm = self.iframeElement;\n          if (elm) {\n            self.contentWindow = elm.contentWindow;\n          }\n        }\n        return self.contentWindow;\n      },\n      getDoc: function () {\n        var self = this;\n        var win;\n        if (!self.contentDocument) {\n          win = self.getWin();\n          if (win) {\n            self.contentDocument = win.document;\n          }\n        }\n        return self.contentDocument;\n      },\n      getBody: function () {\n        var doc = this.getDoc();\n        return this.bodyElement || (doc ? doc.body : null);\n      },\n      convertURL: function (url, name, elm) {\n        var self = this, settings = self.settings;\n        if (settings.urlconverter_callback) {\n          return self.execCallback('urlconverter_callback', url, elm, true, name);\n        }\n        if (!settings.convert_urls || elm && elm.nodeName === 'LINK' || url.indexOf('file:') === 0 || url.length === 0) {\n          return url;\n        }\n        if (settings.relative_urls) {\n          return self.documentBaseURI.toRelative(url);\n        }\n        url = self.documentBaseURI.toAbsolute(url, settings.remove_script_host);\n        return url;\n      },\n      addVisual: function (elm) {\n        var self = this;\n        var settings = self.settings;\n        var dom = self.dom;\n        var cls;\n        elm = elm || self.getBody();\n        if (self.hasVisual === undefined) {\n          self.hasVisual = settings.visual;\n        }\n        each$l(dom.select('table,a', elm), function (elm) {\n          var value;\n          switch (elm.nodeName) {\n          case 'TABLE':\n            cls = settings.visual_table_class || 'mce-item-table';\n            value = dom.getAttrib(elm, 'border');\n            if ((!value || value === '0') && self.hasVisual) {\n              dom.addClass(elm, cls);\n            } else {\n              dom.removeClass(elm, cls);\n            }\n            return;\n          case 'A':\n            if (!dom.getAttrib(elm, 'href')) {\n              value = dom.getAttrib(elm, 'name') || elm.id;\n              cls = settings.visual_anchor_class || 'mce-item-anchor';\n              if (value && self.hasVisual) {\n                dom.addClass(elm, cls);\n              } else {\n                dom.removeClass(elm, cls);\n              }\n            }\n            return;\n          }\n        });\n        self.fire('VisualAid', {\n          element: elm,\n          hasVisual: self.hasVisual\n        });\n      },\n      remove: function () {\n        remove$7(this);\n      },\n      destroy: function (automatic) {\n        destroy(this, automatic);\n      },\n      uploadImages: function (callback) {\n        return this.editorUpload.uploadImages(callback);\n      },\n      _scanForImages: function () {\n        return this.editorUpload.scanForImages();\n      }\n    };\n    extend$4(Editor.prototype, EditorObservable$1);\n\n    var isEditorUIElement = function (elm) {\n      return elm.className.toString().indexOf('mce-') !== -1;\n    };\n    var FocusManager = { isEditorUIElement: isEditorUIElement };\n\n    var isManualNodeChange = function (e) {\n      return e.type === 'nodechange' && e.selectionChange;\n    };\n    var registerPageMouseUp = function (editor, throttledStore) {\n      var mouseUpPage = function () {\n        throttledStore.throttle();\n      };\n      DOMUtils$1.DOM.bind(domGlobals.document, 'mouseup', mouseUpPage);\n      editor.on('remove', function () {\n        DOMUtils$1.DOM.unbind(domGlobals.document, 'mouseup', mouseUpPage);\n      });\n    };\n    var registerFocusOut = function (editor) {\n      editor.on('focusout', function () {\n        SelectionBookmark.store(editor);\n      });\n    };\n    var registerMouseUp = function (editor, throttledStore) {\n      editor.on('mouseup touchend', function (e) {\n        throttledStore.throttle();\n      });\n    };\n    var registerEditorEvents = function (editor, throttledStore) {\n      var browser = PlatformDetection$1.detect().browser;\n      if (browser.isIE()) {\n        registerFocusOut(editor);\n      } else {\n        registerMouseUp(editor, throttledStore);\n      }\n      editor.on('keyup nodechange', function (e) {\n        if (!isManualNodeChange(e)) {\n          SelectionBookmark.store(editor);\n        }\n      });\n    };\n    var register$3 = function (editor) {\n      var throttledStore = first(function () {\n        SelectionBookmark.store(editor);\n      }, 0);\n      if (editor.inline) {\n        registerPageMouseUp(editor, throttledStore);\n      }\n      editor.on('init', function () {\n        registerEditorEvents(editor, throttledStore);\n      });\n      editor.on('remove', function () {\n        throttledStore.cancel();\n      });\n    };\n    var SelectionRestore = { register: register$3 };\n\n    var documentFocusInHandler;\n    var DOM$8 = DOMUtils$1.DOM;\n    var isEditorUIElement$1 = function (elm) {\n      return FocusManager.isEditorUIElement(elm);\n    };\n    var isUIElement = function (editor, elm) {\n      var customSelector = editor ? editor.settings.custom_ui_selector : '';\n      var parent = DOM$8.getParent(elm, function (elm) {\n        return isEditorUIElement$1(elm) || (customSelector ? editor.dom.is(elm, customSelector) : false);\n      });\n      return parent !== null;\n    };\n    var getActiveElement = function () {\n      try {\n        return domGlobals.document.activeElement;\n      } catch (ex) {\n        return domGlobals.document.body;\n      }\n    };\n    var registerEvents = function (editorManager, e) {\n      var editor = e.editor;\n      SelectionRestore.register(editor);\n      editor.on('focusin', function () {\n        var self = this;\n        var focusedEditor = editorManager.focusedEditor;\n        if (focusedEditor !== self) {\n          if (focusedEditor) {\n            focusedEditor.fire('blur', { focusedEditor: self });\n          }\n          editorManager.setActive(self);\n          editorManager.focusedEditor = self;\n          self.fire('focus', { blurredEditor: focusedEditor });\n          self.focus(true);\n        }\n      });\n      editor.on('focusout', function () {\n        var self = this;\n        Delay.setEditorTimeout(self, function () {\n          var focusedEditor = editorManager.focusedEditor;\n          if (!isUIElement(self, getActiveElement()) && focusedEditor === self) {\n            self.fire('blur', { focusedEditor: null });\n            editorManager.focusedEditor = null;\n          }\n        });\n      });\n      if (!documentFocusInHandler) {\n        documentFocusInHandler = function (e) {\n          var activeEditor = editorManager.activeEditor;\n          var target;\n          target = e.target;\n          if (activeEditor && target.ownerDocument === domGlobals.document) {\n            if (target !== domGlobals.document.body && !isUIElement(activeEditor, target) && editorManager.focusedEditor === activeEditor) {\n              activeEditor.fire('blur', { focusedEditor: null });\n              editorManager.focusedEditor = null;\n            }\n          }\n        };\n        DOM$8.bind(domGlobals.document, 'focusin', documentFocusInHandler);\n      }\n    };\n    var unregisterDocumentEvents = function (editorManager, e) {\n      if (editorManager.focusedEditor === e.editor) {\n        editorManager.focusedEditor = null;\n      }\n      if (!editorManager.activeEditor) {\n        DOM$8.unbind(domGlobals.document, 'focusin', documentFocusInHandler);\n        documentFocusInHandler = null;\n      }\n    };\n    var setup$h = function (editorManager) {\n      editorManager.on('AddEditor', curry(registerEvents, editorManager));\n      editorManager.on('RemoveEditor', curry(unregisterDocumentEvents, editorManager));\n    };\n    var FocusController = {\n      setup: setup$h,\n      isEditorUIElement: isEditorUIElement$1,\n      isUIElement: isUIElement\n    };\n\n    var DOM$9 = DOMUtils$1.DOM;\n    var explode$4 = Tools.explode, each$m = Tools.each, extend$5 = Tools.extend;\n    var instanceCounter = 0, beforeUnloadDelegate, EditorManager, boundGlobalEvents = false;\n    var legacyEditors = [];\n    var editors = [];\n    var isValidLegacyKey = function (id) {\n      return id !== 'length';\n    };\n    var globalEventDelegate = function (e) {\n      var type = e.type;\n      each$m(EditorManager.get(), function (editor) {\n        switch (type) {\n        case 'scroll':\n          editor.fire('ScrollWindow', e);\n          break;\n        case 'resize':\n          editor.fire('ResizeWindow', e);\n          break;\n        }\n      });\n    };\n    var toggleGlobalEvents = function (state) {\n      if (state !== boundGlobalEvents) {\n        if (state) {\n          DomQuery(window).on('resize scroll', globalEventDelegate);\n        } else {\n          DomQuery(window).off('resize scroll', globalEventDelegate);\n        }\n        boundGlobalEvents = state;\n      }\n    };\n    var removeEditorFromList = function (targetEditor) {\n      var oldEditors = editors;\n      delete legacyEditors[targetEditor.id];\n      for (var i = 0; i < legacyEditors.length; i++) {\n        if (legacyEditors[i] === targetEditor) {\n          legacyEditors.splice(i, 1);\n          break;\n        }\n      }\n      editors = filter(editors, function (editor) {\n        return targetEditor !== editor;\n      });\n      if (EditorManager.activeEditor === targetEditor) {\n        EditorManager.activeEditor = editors.length > 0 ? editors[0] : null;\n      }\n      if (EditorManager.focusedEditor === targetEditor) {\n        EditorManager.focusedEditor = null;\n      }\n      return oldEditors.length !== editors.length;\n    };\n    var purgeDestroyedEditor = function (editor) {\n      if (editor && editor.initialized && !(editor.getContainer() || editor.getBody()).parentNode) {\n        removeEditorFromList(editor);\n        editor.unbindAllNativeEvents();\n        editor.destroy(true);\n        editor.removed = true;\n        editor = null;\n      }\n      return editor;\n    };\n    EditorManager = {\n      defaultSettings: {},\n      $: DomQuery,\n      majorVersion: '4',\n      minorVersion: '9.6',\n      releaseDate: '2019-09-02',\n      editors: legacyEditors,\n      i18n: I18n,\n      activeEditor: null,\n      settings: {},\n      setup: function () {\n        var self = this;\n        var baseURL, documentBaseURL, suffix = '', preInit, src;\n        documentBaseURL = URI.getDocumentBaseUrl(domGlobals.document.location);\n        if (/^[^:]+:\\/\\/\\/?[^\\/]+\\//.test(documentBaseURL)) {\n          documentBaseURL = documentBaseURL.replace(/[\\?#].*$/, '').replace(/[\\/\\\\][^\\/]+$/, '');\n          if (!/[\\/\\\\]$/.test(documentBaseURL)) {\n            documentBaseURL += '/';\n          }\n        }\n        preInit = window.tinymce || window.tinyMCEPreInit;\n        if (preInit) {\n          baseURL = preInit.base || preInit.baseURL;\n          suffix = preInit.suffix;\n        } else {\n          var scripts = domGlobals.document.getElementsByTagName('script');\n          for (var i = 0; i < scripts.length; i++) {\n            src = scripts[i].src;\n            var srcScript = src.substring(src.lastIndexOf('/'));\n            if (/tinymce(\\.full|\\.jquery|)(\\.min|\\.dev|)\\.js/.test(src)) {\n              if (srcScript.indexOf('.min') !== -1) {\n                suffix = '.min';\n              }\n              baseURL = src.substring(0, src.lastIndexOf('/'));\n              break;\n            }\n          }\n          if (!baseURL && domGlobals.document.currentScript) {\n            src = domGlobals.document.currentScript.src;\n            if (src.indexOf('.min') !== -1) {\n              suffix = '.min';\n            }\n            baseURL = src.substring(0, src.lastIndexOf('/'));\n          }\n        }\n        self.baseURL = new URI(documentBaseURL).toAbsolute(baseURL);\n        self.documentBaseURL = documentBaseURL;\n        self.baseURI = new URI(self.baseURL);\n        self.suffix = suffix;\n        FocusController.setup(self);\n      },\n      overrideDefaults: function (defaultSettings) {\n        var baseUrl, suffix;\n        baseUrl = defaultSettings.base_url;\n        if (baseUrl) {\n          this.baseURL = new URI(this.documentBaseURL).toAbsolute(baseUrl.replace(/\\/+$/, ''));\n          this.baseURI = new URI(this.baseURL);\n        }\n        suffix = defaultSettings.suffix;\n        if (defaultSettings.suffix) {\n          this.suffix = suffix;\n        }\n        this.defaultSettings = defaultSettings;\n        var pluginBaseUrls = defaultSettings.plugin_base_urls;\n        for (var name in pluginBaseUrls) {\n          AddOnManager.PluginManager.urls[name] = pluginBaseUrls[name];\n        }\n      },\n      init: function (settings) {\n        var self = this;\n        var result, invalidInlineTargets;\n        invalidInlineTargets = Tools.makeMap('area base basefont br col frame hr img input isindex link meta param embed source wbr track ' + 'colgroup option tbody tfoot thead tr script noscript style textarea video audio iframe object menu', ' ');\n        var isInvalidInlineTarget = function (settings, elm) {\n          return settings.inline && elm.tagName.toLowerCase() in invalidInlineTargets;\n        };\n        var createId = function (elm) {\n          var id = elm.id;\n          if (!id) {\n            id = elm.name;\n            if (id && !DOM$9.get(id)) {\n              id = elm.name;\n            } else {\n              id = DOM$9.uniqueId();\n            }\n            elm.setAttribute('id', id);\n          }\n          return id;\n        };\n        var execCallback = function (name) {\n          var callback = settings[name];\n          if (!callback) {\n            return;\n          }\n          return callback.apply(self, Array.prototype.slice.call(arguments, 2));\n        };\n        var hasClass = function (elm, className) {\n          return className.constructor === RegExp ? className.test(elm.className) : DOM$9.hasClass(elm, className);\n        };\n        var findTargets = function (settings) {\n          var l, targets = [];\n          if (Env.ie && Env.ie < 11) {\n            ErrorReporter.initError('TinyMCE does not support the browser you are using. For a list of supported' + ' browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/');\n            return [];\n          }\n          if (settings.types) {\n            each$m(settings.types, function (type) {\n              targets = targets.concat(DOM$9.select(type.selector));\n            });\n            return targets;\n          } else if (settings.selector) {\n            return DOM$9.select(settings.selector);\n          } else if (settings.target) {\n            return [settings.target];\n          }\n          switch (settings.mode) {\n          case 'exact':\n            l = settings.elements || '';\n            if (l.length > 0) {\n              each$m(explode$4(l), function (id) {\n                var elm;\n                if (elm = DOM$9.get(id)) {\n                  targets.push(elm);\n                } else {\n                  each$m(domGlobals.document.forms, function (f) {\n                    each$m(f.elements, function (e) {\n                      if (e.name === id) {\n                        id = 'mce_editor_' + instanceCounter++;\n                        DOM$9.setAttrib(e, 'id', id);\n                        targets.push(e);\n                      }\n                    });\n                  });\n                }\n              });\n            }\n            break;\n          case 'textareas':\n          case 'specific_textareas':\n            each$m(DOM$9.select('textarea'), function (elm) {\n              if (settings.editor_deselector && hasClass(elm, settings.editor_deselector)) {\n                return;\n              }\n              if (!settings.editor_selector || hasClass(elm, settings.editor_selector)) {\n                targets.push(elm);\n              }\n            });\n            break;\n          }\n          return targets;\n        };\n        var provideResults = function (editors) {\n          result = editors;\n        };\n        var initEditors = function () {\n          var initCount = 0;\n          var editors = [];\n          var targets;\n          var createEditor = function (id, settings, targetElm) {\n            var editor = new Editor(id, settings, self);\n            editors.push(editor);\n            editor.on('init', function () {\n              if (++initCount === targets.length) {\n                provideResults(editors);\n              }\n            });\n            editor.targetElm = editor.targetElm || targetElm;\n            editor.render();\n          };\n          DOM$9.unbind(window, 'ready', initEditors);\n          execCallback('onpageload');\n          targets = DomQuery.unique(findTargets(settings));\n          if (settings.types) {\n            each$m(settings.types, function (type) {\n              Tools.each(targets, function (elm) {\n                if (DOM$9.is(elm, type.selector)) {\n                  createEditor(createId(elm), extend$5({}, settings, type), elm);\n                  return false;\n                }\n                return true;\n              });\n            });\n            return;\n          }\n          Tools.each(targets, function (elm) {\n            purgeDestroyedEditor(self.get(elm.id));\n          });\n          targets = Tools.grep(targets, function (elm) {\n            return !self.get(elm.id);\n          });\n          if (targets.length === 0) {\n            provideResults([]);\n          } else {\n            each$m(targets, function (elm) {\n              if (isInvalidInlineTarget(settings, elm)) {\n                ErrorReporter.initError('Could not initialize inline editor on invalid inline target element', elm);\n              } else {\n                createEditor(createId(elm), settings, elm);\n              }\n            });\n          }\n        };\n        self.settings = settings;\n        DOM$9.bind(window, 'ready', initEditors);\n        return new promiseObj(function (resolve) {\n          if (result) {\n            resolve(result);\n          } else {\n            provideResults = function (editors) {\n              resolve(editors);\n            };\n          }\n        });\n      },\n      get: function (id) {\n        if (arguments.length === 0) {\n          return editors.slice(0);\n        } else if (isString(id)) {\n          return find(editors, function (editor) {\n            return editor.id === id;\n          }).getOr(null);\n        } else if (isNumber(id)) {\n          return editors[id] ? editors[id] : null;\n        } else {\n          return null;\n        }\n      },\n      add: function (editor) {\n        var self = this;\n        var existingEditor;\n        existingEditor = legacyEditors[editor.id];\n        if (existingEditor === editor) {\n          return editor;\n        }\n        if (self.get(editor.id) === null) {\n          if (isValidLegacyKey(editor.id)) {\n            legacyEditors[editor.id] = editor;\n          }\n          legacyEditors.push(editor);\n          editors.push(editor);\n        }\n        toggleGlobalEvents(true);\n        self.activeEditor = editor;\n        self.fire('AddEditor', { editor: editor });\n        if (!beforeUnloadDelegate) {\n          beforeUnloadDelegate = function () {\n            self.fire('BeforeUnload');\n          };\n          DOM$9.bind(window, 'beforeunload', beforeUnloadDelegate);\n        }\n        return editor;\n      },\n      createEditor: function (id, settings) {\n        return this.add(new Editor(id, settings, this));\n      },\n      remove: function (selector) {\n        var self = this;\n        var i, editor;\n        if (!selector) {\n          for (i = editors.length - 1; i >= 0; i--) {\n            self.remove(editors[i]);\n          }\n          return;\n        }\n        if (isString(selector)) {\n          each$m(DOM$9.select(selector), function (elm) {\n            editor = self.get(elm.id);\n            if (editor) {\n              self.remove(editor);\n            }\n          });\n          return;\n        }\n        editor = selector;\n        if (isNull(self.get(editor.id))) {\n          return null;\n        }\n        if (removeEditorFromList(editor)) {\n          self.fire('RemoveEditor', { editor: editor });\n        }\n        if (editors.length === 0) {\n          DOM$9.unbind(window, 'beforeunload', beforeUnloadDelegate);\n        }\n        editor.remove();\n        toggleGlobalEvents(editors.length > 0);\n        return editor;\n      },\n      execCommand: function (cmd, ui, value) {\n        var self = this, editor = self.get(value);\n        switch (cmd) {\n        case 'mceAddEditor':\n          if (!self.get(value)) {\n            new Editor(value, self.settings, self).render();\n          }\n          return true;\n        case 'mceRemoveEditor':\n          if (editor) {\n            editor.remove();\n          }\n          return true;\n        case 'mceToggleEditor':\n          if (!editor) {\n            self.execCommand('mceAddEditor', 0, value);\n            return true;\n          }\n          if (editor.isHidden()) {\n            editor.show();\n          } else {\n            editor.hide();\n          }\n          return true;\n        }\n        if (self.activeEditor) {\n          return self.activeEditor.execCommand(cmd, ui, value);\n        }\n        return false;\n      },\n      triggerSave: function () {\n        each$m(editors, function (editor) {\n          editor.save();\n        });\n      },\n      addI18n: function (code, items) {\n        I18n.add(code, items);\n      },\n      translate: function (text) {\n        return I18n.translate(text);\n      },\n      setActive: function (editor) {\n        var activeEditor = this.activeEditor;\n        if (this.activeEditor !== editor) {\n          if (activeEditor) {\n            activeEditor.fire('deactivate', { relatedTarget: editor });\n          }\n          editor.fire('activate', { relatedTarget: activeEditor });\n        }\n        this.activeEditor = editor;\n      }\n    };\n    extend$5(EditorManager, Observable);\n    EditorManager.setup();\n    var EditorManager$1 = EditorManager;\n\n    function RangeUtils(dom) {\n      var walk = function (rng, callback) {\n        return RangeWalk.walk(dom, rng, callback);\n      };\n      var split = SplitRange.split;\n      var normalize = function (rng) {\n        return NormalizeRange.normalize(dom, rng).fold(constant(false), function (normalizedRng) {\n          rng.setStart(normalizedRng.startContainer, normalizedRng.startOffset);\n          rng.setEnd(normalizedRng.endContainer, normalizedRng.endOffset);\n          return true;\n        });\n      };\n      return {\n        walk: walk,\n        split: split,\n        normalize: normalize\n      };\n    }\n    (function (RangeUtils) {\n      RangeUtils.compareRanges = RangeCompare.isEq;\n      RangeUtils.getCaretRangeFromPoint = CaretRangeFromPoint.fromPoint;\n      RangeUtils.getSelectedNode = getSelectedNode;\n      RangeUtils.getNode = getNode;\n    }(RangeUtils || (RangeUtils = {})));\n    var RangeUtils$1 = RangeUtils;\n\n    var min = Math.min, max = Math.max, round$2 = Math.round;\n    var relativePosition = function (rect, targetRect, rel) {\n      var x, y, w, h, targetW, targetH;\n      x = targetRect.x;\n      y = targetRect.y;\n      w = rect.w;\n      h = rect.h;\n      targetW = targetRect.w;\n      targetH = targetRect.h;\n      rel = (rel || '').split('');\n      if (rel[0] === 'b') {\n        y += targetH;\n      }\n      if (rel[1] === 'r') {\n        x += targetW;\n      }\n      if (rel[0] === 'c') {\n        y += round$2(targetH / 2);\n      }\n      if (rel[1] === 'c') {\n        x += round$2(targetW / 2);\n      }\n      if (rel[3] === 'b') {\n        y -= h;\n      }\n      if (rel[4] === 'r') {\n        x -= w;\n      }\n      if (rel[3] === 'c') {\n        y -= round$2(h / 2);\n      }\n      if (rel[4] === 'c') {\n        x -= round$2(w / 2);\n      }\n      return create$4(x, y, w, h);\n    };\n    var findBestRelativePosition = function (rect, targetRect, constrainRect, rels) {\n      var pos, i;\n      for (i = 0; i < rels.length; i++) {\n        pos = relativePosition(rect, targetRect, rels[i]);\n        if (pos.x >= constrainRect.x && pos.x + pos.w <= constrainRect.w + constrainRect.x && pos.y >= constrainRect.y && pos.y + pos.h <= constrainRect.h + constrainRect.y) {\n          return rels[i];\n        }\n      }\n      return null;\n    };\n    var inflate = function (rect, w, h) {\n      return create$4(rect.x - w, rect.y - h, rect.w + w * 2, rect.h + h * 2);\n    };\n    var intersect = function (rect, cropRect) {\n      var x1, y1, x2, y2;\n      x1 = max(rect.x, cropRect.x);\n      y1 = max(rect.y, cropRect.y);\n      x2 = min(rect.x + rect.w, cropRect.x + cropRect.w);\n      y2 = min(rect.y + rect.h, cropRect.y + cropRect.h);\n      if (x2 - x1 < 0 || y2 - y1 < 0) {\n        return null;\n      }\n      return create$4(x1, y1, x2 - x1, y2 - y1);\n    };\n    var clamp$1 = function (rect, clampRect, fixedSize) {\n      var underflowX1, underflowY1, overflowX2, overflowY2, x1, y1, x2, y2, cx2, cy2;\n      x1 = rect.x;\n      y1 = rect.y;\n      x2 = rect.x + rect.w;\n      y2 = rect.y + rect.h;\n      cx2 = clampRect.x + clampRect.w;\n      cy2 = clampRect.y + clampRect.h;\n      underflowX1 = max(0, clampRect.x - x1);\n      underflowY1 = max(0, clampRect.y - y1);\n      overflowX2 = max(0, x2 - cx2);\n      overflowY2 = max(0, y2 - cy2);\n      x1 += underflowX1;\n      y1 += underflowY1;\n      if (fixedSize) {\n        x2 += underflowX1;\n        y2 += underflowY1;\n        x1 -= overflowX2;\n        y1 -= overflowY2;\n      }\n      x2 -= overflowX2;\n      y2 -= overflowY2;\n      return create$4(x1, y1, x2 - x1, y2 - y1);\n    };\n    var create$4 = function (x, y, w, h) {\n      return {\n        x: x,\n        y: y,\n        w: w,\n        h: h\n      };\n    };\n    var fromClientRect = function (clientRect) {\n      return create$4(clientRect.left, clientRect.top, clientRect.width, clientRect.height);\n    };\n    var Rect = {\n      inflate: inflate,\n      relativePosition: relativePosition,\n      findBestRelativePosition: findBestRelativePosition,\n      intersect: intersect,\n      clamp: clamp$1,\n      create: create$4,\n      fromClientRect: fromClientRect\n    };\n\n    var types = {};\n    var Factory = {\n      add: function (type, typeClass) {\n        types[type.toLowerCase()] = typeClass;\n      },\n      has: function (type) {\n        return !!types[type.toLowerCase()];\n      },\n      get: function (type) {\n        var lctype = type.toLowerCase();\n        var controlType = types.hasOwnProperty(lctype) ? types[lctype] : null;\n        if (controlType === null) {\n          throw new Error('Could not find module for type: ' + type);\n        }\n        return controlType;\n      },\n      create: function (type, settings) {\n        var ControlType;\n        if (typeof type === 'string') {\n          settings = settings || {};\n          settings.type = type;\n        } else {\n          settings = type;\n          type = settings.type;\n        }\n        type = type.toLowerCase();\n        ControlType = types[type];\n        if (!ControlType) {\n          throw new Error('Could not find control by type: ' + type);\n        }\n        ControlType = new ControlType(settings);\n        ControlType.type = type;\n        return ControlType;\n      }\n    };\n\n    var each$n = Tools.each, extend$6 = Tools.extend;\n    var extendClass, initializing;\n    var Class = function () {\n    };\n    Class.extend = extendClass = function (prop) {\n      var self = this;\n      var _super = self.prototype;\n      var prototype, name, member;\n      var Class = function () {\n        var i, mixins, mixin;\n        var self = this;\n        if (!initializing) {\n          if (self.init) {\n            self.init.apply(self, arguments);\n          }\n          mixins = self.Mixins;\n          if (mixins) {\n            i = mixins.length;\n            while (i--) {\n              mixin = mixins[i];\n              if (mixin.init) {\n                mixin.init.apply(self, arguments);\n              }\n            }\n          }\n        }\n      };\n      var dummy = function () {\n        return this;\n      };\n      var createMethod = function (name, fn) {\n        return function () {\n          var self = this;\n          var tmp = self._super;\n          var ret;\n          self._super = _super[name];\n          ret = fn.apply(self, arguments);\n          self._super = tmp;\n          return ret;\n        };\n      };\n      initializing = true;\n      prototype = new self();\n      initializing = false;\n      if (prop.Mixins) {\n        each$n(prop.Mixins, function (mixin) {\n          for (var name_1 in mixin) {\n            if (name_1 !== 'init') {\n              prop[name_1] = mixin[name_1];\n            }\n          }\n        });\n        if (_super.Mixins) {\n          prop.Mixins = _super.Mixins.concat(prop.Mixins);\n        }\n      }\n      if (prop.Methods) {\n        each$n(prop.Methods.split(','), function (name) {\n          prop[name] = dummy;\n        });\n      }\n      if (prop.Properties) {\n        each$n(prop.Properties.split(','), function (name) {\n          var fieldName = '_' + name;\n          prop[name] = function (value) {\n            var self = this;\n            if (value !== undefined) {\n              self[fieldName] = value;\n              return self;\n            }\n            return self[fieldName];\n          };\n        });\n      }\n      if (prop.Statics) {\n        each$n(prop.Statics, function (func, name) {\n          Class[name] = func;\n        });\n      }\n      if (prop.Defaults && _super.Defaults) {\n        prop.Defaults = extend$6({}, _super.Defaults, prop.Defaults);\n      }\n      for (name in prop) {\n        member = prop[name];\n        if (typeof member === 'function' && _super[name]) {\n          prototype[name] = createMethod(name, member);\n        } else {\n          prototype[name] = member;\n        }\n      }\n      Class.prototype = prototype;\n      Class.constructor = Class;\n      Class.extend = extendClass;\n      return Class;\n    };\n\n    var min$1 = Math.min, max$1 = Math.max, round$3 = Math.round;\n    var Color = function (value) {\n      var self = {};\n      var r = 0, g = 0, b = 0;\n      var rgb2hsv = function (r, g, b) {\n        var h, s, v, d, minRGB, maxRGB;\n        h = 0;\n        s = 0;\n        v = 0;\n        r = r / 255;\n        g = g / 255;\n        b = b / 255;\n        minRGB = min$1(r, min$1(g, b));\n        maxRGB = max$1(r, max$1(g, b));\n        if (minRGB === maxRGB) {\n          v = minRGB;\n          return {\n            h: 0,\n            s: 0,\n            v: v * 100\n          };\n        }\n        d = r === minRGB ? g - b : b === minRGB ? r - g : b - r;\n        h = r === minRGB ? 3 : b === minRGB ? 1 : 5;\n        h = 60 * (h - d / (maxRGB - minRGB));\n        s = (maxRGB - minRGB) / maxRGB;\n        v = maxRGB;\n        return {\n          h: round$3(h),\n          s: round$3(s * 100),\n          v: round$3(v * 100)\n        };\n      };\n      var hsvToRgb = function (hue, saturation, brightness) {\n        var side, chroma, x, match;\n        hue = (parseInt(hue, 10) || 0) % 360;\n        saturation = parseInt(saturation, 10) / 100;\n        brightness = parseInt(brightness, 10) / 100;\n        saturation = max$1(0, min$1(saturation, 1));\n        brightness = max$1(0, min$1(brightness, 1));\n        if (saturation === 0) {\n          r = g = b = round$3(255 * brightness);\n          return;\n        }\n        side = hue / 60;\n        chroma = brightness * saturation;\n        x = chroma * (1 - Math.abs(side % 2 - 1));\n        match = brightness - chroma;\n        switch (Math.floor(side)) {\n        case 0:\n          r = chroma;\n          g = x;\n          b = 0;\n          break;\n        case 1:\n          r = x;\n          g = chroma;\n          b = 0;\n          break;\n        case 2:\n          r = 0;\n          g = chroma;\n          b = x;\n          break;\n        case 3:\n          r = 0;\n          g = x;\n          b = chroma;\n          break;\n        case 4:\n          r = x;\n          g = 0;\n          b = chroma;\n          break;\n        case 5:\n          r = chroma;\n          g = 0;\n          b = x;\n          break;\n        default:\n          r = g = b = 0;\n        }\n        r = round$3(255 * (r + match));\n        g = round$3(255 * (g + match));\n        b = round$3(255 * (b + match));\n      };\n      var toHex = function () {\n        var hex = function (val) {\n          val = parseInt(val, 10).toString(16);\n          return val.length > 1 ? val : '0' + val;\n        };\n        return '#' + hex(r) + hex(g) + hex(b);\n      };\n      var toRgb = function () {\n        return {\n          r: r,\n          g: g,\n          b: b\n        };\n      };\n      var toHsv = function () {\n        return rgb2hsv(r, g, b);\n      };\n      var parse = function (value) {\n        var matches;\n        if (typeof value === 'object') {\n          if ('r' in value) {\n            r = value.r;\n            g = value.g;\n            b = value.b;\n          } else if ('v' in value) {\n            hsvToRgb(value.h, value.s, value.v);\n          }\n        } else {\n          if (matches = /rgb\\s*\\(\\s*([0-9]+)\\s*,\\s*([0-9]+)\\s*,\\s*([0-9]+)[^\\)]*\\)/gi.exec(value)) {\n            r = parseInt(matches[1], 10);\n            g = parseInt(matches[2], 10);\n            b = parseInt(matches[3], 10);\n          } else if (matches = /#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(value)) {\n            r = parseInt(matches[1], 16);\n            g = parseInt(matches[2], 16);\n            b = parseInt(matches[3], 16);\n          } else if (matches = /#([0-F])([0-F])([0-F])/gi.exec(value)) {\n            r = parseInt(matches[1] + matches[1], 16);\n            g = parseInt(matches[2] + matches[2], 16);\n            b = parseInt(matches[3] + matches[3], 16);\n          }\n        }\n        r = r < 0 ? 0 : r > 255 ? 255 : r;\n        g = g < 0 ? 0 : g > 255 ? 255 : g;\n        b = b < 0 ? 0 : b > 255 ? 255 : b;\n        return self;\n      };\n      if (value) {\n        parse(value);\n      }\n      self.toRgb = toRgb;\n      self.toHsv = toHsv;\n      self.toHex = toHex;\n      self.parse = parse;\n      return self;\n    };\n\n    var serialize = function (o, quote) {\n      var i, v, t, name;\n      quote = quote || '\"';\n      if (o === null) {\n        return 'null';\n      }\n      t = typeof o;\n      if (t === 'string') {\n        v = '\\bb\\tt\\nn\\ff\\rr\"\"\\'\\'\\\\\\\\';\n        return quote + o.replace(/([\\u0080-\\uFFFF\\x00-\\x1f\\\"\\'\\\\])/g, function (a, b) {\n          if (quote === '\"' && a === '\\'') {\n            return a;\n          }\n          i = v.indexOf(b);\n          if (i + 1) {\n            return '\\\\' + v.charAt(i + 1);\n          }\n          a = b.charCodeAt().toString(16);\n          return '\\\\u' + '0000'.substring(a.length) + a;\n        }) + quote;\n      }\n      if (t === 'object') {\n        if (o.hasOwnProperty && Object.prototype.toString.call(o) === '[object Array]') {\n          for (i = 0, v = '['; i < o.length; i++) {\n            v += (i > 0 ? ',' : '') + serialize(o[i], quote);\n          }\n          return v + ']';\n        }\n        v = '{';\n        for (name in o) {\n          if (o.hasOwnProperty(name)) {\n            v += typeof o[name] !== 'function' ? (v.length > 1 ? ',' + quote : quote) + name + quote + ':' + serialize(o[name], quote) : '';\n          }\n        }\n        return v + '}';\n      }\n      return '' + o;\n    };\n    var JSON$1 = {\n      serialize: serialize,\n      parse: function (text) {\n        try {\n          return JSON.parse(text);\n        } catch (ex) {\n        }\n      }\n    };\n\n    var JSONP = {\n      callbacks: {},\n      count: 0,\n      send: function (settings) {\n        var self = this, dom = DOMUtils$1.DOM, count = settings.count !== undefined ? settings.count : self.count;\n        var id = 'tinymce_jsonp_' + count;\n        self.callbacks[count] = function (json) {\n          dom.remove(id);\n          delete self.callbacks[count];\n          settings.callback(json);\n        };\n        dom.add(dom.doc.body, 'script', {\n          id: id,\n          src: settings.url,\n          type: 'text/javascript'\n        });\n        self.count++;\n      }\n    };\n\n    var XHR = {\n      send: function (settings) {\n        var xhr, count = 0;\n        var ready = function () {\n          if (!settings.async || xhr.readyState === 4 || count++ > 10000) {\n            if (settings.success && count < 10000 && xhr.status === 200) {\n              settings.success.call(settings.success_scope, '' + xhr.responseText, xhr, settings);\n            } else if (settings.error) {\n              settings.error.call(settings.error_scope, count > 10000 ? 'TIMED_OUT' : 'GENERAL', xhr, settings);\n            }\n            xhr = null;\n          } else {\n            setTimeout(ready, 10);\n          }\n        };\n        settings.scope = settings.scope || this;\n        settings.success_scope = settings.success_scope || settings.scope;\n        settings.error_scope = settings.error_scope || settings.scope;\n        settings.async = settings.async === false ? false : true;\n        settings.data = settings.data || '';\n        XHR.fire('beforeInitialize', { settings: settings });\n        xhr = XMLHttpRequest();\n        if (xhr) {\n          if (xhr.overrideMimeType) {\n            xhr.overrideMimeType(settings.content_type);\n          }\n          xhr.open(settings.type || (settings.data ? 'POST' : 'GET'), settings.url, settings.async);\n          if (settings.crossDomain) {\n            xhr.withCredentials = true;\n          }\n          if (settings.content_type) {\n            xhr.setRequestHeader('Content-Type', settings.content_type);\n          }\n          if (settings.requestheaders) {\n            Tools.each(settings.requestheaders, function (header) {\n              xhr.setRequestHeader(header.key, header.value);\n            });\n          }\n          xhr.setRequestHeader('X-Requested-With', 'XMLHttpRequest');\n          xhr = XHR.fire('beforeSend', {\n            xhr: xhr,\n            settings: settings\n          }).xhr;\n          xhr.send(settings.data);\n          if (!settings.async) {\n            return ready();\n          }\n          setTimeout(ready, 10);\n        }\n      }\n    };\n    Tools.extend(XHR, Observable);\n\n    var extend$7 = Tools.extend;\n    var JSONRequest = function (settings) {\n      this.settings = extend$7({}, settings);\n      this.count = 0;\n    };\n    JSONRequest.sendRPC = function (o) {\n      return new JSONRequest().send(o);\n    };\n    JSONRequest.prototype = {\n      send: function (args) {\n        var ecb = args.error, scb = args.success;\n        args = extend$7(this.settings, args);\n        args.success = function (c, x) {\n          c = JSON$1.parse(c);\n          if (typeof c === 'undefined') {\n            c = { error: 'JSON Parse error.' };\n          }\n          if (c.error) {\n            ecb.call(args.error_scope || args.scope, c.error, x);\n          } else {\n            scb.call(args.success_scope || args.scope, c.result);\n          }\n        };\n        args.error = function (ty, x) {\n          if (ecb) {\n            ecb.call(args.error_scope || args.scope, ty, x);\n          }\n        };\n        args.data = JSON$1.serialize({\n          id: args.id || 'c' + this.count++,\n          method: args.method,\n          params: args.params\n        });\n        args.content_type = 'application/json';\n        XHR.send(args);\n      }\n    };\n\n    var create$5 = function () {\n      return function () {\n        var data = {};\n        var keys = [];\n        var storage = {\n          getItem: function (key) {\n            var item = data[key];\n            return item ? item : null;\n          },\n          setItem: function (key, value) {\n            keys.push(key);\n            data[key] = String(value);\n          },\n          key: function (index) {\n            return keys[index];\n          },\n          removeItem: function (key) {\n            keys = keys.filter(function (k) {\n              return k === key;\n            });\n            delete data[key];\n          },\n          clear: function () {\n            keys = [];\n            data = {};\n          },\n          length: 0\n        };\n        Object.defineProperty(storage, 'length', {\n          get: function () {\n            return keys.length;\n          },\n          configurable: false,\n          enumerable: false\n        });\n        return storage;\n      }();\n    };\n\n    var localStorage;\n    try {\n      localStorage = domGlobals.window.localStorage;\n    } catch (e) {\n      localStorage = create$5();\n    }\n    var LocalStorage = localStorage;\n\n    var tinymce = EditorManager$1;\n    var publicApi = {\n      geom: { Rect: Rect },\n      util: {\n        Promise: promiseObj,\n        Delay: Delay,\n        Tools: Tools,\n        VK: VK,\n        URI: URI,\n        Class: Class,\n        EventDispatcher: Dispatcher,\n        Observable: Observable,\n        I18n: I18n,\n        XHR: XHR,\n        JSON: JSON$1,\n        JSONRequest: JSONRequest,\n        JSONP: JSONP,\n        LocalStorage: LocalStorage,\n        Color: Color\n      },\n      dom: {\n        EventUtils: EventUtils,\n        Sizzle: Sizzle,\n        DomQuery: DomQuery,\n        TreeWalker: TreeWalker,\n        DOMUtils: DOMUtils$1,\n        ScriptLoader: ScriptLoader,\n        RangeUtils: RangeUtils$1,\n        Serializer: DomSerializer$1,\n        ControlSelection: ControlSelection,\n        BookmarkManager: BookmarkManager$1,\n        Selection: Selection$1,\n        Event: EventUtils.Event\n      },\n      html: {\n        Styles: Styles,\n        Entities: Entities,\n        Node: Node$1,\n        Schema: Schema,\n        SaxParser: SaxParser$1,\n        DomParser: DomParser,\n        Writer: Writer,\n        Serializer: HtmlSerializer\n      },\n      ui: { Factory: Factory },\n      Env: Env,\n      AddOnManager: AddOnManager,\n      Annotator: Annotator,\n      Formatter: Formatter,\n      UndoManager: UndoManager,\n      EditorCommands: EditorCommands,\n      WindowManager: WindowManager,\n      NotificationManager: NotificationManager,\n      EditorObservable: EditorObservable$1,\n      Shortcuts: Shortcuts,\n      Editor: Editor,\n      FocusManager: FocusManager,\n      EditorManager: EditorManager$1,\n      DOM: DOMUtils$1.DOM,\n      ScriptLoader: ScriptLoader.ScriptLoader,\n      PluginManager: AddOnManager.PluginManager,\n      ThemeManager: AddOnManager.ThemeManager,\n      trim: Tools.trim,\n      isArray: Tools.isArray,\n      is: Tools.is,\n      toArray: Tools.toArray,\n      makeMap: Tools.makeMap,\n      each: Tools.each,\n      map: Tools.map,\n      grep: Tools.grep,\n      inArray: Tools.inArray,\n      extend: Tools.extend,\n      create: Tools.create,\n      walk: Tools.walk,\n      createNS: Tools.createNS,\n      resolve: Tools.resolve,\n      explode: Tools.explode,\n      _addCacheSuffix: Tools._addCacheSuffix,\n      isOpera: Env.opera,\n      isWebKit: Env.webkit,\n      isIE: Env.ie,\n      isGecko: Env.gecko,\n      isMac: Env.mac\n    };\n    tinymce = Tools.extend(tinymce, publicApi);\n    var Tinymce = tinymce;\n\n    var exportToModuleLoaders = function (tinymce) {\n      if (typeof module === 'object') {\n        try {\n          module.exports = tinymce;\n        } catch (_) {\n        }\n      }\n    };\n    var exportToWindowGlobal = function (tinymce) {\n      window.tinymce = tinymce;\n      window.tinyMCE = tinymce;\n    };\n    exportToWindowGlobal(Tinymce);\n    exportToModuleLoaders(Tinymce);\n\n}(window));\n})();\n","tinymce.PluginManager.add('placeholder', function(editor) {\r\n    editor.on('init', function() {\r\n        var label = new Label;\r\n\r\n        onBlur();\r\n\r\n        tinymce.DOM.bind(label.el, 'click', onFocus);\r\n        editor.on('focus', onFocus);\r\n        editor.on('blur', onBlur);\r\n        editor.on('change', onBlur);\r\n        editor.on('setContent', onBlur);\r\n        editor.on('keydown', onKeydown);\r\n\r\n        function onFocus() {\r\n            if (!editor.settings.readonly === true) {\r\n                label.hide();\r\n            }\r\n            editor.execCommand('mceFocus', false);\r\n        }\r\n\r\n        function onBlur() {\r\n            if (editor.getContent() == '') {\r\n                label.show();\r\n            } else {\r\n                label.hide();\r\n            }\r\n        }\r\n\r\n        function onKeydown(){\r\n            label.hide();\r\n        }\r\n    });\r\n\r\n    var Label = function(){\r\n        var placeholder_text = editor.getElement().getAttribute(\"placeholder\") || editor.settings.placeholder;\r\n        var placeholder_attrs = editor.settings.placeholder_attrs || {style: {position: 'absolute', top:'5px', left:0, color: '#888', padding: '1%', width:'98%', overflow: 'hidden', 'white-space': 'pre-wrap'} };\r\n        var contentAreaContainer = editor.getContentAreaContainer();\r\n\r\n        tinymce.DOM.setStyle(contentAreaContainer, 'position', 'relative');\r\n\r\n        // Create label el\r\n        this.el = tinymce.DOM.add( contentAreaContainer, editor.settings.placeholder_tag || \"label\", placeholder_attrs, placeholder_text );\r\n    }\r\n\r\n    Label.prototype.hide = function(){\r\n        tinymce.DOM.setStyle( this.el, 'display', 'none' );\r\n    }\r\n\r\n    Label.prototype.show = function(){\r\n        tinymce.DOM.setStyle( this.el, 'display', '' );\r\n    }\r\n});\r\n","(function () {\nvar code = (function () {\n    'use strict';\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var getMinWidth = function (editor) {\n      return editor.getParam('code_dialog_width', 600);\n    };\n    var getMinHeight = function (editor) {\n      return editor.getParam('code_dialog_height', Math.min(global$1.DOM.getViewPort().h - 200, 500));\n    };\n    var Settings = {\n      getMinWidth: getMinWidth,\n      getMinHeight: getMinHeight\n    };\n\n    var setContent = function (editor, html) {\n      editor.focus();\n      editor.undoManager.transact(function () {\n        editor.setContent(html);\n      });\n      editor.selection.setCursorLocation();\n      editor.nodeChanged();\n    };\n    var getContent = function (editor) {\n      return editor.getContent({ source_view: true });\n    };\n    var Content = {\n      setContent: setContent,\n      getContent: getContent\n    };\n\n    var open = function (editor) {\n      var minWidth = Settings.getMinWidth(editor);\n      var minHeight = Settings.getMinHeight(editor);\n      var win = editor.windowManager.open({\n        title: 'Source code',\n        body: {\n          type: 'textbox',\n          name: 'code',\n          multiline: true,\n          minWidth: minWidth,\n          minHeight: minHeight,\n          spellcheck: false,\n          style: 'direction: ltr; text-align: left'\n        },\n        onSubmit: function (e) {\n          Content.setContent(editor, e.data.code);\n        }\n      });\n      win.find('#code').value(Content.getContent(editor));\n    };\n    var Dialog = { open: open };\n\n    var register = function (editor) {\n      editor.addCommand('mceCodeEditor', function () {\n        Dialog.open(editor);\n      });\n    };\n    var Commands = { register: register };\n\n    var register$1 = function (editor) {\n      editor.addButton('code', {\n        icon: 'code',\n        tooltip: 'Source code',\n        onclick: function () {\n          Dialog.open(editor);\n        }\n      });\n      editor.addMenuItem('code', {\n        icon: 'code',\n        text: 'Source code',\n        onclick: function () {\n          Dialog.open(editor);\n        }\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('code', function (editor) {\n      Commands.register(editor);\n      Buttons.register(editor);\n      return {};\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}());\n})();\n","(function () {\nvar fullscreen = (function (domGlobals) {\n    'use strict';\n\n    var Cell = function (initial) {\n      var value = initial;\n      var get = function () {\n        return value;\n      };\n      var set = function (v) {\n        value = v;\n      };\n      var clone = function () {\n        return Cell(get());\n      };\n      return {\n        get: get,\n        set: set,\n        clone: clone\n      };\n    };\n\n    var global = tinymce.util.Tools.resolve('tinymce.PluginManager');\n\n    var get = function (fullscreenState) {\n      return {\n        isFullscreen: function () {\n          return fullscreenState.get() !== null;\n        }\n      };\n    };\n    var Api = { get: get };\n\n    var global$1 = tinymce.util.Tools.resolve('tinymce.dom.DOMUtils');\n\n    var fireFullscreenStateChanged = function (editor, state) {\n      editor.fire('FullscreenStateChanged', { state: state });\n    };\n    var Events = { fireFullscreenStateChanged: fireFullscreenStateChanged };\n\n    var DOM = global$1.DOM;\n    var getWindowSize = function () {\n      var w;\n      var h;\n      var win = domGlobals.window;\n      var doc = domGlobals.document;\n      var body = doc.body;\n      if (body.offsetWidth) {\n        w = body.offsetWidth;\n        h = body.offsetHeight;\n      }\n      if (win.innerWidth && win.innerHeight) {\n        w = win.innerWidth;\n        h = win.innerHeight;\n      }\n      return {\n        w: w,\n        h: h\n      };\n    };\n    var getScrollPos = function () {\n      var vp = DOM.getViewPort();\n      return {\n        x: vp.x,\n        y: vp.y\n      };\n    };\n    var setScrollPos = function (pos) {\n      domGlobals.window.scrollTo(pos.x, pos.y);\n    };\n    var toggleFullscreen = function (editor, fullscreenState) {\n      var body = domGlobals.document.body;\n      var documentElement = domGlobals.document.documentElement;\n      var editorContainerStyle;\n      var editorContainer, iframe, iframeStyle;\n      var fullscreenInfo = fullscreenState.get();\n      var resize = function () {\n        DOM.setStyle(iframe, 'height', getWindowSize().h - (editorContainer.clientHeight - iframe.clientHeight));\n      };\n      var removeResize = function () {\n        DOM.unbind(domGlobals.window, 'resize', resize);\n      };\n      editorContainer = editor.getContainer();\n      editorContainerStyle = editorContainer.style;\n      iframe = editor.getContentAreaContainer().firstChild;\n      iframeStyle = iframe.style;\n      if (!fullscreenInfo) {\n        var newFullScreenInfo = {\n          scrollPos: getScrollPos(),\n          containerWidth: editorContainerStyle.width,\n          containerHeight: editorContainerStyle.height,\n          iframeWidth: iframeStyle.width,\n          iframeHeight: iframeStyle.height,\n          resizeHandler: resize,\n          removeHandler: removeResize\n        };\n        iframeStyle.width = iframeStyle.height = '100%';\n        editorContainerStyle.width = editorContainerStyle.height = '';\n        DOM.addClass(body, 'mce-fullscreen');\n        DOM.addClass(documentElement, 'mce-fullscreen');\n        DOM.addClass(editorContainer, 'mce-fullscreen');\n        DOM.bind(domGlobals.window, 'resize', resize);\n        editor.on('remove', removeResize);\n        resize();\n        fullscreenState.set(newFullScreenInfo);\n        Events.fireFullscreenStateChanged(editor, true);\n      } else {\n        iframeStyle.width = fullscreenInfo.iframeWidth;\n        iframeStyle.height = fullscreenInfo.iframeHeight;\n        if (fullscreenInfo.containerWidth) {\n          editorContainerStyle.width = fullscreenInfo.containerWidth;\n        }\n        if (fullscreenInfo.containerHeight) {\n          editorContainerStyle.height = fullscreenInfo.containerHeight;\n        }\n        DOM.removeClass(body, 'mce-fullscreen');\n        DOM.removeClass(documentElement, 'mce-fullscreen');\n        DOM.removeClass(editorContainer, 'mce-fullscreen');\n        setScrollPos(fullscreenInfo.scrollPos);\n        DOM.unbind(domGlobals.window, 'resize', fullscreenInfo.resizeHandler);\n        editor.off('remove', fullscreenInfo.removeHandler);\n        fullscreenState.set(null);\n        Events.fireFullscreenStateChanged(editor, false);\n      }\n    };\n    var Actions = { toggleFullscreen: toggleFullscreen };\n\n    var register = function (editor, fullscreenState) {\n      editor.addCommand('mceFullScreen', function () {\n        Actions.toggleFullscreen(editor, fullscreenState);\n      });\n    };\n    var Commands = { register: register };\n\n    var postRender = function (editor) {\n      return function (e) {\n        var ctrl = e.control;\n        editor.on('FullscreenStateChanged', function (e) {\n          ctrl.active(e.state);\n        });\n      };\n    };\n    var register$1 = function (editor) {\n      editor.addMenuItem('fullscreen', {\n        text: 'Fullscreen',\n        shortcut: 'Ctrl+Shift+F',\n        selectable: true,\n        cmd: 'mceFullScreen',\n        onPostRender: postRender(editor),\n        context: 'view'\n      });\n      editor.addButton('fullscreen', {\n        active: false,\n        tooltip: 'Fullscreen',\n        cmd: 'mceFullScreen',\n        onPostRender: postRender(editor)\n      });\n    };\n    var Buttons = { register: register$1 };\n\n    global.add('fullscreen', function (editor) {\n      var fullscreenState = Cell(null);\n      if (editor.settings.inline) {\n        return Api.get(fullscreenState);\n      }\n      Commands.register(editor, fullscreenState);\n      Buttons.register(editor);\n      editor.addShortcut('Ctrl+Shift+F', '', 'mceFullScreen');\n      return Api.get(fullscreenState);\n    });\n    function Plugin () {\n    }\n\n    return Plugin;\n\n}(window));\n})();\n"],"sourceRoot":""}