(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-96fb2bfe"],{"199e":function(t,e,n){"use strict";n("7925")},"1e6c":function(t,e,n){},"3b4a":function(t,e,n){"use strict";n("557d")},5530:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n("a4d3"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b");var a=n("ade3");function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function r(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(a["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},"557d":function(t,e,n){},"60d3":function(t,e,n){"use strict";n("1e6c")},"648f":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"editableTable"}},[n("table",{ref:"table",staticClass:"m-table",attrs:{width:"100%",cellpadding:"0",cellspacing:"0"}},[t._l(t.title,(function(e,a){return n("th",{key:"th"+a,style:{width:e.width+"px"},attrs:{align:e.align}},["CheckBox"==e.type?n("Checkbox",{on:{"on-change":function(e){return t.selectAll(t.checkAll)}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}}):n("span",[t._v(t._s(e.title))])],1)})),t.data.length?t._l(t.data,(function(e,a){return n("tr",{key:"tr"+a},t._l(t.title,(function(i,r){return n("td",{key:"td"+r,attrs:{align:i.align}},["CheckBox"==i.type?n("Checkbox",{on:{"on-change":function(n){return t.selectRow(a,e.isCheck)}},model:{value:e.isCheck,callback:function(n){t.$set(e,"isCheck",n)},expression:"item.isCheck"}}):t._e(),"Text"==i.type?n("span",["isDisable"==i.key&&0==e[i.key]?n("span",{staticClass:"status-success"},[t._v("启用")]):"isDisable"==i.key&&1==e[i.key]?n("span",{staticClass:"status-fail"},[t._v("禁用")]):"target"==i.key&&1==e[i.key]?n("span",[t._v("当前页打开")]):"target"==i.key&&2==e[i.key]?n("span",[t._v("新页面跳转")]):n("span",[t._v(t._s(e[i.key]))])]):t._e(),"Input"==i.type?n("Input",{model:{value:e[i.key],callback:function(n){t.$set(e,i.key,n)},expression:"item[th.key]"}}):t._e(),"UploadImg"==i.type?n("div",[n("SingleImage",{attrs:{src:e[i.key],index:a,"upload-dir":"img/banner/",preview:!0,"show-hint":!1,"file-size":t.imgMaxSize},on:{"get-img-url":function(e){return t.setImg(e,a)}}})],1):t._e(),"Button"==i.type?n("div",t._l(i.button,(function(e,i){return n("span",{key:i},[n("Button",{staticClass:"table-btn",style:{"min-width":e.minWidth+"px"},attrs:{type:e.type,size:e.size},on:{click:function(n){return t.buttonOperate(e,a)}}},[t._v(t._s(e.text))])],1)})),0):t._e()],1)})),0)})):n("tr",[n("td",{attrs:{colspan:t.title.length,align:"center"}},[t._v(t._s(t.emptyText))])])],2)])},i=[],r=(n("4160"),n("a434"),n("a9e3"),n("159b"),n("a6c3")),s=n("ed08"),o={name:"editableTable",components:{SingleImage:r["a"]},props:{title:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},emptyText:{type:String,default:"暂无数据"},imgMaxSize:{type:Number,default:2048}},data:function(){return{selectList:[],checkAll:!1,showImgModal:!1,imgUrl:"",rowIndex:-1}},methods:{selectAll:function(t){var e=this;this.data.forEach((function(n){t?(n.isCheck=!0,e.selectList.push(n)):(n.isCheck=!1,e.clearSelect())})),this.$emit("on-all-select",this.selectList)},selectRow:function(t,e){var n=this.data[t];e?this.selectList.push(n):this.removeSelectRow(t),this.$emit("on-select",this.selectList,n)},removeSelectRow:function(t){var e=this,n=this.data[t];this.selectList.forEach((function(t,a){t==n&&(n.isCheck=!1,e.selectList.splice(a,1))}))},clearSelect:function(){this.selectList=[]},setImg:function(t,e){this.data[e].imgUrl=t},buttonOperate:function(t,e){var n=this.data[e];"save"==t.click?this.$emit("on-save",n):"delete"==t.click&&(this.$emit("on-delete",n),n.isCheck&&this.removeSelectRow(e),this.data.splice(e,1))},notFoundPic:function(t){Object(s["p"])(t,2)}}},c=o,l=(n("3b4a"),n("2877")),u=Object(l["a"])(c,a,i,!1,null,"385a063e",null);e["a"]=u.exports},"78b5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"g-content"},[n("div",{staticClass:"m-operation"},[n("Button",{staticClass:"operation-btn",attrs:{type:"primary"},on:{click:t.openModel}},[t._v("新增")]),n("Button",{staticClass:"operation-btn",attrs:{type:"warning",disabled:0==t.selectList.length},on:{click:t.deleteData}},[t._v("删除")]),n("Button",{staticClass:"operation-btn",attrs:{type:"default"},on:{click:function(e){return t.$router.go(-1)}}},[t._v("返回")])],1),t.pageLoading?n("Loading"):n("div",[n("EditableTable",{attrs:{title:t.title,data:t.listData},on:{"on-select":t.getSelectRowData,"on-all-select":t.getSelectRowData,"on-save":t.saveThis}}),n("Page",{attrs:{"class-name":"m-page","show-elevator":"","show-sizer":"","show-total":"",total:t.page.dataCount,"page-size":t.page.pageSize,current:t.page.pageNo,"page-size-opts":t.page.pageSizeOpts},on:{"on-change":t.changePage,"on-page-size-change":t.changePageSize}}),n("div",{staticClass:"clearfix"})],1),n("Modal",{attrs:{title:"新增内容"},on:{"on-cancel":function(e){return t.closeModal("paramsForm")}},model:{value:t.showAddModal,callback:function(e){t.showAddModal=e},expression:"showAddModal"}},[n("div",[n("Form",{ref:"paramsForm",attrs:{model:t.paramsForm,rules:t.validate,"label-width":100}},[n("Form-item",{attrs:{label:"内容标题：",prop:"title"}},[n("Input",{model:{value:t.paramsForm.title,callback:function(e){t.$set(t.paramsForm,"title",e)},expression:"paramsForm.title"}})],1),n("Form-item",{attrs:{label:"封面图片："}},[n("SingleImage",{attrs:{src:t.paramsForm.img},on:{"update:src":function(e){return t.$set(t.paramsForm,"img",e)}}})],1),n("Form-item",{attrs:{label:"跳转链接："}},[n("Input",{model:{value:t.paramsForm.url,callback:function(e){t.$set(t.paramsForm,"url",e)},expression:"paramsForm.url"}})],1)],1)],1),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("Button",{attrs:{size:"large"},on:{click:function(e){return t.closeModal("paramsForm")}}},[t._v("取消")]),n("Button",{attrs:{type:"primary",size:"large"},on:{click:function(e){return t.add("paramsForm")}}},[t._v("确定")])],1)])],1)},i=[],r=(n("4160"),n("d81d"),n("159b"),n("5530")),s=n("a6c3"),o=n("648f"),c=n("be51"),l=(n("ff51"),n("ed08")),u=n("ba7e"),d=n("1b62"),p=n("2f62"),f={components:{SingleImage:s["a"],EditableTable:o["a"],Loading:c["a"]},mixins:[d["e"],d["d"],d["c"],d["f"]],computed:Object(r["a"])(Object(r["a"])({},Object(p["b"])(["getImageUrl"])),{},{apiGetList:function(){var t=this;return function(){return u["a"].GetContList(t.parentId,t.page.pageNo,t.page.pageSize)}},apiAdd:function(){var t=this;return function(){return u["a"].AddContent(t.paramsForm)}},apiDelete:function(){var t=this;return function(){return u["a"].DeleteCont(t.selectList)}},apiEdit:function(){var t=this;return function(){return u["a"].EditContent(t.paramsForm,t.editId)}}}),data:function(){return{pageLoading:!1,checkAll:!1,paramsForm:{title:"",img:"",url:"",parentId:""},validate:{title:[{required:!0,message:"内容标题不能为空",trigger:"blur"}]},parentId:"",editId:"",showAddModal:!1,title:[{title:"全选",key:"selecAll",align:"center",type:"CheckBox",width:"50"},{title:"编号",key:"id",align:"center",type:"Text",width:"100"},{title:"内容标题",key:"title",align:"center",type:"Input"},{title:"封面图片",key:"img",align:"center",type:"UploadImg",width:"300"},{title:"跳转链接",key:"url",align:"center",type:"Input"},{title:"操作",key:"operate",align:"center",type:"Button",button:[{type:"primary",size:"small",minWidth:"64",text:"保存",click:"save"}],width:"180"}],listData:[]}},created:function(){this.$store.commit("SET_BREADCRUMB",[{name:"首页",path:"/Home"},{name:"板块列表",path:"/Examples/SectionManage/List"},{name:"内容管理",path:""}]),this.parentId=Object(l["k"])("id"),this.getTableList(),this.initData(this.listData)},methods:{initData:function(t){t.length>0&&t.forEach((function(t){t.isCheck=!1}))},setListData:function(t){t.length>0?this.listData=t.map((function(t){return{id:t.objectId,title:t.title,img:t.img,url:t.url}})):this.listData=[]},saveThis:function(t){var e=t.id,n=t.title,a=t.imgUrl,i=t.url;this.editId=e,this.paramsForm={parentId:this.parentId,title:n,img:a,url:i},this.editData()},openModel:function(){this.showAddModal=!0,this.paramsForm.title="",this.paramsForm.img="",this.paramsForm.url="",this.paramsForm.parentId=this.parentId},closeModal:function(t){this.showAddModal=!1,this.$refs[t].resetFields()},add:function(t){var e=this;this.$refs[t].validate((function(n){n?(e.addData(),setTimeout((function(){e.closeModal(t)}),500)):e.$Message.error("提交失败！填写有误")}))},getSelectRowData:function(t){var e=this;t.forEach((function(t){return e.selectList.push(t.id)}))},notFoundPic:function(t){Object(l["p"])(t,2)}}},h=f,m=(n("e984"),n("2877")),g=Object(m["a"])(h,a,i,!1,null,"54ed0611",null);e["default"]=g.exports},7925:function(t,e,n){},a6c3:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"m-Upload",attrs:{id:"singleImage"}},[""!=t.getImageUrl?n("div",{staticClass:"upload-show"},[n("div",{staticClass:"upload-img-wrap"},[n("img",{staticClass:"upload-image",attrs:{src:t.getImageUrl,alt:"图片加载失败"},on:{error:t.notFoundPic}})]),n("div",{staticClass:"upload-mask"},[t.preview?n("Icon",{staticClass:"g-mr10",attrs:{type:"md-eye"},nativeOn:{click:function(e){return t.viewImage(e)}}}):t._e(),n("Icon",{attrs:{type:"md-create"},nativeOn:{click:function(e){return t.uploadClick(e)}}})],1)]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showUploadBtn,expression:"showUploadBtn"}],staticClass:"upload-btn",on:{click:t.uploadClick}},[n("Icon",{attrs:{type:"md-camera",size:"20"}}),n("input",{ref:"imgFile",attrs:{type:"file",accept:t.format,hidden:""},on:{change:t.selectFile}})],1),"finished"!=t.uploadStatus?[t.showProgress?n("Progress",{staticStyle:{width:"340px"},attrs:{percent:t.percentage,"hide-info":"","stroke-width":3}}):t._e()]:t._e(),t.showHint?n("div",{staticClass:"hint"},[t._v(" * 图片格式要求：jpg、jpeg、png，文件大小为 "),t.fileSize<1024?n("span",[t._v(t._s(t.fileSize)+"kb")]):n("span",[t._v(t._s(Math.floor(t.fileSize/1024))+"M")]),t._v(" 以内。 ")]):t._e(),n("div",{staticClass:"clearfix"}),n("Modal",{staticClass:"m-view-img",attrs:{title:"查看图片",width:"600"},model:{value:t.showModal,callback:function(e){t.showModal=e},expression:"showModal"}},[n("img",{attrs:{src:t.getImageUrl},on:{error:t.notFoundPic}}),n("div",{attrs:{slot:"footer"},slot:"footer"})])],2)},i=[],r=(n("b0c0"),n("a9e3"),n("ff51"),n("1b62")),s={name:"singleImage",mixins:[r["f"]],props:{src:{type:String,default:""},preview:{type:Boolean,default:!1},showHint:{type:Boolean,default:!0},sizeHint:{type:String,default:"100*100px"},fileSize:{type:Number,default:150},index:{type:Number,default:-1}},watch:{src:function(t){this.showUploadBtn=!t,this.getImageUrl=t}},data:function(){return{getImageUrl:this.src,showUploadBtn:!this.src}},methods:{uploadFile:function(t){var e=this;this.progressShow();var n=Bmob.File(t.name,t);this.uploadToBomb(n).then((function(t){e.getImageUrl=t[0].url,e.$emit("update:src",e.getImageUrl),e.$emit("get-img-url",e.getImageUrl)})).catch((function(t){return console.log(t)}))}}},o=s,c=(n("199e"),n("2877")),l=Object(c["a"])(o,a,i,!1,null,"76d80f4a",null);e["a"]=l.exports},a9e3:function(t,e,n){"use strict";var a=n("83ab"),i=n("da84"),r=n("94ca"),s=n("6eeb"),o=n("5135"),c=n("c6b6"),l=n("7156"),u=n("c04e"),d=n("d039"),p=n("7c73"),f=n("241c").f,h=n("06cf").f,m=n("9bf2").f,g=n("58a8").trim,b="Number",v=i[b],y=v.prototype,w=c(p(y))==b,k=function(t){var e,n,a,i,r,s,o,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=g(l),e=l.charCodeAt(0),43===e||45===e){if(n=l.charCodeAt(2),88===n||120===n)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,i=49;break;case 79:case 111:a=8,i=55;break;default:return+l}for(r=l.slice(2),s=r.length,o=0;o<s;o++)if(c=r.charCodeAt(o),c<48||c>i)return NaN;return parseInt(r,a)}return+l};if(r(b,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var I,C=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof C&&(w?d((function(){y.valueOf.call(n)})):c(n)!=b)?l(new v(k(e)),n,C):k(e)},_=a?f(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),S=0;_.length>S;S++)o(v,I=_[S])&&!o(C,I)&&m(C,I,h(v,I));C.prototype=y,y.constructor=C,s(i,b,C)}},ba7e:function(t,e,n){"use strict";n("b64b"),n("d3b7");var a=n("56c6");e["a"]={GetSecList:function(t,e,n){var i=a["a"].GetQuery("Section");return t&&Object.keys(t).length&&(t.id&&i.equalTo("objectId","==",t.id),t.title&&i.equalTo("title","==",t.title),t.type&&i.equalTo("type","==",parseInt(t.type))),new Promise((function(t,r){a["a"].GetListData(i,e,n).then((function(e){return t(e)})).catch((function(t){return r(t)}))}))},AddSection:function(t){return new Promise((function(e,n){a["a"].AddOne("Section",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},EditSection:function(t,e){return new Promise((function(n,i){a["a"].EditOne("Section",e,t).then((function(t){return n(t)})).catch((function(t){return i(t)}))}))},DeleteSec:function(t){return new Promise((function(e,n){a["a"].DelMore("Section",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},GetContList:function(t,e,n){var i=a["a"].GetQuery("SectionCont");return i.equalTo("parentId","==",t),new Promise((function(t,r){a["a"].GetListData(i,e,n).then((function(e){return t(e)})).catch((function(t){return r(t)}))}))},AddContent:function(t){return new Promise((function(e,n){a["a"].AddOne("SectionCont",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},DeleteCont:function(t){return new Promise((function(e,n){a["a"].DelMore("SectionCont",t).then((function(t){return e(t)})).catch((function(t){return n(t)}))}))},EditContent:function(t,e){return console.log(t),new Promise((function(n,i){a["a"].EditOne("SectionCont",e,t).then((function(t){return n(t)})).catch((function(t){return i(t)}))}))}}},be51:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page-load",attrs:{id:"loading"}},[n("Spin",[n("Icon",{staticClass:"spin-icon-load",attrs:{type:"ios-loading",size:"18"}}),n("div",[t._v("玩命加载中...")])],1)],1)},i=[],r={name:"loading",data:function(){return{}}},s=r,o=(n("60d3"),n("2877")),c=Object(o["a"])(s,a,i,!1,null,"7ab36466",null);e["a"]=c.exports},dbb4:function(t,e,n){var a=n("23e7"),i=n("83ab"),r=n("56ef"),s=n("fc6a"),o=n("06cf"),c=n("8418");a({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(t){var e,n,a=s(t),i=o.f,l=r(a),u={},d=0;while(l.length>d)n=i(a,e=l[d++]),void 0!==n&&c(u,e,n);return u}})},e2f3:function(t,e,n){},e439:function(t,e,n){var a=n("23e7"),i=n("d039"),r=n("fc6a"),s=n("06cf").f,o=n("83ab"),c=i((function(){s(1)})),l=!o||c;a({target:"Object",stat:!0,forced:l,sham:!o},{getOwnPropertyDescriptor:function(t,e){return s(r(t),e)}})},e984:function(t,e,n){"use strict";n("e2f3")}}]);