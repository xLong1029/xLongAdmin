(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-048bebf2"],{"491c":function(t,e,a){"use strict";var i=a("6de5"),s=a.n(i);s.a},"648f":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"editableTable"}},[a("table",{ref:"table",staticClass:"m-table",attrs:{width:"100%",cellpadding:"0",cellspacing:"0"}},[t._l(t.title,(function(e,i){return a("th",{key:"th"+i,style:{width:e.width+"px"},attrs:{align:e.align}},["CheckBox"==e.type?a("Checkbox",{on:{"on-change":function(e){return t.selectAll(t.checkAll)}},model:{value:t.checkAll,callback:function(e){t.checkAll=e},expression:"checkAll"}}):a("span",[t._v(t._s(e.title))])],1)})),t.data.length?t._l(t.data,(function(e,i){return a("tr",{key:"tr"+i},t._l(t.title,(function(s,l){return a("td",{key:"td"+l,attrs:{align:s.align}},["CheckBox"==s.type?a("Checkbox",{on:{"on-change":function(a){return t.selectRow(i,e.isCheck)}},model:{value:e.isCheck,callback:function(a){t.$set(e,"isCheck",a)},expression:"item.isCheck"}}):t._e(),"Text"==s.type?a("span",[t._v(t._s(e[s.key]))]):t._e(),"Input"==s.type?a("Input",{model:{value:e[s.key],callback:function(a){t.$set(e,s.key,a)},expression:"item[th.key]"}}):t._e(),"UploadImg"==s.type?a("div",[a("div",{staticClass:"upload-img"},[a("img",{staticClass:"show-img",attrs:{src:e[s.key],alt:"图片加载失败"},on:{error:t.notFoundPic}})]),a("div",{staticClass:"upload-btn"},[a("Button",{attrs:{type:"default",disabled:""==e[s.key],icon:"ios-eye-outline"},on:{click:function(e){return t.viewImage(i)}}},[t._v("查看图片")]),a("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"default",icon:"ios-cloud-upload-outline"},on:{click:function(e){return t.uploadClick(i)}}},[t._v("上传图片")])],1)]):t._e(),"Button"==s.type?a("div",t._l(s.button,(function(e,s){return a("span",{key:s},[a("Button",{staticClass:"table-btn",style:{"min-width":e.minWidth+"px"},attrs:{type:e.type,size:e.size},on:{click:function(a){return t.buttonOperate(e,i)}}},[t._v("\n                  "+t._s(e.text)+"\n                  ")])],1)})),0):t._e()],1)})),0)})):a("tr",[a("td",{attrs:{colspan:t.title.length,align:"center"}},[t._v(t._s(t.emptyText))])])],2),a("input",{ref:"imgFile",attrs:{type:"file",accept:t.imgFormat,hidden:""},on:{change:t.selectFile}}),a("Modal",{attrs:{title:"查看图片"},model:{value:t.showImgModal,callback:function(e){t.showImgModal=e},expression:"showImgModal"}},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imgUrl},on:{error:t.notFoundPic}}),a("div",{attrs:{slot:"footer"},slot:"footer"})])],1)},s=[],l=(a("7f7f"),a("ac6a"),a("c5f6"),a("ff51"),a("ed08")),n={name:"editableTable",props:{title:{type:Array,default:function(){return[]}},data:{type:Array,default:function(){return[]}},emptyText:{type:String,default:"暂无数据"},imgMaxSize:{type:Number,default:2048},imgFormat:{type:Array,default:function(){return["image/jpg","image/jpeg","image/png"]}}},data:function(){return{selectList:[],checkAll:!1,showImgModal:!1,imgUrl:"",rowIndex:-1}},methods:{selectAll:function(t){var e=this;this.data.forEach((function(a){t?(a.isCheck=!0,e.selectList.push(a)):(a.isCheck=!1,e.clearSelect())})),this.$emit("on-all-select",this.selectList)},selectRow:function(t,e){var a=this.data[t];e?this.selectList.push(a):this.removeSelectRow(t),this.$emit("on-select",this.selectList,a)},removeSelectRow:function(t){var e=this,a=this.data[t];this.selectList.forEach((function(t,i){t==a&&(a.isCheck=!1,e.selectList.splice(i,1))}))},clearSelect:function(){this.selectList=[]},viewImage:function(t){this.showImgModal=!0,this.imgUrl=this.data[t].img},uploadClick:function(t,e){this.$refs.imgFile.click(),this.rowIndex=t},selectFile:function(t){var e=this.$refs.imgFile.files;if(e.length>0){var a=e[0].name,i=Math.floor(e[0].size/1024);if(i>this.imgMaxSize)return this.$Notice.warning({title:"超出文件大小限制",desc:"文件 "+a+" 太大，不能超过 2M。"}),!1;this.uploadFile(e[0])}else console.log("获取不到文件列表")},uploadFile:function(t){var e=this,a=Bmob.File(t.name,t);a.save().then((function(t){e.data[e.rowIndex].img=t[0].url,e.$Notice.success({title:"图片上传成功!"})}),(function(t){return e.$Notice.error({title:"图片上传失败，请重试！"})}))},buttonOperate:function(t,e){var a=this.data[e];"save"==t.click?this.$emit("on-save",a):"delete"==t.click&&(this.$emit("on-delete",a),a.isCheck&&this.removeSelectRow(e),this.data.splice(e,1))},notFoundPic:function(t){Object(l["o"])(t,2)}}},c=n,o=(a("491c"),a("2877")),r=Object(o["a"])(c,i,s,!1,null,"870c37c8",null);e["a"]=r.exports},"6de5":function(t,e,a){},"9c30":function(t,e,a){"use strict";var i=a("ec22"),s=a.n(i);s.a},b346:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"g-content"},[a("h2",{staticClass:"m-title"},[t._v("可编辑表格")]),a("div",{staticClass:"m-content"},[a("div",{staticClass:"m-compo-part",staticStyle:{float:"none","max-width":"100%",border:"none"}},[a("EditableTable",{attrs:{title:t.title,data:t.listData},on:{"on-select":t.getSelectRowData,"on-all-select":t.getAllSelectRowData,"on-save":t.getRowData,"on-delete":t.getDelete}}),t._m(0),t._m(1)],1)]),a("Modal",{attrs:{title:"查看要保存的信息"},model:{value:t.showSaveData,callback:function(e){t.showSaveData=e},expression:"showSaveData"}},[a("div",{staticClass:"m-hint g-mb10"},[t._v("这里仅作演示使用，实际操作时直接获取保存内容不进行弹窗")]),a("Form",{attrs:{model:t.saveData,"label-position":"left","label-width":100}},[a("FormItem",{attrs:{label:"编号"}},[a("Input",{model:{value:t.saveData.id,callback:function(e){t.$set(t.saveData,"id",e)},expression:"saveData.id"}})],1),a("FormItem",{attrs:{label:"标题"}},[a("Input",{model:{value:t.saveData.title,callback:function(e){t.$set(t.saveData,"title",e)},expression:"saveData.title"}})],1),a("FormItem",{attrs:{label:"封面图片URL"}},[a("Input",{model:{value:t.saveData.img,callback:function(e){t.$set(t.saveData,"img",e)},expression:"saveData.img"}})],1),a("FormItem",{attrs:{label:"跳转链接URL"}},[a("Input",{model:{value:t.saveData.url,callback:function(e){t.$set(t.saveData,"url",e)},expression:"saveData.url"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-desc"},[a("p",[t._v("属性：")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("title")]),t._v("：表格表头名称。Array类型，默认值为空数组")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("data")]),t._v("：表格数据。Array类型，默认值为空数组")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("emptyText")]),t._v("：源树形数据。String类型，默认值为“暂无数据”")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("imgMaxSize")]),t._v("：图片可上传的文件大小。String类型，默认值为2048")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("imgFormat")]),t._v("：图片可上传的文件格式。Array类型，默认值为['image/jpg', 'image/jpeg', 'image/png']")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"m-desc"},[a("p",[t._v("事件：")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("on-select")]),t._v("：点击复选框时触发，返回已勾选的列表数组、当前行")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("on-save")]),t._v("：点击“保存”按钮时触发，返回当前行")]),a("p",[a("span",{staticClass:"attr-text"},[t._v("on-delete")]),t._v("：点击“删除”按钮时触发，返回当前行")])])}],l=a("648f"),n={components:{EditableTable:l["a"]},data:function(){return{showSaveTitle:"查看要保存的信息",showSaveData:!1,saveData:{},title:[{title:"全选",key:"selecAll",align:"center",type:"CheckBox",width:"50"},{title:"编号",key:"id",align:"center",type:"Text",width:"100"},{title:"标题",key:"title",align:"center",type:"Input"},{title:"封面图片",key:"img",align:"center",type:"UploadImg",width:"300"},{title:"跳转链接",key:"url",align:"center",type:"Input"},{title:"操作",key:"operate",align:"center",type:"Button",button:[{type:"primary",size:"small",minWidth:"64",text:"保存",click:"save"},{type:"primary",size:"small",minWidth:"64",text:"删除",click:"delete"}],width:"200"}],listData:[{id:1,title:"测试数据1",img:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569575452517&di=4dbf36b63f341f6bfd4ea29a29b6d53f&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201806%2F21%2F20180621181323_krhlv.jpeg",url:"https://www.baidu.com/"},{id:2,title:"测试数据2",img:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569575452512&di=e6bb6024b84b573b45ec39d551104c14&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201808%2F19%2F20180819095853_kdjyb.jpeg",url:"https://www.baidu.com/"},{id:3,title:"测试数据3",img:"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1569575452510&di=6a46287ab7d6c951db2074ae7c05574a&imgtype=0&src=http%3A%2F%2Fb-ssl.duitang.com%2Fuploads%2Fitem%2F201708%2F05%2F20170805231958_fNFak.jpeg",url:"https://www.baidu.com/"}]}},created:function(){this.$store.commit("SET_BREADCRUMB",[{name:"首页",path:"/Home"},{name:"表格组件",path:"/Components/Table"}])},methods:{getRowData:function(t){this.showSaveData=!0,this.saveData=t},getDelete:function(t){t&&this.$Message.success("编号为".concat(t.id,"的记录删除成功！"))},getSelectRowData:function(t,e){console.log(t,e),e.isCheck?this.$Message.success("编号为".concat(e.id,"的已选中！")):this.$Message.success("编号为".concat(e.id,"的已取消选中！"))},getAllSelectRowData:function(t){t.length?this.$Message.success("已全选！"):this.$Message.success("已取消全选！")}}},c=n,o=(a("9c30"),a("2877")),r=Object(o["a"])(c,i,s,!1,null,"14c8aa9a",null);e["default"]=r.exports},ec22:function(t,e,a){}}]);